"use strict";var Uit={};window.rivets&&_.isUndefined(window.customRivets)&&!function(){rivets.configure({prefix:"rv",preloadData:!0,rootInterface:".",templateDelimiters:["{","}"],handler:function(a,b,c){this.call(c.view.models,a,b)}}),rivets.adapters[":"]={observe:function(a,b,c){a.on("change:"+b,c)},unobserve:function(a,b,c){a.off("change:"+b,c)},get:function(a,b){return a.get(b)},set:function(a,b,c){a.set(b,c)}},rivets.formatters.currency={read:function(a){var b=parseFloat(a);return b?b.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"0.00"},publish:function(a){return parseFloat(a)}},rivets.binders.util_checked=function(a,b){var c=$(a);1===b||1===b?c.prop("checked",!0):c.prop("checked",!1)},rivets.formatters.formatterHtml=function(a){var b=$("<textarea>"+a+"</textarea>");return b.val().replace(/\r\n|\r|\n/g,"<br /> ")}}(),Uit.ViewComponents={_getAttributeByRivetsValue:function(a,b){var c=a.split(":"),d="";return"model"===b?d=_.first(c):"attribute"===b&&(d=_.last(c)),d},_getValueFromModelOfRivetsValue:function(a){var b=this._getAttributeByRivetsValue(a,"model"),c=this._getAttributeByRivetsValue(a,"attribute"),d=window.s.startsWith(b,"options")?this.options[b.substr(8,b.length)]:this[b];return d.get(c)},_setValueModelFromRivetsValue:function(a,b){var c=this._getAttributeByRivetsValue(a,"model"),d=this._getAttributeByRivetsValue(a,"attribute"),e=window.s.startsWith(c,"options")?this.options[c.substr(8,c.length)]:this[c];e.set(d,b)}},Uit.ViewComponents.Timepicker={handlerTimePicker:function(){var a=this.$el,b=this;a.find(".timepicker").timepicker().on("changeTime.timepicker",function(a){var c=$(a.currentTarget),d=c.attr("rv-value"),e=b._getAttributeByRivetsValue(d,"model"),f=b._getAttributeByRivetsValue(d,"attribute"),g=window.s.startsWith(e,"options")?b.options[e.substr(8,e.length)]:b[e];g.set(f,a.time.value)}),this.$el.find(".timepicker").each(function(){var a=$(this),c=a.attr("rv-value");if(c){var d=b._getValueFromModelOfRivetsValue(c);if(_.isEmpty(d))if(_.isUndefined(a.data("default-time"))&&_.isUndefined(a.attr("default-time")))a.timepicker("setTime","");else{var e=a.timepicker("updateElement");b._setValueModelFromRivetsValue(c,e.val())}else"1"===d[0]&&"2"===d[1]&&(d+=" PM"),a.timepicker("setTime",d)}})}},Uit.ViewComponents.Datepicker={watchChangeDatepicker:!0,_handlerUpdateModelFromDatepicker:function(a,b){var c=a.val(),d=a.attr("rv-value");b&&(c=c.indexOf("_")<0?c:""),_.isUndefined(d)||this._getValueFromModelOfRivetsValue(d)!==c&&this._setValueModelFromRivetsValue(d,c)},handlerDatePicker:function(){var a=this.$el,b=this;a.find(".datepicker").datepicker({autoclose:!0,format:"yyyy-mm-dd",todayHighlight:!0,forceParse:!1}),a.find(".datepicker").on("changeDate",function(a){var c=$(a.currentTarget);b._handlerUpdateModelFromDatepicker(c,!1)}),a.find(".datepicker").on("hide",function(a){var c=$(a.currentTarget);b._handlerUpdateModelFromDatepicker(c,!0)}),this.objetModels={},a.find(".datepicker").each(function(){var a=$(this).attr("rv-value");if(!_.isUndefined(a)){var c=b._getAttributeByRivetsValue(a,"model"),d="change:"+b._getAttributeByRivetsValue(a,"attribute");_.has(b.objetModels,c)?b.objetModels[c].push(d):b.objetModels[c]=[d]}}),_.each(this.objetModels,function(a,c){var d=window.s.startsWith(c,"options")?b.options[c.substr(8,c.length)]:b[c],e=a.join(" ");b.listenTo(d,e,function(a){b.watchChangeDatepicker?_.each(_.keys(a.changed),function(c){b.$el.find("[name="+c+"]").hasClass("datepicker")&&a.changed[c]!==b.$el.find("[name="+c+"]").datepicker("getDate")&&b.$el.find("[name="+c+"]").datepicker("setDate",a.changed[c])}):b.watchChangeDatepicker=!0})}),this._handlerDatepickerFromModel(),_.extend(this.events,{"keypress .datepicker":function(){this.watchChangeDatepicker=!1},"keydown .datepicker":function(a){8===a.keyCode?this.watchChangeDatepicker=!1:this.watchChangeDatepicker=!0}}),this.delegateEvents(this.events)},_handlerDatepickerFromModel:function(){var a=this;this.$el.find(".datepicker").each(function(){var b=$(this),c=b.attr("rv-value");if(c){var d=Uit.getDate(a._getValueFromModelOfRivetsValue(c));_.isEmpty(d)?_.isUndefined(b.data("default-today"))&&_.isUndefined(b.attr("default-today"))?(b.datepicker("update",moment().format("YYYY-MM-DD")),b.datepicker("update","")):b.datepicker("setDate",moment().format("YYYY-MM-DD")):b.datepicker("setDate",d)}else _.isUndefined(b.data("default-today"))&&_.isUndefined(b.attr("default-today"))||b.datepicker("setDate",moment().format("YYYY-MM-DD"))})}},_.extend(Uit.ViewComponents,Uit.ViewComponents.Datepicker,Uit.ViewComponents.Timepicker),Uit.View=Backbone.View.extend({initialize:function(a){window.rivets&&_.extend(this,Uit.ViewComponents),this.options=a||{},_.isUndefined(this.options.model)||(this.model=this.options.model,this.listenTo(this.options.model,"error",this.handlerErrors));var b=this;_.bindAll(this,"render"),this.afterRender=this.afterRender||function(){},this.render=_.wrap(this.render,function(a){return b.options.slowMotionRender?a(!0):a(),this.applyPermissions(),window.rivets&&(this.rivets=window.rivets.bind(this.el,this)),this._afterRender(),b.afterRender(),b}),$(this.el).data("view",this)},emptyElement:function(a){var b=$(a+" > [class]");_.each(b,function(a){var b=$("."+a.className).data("view");_.isUndefined(b)||Uit.cleanView(b)})},_afterRender:function(){var a=this.$el;if(a.find(".datepicker").length>0&&this.handlerDatePicker&&this.handlerDatePicker(),a.find(".timepicker").length>0&&this.handlerTimePicker&&(a.find(".timepicker").timepicker({showInputs:!1,disableFocus:!0,disableMousewheel:!0}),this.handlerTimePicker()),a.find(".control-tooltip").length>0&&this.handlerTooltip&&this.handlerTooltip(),Uit.addMask){var b=a.find(".phone-mask");_.each(b,function(a){a=$(a),Uit.addMask('[name="'+a.attr("name")+'"]',"(999) 999-9999")});var c=a.find(".datepicker");_.each(c,function(a){a=$(a),Uit.addMask('[name="'+a.attr("name")+'"]',"9999-99-99")})}},handlerErrors:function(a,b){var c=this,d=b.responseJSON;_.isUndefined(d)||(this.clearErrors(),_.each(d,function(a,b){"boolean"!=typeof a&&"recatcha"!==b&&"error_code"!==b&&c.showError(b,a)}))},render:function(a){var b=$(this.template());if(Uit.getStateSelect){var c=b.find(".state-helper");_.each(c,function(a){a=$(a),a.append(Uit.getStateSelect())})}return a?this.$el.html(b).hide().slideDown(666):this.$el.html(b),this},applyPermissions:function(){var a=this.$el,b=a.find("[data-permission]");_.each(b,function(a){a=$(a);var b=a.attr("data-permission");App.loginModel.hasAccess(b)?App.loginModel.canEdit(b)||(a.find('input,select,textarea,button:not(.btn-close),a:not([role="tab"])').prop("disabled",!0),a.find("input,select,textarea").css("background-image","none"),a.find('.btn:not(.btn-close),button:not(.btn-close),a:not([role="tab"])').css("opacity",.5).off(),a.find(".icon-typeahead-down").remove()):a.remove()}),_.isUndefined(a.data("permission"))||App.loginModel.hasAccess(a.data("permission"))||(a=$("<div>Not Authorized to view this file</div>"),this.$el.html(a))},serialize:function(a){var b=this.$el,c={},d=_.isUndefined(a)?b.find("input").serializeArray():a.serializeArray();return $.each(d,function(){var a=this.name;c[a]?(c[a].push||(c[a]=[c[a]]),c[a].push(this.value||"")):c[a]=this.value||""}),c},showError:function(a,b){var c,d=this.$el,e=d.find("[name="+a+"]");e.length>0?(e.addClass("error"),c='<label class="error" for="'+a+'">'+b+"</label>",e.parents(".input-group").length?e.parents(".input-group").after($(c)):e.closest("div").append($(c))):(c='<div class="error">'+b+"</div>",this.$el.find("form").append(c))},clearErrors:function(){var a=this.$el;a.find("label.error,div.error").remove(),a.find("input.error").removeClass("error"),a.find(".message-captcha").length>0&&a.find(".message-captcha").empty()},showLoader:function(a){var b='<div class="loader"><i class="fa fa-spinner fa-pulse fa-4x"></i></div>';_.isUndefined(a)||_.isEmpty(a)?_.isUndefined(this.$el)||this.$el.append(b):_.isUndefined(this.$el)||this.$el.find(a).append(b)},removeLoader:function(a){a=_.isUndefined(a)||_.isEmpty(a)?".loader":a+" .loader",_.isUndefined(this.$el)||this.$el.find(a).remove()},onClose:function(){$('.modal.in[data-parent-classname="'+this.className+'"]').length&&$('.modal.in[data-parent-classname="'+this.className+'"]').each(function(){$(this).data("bs.modal").$element.modal("hide")})}}),Uit.getDate=function(a,b){b=b||"YYYY-MM-DD";var c=window.s;return c.isBlank(a)||c.isBlank(a)===!1&&moment(a,"YYYY-MM-DD").isValid()===!1?"":moment(a,"YYYY-MM-DD").format("YYYY-MM-DD")},Uit.Model=Backbone.Model.extend(),Uit.Collection=Backbone.Collection.extend({initialize:function(){},sortBy:"id",sortOrder:"asc",comparator:function(a,b){if(!_.isEmpty(this.sortBy)&&!_.isEmpty(this.sortOrder)){var c=this.sortBy.split(":"),d=c[0],e=c[1];return _.isUndefined(e)?(a=a.get(d),b=b.get(d)):(a=a[e](),b=b[e]()),_.isUndefined(a)||_.isNull(a)||""===a||_.isNumber(a)||(a=a.toString().toLowerCase()),_.isUndefined(b)||_.isNull(b)||""===b||_.isNumber(b)||(b=b.toString().toLowerCase()),s.isBlank(a)&&!s.isBlank(b)||_.isNull(a)&&!_.isNull(b)?1:!s.isBlank(a)&&s.isBlank(b)||!_.isNull(a)&&_.isNull(b)?-1:"asc"===this.sortOrder?a>b?1:b>a?-1:0:a>b?-1:b>a?1:0}}}),Uit.Router=Backbone.Router.extend(),Uit.htmlView=function(a,b){b=b||"#main";var c=$(b+" > [class]");_.each(c,function(a){var b=$("."+a.className).data("view");_.isUndefined(b)||Uit.cleanView(b)}),$(b).html(a.el),a.render()},Uit.append=function(a,b){b=b||"#main",$(b).append(a.el),a.render()},Uit.checkViewExist=function(a){var b=$("."+a);if(b){var c=b.data("view");if(!_.isUndefined(c))return!0}return!1},Uit.cleanElement=function(a,b){var c=$(a);_.isUndefined(b)||(c=b.find(a)),c.empty(),c.unbind()},Uit.cleanView=function(a){_.isUndefined(a)||(a.onClose=a.onClose||function(){},a.onClose(),a.rivets&&a.rivets.unbind(),a.unbind(),a.model&&a.model.unbind("change",a.render,a),a.collection&&a.collection.unbind("change",a.render,a),a.remove(),delete a.$el,delete a.el)},Uit.Modal=function(a){var b=this;return a=a||{},a.sizeModal=a.sizeModal||"",a.view=a.view||"",a.resize=a.resize||!1,a.renderTo=a.renderTo||"",a.parentClassName=a.parentClassName||"",this.init=function(){var b=$('<div class="modal" tabindex="-1" role="dialog"><div class="modal-dialog"><div class="modal-content"></div></div></div>');a.sizeModal&&b.find(".modal-dialog").addClass(a.sizeModal),b.on("hidden.bs.modal",function(){if(b.undelegate(),!_.isUndefined(b.data("view"))){var a=b.data("view");a.onClose=a.onClose||function(){},a.onClose(),a.remove(),a.unbind()}b.remove(),$(".modal.in").length>0&&$("body").addClass("modal-open")}),b.on("shown.bs.modal",function(){a.view instanceof Uit.View&&a.view.render(),a.resize&&b.resizable({minHeight:b.height(),minWidth:b.width()})}),a.renderTo&&$(a.renderTo).length&&$(a.renderTo).append(b),a.parentClassName&&$("."+a.parentClassName).length&&b.attr("data-parent-classname",a.parentClassName),a.view instanceof Uit.View?(b.data("view",a.view),a.view.elementModal=b,b.find(".modal-content").html(a.view.el),b.modal("show")):(b.find(".modal-content").html(a.view),b.modal("show"))},{show:function(){b.init()}}},Uit.CurrencyFormat=function(a,b){return a?(a=parseFloat(a),a.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")):b&&(_.isNull(a)||""===a)?"":"0.00"},Uit.addMask=function(a,b){$(a).mask(b)},Uit.SessionFlash={rows:[],set:function(a,b){var c=_.findWhere(this.rows,{key:a});c?c.value=b:(c={key:a,value:b},this.rows.push(c))},get:function(a){var b=_.findWhere(this.rows,{key:a});return b?(this.rows=_.without(this.rows,b),b.value):void 0}},$.ajaxSetup({statusCode:{401:function(){App.loginModel.logout()},307:function(){var a=1e4,b=6,c='Website code updated, your browser will refresh to clear cache in <span class="cache-counter-seconds">'+b+"</span> seconds...",d=new App.Helpers.Toast({message:c,classType:"warning",fadeOut:15e4});d.render(),App.CacheHashTimeout||(App.CacheHashTimeout=setInterval(function(){$(".cache-counter-seconds").html(--b),0>=b&&(clearInterval(App.CacheHashTimeout),delete App.CacheHashTimeout)},a/6),setTimeout(function(){location.reload()},a))}}});var ajax=$.ajax;$.ajax=function(a){if(a.type)if("post"===a.type.toLowerCase()||"put"===a.type.toLowerCase()||"delete"===a.type.toLowerCase()){var b=$.cookie("token_name"),c=$.cookie("cf_csrf_cookie");_.isUndefined(a.data)||"/api/user_controller/signature_file_upload"===a.url||"/api/documents_controller/document_upload"===a.url||"/api/letters_word_controller/upload_letter"===a.url||"/api/documents_controller/document_client_rep_upload"===a.url||(_.isEmpty(a.data)||(a.data=JSON.parse(a.data)),a.data.cache_hash=App.CacheHash,a.data[b]=c,a.data=JSON.stringify(a.data))}else _.isUndefined(a.data)?(a.data={},a.data.cache_hash=App.CacheHash):"string"==typeof a.data?a.data+="&cache_hash="+App.CacheHash:a.data.cache_hash=App.CacheHash;else"string"==typeof a?(a+="&cache_hash="+App.CacheHash,arguments[0]=a):"string"==typeof a.data?a.data+="&cache_hash="+App.CacheHash:_.isUndefined(a.data)?(a.data={},a.data.cache_hash=App.CacheHash):a.data.cache_hash=App.CacheHash;return ajax.apply($,arguments)};var App={Const:{limitTypeahead:9999,likeSearchOffset:50,wcFileModule:1,subroFileModule:2,Designations:{lienBill:53,lienOMFS:55,lienObjection:54},clientTypes:{INSURER:2,TPA:3,COMPANY:4,INDIVIDUAL:5},eventTypes:{wcClosed:19,wcLienClosed:199,wcOpen:202,wcReOpen:203,wcLienOpen:204,wcLienReOpen:205,subroOpen:268,subroReOpen:269,subroClosed:270,subroLienOpen:271,subroLienReOpen:272,subroLienClosed:273,subroInterventionOpen:274,subroInterventionReOpen:275,subroInterventionReClosed:276},filesURLs:{1:"#files",2:"#subro_files"},modules:{1:"Workers Compensation",2:"Subrogation"}},Base:{},Templates:{},Controllers:{},Helpers:{},Views:{},Models:{},Collections:{},Router:{},siteKey:"6LekwwYTAAAAAPCBtHIJwNg4S0xQE5T2DAh0y0OE"};!function(){CKEDITOR.stylesSet.add("cs_styles_ckeditor",[{name:"p.Editable",element:"p",attributes:{"class":"control-letter editable"}},{name:"p.EditWarning",element:"p",attributes:{"class":"control-letter editWarning"}},{name:"p.CenterText",element:"p",attributes:{"class":"control-letter centerText"}},{name:"p.indent+15",element:"p",styles:{"text-indent":"15px"}},{name:"p.indent+25",element:"p",styles:{"text-indent":"25px"}},{name:"p.indent+30",element:"p",styles:{"text-indent":"30px"}},{name:"p.indent+35",element:"p",styles:{"text-indent":"35px"}},{name:"p.indent+40",element:"p",styles:{"text-indent":"40px"}},{name:"p.indent+45",element:"p",styles:{"text-indent":"45px"}}])}(),function(){function a(a){var b=$(a.currentTarget),c="{{"+b.data("macro")+"}}",d=b.data("editor");CKEDITOR.instances[d].focus(),CKEDITOR.instances[d].insertHtml(c),CKEDITOR.dialog.getCurrent().hide()}CKEDITOR.plugins.add("macros",{init:function(b){b.ui.addButton("btnMacro",{label:"Macros",command:"handlerDialog"}),b.addCommand("handlerDialog",new CKEDITOR.dialogCommand("winDialog")),CKEDITOR.dialog.add("winDialog",function(b){var c=b.config.macros;if(0!==c.length){var d=[];return _.each(_.keys(c),function(a){var e=$("<div></div>");_.each(_.keys(c[a]),function(d){var f=$('<table class="table table-macro table-hover" style="width: 100%;"><thead></thead><tbody></tbody></table>'),g=c[a][d],h=$('<tr><th style="background: #E6E6E6;" colspan="2"></th></tr>');h.find("th").html("<strong>"+d+"</strong>"),f.find("thead").append(h),_.each(_.keys(g),function(a){var c=$('<tr data-editor="'+b.name+'" class="row-macro" data-macro="'+a+'"><td style="width: 100px;cursor: pointer;"></td><td style="cursor: pointer;"></td></tr>');c.find("td:first-child").html(a),c.find("td:last-child").html(g[a]),f.find("tbody").append(c)}),e.append(f)}),d.push({id:a,label:a,title:a,style:"height: 400px;overflow-y: scroll;",elements:[{type:"html",id:"body_"+a,html:e.html()}]})}),$("body").off("click",".row-macro",a),$("body").on("click",".row-macro",a),{title:"Macros",minWidth:800,resizable:CKEDITOR.DIALOG_RESIZE_BOTH,contents:d,buttons:[CKEDITOR.dialog.cancelButton]}}})}})}(),App.Helpers.Casefriend={},App.Helpers.initTypeahead=function(a){function b(a){a=a||[];var b=d.find(e+" ~ .tt-dropdown-menu");if(a.length){$.each(a,function(a,b){m.push(b)}),m=_.uniq(m);var f=d.find(e+".tt-input").data("ttTypeahead").dropdown.datasets[0];f._render(c,m),l=!0}else l=!1;d.find("#tt-spin-loader").remove(),b.css("overflow-y","auto")}var c,d=a.view.$el,e=a.elemClass||"",f=a.urlBuild||"",g=a.processFunction||function(){},h=a.cleanValueAfterEnter||!1,i=a.displayKey||App.Helpers.handlerDisplayKey,j=a.nameKey||"last",k=0,l=!0,m=[],n={limit:App.Const.limitTypeahead,cache:!1,url:_.isString(f)?f:_.isObject(f)&&!_.isUndefined(f.url)?f.url:"",searchAll:!1,urlBuild:f,replace:function(a,b){b=this.searchAll||_.isEmpty(b)?"*.*":encodeURIComponent(b),this.searchAll=!1;var d=a,e="";return _.isObject(this.urlBuild)&&(d+="/",this.urlBuild.resource&&(d+=_.isFunction(this.urlBuild.resource)?this.urlBuild.resource():this.urlBuild.resource),this.urlBuild.extraQuery&&this.urlBuild.extraQuery()&&(e="&"+this.urlBuild.extraQuery())),d+="?search="+b+e,d+="&offset="+k,c=b,d},ajax:{complete:function(a){if(a=a.responseJSON||[],a.length>0){$.each(a,function(a,b){m.push(b)});var b=d.find(e+".tt-input"),c=_.isEmpty(b.attr("placeholder"))?b.data("placeholder"):b.attr("placeholder");_.isEmpty(b.typeahead("val"))&&d.find(e+".tt-input ~ .tt-dropdown-menu").is(":visible")&&(b.attr("placeholder",""),b.data("placeholder",c)),$("body").css("overflow","hidden")}if(_.isUndefined(d.find(e+".tt-input").data("ttTypeahead"))||(d.find(e+".tt-input").data("ttTypeahead").minLength=1),!_.isUndefined(d.find(e).parent().next())&&d.find(e).parent().next().hasClass("icon-typeahead-down")){var f='<i class="fa fa-chevron-down"></i>';d.find(e).parent().next().html(f)}$(e+" ~ .tt-dropdown-menu").is(":off-bottom")&&$(e+" ~ .tt-dropdown-menu").css({bottom:"100%",top:""})}}},o=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("value"),queryTokenizer:Bloodhound.tokenizers.whitespace,remote:n,limit:App.Const.limitTypeahead,rateLimitWait:100});o.initialize(),d.find(e).typeahead("destroy");var p=d.find(e).typeahead({minLength:1,highlight:!0},{name:"name",displayKey:i,nameKey:j,source:o.ttAdapter(),dynamic:!0,delay:500});return d.find(e).data("engine",o),p.off("typeahead:selected typeahead:autocompleted"),p.on("typeahead:selected typeahead:autocompleted typeahead:change",function(a,b){_.isUndefined(b)||(d.find(".tt-dropdown-menu").css("display","none"),d.find(e+".tt-input").data("ttTypeahead").minLength=1,d.find(e).data("datum",b),c=void 0,k=0,l=!0,$("body").css("overflow","auto"),_.isUndefined(g)||g(b))}),p.off("typeahead:closed"),p.on("typeahead:closed",function(){var a=d.find(e+".tt-input").data("placeholder");_.isUndefined(a)||d.find(e+".tt-input").attr("placeholder",a),c=void 0,k=0,m=[],l=!0,$("body").css("overflow","auto"),$(e+" ~ .tt-dropdown-menu").css({"overflow-y":"auto",bottom:"",top:"100%"})}),p.bind("keydown",function(a){return 27===a.which?(a.preventDefault(),void a.stopPropagation()):void 0}),p.keypress(function(a){if(k=0,13===a.which){a.preventDefault();var b=d.find(".tt-suggestion").data("ttDatum");if(_.isUndefined(b))return;p.trigger("typeahead:selected",[b]),h?d.find(e).typeahead("val",""):d.find(e).typeahead("val",i(b)),d.find(e+".tt-input").data("ttTypeahead")&&(d.find(e+".tt-input").data("ttTypeahead").minLength=0)}}),d.find(e).data("datum",{}),d.find(e+" ~ .tt-dropdown-menu").on("scroll",function(){var a=$(this);if(a.scrollTop()+a.innerHeight()>=a[0].scrollHeight)if(l){var e=a.find(".tt-dataset-name > .tt-suggestions");d.find("#tt-spin-loader").length?a.css("overflow-y","hidden"):(e.append('<div id="tt-spin-loader" class="tt-suggestion t-align-center"><span class="fa fa-circle-o-notch fa-spin"></span></div>'),k+=App.Const.likeSearchOffset),o.get(c,b)}else k=0}),p},App.Helpers.initSelect2=function(a,b){a.select2(b)},App.Helpers.showAllEntities=function(a,b){var c=$(a.currentTarget),d=b.find("input[name="+c.data("input-name")+"]"),e=d.data("engine"),f=$.Event("keydown");_.isUndefined(d.data("ttTypeahead"))||(d.data("ttTypeahead").minLength=0),_.isUndefined(e)||(e.remote.searchAll=!0),f.keyCode=f.which=40,d.focus(),d.trigger(f)},App.Helpers.handlerDisplayKey=function(a){return 0===_.size(a)?"":a.typeaheadResult},App.Helpers.Toast=Uit.View.extend({initialize:function(a){this.options=a||{},this.options.message=this.options.message||"",this.options.classType=this.options.classType||"danger",this.options.fadeOut=this.options.fadeOut||4e3},render:function(){var a=_.template(['<div class="toast alert alert-<%= classType %>" role="alert">','<span class="pull-left">','<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span></span>',"<p><%= message %></p>","</div>"].join(""));return this.$el.html(a(this.options)),this.$el.css({"z-index":1050,position:"relative"}),this._removeWhenClicked(),$("body").append(this.el),this.fadeOut(this.options.fadeOut),this},fadeOut:function(a){a=a||4e3,this.$el.fadeOut(a,function(){$(this).remove()})},_removeWhenClicked:function(){this.$el.find(".toast").on("click",function(){$(this).remove()})}});var oldBackboneSync=Backbone.sync;Backbone.sync=function(a,b,c){var d=c.beforeSend;return c.beforeSend=function(){return d?d.apply(this,arguments):void 0},"delete"===a&&(c.data&&(c.data=JSON.stringify(c.data)),c.contentType="application/json"),oldBackboneSync.apply(this,[a,b,c])},App.Helpers.splitPersonName=function(a){var b=a.replace(/\s+/g," ").trim().split(" "),c={first:"",middle:"",last:""};if(c.first=b[0],3===b.length)c.middle=b[1],c.last=b[2];else if(2===b.length)c.middle="",c.last=b[1];else if(b.length>3){for(var d=1;d<b.length-1;d++)c.middle+=" "+b[d];c.last=b[b.length-1]}return c.middle=String(c.middle).trim(),c},App.Helpers.getStateSelect=function(){return'<option value="AL">Alabama</option><option value="AK">Alaska</option><option value="AZ">Arizona</option><option value="AR">Arkansas</option><option value="CA">California</option><option value="CO">Colorado</option><option value="CT">Connecticut</option><option value="DE">Delaware</option><option value="FL">Florida</option><option value="GA">Georgia</option><option value="HI">Hawaii</option><option value="ID">Idaho</option><option value="IL">Illinois</option><option value="IN">Indiana</option><option value="IA">Iowa</option><option value="KS">Kansas</option><option value="KY">Kentucky</option><option value="LA">Louisiana</option><option value="ME">Maine</option><option value="MD">Maryland</option><option value="MA">Massachusetts</option><option value="MI">Michigan</option><option value="MN">Minnesota</option><option value="MS">Mississippi</option><option value="MO">Missouri</option><option value="MT">Montana</option><option value="NE">Nebraska</option><option value="NV">Nevada</option><option value="NH">New Hampshire</option><option value="NJ">New Jersey</option><option value="NM">New Mexico</option><option value="NY">New York</option><option value="NC">North Carolina</option><option value="ND">North Dakota</option><option value="OH">Ohio</option><option value="OK">Oklahoma</option><option value="OR">Oregon</option><option value="PA">Pennsylvania</option><option value="RI">Rhode Island</option><option value="SC">South Carolina</option><option value="SD">South Dakota</option><option value="TN">Tennessee</option><option value="TX">Texas</option><option value="UT">Utah</option><option value="VT">Vermont</option><option value="VA">Virginia</option><option value="WA">Washington</option><option value="WV">West Virginia</option><option value="WI">Wisconsin</option><option value="WY">Wyoming</option>'},App.Helpers.getTimezoneSelect=function(){return'<option value="Pacific/Midway">Pacific/Midway (-11:00:00)</option><option value="Pacific/Samoa">Pacific/Samoa (-11:00:00)</option><option value="Pacific/Pago_Pago">Pacific/Pago_Pago (-11:00:00)</option><option value="Pacific/Niue">Pacific/Niue (-11:00:00)</option><option value="Pacific/Rarotonga">Pacific/Rarotonga (-10:00:00)</option><option value="America/Adak">America/Adak (-10:00:00)</option><option value="America/Atka">America/Atka (-10:00:00)</option><option value="Pacific/Honolulu">Pacific/Honolulu (-10:00:00)</option><option value="Pacific/Tahiti">Pacific/Tahiti (-10:00:00)</option><option value="Pacific/Johnston">Pacific/Johnston (-10:00:00)</option><option value="Pacific/Marquesas">Pacific/Marquesas (-09:30:00)</option><option value="Pacific/Gambier">Pacific/Gambier (-09:00:00)</option><option value="America/Nome">America/Nome (-09:00:00)</option><option value="America/Juneau">America/Juneau (-09:00:00)</option><option value="America/Sitka">America/Sitka (-09:00:00)</option><option value="America/Metlakatla">America/Metlakatla (-09:00:00)</option><option value="America/Anchorage">America/Anchorage (-09:00:00)</option><option value="America/Yakutat">America/Yakutat (-09:00:00)</option><option value="Pacific/Pitcairn">Pacific/Pitcairn (-08:00:00)</option><option value="America/Dawson">America/Dawson (-08:00:00)</option><option value="America/Ensenada">America/Ensenada (-08:00:00)</option><option value="America/Tijuana">America/Tijuana (-08:00:00)</option><option value="America/Whitehorse">America/Whitehorse (-08:00:00)</option><option value="America/Vancouver">America/Vancouver (-08:00:00)</option><option value="America/Santa_Isabel">America/Santa_Isabel (-08:00:00)</option><option value="America/Los_Angeles">America/Los_Angeles (-08:00:00)</option><option value="America/Yellowknife">America/Yellowknife (-07:00:00)</option><option value="America/Hermosillo">America/Hermosillo (-07:00:00)</option><option value="America/Denver">America/Denver (-07:00:00)</option><option value="America/Shiprock">America/Shiprock (-07:00:00)</option><option value="America/Phoenix">America/Phoenix (-07:00:00)</option><option value="America/Ojinaga">America/Ojinaga (-07:00:00)</option><option value="America/Boise">America/Boise (-07:00:00)</option><option value="America/Cambridge_Bay">America/Cambridge_Bay (-07:00:00)</option><option value="America/Mazatlan">America/Mazatlan (-07:00:00)</option><option value="America/Chihuahua">America/Chihuahua (-07:00:00)</option><option value="America/Creston">America/Creston (-07:00:00)</option><option value="America/Dawson_Creek">America/Dawson_Creek (-07:00:00)</option><option value="America/Inuvik">America/Inuvik (-07:00:00)</option><option value="America/Edmonton">America/Edmonton (-07:00:00)</option><option value="America/Fort_Nelson">America/Fort_Nelson (-07:00:00)</option><option value="America/Monterrey">America/Monterrey (-06:00:00)</option><option value="America/Mexico_City">America/Mexico_City (-06:00:00)</option><option value="America/Indiana/Knox">America/Indiana/Knox (-06:00:00)</option><option value="America/Swift_Current">America/Swift_Current (-06:00:00)</option><option value="America/Tegucigalpa">America/Tegucigalpa (-06:00:00)</option><option value="America/Bahia_Banderas">America/Bahia_Banderas (-06:00:00)</option><option value="America/Merida">America/Merida (-06:00:00)</option><option value="America/El_Salvador">America/El_Salvador (-06:00:00)</option><option value="America/Menominee">America/Menominee (-06:00:00)</option><option value="America/Costa_Rica">America/Costa_Rica (-06:00:00)</option><option value="America/Matamoros">America/Matamoros (-06:00:00)</option><option value="America/Guatemala">America/Guatemala (-06:00:00)</option><option value="America/Knox_IN">America/Knox_IN (-06:00:00)</option><option value="America/Managua">America/Managua (-06:00:00)</option><option value="America/Indiana/Tell_City">America/Indiana/Tell_City (-06:00:00)</option><option value="America/Winnipeg">America/Winnipeg (-06:00:00)</option><option value="America/Resolute">America/Resolute (-06:00:00)</option><option value="America/Regina">America/Regina (-06:00:00)</option><option value="America/North_Dakota/New_Salem">America/North_Dakota/New_Salem (-06:00:00)</option><option value="Pacific/Galapagos">Pacific/Galapagos (-06:00:00)</option><option value="America/North_Dakota/Center">America/North_Dakota/Center (-06:00:00)</option><option value="America/Chicago">America/Chicago (-06:00:00)</option><option value="America/North_Dakota/Beulah">America/North_Dakota/Beulah (-06:00:00)</option><option value="America/Rainy_River">America/Rainy_River (-06:00:00)</option><option value="America/Rankin_Inlet">America/Rankin_Inlet (-06:00:00)</option><option value="America/Belize">America/Belize (-06:00:00)</option><option value="America/Nipigon">America/Nipigon (-05:00:00)</option><option value="America/Bogota">America/Bogota (-05:00:00)</option><option value="America/Cancun">America/Cancun (-05:00:00)</option><option value="America/Cayman">America/Cayman (-05:00:00)</option><option value="America/Eirunepe">America/Eirunepe (-05:00:00)</option><option value="America/Atikokan">America/Atikokan (-05:00:00)</option><option value="America/Coral_Harbour">America/Coral_Harbour (-05:00:00)</option><option value="America/Guayaquil">America/Guayaquil (-05:00:00)</option><option value="America/Detroit">America/Detroit (-05:00:00)</option><option value="America/Indiana/Marengo">America/Indiana/Marengo (-05:00:00)</option><option value="America/Indiana/Petersburg">America/Indiana/Petersburg (-05:00:00)</option><option value="America/Indiana/Vevay">America/Indiana/Vevay (-05:00:00)</option><option value="America/Indiana/Vincennes">America/Indiana/Vincennes (-05:00:00)</option><option value="America/Indiana/Winamac">America/Indiana/Winamac (-05:00:00)</option><option value="America/Indiana/Indianapolis">America/Indiana/Indianapolis (-05:00:00)</option><option value="America/Iqaluit">America/Iqaluit (-05:00:00)</option><option value="America/Havana">America/Havana (-05:00:00)</option><option value="America/Kentucky/Monticello">America/Kentucky/Monticello (-05:00:00)</option><option value="America/Kentucky/Louisville">America/Kentucky/Louisville (-05:00:00)</option><option value="America/Lima">America/Lima (-05:00:00)</option><option value="America/Fort_Wayne">America/Fort_Wayne (-05:00:00)</option><option value="America/Indianapolis">America/Indianapolis (-05:00:00)</option><option value="America/Jamaica">America/Jamaica (-05:00:00)</option><option value="America/Louisville">America/Louisville (-05:00:00)</option><option value="America/New_York">America/New_York (-05:00:00)</option><option value="America/Nassau">America/Nassau (-05:00:00)</option><option value="America/Montreal">America/Montreal (-05:00:00)</option><option value="America/Toronto">America/Toronto (-05:00:00)</option><option value="America/Panama">America/Panama (-05:00:00)</option><option value="America/Pangnirtung">America/Pangnirtung (-05:00:00)</option><option value="America/Port-au-Prince">America/Port-au-Prince (-05:00:00)</option><option value="America/Porto_Acre">America/Porto_Acre (-05:00:00)</option><option value="America/Rio_Branco">America/Rio_Branco (-05:00:00)</option><option value="America/Thunder_Bay">America/Thunder_Bay (-05:00:00)</option><option value="Pacific/Easter">Pacific/Easter (-05:00:00)</option><option value="America/Lower_Princes">America/Lower_Princes (-04:00:00)</option><option value="America/St_Kitts">America/St_Kitts (-04:00:00)</option><option value="America/Blanc-Sablon">America/Blanc-Sablon (-04:00:00)</option><option value="America/Dominica">America/Dominica (-04:00:00)</option><option value="America/Guadeloupe">America/Guadeloupe (-04:00:00)</option><option value="America/Santo_Domingo">America/Santo_Domingo (-04:00:00)</option><option value="America/Guyana">America/Guyana (-04:00:00)</option><option value="America/Porto_Velho">America/Porto_Velho (-04:00:00)</option><option value="America/Anguilla">America/Anguilla (-04:00:00)</option><option value="America/Grenada">America/Grenada (-04:00:00)</option><option value="America/Glace_Bay">America/Glace_Bay (-04:00:00)</option><option value="America/Halifax">America/Halifax (-04:00:00)</option><option value="America/Virgin">America/Virgin (-04:00:00)</option><option value="America/Barbados">America/Barbados (-04:00:00)</option><option value="America/Martinique">America/Martinique (-04:00:00)</option><option value="America/Thule">America/Thule (-04:00:00)</option><option value="America/St_Lucia">America/St_Lucia (-04:00:00)</option><option value="America/Manaus">America/Manaus (-04:00:00)</option><option value="America/La_Paz">America/La_Paz (-04:00:00)</option><option value="America/Tortola">America/Tortola (-04:00:00)</option><option value="America/Moncton">America/Moncton (-04:00:00)</option><option value="America/Caracas">America/Caracas (-04:00:00)</option><option value="America/St_Vincent">America/St_Vincent (-04:00:00)</option><option value="America/Grand_Turk">America/Grand_Turk (-04:00:00)</option><option value="America/Kralendijk">America/Kralendijk (-04:00:00)</option><option value="America/Curacao">America/Curacao (-04:00:00)</option><option value="America/Goose_Bay">America/Goose_Bay (-04:00:00)</option><option value="America/Aruba">America/Aruba (-04:00:00)</option><option value="America/St_Thomas">America/St_Thomas (-04:00:00)</option><option value="America/Campo_Grande">America/Campo_Grande (-04:00:00)</option><option value="America/St_Barthelemy">America/St_Barthelemy (-04:00:00)</option><option value="America/Puerto_Rico">America/Puerto_Rico (-04:00:00)</option><option value="America/Port_of_Spain">America/Port_of_Spain (-04:00:00)</option><option value="America/Antigua">America/Antigua (-04:00:00)</option><option value="America/Montserrat">America/Montserrat (-04:00:00)</option><option value="America/Boa_Vista">America/Boa_Vista (-04:00:00)</option><option value="America/Cuiaba">America/Cuiaba (-04:00:00)</option><option value="America/Marigot">America/Marigot (-04:00:00)</option><option value="America/St_Johns">America/St_Johns (-03:30:00)</option><option value="America/Catamarca">America/Catamarca (-03:00:00)</option><option value="America/Maceio">America/Maceio (-03:00:00)</option><option value="America/Buenos_Aires">America/Buenos_Aires (-03:00:00)</option><option value="America/Cayenne">America/Cayenne (-03:00:00)</option><option value="America/Miquelon">America/Miquelon (-03:00:00)</option><option value="America/Montevideo">America/Montevideo (-03:00:00)</option><option value="America/Argentina/San_Juan">America/Argentina/San_Juan (-03:00:00)</option><option value="America/Argentina/Salta">America/Argentina/Salta (-03:00:00)</option><option value="America/Santiago">America/Santiago (-03:00:00)</option><option value="America/Paramaribo">America/Paramaribo (-03:00:00)</option><option value="America/Argentina/Rio_Gallegos">America/Argentina/Rio_Gallegos (-03:00:00)</option><option value="America/Argentina/La_Rioja">America/Argentina/La_Rioja (-03:00:00)</option><option value="America/Araguaina">America/Araguaina (-03:00:00)</option><option value="America/Belem">America/Belem (-03:00:00)</option><option value="America/Santarem">America/Santarem (-03:00:00)</option><option value="America/Sao_Paulo">America/Sao_Paulo (-03:00:00)</option><option value="America/Bahia">America/Bahia (-03:00:00)</option><option value="America/Recife">America/Recife (-03:00:00)</option><option value="America/Asuncion">America/Asuncion (-03:00:00)</option><option value="America/Argentina/Mendoza">America/Argentina/Mendoza (-03:00:00)</option><option value="America/Argentina/Jujuy">America/Argentina/Jujuy (-03:00:00)</option><option value="America/Argentina/Cordoba">America/Argentina/Cordoba (-03:00:00)</option><option value="America/Argentina/ComodRivadavia">America/Argentina/ComodRivadavia (-03:00:00)</option><option value="America/Godthab">America/Godthab (-03:00:00)</option><option value="America/Argentina/Catamarca">America/Argentina/Catamarca (-03:00:00)</option><option value="America/Argentina/Buenos_Aires">America/Argentina/Buenos_Aires (-03:00:00)</option><option value="America/Fortaleza">America/Fortaleza (-03:00:00)</option><option value="America/Argentina/Ushuaia">America/Argentina/Ushuaia (-03:00:00)</option><option value="America/Argentina/Tucuman">America/Argentina/Tucuman (-03:00:00)</option><option value="America/Argentina/San_Luis">America/Argentina/San_Luis (-03:00:00)</option><option value="America/Mendoza">America/Mendoza (-03:00:00)</option><option value="America/Rosario">America/Rosario (-03:00:00)</option><option value="America/Cordoba">America/Cordoba (-03:00:00)</option><option value="America/Jujuy">America/Jujuy (-03:00:00)</option><option value="America/Noronha">America/Noronha (-02:00:00)</option><option value="America/Scoresbysund">America/Scoresbysund (-01:00:00)</option><option value="America/Danmarkshavn">America/Danmarkshavn (00:00:00)</option><option value="Pacific/Palau">Pacific/Palau (09:00:00)</option><option value="Pacific/Yap">Pacific/Yap (10:00:00)</option><option value="Pacific/Truk">Pacific/Truk (10:00:00)</option><option value="Pacific/Chuuk">Pacific/Chuuk (10:00:00)</option><option value="Pacific/Port_Moresby">Pacific/Port_Moresby (10:00:00)</option><option value="Pacific/Saipan">Pacific/Saipan (10:00:00)</option><option value="Pacific/Guam">Pacific/Guam (10:00:00)</option><option value="Pacific/Guadalcanal">Pacific/Guadalcanal (11:00:00)</option><option value="Pacific/Kosrae">Pacific/Kosrae (11:00:00)</option><option value="Pacific/Norfolk">Pacific/Norfolk (11:00:00)</option><option value="Pacific/Pohnpei">Pacific/Pohnpei (11:00:00)</option><option value="Pacific/Noumea">Pacific/Noumea (11:00:00)</option><option value="Pacific/Ponape">Pacific/Ponape (11:00:00)</option><option value="Pacific/Bougainville">Pacific/Bougainville (11:00:00)</option><option value="Pacific/Efate">Pacific/Efate (11:00:00)</option><option value="Pacific/Funafuti">Pacific/Funafuti (12:00:00)</option><option value="Pacific/Nauru">Pacific/Nauru (12:00:00)</option><option value="Pacific/Majuro">Pacific/Majuro (12:00:00)</option><option value="Pacific/Tarawa">Pacific/Tarawa (12:00:00)</option><option value="Pacific/Kwajalein">Pacific/Kwajalein (12:00:00)</option><option value="Pacific/Wake">Pacific/Wake (12:00:00)</option><option value="Pacific/Fiji">Pacific/Fiji (12:00:00)</option><option value="Pacific/Wallis">Pacific/Wallis (12:00:00)</option><option value="Pacific/Tongatapu">Pacific/Tongatapu (13:00:00)</option><option value="Pacific/Fakaofo">Pacific/Fakaofo (13:00:00)</option><option value="Pacific/Auckland">Pacific/Auckland (13:00:00)</option><option value="Pacific/Enderbury">Pacific/Enderbury (13:00:00)</option><option value="Pacific/Chatham">Pacific/Chatham (13:45:00)</option><option value="Pacific/Apia">Pacific/Apia (14:00:00)</option><option value="Pacific/Kiritimati">Pacific/Kiritimati (14:00:00)</option>';

},App.Helpers.getStateName=function(a,b){var c="",d=App.Helpers.getStateSelect(),e="";_.each(b,function(b){if(e=a.get(b)){var f=new RegExp('<option value="'+e+'">(.*?)</option>',"g"),g=new RegExp('<option value="'+e+'">',"g"),h=d.match(f).map(function(a){var b=a.replace(g,"");return b.replace(/<\/?option>/g,"")});c=h[0]}else c="";a.set(b+"Name",c)})},App.Helpers.CurrencyFormat=function(a,b){return a?(a=parseFloat(a),a.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")):b&&(_.isNull(a)||""===a)?"":"0.00"},App.Helpers.IntegerWithCommas=function(a){return a?(a=parseInt(a,10),a.toLocaleString("en")):!1},App.Helpers.FormatterHtml=function(a){var b=$("<textarea>"+a+"</textarea>");return b.val().replace(/\r\n|\r|\n/g,"<br /> ")},App.Helpers.replaceSpecialCharaters=function(a,b){return b=_.isUndefined(b)?!0:b,a=a||"",b&&(a=encodeURIComponent(a)),a.replace(/[!'()*]/g,function(a){return"%"+a.charCodeAt(0).toString(16)})},App.Helpers.TypeaheadFormatter=function(a){if(0===_.size(a))return"";if(a instanceof Backbone.Model&&(_.isUndefined(a.get("first"))||(a.first=a.get("first"),a.last=a.get("last"),a.middle=a.get("middle"),a.email=a.get("email")),_.isUndefined(a.get("doctorFirstName"))||(a.first=a.get("doctorFirstName"),a.last=a.get("doctorLastName"),a.middle=a.get("doctorMiddleName"),a.email=a.get("doctorEmail"),a.physicalAddress=a.get("physicalAddress"),a.physicalCity=a.get("physicalCity"))),a.companyName)return a.companyName+(_.isUndefined(a.companyTypeName)?"":":"+a.companyTypeName);if(a.clientName){var b="";return 2===a.clientTypeID?b="Insurer":3===a.clientTypeID&&(b="TPA"),a.clientName+":"+b}if(a.firmName)return a.firmName;if(a.venueName){var c=a.venueName;return a.venueAbbrev&&(c+=", "+a.venueAbbrev),c}if(a.eventTypeName)return _.isUndefined(a.description)||_.isEmpty(a.description)?a.eventTypeName:a.eventTypeName+": "+a.description;if(a.eventTitle)return _.isUndefined(a.shortNote)||_.isEmpty(a.shortNote)?a.eventTitle:a.eventTitle+": "+a.shortNote;if(a.firmName)return a.firmName;if(a.ClaimantName)return a.ClaimantName;if(a.facilityName)return a.facilityName;if(a.payeeName)return a.payeeName;if(a.fileTitle)return a.fileTitle;var d="";return a.last=a.last||"",a.first=a.first||"",a.middle=a.middle||"",a.email=a.email||"",d=a.last,_.isEmpty(a.first)||(d+=(_.isEmpty(d)?"":", ")+a.first),_.isEmpty(a.middle)||(d+=(_.isEmpty(d)?"":" ")+a.middle),_.isEmpty(a.email)||(d+=(_.isEmpty(d)?"":" ")+a.email),a.physicalAddress&&!_.isEmpty(a.physicalAddress)&&(d+=(_.isEmpty(d)?"":" ")+a.physicalAddress),a.physicalCity&&!_.isEmpty(a.physicalCity)&&(d+=(_.isEmpty(d)?"":" ")+a.physicalCity),d},App.Helpers.View=Uit.View.extend({initialize:function(a){Uit.View.prototype.initialize.apply(this,[a]),this.setupValidationMessages()},render:function(a){var b=$(this.template()),c=b.find(".state-helper"),d=b.find(".timezone-helper");return _.each(c,function(a){a=$(a),a.append(App.Helpers.getStateSelect())}),_.each(d,function(a){a=$(a),a.append(App.Helpers.getTimezoneSelect())}),a?this.$el.html(b).hide().slideDown(666):this.$el.html(b),this},handlerTooltip:function(){if(this.cacheTooltip=[],this.$el.find(".control-tooltip").on("hide.bs.tooltip",$.proxy(function(a){var b=$(a.currentTarget),c=$("#"+b.attr("aria-describedby"));c.find(".tooltip-inner").removeAttr("style"),c.find(".tooltip-inner").resizable("destroy"),c.draggable("destroy")},this)),this.$el.find(".control-tooltip").on("shown.bs.tooltip",$.proxy(function(a){var b=$(a.currentTarget),c=$("#"+b.attr("aria-describedby"));c.find(".btn-close").on("click",function(a){var b=$(a.currentTarget).closest(".tooltip").attr("id");$("[aria-describedby="+b+"]").tooltip("toggle")}),c.find(".help-body").css("height",c.find(".help-body").data("default-height")),c.find(".tooltip-inner").resizable(),c.draggable({handle:".title",containment:"html",cancel:".btn-close"})},this)),_.isUndefined(this.options.parentViewClassName)||_.isUndefined($("."+this.options.parentViewClassName).data("view")))_.extend(this.events,{"click .control-tooltip":"_handlerMouseOverTooltip"}),this.delegateEvents(this.events);else{var a=$("."+this.options.parentViewClassName).data("view");a.events["click .control-tooltip"]||(_.extend(this.events,{"click .control-tooltip":"_handlerMouseOverTooltip"}),this.delegateEvents(this.events))}},_handlerMouseOverTooltip:function(a){var b,c=$(a.currentTarget),d=this,e=c.data("help-id");b=_.find(this.cacheTooltip,{helpID:e});var f=$("link#custom_tooltip").clone();$("link#custom_tooltip").remove(),f.appendTo("head"),_.isUndefined(b)?(this.showLoader(),$.get("/api/help_controller/getHelp/"+e).done(function(a){_.size(a)>0&&(d.cacheTooltip.push(a),d._initializeTooltip(c,a),c.tooltip("toggle"))}).always(function(){d.removeLoader()})):c.attr("tooltip-initialized")?c.tooltip("toggle"):(this._initializeTooltip(c,b),c.tooltip("toggle"))},_prepareFrameHtml:function(a,b){var c=a.data("width")||300,d=a.data("height")||200;return'<iframe width="'+c+'" height="'+d+'" src="'+b+'" frameborder="0"></iframe>'},_initializeTooltip:function(a,b){var c="",d=400,e="auto";if(0!==_.size(b)){c=b.helpText,d=b.width?b.width:d,e=b.height?b.height:e,c=this.isUrl(c)?this._prepareFrameHtml(a,c):b.helpText,c='<div class="title help-title"><a class="pull-left p-left-5 help-drag" href="javascript:void(0);"><i class="fa fa-arrows"></i></a><a class="pull-right p-right-5 btn-close help-close" href="javascript:void(0);"><i class="fa fa-times-circle-o"></i></a></div>'+c;var f="."+this.className,g=$("<div></div>");g.html('<div class="help-tooltip tooltip font-size-16" role="tooltip"><div class="help-body tooltip-inner"><div></div></div></div>'),g.find(".help-tooltip").css("width",d),g.find(".help-tooltip").attr("data-default-width",d),g.find(".help-body").css("height",e),g.find(".help-body").attr("data-default-height",e),a.tooltip({animation:!1,trigger:"manual",container:f,html:!0,template:g.html(),title:c}),a.attr("tooltip-initialized",!0)}},isUrl:function(a){var b=/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,c=new RegExp(b);return a.match(c)?!0:!1},setupValidationMessages:function(){var a=this;$.validator.addMethod("password_strength",function(a,b){return this.optional(b)||/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,25}$/.test(a)}),$.validator.setDefaults({showErrors:function(){var b=this.numberOfInvalids();if(b>0){var c=$('<div class="alert alert-danger m-left-10" role="alert">Please check your form, it contains '+b+" error"+(b>1?"s":"")+".</div>");_.isUndefined(a.$el)||a.$el.find(".status").html(c)}else _.isUndefined(a.$el)||a.$el.find(".status .alert-danger").remove();this.defaultShowErrors()},errorPlacement:function(a,b){b.parents(".input-group").length?b.parents(".input-group").after(a[0]):b.after(a[0])},ignore:".password-ignore",groups:{names:"doctorID doctorFacilityID"},rules:{doctorFacilityID:{require_from_group:[1,".doctor-facility"]},doctorID:{require_from_group:[1,".doctor-facility"]},password:{required:!0,password_strength:!0},password_confirmation:{equalTo:"#password"},"modules[]":{required:!0}},messages:{tollFreePhone:{phoneUS:"Please specify a valid US phone number"},billingZip:{required:"Please specify a billing zip"},billingState:{required:"Please specify a billing state"},billingCity:{required:"Please specify a billing city"},billingAddress:{required:"Please specify a billing address"},mailingZip:{required:"Please specify a mailing zip"},mailingState:{required:"Please specify a mailing state"},mailingCity:{required:"Please specify a mailing city"},mailingAddress:{required:"Please specify a mailing address"},companyNotes:{required:"Please specify the company notes"},faxNumber:{required:"Please specify your US fax number",phoneUS:"Please specify a valid US fax number"},officePhone:{required:"Please specify your phone number",phoneUS:"Please specify a valid US phone number"},companyTypeID:{required:"Please specify a company type"},companyNameShort:{required:"Please specify a company short name"},companyName:{required:"Please specify a company name"},email:{required:"Please specify your email"},first:{required:"Please specify your first name"},last:{required:"Please specify your last name"},phone:{required:"Please specify your phone number",phoneUS:"Please specify a valid US phone number"},cell:{required:"Please specify your US cell phone number",phoneUS:"Please specify a valid US cell phone number"},fax:{required:"Please specify your US fax number",phoneUS:"Please specify a valid US fax number"},address1:{required:"Please specify your main address"},address2:{required:"Please specify your secondary address"},city:{required:"Please specify your city"},state:{required:"Please specify your city",stateUS:"Please specify a valid US State"},zip:{required:"Please specify your zip code",zipcodeUS:"Please specify a valid US zip code"},country:{required:"Please specify your country"},password:{required:"Enter new password",password_strength:"Please see the password instructions to create your password"},password_confirmation:{required:"Confirm your password",equalTo:"Passwords don't match"},"modules[]":{required:"Please select at least one module"}}})},showAllEntities:function(a){this.currentTargetArrow=a;var b='<i class="fa fa-circle-o-notch fa-spin"></i>';$(a.currentTarget).html(b),App.Helpers.showAllEntities(a,this.$el)}}),App.Helpers.addMask=Uit.addMask,App.Helpers.cleanView=Uit.cleanView,App.Helpers.Model=Uit.Model.extend({}),App.Helpers.Collection=Uit.Collection.extend({}),App.Helpers.Router=Uit.Router.extend({}),App.Helpers.Modal=Uit.Modal,App.Helpers.htmlView=Uit.htmlView,App.Helpers.checkViewExist=Uit.checkViewExist,App.Helpers.append=Uit.append,App.Helpers.Casefriend.Rules={doctorFacilityID:{require_from_group:[1,".doctor-facility"]},doctorID:{require_from_group:[1,".doctor-facility"]},password:{required:!0,password_strength:!0},password_confirmation:{equalTo:"#password"}},App.Helpers.getDesignations=function(a,b){b=_.isNull(b)?"":b;var c=_.map(b.toString().split("|"),function(b){return _.first(_.without(_.map(_.values(a),function(a){return a[b]?a[b]:void 0}),void 0))})||[];return _.sortBy(c)},App.Helpers.getFileURL=function(a,b,c,d){b=b||1,c=c||null,d=d||null;var e=App.Const.filesURLs[b];return e+="/edit/"+a,_.isNull(c)||("all"===c?e+="/events":(e+="/events/edit/"+c,_.isNull(d)||(e+="/billing/edit/"+d))),e},App.Helpers.getFileDashboard=function(a){var b;switch(a){case 1:b=$(".files-dashboard").data("view");break;case 2:b=$(".FilesDashboardSubro").data("view")}return b},function(a){a.extend(a.expr[":"],{"off-top":function(b){return a(b).offset().top<a(window).scrollTop()},"off-right":function(b){return a(b).offset().left+a(b).outerWidth()-a(window).scrollLeft()>a(window).width()},"off-bottom":function(b){return a(b).offset().top+a(b).outerHeight()-a(window).scrollTop()>a(window).height()},"off-left":function(b){return a(b).offset().left<a(window).scrollLeft()},"off-screen":function(b){return a(b).is(":off-top, :off-right, :off-bottom, :off-left")}})}($),$.extend($.validator.messages,App.Helpers.Casefriend.Messages),$.extend($.validator.rules,App.Helpers.Casefriend.Rules),function(a){a.formatters.time=function(a){return a?moment(a,"hh:mm:ss").format("hh:mm A"):void 0},a.formatters.linebreaksbr=function(a){return a?a.replace(/\n/g,"<br>"):void 0},a.formatters.showIfFirstChar=function(a,b){if(a&&b){var c=b.charAt(0);return a&&"P"!==c}},a.formatters.mathAddInt=function(a,b){return a?parseInt(a,10)+parseInt(b,10):void 0},a.formatters.getModuleName=function(a){return a?App.Const.modules[a]:void 0}}(window.rivets),this.App=this.App||{},this.App.Templates=this.App.Templates||{},this.App.Templates.accountingBillingOverviewIndex=function(a){{var b="";_.escape}return b+='<div class="container" data-permission="8">\n    <div class="m-top-15 m-bottom-15 m-left-10">\n        <form>\n            <div class=\'row p-bottom-5 p-top-15 b-grey c-white\'>\n                <div class="form-group m-bottom-5 col-sm-6 cutDay p-left-20">\n                    <label class="control-label font-size-18 font-bold">Current Billing not invoiced:</label>\n                    <span class="font-size-18 font-bold p-left-10" id="unInvoicedTotal">\n                    </span>\n                </div>\n                <div class="form-group m-bottom-5 col-sm-6 cutDay p-right-40">\n                    <label class="control-label">Choose a Year:</label>\n                    <select class="form-control" name="year">\n                        <option value="2011">2011</option>\n                        <option value="2012">2012</option>\n                        <option value="2013">2013</option>\n                        <option value="2014">2014</option>\n                        <option value="2015">2015</option>\n                        <option value="2016">2016</option>\n                        <option value="2017" selected="selected">2017</option>\n                        <option value="2018">2018</option>\n                        <option value="2019">2019</option>\n                        <option value="2020">2020</option>\n\n                    </select>\n                </div>\n            </div>\n            <div class="row p-top-5 b-grey c-white">\n                <div class="form-group col-sm-12 font-size-14 p-left-20">\n                    <em>Note: If no date is choosen the report will default to this year. <a class="control-tooltip c-white p-left-10" data-help-id="reportingBillingOverviewHelp" href="javascript:void(0);"><i class="fa fa-question-circle fa-lg"></i></a></em>\n                </div>\n            </div>\n            <div id="global-sums-container"></div>\n            <div id="table-container"></div>\n        </form>\n    </div>\n</div>\n'},this.App.Templates.accountingBillingPace=function(a){{var b="";_.escape}return b+='<div class="container">\n    <div class="m-top-15 m-bottom-15 m-left-10 b-black">\n\n        <div class="row p-bottom-5 p-top-15 b-grey c-white">\n            <div class="form-group m-bottom-5 col-sm-4 p-right-40">\n                <label class="control-label">Starting Month:</label>\n                <div class="col-sm-12 p-left-0 c-black">\n                    <select class="form-control" name="month" id="month-select">\n                        <option value="1">January</option>\n                        <option value="2">February</option>\n                        <option value="3">March</option>\n                        <option value="4">April</option>\n                        <option value="5">May</option>\n                        <option value="6">June</option>\n                        <option value="7">July</option>\n                        <option value="8">August</option>\n                        <option value="9">September</option>\n                        <option value="10">October</option>\n                        <option value="11">November</option>\n                        <option value="12">December</option>\n                    </select>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5 col-sm-4 p-right-40">\n                <label class="control-label">Year:</label>\n                <div class="col-sm-12 p-left-0 c-black">\n                    <select class="form-control" name="year">\n                        <option value="2011">2011</option>\n                        <option value="2012">2012</option>\n                        <option value="2013">2013</option>\n                        <option value="2014">2014</option>\n                        <option value="2015">2015</option>\n                        <option value="2016">2016</option>\n                        <option value="2017">2017</option>\n                        <option value="2018">2018</option>\n                        <option value="2019">2019</option>\n                    </select>\n                </div>\n            </div>\n        </div>\n        <div class="box-shadow m-right--15 m-left--15 bgc-white p-15">\n            <div class="row">\n                <div class="col-md-2"><i class="fa fa-square" aria-hidden="true"></i> Working Days</div>\n                <div class="col-md-2"><i class="fa fa-square c-red" aria-hidden="true"></i> Weekend Days</div>\n                <div class="col-md-2"><i class="fa fa-square c-green-casefriend" aria-hidden="true"></i> Target until today</div>\n                <div class="col-md-4"><i class="fa fa-square c-blue-graph-bar" aria-hidden="true"></i> Total Hours (mouse over for exact hours)</div>\n                <div class="col-md-2"><i class="fa fa-arrow-up p-left-5" aria-hidden="true"></i> 240+ hours</div>\n                <div class="col-md-12 t-align-center font-size-18 font-style-oblique p-top-15">\n                    <div>Days in month of <span id="month-label"></span>, <span id="year-label"></span></div>\n                </div>\n                <div class="col-md-12">\n                    <table id="pace-table" class="font-size-15 bgc-white" style="border-collapse:separate;border-spacing:0 2px;min-width:1100px;">\n                    </table>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'},this.App.Templates.accountingClientGroupBreak=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <h4 class="modal-title font-size-18 font-bold">Client Details for: {options.clientGroupName} for {options.billingDate}</h4>\n</div>\n<div class="modal-body p-25">\n    <div class="row box-shadow" rv-if="collection.length">\n        <table class="table table-hover m-bottom-0">\n            <thead class=\'b-blue-new-casefriend c-white font-size-17\' id=\'\'>\n            <tr>\n                <th class=\'cursor-pointer sortable\' data-sort=\'billingTotal\'>Hours</th>\n                <th class=\'cursor-pointer sortable\' data-sort=\'otherHours\'>Client</th>\n                <th class=\'cursor-pointer sortable\' data-sort=\'clientName\'>File Name</th>\n            </tr>\n            </thead>\n            <tbody class=\'b-grey-light\'>\n            <tr rv-each-model="collection.models">\n                <td class="billingRow cursor-pointer" rv-data-billingID="model:billingID" rv-data-eventID="model:eventID" rv-data-fileNumber="model:fileNumber">\n							<span rv-class-font-bold="model:IsNotInvoiced">\n								{model:workUnits}\n							</span>\n                </td>\n                <td class="billingRow cursor-pointer" rv-data-billingID="model:billingID" rv-data-eventID="model:eventID" rv-data-fileNumber="model:fileNumber">\n							<span rv-class-font-bold="model:IsNotInvoiced">\n								{model:clientName} ({model:clientNameShort})\n							</span>\n                </td>\n                <td class="billingRow cursor-pointer" rv-data-billingID="model:billingID" rv-data-eventID="model:eventID" rv-data-fileNumber="model:fileNumber">\n							<span rv-class-font-bold="model:IsNotInvoiced">\n								{model:fileTitle}\n							</span>\n                </td>\n            </tr>\n            </tbody>\n        </table>\n    </div>\n    <div rv-unless="collection.length" class="font-size-16">NO DATA</div>\n</div>\n<div class="modal-footer">\n    <button type="button" class="btn btn-default btn-close" data-dismiss="modal">Close</button>\n</div>'},this.App.Templates.accountingComplianceReport=function(a){{var b="";_.escape}return b+='<div class="container" data-permission="55">\n    <div class="m-top-15 m-bottom-15 m-left-10 b-black">\n        <div class=\'row p-bottom-5 p-top-15 b-grey c-white\'>\n            <div class="form-group col-sm-4 p-left-40">\n                <label class="control-label">Search DA Attorney:</label>\n                <div class="col-sm-12 p-left-0 c-black">\n                    <input type="text" class="typeahead form-control da_attorney" name="da_attorney" placeholder="Attorney Filter">\n                    <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="da_attorney"><i class="fa fa-chevron-down"></i></a>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5 col-sm-2 p-right-40">\n                <label class="control-label">Starting Month:</label>\n                <div class="col-sm-12 p-left-0 c-black">\n                    <select class="form-control" name="month">\n                        <option value="1">1 - January</option>\n                        <option value="2">2 - February</option>\n                        <option value="3">3 - March</option>\n                        <option value="4">4 - April</option>\n                        <option value="5">5 - May</option>\n                        <option value="6">6 - June</option>\n                        <option value="7">7 - July</option>\n                        <option value="8">8 - August</option>\n                        <option value="9">9 - September</option>\n                        <option value="10">10 - October</option>\n                        <option value="11">11 - November</option>\n                        <option value="12">12 - December</option>\n                    </select>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5 col-sm-2 p-right-40">\n                <label class="control-label">Year:</label>\n                <div class="col-sm-12 p-left-0 c-black">\n                    <select class="form-control" name="year">\n                        <option value="2011">2011</option>\n                        <option value="2012">2012</option>\n                        <option value="2013">2013</option>\n                        <option value="2014">2014</option>\n                        <option value="2015">2015</option>\n                        <option value="2016">2016</option>\n                    </select>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5 col-sm-2 p-right-40">\n                <label class="control-label">Months:</label>\n                <div class="col-sm-12 p-left-0 c-black">\n                    <select class="form-control" name="timePeriod">\n                        <option value="1">1 Month</option>\n                        <option value="2">2 Months</option>\n                        <option value="3" selected="selected">3 Months</option>\n                        <option value="4">4 Months</option>\n                        <option value="5">5 Months</option>\n                        <option value="6">6 Months</option>\n                        <option value="7">7 Months</option>\n                        <option value="8">8 Months</option>\n                        <option value="9">9 Months</option>\n                        <option value="10">10 Months</option>\n                        <option value="11">11 Months</option>\n                        <option value="12">12 Months</option>\n                    </select>\n\n                </div>\n\n            </div>\n            <div class="form-group m-bottom-5 col-sm-1 p-right-40 p-top-25">\n                <a class="control-tooltip fs-medium" data-help-id="reportingComplianceReportHelp" href="javascript:void(0);"><i class="fa fa-question-circle c-white"></i></a>\n            </div>\n        </div>\n        <div class="clearfix"></div>\n        <div class="box-shadow m-right--15 m-left--15 bgc-white">\n            <div id=\'search-info\' class=\'display-none\'>\n                <div class=\'col-sm-3 font-size-20 p-20\'>\n                    <span class="font-bold">Starting:</span> <span class="">{startDate}</span>\n                </div>\n                <div class=\'col-sm-3 font-size-20 p-20\'>\n                    <span class="font-bold">Ending:</span> <span class="">{endDate}</span>\n                </div>\n                <div class=\'col-sm-3 font-size-20 p-20\'>\n                    <span class="font-bold">Duration:</span> <span class="">{duration}</span>\n                </div>\n                <div class=\'col-sm-3 font-size-20 p-20\'>\n                    <span class="font-bold">Manager:</span> <span class="">{manager}</span>\n                </div>\n            </div>\n            <div id="compliance-table"></div>\n            <div class=\'p-left-40 display-none p-top-30 p-bottom-10\' id=\'notes-text\'>\n                <div class=\'f-right p-right-20\'>*Average of Totals</div>\n                <span class="c-red">NOTE</span> — The following are only valid after November 2014 and only if Atty adds the appropriate timeline events:\n                <ul>\n                    <li>Case in Chief Closed</li>\n                    <li>Plan of Action Edits</li>\n                    <li>Signed C&Rs</li>\n                    <li>Signed Stips & Awards</li>\n                    <li>Take Nothings</li>\n                    <li>Dismissals</li>\n                </ul>\n            </div>\n        </div>\n    </div>\n</div>\n'},this.App.Templates.accountingComplianceReportManagers=function(a){{var b="";_.escape}return b+='<div class="container" data-permission="87">\n    <div class="m-top-15 m-bottom-15 m-left-10 b-black">\n        <div class=\'row p-bottom-5 p-top-15 b-grey c-white\'>\n            <div class="form-group col-sm-4 p-left-40">\n                <label class="control-label">Search DA Attorneys under manager:</label>\n                <div class="col-sm-12 p-left-0 c-black">\n                    <input type="text" class="typeahead form-control da_attorney" name="da_attorney" placeholder="Attorney Filter">\n                    <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="da_attorney"><i class="fa fa-chevron-down"></i></a>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5 col-sm-2 p-right-40">\n                <label class="control-label">Starting Month:</label>\n                <div class="col-sm-12 p-left-0 c-black">\n                    <select class="form-control" name="month">\n                        <option value="1">1 - January</option>\n                        <option value="2">2 - February</option>\n                        <option value="3">3 - March</option>\n                        <option value="4">4 - April</option>\n                        <option value="5">5 - May</option>\n                        <option value="6">6 - June</option>\n                        <option value="7">7 - July</option>\n                        <option value="8">8 - August</option>\n                        <option value="9">9 - September</option>\n                        <option value="10">10 - October</option>\n                        <option value="11">11 - November</option>\n                        <option value="12">12 - December</option>\n                    </select>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5 col-sm-2 p-right-40">\n                <label class="control-label">Year:</label>\n                <div class="col-sm-12 p-left-0 c-black">\n                    <select class="form-control" name="year">\n                        <option value="2011">2011</option>\n                        <option value="2012">2012</option>\n                        <option value="2013">2013</option>\n                        <option value="2014">2014</option>\n                        <option value="2015">2015</option>\n                        <option value="2016">2016</option>\n                    </select>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5 col-sm-2 p-right-40">\n                <label class="control-label">Months:</label>\n                <div class="col-sm-12 p-left-0 c-black">\n                    <select class="form-control" name="timePeriod">\n                        <option value="1">1 Month</option>\n                        <option value="2">2 Months</option>\n                        <option value="3" selected="selected">3 Months</option>\n                        <option value="4">4 Months</option>\n                        <option value="5">5 Months</option>\n                        <option value="6">6 Months</option>\n                        <option value="7">7 Months</option>\n                        <option value="8">8 Months</option>\n                        <option value="9">9 Months</option>\n                        <option value="10">10 Months</option>\n                        <option value="11">11 Months</option>\n                        <option value="12">12 Months</option>\n                    </select>\n\n                </div>\n\n            </div>\n            <div class="form-group m-bottom-5 col-sm-1 p-right-40 p-top-25">\n                <a class="control-tooltip fs-medium" data-help-id="reportingComplianceReportHelp" href="javascript:void(0);"><i class="fa fa-question-circle c-white"></i></a>\n            </div>\n        </div>\n        <div class="clearfix"></div>\n\n\n        <div class="box-shadow m-right--15 m-left--15 bgc-white">\n            <div class="row p-5">\n                <div class="col-sm-12">\n                    <div id="totalHoursChartComplianceManagers" class="chart-container">Select an attorney to continue.</div>\n                </div>\n            </div>\n            <hr>\n            <div id=\'search-info\' class=\'display-none\'>\n                <div class=\'col-sm-3 font-size-20 p-20\'>\n                    <span class="font-bold">Starting:</span> <span class="">{startDate}</span>\n                </div>\n                <div class=\'col-sm-3 font-size-20 p-20\'>\n                    <span class="font-bold">Ending:</span> <span class="">{endDate}</span>\n                </div>\n                <div class=\'col-sm-3 font-size-20 p-20\'>\n                    <span class="font-bold">Duration:</span> <span class="">{duration}</span>\n                </div>\n                <div class=\'col-sm-3 font-size-20 p-20\'>\n                    <span class="font-bold">Manager:</span> <span class="">{manager}</span>\n                </div>\n            </div>\n            <div id="compliance-table"></div>\n            <div class=\'p-left-40 display-none p-top-30 p-bottom-10\' id=\'notes-text\'>\n                <div class=\'f-right p-right-20\'>*Average of Totals</div>\n                <span class="c-red">NOTE</span> — The following are only valid after November 2014 and only if Atty adds the appropriate timeline events:\n                <ul>\n                    <li>Case in Chief Closed</li>\n                    <li>Plan of Action Edits</li>\n                    <li>Signed C&Rs</li>\n                    <li>Signed Stips & Awards</li>\n                    <li>Take Nothings</li>\n                    <li>Dismissals</li>\n                </ul>\n            </div>\n        </div>\n    </div>\n</div>\n'},this.App.Templates.accountingExceededHours=function(a){{var b="";_.escape}return b+='<div class="container" data-permission="78">\n    <div class="m-top-15 m-bottom-15 m-left-10">\n        <form>\n            <div class=\'row p-bottom-15 p-top-15 b-grey c-white box-shadow\'>\n                <div class="form-group m-bottom-5  cutDay p-right-40">\n                    <div class="col-sm-6">\n                        <label class="control-label">Time Period: <a class="control-tooltip fs-medium" data-help-id="reportingExceededHoursHelp" href="javascript:void(0);"><i class="fa fa-question-circle c-white"></i></a></label>\n                        <select class="form-control" name="timePeriod" id="timePeriod">\n                            <option value="3">3 Months</option>\n                            <option value="6">6 Months</option>\n                            <option value="9">9 Months</option>\n                            <option value="12">12 Months</option>\n                        </select>\n                    </div>\n\n                </div>\n            </div>\n\n            <div class="row box-shadow" rv-if="collection.length">\n                <table class="table table-hover m-bottom-0">\n                    <thead class=\'b-blue-new-casefriend c-white font-size-17\' id=\'current-invoice-heads\'>\n                    <tr>\n                        <th class=\'\'> Billing Date</th>\n                        <th class=\'\'> Timekeeper</th>\n                        <th class=\'\'>Client Group</th>\n                        <th class=\'\'>Total Hours</th>\n                        <th class=\'\'>Max Limit Hours</th>\n                    </tr>\n                    </thead>\n                    <tbody class=\'b-grey-light\'>\n                    <tr rv-each-model="collection.models">\n                        <td class="cursor-pointer gotoGroupBreakdown" rv-data-timekeeperID="model:timekeeperID" rv-data-groupName="model:aGroupName" rv-data-clientGroupID="model:aClientGroupsID" rv-data-billingDate="model:billingDate">{model:billingDate}</td>\n                        <td class="cursor-pointer gotoGroupBreakdown" rv-data-timekeeperID="model:timekeeperID" rv-data-groupName="model:aGroupName" rv-data-clientGroupID="model:aClientGroupsID" rv-data-billingDate="model:billingDate">{model:timekeeperName}</td>\n                        <td class="cursor-pointer gotoGroupBreakdown" rv-data-timekeeperID="model:timekeeperID" rv-data-groupName="model:aGroupName" rv-data-clientGroupID="model:aClientGroupsID" rv-data-billingDate="model:billingDate">{model:aGroupName}</td>\n                        <td class="cursor-pointer gotoGroupBreakdown" rv-data-timekeeperID="model:timekeeperID" rv-data-groupName="model:aGroupName" rv-data-clientGroupID="model:aClientGroupsID" rv-data-billingDate="model:billingDate">{model:totalHours}</td>\n                        <td class="cursor-pointer gotoGroupBreakdown" rv-data-timekeeperID="model:timekeeperID" rv-data-groupName="model:aGroupName" rv-data-clientGroupID="model:aClientGroupsID" rv-data-billingDate="model:billingDate">{model:atkHoursPerDayMax}</td>\n                    </tr>\n                    </tbody>\n                </table>\n            </div>\n        </form>\n    </div>\n</div>\n';

},this.App.Templates.accountingMonthlyBillingClientDetails=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <h4 class="modal-title font-size-18 font-bold">Client Details for: {options.clientName} for {options.date}</h4>\n</div>\n<div class="modal-body p-25">\n    <div class="row box-shadow" rv-if="collection.length">\n        <table class="table table-hover m-bottom-0">\n            <thead class=\'b-blue-new-casefriend c-white font-size-17\' id=\'\'>\n            <tr>\n                <th class=\'cursor-pointer sortable\' data-sort=\'billingTotal\'>Hours</th>\n                <th class=\'cursor-pointer sortable\' data-sort=\'otherHours\'>User</th>\n                <th class=\'cursor-pointer sortable width-115\' data-sort=\'timekeeperHours\'>Time Keeper</th>\n                <th class=\'cursor-pointer sortable\' data-sort=\'clientName\'>File Name</th>\n            </tr>\n            </thead>\n            <tbody class=\'b-grey-light\'>\n            <tr rv-each-model="collection.models" class="billingRow cursor-pointer" rv-data-billingID="model:billingID" rv-data-eventID="model:eventID" rv-data-fileNumber="model:fileNumber" rv-data-module-id="model:moduleID" rv-title="model:moduleID | getModuleName">\n                <td>{model:workUnits}</td>\n                <td>{model:user}</td>\n                <td>{model:timekeeper}</td>\n                <td>{model:fileTitle}</td>\n            </tr>\n            </tbody>\n        </table>\n    </div>\n    <div rv-unless="collection.length" class="font-size-16">NO DATA</div>\n</div>\n<div class="modal-footer">\n    <button type="button" class="btn btn-default btn-close" data-dismiss="modal">Close</button>\n</div>'},this.App.Templates.accountingMonthlyBillingDaysModal=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <h4 class="modal-title font-size-18 font-bold">Days per Month breakdown: {prettyDate}</h4>\n</div>\n<div class="modal-body">\n    <form id=\'\' class="form-horizontal" onsubmit="javascript: return false;">\n        <div class="form-group m-bottom-5">\n            <div class="row p-5">\n                <div class="col-sm-12">\n                    <div id="totalDayBreakout" class="chart-container-day">No Data</div>\n                </div>\n            </div>\n            <div class="row p-5">\n                <div class="col-sm-12">\n                    <div id="totalDayBreakoutHours" class="chart-container-day">No Data</div>\n                </div>\n            </div>\n        </div>\n        <!-- display any errors when this template is used to upload documents -->\n        <div class="error text-danger"></div>\n    </form>\n</div>\n<div class="modal-footer">\n    <button type="button" class="btn btn-default btn-close" data-dismiss="modal">Close</button>\n</div>'},this.App.Templates.accountingMonthlyBillingHoursModal=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <h4 class="modal-title font-size-18 font-bold">Hours per Day breakdown: {prettyDate}</h4>\n</div>\n<div class="modal-body p-25">\n    <div class="row box-shadow" rv-if="collection.length">\n        <table class="table table-hover m-bottom-0">\n            <thead class=\'b-blue-new-casefriend c-white font-size-17\' id=\'\'>\n            <tr>\n                <th class=\'cursor-pointer sortable\' data-sort=\'billingTotal\'>Bill Total</th>\n                <th class=\'cursor-pointer sortable\' data-sort=\'timekeeperHours\'>Time Keeper Hours</th>\n                <th class=\'cursor-pointer sortable\' data-sort=\'otherHours\'>Other Hours</th>\n                <th class=\'cursor-pointer sortable\' data-sort=\'totalHours\'>Total Hours</th>\n                <th class=\'cursor-pointer sortable\' data-sort=\'maxHours\'>Max Hours</th>\n                <th class=\'cursor-pointer sortable\' data-sort=\'clientName\'>Client Name</th>\n            </tr>\n            </thead>\n            <tbody class=\'b-grey-light\'>\n            <tr rv-each-model="collection.models">\n                <td>${model:billingTotal}</td>\n                <td>{model:timekeeperHours}</td>\n                <td>{model:otherHours}</td>\n                <td>{model:totalHours}</td>\n                <td>{model:maxHours}</td>\n                <td class="cursor-pointer clientName" rv-data-clientID="model:clientID" rv-data-clientName="model:clientName">{model:clientNameComplete}</td>\n            </tr>\n            </tbody>\n        </table>\n    </div>\n    <div rv-unless="collection.length" class="font-size-16">NO DATA</div>\n</div>\n<div class="modal-footer">\n    <button type="button" class="btn btn-default btn-close" data-dismiss="modal">Close</button>\n</div>'},this.App.Templates.accountingMonthlyBillingIndex=function(a){{var b="";_.escape}return b+='<div class="container" data-permission="47">\n    <div class="m-top-15 m-bottom-15 m-left-10 b-black">\n        <div class=\'row p-bottom-5 p-top-15 b-grey c-white\'>\n            <div class="form-group col-sm-6 p-left-40">\n                <label class="control-label">Search by User:</label>\n                <div class="col-sm-12 p-left-0 c-black">\n                    <input type="text" class="typeahead form-control user" name="user" placeholder="User Filter">\n                    <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="user"><i class="fa fa-chevron-down"></i></a>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5 col-sm-6 p-right-40">\n                <label class="control-label">Search by Timekeeper:</label>\n                <div class="col-sm-12 p-left-0 c-black">\n                    <input type="text" class="typeahead form-control timekeeper" name="timekeeper" placeholder="Timekeeper filter">\n                    <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="timekeeper"><i class="fa fa-chevron-down"></i></a>\n                </div>\n            </div>\n        </div>\n        <div class=\'row p-bottom-5 p-top-15 b-grey c-white\'>\n            <div class="form-group m-bottom-5 col-sm-6 cutDay p-left-40">\n                <label class="control-label">Start Date Range:</label>\n                <div class="c-black">\n                    <input type="text" class="form-control datepicker" name="startDate" placeholder="yyyy-mm-dd">\n                </div>\n            </div>\n            <div class="form-group m-bottom-5 col-sm-6 cutDay p-right-40">\n                <label class="control-label">End Date Range:</label>\n                <div class="c-black">\n                    <input type="text" class="form-control datepicker" name="endDate" placeholder="yyyy-mm-dd">\n                </div>\n            </div>\n        </div>\n        <div class=\'row p-bottom-5 p-top-5 b-grey c-white\'>\n            <div class="form-group col-sm-12 p-left-40">\n                * User-specific billing only goes back to 3/6/2012. Timekeeper-specific billing is accurate only after 1/11/2012.<BR/>\n                <span class="font-bold">Dollar amounts are total billed including things like copying and one off charges less deductions(cuts).\n			Hours are only the billings classified as hourly billing. <a class="control-tooltip fs-medium" data-help-id="reportingMonthlyBillingHelp" href="javascript:void(0);"><i class="fa fa-question-circle c-white"></i></a></span>\n            </div>\n        </div>\n\n        <div class="clearfix"></div>\n        <div class="box-shadow m-right--15 m-left--15 bgc-white">\n            <div class="row p-5">\n                <div class="col-sm-12 t-align-right p-right-40 font-size-16 font-bold c-gray p-5">\n                    Date Range: {filters.startDate} to {filters.endDate}\n                </div>\n            </div>\n            <div class="row p-5">\n                <div class="col-sm-12">\n                    <div id="totalBillingChart" class="chart-container">No Data</div>\n                </div>\n            </div>\n            <hr>\n            <div class="row p-5">\n                <div class="col-sm-12 t-align-right p-right-40 font-size-16 font-bold c-gray p-5">\n                    Date Range: {filters.startDate} to {filters.endDate}\n                </div>\n            </div>\n            <div class="row p-5">\n                <div class="col-sm-12">\n                    <div id="totalHoursChart" class="chart-container">No Data</div>\n                </div>\n            </div>\n            <hr>\n            <div class="row p-5">\n                <div class="col-sm-12 t-align-right p-right-40 font-size-16 font-bold c-gray p-5">\n                    Date Range: {filters.startDate} to {filters.endDate}\n                </div>\n            </div>\n            <div class="row p-5">\n                <div class="col-sm-6">\n                    <div id="totalBillingPieChart" class="chart-container">No Data</div>\n                </div>\n                <div class="col-sm-6">\n                    <div id="totalHourPieChart" class="chart-container">No Data</div>\n                </div>\n            </div>\n            <hr>\n            <div class="row p-5">\n                <div class="col-sm-12 t-align-right p-right-40 font-size-16 font-bold c-gray p-5">\n                    Date Range: {filters.startDate} to {filters.endDate}\n                </div>\n            </div>\n            <div class="row p-5">\n                <div class="col-sm-6">\n                    <div id="totalBillingPieChartPerMonth" class="chart-container">No Data</div>\n                </div>\n                <div class="col-sm-6">\n                    <div id="totalHourPieChartPerMonth" class="chart-container">No Data</div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'},this.App.Templates.accountingMonthlyBillingManagersDaysModal=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <h4 class="modal-title font-size-18 font-bold">Days per Month breakdown: {prettyDate}</h4>\n</div>\n<div class="modal-body">\n    <form id=\'\' class="form-horizontal" onsubmit="javascript: return false;">\n        <div class="form-group m-bottom-5">\n            <div class="row p-5">\n                <div class="col-sm-12">\n                    <div id="totalDayBreakoutHours" class="chart-container-day">No Data</div>\n                </div>\n            </div>\n        </div>\n        <!-- display any errors when this template is used to upload documents -->\n        <div class="error text-danger"></div>\n    </form>\n</div>\n<div class="modal-footer">\n    <button type="button" class="btn btn-default btn-close" data-dismiss="modal">Close</button>\n</div>'},this.App.Templates.accountingMonthlyBillingManagersIndex=function(a){{var b="";_.escape}return b+='<div class="container" data-permission="86">\n    <div class="m-top-15 m-bottom-15 m-left-10 b-black">\n        <div class=\'row p-bottom-5 p-top-15 b-grey c-white\'>\n            <div class="form-group col-sm-6 p-left-40">\n                <label class="control-label">Search by User:</label>\n                <div class="col-sm-12 p-left-0 c-black">\n                    <input type="text" class="typeahead form-control user" name="user" placeholder="User Filter">\n                    <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="user"><i class="fa fa-chevron-down"></i></a>\n                </div>\n            </div>\n        </div>\n        <div class=\'row p-bottom-5 p-top-15 b-grey c-white\'>\n            <div class="form-group m-bottom-5 col-sm-6 cutDay p-left-40">\n                <label class="control-label">Start Date Range:</label>\n                <div class="c-black">\n                    <input type="text" class="form-control datepicker" name="startDate" placeholder="yyyy-mm-dd">\n                </div>\n            </div>\n            <div class="form-group m-bottom-5 col-sm-6 cutDay p-right-40">\n                <label class="control-label">End Date Range:</label>\n                <div class="c-black">\n                    <input type="text" class="form-control datepicker" name="endDate" placeholder="yyyy-mm-dd">\n                </div>\n            </div>\n        </div>\n        <div class=\'row p-bottom-5 p-top-5 b-grey c-white\'>\n            <div class="form-group col-sm-12 p-left-40">\n                <a class="control-tooltip fs-medium" data-help-id="reportingMonthlyBillingHelp" href="javascript:void(0);"><i class="fa fa-question-circle c-white"></i></a></span>\n            </div>\n        </div>\n\n        <div class="clearfix"></div>\n        <div class="box-shadow m-right--15 m-left--15 bgc-white">\n            <div class="row p-5">\n                <div class="col-sm-12 t-align-right p-right-40 font-size-16 font-bold c-gray p-5">\n                    Date Range: {filters.startDate} to {filters.endDate}\n                </div>\n            </div>\n            <div class="row p-5">\n                <div class="col-sm-12">\n                    <div id="totalHoursChart" class="chart-container">No Data</div>\n                </div>\n            </div>\n            <hr>\n\n\n        </div>\n    </div>\n</div>\n'},this.App.Templates.accountingPaceIndex=function(a){{var b="";_.escape}return b+='<div class="container">\n    <div class="m-top-15 m-bottom-15 m-left-10">\n        <form>\n            <div class=\'row p-bottom-15 p-top-15 b-grey c-white box-shadow\'>\n                <div class="form-group m-bottom-5  cutDay p-right-40">\n                    <div class="col-sm-6">\n                        <label class="control-label">Select date: </label>\n                        <div class="c-black">\n                            <input type="text" class="form-control datepicker" name="date" id="paceDatePicker" placeholder="yyyy-mm-dd">\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n            <div class="row b-black box-shadow">\n                <table class="table bgc-white table-hover m-0">\n                    <thead class="font-size-14 font-bold b-blue-light c-white">\n                    <tr>\n                        <th>Attorney</th>\n                        <th>Case Load</th>\n                        <th>Pace hours</th>\n                        <th>Billed Hours</th>\n                        <th>LateComm</th>\n                        <th>LatePlan</th>\n                        <th>Red M Stones</th>\n                        <th>Closed</th>\n                        <th>New</th>\n                    </tr>\n                    </thead>\n                    <tbody rv-each-office="group_of_attorneys.models < .models">\n                    <tr>\n                        <td colspan="9" class="bgc-grey-medium light t-align-c font-bold">{office:name}</td>\n                    </tr>\n                    <tr rv-each-row="office:attorneys < :attorneys">\n                        <td>{row.attorney_name}</td>\n                        <td>{row.case_load}</td>\n                        <td>{row.pace_hours}</td>\n                        <td>{row.billed_hours}</td>\n                        <td>{row.comm_past_due}</td>\n                        <td>{row.plan_past_due}</td>\n                        <td>{row.red_milestones}</td>\n                        <td>{row.closed}</td>\n                        <td>{row.opened}</td>\n                    </tr>\n                    </tbody>\n                    <tbody rv-unless="group_of_attorneys.length < .length">\n                        <tr>\n                            <td colspan="9" class="bgc-grey-medium light t-align-c">There are no results to show</td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        </form>\n    </div>\n</div>'},this.App.Templates.baseFooter=function(a){{var b="";_.escape}return b+='<div class="container">\n    <div>&copy; 2010 &ndash; <span class="copyRdate"></span> CaseFriend LLC | All rights reserved | Last Updated: {options.cacheHash} EST</div>\n</div>\n'},this.App.Templates.baseHeader=function(a){{var b="";_.escape}return b+='<div id="billing-portal" class="b-green-casefriend"></div>\n<div class="profile-options-container">\n    <div class="topMenu">\n        <div class="phone-and-options">\n            <div rv-if="model.isLogin <:id" class="user-profile">\n                <span class="icon"><i rv-class="userInfo:icon < userInfo:icon" aria-hidden="true"></i></span>\n                <span data-toggle="dropdown" class="name cursor-pointer dropdown-toggle">\n                                {userInfo:name < userInfo:name}<span class="caret m-left-3"></span>\n                            </span>\n                <ul class="dropdown-menu extended profile-option">\n                    <li><a href="#mysettings"><i class=" fa fa-cog font-size-20"></i> <span>My Settings</span></a></li>\n                    <li><a href="#session/logout"><i class="fa fa-key font-size-20"></i> <span>Log Out</span></a></li>\n                </ul>\n            </div>\n        </div>\n    </div>\n</div>\n<div class="container p-relative">\n    <div rv-if="model.isLogin <:id" class=\'my-billing\'>\n        <div id="toggle-billing-portal">\n            <span class=\'glyphicon glyphicon-triangle-bottom\'></span>\n            <span>My billing portal</span>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-md-9 m-bottom-10">\n            <a href="/" class="logo-link"><img class="logo" src="/images/cf_logo_2.png" alt="Case Friend Logo"/> <span>{userInfo:firm < userInfo:firm}</span></a>\n        </div>\n    </div>\n</div>\n'},this.App.Templates.baseLandingPage=function(a){{var b="";_.escape}return b+='<div class="container">\n    <div class="container-mod m-20">\n\n        <h1 class="font-bold">Choose Module:</h1>\n\n        <div class="row">\n            <div class="m-top-20 col-lg-2 col-md-4 col-sm-6 col-xs-6" rv-each-module="modules.models < .models">\n                <a rv-href="getFilesIndexURL" rv-class="getClass" rv-data-label="module:moduleDescription" rv-data-module_id="module:moduleID" rv-data-active="module:active"></a>\n            </div>\n        </div>\n    </div>\n</div>\n'},this.App.Templates.baseLayout=function(a){{var b="";_.escape}return b+='<div class="container">\n    <div class="page-header">\n        <h1 class="t-align-center font-size-20">Welcome to Casefriend Version 1.1.1 </h1>\n        <h2 class="t-align-center p-10"><i class="glyphicon glyphicon-time fa-lg"></i> Last Updated at 6/18/16 8:49 A.M</h2>\n    </div>\n    <ul class="timeline">\n        <li>\n            <div class="timeline-badge success"><i class="glyphicon glyphicon-check"></i></div>\n            <div class="timeline-panel">\n                <div class="timeline-heading">\n                    <h3 class="timeline-title p-bottom-10">Features</h3>\n                </div>\n                <div class="timeline-body p-left-15">\n                    <ul>\n                        <li>File Progress checkbox on file\'s info page, to reflect file progress for adjuster client.</li>\n                        <li>Event\'s list to show all events by default instead of being paginated.</li>\n                        <li>File progress resolution to have options: CNR, DSM, FNA, SNA, TN.</li>\n                        <li>Adjuster portal to not show water mark.</li>\n                        <li>Adjuster portal to show claim number of file.</li>\n                        <li>Reorder tabs for adjuster portal.</li>\n                        <li>File Progress Liens to have options: LC (Lien Conf) & LT (Lien Trial)</li>\n                        <li>Add phone number extention to hover on file\'s dashboard.</li>\n                        <li>File progress to be ADJ progress, and have a progress per ADJ #, also a checkbox on cases\'s form to remove the progess. Special ACL are needed to remove/edit progress checkbox.</li>\n                        <li>ADJ progress to have 7 progress boxes, with 3 states: None, Yellow (Pending), or Green (Completed)</li>\n                        <li>ADJ progress to reflect on Adjuster portal and remove the panel of "Case in Chief Litigation" and "Lien Mitigation"</li>\n                        <li>Adjuster Portal remove email attorney button and make his name a link to email, plan of action to show line breaks and coverages to be left justified.</li>\n                        <li>Adjuster Portal show/hide plan of action to be a button.</li>\n                        <li>Event show dependencies functionality, and event deletion for people with event deletion ACL # 32.</li>\n                        <li>Adjuster portal allow adjusters to send documents to admins.</li>\n                        <li>Allow users of casefriend to edit only optional info of adjuster\'s that are part of other firms, and not allow them to modify the adjuster\'s required information.</li>\n                        <li>Adjuster should be able to change his personal info on adjuster portal and this should propagate to all firms and all files he is involved in all databases.</li>\n                        <li>Adjuster should be able to change his email, this should log him out and send an activation link to his new email. Email should update on all firms he is involved with.</li>\n                        <li>File Name and WCAB name to allow 100 characters instead of 50 characters length.</li>\n                        <li>File filters to have an option of all files regarding is they are closed, active, WC/Lien, WCAB/Flat Fee</li>\n                        <li>Adjuster portal show ADJ progress for now.</li>\n                    </ul>\n                </div>\n            </div>\n        </li>\n        <li class="timeline-inverted">\n            <div class="timeline-badge danger"><i class="fa fa-bug" aria-hidden="true"></i></div>\n            <div class="timeline-panel">\n                <div class="timeline-heading">\n                    <h3 class="timeline-title p-bottom-10">Bug Fixes</h3>\n                </div>\n                <div class="timeline-body p-left-15">\n                    <ul>\n                        <li>Fix lien event to show the lien rep\'s company.</li>\n                        <li>Monthly billing to show zero values for dates with no data.</li>\n                        <li>Adjuster portal to reflect correct address of the firm on file.</li>\n                        <li>Lien settlements of 0 value to be taken into consideration for saving\'s calculation.</li>\n                        <li>Codefendant\'s form and Codefendant\'s Firm form to have proper titles.</li>\n                        <li>Codefendant\'s list to reorder properly when adding a new Codefendant.</li>\n                        <li>Adjuster Portal to have plan of action show line breaks, and coverages to be left justified.</li>\n                        <li>Fix ADJ progress inside file to not disappear when going into another tab and back to info tab.</li>\n                        <li>Fix of warning msg when changing ADJ progress checkbox and going into another tab without saving.</li>\n                        <li>Fix adjuster\'s name not updating when changing adjuster\'s name on menu bar of adjuster portal.</li>\n                        <li>When creating an adjuster from user\'s screen, it should default the client company choosen as primary for that new adjuster.</li>\n                        <li>Fix adjuster click name to send email on file\'s dashboard.</li>\n                        <li>Fix Matter ID input on Great American files.</li>\n                        <li>Fix bug of editing an invoiced bill should recalculate the invoice properly.</li>\n                        <li>Fix bug of DOI hover on file dashboard not showing up properly.</li>\n                        <li>Be able to log in as Adjuster when another tab is logged in as a DA. It should force you to log out of one before loggin as the other.</li>\n                    </ul>\n                </div>\n            </div>\n        </li>\n\n    </ul>\n</div>\n<div class="container">\n    <div class="page-header">\n        <h1 class="t-align-center font-size-20">Welcome to Casefriend Version 1.1.0 </h1>\n\n        <h2 class="t-align-center p-10"><i class="glyphicon glyphicon-time fa-lg"></i> Last Updated at 5/24/16 9:28 P.M</h2>\n    </div>\n    <ul class="timeline">\n        <li>\n            <div class="timeline-badge success"><i class="glyphicon glyphicon-check"></i></div>\n            <div class="timeline-panel">\n                <div class="timeline-heading">\n                    <h3 class="timeline-title p-bottom-10">Features</h3>\n                </div>\n                <div class="timeline-body p-left-15">\n                    <ul>\n                        <li>Adjuster Portal version 1.0</li>\n                    </ul>\n                </div>\n            </div>\n        </li>\n        <li class="timeline-inverted">\n            <div class="timeline-badge danger"><i class="fa fa-bug" aria-hidden="true"></i></div>\n            <div class="timeline-panel">\n                <div class="timeline-heading">\n                    <h3 class="timeline-title p-bottom-10">Bug Fixes</h3>\n                </div>\n                <div class="timeline-body p-left-15">\n                    <ul>\n                        <li>Datepicker mask for dates fixed.</li>\n                        <li>Adjuster "notes" field fix.</li>\n                        <li>Previos open date not showing on hover fixed.</li>\n\n                    </ul>\n                </div>\n            </div>\n        </li>\n\n    </ul>\n</div>\n<div class="container">\n    <div class="page-header">\n        <h1 class="t-align-center font-size-20">Welcome to Casefriend Version 1.0.9 </h1>\n        <h2 class="t-align-center p-10"><i class="glyphicon glyphicon-time fa-lg"></i> Last Updated at 5/14/16 8:00 A.M</h2>\n    </div>\n    <ul class="timeline">\n        <li>\n            <div class="timeline-badge success"><i class="glyphicon glyphicon-check"></i></div>\n            <div class="timeline-panel">\n                <div class="timeline-heading">\n                    <h3 class="timeline-title p-bottom-10">Features</h3>\n                </div>\n                <div class="timeline-body p-left-15">\n                    <ul>\n                        <li>Be able to select text on hover of file\'s dashboard.</li>\n                        <li>Monthly Billing Report for admins and managers to show data of exact dates chosen, if date has no data then show label with no data.</li>\n                        <li>Exceeded hours report to show bills in bold for bills that have already been invoiced.</li>\n                        <li>Current billing to show invoices with unreviewed bills as bold. Also added a date picker to help get correct date of last invoiced date. A total for selected invoiced to be triggered.</li>\n                        <li>Help Tool tips editor.</li>\n                        <li>Allowed passwords to be of length 25 characters.</li>\n                    </ul>\n                </div>\n            </div>\n        </li>\n        <!--<li class="timeline-inverted">-->\n        <!--<div class="timeline-badge danger"><i class="fa fa-bug" aria-hidden="true"></i></div>-->\n        <!--<div class="timeline-panel">-->\n        <!--<div class="timeline-heading">-->\n        <!--<h3 class="timeline-title p-bottom-10">Bug Fixes</h3>-->\n        <!--</div>-->\n        <!--<div class="timeline-body p-left-15">-->\n        <!--<ul>-->\n        <!---->\n        <!--</ul>-->\n        <!--</div>-->\n        <!--</div>-->\n        <!--</li>-->\n        <li>\n            <div class="timeline-badge warning"><i class="fa fa-star" aria-hidden="true"></i></div>\n            <div class="timeline-panel">\n                <div class="timeline-heading">\n                    <h3 class="timeline-title p-bottom-10">Coming soon</h3>\n                </div>\n                <div class="timeline-body p-left-15">\n                    <ul>\n                        <li>Adjuster Portal.</li>\n                    </ul>\n                </div>\n            </div>\n        </li>\n\n    </ul>\n</div>\n<div class="container">\n    <div class="page-header">\n        <h1 class="t-align-center font-size-20">Welcome to Casefriend Version 1.0.8 </h1>\n        <h2 class="t-align-center p-10"><i class="glyphicon glyphicon-time fa-lg"></i> Updated at 4/29/16 4:55 P.M</h2>\n    </div>\n    <ul class="timeline">\n        <li>\n            <div class="timeline-badge success"><i class="glyphicon glyphicon-check"></i></div>\n            <div class="timeline-panel">\n                <div class="timeline-heading">\n                    <h3 class="timeline-title p-bottom-10">Features</h3>\n                </div>\n                <div class="timeline-body p-left-15">\n                    <ul>\n                        <li>All pleading letters to have "e-file" by default on, without pre-merge option.</li>\n                        <li>Admins can reset any users password from the user edit screen.</li>\n                        <li>New policy for password strengths.</li>\n                        <li>Injury/Cases can have status as "blank".</li>\n                        <li>Exceeded hours report to show also invoiced hours.</li>\n                    </ul>\n                </div>\n            </div>\n        </li>\n        <li class="timeline-inverted">\n            <div class="timeline-badge danger"><i class="fa fa-bug" aria-hidden="true"></i></div>\n            <div class="timeline-panel">\n                <div class="timeline-heading">\n                    <h3 class="timeline-title p-bottom-10">Bug Fixes</h3>\n                </div>\n                <div class="timeline-body p-left-15">\n                    <ul>\n                        <li>Billing Overview "owed" column calculation was fixed.</li>\n                        <li>Fix bug of creating an address and assigning a category other than "other".</li>\n                        <li>Forgot password sequence is fixed now.</li>\n                    </ul>\n                </div>\n            </div>\n        </li>\n        <li>\n            <div class="timeline-badge warning"><i class="fa fa-star" aria-hidden="true"></i></div>\n            <div class="timeline-panel">\n                <div class="timeline-heading">\n                    <h3 class="timeline-title p-bottom-10">Coming soon</h3>\n                </div>\n                <div class="timeline-body p-left-15">\n                    <ul>\n                        <li>Adjuster Portal.</li>\n                    </ul>\n                </div>\n            </div>\n        </li>\n\n    </ul>\n</div>\n<div class="container">\n    <div class="page-header">\n        <h1 class="t-align-center font-size-20">Welcome to Casefriend Version 1.0.7 </h1>\n        <h2 class="t-align-center p-10"><i class="glyphicon glyphicon-time fa-lg"></i>Updated at 4/22/16 4:48 P.M</h2>\n    </div>\n    <ul class="timeline">\n        <li>\n            <div class="timeline-badge success"><i class="glyphicon glyphicon-check"></i></div>\n            <div class="timeline-panel">\n                <div class="timeline-heading">\n                    <h3 class="timeline-title p-bottom-10">Features</h3>\n                </div>\n                <div class="timeline-body p-left-15">\n                    <ul>\n                        <li>New layout UI for modals and buttons. Square layout rather than circular.</li>\n                        <li>Hide file filters by default if logged in as Defense Attorney.</li>\n                        <li>Address tab on files to show which firms are primary, and which adjuster has primary address. Also now any address can be edited to be a primary address.</li>\n                        <li>Clicking a DA email on file\'s dashboard will pre populate subject of email with applicant name and claim number.</li>\n                        <li>Doctor\'s form to have direct phone, and physical city as required.</li>\n                        <li>Billing Overview now has better fonts and orders months from most recent to least recent.</li>\n                        <li>Injury/Cases to have "status" field and "Remove from letters" checkbox. If you check that box, then those ADJ#\'s will not appear on the letters generated for that file.</li>\n                        <li>Venues, and doctor\'s sub-speciality to be unique. If same name is used to create/edit it will alert user to choose a different name.</li>\n                        <li>When viewing an adjuster on user\'s edit screen, you can now view all files of adjuster on a new files tab.</li>\n                        <li>Past Billing screen now how notes field to change to a bigger field when clicked, on mouse hover show all text.</li>\n                        <li>User account can now be activated from user\'s edit screen, without having to confirm email link.</li>\n                        <li>Change letter 024 Medical Document Report to not use big fonts and show table margins.</li>\n                    </ul>\n                </div>\n            </div>\n        </li>\n        <li class="timeline-inverted">\n            <div class="timeline-badge danger"><i class="fa fa-bug" aria-hidden="true"></i></div>\n            <div class="timeline-panel">\n                <div class="timeline-heading">\n                    <h3 class="timeline-title p-bottom-10">Bug Fixes</h3>\n                </div>\n                <div class="timeline-body p-left-15">\n                    <ul>\n                        <li>Fix P&S typeaheads on body parts to not show "Null" values.</li>\n                    </ul>\n                </div>\n            </div>\n        </li>\n\n    </ul>\n</div>\n\n\n<div class="container">\n    <div class="page-header">\n        <h1 class="t-align-center font-size-20">Welcome to Casefriend Version 1.0.6 </h1>\n        <h2 class="t-align-center p-10"><i class="glyphicon glyphicon-time fa-lg"></i> Updated at 4/17/16 07:29 P.M</h2>\n\n\n    </div>\n    <ul class="timeline">\n        <li>\n            <div class="timeline-badge success"><i class="glyphicon glyphicon-check"></i></div>\n            <div class="timeline-panel">\n                <div class="timeline-heading">\n                    <h3 class="timeline-title p-bottom-10">Features</h3>\n                </div>\n                <div class="timeline-body p-left-15">\n                    <ul>\n                        <li>Pre merge for venues and new macro for venues of letter templates.</li>\n                        <li>New macro for claim numbers which include claim numbers from injuries on letter templates.</li>\n                        <li>Billing to be marked as not reviewed when saving, even if the user has reviewed ACL.</li>\n                        <li>Facility form to have required physical city and phone.</li>\n                        <li>Hearing events to have "status" as a non required field.</li>\n                        <li>Change letter non pleading letters to have better margins and font sizes.</li>\n                        <li>New options for editing letters with CKEditor. Justified aligning, font sizes, and bullets.</li>\n                        <li>Past billing screen to show adjustment value empty when value is 0.00.</li>\n                        <li>Firm names and company names to be unique, user can not create/edit a name of an existing firm or company to be the same as an already existing one.</li>\n                    </ul>\n                </div>\n            </div>\n        </li>\n        <li class="timeline-inverted">\n            <div class="timeline-badge danger"><i class="fa fa-bug" aria-hidden="true"></i></div>\n            <div class="timeline-panel">\n                <div class="timeline-heading">\n                    <h3 class="timeline-title p-bottom-10">Bug Fixes</h3>\n                </div>\n                <div class="timeline-body p-left-15">\n                    <ul>\n                        <li>Signature of Attorney to be below the signature image on letters.</li>\n                        <li>Litigation Advisor format to have correct firm name and billing address of firm.</li>\n                        <li>Fix doctor typeahead search when a facility is selected before doctor.</li>\n                        <li>Fix facility typeahead for facilities with only name and city.</li>\n                        <li>Pressing ESC on typeaheads inside a pop up modal should not close the modal.</li>\n                    </ul>\n                </div>\n            </div>\n        </li>\n\n    </ul>\n</div>\n<div class="container">\n    <div class="page-header">\n        <h1 class="t-align-center font-size-20 p-top-20">Version 1.0.5 </h1>\n        <h2 class="t-align-center p-10"><i class="glyphicon glyphicon-time fa-lg"></i> Updated at 4/11/16 1:30 P.M</h2>\n    </div>\n    <ul class="timeline">\n        <li>\n            <div class="timeline-badge success"><i class="glyphicon glyphicon-check"></i></div>\n            <div class="timeline-panel">\n                <div class="timeline-heading">\n                    <h3 class="timeline-title p-bottom-10">Features</h3>\n                </div>\n                <div class="timeline-body p-left-15">\n                    <ul>\n                        <li> Send email to specific address with applicant\'s name and claimnumber as subject populated automatically.</li>\n                        <li> Current Billing report now has open date column.</li>\n                        <li> Report for reviewed bills history.</li>\n                        <li> All non-pleading letters have new font style, size, and margins.</li>\n                        <li> Each ADJ # can now have a claim number.</li>\n                        <li> Lien Claimant form to have a tax ID input field.</li>\n                        <li> File Filters now have search by employer, adjuter, and claim number from files and from injuries.</li>\n                        <li> Reviewed billing history to use "Los Angeles" time.</li>\n                        <li> File list open date column and sort.</li>\n                        <li> New user interface for file filters.</li>\n                        <li> Document attachment tab now has column of document name.</li>\n                    </ul>\n                </div>\n            </div>\n        </li>\n        <li class="timeline-inverted">\n            <div class="timeline-badge danger"><i class="fa fa-bug" aria-hidden="true"></i></div>\n            <div class="timeline-panel">\n                <div class="timeline-heading">\n                    <h3 class="timeline-title p-bottom-10">Bug Fixes</h3>\n                </div>\n                <div class="timeline-body p-left-15">\n                    <ul>\n                        <li> File Filters to have more precise search.</li>\n                        <li> Current Billing sort by column fix.</li>\n                        <li> Fix error of invalid US phone number.</li>\n                    </ul>\n                </div>\n            </div>\n        </li>\n\n    </ul>\n</div>';

},this.App.Templates.billingBatchHistoryIndex=function(a){{var b="";_.escape}return b+='<div class="container" data-permission="44">\n    <div class="m-top-15 m-bottom-15 m-left-10 b-black box-shadow">\n        <div class="bgc-white p-15">\n            <div class="row">\n                <div class="col-md-12 font-size-22 font-bold">Billing Batch History</div>\n            </div>\n            <div class="row">\n                <div class="form-group m-bottom-5 col-md-4">\n                    <label class="control-label">Choose Batch Date:</label>\n                    <div class="c-black">\n                        <input type="text" class="form-control datepicker" name="batchDate" placeholder="yyyy-mm-dd">\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5 col-md-6">\n                    <label class="control-label">Search by Batch Name:</label><br>\n                    <div class="col-sm-12 p-left-0 c-black">\n                        <input type="text" class="typeahead form-control batchName" name="batchName" placeholder="Please choose a Batch Name">\n                        <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="batchName"><i class="fa fa-chevron-down"></i></a>\n                    </div>\n                </div>\n\n            </div>\n        </div>\n\n        <table class="table bgc-white table-hover" id="batch-history-table">\n            <tr class="font-size-20 font-bold b-grey c-white" style="pointer-events:none;">\n                <th width="500">\n                    <i class="fa fa-file-archive-o" aria-hidden="true"></i> Batch Name\n                </th>\n                <th>\n                    <i class="fa fa-calendar" aria-hidden="true"></i> Date\n                </th>\n                <th>\n                    <i class="fa fa-usd" aria-hidden="true"></i> Total\n                </th>\n            </tr>\n            <tr rv-each-row="collection.models">\n                <td class="cursor-pointer download-batch" rv-data-batch-name="row:batchName">\n                    {row:batchName}\n                </td>\n                <td class="cursor-pointer download-batch" rv-data-batch-name="row:batchName">\n                    {row:invoiceDate}\n                </td>\n                <td class="cursor-pointer download-batch" rv-data-batch-name="row:batchName">\n                    {row:batchTotal | currency}\n                </td>\n            </tr>\n        </table>\n    </div>\n\n</div>'},this.App.Templates.billingBillsHistoryIndex=function(a){{var b="";_.escape}return b+='<div class="container" data-permission="84">\n    <div class="m-top-15 m-bottom-15 m-left-10 box-shadow">\n\n        <table class="table table-hover m-bottom-0">\n            <thead class=\'b-blue-new-casefriend c-white font-size-17\'>\n            <tr>\n                <th>\n                    Billing ID\n                </th>\n                <th>\n                    File Title\n                </th>\n                <th>\n                    Date/Time Modified\n                </th>\n                <th>\n                    Modified by User\n                </th>\n            </tr>\n            </thead>\n            <tbody class=\'b-grey-light\'>\n            <tr class="cursor-pointer goToBill" rv-each-model="collection.models" rv-data-event-id="model:eventID" rv-data-billing-id="model:billingID" rv-data-file-number="model:fileNumber" rv-data-module-id="model:moduleID">\n                <td>{model:billingID}</td>\n                <td>{model:fileTitle}</td>\n                <td>{model:dateTime}</td>\n                <td>{model:userName}</td>\n            </tr>\n            </tbody>\n\n        </table>\n    </div>\n</div>\n\n'},this.App.Templates.billingCurrentBillingIndex=function(a){{var b="";_.escape}return b+='<div class="container" data-permission="44">\n    <div class="m-top-15 m-bottom-15 m-left-10">\n        <form>\n            <div class=\'row p-bottom-5 p-top-15 b-grey c-white box-shadow\'>\n                <div class="form-group col-sm-4">\n                    <label class="control-label">Search by Client:</label><br>\n                    <div class="col-sm-12 p-left-0 c-black">\n                        <input type="text" class="typeahead form-control clientName" name="clientName" placeholder="Please choose a Client">\n                        <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="clientName"><i class="fa fa-chevron-down"></i></a>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5 col-sm-4 cutDay">\n                    <label class="control-label">Cut Date of Invoice: <a class="control-tooltip fs-medium" data-help-id="currentBillingInputCutDayHelp" href="javascript:void(0);"><i class="fa fa-question-circle c-white"></i></a></label>\n                    <div class="c-black">\n                        <input type="text" class="form-control datepicker" name="cutDay" placeholder="yyyy-mm-dd">\n                    </div>\n                </div>\n                <div class="col-sm-4 display-inline-block p-right-10 p-top-25">\n                    <select class="form-control" id="moduleSelect" name="moduleID">\n                        <option selected value="0">Show All Modules</option>\n                        <option rv-each-row="colModules.models" rv-value="row:moduleID">{row:moduleName}</option>\n                    </select>\n                </div>\n            </div>\n            <div class="clearfix"></div>\n            <div class=\'row p-bottom-10 b-grey c-white\'>\n                <div class="form-group col-sm-2 font-size-20 p-top-50 t-align-center">AND <a class="p-left-5 control-tooltip fs-medium" data-help-id="fileInputANDHelp" href="javascript:void(0);"><i class="fa fa-question-circle c-white"></i></a></div>\n                <div class="form-group col-sm-4 p-right-31">\n                    <label class="control-label">Last Invoiced before this date: </label>\n                    <input type="text" class="form-control datepicker" name="calculateDate" placeholder="yyyy-mm-dd">\n                    <label class="m-top-5">\n                        Last Invoiced Days prior to Cutday:\n                        <a class="control-tooltip fs-medium" data-help-id="fileInputMinBillingDaysHelp" href="javascript:void(0);">\n                            <i class="fa fa-question-circle c-white"></i>\n                        </a>\n                    </label>\n                    <div class="p-left-0">\n                        <input type="text" class=" form-control" name="minBillingDays" rv-value="minBillingDays">\n                    </div>\n                </div>\n                <div class="form-group col-sm-2 font-size-20 p-top-50 t-align-center">OR</div>\n                <div class="form-group col-sm-4">\n                    <label class="control-label">Bills Over$: <a class="control-tooltip fs-medium" data-help-id="currentBillingInputMinBillingAmtHelp" href="javascript:void(0);"><i class="fa fa-question-circle c-white"></i></a></label>\n                    <div class="p-left-0">\n                        <input type="text" class=" form-control" name="minBillingAmt" rv-value="minBillingAmt">\n                    </div>\n                </div>\n            </div>\n            <div class="clearfix"></div>\n            <div class=\'row p-bottom-10 b-grey c-white\'>\n                <em class="form-group col-sm-12  t-align-left font-size-12 p-left-40">NOTE: Closed files with bills that have not been invoiced will always show up, and they will be billable if they have no bills after cut date.</em>\n\n            </div>\n            <div class="clearfix"></div>\n            <div class="row b-grey c-white">\n                <div class="form-group col-sm-8 font-size-22 p-left-40" rv-unless="collection.length">\n                    Please choose a Client and Cut Date to see current billing.\n                </div>\n                <div class="form-group col-sm-5 font-size-20 p-left-40" rv-if="collection.length">\n                    <button type="button" class="btn invoice-btn btn-warning btn-lg" disabled="disabled" id="checked-bills-btn">Invoice (<span id="checked-bills-length">0</span>)</button>\n                </div>\n                <div class="form-group col-sm-3 font-size-20" rv-if="collection.length">\n                    Total Files:<span id="current-billing-total-files">{collection.length}</span>\n                </div>\n                <div class="form-group col-sm-4 font-size-20 totalSummAllBills display-none p-right-40">\n                    Total Billing Amount: <i class="fa fa-usd"></i>{totalSumAllBills}\n                    <span id="total-selected" class="display-none"></span>\n                </div>\n            </div>\n            <div class="row box-shadow" rv-if="collection.length">\n                <table class="table table-hover m-bottom-0">\n                    <thead class=\'b-blue-new-casefriend c-white font-size-17\' id=\'current-invoice-heads\'>\n                    <tr>\n                        <th class=\'cursor-pointer\'><input type="checkbox" name="select_all" class="select-all-check"/></th>\n                        <th class=\'cursor-pointer sortable\' data-sort=\'fileTitle\'> File Title <i class="fa fa-chevron-down"></i></th>\n                        <th class=\'cursor-pointer sortable\' data-sort=\'clientRepName\'>Adjuster</th>\n                        <th class=\'cursor-pointer sortable\' data-sort=\'fileStatusOpenOrClose\'>File Status</th>\n                        <th class=\'cursor-pointer sortable\' data-sort=\'lastInvoicedDate\'>Last Invoiced</th>\n                        <th class=\'cursor-pointer sortable\' data-sort=\'openDate\'>Open Date</th>\n                        <th class=\'cursor-pointer sortable\' data-sort=\'billingTotal\'>Bill Total</th>\n                    </tr>\n                    </thead>\n                    <tbody class=\'b-grey-light\'>\n                    <tr rv-each-model="collection.models" rv-class-font-bold="isUnreviewed < model:reviewed">\n                        <td rv-data-file-number="model:fileNumber" rv-data-file-title="model:fileTitle" rv-data-client-name="model:clientName" rv-data-client-id="model:clientID" class=\'invoice-bill\'>\n                            <input type="checkbox" class="bill-check" rv-data-file-number="model:fileNumber" rv-value="model:isChecked" rv-unless="model:hasFutureBills"/></td>\n                        <td rv-data-file-number="model:fileNumber" rv-data-file-title="model:fileTitle" rv-data-client-name="model:clientName" rv-data-client-id="model:clientID" class=\'invoice-bill\'>{model:fileTitle}: {model:fileNumber} ({model:moduleName})</td>\n\n                        <td rv-data-file-number="model:fileNumber" rv-data-file-title="model:fileTitle" rv-data-client-name="model:clientName" rv-data-client-id="model:clientID" class=\'invoice-bill\'>{model:clientRepName}</td>\n                        <td rv-data-file-number="model:fileNumber" rv-data-file-title="model:fileTitle" rv-data-client-name="model:clientName" rv-data-client-id="model:clientID" class=\'invoice-bill\'>\n                            <span rv-if="model:fileStatusOpenOrClose"><i class="fa fa-folder-open-o p-right-5"></i>Open</span>\n                            <span rv-unless="model:fileStatusOpenOrClose"><i class="fa fa-folder-o p-right-5"></i>Closed</span>\n\n                        </td>\n                        <td rv-data-file-number="model:fileNumber" rv-data-file-title="model:fileTitle" rv-data-client-name="model:clientName" rv-data-client-id="model:clientID" class=\'invoice-bill\' rv-if="model:neverInvoiced">Never Invoiced</td>\n                        <td rv-data-file-number="model:fileNumber" rv-data-file-title="model:fileTitle" rv-data-client-name="model:clientName" rv-data-client-id="model:clientID" class=\'invoice-bill\' rv-unless="model:neverInvoiced">{model:lastInvoicedDate}</td>\n                        <td rv-data-file-number="model:fileNumber" rv-data-file-title="model:fileTitle" rv-data-client-name="model:clientName" rv-data-client-id="model:clientID" class=\'invoice-bill\'>{model:openDate}</td>\n                        <td rv-data-file-number="model:fileNumber" rv-data-file-title="model:fileTitle" rv-data-client-name="model:clientName" rv-data-client-id="model:clientID" class=\'invoice-bill t-align-right\'>{model:billingTotal | currency}</td>\n                    </tr>\n                    </tbody>\n                </table>\n            </div>\n        </form>\n    </div>\n</div>\n'},this.App.Templates.billingDailyBillingIndex=function(a){{var b="";_.escape}return b+='<div class="container" data-permission="44">\n    <div class="m-top-15 m-bottom-15 m-left-10 b-black box-shadow">\n        <div class="bgc-white p-15">\n            <div class="row">\n                <div class="col-md-12 font-size-22 font-bold">Daily Billing</div>\n            </div>\n            <div class="row">\n                <div class="col-md-2"><span class="font-bold font-size-16">File Name:</span> <BR/><i class="fa fa-file p-right-5 " aria-hidden="true"></i>Open File <BR/>\n                    <span class="bgc-grey-medium p-top-2 p-bottom-2 m-top-5"><i class="fa fa-file-excel-o p-right-5" aria-hidden="true"></i>Closed File</span></div>\n\n                <div class="col-md-2"><span class="font-bold font-size-16">Maturity:</span> <BR/>\n                    <i class="fa fa-square c-black p-right-5" aria-hidden="true"></i>Billable by Days <BR/>\n                    <i class="fa fa-square c-red p-right-5" aria-hidden="true"></i>Not Billable by Days<BR/>\n                    <i class="fa fa-arrow-up p-right-5" aria-hidden="true"></i>Billable by Amount\n                </div>\n\n                <div class="col-md-2"><span class="font-bold font-size-16">Reviewed:</span> <BR/>\n                    <i class="fa fa-square c-green-boostrap p-right-5" aria-hidden="true"></i>All Bills Reviewed <BR/>\n                    <i class="fa fa-square c-warning-boostrap p-right-5" aria-hidden="true"></i>Not All Bills Reviewed<BR/>\n                </div>\n                <div class="col-md-4"><span class="font-bold font-size-16">Batch:</span> <BR/>\n                    <input type="checkbox" onclick="return false"/><span class="p-left-5">Check to bill file and recalculate total billable amount. Checkbox will only appear for billable files.</span> <BR/>\n                </div>\n                <div class="form-group m-bottom-5 col-md-2 cutDay">\n                    <label class="control-label">Choose Cut Day: <a class="control-tooltip fs-medium" data-help-id="currentBillingInputCutDayHelp" href="javascript:void(0);"><i class="fa fa-question-circle c-white"></i></a></label>\n                    <div class="c-black">\n                        <input type="text" class="form-control datepicker" name="cutDay" placeholder="yyyy-mm-dd">\n                    </div>\n                    <label class="control-label">Module: </label>\n                    <select class="form-control" id="moduleSelect" name="moduleID">\n                        <option selected value="0">Show All Modules</option>\n                        <option rv-each-row="colModules.models" rv-value="row:moduleID">{row:moduleName}</option>\n                    </select>\n                </div>\n            </div>\n        </div>\n\n        <table class="table bgc-white table-hover" id="daily-billing-table">\n            <tr class="font-size-20 font-bold b-grey c-white" style="pointer-events:none;">\n                <th width="500">\n                    Clients & Files\n                </th>\n                <th>\n                    Maturity\n                </th>\n                <th>\n                    Reviewed\n                </th>\n                <th width="50" class="t-align-center">\n                    Batch\n                </th>\n                <th>\n                    Total\n                </th>\n            </tr>\n        </table>\n    </div>\n\n</div>'},this.App.Templates.billingPastBillingIndex=function(a){{var b="";_.escape}return b+='<div class="container" data-permission="45">\n    <div class="m-top-15 m-bottom-15 m-left-10">\n        <form>\n            <div class=\'row p-bottom-5 p-top-15 b-grey c-white box-shadow\'>\n                <div class="form-group col-sm-6 p-left-40">\n                    <label class="control-label">Search by Client:</label><br>\n                    <div class="col-sm-12 p-left-0 p-right-0 c-black">\n                        <input type="text" class="typeahead form-control clientName" name="clientName"\n                               placeholder="Please choose a client">\n                        <a href="javascript:void(0);" class="icon-typeahead-down p-left-25"\n                           data-input-name="clientName"><i class="fa fa-chevron-down"></i></a>\n                    </div>\n                </div>\n                <div class="form-group col-sm-2">\n                    <label class="control-label">Search by Invoice:</label><br>\n                    <div class="col-sm-12 p-left-0 p-right-0 c-black">\n                        <input type="text" class="form-control typeahead invoice_typeahead" name="invoiceNumber"\n                               placeholder="Please choose a Invoice">\n                        <a href="javascript:void(0);" class="icon-typeahead-down p-left-25"\n                           data-input-name="invoiceNumber"><i class="fa fa-chevron-down"></i></a>\n                    </div>\n                </div>\n                <div class="form-group col-sm-2">\n                    <label class="control-label">Paid/Unpaid invoices:</label><br>\n                    <div class="col-sm-12 p-left-0">\n                        <select class="form-control" name="paidOrUnpaid">\n                            <option rv-value="0" selected="selected">Show All</option>\n                            <option rv-value="1">Show Unpaid Only</option>\n                            <option rv-value="2">Show Paid Only</option>\n                        </select>\n                    </div>\n                </div>\n                <div class="col-sm-2 display-inline-block p-right-10">\n                    <label class="control-label">Module:</label><br>\n                    <select class="form-control" id="moduleSelect" name="moduleID">\n                        <option selected value="0">Show All Modules</option>\n                        <option rv-each-row="colModules.models" rv-value="row:moduleID">{row:moduleName}</option>\n                    </select>\n                </div>\n            </div>\n            <div class=\'row p-bottom-5 p-top-15 b-grey c-white\'>\n                <div class="form-group m-bottom-5 col-sm-6 cutDay p-left-40">\n                    <label class="control-label">Start Date Range:</label>\n                    <div class="c-black">\n                        <input type="text" class="form-control datepicker" name="startDate" placeholder="yyyy-mm-dd">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5 col-sm-6 cutDay p-right-40">\n                    <label class="control-label">End Date Range:</label>\n                    <div class="c-black">\n                        <input type="text" class="form-control datepicker" name="endDate" default-today\n                               placeholder="yyyy-mm-dd">\n                    </div>\n                </div>\n            </div>\n            <div class="row b-grey c-white">\n                <div class="form-group col-sm-6 font-size-20 p-left-40">\n                    Total Invoices: <span id="allInvoicesCount">0</span><Br/>\n                    Total Billing Paid: <i class="fa fa-usd"></i> <span id="allBillingPaid">0</span>\n                </div>\n                <div class="form-group col-sm-6 font-size-20 p-right-40 t-align-right">\n                    Total Billing Amount: <i class="fa fa-usd"></i><span id="allBillingTotal">0</span><BR/>\n                    Total Billing Adjustment: <i class="fa fa-usd"></i> <span id="allBillingAdjustments">0</span><BR/>\n                    Total Average Cut Percentage: <span id="allAverageCutPercent">0</span> %<BR/>\n                </div>\n            </div>\n            <div class="row b-grey c-white">\n                <div class="col-sm-12 t-align-center">\n				<span class="">\n		       		<i class="fa fa-angle-double-left fa-lg sequential-counter cursor-pointer p-right-5"\n                       id=\'load-first\'></i>\n		     	</span>\n                    <span class="">\n		       		<i class="fa fa-chevron-left sequential-counter cursor-pointer p-right-5" id=\'load-prev\'></i>\n		     	</span>\n                    <span class=\'display-inline-block p-left-10 p-right-10\'>\n		     		<label class=\'p-bottom-6 font-size-17\'>Showing invoices from <span id=\'from-offset\'>{filters.paginationOffset}</span>\n                        to <span id="to-offset">{paginationUpperOffset}</span> (Total {allInvoicesCount})</label>\n		     		<select class="form-control" id="paginationSelector" name="paginationSelector">\n                    </select>\n		     	</span>\n                    <span class="">\n			        <i class="fa fa-chevron-right sequential-counter  cursor-pointer p-left-5" id=\'load-next\'></i>\n			    </span>\n                    <span class="">\n			        <i class="fa fa-angle-double-right fa-lg sequential-counter  cursor-pointer p-left-5"\n                       id=\'load-last\'></i>\n			    </span>\n                </div>\n            </div>\n            <div class="row p-top-5 b-grey c-white">\n                <div class="form-group col-sm-12 font-size-14">\n                    <em>Note: If no date is choosen then invoices shown are for the past 6 months from today.</em>\n                </div>\n            </div>\n            <div class="row box-shadow">\n                <table class="table table-hover m-bottom-0 p-relative">\n                    <thead class=\'b-blue-new-casefriend c-white font-size-16\' id=\'current-invoice-heads\'>\n                    <tr id="past_billing_header">\n                        <th class=\'width-200 cursor-pointer sortable\' data-sort=\'fileTitle\'> File Title <i\n                                    class="fa p-left-2 fa-chevron-down"></i></th>\n                        <th class=\'p-left-0 width-105 cursor-pointer sortable\' data-sort=\'endDate\'>End Date</th>\n                        <th class=\'p-left-0 cursor-pointer sortable\' data-sort=\'invoiceNumber\'>Invoice</th>\n                        <th class=\'p-left-0 width-100 cursor-pointer sortable\' data-sort=\'billingTotal\'>Bill Total</th>\n                        <th class=\'p-left-0 cursor-pointer sortable width-100\' data-sort=\'billingAdjustment\'>Adjustment</th>\n                        <th class=\'p-left-0 cursor-pointer\'>Due</th>\n                        <th class=\'p-left-0 cursor-pointer sortable\' data-sort=\'paidDate\'>PmtDate</th>\n                        <th class=\'p-left-0 cursor-pointer sortable\' data-sort=\'checkNo\'>Check Num.</th>\n                        <th class=\'p-left-0 cursor-pointer sortable\' data-sort=\'billingPaid\'>Paid</th>\n                        <th class=\'p-left-0 cursor-pointer width-60\'>Cut %</th>\n                        <th class=\'p-left-0 cursor-pointer sortable\' data-sort=\'paymentNote\'> Note</th>\n                    </tr>\n                    </thead>\n                    <tbody class=\'b-grey-light\'>\n                    <tr rv-each-row="collection.models" rv-data-invoicenumber="row:invoiceNumber">\n                        <td class=\'invoice-bill generateInvoice cursor-pointer\' rv-data-filetitle="row:fileTitle" rv-data-clientid="row:clientID" rv-data-invoicenumber="row:invoiceNumber" rv-data-filenumber="row:fileNumber">{row:fileTitle} ({row:moduleName})\n                        </td>\n                        <td class=\'invoice-bill\'>{row:endDate}</td>\n                        <td class=\'invoice-bill\'>{row:invoiceNumber}</td>\n                        <td class=\'invoice-bill\'>${getBillingTotalWithDecimalCents < row:billingTotal | currency}</td>\n                        <td class=\'invoice-bill\'><input type="text" rv-data-invoicenumber="row:invoiceNumber"\n                                                        class="form-control editInvoice"\n                                                        rv-value="getBillingAdjustmentCurrencyFormat < row:billingAdjustment"\n                                                        name="billingAdjustment"/></td>\n                        <td class=\'invoice-bill\'>${getDueAmount < row:invoiceNumber row:billingAdjustment row:billingPaid | currency}</td>\n                        <td class=\'invoice-bill\'><input type="text" rv-data-invoicenumber="row:invoiceNumber"\n                                                        class="form-control editInvoice paginationDatepicker"\n                                                        name="paidDate" rv-value="row:paidDate"\n                                                        placeholder="yyyy-mm-dd"></td>\n                        <td class=\'invoice-bill\'><input type="text" rv-data-invoicenumber="row:invoiceNumber"\n                                                        class="form-control editInvoice" rv-value="row:checkNo"\n                                                        name="checkNo"/></td>\n                        <td class=\'invoice-bill\'><input type="text" rv-data-invoicenumber="row:invoiceNumber"\n                                                        class="form-control editInvoice"\n                                                        rv-value="getBillingPaidWithCurrencyFormat < row:billingPaid"\n                                                        name="billingPaid"/></td>\n                        <td class=\'invoice-bill\'>{getCutPercentage < row:billingAdjustment | currency}%</td>\n                        <td class=\'invoice-bill notes-text p-relative cursor-pointer clickNote\' rv-data-invoicenumber="row:invoiceNumber">\n                            <div class="label-note truncate-text width-60" rv-title="row:paymentNote">\n                                <i class="fa fa-pencil display-none" aria-hidden="true"></i>\n                                <span rv-if=\'row:paymentNote\'>{row:paymentNote}</span>\n                                <span rv-unless=\'row:paymentNote\' class="font-bold c-grey-medium">None</span>\n                            </div>\n\n                            <textarea maxlength="250" rv-data-invoicenumber="row:invoiceNumber"\n                                      class="form-control editInvoice display-none" rv-value="row:paymentNote"\n                                      name="paymentNote"></textarea>\n                        </td>\n                    </tr>\n                    </tbody>\n                </table>\n            </div>\n        </form>\n    </div>\n</div>\n'},this.App.Templates.billingPastBillingInvalidPayments=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <h4 class="modal-title font-size-18 font-bold">Invalid Payments</h4>\n    <em class="font-size-14 c-red">Note: You must fill in all values of an invoice to make payment valid and eliminate from this list. </em>\n\n</div>\n<div class="modal-body p-25">\n    <div class="row box-shadow">\n        <form>\n            <table class="table table-hover m-bottom-0 p-relative">\n                <thead class=\'b-blue-new-casefriend c-white font-size-16\' id=\'current-invoice-heads\'>\n                <tr id="past_billing_header">\n                    <th data-sort=\'fileTitle\'>File Title</th>\n                    <th class=\'p-left-0\' data-sort=\'invoiceNumber\'>Invoice</th>\n                    <th class=\'p-left-0\' data-sort=\'paidDate\'>Payment Date</th>\n                    <th class=\'p-left-0\' data-sort=\'checkNo\'>Check Number</th>\n                    <th class=\'p-left-0\' data-sort=\'billingPaid\'>Paid Total</th>\n                </tr>\n                </thead>\n                <tbody class=\'b-grey-light\'>\n                <tr rv-each-row="collection.models" rv-data-invoicenumber="row:invoiceNumber">\n                    <td class=\'invoice-bill generateInvoice cursor-pointer\' rv-data-filetitle="row:fileTitle"\n                        rv-data-invoicenumber="row:invoiceNumber" rv-data-filenumber="{row:fileNumber}">{row:fileTitle} ({row:moduleName})\n                    </td>\n                    <td class=\'invoice-bill\'>{row:invoiceNumber}</td>\n\n                    <td class=\'invoice-bill\'>\n                        <input type="text" rv-data-invoicenumber="row:invoiceNumber" class="preload form-control datepickerinvpay" name="paidDate" rv-value="row:paidDate" placeholder="yyyy-mm-dd">\n                    </td>\n                    <td class=\'invoice-bill\'>\n                        <input type="text" rv-data-invoicenumber="row:invoiceNumber"\n                               class="preload form-control " rv-value="row:checkNo"\n                               name="checkNo"/>\n                    </td>\n                    <td class=\'invoice-bill\'>\n                        <input type="text" rv-data-invoicenumber="row:invoiceNumber"\n                               class="preload form-control "\n                               rv-value="row:billingPaid"\n                               name="billingPaid"/>\n                    </td>\n                </tr>\n                </tbody>\n            </table>\n        </form>\n    </div>\n</div>\n<div class="modal-footer">\n    <button type="button" class="btn btn-default btn-close" data-dismiss="modal">Close</button>\n</div>'},this.App.Templates.billingPastBillingInvoiceModal=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <h4 class="modal-title font-size-18 font-bold">Create Invoice for File: {options.fileTitle} <BR/> Invoice Number: {options.invoiceNumber}</h4>\n</div>\n<div class="modal-body p-25">\n    <div class="row">\n        <div class="col-sm-6">\n            <select name="invoice-format" class="form-control">\n                <option value="PDF">PDF</option>\n                <option value="LEDES1998B">LEDES1998B</option>\n                <option value="LitigationAdvisor">LitigationAdvisor</option>\n            </select>\n        </div>\n    </div>\n</div>\n<div class="modal-footer">\n    <button type="button" class="btn btn-default btn-close" data-dismiss="modal">Close</button>\n    <button type="button" class="btn btn-primary btnGenerate" data-dismiss="modal">Download</button>\n    <button type="button" class="btn btn-primary btnGenerateView" data-dismiss="modal">View</button>\n</div>'},this.App.Templates.billingPastBillingModalsInvoice=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <h4 class="modal-title font-size-18 font-bold">Create Invoice for File: {options.fileTitle} <br> Invoice Number: {options.invoiceNumber}</h4>\n</div>\n<div class="modal-body p-25">\n    <div class="row">\n        <div class="col-sm-12" id="modal-file-view-invoice-view" style="word-break: break-all;"></div>\n    </div>\n</div>\n<div class="modal-footer">\n    <button type="button" class="btn btn-default btn-close" data-dismiss="modal">Close</button>\n    <button type="button" class="btn btn-primary btnFullScreen" data-dismiss="modal">Fullscreen</button>\n</div>'},this.App.Templates.billingSharedNewBill=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <h4 class="modal-title">Add New Bill</h4>\n</div>\n<div class="modal-body">\n    <form id="new-bill">\n        <div class="panel-client-rep p-top-15">\n            <div class="form-horizontal">\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">\n                    </label>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 font-size-15 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> File: </label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control search-files typeahead files_typeahead" name="files" required>\n                        <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="files"><i class="fa fa-chevron-down"></i></a>\n\n                    </div>\n                </div>\n\n                <div rv-show="linkModel:fileNumber < linkModel:fileNumber">\n                    <div class="form-group m-bottom-5" id="eventID-selected">\n                        <label class="col-sm-3 font-size-15 control-label">Existing Event:</label>\n                        <div class="col-sm-8">\n                            <input type="text" class="form-control search-files typeahead events_typeahead" name="event" required>\n                            <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="event"><i class="fa fa-chevron-down"></i></a>\n                        </div>\n                    </div>\n\n                    <!-- New event -->\n                    <div id="eventType-selected">\n                        <div class="form-group m-bottom-5">\n                            <div class="new-event-separator">\n                              <span>New Event</span>\n                            </div>\n                        </div>\n\n                        <div class="form-group m-bottom-5 m-top-25">\n                            <label class="col-sm-3 font-size-15 control-label">Event Category:</label>\n                            <div class="col-sm-8">\n                                <select name="new-event-category" id="new-event-category" class="form-control">\n                                    <option value="-1">Select a Event Category</option>\n                                    <option rv-each-category="eventCategoryCol.models" rv-value="category:etcID">{category:etcName}</option>\n                                </select>\n                            </div>\n                        </div>\n\n                        <div class="form-group m-bottom-5" rv-show="linkModel:eventTypeCategoryID < linkModel:eventTypeCategoryID">\n                            <label class="col-sm-3 font-size-15 control-label">Event Type:</label>\n                            <div class="col-sm-8">\n                                <input type="text" class="form-control search-files typeahead events_type_typeahead" name="event-type" required>\n                                <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="event-type"><i class="fa fa-chevron-down"></i></a>\n                            </div>\n                        </div>\n                    </div>\n\n                    <!-- info selected -->\n                    <div class="form-group m-bottom-5 m-top-15">\n                        <div class="new-event-separator">\n                        </div>\n                    </div>\n                    <div class="form-group m-bottom-5">\n                        <div class="col-md-8 border-right-white m-top-10 m-bottom-10  p-6 min-height-90 panel-info-dashboard separator file-info col-md-offset-3">\n                            <h2 class=\'font-size-30\'>File Info\n                                <span dashboard data-permission="77">\n                                    <i rv-if="isFileOpened < linkModel:fileStatus" class="fa fa-folder-open-o" aria-hidden="true"></i>\n                                    <i rv-unless="isFileOpened < linkModel:fileStatus" class="fa fa-folder-o" aria-hidden="true"></i>\n                                </span>\n                            </h2>\n                            <span rv-title=\'linkModel:fileTitle < linkModel:fileTitle\' class="truncate-text max-width-300 display-block">{linkModel:fileTitle < linkModel:fileTitle} - {linkModel:fileStatus < linkModel:fileStatus}</span>\n                            <br/>\n                            <span rv-title=\'linkModel:eventTitle < linkModel:eventTitle\' class="truncate-text max-width-300 display-block">{setEventTitle < linkModel:eventTypeName}</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </form>\n</div>\n<div class="modal-footer">\n    <button type="button" class="btn btn-primary pull-right m-left-8 redirect-bill-creation" id="new-tab-bill-creation" disabled>{linkModel:newTabText < linkModel:newTabText}</button>\n    <button type="button" class="btn btn-primary pull-right m-left-8 redirect-bill-creation" id="same-tab-bill-creation" disabled>{linkModel:sameTabText < linkModel:sameTabText}</button>\n    <button type="button" class="btn btn-default pull-right" data-dismiss="modal">Close</button>\n</div>';

},this.App.Templates.billingPortalClientModal=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <h4 class="modal-title font-size-18 font-bold">Client Details for: {options.clientGroupName} for {options.specificDay}</h4>\n</div>\n<div class="modal-body p-25">\n    <div class="row box-shadow" rv-if="collection.length">\n        <table class="table table-hover m-bottom-0">\n            <thead class=\'b-blue-new-casefriend c-white font-size-17\' id=\'\'>\n            <tr>\n                <th class=\'cursor-pointer sortable\' data-sort=\'billingTotal\'>Hours</th>\n                <th class=\'cursor-pointer sortable\' data-sort=\'otherHours\'>Client</th>\n                <th class=\'cursor-pointer sortable\' data-sort=\'clientName\'>File Name</th>\n            </tr>\n            </thead>\n            <tbody class=\'b-grey-light\'>\n            <tr rv-each-model="collection.models">\n                <td class="billingRow cursor-pointer" rv-data-billingID="model:billingID" rv-data-eventID="model:eventID" rv-data-fileNumber="model:fileNumber">{model:workUnits}</td>\n                <td class="billingRow cursor-pointer" rv-data-billingID="model:billingID" rv-data-eventID="model:eventID" rv-data-fileNumber="model:fileNumber">{model:clientName}</td>\n                <td class="billingRow cursor-pointer" rv-data-billingID="model:billingID" rv-data-eventID="model:eventID" rv-data-fileNumber="model:fileNumber">{model:fileTitle}</td>\n            </tr>\n            </tbody>\n        </table>\n    </div>\n    <div rv-unless="collection.length" class="font-size-16">NO DATA</div>\n</div>\n<div class="modal-footer">\n    <button type="button" class="btn btn-default btn-close" data-dismiss="modal">Close</button>\n</div>'},this.App.Templates.billingPortalIndex=function(a){{var b="";_.escape}return b+='<div class="border-bottom-blue-google-graph">\n    <div class="container p-15">\n        <div class="row" id="billing-portal-weekly-section">\n            <div class="col-sm-2">\n                <form id=\'billing-portal-options\' class="form-horizontal" onsubmit="javascript: return false;">\n                    <label class="control-label font-bold font-size-16 c-white"> <a class="control-tooltip fs-medium" data-help-id="billingPortalHoursHelp" href="javascript:void(0);"><i class="fa fa-question-circle c-white"></i></a> Hours:\n\n                    </label>\n                    <div class="form-group m-bottom-5 font-size-16 p-bottom-20 p-left-14">\n                        <input type="radio" name="billing-portal-view" value="daily" checked>\n                        <label class="control-label p-left-5">Days</label>\n                        <BR/>\n                        <input type="radio" name="billing-portal-view" value="monthly">\n                        <label class="control-label p-left-5">Monthly</label>\n                    </div>\n                    <label class="control-label font-bold font-size-16 c-white"> <a class="control-tooltip fs-medium" data-help-id="billingPortalASHelp" href="javascript:void(0);"><i class="fa fa-question-circle c-white"></i></a> As:\n                    </label>\n\n                    <div class="form-group m-bottom-6 font-size-16 p-left-14">\n                        <input type="radio" name="billed-as" value="user" checked>\n                        <label class="control-label p-left-5">User</label>\n                        <BR/>\n                        <input type="radio" name="billed-as" value="timekeeper">\n                        <label class="control-label p-left-5">Time Keeper</label>\n                    </div>\n                    <div class="form-group m-bottom-6 font-size-16 p-left-14 p-top-10">\n                        <button id="refresh-billing-portal" class="btn btn-default">Reload Hours</button>\n                    </div>\n                </form>\n            </div>\n            <div class="col-sm-5 p-relative days-view">\n                <div class="row">\n                    <span class="col-sm-1 p-top-130 font-size-50 t-align-right font-bold c-white p-right-0">\n                        <i class="fa fa-angle-left cursor-pointer move-days-back"></i>\n                    </span>\n                    <span class="col-sm-10" id="billing-portal-day-chart">\n                        <div class=" font-size-22 p-top-50 p-left-100 c-white">\n                        Loading...\n                        </div>\n                    </span>\n                    <span class="col-sm-1 p-top-130 font-size-50 t-align-left font-bold c-white p-left-0">\n                       <i class="fa fa-angle-right cursor-pointer move-days-forward"></i>\n                    </span>\n                </div>\n            </div>\n            <div class="col-sm-5 days-view">\n                <div id="billing-portal-client-chart">\n                    <div class=" font-size-22 p-top-50 p-left-100 c-white">\n                        <div>No Data for day: <i class="font-bold">{clientFilters.specificDay}</i><BR/>\n                            Please choose another day, by clicking a specific bar in the chart to the left.<BR/><i class="fa fa-arrow-left"></i>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="col-sm-10 months-view p-relative display-none">\n                <div class="row">\n                    <span class="col-sm-1 p-top-130 font-size-50 t-align-right font-bold c-white p-right-0">\n                        <i class="fa fa-angle-left cursor-pointer move-months-back"></i>\n                    </span>\n                    <span class="col-sm-10" id="billing-portal-monthly-chart">\n                        <div class=" font-size-22 p-top-50 p-left-100 c-white">\n                        Loading...\n                        </div>\n                    </span>\n                    <span class="col-sm-1 p-top-130 font-size-50 t-align-left font-bold c-white p-left-0">\n                       <i class="fa fa-angle-right cursor-pointer move-months-forward"></i>\n                    </span>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n\n'},this.App.Templates.clientRepDashboardMainMenu=function(a){{var b="";_.escape}return b+='<nav class="navbar nav-bar-menu m-reset navbar-default bgc-heavenly-light b-radius-1">\n    <div class="container">\n        <div id="navbar">\n            <ul id="menu-parent" class="nav navbar-nav">\n                <li class="active"><a class="link-menu" href=\'#client_rep/files\'>Files</a></li>\n                <li><a class="link-menu" href=\'#client_rep/upload_file\'>Upload New File</a></li>\n                <!--<li><a class="link-menu" href=\'#\'>Firms</a></li>-->\n                <!--<li><a class="link-menu" href=\'#\'>Calendar</a></li>-->\n            </ul>\n        </div><!--/.nav-collapse -->\n\n        <div class="pull-right">\n            <div class="c-white m-10">Hi {model:first < model:first}</div>\n        </div>\n    </div>\n</nav>\n<div id=\'sub-menu\'></div>\n<div id=\'content\'></div>'},this.App.Templates.clientRepFilesGeneralEventShow=function(a){{var b="";_.escape}return b+='<div class="panel-info p-bottom-15">\n    <h2 class="title font-size-20 font-bold p-15">Event Info</h2>\n\n    <div class="col-lg-12">\n        <div class="form-horizontal">\n            <div class="form-group">\n                <span class="col-sm-2 t-align-right">Event Title:</span>\n                <div class="col-sm-10">\n                    <span class="c-blue-link font-bold" rv-if="model:eventTitle">{model:eventTitle}</span>\n                    <span class="font-bold c-grey-medium" rv-unless="model:eventTitle">EMPTY</span>\n                </div>\n            </div>\n\n            <div class="form-group">\n                <span class="col-sm-2 t-align-right">Event Type:</span>\n                <div class="col-sm-10">\n                    <span class="c-blue-link font-bold" rv-if="model:eventTypeName">{model:eventTypeName}</span>\n                    <span class="font-bold c-grey-medium" rv-unless="model:eventTypeName">EMPTY</span>\n                    <span class="c-blue-link font-bold" rv-if="model:description">{model:description}</span>\n                </div>\n            </div>\n\n            <div class="form-group">\n                <span class="col-sm-2 t-align-right">Event Date:</span>\n                <div class="col-sm-10">\n                    <span class="c-blue-link font-bold" rv-if="model:eventDate">{model:eventDate}</span>\n                    <span class="font-bold c-grey-medium" rv-unless="model:eventDate">EMPTY</span>\n                </div>\n            </div>\n\n            <div class="form-group">\n                <span class="col-sm-2 t-align-right">Short Note:</span>\n                <div class="col-sm-10">\n                    <span class="c-blue-link font-bold" rv-if="model:shortNote">{model:shortNote}</span>\n                    <span class="font-bold c-grey-medium" rv-unless="model:shortNote">EMPTY</span>\n                </div>\n            </div>\n\n            <div class="form-group">\n                <span class="col-sm-2 t-align-right">Long Note:</span>\n                <div class="col-sm-10">\n                    <span class="c-blue-link font-bold" rv-if="model:longNote">{model:longNote}</span>\n                    <span class="font-bold c-grey-medium" rv-unless="model:longNote">EMPTY</span>\n                </div>\n            </div>\n\n            <div class="form-group">\n                <span class="col-sm-2 t-align-right">Important:</span>\n                <div class="col-sm-10">\n                    <span class="c-blue-link font-bold" rv-if=\'model:important\'>Yes</span>\n                    <span class="c-blue-link font-bold" rv-unless=\'model:important\'>No</span>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="line"></div>\n\n    <h2 class="title font-size-20 font-bold p-15">Attachments</h2>\n\n    <div class="col-lg-12">\n        <div class="form-horizontal">\n            <div class="form-group">\n                <div class="col-sm-offset-2 col-sm-10">\n                    <ul class="list-unstyled">\n                        <li rv-each-model="colDocuments.models">\n                            <a rv-href="model.getUrlClientRepFile" target="_blank"><i class="fa fa-paperclip" aria-hidden="true"></i> {model.getDocumentTitleOrNone}, {model:documentName}</a>\n                        </li>\n                        <li rv-hide="colDocuments.length">\n                            <span class="font-bold c-grey-medium">NONE</span>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="line"></div>\n\n    <div class="content-childView">\n\n    </div>\n\n    <div class="clearfix"></div>\n</div>'},this.App.Templates.clientRepFilesGeneralIndex=function(a){{var b="";_.escape}return b+='<div class="header p-top-15 p-bottom-15">\n    <div class="col-lg-12">\n        <div class="m-bottom-5">\n            <strong class="display-inline-block v-align-top c-blue-link">Timeline Overview</strong>\n        </div>\n    </div>\n\n    <div class="col-lg-12">\n        <div class="m-bottom-5">\n            <strong class="display-inline-block v-align-top">Plan of Action</strong> <a href="javascript:void(0);" class="btn btn-default showPlanOfAction">show detail</a>\n            <div class="display-inline-block t-align-justify width-90-p contentPlanOfAction" style="display:none">\n                <div rv-html="model:recommendations < model:recommendations | linebreaksbr"></div>\n            </div>\n        </div>\n    </div>\n    <div class="clearfix"></div>\n\n    <div class="col-lg-3 col-md-3 col-ms-3 col-xs-3">\n        <div>\n            <label>Event Type</label>\n            <select class="form-control">\n                <option value="">All</option>\n                <option rv-each-model=\'colEventTypes.models\' rv-value="model:eventTypeID">{model:eventTypeName}</option>\n            </select>\n        </div>\n    </div>\n    <div class="clearfix"></div>\n</div>\n\n<div class="row">\n    <div class="col-lg-12">\n        <div class="p-top-15">\n            <table class="cf-table table table-striped table-hover">\n                <thead>\n                <tr>\n                    <th class="width-35"></th>\n                    <th class="width-130">Date</th>\n                    <th class="width-150">Type</th>\n                    <th>Note</th>\n                </tr>\n                </thead>\n                <tbody>\n                <tr rv-each-model="collection.models < collection.models" class="eventShow cursor-pointer" rv-data-event-id="model:eventID">\n                    <td><span class="fa fa-paperclip" rv-if="model:documentID < :documentID"></span></td>\n                    <td>{model:eventDate}</td>\n                    <td>{model:eventTypeName}</td>\n                    <td>{model:shortNote}</td>\n                </tr>\n                <tr rv-hide="collection.length">\n                    <td colspan="4"><strong>NO RECORD</strong></td>\n                </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>'},this.App.Templates.clientRepFilesIndex=function(a){{var b="";_.escape}return b+='<div class="p-top-10">\n    <div class="container">\n        <ol class="breadcrumb">\n            <li><i class="fa fa-list" aria-hidden="true"></i> Files</li>\n        </ol>\n\n        <div class="bgc-grey-medium p-15">\n            <div class="form-group col-sm-6 m-0 p-left-0">\n                <input type="text" class="form-control search-input" placeholder="Search by File Title" name="search-input">\n            </div>\n            <div class="clearfix"></div>\n        </div>\n\n    </div>\n</div>\n\n<div class="container">\n    <div class="m-top-15 m-bottom-15 bgc-white box-shadow" id="client-table-container">\n    </div>\n</div>'},this.App.Templates.clientRepFilesLiensEventShow=function(a){{var b="";_.escape}return b+='<div class="panel-info p-bottom-15">\n    <h2 class="title font-size-20 font-bold p-15">Event Info</h2>\n\n    <div class="col-lg-12">\n        <div class="form-horizontal">\n            <div class="form-group">\n                <span class="col-sm-2 t-align-right">Event Title:</span>\n                <div class="col-sm-10">\n                    <span class="c-blue-link font-bold" rv-if="model:eventTitle">{model:eventTitle}</span>\n                    <span class="font-bold c-grey-medium" rv-unless="model:eventTitle">EMPTY</span>\n                </div>\n            </div>\n\n            <div class="form-group">\n                <span class="col-sm-2 t-align-right">Event Type:</span>\n                <div class="col-sm-10">\n                    <span class="c-blue-link font-bold" rv-if="model:eventTypeName">{model:eventTypeName}</span>\n                    <span class="font-bold c-grey-medium" rv-unless="model:eventTypeName">EMPTY</span>\n                    <span class="c-blue-link font-bold" rv-if="model:description">{model:description}</span>\n                </div>\n            </div>\n\n            <div class="form-group">\n                <span class="col-sm-2 t-align-right">Event Date:</span>\n                <div class="col-sm-10">\n                    <span class="c-blue-link font-bold" rv-if="model:eventDate">{model:eventDate}</span>\n                    <span class="font-bold c-grey-medium" rv-unless="model:eventDate">EMPTY</span>\n                </div>\n            </div>\n\n            <div class="form-group">\n                <span class="col-sm-2 t-align-right">Short Note:</span>\n                <div class="col-sm-10">\n                    <span class="c-blue-link font-bold" rv-if="model:shortNote">{model:shortNote}</span>\n                    <span class="font-bold c-grey-medium" rv-unless="model:shortNote">EMPTY</span>\n                </div>\n            </div>\n\n            <div class="form-group">\n                <span class="col-sm-2 t-align-right">Long Note:</span>\n                <div class="col-sm-10">\n                    <span class="c-blue-link font-bold" rv-if="model:longNote">{model:longNote}</span>\n                    <span class="font-bold c-grey-medium" rv-unless="model:longNote">EMPTY</span>\n                </div>\n            </div>\n\n            <div class="form-group">\n                <span class="col-sm-2 t-align-right">Important:</span>\n                <div class="col-sm-10">\n                    <span class="c-blue-link font-bold" rv-if=\'model:important\'>Yes</span>\n                    <span class="c-blue-link font-bold" rv-unless=\'model:important\'>No</span>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="line"></div>\n\n    <h2 class="title font-size-20 font-bold p-15">Attachments</h2>\n\n    <div class="col-lg-12">\n        <div class="form-horizontal">\n            <div class="form-group">\n                <div class="col-sm-offset-2 col-sm-10">\n                    <ul class="list-unstyled">\n                        <li rv-each-model="colDocuments.models">\n                            <a rv-href="model.getUrlClientRepFile" target="_blank"><i class="fa fa-paperclip" aria-hidden="true"></i> {model.getDocumentTitleOrNone}, {model:documentName}</a>\n                        </li>\n                        <li rv-hide="colDocuments.length">\n                            <span class="font-bold c-grey-medium">NONE</span>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="line"></div>\n\n    <div class="content-details">\n        <h2 class="title font-size-20 font-bold p-15">Details</h2>\n\n        <div class="col-lg-12">\n            <div class="form-horizontal">\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Claimant Name:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold">{model:childData.ClaimantName}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.ClaimantName">EMPTY</span>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Services Provided:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold">{model:childData.lienServices}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.lienServices">EMPTY</span>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Lien of Record:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if=\'model:childData.lienOfRecord\'>Yes</span>\n                        <span class="c-blue-link font-bold" rv-unless=\'model:childData.lienOfRecord\'>No</span>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">ADJ Picker:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold">{model:childData.adjPicker}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.adjPicker">EMPTY</span>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class="line"></div>\n\n        <h2 class="title font-size-20 font-bold p-15">Lien Rep</h2>\n\n        <div class="col-lg-12">\n            <div class="form-horizontal">\n                <div class="form-group">\n                    <div class="col-sm-offset-2 col-sm-10">\n                        <table class="cf-table table table-striped table-hover">\n                            <thead>\n                            <tr>\n                                <th class="width-150">Lien Rep Name</th>\n                                <th class="width-200">Rep Email</th>\n                                <th class="width-200">Rep Office Phone</th>\n                                <th>Company Name</th>\n                            </tr>\n                            </thead>\n                            <tbody>\n                            <tr rv-each-li="model:childData.lienReps < model:childData.lienReps">\n                                <td>{li.lienRepName}</td>\n                                <td>{li.lienRepEmail}</td>\n                                <td>{li.lienRepOfficePhone}</td>\n                                <td>{li.companyName}</td>\n                            </tr>\n                            <tr rv-hide="model:childData.lienReps < model:childData.lienReps">\n                                <td colspan="4"><strong>NO RECORD</strong></td>\n                            </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class="line"></div>\n\n        <h2 class="title font-size-20 font-bold p-15">Received Bills</h2>\n\n        <div class="col-lg-12">\n            <div class="form-horizontal">\n                <div class="form-group">\n                    <div class="col-sm-offset-2 col-sm-10">\n                        <table class="cf-table table table-striped table-hover">\n                            <thead>\n                            <tr>\n                                <th class="width-150">Bill Title</th>\n                                <th class="width-120">Date Recived</th>\n                                <th class="width-150">Amount</th>\n                                <th>OMFS</th>\n                                <th>Service Notes</th>\n                                <th>OMFS Document</th>\n                                <th>Bill Document</th>\n                            </tr>\n                            </thead>\n                            <tbody>\n                            <tr rv-each-li="model:childData.lienBills < model:childData.lienBills">\n                                <td>{li.name}</td>\n                                <td>{li.dateReceived}</td>\n                                <td>${li.amount | currency}</td>\n                                <td>${li.lienOMFS | currency}</td>\n                                <td>{li.serviceNotes}</td>\n                                <td>\n                                    <a rv-if="li.OMFSdocumentID" target="_blank" rv-href="li.getUrlDocumentOMFS < li.OMFSdocumentID"><i class="fa fa-paperclip fa-lg t-align-center"></i></a>\n                                </td>\n                                <td>\n                                    <a rv-if="li.billDocumentID" target="_blank" rv-href="li.getUrlDocumentBill < li.billDocumentID"><i class="fa fa-paperclip fa-lg t-align-center"></i></a>\n                                </td>\n                            </tr>\n                            <tr rv-hide="model:childData.lienBills < model:childData.lienBills">\n                                <td colspan="7"><strong>NO RECORD</strong></td>\n                            </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class="line"></div>\n\n        <h2 class="title font-size-20 font-bold p-15">Negotiations</h2>\n\n        <div class="col-lg-12">\n            <div class="form-horizontal">\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Authority (%):</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold">{model:childData.authorityPer}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.authorityPer">EMPTY</span>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Authority ($):</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if="model:childData.authorityDol">{model:childData.authorityDol | currency}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.authorityDol">EMPTY</span>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Lien Offers:</span>\n                    <div class="col-sm-10">\n                        <table class="cf-table table table-striped table-hover">\n                            <thead>\n                            <tr>\n                                <th class="width-150">Date</th>\n                                <th class="width-200">Offer Name</th>\n                                <th class="width-150">Amount</th>\n                            </tr>\n                            </thead>\n                            <tbody>\n                            <tr rv-each-li="model:childData.lienOffers < model:childData.lienOffers">\n                                <td>{li.offerDate}</td>\n                                <td>{li.offerName}</td>\n                                <td>${li.offerAmount | currency}</td>\n                            </tr>\n                            <tr rv-hide="model:childData.lienOffers < model:childData.lienOffers">\n                                <td colspan="3"><strong>NO RECORD</strong></td>\n                            </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Lien Demands:</span>\n                    <div class="col-sm-10">\n                        <table class="cf-table table table-striped table-hover">\n                            <thead>\n                            <tr>\n                                <th class="width-150">Date</th>\n                                <th class="width-200">Demand Name</th>\n                                <th class="width-150">Amount</th>\n                            </tr>\n                            </thead>\n                            <tbody>\n                            <tr rv-each-li="model:childData.lienDemands < model:childData.lienDemands">\n                                <td>{li.demandDate}</td>\n                                <td>{li.demandName}</td>\n                                <td>${li.demandAmount | currency}</td>\n                            </tr>\n                            <tr rv-hide="model:childData.lienDemands < model:childData.lienDemands">\n                                <td colspan="3"><strong>NO RECORD</strong></td>\n                            </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class="line"></div>\n\n        <h2 class="title font-size-20 font-bold p-15">Objections</h2>\n\n        <div class="col-lg-12">\n            <div class="form-horizontal">\n                <div class="form-group">\n                    <div class="col-sm-offset-2 col-sm-10">\n                        <table class="cf-table table table-striped table-hover">\n                            <thead>\n                            <tr>\n                                <th class="width-150">Date</th>\n                                <th class="width-200">Objection Note</th>\n                                <th class="width-150">Document</th>\n                            </tr>\n                            </thead>\n                            <tbody>\n                            <tr rv-each-li="model:childData.lienObjections < model:childData.lienObjections">\n                                <td>{li.objectionDate}</td>\n                                <td>{li.objectionNote}</td>\n                                <td>\n                                    <a rv-if="li.documentID" target="_blank" rv-href="li.getUrlClientRepFile < li.documentID"><i class="fa fa-paperclip fa-lg t-align-center"></i></a>\n                                </td>\n                            </tr>\n                            <tr rv-hide="model:childData.lienObjections < model:childData.lienObjections">\n                                <td colspan="3"><strong>NO RECORD</strong></td>\n                            </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class="line"></div>\n\n        <h2 class="title font-size-20 font-bold p-15">Settlement</h2>\n\n        <div class="col-lg-12">\n            <div class="form-horizontal">\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Settled Amount:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if="model:childData.lienSettlementAmount">${model:childData.lienSettlementAmount | currency}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.lienSettlementAmount">EMPTY</span>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Lien Notes:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if="model:childData.lienNotes">{model:childData.lienNotes}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.lienNotes">EMPTY</span>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Dismissed:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if=\'model:childData.lienDismissed\'>Yes</span>\n                        <span class="c-blue-link font-bold" rv-unless=\'model:childData.lienDismissed\'>No</span>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Settled:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if=\'model:childData.lienSettled\'>Yes</span>\n                        <span class="c-blue-link font-bold" rv-unless=\'model:childData.lienSettled\'>No</span>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Settle Date:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if="model:childData.lienSettleDate">{model:childData.lienSettleDate}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.lienSettleDate">EMPTY</span>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Pay By Date:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if="model:childData.lienPaybyDate">{model:childData.lienPaybyDate}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.lienPaybyDate">EMPTY</span>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Lien Paid:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if=\'model:childData.lienPaid\'>Yes</span>\n                        <span class="c-blue-link font-bold" rv-unless=\'model:childData.lienPaid\'>No</span>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Paid Date:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if="model:childData.lienPaidDate">{model:childData.lienPaidDate}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.lienPaidDate">EMPTY</span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n\n    <div class="clearfix"></div>\n</div>';

},this.App.Templates.clientRepFilesLiensIndex=function(a){{var b="";_.escape}return b+='<div class="header p-top-15 p-bottom-15">\n    <div class="col-lg-12">\n        <div class="m-bottom-5">\n            <strong class="display-inline-block v-align-top c-blue-link">Lien Overview</strong>\n        </div>\n    </div>\n\n    <div class="pull-left p-left-15 font-size-20">\n        <div class="m-bottom-5">\n            <span class="font-bold">Total Bill Exposure:</span> <span class="c-blue-link">${data.dashboard.totalBill | currency}</span>\n        </div>\n    </div>\n    <div class="pull-right p-right-15 font-size-20">\n        <div class="m-bottom-5">\n            <span class="font-bold">Savings:</span> <span class="c-blue-link">${data.dashboard.savings | currency}</span>\n        </div>\n    </div>\n    <div class="clearfix"></div>\n</div>\n\n<div class="row">\n    <div class="col-lg-12">\n        <div class="p-top-15">\n            <table class="cf-table table table-striped table-hover">\n                <thead>\n                <tr>\n                    <th class="width-35"></th>\n                    <th class="width-300">Lien Claimant</th>\n                    <th>Bill Amount</th>\n                    <th class="width-130">Settled On</th>\n                    <th>Settled For</th>\n                    <th class="width-130">Paid On</th>\n                </tr>\n                </thead>\n                <tbody>\n                <tr rv-each-model="collection.models < collection.models" class="eventShow cursor-pointer" rv-data-event-id="model:eventID">\n                    <td><span class="fa fa-paperclip" rv-if="model:documentID < :documentID"></span></td>\n                    <td>{model:ClaimantName}</td>\n                    <td>${model:totalBillAmount | currency}</td>\n                    <td>{model:lienSettleDate}</td>\n                    <td>${model:lienSettlementAmount | currency}</td>\n                    <td>{model:lienPaidDate}</td>\n                </tr>\n                <tr rv-hide="collection.length">\n                    <td colspan="6"><strong>NO RECORD</strong></td>\n                </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>\n\n\n'},this.App.Templates.clientRepFilesMedicalEventShow=function(a){{var b="";_.escape}return b+='<div class="panel-info p-bottom-15">\n    <h2 class="title font-size-20 font-bold p-15">Event Info</h2>\n\n    <div class="col-lg-12">\n        <div class="form-horizontal">\n            <div class="form-group">\n                <span class="col-sm-2 t-align-right">Event Title:</span>\n                <div class="col-sm-10">\n                    <span class="c-blue-link font-bold" rv-if="model:eventTitle">{model:eventTitle}</span>\n                    <span class="font-bold c-grey-medium" rv-unless="model:eventTitle">EMPTY</span>\n                </div>\n            </div>\n\n            <div class="form-group">\n                <span class="col-sm-2 t-align-right">Event Type:</span>\n                <div class="col-sm-10">\n                    <span class="c-blue-link font-bold" rv-if="model:eventTypeName">{model:eventTypeName}</span>\n                    <span class="font-bold c-grey-medium" rv-unless="model:eventTypeName">EMPTY</span>\n                    <span class="c-blue-link font-bold" rv-if="model:description">{model:description}</span>\n                </div>\n            </div>\n\n            <div class="form-group">\n                <span class="col-sm-2 t-align-right">Event Date:</span>\n                <div class="col-sm-10">\n                    <span class="c-blue-link font-bold" rv-if="model:eventDate">{model:eventDate}</span>\n                    <span class="font-bold c-grey-medium" rv-unless="model:eventDate">EMPTY</span>\n                </div>\n            </div>\n\n            <div class="form-group">\n                <span class="col-sm-2 t-align-right">Short Note:</span>\n                <div class="col-sm-10">\n                    <span class="c-blue-link font-bold" rv-if="model:shortNote">{model:shortNote}</span>\n                    <span class="font-bold c-grey-medium" rv-unless="model:shortNote">EMPTY</span>\n                </div>\n            </div>\n\n            <div class="form-group">\n                <span class="col-sm-2 t-align-right">Long Note:</span>\n                <div class="col-sm-10">\n                    <span class="c-blue-link font-bold" rv-if="model:longNote">{model:longNote}</span>\n                    <span class="font-bold c-grey-medium" rv-unless="model:longNote">EMPTY</span>\n                </div>\n            </div>\n\n            <div class="form-group">\n                <span class="col-sm-2 t-align-right">Important:</span>\n                <div class="col-sm-10">\n                    <span class="c-blue-link font-bold" rv-if=\'model:important\'>Yes</span>\n                    <span class="c-blue-link font-bold" rv-unless=\'model:important\'>No</span>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="line"></div>\n\n    <h2 class="title font-size-20 font-bold p-15">Attachments</h2>\n\n    <div class="col-lg-12">\n        <div class="form-horizontal">\n            <div class="form-group">\n                <div class="col-sm-offset-2 col-sm-10">\n                    <ul class="list-unstyled">\n                        <li rv-each-model="colDocuments.models">\n                            <a rv-href="model.getUrlClientRepFile" target="_blank"><i class="fa fa-paperclip" aria-hidden="true"></i> {model.getDocumentTitleOrNone}, {model:documentName}</a>\n                        </li>\n                        <li rv-hide="colDocuments.length">\n                            <span class="font-bold c-grey-medium">NONE</span>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="content-details">\n        <h2 class="title font-size-20 font-bold p-15">Details</h2>\n        <div class="col-lg-12">\n            <div class="form-horizontal">\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Doctor:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if="model:childData.doctorName">{model:childData.doctorName}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.doctorName">EMPTY</span>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Facility:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if="model:childData.facilityName">{model:childData.facilityName}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.facilityName">EMPTY</span>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Tax ID:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if="model:childData.taxID">{model:childData.taxID}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.taxID">EMPTY</span>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Appointed By:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if="model:childData.appointedBy">{model:childData.appointedBy}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.appointedBy">EMPTY</span>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Appointed Date:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if="model:childData.appointDate">{model:childData.appointDate}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.appointDate">EMPTY</span>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Appointment Time:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if="model:childData.appointTime">{model:childData.appointTime | time}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.appointTime">EMPTY</span>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Summary:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if="model:childData.MRnotes">{model:childData.MRnotes}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.MRnotes">EMPTY</span>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Body Parts:</span>\n                    <div class="col-sm-10">\n                        <table rv-if="model:childData.medicalBodyParts < model:childData" class="display-inline-block">\n                            <thead>\n                            <tr>\n                                <th class="min-width-130">Body Part</th>\n                                <th>Is PnS Record</th>\n                            </tr>\n                            </thead>\n                            <tbody>\n                            <tr rv-each-bp="model:childData.medicalBodyParts" class="c-blue-link">\n                                <td class="font-bold">{bp.bodyPart}</td>\n                                <td>\n                                    <span class="c-blue-link font-bold" rv-if=\'bp.isPnSRecord\'>Yes</span>\n                                    <span class="c-blue-link font-bold" rv-unless=\'bp.isPnSRecord\'>No</span>\n                                </td>\n                            </tr>\n                            </tbody>\n                        </table>\n\n                        <span rv-unless="model:childData.medicalBodyParts < model:childData">NONE</span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="clearfix"></div>\n</div>'},this.App.Templates.clientRepFilesMedicalIndex=function(a){{var b="";_.escape}return b+='<div class="header p-top-15 p-bottom-15">\n    <div class="col-lg-12">\n        <div class="m-bottom-5">\n            <strong class="display-inline-block v-align-top c-blue-link">Medical Overview</strong>\n        </div>\n    </div>\n\n    <div class="col-lg-12">\n        <table class="cf-table table table-condensed">\n            <thead>\n            <tr>\n                <th>Body Part</th>\n                <th>Accepted?</th>\n                <th>Accepted/Denied Basis?</th>\n                <th>P&S</th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr rv-each-model="colBodyParts.models">\n                <td>{model:bodyPart}</td>\n                <td>{model:bpAdmittedADD}</td>\n                <td></td>\n                <td>{model:bpPnSdate}</td>\n            </tr>\n            <tr rv-hide="colBodyParts.length">\n                <td colspan="4"><strong>NO RECORD</strong></td>\n            </tr>\n            </tbody>\n        </table>\n    </div>\n\n    <div class="clearfix"></div>\n\n    <div class="col-lg-3 col-md-3 col-ms-3 col-xs-3">\n        <div>\n            <select class="form-control">\n                <option value="">Show All Records</option>\n                <option value="1">Show Ratable Records Only</option>\n            </select>\n        </div>\n    </div>\n    <div class="clearfix"></div>\n</div>\n\n<div class="row">\n    <div class="col-lg-12">\n        <div class="p-top-15">\n            <table class="cf-table table table-striped table-hover">\n                <thead>\n                <tr>\n                    <th class="width-35"></th>\n                    <th class="width-130">Date</th>\n                    <th class="width-200">Doctor/Facility</th>\n                    <th class="width-150">Type</th>\n                    <th>Specialty</th>\n                    <th>Short Description</th>\n                </tr>\n                </thead>\n                <tbody>\n                <tr rv-each-model="collection.models < collection.models" class="eventShow cursor-pointer" rv-data-event-id="model:eventID">\n                    <td><span class="fa fa-paperclip" rv-if="model:documentID < :documentID"></span></td>\n                    <td>{model:eventDate}</td>\n                    <td>{setDoctorFacilityName}</td>\n                    <td>{model:eventTypeName}</td>\n                    <td>{model:speciality}</td>\n                    <td>{model:shortNote}</td>\n                </tr>\n                <tr rv-hide="collection.length">\n                    <td colspan="6"><strong>NO RECORD</strong></td>\n                </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>'},this.App.Templates.clientRepFilesOverviewShow=function(a){{var b="";_.escape}return b+='<div class="panel-info p-bottom-15">\n    <h2 class="title font-size-20 font-bold p-15">Representation</h2>\n\n    <div class="col-lg-12">\n        <div class="form-horizontal">\n            <div class="form-group">\n                <span class="col-sm-3 t-align-right">File Opening Date:</span>\n                <div class="col-sm-9">\n                    <span class="c-blue-link font-bold">{model:openDate}</span>\n                </div>\n            </div>\n            <div class="form-group">\n                <span class="col-sm-3 t-align-right">Assigned Firm:</span>\n                <div class="col-sm-3">\n                    <span class="c-blue-link font-bold">{model:dbFirmName}</span>\n                </div>\n                <span class="col-sm-3 t-align-right">Files With Firm:</span>\n                <div class="col-sm-3">\n                    <span class="c-blue-link font-bold">{model:filesWithFirm}</span>\n                </div>\n            </div>\n        </div>\n        <div class="form-horizontal">\n            <div class="form-group">\n                <span class="col-sm-3 t-align-right">Handling Attorney:</span>\n                <div class="col-sm-3">\n                    <a rv-href="getMailtoDA < model:DAemail" class="c-blue-link font-bold"><i class="fa fa-envelope-o" aria-hidden="true"></i> {model:DAname}</a>\n                </div>\n                <span class="col-sm-3 t-align-right">Files With Attorney:</span>\n                <div class="col-sm-3">\n                    <span class="c-blue-link font-bold">{model:filesWithDA}</span>\n                </div>\n            </div>\n        </div>\n    </div>\n\n\n    <div class="clearfix"></div>\n</div>\n\n<div class="panel-info m-top-15 p-bottom-15" id="fileProgress-container-client-rep" rv-each-model="colAdjProgress.models">\n    <h2 class="title font-size-20 font-bold p-15">{model:ADJid} Progress</h2>\n    <div class="col-sm-12 diplayed-container">\n        <div style="display: inherit;">\n            <div class="box-container p-left-15 p-right-15 adjProgressContainer">\n                <span class="title">Set-up</span>\n                <div class="checkbox-container">\n                    <div class="item-container">\n                        <label class="checkbox">\n                            <span rv-class="getClassNameBySetUp < model:adjPgSetUp"></span>\n                        </label>\n                        <label class="label-item">{model:adjPgSetUp}</label>\n                    </div>\n                </div>\n            </div>\n            <div class="box-container p-left-15 p-right-15 adjProgressContainer">\n                <span class="title">Discovery</span>\n                <div class="checkbox-container">\n                    <div class="item-container">\n                        <label class="checkbox">\n                            <span rv-class="getClassNameByDiscovery < model:adjPgDiscovery"></span>\n                        </label>\n                        <label class="label-item">{model:adjPgDiscovery}</label>\n                    </div>\n                </div>\n            </div>\n            <div class="box-container p-left-15 p-right-15 adjProgressContainer">\n                <span class="title">Treatment</span>\n                <div class="checkbox-container">\n                    <div class="item-container">\n                        <label class="checkbox">\n                            <span rv-class="getClassNameByTreatment < model:adjPgTreatment"></span>\n                        </label>\n                        <label class="label-item">{model:adjPgTreatment}</label>\n                    </div>\n                </div>\n            </div>\n            <div class="box-container p-left-15 p-right-15 adjProgressContainer">\n                <span class="title">Hearings/Trial</span>\n                <div class="checkbox-container">\n                    <div class="item-container">\n                        <label class="checkbox">\n                            <span rv-class="getClassNameByHearingTrial < model:adjPgHearingsTrial"></span>\n                        </label>\n                        <label class="label-item">{model:adjPgHearingsTrial}</label>\n                    </div>\n                </div>\n            </div>\n            <div class="box-container p-left-15 p-right-15 adjProgressContainer">\n                <span class="title">WC-Closed</span>\n                <div class="checkbox-container">\n                    <div class="item-container">\n                        <label class="checkbox">\n                            <span rv-class="getClassNameByWCClosed < model:adjPgWCClosed"></span>\n                        </label>\n                        <label class="label-item">{model:adjPgWCClosed}</label>\n                    </div>\n                </div>\n            </div>\n            <div class="box-container p-left-15 p-right-15 adjProgressContainer">\n                <span class="title">Liens</span>\n                <div class="checkbox-container">\n                    <div class="item-container">\n                        <label class="checkbox">\n                            <span rv-class="getClassNameByLiens < model:adjPgLiens"></span>\n                        </label>\n                        <label class="label-item">{model:adjPgLiens}</label>\n                    </div>\n                </div>\n            </div>\n            <div class="box-container p-left-15 p-right-15 adjProgressContainer">\n                <span class="title">File Closed</span>\n                <div class="checkbox-container">\n                    <div class="item-container">\n                        <label class="checkbox">\n                            <span rv-class="getClassNameByFileClosed < model:adjPgFileClosed"></span>\n                        </label>\n                        <label class="label-item">{model:adjPgFileClosed}</label>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="clearfix"></div>\n</div>\n\n<div class=" m-top-15 p-bottom-15 b-grey-light">\n    <h2 class="title font-size-20 font-bold p-15">Plan of Action</h2>\n    <div class="col-sm-12">\n        <span rv-if="model:recommendations" rv-html="model:recommendations | linebreaksbr"></span>\n        <span class="font-bold c-grey-medium" rv-unless="model:recommendations">EMPTY</span>\n    </div>\n\n    <div class="clearfix"></div>\n</div>\n\n'},this.App.Templates.clientRepFilesShow=function(a){{var b="";_.escape}return b+='<div class="container m-top-10">\n    <div class="row">\n        <div class="col-lg-12">\n            <ol class="breadcrumb">\n                <li><a href="#"><i class="fa fa-list" aria-hidden="true"></i> Files</a></li>\n                <li class="active">\n                    <i class="fa fa-file-text-o" aria-hidden="true"></i> {model:applicantFirstName} {model:applicantMiddleName} {model:applicantLastName}\n                </li>\n            </ol>\n        </div>\n\n        <div class="col-lg-5 col-md-5 col-ms-12 font-bold">\n            <span>File:</span> <span class="c-blue-link">{model:fileTitle}</span>\n        </div>\n\n        <div class="col-lg-3 col-md-3 col-ms-12 font-bold">\n            <span>CL#:</span> <span class="c-blue-link">{model:claimNumber}</span>\n        </div>\n\n        <div class="col-lg-4 col-md-4 col-ms-12">\n            <span class="font-bold">Attorney:</span> <a rv-href="getMailtoDA < model:DAemail" class="c-blue-link"><i class="fa fa-envelope-o" aria-hidden="true"></i> {model:DAname}</a>\n        </div>\n    </div>\n\n    <div class="clearfix m-bottom-5"></div>\n    <div class="cf-panel">\n        <ul class="nav nav-pills tab-navigation">\n            <li><a href="javascript:void(0);" data-option-tab="overview">Overview</a></li>\n            <li><a href="javascript:void(0);" data-option-tab="case_info">Case Info</a></li>\n            <li><a href="javascript:void(0);" data-option-tab="timeline">Timeline</a></li>\n            <li><a href="javascript:void(0);" data-option-tab="general">General</a></li>\n            <li><a href="javascript:void(0);" data-option-tab="depos">Depos</a></li>\n            <li><a href="javascript:void(0);" data-option-tab="subpoenas">SubPoenas</a></li>\n            <li><a href="javascript:void(0);" data-option-tab="medical">Medical</a></li>\n            <li><a href="javascript:void(0);" data-option-tab="hearings">Hearings</a></li>\n            <li><a href="javascript:void(0);" data-option-tab="liens">Liens</a></li>\n        </ul>\n\n        <div id="content-tab" class="content-tab"></div>\n    </div>\n</div>\n\n'},this.App.Templates.clientRepFilesSubpoenasEventShow=function(a){{var b="";_.escape}return b+='<div class="panel-info p-bottom-15">\n    <h2 class="title font-size-20 font-bold p-15">Event Info</h2>\n\n    <div class="col-lg-12">\n        <div class="form-horizontal">\n            <div class="form-group">\n                <span class="col-sm-2 t-align-right">Event Title:</span>\n                <div class="col-sm-10">\n                    <span class="c-blue-link font-bold" rv-if="model:eventTitle">{model:eventTitle}</span>\n                    <span class="font-bold c-grey-medium" rv-unless="model:eventTitle">EMPTY</span>\n                </div>\n            </div>\n\n            <div class="form-group">\n                <span class="col-sm-2 t-align-right">Event Type:</span>\n                <div class="col-sm-10">\n                    <span class="c-blue-link font-bold" rv-if="model:eventTypeName">{model:eventTypeName}</span>\n                    <span class="font-bold c-grey-medium" rv-unless="model:eventTypeName">EMPTY</span>\n                    <span class="c-blue-link font-bold" rv-if="model:description">{model:description}</span>\n                </div>\n            </div>\n\n            <div class="form-group">\n                <span class="col-sm-2 t-align-right">Event Date:</span>\n                <div class="col-sm-10">\n                    <span class="c-blue-link font-bold" rv-if="model:eventDate">{model:eventDate}</span>\n                    <span class="font-bold c-grey-medium" rv-unless="model:eventDate">EMPTY</span>\n                </div>\n            </div>\n\n            <div class="form-group">\n                <span class="col-sm-2 t-align-right">Short Note:</span>\n                <div class="col-sm-10">\n                    <span class="c-blue-link font-bold" rv-if="model:shortNote">{model:shortNote}</span>\n                    <span class="font-bold c-grey-medium" rv-unless="model:shortNote">EMPTY</span>\n                </div>\n            </div>\n\n            <div class="form-group">\n                <span class="col-sm-2 t-align-right">Long Note:</span>\n                <div class="col-sm-10">\n                    <span class="c-blue-link font-bold" rv-if="model:longNote">{model:longNote}</span>\n                    <span class="font-bold c-grey-medium" rv-unless="model:longNote">EMPTY</span>\n                </div>\n            </div>\n\n            <div class="form-group">\n                <span class="col-sm-2 t-align-right">Important:</span>\n                <div class="col-sm-10">\n                    <span class="c-blue-link font-bold" rv-if=\'model:important\'>Yes</span>\n                    <span class="c-blue-link font-bold" rv-unless=\'model:important\'>No</span>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="line"></div>\n\n    <h2 class="title font-size-20 font-bold p-15">Attachments</h2>\n\n    <div class="col-lg-12">\n        <div class="form-horizontal">\n            <div class="form-group">\n                <div class="col-sm-offset-2 col-sm-10">\n                    <ul class="list-unstyled">\n                        <li rv-each-model="colDocuments.models">\n                            <a rv-href="model.getUrlClientRepFile" target="_blank"><i class="fa fa-paperclip" aria-hidden="true"></i> {model.getDocumentTitleOrNone}, {model:documentName}</a>\n                        </li>\n                        <li rv-hide="colDocuments.length">\n                            <span class="font-bold c-grey-medium">NONE</span>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="line"></div>\n\n    <div class="content-details">\n        <h2 class="title font-size-20 font-bold p-15">Details</h2>\n        <div class="col-lg-12">\n            <div class="form-horizontal">\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Doc Repository:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold">{model:childData.subpoenaLocation}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.subpoenaLocation">EMPTY</span>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Address:</span>\n                    <div class="col-sm-10">\n                    <span class="c-blue-link font-bold">\n                        {model:childData.subpoenaAddress}, {model:childData.subpoenaCity}, {model:childData.subpoenaState}{model:childData.subpoenaZip}\n                    </span>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Description:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if="model:childData.subpoenaDescription">{model:childData.subpoenaDescription}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.subpoenaDescription">EMPTY</span>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Date Ordered:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if="model:childData.dateOrdered">{model:childData.dateOrdered}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.dateOrdered">EMPTY</span>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Date Arrived:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if="model:childData.dateArrived">{model:childData.dateArrived}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.dateArrived">EMPTY</span>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Summarized:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if=\'model:summarized\'>Yes</span>\n                        <span class="c-blue-link font-bold" rv-unless=\'model:summarized\'>No</span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="clearfix"></div>\n</div>'},this.App.Templates.clientRepFilesSubpoenasIndex=function(a){{var b="";_.escape}return b+='<div class="header p-top-15 p-bottom-15">\n    <div class="col-lg-12">\n        <div class="m-bottom-5">\n            <strong class="display-inline-block v-align-top c-blue-link">SubPoenas Overview</strong>\n        </div>\n    </div>\n\n    <div class="col-lg-12">\n        <div class="m-bottom-5">\n            <strong class="display-inline-block v-align-top">Plan of Action</strong> <a href="javascript:void(0);" class="btn btn-default showPlanOfAction">show detail</a>\n            <div class="display-inline-block t-align-justify width-90-p contentPlanOfAction" style="display:none">\n                <div rv-html="model:recommendations < model:recommendations | linebreaksbr"></div>\n            </div>\n        </div>\n    </div>\n    <div class="clearfix"></div>\n</div>\n\n<div class="row">\n    <div class="col-lg-12">\n        <div class="p-top-15">\n            <table class="cf-table table table-striped table-hover">\n                <thead>\n                <tr>\n                    <th class="width-35"></th>\n                    <th>Repository</th>\n                    <th class="width-130">Ordered</th>\n                    <th class="width-130">Arrived</th>\n                    <th class="width-130">Summarized?</th>\n                </tr>\n                </thead>\n                <tbody>\n                <tr rv-each-model="collection.models < collection.models" class="eventShow cursor-pointer" rv-data-event-id="model:eventID">\n                    <td><span class="fa fa-paperclip" rv-if="model:documentID < :documentID"></span></td>\n                    <td>{model:subpoenaLocation}</td>\n                    <td>{model:dateOrdered}</td>\n                    <td>{model:dateArrived}</td>\n                    <td>\n                        <span class="label label-info" rv-if="model:summarized">Yes</span>\n                        <span class="label label-default" rv-unless="model:summarized">No</span>\n                    </td>\n                </tr>\n                <tr rv-hide="collection.length">\n                    <td colspan="5"><strong>NO RECORD</strong></td>\n                </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>'},this.App.Templates.clientRepFilesTimelineEventShow=function(a){{var b="";_.escape}return b+='<div class="panel-info p-bottom-15">\n    <h2 class="title font-size-20 font-bold p-15">Event Info</h2>\n\n    <div class="col-lg-12">\n        <div class="form-horizontal">\n            <div class="form-group">\n                <span class="col-sm-2 t-align-right">Event Title:</span>\n                <div class="col-sm-10">\n                    <span class="c-blue-link font-bold" rv-if="model:eventTitle">{model:eventTitle}</span>\n                    <span class="font-bold c-grey-medium" rv-unless="model:eventTitle">EMPTY</span>\n                </div>\n            </div>\n\n            <div class="form-group">\n                <span class="col-sm-2 t-align-right">Event Type:</span>\n                <div class="col-sm-10">\n                    <span class="c-blue-link font-bold" rv-if="model:eventTypeName">{model:eventTypeName}</span>\n                    <span class="font-bold c-grey-medium" rv-unless="model:eventTypeName">EMPTY</span>\n                    <span class="c-blue-link font-bold" rv-if="model:description">{model:description}</span>\n                </div>\n            </div>\n\n            <div class="form-group">\n                <span class="col-sm-2 t-align-right">Event Date:</span>\n                <div class="col-sm-10">\n                    <span class="c-blue-link font-bold" rv-if="model:eventDate">{model:eventDate}</span>\n                    <span class="font-bold c-grey-medium" rv-unless="model:eventDate">EMPTY</span>\n                </div>\n            </div>\n\n            <div class="form-group">\n                <span class="col-sm-2 t-align-right">Short Note:</span>\n                <div class="col-sm-10">\n                    <span class="c-blue-link font-bold" rv-if="model:shortNote">{model:shortNote}</span>\n                    <span class="font-bold c-grey-medium" rv-unless="model:shortNote">EMPTY</span>\n                </div>\n            </div>\n\n            <div class="form-group">\n                <span class="col-sm-2 t-align-right">Long Note:</span>\n                <div class="col-sm-10">\n                    <span class="c-blue-link font-bold" rv-if="model:longNote">{model:longNote}</span>\n                    <span class="font-bold c-grey-medium" rv-unless="model:longNote">EMPTY</span>\n                </div>\n            </div>\n\n            <div class="form-group">\n                <span class="col-sm-2 t-align-right">Important:</span>\n                <div class="col-sm-10">\n                    <span class="c-blue-link font-bold" rv-if=\'model:important\'>Yes</span>\n                    <span class="c-blue-link font-bold" rv-unless=\'model:important\'>No</span>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="line"></div>\n\n    <h2 class="title font-size-20 font-bold p-15">Attachments</h2>\n\n    <div class="col-lg-12">\n        <div class="form-horizontal">\n            <div class="form-group">\n                <div class="col-sm-offset-2 col-sm-10">\n                    <ul class="list-unstyled">\n                        <li rv-each-model="colDocuments.models">\n                            <a rv-href="model.getUrlClientRepFile" target="_blank"><i class="fa fa-paperclip" aria-hidden="true"></i> {model.getDocumentTitleOrNone}, {model:documentName}</a>\n                        </li>\n                        <li rv-hide="colDocuments.length">\n                            <span class="font-bold c-grey-medium">NONE</span>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="line"></div>\n\n    <div class="content-childView">\n\n    </div>\n\n    <div class="clearfix"></div>\n</div>';

},this.App.Templates.clientRepFilesTimelineIndex=function(a){{var b="";_.escape}return b+='<div class="header p-top-15 p-bottom-15">\n    <div class="col-lg-12">\n        <div class="m-bottom-5">\n            <strong class="display-inline-block v-align-top c-blue-link">Timeline Overview</strong>\n        </div>\n    </div>\n\n    <div class="col-lg-12">\n        <div class="m-bottom-5">\n            <strong class="display-inline-block v-align-top">Plan of Action</strong> <a href="javascript:void(0);" class="btn btn-default showPlanOfAction">show detail</a>\n            <div class="display-inline-block t-align-justify width-90-p contentPlanOfAction" style="display:none">\n                <div rv-html="model:recommendations < model:recommendations | linebreaksbr"></div>\n            </div>\n        </div>\n    </div>\n    <div class="clearfix"></div>\n\n    <div class="col-lg-3 col-md-3 col-ms-3 col-xs-3">\n        <div>\n            <label>Event Type</label>\n            <select class="form-control">\n                <option value="">All</option>\n                <option rv-each-model=\'colEventTypes.models\' rv-value="model:eventTypeID">{model:eventTypeName}</option>\n            </select>\n        </div>\n    </div>\n    <div class="clearfix"></div>\n</div>\n\n<div class="row">\n    <div class="col-lg-12">\n        <div class="p-top-15">\n            <table class="cf-table table table-striped table-hover">\n                <thead>\n                <tr>\n                    <th class="width-35"></th>\n                    <th class="width-130">Date</th>\n                    <th class="width-150">Type</th>\n                    <th>Note</th>\n                </tr>\n                </thead>\n                <tbody>\n                <tr rv-each-model="collection.models < collection.models" class="eventShow cursor-pointer" rv-data-event-id="model:eventID">\n                    <td><span class="fa fa-paperclip" rv-if="model:documentID < :documentID"></span></td>\n                    <td>{model:eventDate}</td>\n                    <td>{model:eventTypeName}</td>\n                    <td>{model:shortNote}</td>\n                </tr>\n                <tr rv-hide="collection.length">\n                    <td colspan="4"><strong>NO RECORD</strong></td>\n                </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>'},this.App.Templates.clientRepFilesWcCaseInfoShow=function(a){{var b="";_.escape}return b+='<div class="header p-top-15 p-bottom-15">\n    <div class="col-lg-4">\n        <div class="m-bottom-5 truncate-text">\n            <span class="font-bold">File Title:</span> {model:fileTitle < model:fileTitle}\n        </div>\n    </div>\n    <div class="col-lg-4">\n        <div class="m-bottom-5">\n            <span class="font-bold">File Number:</span> {model:fileNumber < model:fileNumber}\n        </div>\n    </div>\n    <div class="col-lg-4">\n        <div class="m-bottom-5">\n            <span class="font-bold">Claim Number:</span> {model:claimNumber < model:claimNumber}\n        </div>\n    </div>\n\n    <div class="col-lg-12">\n        <div class="m-bottom-5">\n            <strong class="display-inline-block v-align-top">Plan of Action</strong> <a href="javascript:void(0);" class="btn btn-default showPlanOfAction">show detail</a>\n            <div class="display-inline-block t-align-justify width-90-p contentPlanOfAction" style="display:none">\n                <div rv-html="model:recommendations < model:recommendations | linebreaksbr"></div>\n            </div>\n        </div>\n    </div>\n    <div class="clearfix"></div>\n</div>\n\n<div class="panel-info m-top-15">\n    <h2 class="c-blue-link font-size-20 t-uppercase p-15">Case</h2>\n\n    <div class="col-lg-12">\n        <div class="m-bottom-5">\n            <span class="font-bold width-150 display-inline-block">ADJ Case #:</span> <span class="c-blue-link">{model:ADJid}</span>\n        </div>\n\n        <div class="m-bottom-5">\n            <span class="font-bold width-150 display-inline-block">Date of Injury:</span> <span class="c-blue-link">{model:DOI}</span>\n        </div>\n\n        <div class="m-bottom-5">\n            <span class="font-bold width-150 display-inline-block">End Date of Injury:</span> <span class="c-blue-link">{model:DOIendCT}</span>\n        </div>\n\n        <div class="m-bottom-5">\n            <span class="font-bold width-150 display-inline-block">WCAB Venue:</span> <span class="c-blue-link">{model:venueName}</span>\n        </div>\n\n        <div class="m-bottom-5">\n            <span class="font-bold width-150 display-inline-block">WCAB Address:</span> <span class="c-blue-link">{model:venueAddress}</span>\n        </div>\n\n        <div class="m-bottom-5">\n            <span class="font-bold width-150 display-inline-block v-align-top">Body Parts:</span>\n\n            <table rv-if="model:bodyParts < model:bodyParts" class="display-inline-block">\n                <thead>\n                <tr>\n                    <th class="min-width-130">Body Part</th>\n                    <th>A/D/D</th>\n                </tr>\n                </thead>\n                <tbody>\n                <tr rv-each-bp="model:bodyParts" class="c-blue-link">\n                    <td>{bp.bodyPart}</td>\n                    <td>{bp.bpAdmittedADD}</td>\n                </tr>\n                </tbody>\n            </table>\n\n            <span rv-unless="model:bodyParts < model:bodyParts">NONE</span>\n        </div>\n    </div>\n\n    <div class="clearfix"></div>\n</div>\n\n<div class="panel-info m-top-15 p-bottom-15">\n    <h2 class="c-blue-link font-size-20 t-uppercase p-15">Insurance Info</h2>\n\n    <div class="col-lg-6 col-md-6">\n\n        <div rv-if="model:tempClientRepID">\n            <div class="title">\n                <span class="font-bold width-150">Temp Client Rep/Adjuster</span>\n                <hr class="m-bottom-0 m-top-5">\n            </div>\n\n            <div>\n                <div class="m-bottom-5 m-top-15">\n                    <span class="font-bold width-150 display-inline-block">Name:</span> <span class="c-blue-link">{model:tempClientRepName}</span>\n                </div>\n\n                <div class="m-bottom-5">\n                    <span class="font-bold width-150 display-inline-block">Office Phone:</span> <span class="c-blue-link">{model:tempClientRepPhone}</span>\n                </div>\n\n                <div class="m-bottom-5">\n                    <span class="font-bold width-150 display-inline-block">Mobile Phone:</span> <span class="c-blue-link">{model:tempAdjusterCell}</span>\n                </div>\n\n                <div class="m-bottom-5">\n                    <span class="font-bold width-150 display-inline-block v-align-top">Physical Address:</span> <span class="c-blue-link display-inline-block width-60-p v-align-middle">{model:tempAdjusterAddress1}</span>\n                </div>\n\n                <div class="m-bottom-5">\n                    <span class="font-bold width-150 display-inline-block v-align-top">Mailing Address:</span> <span class="c-blue-link display-inline-block width-60-p v-align-middle">{model:tempAdjusterAddress2}</span>\n                </div>\n            </div>\n\n        </div>\n\n        <div>\n            <div class="title">\n                <span class="font-bold width-150">Client Rep/Adjuster</span>\n                <hr class="m-bottom-0 m-top-5">\n            </div>\n\n            <div>\n                <div class="m-bottom-5 m-top-15">\n                    <span class="font-bold width-150 display-inline-block">Name:</span> <span class="c-blue-link">{model:clientRepName}</span>\n                </div>\n\n                <div class="m-bottom-5">\n                    <span class="font-bold width-150 display-inline-block">Client Name:</span> <span class="c-blue-link">{model:clientName}</span>\n                </div>\n\n                <div class="m-bottom-5">\n                    <span class="font-bold width-150 display-inline-block">Office Phone:</span> <span class="c-blue-link">{model:adjusterPhone}</span>\n                </div>\n\n                <div class="m-bottom-5">\n                    <span class="font-bold width-150 display-inline-block">Mobile Phone:</span> <span class="c-blue-link">{model:adjusterCell}</span>\n                </div>\n\n                <div class="m-bottom-5">\n                    <span class="font-bold width-150 display-inline-block v-align-top">Physical Address:</span> <span class="c-blue-link display-inline-block width-60-p v-align-middle">{model:adjusterAddress1}</span>\n                </div>\n\n                <div class="m-bottom-5">\n                    <span class="font-bold width-150 display-inline-block v-align-top">Mailing Address:</span> <span class="c-blue-link display-inline-block width-60-p v-align-middle">{model:adjusterAddress2}</span>\n                </div>\n            </div>\n\n        </div>\n    </div>\n\n    <div class="col-lg-6 col-md-6">\n        <div class="title">\n            <span class="font-bold width-150">Client</span>\n            <hr class="m-bottom-0 m-top-5">\n        </div>\n\n        <div class="m-bottom-5 m-top-15">\n            <span class="font-bold width-150 display-inline-block">Client Name:</span> <span class="c-blue-link">{model:clientName}</span>\n        </div>\n\n        <div class="m-bottom-5">\n            <span class="font-bold width-150 display-inline-block">Office Phone:</span> <span class="c-blue-link">{model:clientOfficePhone}</span>\n        </div>\n\n        <div class="m-bottom-5">\n            <span class="font-bold width-150 display-inline-block v-align-top">Physical Address:</span> <span class="c-blue-link display-inline-block width-60-p v-align-middle">{model:clientPhysicalAddress}</span>\n        </div>\n\n        <div class="m-bottom-5">\n            <span class="font-bold width-150 display-inline-block v-align-top">Mailing Address:</span> <span class="c-blue-link display-inline-block width-60-p v-align-middle">{model:clientMailingAddress}</span>\n        </div>\n    </div>\n\n    <div class="col-lg-6 col-md-6">\n        <div class="title">\n            <span class="font-bold width-150">Insurer (s)</span>\n            <hr class="m-bottom-0 m-top-5">\n        </div>\n        <div rv-each-insurer="model:insurerCompanies">\n            <div class="m-bottom-5 m-top-15">\n                <span class="font-bold width-150 display-inline-block">Insurer Name:</span> <span class="c-blue-link">{insurer.companyName}</span>\n            </div>\n\n            <div class="m-bottom-5">\n                <span class="font-bold width-150 display-inline-block">Office Phone:</span> <span class="c-blue-link">{insurer.officePhone}</span>\n            </div>\n\n            <div class="m-bottom-5">\n                <span class="font-bold width-150 display-inline-block v-align-top">Physical Address:</span> <span class="c-blue-link display-inline-block width-60-p v-align-middle">{insurer.insurerCompanyPhysicalAddress}</span>\n            </div>\n\n            <div class="m-bottom-5">\n                <span class="font-bold width-150 display-inline-block v-align-top">Mailing Address:</span> <span class="c-blue-link display-inline-block width-60-p v-align-middle">{insurer.insurerCompanyMailingAddress}</span>\n            </div>\n            <hr/>\n        </div>\n\n    </div>\n\n    <div class="col-lg-6 col-md-6">\n        <div class="title">\n            <span class="font-bold width-150">Insured</span>\n            <hr class="m-bottom-0 m-top-5">\n        </div>\n\n        <div class="m-bottom-5 m-top-15">\n            <span class="font-bold width-150 display-inline-block">Insured Name:</span> <span class="c-blue-link">{model:employerName}</span>\n        </div>\n\n        <div class="m-bottom-5">\n            <span class="font-bold width-150 display-inline-block">Office Phone:</span> <span class="c-blue-link">{model:employerOfficePhone}</span>\n        </div>\n\n        <div class="m-bottom-5">\n            <span class="font-bold width-150 display-inline-block  v-align-top">Physical Address:</span> <span class="c-blue-link display-inline-block width-60-p v-align-middle">{model:employerPhysicalAddress}</span>\n        </div>\n\n        <div class="m-bottom-5">\n            <span class="font-bold width-150 display-inline-block  v-align-top">Mailing Address:</span> <span class="c-blue-link display-inline-block width-60-p v-align-middle">{model:employerMailingAddress}</span>\n        </div>\n    </div>\n\n    <div class="col-lg-6 col-md-6">\n        <div class="title">\n            <span class="font-bold width-150">Coverages</span>\n            <hr class="m-bottom-0 m-top-5">\n        </div>\n\n        <div class="m-bottom-5 m-top-15">\n            <span class="font-bold width-150 display-inline-block v-align-top">Coverages:</span>\n            <div class="display-inline-block width-80-p" rv-html="model:coverages < model:coverages | linebreaksbr"></div>\n        </div>\n    </div>\n\n    <div class="clearfix"></div>\n</div>\n\n<div class="panel-info m-top-15 p-bottom-15">\n    <h2 class="c-blue-link font-size-20 t-uppercase p-15">Applicant And Attorney</h2>\n\n    <div class="col-lg-6 col-md-6">\n        <div class="m-bottom-5 title">\n            <span class="font-bold width-150">Applicant\'s Attorney</span>\n            <hr class="m-bottom-0 m-top-5">\n        </div>\n\n        <div class="m-bottom-5 m-top-15">\n            <span class="font-bold width-150 display-inline-block">Attorney Name:</span> <span class="c-blue-link">{model:lawyerName}</span>\n        </div>\n\n        <div class="m-bottom-5">\n            <span class="font-bold width-150 display-inline-block">Attorney Firm Name:</span> <span class="c-blue-link">{model:firmName}</span>\n        </div>\n\n        <div class="m-bottom-5">\n            <span class="font-bold width-150 display-inline-block">EAMS Name:</span> <span class="c-blue-link">{model:firmEAMSname}</span>\n        </div>\n\n        <div class="m-bottom-5">\n            <span class="font-bold width-150 display-inline-block">Office Phone:</span> <span class="c-blue-link">{model:firmOfficePhone}</span>\n        </div>\n\n        <div class="m-bottom-5">\n            <span class="font-bold width-150 display-inline-block v-align-top">Physical Address:</span> <span class="c-blue-link display-inline-block width-60-p v-align-middle">{model:fileFirmPhysicalAddress}</span>\n        </div>\n\n        <div class="m-bottom-5">\n            <span class="font-bold width-150 display-inline-block v-align-top">Mailing Address:</span> <span class="c-blue-link display-inline-block width-60-p v-align-middle">{model:fileFirmMailingAddress}</span>\n        </div>\n    </div>\n\n    <div class="col-lg-6 col-md-6">\n        <div class="m-bottom-5 title">\n            <span class="font-bold width-150">Applicant</span>\n            <hr class="m-bottom-0 m-top-5">\n        </div>\n\n        <div class="m-bottom-5 m-top-15">\n            <span class="font-bold width-150 display-inline-block">Applicant Name:</span> <span class="c-blue-link">{model:applicantFirstName} {model:applicantMiddleName} {model:applicantLastName}</span>\n        </div>\n\n        <div class="m-bottom-5">\n            <span class="font-bold width-150 display-inline-block">DOB:</span> <span class="c-blue-link">{model:applicantDOB}</span>\n        </div>\n\n        <div class="m-bottom-5">\n            <span class="font-bold width-150 display-inline-block">SSN:</span> <span class="c-blue-link">{model:applicantSSN}</span>\n        </div>\n\n        <div class="m-bottom-5">\n            <span class="font-bold width-150 display-inline-block">Injuries:</span> <span class="c-blue-link">{getInjuries < model:bodyParts}</span>\n        </div>\n\n        <div class="m-bottom-5">\n            <span class="font-bold width-150 display-inline-block">Home Phone:</span> <span class="c-blue-link">{model:applicantHomePhone}</span>\n        </div>\n\n        <div class="m-bottom-5">\n            <span class="font-bold width-150 display-inline-block  v-align-top">Physical Address:</span> <span class="c-blue-link display-inline-block width-60-p v-align-middle">{model:applicantPhysicalAddress}, {model:applicantPhysicalCity}, {model:applicantPhysicalState}{model:applicantPhysicalZip}</span>\n        </div>\n\n        <div class="m-bottom-5">\n            <span class="font-bold width-150 display-inline-block  v-align-top">Mailing Address:</span>\n            <span class="c-blue-link display-inline-block width-60-p v-align-middle">{model:applicantMailingAddress}, {model:applicantMailingCity}, {model:applicantMailingState}{model:applicantMailingZip}</span>\n        </div>\n    </div>\n    <div class="clearfix"></div>\n</div>\n\n<div class="panel-info m-top-15 p-bottom-15">\n    <h2 class="c-blue-link font-size-20 t-uppercase p-15">Co-Defendant</h2>\n\n    <div class="col-lg-6 col-md-6" rv-each-codef="model:codefendants">\n        <div>\n            <div class="m-bottom-5 title">\n                <span class="font-bold width-150">Co-Defendant Name {codef.codefendantName}</span>\n                <hr class="m-bottom-0 m-top-5">\n            </div>\n\n            <div class="m-bottom-5">\n                <span class="font-bold width-150 display-inline-block">Attorney Name:</span> <span class="c-blue-link">{codef.lawyerFirstName} {codef.lawyerMiddleName} {codef.lawyerLastName}</span>\n            </div>\n\n            <div class="m-bottom-5">\n                <span class="font-bold width-150 display-inline-block">Attorney Firm:</span> <span class="c-blue-link">{codef.firmName}</span>\n            </div>\n\n            <div class="m-bottom-5">\n                <span class="font-bold width-150 display-inline-block v-align-top">Physical Address:</span> <span class="c-blue-link display-inline-block width-60-p v-align-middle">{codef.physicalAddress}, {codef.physicalCity}, {codef.physicalState}{codef.physicalZip}</span>\n            </div>\n\n            <div class="m-bottom-5">\n                <span class="font-bold width-150 display-inline-block v-align-top">Mailing Address:</span> <span class="c-blue-link  display-inline-block width-60-p v-align-middle">{codef.mailingAddress}, {codef.mailingCity}, {codef.mailingState}{codef.mailingZip}</span>\n            </div>\n        </div>\n    </div>\n\n    <div class="clearfix"></div>\n</div>'},this.App.Templates.clientRepFilesWcDeposEventShow=function(a){{var b="";_.escape}return b+='<div class="panel-info p-bottom-15">\n    <h2 class="title font-size-20 font-bold p-15">Event Info</h2>\n\n    <div class="col-lg-12">\n        <div class="form-horizontal">\n            <div class="form-group">\n                <span class="col-sm-2 t-align-right">Event Title:</span>\n                <div class="col-sm-10">\n                    <span class="c-blue-link font-bold" rv-if="model:eventTitle">{model:eventTitle}</span>\n                    <span class="font-bold c-grey-medium" rv-unless="model:eventTitle">EMPTY</span>\n                </div>\n            </div>\n\n            <div class="form-group">\n                <span class="col-sm-2 t-align-right">Event Type:</span>\n                <div class="col-sm-10">\n                    <span class="c-blue-link font-bold" rv-if="model:eventTypeName">{model:eventTypeName}</span>\n                    <span class="font-bold c-grey-medium" rv-unless="model:eventTypeName">EMPTY</span>\n                    <span class="c-blue-link font-bold" rv-if="model:description">{model:description}</span>\n                </div>\n            </div>\n\n            <div class="form-group">\n                <span class="col-sm-2 t-align-right">Event Date:</span>\n                <div class="col-sm-10">\n                    <span class="c-blue-link font-bold" rv-if="model:eventDate">{model:eventDate}</span>\n                    <span class="font-bold c-grey-medium" rv-unless="model:eventDate">EMPTY</span>\n                </div>\n            </div>\n\n            <div class="form-group">\n                <span class="col-sm-2 t-align-right">Short Note:</span>\n                <div class="col-sm-10">\n                    <span class="c-blue-link font-bold" rv-if="model:shortNote">{model:shortNote}</span>\n                    <span class="font-bold c-grey-medium" rv-unless="model:shortNote">EMPTY</span>\n                </div>\n            </div>\n\n            <div class="form-group">\n                <span class="col-sm-2 t-align-right">Long Note:</span>\n                <div class="col-sm-10">\n                    <span class="c-blue-link font-bold" rv-if=\'model:longNote\'>{model:longNote}</span>\n                    <span class="font-bold c-grey-medium" rv-unless="model:longNote">EMPTY</span>\n                </div>\n            </div>\n\n            <div class="form-group">\n                <span class="col-sm-2 t-align-right">Important:</span>\n                <div class="col-sm-10">\n                    <span class="c-blue-link font-bold" rv-if=\'model:important\'>Yes</span>\n                    <span class="c-blue-link font-bold" rv-unless=\'model:important\'>No</span>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="line"></div>\n\n    <h2 class="title font-size-20 font-bold p-15">Attachments</h2>\n\n    <div class="col-lg-12">\n        <div class="form-horizontal">\n            <div class="form-group">\n                <div class="col-sm-offset-2 col-sm-10">\n                    <ul class="list-unstyled">\n                        <li rv-each-model="colDocuments.models">\n                            <a rv-href="model.getUrlClientRepFile" target="_blank"><i class="fa fa-paperclip" aria-hidden="true"></i> {model.getDocumentTitleOrNone}, {model:documentName}</a>\n                        </li>\n                        <li rv-hide="colDocuments.length">\n                            <span class="font-bold c-grey-medium">NONE</span>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="line"></div>\n\n    <div class="content-details">\n\n        <h2 class="title font-size-20 font-bold p-15">Details</h2>\n\n        <div class="col-lg-12">\n            <div class="form-horizontal">\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Depo Date:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if=\'model:childData.depoDate\'>{model:childData.depoDate}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.depoDate">EMPTY</span>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Depo Schedule Time:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if=\'model:childData.depoSchedTime\'>{model:childData.depoSchedTime | time}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.depoSchedTime">EMPTY</span>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Deponent Name:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if=\'model:childData.deponentName\'>{model:childData.deponentName}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.deponentName">EMPTY</span>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Depo of:</span>\n                    <div class="col-sm-2">\n                        <span class="c-blue-link font-bold" rv-if=\'model:childData.depoOf\'>{model:childData.depoOf}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.depoOf">EMPTY</span>\n                    </div>\n\n                    <span class="col-sm-2 t-align-right">By:</span>\n                    <div class="col-sm-2">\n                        <span class="c-blue-link font-bold" rv-if=\'model:childData.depoBy\'>{model:childData.depoBy}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.depoBy">EMPTY</span>\n                    </div>\n\n                    <span class="col-sm-2 t-align-right">Status:</span>\n                    <div class="col-sm-2">\n                        <span class="c-blue-link font-bold" rv-if=\'model:childData.depoStatus\'>{model:childData.depoStatus}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.depoStatus">EMPTY</span>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Depo Location:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if=\'model:childData.depoLocation\'>{model:childData.depoLocation}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.depoLocation">EMPTY</span>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Depo Address:</span>\n                    <div class="col-sm-10">\n                    <span class="c-blue-link font-bold">\n                        {model:childData.depoAddress}, {model:childData.depoCity}, {model:childData.depoState}{model:childData.depoZip}\n                    </span>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Depo Phone:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if=\'model:childData.depoPhone\'>{model:childData.depoPhone}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.depoPhone">EMPTY</span>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class="line"></div>\n\n        <h2 class="title font-size-20 font-bold p-15">5710</h2>\n\n        <div class="col-lg-12">\n            <div class="form-horizontal">\n\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Depo Start Time:</span>\n                    <div class="col-sm-2">\n                        <span class="c-blue-link font-bold" rv-if=\'model:childData.depoStartTime\'>{model:childData.depoStartTime | time}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.depoStartTime">EMPTY</span>\n                    </div>\n\n                    <span class="col-sm-3 t-align-right">Depo End Time:</span>\n                    <div class="col-sm-5">\n                        <span class="c-blue-link font-bold" rv-if=\'model:childData.depoEndTime\'>{model:childData.depoEndTime | time}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.depoEndTime">EMPTY</span>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Break Minutes:</span>\n                    <div class="col-sm-2">\n                        <span class="c-blue-link font-bold" rv-if=\'model:childData.breakMinutes\'>{model:childData.breakMinutes}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.breakMinutes">EMPTY</span>\n                    </div>\n\n                    <span class="col-sm-3 t-align-right">Testimony Minutes:</span>\n                    <div class="col-sm-5">\n                        <span class="c-blue-link font-bold" rv-if=\'model:childData.testimonyMinutes\'>{model:childData.testimonyMinutes}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.testimonyMinutes">EMPTY</span>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Depo Prep Minutes:</span>\n                    <div class="col-sm-2">\n                        <span class="c-blue-link font-bold" rv-if=\'model:childData.depoPrepMinutes\'>{model:childData.depoPrepMinutes}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.depoPrepMinutes">EMPTY</span>\n                    </div>\n\n                    <span class="col-sm-3 t-align-right">AA Travel Minutes:</span>\n                    <div class="col-sm-5">\n                        <span class="c-blue-link font-bold" rv-if=\'model:childData.AAtravelMinutes\'>{model:childData.AAtravelMinutes}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.AAtravelMinutes">EMPTY</span>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Total AA minutes:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if=\'model:childData.totalAAminutes\'>{model:childData.totalAAminutes}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.totalAAminutes">EMPTY</span>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Advised 5710 Fees:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if=\'model:childData.advised5710Fees\'>{model:childData.advised5710Fees}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.advised5710Fees">EMPTY</span>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">AA 5710 rate:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if=\'model:childData.AA5710rate\'>{model:childData.AA5710rate}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.AA5710rate">EMPTY</span>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Deponent Mileage:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if=\'model:childData.deponentMileage\'>{model:childData.deponentMileage}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.deponentMileage">EMPTY</span>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Mileage Rate:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if=\'model:childData.mileageRate\'>{model:childData.mileageRate}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.mileageRate">EMPTY</span>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Advised Mileage Fees:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if=\'model:childData.advisedMileageFees\'>{model:childData.advisedMileageFees}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.advisedMileageFees">EMPTY</span>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class="line"></div>\n\n        <h2 class="title font-size-20 font-bold p-15">Summary</h2>\n\n        <div class="col-lg-12">\n            <div class="form-horizontal">\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Continue Date:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if=\'model:childData.continueDate\'>{model:childData.continueDate}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.continueDate">EMPTY</span>\n                    </div>\n                </div>\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Subpoenas:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if=\'model:childData.subpoenas\'>{model:childData.subpoenas}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.subpoenas">EMPTY</span>\n                    </div>\n                </div>\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Issues:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if=\'model:childData.issues\'>{model:childData.issues}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.issues">EMPTY</span>\n                    </div>\n                </div>\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Summary:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if=\'model:childData.shortSummary\'>{model:childData.shortSummary}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.shortSummary">EMPTY</span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="clearfix"></div>\n</div>';

},this.App.Templates.clientRepFilesWcDeposIndex=function(a){{var b="";_.escape}return b+='<div class="header p-top-15 p-bottom-15">\n    <div class="col-lg-12">\n        <div class="m-bottom-5">\n            <strong class="display-inline-block v-align-top c-blue-link">Depos Overview</strong>\n        </div>\n    </div>\n\n    <div class="col-lg-12">\n        <div class="m-bottom-5">\n            <strong class="display-inline-block v-align-top">Plan of Action</strong> <a href="javascript:void(0);" class="btn btn-default showPlanOfAction">show detail</a>\n            <div class="display-inline-block t-align-justify width-90-p contentPlanOfAction" style="display:none">\n                <div rv-html="model:recommendations < model:recommendations | linebreaksbr"></div>\n            </div>\n        </div>\n    </div>\n    <div class="clearfix"></div>\n</div>\n\n<div class="row">\n    <div class="col-lg-12">\n        <div class="p-top-15">\n            <table class="cf-table table table-striped table-hover">\n                <thead>\n                <tr>\n                    <th class="width-35"></th>\n                    <th class="width-130">Date</th>\n                    <th class="width-150">Deponent</th>\n                    <th>Issues</th>\n                </tr>\n                </thead>\n                <tbody>\n                <tr rv-each-model="collection.models < collection.models" class="eventShow cursor-pointer" rv-data-event-id="model:eventID">\n                    <td><span class="fa fa-paperclip" rv-if="model:documentID < :documentID"></span></td>\n                    <td>{model:depoDate}</td>\n                    <td>{model:deponentName}</td>\n                    <td>{model:issues}</td>\n                </tr>\n                <tr rv-hide="collection.length">\n                    <td colspan="4"><strong>NO RECORD</strong></td>\n                </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>'},this.App.Templates.clientRepFilesWcHearingsEventShow=function(a){{var b="";_.escape}return b+='<div class="panel-info p-bottom-15">\n    <h2 class="title font-size-20 font-bold p-15">Event Info</h2>\n\n    <div class="col-lg-12">\n        <div class="form-horizontal">\n            <div class="form-group">\n                <span class="col-sm-2 t-align-right">Event Title:</span>\n                <div class="col-sm-10">\n                    <span class="c-blue-link font-bold" rv-if="model:eventTitle">{model:eventTitle}</span>\n                    <span class="font-bold c-grey-medium" rv-unless="model:eventTitle">EMPTY</span>\n                </div>\n            </div>\n\n            <div class="form-group">\n                <span class="col-sm-2 t-align-right">Event Type:</span>\n                <div class="col-sm-10">\n                    <span class="c-blue-link font-bold" rv-if="model:eventTypeName">{model:eventTypeName}</span>\n                    <span class="font-bold c-grey-medium" rv-unless="model:eventTypeName">EMPTY</span>\n                    <span class="c-blue-link font-bold" rv-if="model:description">{model:description}</span>\n                </div>\n            </div>\n\n            <div class="form-group">\n                <span class="col-sm-2 t-align-right">Event Date:</span>\n                <div class="col-sm-10">\n                    <span class="c-blue-link font-bold" rv-if="model:eventDate">{model:eventDate}</span>\n                    <span class="font-bold c-grey-medium" rv-unless="model:eventDate">EMPTY</span>\n                </div>\n            </div>\n\n            <div class="form-group">\n                <span class="col-sm-2 t-align-right">Short Note:</span>\n                <div class="col-sm-10">\n                    <span class="c-blue-link font-bold" rv-if="model:shortNote">{model:shortNote}</span>\n                    <span class="font-bold c-grey-medium" rv-unless="model:shortNote">EMPTY</span>\n                </div>\n            </div>\n\n            <div class="form-group">\n                <span class="col-sm-2 t-align-right">Long Note:</span>\n                <div class="col-sm-10">\n                    <span class="c-blue-link font-bold" rv-if="model:longNote">{model:longNote}</span>\n                    <span class="font-bold c-grey-medium" rv-unless="model:longNote">EMPTY</span>\n                </div>\n            </div>\n\n            <div class="form-group">\n                <span class="col-sm-2 t-align-right">Important:</span>\n                <div class="col-sm-10">\n                    <span class="c-blue-link font-bold" rv-if=\'model:important\'>Yes</span>\n                    <span class="c-blue-link font-bold" rv-unless=\'model:important\'>No</span>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="line"></div>\n\n    <h2 class="title font-size-20 font-bold p-15">Attachments</h2>\n\n    <div class="col-lg-12">\n        <div class="form-horizontal">\n            <div class="form-group">\n                <div class="col-sm-offset-2 col-sm-10">\n                    <ul class="list-unstyled">\n                        <li rv-each-model="colDocuments.models">\n                            <a rv-href="model.getUrlClientRepFile" target="_blank"><i class="fa fa-paperclip" aria-hidden="true"></i> {model.getDocumentTitleOrNone}, {model:documentName}</a>\n                        </li>\n                        <li rv-hide="colDocuments.length">\n                            <span class="font-bold c-grey-medium">NONE</span>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="line"></div>\n\n    <div class="content-details">\n        <h2 class="title font-size-20 font-bold p-15">Details</h2>\n        <div class="col-lg-12">\n            <div class="form-horizontal">\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Status:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if="model:childData.hearingStatus">{model:childData.hearingStatus}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.hearingStatus">EMPTY</span>\n                    </div>\n                </div>\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Hearing Date:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if="model:childData.hearingDate">{model:childData.hearingDate}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.hearingDate">EMPTY</span>\n                    </div>\n                </div>\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Start Time:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if="model:childData.startTime">{model:childData.startTime | time}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.startTime">EMPTY</span>\n                    </div>\n                </div>\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">End Time:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if="model:childData.endTime">{model:childData.endTime | time}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.endTime">EMPTY</span>\n                    </div>\n                </div>\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Set by:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if="model:childData.setBy">{model:childData.setBy}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.setBy">EMPTY</span>\n                    </div>\n                </div>\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Venue:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if="model:childData.venueName">{model:childData.venueName}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.venueName">EMPTY</span>\n                    </div>\n                </div>\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">WCAB judge:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if="model:childData.WCABjudge">{model:childData.WCABjudge}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.WCABjudge">EMPTY</span>\n                    </div>\n                </div>\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Batch ID:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if="model:childData.batchID">{model:childData.batchID}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.batchID">EMPTY</span>\n                    </div>\n                </div>\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Issues:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if="model:childData.issues">{model:childData.issues}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.issues">EMPTY</span>\n                    </div>\n                </div>\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Summary:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if="model:childData.shortSummary">{model:childData.shortSummary}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.shortSummary">EMPTY</span>\n                    </div>\n                </div>\n                <div class="form-group">\n                    <span class="col-sm-2 t-align-right">Signing Attorney:</span>\n                    <div class="col-sm-10">\n                        <span class="c-blue-link font-bold" rv-if="model:childData.signingAttorney">{model:childData.signingAttorney}</span>\n                        <span class="font-bold c-grey-medium" rv-unless="model:childData.signingAttorney">EMPTY</span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="clearfix"></div>\n</div>'},this.App.Templates.clientRepFilesWcHearingsIndex=function(a){{var b="";_.escape}return b+='<div class="header p-top-15 p-bottom-15">\n    <div class="col-lg-12">\n        <div class="m-bottom-5">\n            <strong class="display-inline-block v-align-top c-blue-link">Hearings Overview</strong>\n        </div>\n    </div>\n\n    <div class="col-lg-12">\n        <div class="m-bottom-5">\n            <strong class="display-inline-block v-align-top">Plan of Action</strong> <a href="javascript:void(0);" class="btn btn-default showPlanOfAction">show detail</a>\n            <div class="display-inline-block t-align-justify width-90-p contentPlanOfAction" style="display:none">\n                <div rv-html="model:recommendations < model:recommendations | linebreaksbr"></div>\n            </div>\n        </div>\n    </div>\n    <div class="clearfix"></div>\n</div>\n\n<div class="row">\n    <div class="col-lg-12">\n        <div class="p-top-15">\n            <table class="cf-table table table-striped table-hover">\n                <thead>\n                <tr>\n                    <th class="width-35"></th>\n                    <th class="width-130">Date</th>\n                    <th class="width-150">Type</th>\n                    <th>Issues</th>\n                </tr>\n                </thead>\n                <tbody>\n                <tr rv-each-model="collection.models < collection.models" class="eventShow cursor-pointer" rv-data-event-id="model:eventID">\n                    <td><span class="fa fa-paperclip" rv-if="model:documentID < :documentID"></span></td>\n                    <td>{model:hearingDate}</td>\n                    <td>{model:eventTypeName}</td>\n                    <td>{model:issues}</td>\n                </tr>\n                <tr rv-hide="collection.length">\n                    <td colspan="4"><strong>NO RECORD</strong></td>\n                </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>'},this.App.Templates.clientRepSettingsClientRepSettings=function(a){{var b="";_.escape}return b+='<div class="container m-top-10">\n    <div class="row">\n        <div class="col-lg-12">\n            <ol class="breadcrumb">\n                <li><a href="#"><i class="fa fa-list" aria-hidden="true"></i> Files</a></li>\n                <li class="active">\n                    <i class="fa fa-cog" aria-hidden="true"></i> My Settings\n                </li>\n            </ol>\n        </div>\n\n        <div class="col-lg-12 col-md-12 col-ms-12 font-bold">\n            <div class="border-bottom-blue-new-casefriend-lg">\n                <span class="c-blue-link font-size-22 p-left-15">My Settings</span>\n            </div>\n        </div>\n    </div>\n\n    <div class="clearfix m-top-20"></div>\n    <div class="col-lg-3 col-md-3 col-ms-3 p-left-0 client-rep-settings">\n        <div class="list-group client-rep-settings-options c-grey-dark font-bold">\n            <a href="javascript:void(0);" class="list-group-item active" data-optiontab="personal_info">Personal Info</a>\n            <a href="javascript:void(0);" class="list-group-item" data-optiontab="security">Security</a>\n        </div>\n    </div>\n    <div class="col-lg-9 col-md-9 col-ms-9 p-right-0 client-rep-settings-panel">\n        <div class="panel panel-default">\n            <div class="panel-body" id="client-rep-settings-body"></div>\n        </div>\n    </div>\n</div>'},this.App.Templates.clientRepSettingsPersonalInfo=function(a){{var b="";_.escape}return b+='<div class=\'row\'>\n    <form id="client-rep-user-settings-form">\n        <div class=\'col-md-10\'>\n            <div class="form-horizontal p-top-15">\n                <div class="form-group">\n                    <label class="col-sm-3 p-top-5"><i class="fa fa-asterisk c-red font-size-10 p-right-5"></i>First</label>\n                    <div class="col-sm-9">\n                        <input type="text" class="form-control" name=\'first\' rv-value=\'model:first\' placeholder="First" required>\n                    </div>\n                </div>\n                <div class="form-group">\n                    <label class="col-sm-3 p-top-5">Middle</label>\n                    <div class="col-sm-9">\n                        <input type="text" class="form-control" name=\'middle\' rv-value=\'model:middle\' placeholder="Middle">\n                    </div>\n                </div>\n                <div class="form-group">\n                    <label class="col-sm-3 p-top-5"><i class="fa fa-asterisk c-red font-size-10 p-right-5"></i>Last</label>\n                    <div class="col-sm-9">\n                        <input type="text" class="form-control" name=\'last\' rv-value=\'model:last\' placeholder="Last" required>\n                    </div>\n                </div>\n                <div class="form-group">\n                    <label for="login" class="col-sm-3 p-top-5"><i class="fa fa-asterisk c-red font-size-10 p-right-5"></i>Email:</label>\n                    <div class="col-sm-9">\n                        <input type="email" class="form-control" name="email" placeholder="Email" rv-value="model:email" required maxlength="80" size="20">\n                    </div>\n                </div>\n                <div class="form-group">\n                    <label class="col-sm-3 p-top-5"><i class="fa fa-asterisk c-red font-size-10 p-right-5"></i>Phone:</label>\n                    <div class="col-sm-9">\n                        <input type="text" class="form-control" name=\'phone\' rv-value=\'model:phone\' placeholder="Phone" required>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class=\'col-md-12 p-top-15\'>\n            <div class="form-group">\n                <button id=\'save\' class="btn btn-primary btn-lg">Save</button>\n            </div>\n        </div>\n    </form>\n</div>'},this.App.Templates.clientRepSettingsSecurity=function(a){{var b="";_.escape}return b+='<div class=\'row\'>\n    <form id="client-rep-user-scurity" autocomplete="off">\n        <div class=\'col-md-10\'>\n            <div class="form-horizontal p-top-15">\n                <div class="form-group">\n                    <label class="col-sm-3 p-top-5"><i class="fa fa-asterisk c-red font-size-10 p-right-5"></i>Current Password</label>\n                    <div class="col-sm-9">\n                        <input type="password" class="form-control" name=\'current_password\' autocomplete=\'off\'\n                               rv-value=\'model:current_password\' placeholder="Current Password" required/>\n                    </div>\n                </div>\n                <hr/>\n                <div class="form-group">\n                    <label class="col-sm-3 p-top-5"><i class="fa fa-asterisk c-red font-size-10 p-right-5"></i>New Password</label>\n                    <div class="col-sm-9">\n                        <div class="input-group">\n                            <input type="password" class="form-control" id="password" name=\'password\' autocomplete=\'off\'\n                                   rv-value=\'model:password\' placeholder="New Password" required aria-describedby="password-guide"/>\n                            <a tabindex="0" class="input-group-addon cursor-pointer" id="password-guide"\n                               title="Password instructions" role="button" data-toggle="popover"\n                               data-container="body" data-html="true" data-trigger="focus">?</a>\n\n                        </div>\n                    </div>\n                </div>\n                <div class="form-group">\n                    <label class="col-sm-3 p-top-5"><i class="fa fa-asterisk c-red font-size-10 p-right-5"></i>Repeat Password</label>\n                    <div class="col-sm-9">\n                        <input type="password" class="form-control" name=\'password_confirmation\' autocomplete=\'off\' id="password_confirmation" rv-value=\'model:password_confirmation\' placeholder="Repeat Password" required/>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class=\'col-md-12 p-top-15\'>\n            <div class="form-group">\n                <button id=\'save-password\' class="btn btn-primary btn-lg">Save</button>\n            </div>\n        </div>\n    </form>\n</div>'},this.App.Templates.clientRepUploadFileIndex=function(a){{var b="";_.escape}return b+='<div class="container m-top-10">\n    <div class="row">\n        <div class="col-lg-12">\n            <ol class="breadcrumb">\n                <li><a href="#"><i class="fa fa-list" aria-hidden="true"></i> Files</a></li>\n                <li class="active">\n                    <i class="fa fa-upload" aria-hidden="true"></i> Upload File\n                </li>\n            </ol>\n        </div>\n\n        <div class="col-lg-12 col-md-12 col-ms-12 font-bold">\n            <div class="border-bottom-blue-new-casefriend-lg">\n                <span class="c-blue-link font-size-22 p-left-15">Upload File</span>\n            </div>\n        </div>\n    </div>\n\n    <div class="clearfix m-top-20"></div>\n    <div class="panel panel-default">\n        <div class="panel-body">\n            <form id="uplodaFile" class="form-horizontal form-upload" method="POST" enctype="multipart/form-data" onsubmit="javascript: return false;">\n                <div class="form-group">\n                    <label class="col-sm-2 p-top-5"><i class="fa fa-asterisk c-red font-size-10"></i> Files:</label>\n                    <div class="col-sm-9 m-top-3">\n                        <select name="filesNumber" class="form-control" id="filesSelect" required>\n                            <option>Select an File</option>\n                            <option>New File</option>\n                            <optgroup rv-each-model="collection.models" rv-label="model:name">\n                                <option rv-each-file="model:files.models < :files" rv-value="file:fileNumber" rv-data-firmID="model:firm_id">{file:fileTitle < file:fileTitle}</option>\n                            </optgroup>\n                        </select>\n                    </div>\n                </div>\n                <div id="new-file" class="display-none">\n                    <div class="form-group">\n                        <label class="col-sm-2 p-top-5">Select Firm:</label>\n                        <div class="col-sm-9 m-top-3">\n                            <select name="firmNumber" class="form-control" id="firmNumber" required>\n                                <option rv-each-model="collection.models" rv-value="model:firm_id">{model:name}</option>\n                            </select>\n                        </div>\n                    </div>\n                    <div class="form-group">\n                        <label class="col-sm-2 p-top-5">New file Name:</label>\n                        <div class="col-sm-9 m-top-3">\n                            <input type="text" name="newFileName" class="form-control"/>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <label class="col-sm-2 p-top-5">Comments:</label>\n                    <div class="col-sm-9 m-top-3">\n                        <textarea class="form-control" rows="5" name="notes"></textarea>\n                    </div>\n                </div>\n                <div class="form-group fileupload-buttonbar">\n                    <div class="col-sm-2 p-top-5"></div>\n                    <div class="col-lg-9 m-top-3">\n                        <div class="btn btn-success fileinput-button">\n                            <i class="glyphicon glyphicon-plus"></i>\n                            <span>Add Document</span>\n                            <input type="file" name="files[]" class="add-files" accept=".jpeg, .jpg, .jpe, .png, .gif, .xls, .xlsx, .doc, .docx, .txt, .pdf, .tif, .tiff" multiple>\n\n                        </div>\n                        <button class="btn fileupdate-cancel btn-warning cancel" disabled="disabled">\n                            <i class="glyphicon glyphicon-ban-circle"></i>\n                            <span>Cancel upload</span>\n                        </button>\n\n                        <button type="submit" style="display:none;" class="start"></button>\n                        <button class="tst-uploadDocument-btn btn btn-primary btn-submit" disabled="disabled">\n                            <span>Start all upload ({countDocumentToUpload < countDocumentToUpload})</span>\n                        </button>\n                        <!-- The global file processing state -->\n                        <span class="fileupload-process"></span>\n                    </div>\n                    <!-- The global progress state -->\n                    <div class="clearfix"></div>\n                    <div class="m-top-15 m-bottom-15"></div>\n\n                    <div class="col-sm-2 p-top-5"></div>\n                    <div class="col-sm-6 documents"></div>\n                    <div class="col-lg-4 fileupload-progress fade">\n                        <!-- The global progress bar -->\n                        <div class="progress progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100">\n                            <div class="progress-bar progress-bar-success" style="width:0%;"></div>\n                        </div>\n                        <!-- The extended global progress state -->\n                        <div class="progress-extended">&nbsp;</div>\n                    </div>\n                </div>\n                <div class="form-group">\n                    <div class="col-sm-10 p-top-3 m-left-15">\n                        <h2 class="c-blue-link m-bottom-5 font-size-20">Instructions:</h2>\n                        <ul class="m-left-15">\n                            <li><strong>Drag & drop</strong> files from your desktop onto this webpage with Google Chrome, Mozilla Firefox and Apple Safari.</li>\n                            <li>Maximum file size: <strong>100 MB.</strong></li>\n                            <li><strong>JPG, GIF, PNG, TIFF, PDF, DOC, DOCX, TXT, XLS</strong> files are allowed.</li>\n                        </ul>\n                    </div>\n                </div>\n            </form>\n        </div>\n    </div>\n</div>\n\n\n<div class="template-upload-base template-upload panel panel-default hidden">\n    <div class="panel-heading">Document Information</div>\n    <div class="panel-body">\n        <div class="form-horizontal">\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-3">Document Title:</label>\n                <div class="col-sm-8 description-documentTitle">\n                    <input type="text" class="form-control" disabled name="documentTitle" rv-value="model:documentTitle">\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-3">Note:</label>\n                <div class="col-sm-8 description-note">\n                    <textarea class="form-control" placeholder="Notes/Comments" name="note" rv-value="model:note"></textarea>\n                </div>\n            </div>\n            <!-- display any errors when this template is used to upload documents -->\n            <div class="error text-danger"></div>\n        </div>\n    </div>\n    <div class="modal-footer hidden">\n        <button type="button" class="btn btn-default btn-close cancel" data-dismiss="modal">Close</button>\n        <button type="button" class="btn btn-primary start">Save</button>\n    </div>\n</div>'},this.App.Templates.dashboardCalendarEventForm=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <a class="close close-alert-form" data-dismiss="modal">×</a>\n    <h1 class="modal-title font-bold font-size-17" rv-if="model.isNew">Create Calendar Reminder</h1>\n    <h1 class="modal-title font-bold font-size-17" rv-unless="model.isNew">Edit Calendar Reminder</h1>\n</div>\n<div class="modal-body">\n    <form id="alert-form">\n        <div class="p-top-15">\n            <div class="form-horizontal">\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10 p-right-5"></i>Start Date</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control datepicker" name="date" placeholder="yyyy-mm-dd" rv-value=\'model:date\' required>\n\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Description:</label>\n                    <div class="col-sm-8">\n                        <input type="text" name="description" rv-value="model:description" class=\'form-control\' required>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 font-size-15 control-label">Add Users:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control search-files typeahead user-Typeahead p-right-30" name="userTypeahead" rv-value="model:userTypeahead">\n                        <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="userTypeahead"><i class="fa fa-chevron-down"></i></a>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <div class="col-sm-offset-3">\n                        <table class=\'table\'>\n                            <thead>\n                            <tr>\n                                <td><i class="fa fa-asterisk c-red font-size-10 p-right-5"></i>Assign</td>\n                                <td>User</td>\n                            </tr>\n                            </thead>\n                            <tbody>\n                            <tr rv-each-row="colUsers.models">\n                                <td><input type="checkbox" class="user-checkbox" rv-data-user-id="row:user_id" rv-data-typeaheadresult="row:typeaheadResult" name=\'user_id\' checked/></td>\n                                <td>{row:typeaheadResult}</td>\n                            </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n                <hr>\n                <div class="form-group m-bottom-10">\n                    <em class=\'font-size-17 p-bottom-10 p-left-50\'> Extra Settings (Optional)</em>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Start Time:</label>\n                    <div class="col-sm-8  display-table bootstrap-timepicker p-right-15">\n                        <input type="text" class="form-control input-small timepicker" name=\'time\' rv-value="model:time">\n                        <span class="input-group-addon"><i class="glyphicon glyphicon-time"></i></span>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">End Time:</label>\n                    <div class="col-sm-8  display-table bootstrap-timepicker p-right-15">\n                        <input type="text" class="form-control input-small timepicker" name=\'end_time\' rv-value="model:end_time">\n                        <span class="input-group-addon"><i class="glyphicon glyphicon-time"></i></span>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">End Date</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control datepicker" name="end_date" placeholder="yyyy-mm-dd" rv-value=\'model:end_date\'>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Alert set:</label>\n                    <div class="col-sm-3">\n                        <input type="number" name="notificationQuantity" rv-value="model:notificationQuantity" class=\'form-control\' number="true">\n                    </div>\n                    <div class="col-sm-3">\n                        <select name="notificationUnit" rv-value="model:notificationUnit" class=\'form-control\'>\n                            <option value="minutes">Minutes</option>\n                            <option value="hours">Hours</option>\n                            <option value="days">Days</option>\n                        </select>\n                    </div>\n                    <label class="col-sm-2 control-label">Before</label>\n                </div>\n\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 font-size-15 control-label">Associate File: </label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control search-files typeahead files_typeahead" name="files">\n                        <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="files"><i class="fa fa-chevron-down"></i></a>\n                    </div>\n                </div>\n\n                <div rv-show="model:fileNumber < model:fileNumber">\n                    <div class="form-group m-bottom-5" id="eventID-selected">\n                        <label class="col-sm-3 font-size-15 control-label">Associate Event:</label>\n                        <div class="col-sm-8">\n                            <input type="text" class="form-control search-files typeahead events_typeahead" name="event">\n                            <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="event"><i class="fa fa-chevron-down"></i></a>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </form>\n</div>\n<div class="modal-footer">\n    <button type="button" class="btn btn-default close-alert-form" data-dismiss="modal">Close</button>\n    <button type="button" class="btn btn-primary" id=\'save-alert\'>Save Changes</button>\n    <button type="button" class="btn btn-danger" id=\'delete-alert\' rv-data-alert-id="model:alert_id" rv-if="model:alert_id">Delete</button>\n</div>';

},this.App.Templates.dashboardMainMenu=function(a){{var b="";_.escape}return b+='<nav class="navbar nav-bar-menu m-reset navbar-default bgc-heavenly-light b-radius-1">\n    <div class="container">\n        <div id="navbar">\n            <ul id="menu-parent" class="nav navbar-nav">\n                <li data-permission="2">\n                    <a href=\'javascript:void(0);\' class="dropdown-toggle link-menu dropdown-files" data-toggle="dropdown" data-trigger="hover" role="button" aria-haspopup="true" aria-expanded="false">Files <span class="caret"></span></a>\n                    <ul class="dropdown-menu sub-menu" aria-labelledby="dropdownMenuDivider">\n                        <li>\n                            <a class="link-menu" href=\'#files/new/step1\'>Add New File</a>\n                        </li>\n                        <li role="separator" class="divider"></li>\n                        <li data-permission="31">\n                            <a class="link-menu" id="new-bill" href="Javascript:;">Add New Bill</a>\n                        </li>\n                        <li role="separator" class="divider" data-permission="31"></li>\n                        <li>\n                            <a class="link-menu" href=\'#files\'>All My Files</a>\n                        </li>\n                        <li>\n                            <a class="link-menu" href=\'#files?fileStatus=active\'>All Active Files</a>\n                        </li>\n                        <li>\n                            <a class="link-menu" href=\'#files?fileStatus=wc-closed\'>All Closed Files</a>\n                        </li>\n                    </ul>\n                </li>\n                <li data-permission="4" class="dropdown">\n                    <a href="javascript:void(0);" class="dropdown-toggle link-menu" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Reporting<span class="caret"></span></a>\n                    <!-- This section used to be called accounting, so view names might be called accounting rather than reporting -->\n                    <ul class="dropdown-menu sub-menu">\n                        <li data-permission="8">\n                            <a class="link-menu" href=\'#reporting/billing_overview\'>Billing Overview All</a>\n                        </li>\n                        <li data-permission="78">\n                            <a class="link-menu" href=\'#reporting/exceeded_hours\'>Exceeded Hours All</a>\n                        </li>\n                        <li data-permission="47">\n                            <a class="link-menu" href=\'#reporting/monthly_billing\'>Monthly Billing All</a>\n                        </li>\n                        <li data-permission="86">\n                            <a class="link-menu" href=\'#reporting/monthly_billing_managers\'>Monthly Billing Managers</a>\n                        </li>\n                        <!--<li data-permission="55">-->\n                        <!--<a class="link-menu" href=\'#reporting/compliance_report\'>Compliance Report All</a>-->\n                        <!--</li>-->\n                        <!--<li data-permission="87">-->\n                        <!--<a class="link-menu" href=\'#reporting/compliance_report_managers\'>Compliance Report Managers</a>-->\n                        <!--</li>-->\n                        <li data-permission="93">\n                            <a class="link-menu" href=\'#reporting/billing_pace/admin\'>Super Admin View Pace Graph</a>\n                        </li>\n                        <li data-permission="97">\n                            <a class="link-menu" href=\'#reporting/billing_pace/manager\'>Manager View Pace Graph</a>\n                        </li>\n                        <li data-permission="92">\n                            <a class="link-menu" href=\'#reporting/billing_pace\'>Single User View Pace Graph</a>\n                        </li>\n                        <li data-permission="94">\n                            <a class="link-menu" href=\'#reporting/pace_report/admin\'>Super Admin View Pace Table</a>\n                        </li>\n                        <li data-permission="95">\n                            <a class="link-menu" href=\'#reporting/pace_report/manager\'>Manager View Pace Table</a>\n                        </li>\n                        <li data-permission="96">\n                            <a class="link-menu" href=\'#reporting/pace_report\'>Single User View Pace Table</a>\n                        </li>\n                    </ul>\n                </li>\n                <li data-permission="43" class="dropdown">\n                    <a href="javascript:void(0);" class="dropdown-toggle link-menu" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Billing <span class="caret"></span></a>\n                    <ul class="dropdown-menu sub-menu">\n                        <li data-permission="44">\n                            <a class="link-menu" href=\'#billing/current_billing\'>Current Billing</a>\n                        </li>\n                        <li data-permission="44">\n                            <a class="link-menu" href=\'#billing/daily_billing\'>Daily Billing</a>\n                        </li>\n                        <li data-permission="45">\n                            <a class="link-menu" href=\'#billing/past_billing\'>Past Billing</a>\n                        </li>\n                        <li data-permission="44">\n                            <a class="link-menu" href=\'#billing/batch_history\'>Batch History</a>\n                        </li>\n                        <li data-permission="84">\n                            <a class="link-menu" href=\'#billing/reviewed_history\'>Reviewed Bills Edit History</a>\n                        </li>\n                    </ul>\n                </li>\n                <li data-permission="3">\n                    <a class="link-menu" href=\'#users\'>Users</a>\n                </li>\n                <li data-permission="79" class="dropdown">\n                    <a href="javascript:void(0);" class="link-menu" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Tools <span class="caret"></span></a>\n                    <ul class="dropdown-menu sub-menu">\n                        <li class="menu-item dropdown dropdown-submenu">\n                            <a href="javascript:void(0);" class="link-menu" data-toggle="dropdown">Contact Center</a>\n                            <ul class="dropdown-menu sub-menu">\n                                <li data-permission="80">\n                                    <a class="link-menu" href="#tools/contact_center/doctors">Doctors</a>\n                                </li>\n                            </ul>\n                        </li>\n                        <li data-permission="103">\n                            <a class="link-menu" href=\'#tools/client_editor\'>Client Editor</a>\n                        </li>\n                    </ul>\n                </li>\n\n                <li data-permission="5" class="dropdown">\n                    <a href="javascript:void(0);" class="link-menu" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Settings <span class="caret"></span></a>\n                    <ul class="dropdown-menu sub-menu">\n                        <li class="menu-item dropdown dropdown-submenu" data-permission="39">\n                            <a href="javascript:void(0);" class="link-menu" data-toggle="dropdown">Milestones </a>\n                            <ul class="dropdown-menu sub-menu">\n                                <li rv-each-module="colModules.models < colModules">\n                                    <a class="link-menu text-uppercase" rv-href="setUrl">{module:moduleName}</a>\n                                </li>\n                            </ul>\n                        </li>\n                        <li class="menu-item dropdown dropdown-submenu" data-permission="39">\n                            <a href="javascript:void(0);" class="link-menu" data-toggle="dropdown">Letter Templates</a>\n                            <ul class="dropdown-menu sub-menu">\n                                <li data-permission="42">\n                                    <a class="link-menu" href=\'#letters\'>Html</a>\n                                </li>\n                                <li data-permission="42">\n                                    <a class="link-menu" href=\'#word_letters\'>Word</a>\n                                </li>\n                            </ul>\n                        </li>\n                        <li data-permission="49">\n                            <a class="link-menu" href=\'#settings/snippets\'>Snippets</a>\n                        </li>\n                        <li data-permission="101">\n                            <a class="link-menu" href=\'#settings/hotwords\'>Hotwords</a>\n                        </li>\n                        <li data-permission="105">\n                            <a class="link-menu" href=\'#settings/event_types\'>Event Types</a>\n                        </li>\n\n                    </ul>\n                </li>\n            </ul>\n            <div class="form-group navbar-form navbar-right right-menu-option">\n                <div class="toggle-right-box-default cursor-pointer" id="alert-menu" title="My alerts">\n                    <i class="fa fa-exclamation-triangle m-6 p-left-1 font-size-22" aria-hidden="true"></i>\n                </div>\n            </div>\n\n            <!-- Calendar Icon -->\n            <div id="cal-icon-container" class="height-35 floating-icon-container alert-success p-fixed right-0 top-200 cursor-pointer box-shadow p-2" style="z-index:2000;">\n                <div class="badge  alert-success">\n                    <span class="bgc-green-success round-bordered-icon p-12 m-right-5"><i class="fa fa-calendar font-size-20 c-white" aria-hidden="true"></i></span>\n                    <span class="p-left-2 m-bottom-5 p-right-5 text-label"> <em class="font-size-16">Calendar</em></span>\n                </div>\n            </div>\n\n            <!-- Calendar Modal -->\n            <div class="alert p-absolute c-black ui-draggable bgc-white box-shadow display-none cursor-move max-width-500 left-20 top--75" id="calendar-modal-container">\n                <div class="row p-bottom-10">\n                    <div class="col-md-12">\n                        <span class="font-size-20 ">Calendar</span>\n                        <span class="t-align-right pull-right">\n                             <i class="p-left-15 fa fa-calendar-plus-o cursor-pointer font-size-18" aria-hidden="true" title="Create Calendar Reminder"></i>\n                             <i class="p-left-15 fa fa-expand cursor-pointer cal-size-100-perc font-size-18" title="Full Screen" aria-hidden="true"></i>\n                             <i class="p-left-15 fa fa-window-maximize cursor-pointer cal-size-max font-size-18" title="Max Size" aria-hidden="true"></i>\n                            <i class="p-left-15 fa fa-window-maximize cursor-pointer cal-size-medium font-size-15" title="Medium Size" aria-hidden="true"></i>\n                            <i class="p-left-15 fa fa-window-maximize cursor-pointer cal-size-small font-size-12" title="Small Size" aria-hidden="true"></i>\n                            <i id=\'cal-movable\' class=" p-left-15 fa fa-arrows cursor-pointer font-size-18 " title="Move/Lock" aria-hidden="true"></i>\n                            <i id="close-calendar" class="p-left-15 fa fa-window-close-o cursor-pointer font-size-18 " title="Close" aria-hidden="true"></i>\n                        </span>\n                    </div>\n                </div>\n                <div id=\'calendar\' class="cursor-auto"></div>\n            </div>\n\n\n            <!-- Right Alerts Menu -->\n            <div class="right-menu">\n                <!--right sidebar start-->\n                <div class="right-sidebar">\n                    <div class="search-row">\n                        <span class="c-white"></span>\n                        <div class="btn-group" role="group">\n                            <button type="button" class="btn btn-default font-size-11 c-white filter-button-left alert-filer" data-filter="all">All</button>\n                            <button type="button" class="btn btn-default font-size-11 c-white filter-button-center  alert-filer" data-filter="today">Today</button>\n                            <button type="button" class="btn btn-default font-size-11 c-white filter-button-center alert-filer" data-filter="week">This Week</button>\n                            <button type="button" class="btn btn-default font-size-11 c-white filter-button-right alert-filer" data-filter="month">This Month</button>\n                        </div>\n                        <!--<input type="text" placeholder="Search" class="form-control">-->\n                    </div>\n                    <div class="right-stat-bar">\n                        <ul class="right-side-accordion">\n                            <li class="widget-collapsible">\n                                <a href="javascript:;" class="head widget-head red-bg active">\n                                    <span class="pull-left"> Upcoming Alerts ({colAlerts.length})</span>\n                                    <span class="pull-right close-alerts-menu"><i class="fa fa-times" aria-hidden="true"></i></span>\n                                </a>\n                                <ul class="widget-container">\n                                    <li class="popAlert">\n                                        <label for="popAlert" class="cursor-pointer">Allow Pop Alerts</label>\n                                        <input type="checkbox" id="popAlert" class="cursor-pointer" rv-checked="getPopAlertCheck">\n                                    </li>\n                                    <li>\n                                        <div rv-each-alert="colAlerts.models" class="prog-container">\n                                            <div class="prog-row c-white cursor-pointer alert-detail"\n                                                 rv-data-filenumber="alert:fileNumber"\n                                                 rv-data-eventid="alert:eventID"\n                                                 rv-data-alert_id="alert:alert_id">\n                                                <div class="user-thumb rsn-activity">\n                                                    <i class="fa fa-clock-o" aria-hidden="true"></i>\n                                                </div>\n                                                <div class="rsn-details">\n                                                    <p class="c-white font-size-14">{alert:description}</p>\n                                                    <p class="c-white font-size-12">{alert:date} {alert:time}</p>\n                                                    <p class="c-white font-size-12" rv-if="checkSnooze < alert:snooze_date">\n                                                        Snooze: {alert:snooze_date} - {alert:time}\n                                                    </p>\n                                                </div>\n                                            </div>\n                                            <div class="prog-buttons">\n                                                <div class="btn-group width-50-p top-20">\n                                                    <button type="button" class="btn btn-small btn-danger width-100-p dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n                                                        Snooze <i class="fa fa-clock-o" aria-hidden="true"></i>\n                                                        <span class="caret pull-right p-relative top-7"></span>\n                                                    </button>\n                                                    <ul class="dropdown-menu">\n                                                        <li class="snooze-alert-option snooze-alert-menu cursor-pointer" data-time="5" rv-data-alert_id="alert:alert_id">5 Minutes</li>\n                                                        <li class="snooze-alert-option snooze-alert-menu cursor-pointer" data-time="10" rv-data-alert_id="alert:alert_id">10 Minutes</li>\n                                                        <li class="snooze-alert-option snooze-alert-menu cursor-pointer" data-time="15" rv-data-alert_id="alert:alert_id">15 Minutes</li>\n                                                        <li class="snooze-alert-option snooze-alert-menu cursor-pointer" data-time="30" rv-data-alert_id="alert:alert_id">30 Minutes</li>\n                                                        <li class="snooze-alert-option snooze-alert-menu cursor-pointer" data-time="45" rv-data-alert_id="alert:alert_id">45 Minutes</li>\n                                                        <li class="snooze-alert-option snooze-alert-menu cursor-pointer" data-time="60" rv-data-alert_id="alert:alert_id">60 Minutes</li>\n                                                    </ul>\n                                                </div>\n                                                <button type="button" class="btn btn-small btn-default dismiss-alert width-50-p alert-button-right p-relative top-20" rv-data-alert_id="alert:alert_id">Dismiss <i class="fa fa-thumbs-o-up" aria-hidden="true"></i></button>\n                                            </div>\n                                            <br>\n                                        </div>\n                                    </li>\n                                </ul>\n                            </li>\n\n                        </ul>\n                    </div>\n                </div>\n                <!--right sidebar end-->\n            </div>\n\n        </div><!--/.nav-collapse -->\n    </div>\n</nav>\n<div id=\'sub-menu\'></div>\n<div id=\'content\'></div>\n'},this.App.Templates.filesCalendarPanel=function(a){{var b="";_.escape}return b+='<div class="p-top-15">\n    <div class="form-horizontal">\n        <fieldset class="">\n            <div class="table-responsive m-bottom-5">\n                <table class="table">\n                    <caption  class="font-size-16 p-bottom-10">\n                        <i class="fa fa-exclamation-triangle p-right-10 text-danger" aria-hidden="true"></i>Calendar Reminders associated with this file ({colAlerts.length})\n                        <a class="pull-right p-right-75" href="javascript:void(0);" id="new-file-alert"><i class="glyphicon glyphicon-plus"></i> Add New</a>\n                    </caption>\n                    <thead class="alerts-expanded ">\n                    <tr class="success">\n                        <th class="">Description</th>\n                        <th class="">Date</th>\n                        <th>Time</th>\n                        <th class="">End Date</th>\n                        <th>End Time</th>\n                        <th class="">Alert Prior</th>\n                        <th class="">Users</th>\n                    </tr>\n                    </thead>\n                    <tbody class="alerts-expanded ">\n                    <tr rv-each-row=\'colAlerts.models\' class="cursor-pointer alert-row" rv-data-alert-id="row:alert_id">\n                        <td>\n                            <div>{row:description}</div>\n                        </td>\n                        <td>\n                            <div>{row:date}</div>\n                        </td>\n                        <td>\n                            <div>{row:time}</div>\n                        </td>\n                        <td>\n                            <div>{row:end_date}</div>\n                        </td>\n                        <td>\n                            <div>{row:end_time}</div>\n                        </td>\n                        <td>\n                            <div>{row:notificationQuantity} {row:notificationUnit}</div>\n                        </td>\n                        <td>\n                            <ul>\n                                <li rv-each-user="row:colUsers">\n                                    {user.typeaheadResult}\n                                </li>\n                            </ul>\n\n                        </td>\n                    </tr>\n                    <tr rv-unless=\'colAlerts.length\'>\n                        <td colspan="3" class="no-data">\n                            <strong>No alerts created for this event.</strong>\n                        </td>\n                    </tr>\n                    </tbody>\n                </table>\n            </div>\n        </fieldset>\n    </div>\n</div>\n'},this.App.Templates.filesDashboard=function(a){{var b="";_.escape}return b+='<div class="p-top-5 background-grey-light min-height-186 box-shadow" id="complete-dashboard">\n    <div class="container">\n        <div class="col-lg-12 p-left-0">\n            <ul class="nav p-left-15 p-right-15 nav-pills nav-dashboard">\n                <li role="presentation" class="dashboard-menu dashboard-titles">\n                    <a class="c-black display-dashboard p-i-left-0 p-right-i-0 m-right-5" href="javascript:void(0);">\n                        <i class="fa fa-angle-double-up" aria-hidden="true"></i>\n                        <i class="fa fa fa-angle-double-down display-none" aria-hidden="true"></i>\n                    </a>\n                </li>\n                <li role="presentation" class="dashboard-menu dashboard-titles active">\n                    <div class="btn-group opt-item">\n                        <a class="btn btn-link dashboard-info-all menu-item" href="javascript:;"><i class="fa fa-info fa-lg"></i> Info</a>\n                        <a href="javascript:void(0);" class="btn btn-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n                            <span class="caret"></span>\n                            <span class="sr-only">Toggle Dropdown</span>\n                        </a>\n                        <ul class="dropdown-menu">\n                            <li><a class="dashboard-info menu-dashboard" href="javascript:void(0);">Dashboard</a></li>\n                        </ul>\n                    </div>\n                </li>\n                <li role="presentation" class="dashboard-menu dashboard-titles" rv-if="model:fileNumber < :fileNumber">\n                    <div class="btn-group opt-item">\n                        <a class="btn btn-link dashboard-timeline-all menu-item" href="javascript:;"><i class="fa fa-ellipsis-v fa-lg"></i> Timeline</a>\n                        <a href="javascript:void(0);" class="btn btn-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n                            <span class="caret"></span>\n                            <span class="sr-only">Toggle Dropdown</span>\n                        </a>\n                        <ul class="dropdown-menu">\n                            <li><a class="dashboard-timeline menu-dashboard" href="javascript:void(0);">Dashboard</a></li>\n                        </ul>\n                    </div>\n                </li>\n                <li role="presentation" class="dashboard-menu dashboard-titles" rv-if="model:fileNumber < :fileNumber">\n                    <div class="btn-group opt-item">\n                        <a class="btn btn-link menu-item dashboard-medical-all" href="javascript:void(0);"><i class="fa fa-heartbeat fa-lg"></i> Medical</a>\n                        <a href="javascript:void(0);" class="btn btn-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n                            <span class="caret"></span>\n                            <span class="sr-only">Toggle Dropdown</span>\n                        </a>\n                        <ul class="dropdown-menu">\n                            <li><a class="dashboard-medical menu-dashboard" href="javascript:void(0);">Dashboard</a></li>\n                        </ul>\n                    </div>\n                </li>\n                <li role="presentation" class="dashboard-menu dashboard-titles" rv-if="model:fileNumber < :fileNumber">\n                    <div class="btn-group opt-item">\n                        <a class="btn btn-link menu-item dashboard-hearing-all" href="javascript:;"><i class="fa fa-gavel fa-lg"></i> Hearing</a>\n                        <a href="javascript:void(0);" class="btn btn-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n                            <span class="caret"></span>\n                            <span class="sr-only">Toggle Dropdown</span>\n                        </a>\n                        <ul class="dropdown-menu">\n                            <li><a class="dashboard-hearing menu-dashboard" href="javascript:void(0);">Dashboard</a></li>\n                        </ul>\n                    </div>\n                </li>\n                <li role="presentation" class="dashboard-menu dashboard-titles" rv-if="model:fileNumber < :fileNumber">\n                    <div class="btn-group opt-item">\n                        <a class="btn btn-link menu-item dashboard-deposition-all" href="javascript:;"><i class="fa fa-book fa-lg"></i> Deposition</a>\n                        <a href="javascript:void(0);" class="btn btn-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n                            <span class="caret"></span>\n                            <span class="sr-only">Toggle Dropdown</span>\n                        </a>\n                        <ul class="dropdown-menu">\n                            <li><a class="dashboard-deposition menu-dashboard" href="javascript:void(0);">Dashboard</a></li>\n                        </ul>\n                    </div>\n                </li>\n                <li role="presentation" class="dashboard-menu dashboard-titles" rv-if="model:fileNumber < :fileNumber">\n                    <div class="btn-group opt-item">\n                        <a class="btn btn-link menu-item dashboard-subpoena-all" href="javascript:;"><i class="fa fa-file-text fa-lg"></i> Subpoena</a>\n                        <a href="javascript:void(0);" class="btn btn-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n                            <span class="caret"></span>\n                            <span class="sr-only">Toggle Dropdown</span>\n                        </a>\n                        <ul class="dropdown-menu">\n                            <li><a class="dashboard-subpoena menu-dashboard" href="javascript:void(0);">Dashboard</a></li>\n                        </ul>\n                    </div>\n                </li>\n                <li role="presentation" class="dashboard-menu dashboard-titles" rv-if="model:fileNumber < :fileNumber">\n                    <div class="btn-group opt-item">\n                        <a class="btn btn-link menu-item dashboard-liens-all" href="javascript:;"><i class="fa fa-gift fa-lg"></i> Liens</a>\n                        <a href="javascript:void(0);" class="btn btn-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n                            <span class="caret"></span>\n                            <span class="sr-only">Toggle Dropdown</span>\n                        </a>\n                        <ul class="dropdown-menu">\n                            <li><a class="dashboard-liens menu-dashboard" href="javascript:void(0);">Dashboard</a></li>\n                            <li><a class="liensIndexAll" rv-href="getUrlLienIndexAll">Alternate View</a></li>\n                        </ul>\n                    </div>\n                </li>\n                <li role="presentation" class="dashboard-menu dashboard-titles" rv-if="model:fileNumber < :fileNumber">\n                    <div class="btn-group opt-item">\n                        <a class="btn btn-link menu-item dashboard-all-billing-all" href="javascript:;"><i class="fa fa-usd fa-lg"></i> All Billing</a>\n                        <a href="javascript:void(0);" class="btn btn-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n                            <span class="caret"></span>\n                            <span class="sr-only">Toggle Dropdown</span>\n                        </a>\n                        <ul class="dropdown-menu">\n                            <li><a class="dashboard-all-billing menu-dashboard" href="javascript:void(0);">Dashboard</a></li>\n                        </ul>\n                    </div>\n                </li>\n                <li rv-if="model:fileNumber < model:fileNumber" class="dropdown p-top-1">\n                    <a tabindex="0" class="c-black cursor-pointer" data-toggle="dropdown" data-submenu="" aria-expanded="false">\n                        <i class="fa fa-th-large" aria-hidden="true"></i> Other <span class="m-left-15 caret c-blue-link"></span>\n                    </a>\n                    <ul class="dropdown-menu dropdown-menu-right">\n                        <li class="dropdown-submenu">\n                            <a tabindex="0" class="cursor-pointer">\n                                Email Request\n                            </a>\n                            <ul class="dropdown-menu">\n                                <li rv-each-row="uFirmEmailsCollection.models < uFirmEmailsCollection.models model:applicantLastName model:applicantFirstName model:claimNumber">\n                                    <a rv-href="getMailto < row:label">{row:label < :label}</a>\n                                </li>\n                            </ul>\n                        </li>\n                        <li class="divider"></li>\n                        <li>\n                            <a href="javascript:void(0);" class="btn-document-browser">Document Browser</a>\n                        </li>\n                    </ul>\n                </li>\n            </ul>\n        </div>\n    </div>\n    <hr class="m-top-5 m-bottom-0"/>\n    <div class="clearfix"></div>\n    <div class="dashboard-container">\n        <div class="container dashboard-contents info" id=\'dashboard-info\'>\n            <div class="col-md-4 border-right-white m-top-10 m-bottom-10  p-15 min-height-90 panel-info-dashboard separator file-info">\n                <h2 class=\'font-size-30\'>File Info\n                    <span dashboard data-permission="77">\n                        <i rv-if="isFileOpened < model:wcIsFileClosed model:wcOpenDate model:lienIsFileClosed model:lienOpenDate" class="fa fa-folder-open-o" aria-hidden="true"></i>\n                        <i rv-unless="isFileOpened < model:wcIsFileClosed model:wcOpenDate model:lienIsFileClosed model:lienOpenDate" class="fa fa-folder-o" aria-hidden="true"></i>\n                    </span>\n                </h2>\n                <span rv-title=\'model:fileTitle\' class="truncate-text max-width-300 display-block">{model:fileTitle}</span>\n                <span rv-show="model:currentWCFileStatus < model:currentWCFileStatus">{printWCCurrentStatus < model:currentWCFileStatus} WC Date: <a id="previousWCFileOpens" data-toggle="popover" role="button" data-container="body" data-column="previousWCFileOpens" class="popover-previousWCFileOpens">{model:openDate < :previousWCFileOpens}</a></span>\n                <br/>\n                <span rv-show="model:currentLienFileStatus < model:currentLienFileStatus">{printLienCurrentStatus < model:currentLienFileStatus} Lien Date: <a id="previousLienFileOpens" data-toggle="popover" role="button" data-container="body" data-column="previousLienFileOpens" class="popover-previousLienFileOpens">{model:openLienDate < :previousLienFileOpens}</a></span>\n            </div>\n            <div class="col-md-4 border-right-white font-size-15 m-top-10 m-bottom-10 separator info-details">\n                <table>\n                    <tr class="m-bottom-10">\n                        <td class="font-bold">WCAB <span rv-html="model.getVenueLeadCase < :cases"></span>#:</td>\n                        <td>\n                            <a id="summary-ADJid" class="m-left-5 c-blue-link popover-summary-cases"\n                               data-attributes="ADJid,venueAbbrev"\n                               data-toggle="popover"\n                               data-title="Court Case"\n                               data-column="cases" role="button"\n                               data-placement="bottom" rv-html=\'model.getDbiCaseList < :cases\'></a>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td class="font-bold">Claim #:</td>\n                        <td>\n                            <span class="m-left-5 c-blue-link">{model:claimNumber}</span>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td class="font-bold">DOI:</td>\n                        <td>\n                            <a id="summary-DOI" class="m-left-5 c-blue-link popover-summary-cases"\n                               data-attributes="DOI,DOIendCT"\n                               data-toggle="popover" data-title="Court ADJ\'s"\n                               data-column="cases"\n                               data-placement="bottom" role="button">{model.getDbiDOIList < :cases}</a>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td class="font-bold">File #:</td>\n                        <td>\n                            <span class="m-left-5 c-blue-link">{model:fileNumber}</span>\n                        </td>\n                    </tr>\n                </table>\n            </div>\n            <div class="col-md-4 font-size-15 m-top-10 m-bottom-10 info-contact">\n                <div>\n                    <span class="font-bold">Client:</span>\n                    <span class=" c-blue-link" id="dashboard-clientName"></span>\n                </div>\n                <div>\n                    <span class="font-bold">Adjuster:</span>\n                    <a rv-href="clientRepInfo.email < clientRepInfo.email" id="client-rep-email-link"\n                       class=\'mailtoWithSubject\'\n                       data-toggle="popover"\n                       data-placement="right"\n                       data-container="body"\n                       data-column="inline"\n                       title="Phone Number"\n                       data-user="clientRepInfo">\n                        <span class=" c-blue-link">{clientRepInfo.fullName}</span>\n                    </a>\n                </div>\n                <div>\n                    <span class="font-bold">Applicant Attorney:</span>\n                    <a rv-href="AAInfo.lawyerEmail < AAInfo.lawyerEmail" id="aa-lawyerEmail-link"\n                       class=\'mailtoWithSubject\'\n                       data-toggle="popover"\n                       data-placement="right"\n                       data-container="body"\n                       data-column="inline"\n                       data-user="AAInfo"\n                       title="Phone Number">\n                        <span class=" c-blue-link">{AAInfo.fullName}</span>\n                    </a>\n                </div>\n                <div>\n                    <span class="font-bold">Defense Attorney:</span>\n                    <a id="da-email-link"\n                       rv-href="DAInfo.email < DAInfo.email"\n                       data-user="DAInfo"\n                       class=\'mailtoWithSubject\'\n                       data-column="inline"\n                       data-toggle="popover"\n                       data-placement="right"\n                       data-container="body"\n                       title="Phone Number">\n                        <span class=" c-blue-link" id=\'dashboard-da\'>{DAInfo.fullName}</span>\n                    </a>\n                </div>\n            </div>\n        </div>\n        <div class="container display-none dashboard-contents medical" id=\'dashboard-medical\'>\n            <div class="col-md-4 border-right-white m-top-10 m-bottom-10 p-15 min-height-90 panel-info-dashboard separator info-medical">\n                <h2 class=\'font-size-30\'>Medical Info\n                    <span dashboard data-permission="77">\n                        <i rv-if="isFileOpened < model:wcIsFileClosed model:wcOpenDate model:lienIsFileClosed model:lienOpenDate" class="fa fa-folder-open-o" aria-hidden="true"></i>\n                        <i rv-unless="isFileOpened < model:wcIsFileClosed model:wcOpenDate model:lienIsFileClosed model:lienOpenDate" class="fa fa-folder-o" aria-hidden="true"></i>\n                    </span>\n                </h2>\n                <span rv-title=\'model:fileTitle\' class="truncate-text max-width-300 display-block">{model:fileTitle}</span>\n                <span rv-show="model:currentWCFileStatus < model:currentWCFileStatus">{printWCCurrentStatus < model:currentWCFileStatus} WC Date: <a id="previousWCFileOpensMed" data-toggle="popover" role="button" data-container="body" data-column="previousWCFileOpens" class="popover-previousWCFileOpens">{model:openDate < :previousWCFileOpens}</a></span>\n                <br/>\n                <span rv-show="model:currentLienFileStatus < model:currentLienFileStatus">{printLienCurrentStatus < model:currentLienFileStatus} Lien Date: <a id="previousLienFileOpensMed" data-toggle="popover" role="button" data-container="body" data-column="previousLienFileOpens" class="popover-previousLienFileOpens">{model:openLienDate < :previousLienFileOpens}</a></span>\n            </div>\n            <div class="col-md-4 border-right-white m-top-10 p-left-10 separator">\n                <table class="table m-bottom-0">\n                    <thead>\n                    <tr>\n                        <th class="width-133 font-bold">ADJ#</th>\n                        <th class="width-90">\n                            <span class="truncate-text width-75 display-block font-bold">DOI</span>\n                        </th>\n                        <th class="width-170 font-bold">Body</th>\n                    </tr>\n                    </thead>\n                </table>\n                <div class="overflow-y-scroll height-60">\n                    <table class="table">\n                        <tbody>\n                        <tr rv-each-model="casesCollection.models">\n                            <td class="width-130">\n                                <a class="btn-editCase truncate-text width-100 display-block" href="javascript:void(0);" rv-data-id="model:caseID" rv-title="model:ADJid">\n                                    {model:ADJid}\n                                </a>\n                            </td>\n                            <td class="width-90">\n                                <span class="truncate-text width-75 display-block">{model:DOI}</span>\n                            </td>\n                            <td class="width-170">\n                                <ul class=\'list-unstyled\'>\n                                    <li class="body-part-labels m-top-2 truncate-text width-130" rv-each-body=\'model:bodyParts < :bodyParts\'>\n                                        <span rv-class="body.bpAdmitted">{body.bodyPart}</span>\n                                    </li>\n                                </ul>\n                            </td>\n                        </tr>\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n            <div class="col-md-4 m-top-10 p-left-10">\n                <table class="table m-bottom-0">\n                    <thead>\n                    <tr>\n                        <th class="width-170 font-bold">Medical Stats</th>\n                    </tr>\n                    </thead>\n                </table>\n                <div class="overflow-y-scroll height-60">\n                    <div class="table" id="otherInfo"></div>\n                </div>\n            </div>\n            <div class="clearfix"></div>\n        </div>\n        <div class="container display-none dashboard-contents min-width-100 dash-hearing" id=\'dashboard-hearing\'>\n            <div class="col-md-4 border-right-white m-top-10 m-bottom-10 p-15 min-height-90 panel-info-dashboard separator info-hearing">\n                <h2 class=\'font-size-30\'>Hearing Info\n                    <span dashboard data-permission="77">\n                        <i rv-if="isFileOpened < model:wcIsFileClosed model:wcOpenDate model:lienIsFileClosed model:lienOpenDate" class="fa fa-folder-open-o" aria-hidden="true"></i>\n                        <i rv-unless="isFileOpened < model:wcIsFileClosed model:wcOpenDate model:lienIsFileClosed model:lienOpenDate" class="fa fa-folder-o" aria-hidden="true"></i>\n                    </span>\n                </h2>\n                <span rv-title=\'model:fileTitle\' class="truncate-text max-width-300 display-block">{model:fileTitle}</span>\n                <span rv-show="model:currentWCFileStatus < model:currentWCFileStatus">{printWCCurrentStatus < model:currentWCFileStatus} WC Date: <a id="previousWCFileOpensHer" data-toggle="popover" role="button" data-container="body" data-column="previousWCFileOpens" class="popover-previousWCFileOpens">{model:openDate < :previousWCFileOpens}</a></span>\n                <br/>\n                <span rv-show="model:currentLienFileStatus < model:currentLienFileStatus">{printLienCurrentStatus < model:currentLienFileStatus} Lien Date: <a id="previousLienFileOpensHer" data-toggle="popover" role="button" data-container="body" data-column="previousLienFileOpens" class="popover-previousLienFileOpens">{model:openLienDate < :previousLienFileOpens}</a></span>\n            </div>\n            <div class="col-md-8 p-left-10">\n                <table class="table table-hover m-bottom-0">\n                    <thead>\n                    <tr>\n                        <td class=\'font-bold width-90\'>H. Date</td>\n                        <td class=\'font-bold width-90\'>By</td>\n                        <td class=\'font-bold width-100\'>Type</td>\n                        <td class=\'font-bold width-100\'>Judge</td>\n                        <td class=\'font-bold width-100\'>Venue</td>\n                        <td class=\'font-bold width-100\'>Status</td>\n                        <td class=\'font-bold width-100\'>Report</td>\n                    </tr>\n                    </thead>\n                </table>\n                <div class="overflow-y-scroll height-60">\n                    <table class="table table-hover m-bottom-0">\n                        <tbody>\n                        <tr rv-each-row="hearingsCollection.models">\n                            <td class="width-90">{row:hearingDate}</td>\n                            <td class="width-90">{row:setBy}</td>\n                            <td class="width-100">{row:type}</td>\n                            <td class="width-100">\n                                <span class="truncate-text display-inline-block width-80" rv-title="row:WCABjudge">{row:WCABjudge}</span>\n                            </td>\n                            <td class="width-100">\n                                <span class="truncate-text display-inline-block width-80" rv-title="row:venueName">{row:venueName}</span>\n                            </td>\n                            <td class="width-100">{row:hearingStatus}</td>\n                            <td class="width-100">\n                                    <span rv-if="row:documents">\n                                        <i rv-eventID="row:eventID" data-collection-type="hearing" class="fa fa-paperclip fa-lg docHover cursor-pointer"></i>\n                                    </span>\n                            </td>\n                        </tr>\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n        </div>\n        <div class="container display-none dashboard-contents deposition" id=\'dashboard-deposition\'>\n            <div class="col-md-4 border-right-white m-top-10 m-bottom-10 p-15 min-height-90 panel-info-dashboard separator info-depo">\n                <h2 class=\'font-size-30\'>Depo Info\n                    <span dashboard data-permission="77">\n                        <i rv-if="isFileOpened < model:wcIsFileClosed model:wcOpenDate model:lienIsFileClosed model:lienOpenDate" class="fa fa-folder-open-o" aria-hidden="true"></i>\n                        <i rv-unless="isFileOpened < model:wcIsFileClosed model:wcOpenDate model:lienIsFileClosed model:lienOpenDate" class="fa fa-folder-o" aria-hidden="true"></i>\n                    </span>\n                </h2>\n                <span rv-title=\'model:fileTitle\' class="truncate-text max-width-300 display-block">{model:fileTitle}</span>\n                <span rv-show="model:currentWCFileStatus < model:currentWCFileStatus">{printWCCurrentStatus < model:currentWCFileStatus} WC Date: <a id="previousWCFileOpensDep" data-toggle="popover" role="button" data-container="body" data-column="previousWCFileOpens" class="popover-previousWCFileOpens">{model:openDate < :previousWCFileOpens}</a></span>\n                <br/>\n                <span rv-show="model:currentLienFileStatus < model:currentLienFileStatus">{printLienCurrentStatus < model:currentLienFileStatus} Lien Date: <a id="previousLienFileOpensDep" data-toggle="popover" role="button" data-container="body" data-column="previousLienFileOpens" class="popover-previousLienFileOpens">{model:openLienDate < :previousLienFileOpens}</a></span>\n            </div>\n            <div class="col-md-8 p-left-10">\n                <table class="table table-hover m-bottom-0">\n                    <thead>\n                    <tr>\n                        <td class=\'font-bold width-90\'>Date</td>\n                        <td class=\'font-bold width-100\'>Of</td>\n                        <td class=\'font-bold width-100\'>By</td>\n                        <td class=\'font-bold width-100\'>Status</td>\n                        <td class=\'font-bold width-100\'>Report</td>\n                    </tr>\n                    </thead>\n                </table>\n                <div class="overflow-y-scroll height-60">\n                    <table class="table table-hover m-bottom-0">\n                        <tbody>\n                        <tr rv-each-row="deposCollection.models">\n                            <td class="width-90">{row:depoDate}</td>\n                            <td class="width-100">{row:depoOf}</td>\n                            <td class="width-100">{row:depoBy}</td>\n                            <td class="width-100">{row:depoStatus}</td>\n                            <td class="width-100">\n                                    <span rv-if="row:documents">\n                                        <i rv-eventID="row:eventID" data-collection-type="depos" class="fa fa-paperclip fa-lg docHover cursor-pointer"></i>\n                                    </span>\n                            </td>\n                        </tr>\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n        </div>\n        <div class="container display-none dashboard-contents dash-supina" id=\'dashboard-subpoena\'>\n            <div class="col-md-4 border-right-white m-top-10 m-bottom-10 p-15 min-height-90 panel-info-dashboard separator info-supina">\n                <h2 class=\'font-size-30\'>Subpoena Info\n                    <span dashboard data-permission="77">\n                        <i rv-if="isFileOpened < model:wcIsFileClosed model:wcOpenDate model:lienIsFileClosed model:lienOpenDate" class="fa fa-folder-open-o" aria-hidden="true"></i>\n                        <i rv-unless="isFileOpened < model:wcIsFileClosed model:wcOpenDate model:lienIsFileClosed model:lienOpenDate" class="fa fa-folder-o" aria-hidden="true"></i>\n                    </span>\n                </h2>\n                <span rv-title=\'model:fileTitle\' class="truncate-text max-width-300 display-block">{model:fileTitle}</span>\n                <span rv-show="model:currentWCFileStatus < model:currentWCFileStatus">{printWCCurrentStatus < model:currentWCFileStatus} WC Date: <a id="previousWCFileOpensSup" data-toggle="popover" role="button" data-container="body" data-column="previousWCFileOpens" class="popover-previousWCFileOpens">{model:openDate < :previousWCFileOpens}</a></span>\n                <br/>\n                <span rv-show="model:currentLienFileStatus < model:currentLienFileStatus">{printLienCurrentStatus < model:currentLienFileStatus} Lien Date: <a id="previousLienFileOpensSup" data-toggle="popover" role="button" data-container="body" data-column="previousLienFileOpens" class="popover-previousLienFileOpens">{model:openLienDate < :previousLienFileOpens}</a></span>\n            </div>\n            <div class="supina-data">\n                <div class="col-md-2 p-left-10  p-top-20">\n                    <h2 class=\'font-size-20 t-align-center\'>Ordered</h2>\n                    <div class="font-size-20 p-top-15 dashboard-stats-font font-bold t-align-center">{subpoenaOrdered}</div>\n                </div>\n                <div class="col-md-2 p-left-5  p-top-20 t-align-center">\n                    <h2 class=\'font-size-20 t-align-center\'>Received</h2>\n                    <div class="font-size-20 p-top-15 dashboard-stats-font font-bold t-align-center">{subpoenaReceived}</div>\n                </div>\n                <div class="col-md-2 p-left-5  p-top-20 t-align-center">\n                    <h2 class=\'font-size-20 t-align-center\'>No Records</h2>\n                    <div class="font-size-20 p-top-15 dashboard-stats-font font-bold t-align-center">{subpoenaNoRecords}</div>\n                </div>\n                <div class="col-md-2 p-left-5 p-top-20 t-align-center">\n                    <h2 class=\'font-size-20 t-align-center\'>Pending</h2>\n                    <div class="font-size-20 p-top-15 dashboard-stats-font font-bold t-align-center">{subpoenaPending}</div>\n                </div>\n            </div>\n        </div>\n        <div class="container display-none dashboard-contents dash-lien" id=\'dashboard-liens\'>\n            <div class="col-md-4 border-right-white m-top-10 m-bottom-10 p-15 min-height-90 panel-info-dashboard separator info-lien">\n                <h2 class=\'font-size-30\'>Liens Info\n                    <span dashboard data-permission="77">\n                        <i rv-if="isFileOpened < model:wcIsFileClosed model:wcOpenDate model:lienIsFileClosed model:lienOpenDate" class="fa fa-folder-open-o" aria-hidden="true"></i>\n                        <i rv-unless="isFileOpened < model:wcIsFileClosed model:wcOpenDate model:lienIsFileClosed model:lienOpenDate" class="fa fa-folder-o" aria-hidden="true"></i>\n                    </span>\n                </h2>\n                <span rv-title=\'model:fileTitle\' class="truncate-text max-width-300 display-block">{model:fileTitle}</span>\n                <span rv-show="model:currentWCFileStatus < model:currentWCFileStatus">{printWCCurrentStatus < model:currentWCFileStatus} WC Date: <a id="previousWCFileOpensLie" data-toggle="popover" role="button" data-container="body" data-column="previousWCFileOpens" class="popover-previousWCFileOpens">{model:openDate < :previousWCFileOpens}</a></span>\n                <br/>\n                <span rv-show="model:currentLienFileStatus < model:currentLienFileStatus">{printLienCurrentStatus < model:currentLienFileStatus} Lien Date: <a id="previousLienFileOpensLie" data-toggle="popover" role="button" data-container="body" data-column="previousLienFileOpens" class="popover-previousLienFileOpens">{model:openLienDate < :previousLienFileOpens}</a></span>\n            </div>\n            <div class="col-md-8 p-left-10 height-100">\n                <table class="table table-hover m-bottom-0">\n                    <thead>\n                    <tr>\n                        <td class=\'font-bold\'>Exposure</td>\n                        <!-- <td class=\'font-bold\'>Settled A.</td> -->\n\n                        <td class=\'font-bold\'>Current</td>\n                        <td class=\'font-bold\'>Savings</td>\n                        <td class=\'font-bold\'>Total</td>\n                        <td class=\'font-bold\'>Of Record</td>\n                        <td class=\'font-bold\'>Other</td>\n                        <td class=\'font-bold\'>Dismissed</td>\n                        <td class=\'font-bold\'>Settled</td>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    <tr class="tr-lien">\n                        <td class="p-i-left-11">{lienExposure}</td>\n                        <!-- <td class="p-i-left-11">{lienSettledAmount}</td> -->\n                        <td class="p-i-left-11">{lienCurrentAmount}</td>\n                        <td class="p-i-left-11">{lienSavingAmount}</td>\n\n                        <td class="p-i-left-11">{lienTotal}</td>\n                        <td class="p-i-left-11">{lienOfRecord}</td>\n                        <td class="p-i-left-11">{lienOther}</td>\n                        <td class="p-i-left-11">{lienDismissed}</td>\n                        <td class="p-i-left-11">{lienSettled}</td>\n                    </tr>\n                    </tbody>\n                </table>\n\n            </div>\n        </div>\n    </div>\n    <div class="height-40 visible-xs-block visible-sm-block"></div>\n</div>\n\n<div class="clearfix"></div>\n<div id=\'files-tab-container\'></div>\n';

},this.App.Templates.filesDashboardSubro=function(a){{var b="";_.escape}return b+='<div class="p-top-5 background-grey-light min-height-186 box-shadow" id="complete-dashboard">\n    <div class="container">\n        <div class="col-lg-12 p-left-0">\n            <ul class="nav p-left-15 p-right-15 nav-pills nav-dashboard">\n                <li role="presentation" class="dashboard-menu dashboard-titles">\n                    <a class="c-black display-dashboard p-i-left-0 p-right-i-0 m-right-5" href="javascript:void(0);">\n                        <i class="fa fa-angle-double-up" aria-hidden="true"></i>\n                        <i class="fa fa fa-angle-double-down display-none" aria-hidden="true"></i>\n                    </a>\n                </li>\n                <li role="presentation" class="dashboard-menu dashboard-titles active">\n                    <div class="btn-group opt-item">\n                        <a class="btn btn-link dashboard-info-all menu-item" href="javascript:;"><i class="fa fa-info fa-lg"></i> Info</a>\n                        <a href="javascript:void(0);" class="btn btn-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n                            <span class="caret"></span>\n                            <span class="sr-only">Toggle Dropdown</span>\n                        </a>\n                        <ul class="dropdown-menu">\n                            <li><a class="dashboard-info menu-dashboard" href="javascript:void(0);">Dashboard</a></li>\n                        </ul>\n                    </div>\n                </li>\n                <li role="presentation" class="dashboard-menu dashboard-titles" rv-if="model:subroFileNumber < :subroFileNumber">\n                    <div class="btn-group opt-item">\n                        <a class="btn btn-link dashboard-timeline-all menu-item" href="javascript:void(0);"><i class="fa fa-ellipsis-v fa-lg"></i> Timeline</a>\n                        <a href="javascript:void(0);" class="btn btn-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n                            <span class="caret"></span>\n                            <span class="sr-only">Toggle Dropdown</span>\n                        </a>\n                        <ul class="dropdown-menu">\n                            <li><a class="dashboard-timeline menu-dashboard" href="javascript:void(0);">Dashboard</a></li>\n                        </ul>\n                    </div>\n                </li>\n                <li role="presentation" class="dashboard-menu dashboard-titles" rv-if="model:subroFileNumber < :subroFileNumber">\n                    <div class="btn-group opt-item">\n                        <a class="btn btn-link menu-item dashboard-all-billing-all" href="javascript:;"><i class="fa fa-usd fa-lg"></i> All Billing</a>\n                        <a href="javascript:void(0);" class="btn btn-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n                            <span class="caret"></span>\n                            <span class="sr-only">Toggle Dropdown</span>\n                        </a>\n                        <ul class="dropdown-menu">\n                            <li><a class="dashboard-all-billing menu-dashboard" href="javascript:void(0);">Dashboard</a></li>\n                        </ul>\n                    </div>\n                </li>\n            </ul>\n        </div>\n    </div>\n    <hr class="m-top-5 m-bottom-0"/>\n    <div class="clearfix"></div>\n    <div class="dashboard-container">\n        <div class="container dashboard-contents info" id=\'dashboard-info\'>\n            <div class="col-md-4 border-right-white m-top-10 m-bottom-10  p-15 min-height-90 panel-info-dashboard separator file-info">\n                <h2 class=\'font-size-30\'>File Info\n                    <span dashboard data-permission="77">\n                        <i rv-if="isFileOpened < model:subroIsFileClosed model:subroOpenDate model:lienIsFileClosed model:lienOpenDate model:interventionIsFileClosed model:interventionOpenDate" class="fa fa-folder-open-o" aria-hidden="true"></i>\n                        <i rv-unless="isFileOpened < model:subroIsFileClosed model:subroOpenDate model:lienIsFileClosed model:lienOpenDate model:interventionIsFileClosed model:interventionOpenDate" class="fa fa-folder-o" aria-hidden="true"></i>\n                    </span>\n                </h2>\n                <span rv-title=\'model:subroInternalFileName\' class="truncate-text max-width-300 display-block">{model:subroInternalFileName}</span>\n                <span rv-show="model:currentSubroFileStatus < model:currentSubroFileStatus">{printSubroCurrentStatus < model:currentSubroFileStatus} Subro Date: <a id="previousSubroFileOpens" data-toggle="popover" role="button" data-container="body" data-column="previousSubroFileOpens" class="popover-previousSubroFileOpens">{model:subroOpenDate < :previousSubroFileOpens}</a></span>\n                <br/>\n                <span rv-show="model:currentLienFileStatus < model:currentLienFileStatus">{printLienCurrentStatus < model:currentLienFileStatus} Lien Date: <a id="previousLienFileOpens" data-toggle="popover" role="button" data-container="body" data-column="previousLienFileOpens" class="popover-previousLienFileOpens">{model:openLienDate < :previousLienFileOpens}</a></span>\n                <br/>\n                <span rv-show="model:currentInterventionFileStatus < model:currentLienFileStatus">{printInterventionCurrentStatus < model:currentInterventionFileStatus} Intervention Date: <a id="previousInterventionFileOpens" data-toggle="popover" role="button" data-container="body" data-column="previousInterventionFileOpens" class="popover-previousInterventionFileOpens">{model:interventionOpenDate < :previousInterventionFileOpens}</a></span>\n            </div>\n            <div class="col-md-4 border-right-white font-size-15 m-top-10 m-bottom-10 separator info-details">\n                <table>\n                    <tr>\n                        <td class="font-bold">Claim #:</td>\n                        <td>\n                            <span class="m-left-5 c-blue-link">{model:subroBillingClaimNum}</span>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td class="font-bold">File #:</td>\n                        <td>\n                            <span class="m-left-5 c-blue-link">{model:subroFileNumber}</span>\n                        </td>\n                    </tr>\n                </table>\n            </div>\n            <div class="col-md-4 font-size-15 m-top-10 m-bottom-10 info-contact">\n                <div>\n                    <span class="font-bold">Client:</span>\n                    <span class=" c-blue-link" id="dashboard-clientName"></span>\n                </div>\n                <div>\n                    <span class="font-bold">Client Rep:</span>\n                    <a rv-href="clientRepInfo.email < clientRepInfo.email" id="client-rep-email-link"\n                       class=\'mailtoWithSubject\'\n                       data-toggle="popover"\n                       data-placement="right"\n                       data-container="body"\n                       data-column="inline"\n                       title="Phone Number"\n                       data-user="clientRepInfo">\n                        <span class=" c-blue-link">{clientRepInfo.fullName}</span>\n                    </a>\n                </div>\n                <div>\n                    <span class="font-bold">Subro Attorney:</span>\n                    <a id="sa-email-link"\n                       rv-href="SAInfo.email < SAInfo.email"\n                       data-user="SAInfo"\n                       class=\'mailtoWithSubject\'\n                       data-column="inline"\n                       data-toggle="popover"\n                       data-placement="right"\n                       data-container="body"\n                       title="Phone Number">\n                        <span class=" c-blue-link" id=\'dashboard-sa\'>{SAInfo.fullName < SAInfo.fullName}</span>\n                    </a>\n                </div>\n                <div>\n                    <span class="font-bold">Wkr Attorney:</span>\n                    <a rv-href="workerComp.lawyerEmail < workerComp.lawyerEmail" id="wkr-lawyerEmail-link"\n                       class=\'mailtoWithSubject\'\n                       data-toggle="popover"\n                       data-placement="right"\n                       data-container="body"\n                       data-column="inline"\n                       data-user="workerComp"\n                       title="Phone Number">\n                        <span class=" c-blue-link">{workerComp.fullName}</span>\n                    </a>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="height-40 visible-xs-block visible-sm-block"></div>\n</div>\n\n<div class="clearfix"></div>\n<div id=\'files-tab-container\'></div>\n'},this.App.Templates.filesDocumentsAssignDocuments=function(a){{var b="";_.escape}return b+='<div class="filter-designations" style="display:none;">\n\n    <div class="pull-left">\n        <h4 class="font-bold font-size-20"><i class="fa fa-list" aria-hidden="true"></i> All Designations</h4>\n    </div>\n\n    <div class="pull-right">\n        <button type="button" class="btn btn-primary btn-apply-filter-designations">Apply Filter</button>\n        <button type="button" class="btn btn-default btn-close-all-designations">Cancel</button>\n    </div>\n\n    <div class="clearfix"></div>\n\n    <div class="container-designations"></div>\n</div>\n\n<div class="wrapper-assign-documents">\n    <form method="POST">\n        <div class="col-sm-2">\n            <div class="form-group">\n                <label class="control-label c-gray">Categories:</label><br>\n                <div class="col-sm-12 p-left-0">\n                    <select class="form-control" name="category_designation" rv-value="options.categoryDesignation < options.categoryDesignation"></select>\n                </div>\n            </div>\n        </div>\n        <div class="col-sm-8">\n            <div class="form-group">\n                <label class="control-label c-gray">Designations:</label><br>\n                <div class="col-sm-12 p-left-0">\n                    <select class="form-control tst-designations-typeahead" name="designation" rv-value="options.designation" style="height: 400px" multiple="multiple">\n                    </select>\n                    <div class="clearfix"></div>\n                    <a rv-show="options.designation < options.designation" href="javascript:void(0);"\n                       class="c-red btn-remove-designation p-absolute" style="display:none;">Remove Designation(s).</a>\n                    <a class="pull-right show-all-designations" href="javascript:void(0);"><i class="fa fa-list" aria-hidden="true"></i> Show all designations</a>\n                </div>\n            </div>\n        </div>\n        <div class="col-sm-2">\n            <div class="form-group">\n                <label class="control-label c-gray">Or/And:</label><br>\n                <div class="col-sm-12 p-left-0">\n                    <select class="form-control" name="condition" rv-value="options.condition < options.condition">\n                        <option value="or">Or</option>\n                        <option value="and">And</option>\n                    </select>\n                </div>\n            </div>\n        </div>\n        <div class="col-sm-4">\n            <div class="form-group">\n                <label class="control-label c-gray">Search:</label><br>\n                <div class="col-sm-12 p-left-0">\n                    <input type="text" class="typeahead form-control p-right-30" name="inputSearch">\n                </div>\n            </div>\n        </div>\n        <div class="col-sm-8">\n            <label class="control-label m-top-25 pull-right">Documents Count: ({options.colDocuments.length})</label>\n        </div>\n    </form>\n\n    <div class="clearfix"></div>\n\n    <div class="table-responsive panel-documents m-bottom-10">\n\n        <table class="cf-table table table-striped table-hover">\n            <thead>\n            <tr class="b-blue-light c-white">\n                <th><input type="checkbox" class="tst-documentBrowser-selectAll selectAll"></th>\n                <th>Edit</th>\n                <th class="min-width-300">\n                    Document Title\n                </th>\n                <th class="width-90-p">Designations</th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr rv-each-row=\'options.colDocuments.models\' rv-class-active-document="row:blocked"\n                rv-data-document-id=\'row:documentID\'>\n                <td class="v-align-middle">\n                    <input type="checkbox" name="select" rv-data-document-id=\'row:documentID\'>\n                </td>\n                <td class="v-align-middle">\n                    <a href="javascript:void(0);" class="editDocument" rv-data-document-id=\'row:documentID\'>\n                        <i class="fa fa-pencil"></i>\n                    </a>\n                </td>\n                <td class="v-align-middle">\n                    <a rv-if="row:documentTitle < row:documentTitle" rv-title=\'row:documentTitle\' rv-href="getDocumentUrl < row" target="_blank">{row:documentTitle}</a>\n                    <a rv-unless="row:documentTitle < row:documentTitle" rv-title=\'row:documentName\' rv-href="getDocumentUrl < row" target="_blank">{row:documentName}</a>\n                    <div rv-if="row:documentTitle < row:documentTitle" class="font-size-12 width-300">\n                        <a rv-title=\'row:documentName\' rv-href="getDocumentUrl < row" target="_blank" class="c-black truncate-text width-90-p display-block"><i class="fa fa-hdd-o" aria-hidden="true"></i> {row:documentName}</a>\n                    </div>\n                </td>\n                <td class="v-align-middle">\n                    {getDesignations < row:designations}\n                </td>\n            </tr>\n            <tr rv-unless=\'options.colDocuments.length\'>\n                <td colspan="4" class="no-data">\n                    <strong>No data to display</strong>\n                </td>\n            </tr>\n            </tbody>\n        </table>\n    </div>\n\n    <div class="clearfix"></div>\n</div>\n'},this.App.Templates.filesDocumentsDesignations=function(a){{var b="";_.escape}return b+='<div class="row m-top-5 wrapper-designations">\n    <div class="col-lg-3 col-md-3 col-ms-3 col-xs-2 hidden template-designation">\n        <ul class="list-unstyled m-top-5">\n            <li class="item-template-title hidden"></li>\n            <li class="item-template hidden">\n                <label class="font-normal">\n                    <input type="checkbox" class="designation-input"> <span class="c-black"></span>\n                </label>\n            </li>\n        </ul>\n    </div>\n</div>\n'},this.App.Templates.filesDocumentsDocumentBrowser=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <h4 class="modal-title">\n        Document Browser: <span class="fileTitle"></span>\n        <div class="pull-right">\n            <a class="btn btn-default font-size-10 b-radius-5 btn-expand">\n                <i class="fa fa-expand" aria-hidden="true"></i>\n            </a>\n        </div>\n    </h4>\n</div>\n<div class="modal-body">\n    <div class="form-horizontal">\n        <div rv-if=\'canUploadDocuments\'>\n            <ul class="nav nav-tabs" role="tablist">\n                <li role="presentation" class="active">\n                    <a class="tabManage tab-upload" href="#tabUpload" role="tab" data-toggle="tab">Upload</a>\n                </li>\n                <li role="presentation">\n                    <a class="tst-existingDocument-tab tabManage" href="#tabDocuments" role="tab" data-toggle="tab">Existing Documents</a>\n                </li>\n            </ul>\n            <div class="tab-content">\n                <div role="tabpanel" class="tab-pane" id="tabDocuments"></div>\n                <div role="tabpanel" class="tab-pane active" id="tabUpload"></div>\n            </div>\n        </div>\n\n        <div rv-unless=\'canUploadDocuments\'>\n            <div class="tab-content">\n                <div role="tabpanel" class="tab-pane active" id="tabDocuments"></div>\n            </div>\n        </div>\n    </div>\n</div>\n<div class="modal-footer">\n    <div class="actions pull-left" style="display: none;">\n        <a class="control-tooltip c-black p-right-5" data-help-id="eventDocumentsSelect" href="javascript:void(0);"><i class="fa fa-question-circle fa-lg"></i></a>\n\n        <button type="button" rv-if=\'canSelectDocuments\' class="tst-documentBrowser-selectDocument-btn btn btn-primary btn-selectDocuments" disabled data-dismiss="modal">\n            Select Documents\n        </button>\n\n        <button type="button" class="btn btn-default btn-download btn-combine" data-return="PDF" data-view-or-dl="download" disabled>\n            <i class="fa fa-download"></i> Download File\n        </button>\n\n        <button type="button" class="btn btn-default btn-download-zip btn-combine" data-return="zip" data-view-or-dl="download" disabled>\n            <i class="fa fa-file-archive-o"></i> Download as Zip\n        </button>\n\n        <div class="btn-group dropup" disabled data-permission="102">\n            <button type="button" class="btn btn-default btn-combine btn-combine-actions" data-return="PDF" data-view-or-dl="download">Combine Documents</button>\n            <button type="button" class="btn btn-default dropdown-toggle btn-combine-actions" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n                <span class="caret"></span>\n                <span class="sr-only">Toggle Dropdown</span>\n            </button>\n            <ul class="dropdown-menu">\n                <li><a href="javascript:void(0);" class="btn-combine" data-return="PDF" data-view-or-dl="view">View Documents</a></li>\n            </ul>\n        </div>\n\n        <button type="button" class="tst-documentBrower-delete-btn btn btn-danger btn-deleteDocuments" disabled data-permission="35">\n            <i class="fa fa-trash-o"></i> Delete\n        </button>\n    </div>\n\n    <button type="button" class="tst-documentBrowser-close-btn btn btn-default pull-right btn-closeModal" data-dismiss="modal">Close</button>\n</div>\n'},this.App.Templates.filesDocumentsForm=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <h4 class="modal-title">Edit Document</h4>\n</div>\n<div class="modal-body">\n    <form class="form-horizontal" onsubmit="javascript: return false;">\n        <div class="form-group m-bottom-5 document-link">\n            <label class="col-sm-3">Document:</label>\n            <div class="col-sm-8 description-exhibit">\n                <a rv-title=\'model:documentName\' rv-href="model.getUrl < :documentName" target="_blank">{model:documentName}</a>\n            </div>\n        </div>\n\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3">Document Title:</label>\n            <div class="col-sm-8 description-documentTitle">\n                <input type="text" class="form-control" name="documentTitle" rv-value=\'model:documentTitle\'>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3">Note:</label>\n            <div class="col-sm-8 description-note">\n                <textarea class="form-control" name="note" rv-value=\'model:note\'></textarea>\n            </div>\n        </div>\n        <fieldset>\n            <legend class="font-bold m-bottom-5">Designations</legend>\n            <div class=\'c-red\'>You must choose at least one designation per document.</div>\n            <div class="container-designations"></div>\n        </fieldset>\n        <!-- display any errors when this template is used to upload documents -->\n        <div class="error text-danger"></div>\n    </form>\n</div>\n<div class="modal-footer">\n    <button type="button" class="btn btn-default btn-close" data-dismiss="modal">Close</button>\n    <button type="button" class="tst-editDocument-form-save-btn btn btn-primary btnSave">Save</button>\n</div>\n'},this.App.Templates.filesDocumentsUploadDocuments=function(a){{var b="";_.escape}return b+='<form class="form-horizontal formUploadDocuments" method="POST" enctype="multipart/form-data" onsubmit="javascript: return false;">\n    <div class="row fileupload-buttonbar">\n        <div class="col-lg-8">\n            <!-- The fileinput-button span is used to style the file input field as button -->\n            <span class="btn btn-success add-files fileinput-button">\n				<i class="glyphicon glyphicon-plus"></i>\n				<span>Add Documents</span>\n				<input type="file" class="add-files" name="files[]" multiple>\n			</span>\n\n            <button type="reset" class="btn fileupdate-cancel btn-warning cancel" disabled="disabled">\n                <i class="glyphicon glyphicon-ban-circle"></i>\n                <span>Cancel upload</span>\n            </button>\n\n            <button type="submit" style="display:none;" class="start"></button>\n            <button class="tst-uploadDocument-btn btn btn-primary btn-submit"><span>Start all upload ({countDocumentToUpload < countDocumentToUpload})</span></button>\n            <a class="control-tooltip c-black p-left-10" data-help-id="eventAddDocumentUpload" href="javascript:void(0);"><i class="fa fa-question-circle fa-lg"></i></a>\n\n            <!-- The global file processing state -->\n            <span class="fileupload-process"></span>\n        </div>\n        <div class="col-lg-4 fileupload-progress fade">\n            <!-- The global progress bar -->\n            <div class="progress progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100">\n                <div class="progress-bar progress-bar-success" style="width:0%;"></div>\n            </div>\n            <!-- The extended global progress state -->\n            <div class="progress-extended">&nbsp;</div>\n        </div>\n    </div>\n    <div class="documents m-top-5"></div>\n\n    <div rv-show="countDocumentToUpload < countDocumentToUpload">\n        <span class="btn btn-success btn-addFile">\n            <i class="glyphicon glyphicon-plus"></i>\n            <span>Add Documents</span>\n        </span>\n\n        <button type="reset" class="btn btn-cancel btn-warning">\n            <i class="glyphicon glyphicon-ban-circle"></i>\n            <span>Cancel upload</span>\n        </button>\n        <button class="btn btn-primary btn-submit"><span>Start all upload ({countDocumentToUpload < countDocumentToUpload})</span></button>\n        <a class="control-tooltip c-black p-left-10" data-help-id="eventAddDocumentUpload" href="javascript:void(0);"><i class="fa fa-question-circle fa-lg"></i></a>\n    </div>\n</form>\n'},this.App.Templates.filesEventAlertForm=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <a class="close close-alert-form" data-dismiss="modal">×</a>\n    <h1 class="modal-title font-bold font-size-17" rv-if="model.isNew">Create Calendar Reminder</h1>\n    <h1 class="modal-title font-bold font-size-17" rv-unless="model.isNew">Edit Existing Calendar Reminder</h1>\n</div>\n<div class="modal-body">\n    <form id="alert-form">\n        <div class="p-top-15">\n            <div class="form-horizontal">\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Date</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control datepicker" name="date" placeholder="yyyy-mm-dd" rv-value=\'model:date\' required>\n\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Description:</label>\n                    <div class="col-sm-8">\n                        <input type="text" name="description" rv-value="model:description" class=\'form-control\' required>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 font-size-15 control-label">Add Users:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control search-files typeahead user-Typeahead p-right-30" name="userTypeahead" rv-value="model:userTypeahead">\n                        <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="userTypeahead"><i class="fa fa-chevron-down"></i></a>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <div class="col-sm-offset-3">\n                        <table class=\'table\'>\n                            <thead>\n                            <tr>\n                                <td>Assign</td>\n                                <td>User</td>\n                            </tr>\n                            </thead>\n                            <tbody>\n                            <tr rv-each-row="colUsers.models">\n                                <td><input type="checkbox" class="user-checkbox" rv-data-user-id="row:user_id" rv-data-typeaheadresult="row:typeaheadResult" name=\'user_id\' checked/></td>\n                                <td>{row:typeaheadResult}</td>\n                            </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n                <hr>\n                <div class="form-group m-bottom-10">\n                    <em class=\'font-size-17 p-bottom-10 p-left-50\'> Extra Settings (Optional)</em>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Start Time:</label>\n                    <div class="col-sm-8  display-table bootstrap-timepicker p-right-15">\n                        <input type="text" class="form-control input-small timepicker" name=\'time\' rv-value="model:time">\n                        <span class="input-group-addon"><i class="glyphicon glyphicon-time"></i></span>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">End Time:</label>\n                    <div class="col-sm-8  display-table bootstrap-timepicker p-right-15">\n                        <input type="text" class="form-control input-small timepicker" name=\'end_time\' rv-value="model:end_time">\n                        <span class="input-group-addon"><i class="glyphicon glyphicon-time"></i></span>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">End Date</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control datepicker" name="end_date" placeholder="yyyy-mm-dd" rv-value=\'model:end_date\'>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"> Alert set:</label>\n                    <div class="col-sm-3">\n                        <input type="number" name="notificationQuantity" rv-value="model:notificationQuantity" class=\'form-control\'  number="true">\n                    </div>\n                    <div class="col-sm-3">\n                        <select name="notificationUnit" rv-value="model:notificationUnit" class=\'form-control\'>\n                            <option value="minutes">Minutes</option>\n                            <option value="hours">Hours</option>\n                            <option value="days">Days</option>\n                        </select>\n                    </div>\n                    <label class="col-sm-2 control-label">Before</label>\n                </div>\n\n\n            </div>\n        </div>\n    </form>\n</div>\n<div class="modal-footer">\n    <button type="button" class="btn btn-default close-alert-form" data-dismiss="modal">Close</button>\n    <button type="button" class="btn btn-primary" id=\'save-alert\'>Save Changes</button>\n    <button type="button" class="btn btn-danger" id=\'delete-alert\' rv-data-alert-id="model:alert_id">Delete</button>\n</div>'},this.App.Templates.filesEventCategoryEventGeneral=function(a){{var b="";_.escape}return b+='<div class="container m-top-15">\n    <div class="b-grey-tabs box-shadow">\n        <div class="b-green-casefriend min-height-50 p-top-10  p-bottom-5">\n            <h2 class="font-size-20 p-15"><i rv-class="eventCategoryIcon"></i> {eventCategoryName} ({collection.length})\n                <a rv-href="createEventLink" class="btn btn-sm btn-default pull-right box-shadow">\n                    <span class="fa fa-plus"></span> <span rv-text="createEventText"></span>\n                </a>\n                <span class="clearfix"></span>\n            </h2>\n        </div>\n        <table class="table file-events-table">\n            <thead>\n            <tr>\n                <th class="font-bold width-31"></th>\n                <th class="events-sortable cursor-pointer font-bold width-100" data-sort=\'eventDate\'>Date <i class="fa fa-chevron-down"></i></th>\n                <th class="events-sortable cursor-pointer font-bold width-100" data-sort=\'eventTypeName\'>Event Type</th>\n                <th class=" events-sortable cursor-pointer font-bold width-115" data-sort=\'milestoneName\'>Milestone</th>\n                <th class=" events-sortable cursor-pointer font-bold width-200" data-sort=\'eventTitle\'>Event Title</th>\n                <th class=" events-sortable cursor-pointer font-bold width-369" data-sort=\'shortNote\'>Short Note</th>\n                <th class="font-bold width-100">Extra Field</th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr rv-hide="collection.length">\n                <td colspan="6" class="t-align-c">\n                    <strong>NONE</strong>\n                </td>\n            </tr>\n            <tr rv-each-model="collection.models < collection.models" rv-data-id="model:eventID" class="row-model" rv-class-font-bold="model:important">\n                <td class="cursor-pointer"><i rv-if="model:documentID" class="fa fa-paperclip fa-lg"></i></td>\n                <td class="cursor-pointer">{model:eventDate}</td>\n                <td class="cursor-pointer">{model:eventTypeName}</td>\n                <td class="cursor-pointer">{model:milestoneName}</td>\n                <td class="cursor-pointer">{model:eventTitle}</td>\n                <td class="cursor-pointer">{model:shortNote}</td>\n                <td class="cursor-pointer">{model:extraField}</td>\n            </tr>\n            </tbody>\n        </table>\n    </div>\n</div>'},this.App.Templates.filesEventCategoryLiensTableIndex=function(a){{var b="";_.escape}return b+='<div class="container m-top-15">\n    <div class="b-grey-tabs box-shadow">\n        <div class="b-green-casefriend min-height-50 p-top-10  p-bottom-5">\n            <h2 class="font-size-20 p-15"><i class="fa fa-gift fa-lg"></i> Liens ({collection.length})</h2>\n        </div>\n        <table class="table file-events-table">\n            <thead>\n            <tr>\n                <th class="font-bold width-100">Event Title</th>\n                <th class="font-bold width-100">Lien Claimant</th>\n                <th class="font-bold width-100">Bill Amount</th>\n                <th class="font-bold width-100">Settled On</th>\n                <th class="font-bold width-100">Settled For</th>\n                <th class="font-bold width-100">Paid On</th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr rv-hide="collection.length">\n                <td colspan="6" class="t-align-c">\n                    <strong>NONE</strong>\n                </td>\n            </tr>\n            <tr rv-each-model="collection.models < collection.models" rv-data-id="model:eventID" class="row-model">\n                <td class="cursor-pointer">{model:eventTitle}</td>\n                <td class="cursor-pointer">\n                    {model:claimantName}\n                </td>\n                <td class="cursor-pointer">${model:totalBill | currency}</td>\n                <td class="cursor-pointer">{model:lienSettleDate}</td>\n                <td class="cursor-pointer">${model:lienSettlementAmount | currency}</td>\n                <td class="cursor-pointer">{model:lienPaidDate}</td>\n            </tr>\n            </tbody>\n            <!--  <tfoot>\n                 <tr rv-show="collection.length">\n                     <td class="font-bold">Totals:</td>\n                     <td colspan="2" class="font-bold">${collection.totalBillAmount | currency}</td>\n                     <td colspan="2" class="font-bold">${collection.totalSettledAmount | currency}</td>\n                 </tr>\n             </tfoot> -->\n        </table>\n    </div>\n</div>';

},this.App.Templates.filesEventTabsBillingForm=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <h4 class="modal-title">Billing</h4>\n</div>\n<div class="modal-body">\n    <form id=\'billing-form\' class="form-horizontal" onsubmit="javascript: return false;">\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-2 control-label">Billing Date:</label>\n            <div class="col-sm-5">\n                <input type="text" class="form-control datepicker" name="billingDate" placeholder="yyyy-mm-dd" rv-value=\'model:billingDate\' default-today required>\n            </div>\n        </div>\n\n\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-2 control-label"> <i class="fa fa-asterisk c-red font-size-10"></i> Timekeeper:</label>\n            <div class="col-sm-5">\n                <input type="text" class="form-control search-files typeahead timekeeper-Typeahead p-right-30" rv-value="model:timekeeperTypeahead" name="timekeeperID" required>\n                <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="timekeeperID"><i class="fa fa-chevron-down"></i></a>\n            </div>\n            <div class="col-sm-1 p-0">\n                <a href="javascript:void(0);" class="btn btn-default control-tooltip" data-help-id="fileInputBillingTimekeeperHelp">\n                    <i class="fa fa-question-circle fa-lg-circle fa-lg"></i>\n                </a>\n            </div>\n        </div>\n\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-2 control-label">Timekeeper Rates:</label>\n            <div class="col-sm-5">\n                <select name="timekeeper-rates" class="form-control" rv-value="model:billingRate" disabled>\n                    <option value="">Select...</option>\n                    <option rv-value="row:tkRate" rv-data-ratetype="row:rateType" rv-data-classification="row:classification" rv-each-row="colTimeKeeperRates.models">\n                        {row:tkType} : {row:tkRate} - {row:classification}\n                    </option>\n                </select>\n            </div>\n            <div class="col-sm-1 p-0">\n                <a href="javascript:void(0);" class="btn btn-default control-tooltip" data-help-id="fileInputBillingTimekeeperRatesHelp">\n                    <i class="fa fa-question-circle fa-lg-circle fa-lg"></i>\n                </a>\n            </div>\n            <div class="col-sm-4 p-left-0" rv-data-clientid="options.fileModel.getClientID">\n                <label class="control-label">Client: {options.fileModel.getClientName}</label>\n            </div>\n        </div>\n\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-2 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Rate:</label>\n            <div class="col-sm-5">\n                <input class="form-control" type="text" name="billingRate" rv-value=\'model:billingRate\' required number="true" min="0.01" disabled>\n            </div>\n            <div class="col-sm-1 p-0">\n                <a href="javascript:void(0);" class="btn btn-default control-tooltip" data-help-id="fileInputBillingRateHelp">\n                    <i class="fa fa-question-circle fa-lg-circle fa-lg"></i>\n                </a>\n            </div>\n            <div class="col-sm-4 p-left-0 display-inline-flex">\n                <input class="form-control width-35 p-right-10" type="checkbox" name="hourly" rv-checked="model:hourly">\n                <span class="p-left-10"> Check only for Hourly and Flat Fee work. Un-check for items like copying and postage.</span>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-2 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Work Units:</label>\n            <div class="col-sm-5 description-exhibit">\n                <input class="form-control" type="text" name="workUnits" rv-value=\'model:workUnits\' required number="true" min="0.01">\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-2 control-label"> <i class="fa fa-asterisk c-red font-size-10"></i> User:</label>\n            <div class="col-sm-5">\n                <input type="text" class="form-control search-files typeahead user-Typeahead p-right-30" name="UserID" rv-value="model:userTypeahead" required>\n                <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="UserID"><i class="fa fa-chevron-down"></i></a>\n            </div>\n            <div class="col-sm-1 p-0">\n                <a href="javascript:void(0);" class="btn btn-default control-tooltip" data-help-id="fileInputBillingUserHelp">\n                    <i class="fa fa-question-circle fa-lg-circle fa-lg"></i>\n                </a>\n            </div>\n        </div>\n\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-2 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Billing Description:</label>\n            <div class="col-sm-5 description-exhibit">\n                <p rv-if="invalidWords" class="c-red font-bold">There are invalid words in the Billing Description.</p>\n                <textarea name="billingDescription" id="billingDescription" class="form-control" style="height:200px;" rv-value=\'model:billingDescription\' required></textarea>\n            </div>\n            <div class="col-sm-1 p-0">\n                <a href="javascript:void(0);" class="btn btn-default control-tooltip" data-help-id="fileInputBillingDescriptionHelp">\n                    <i class="fa fa-question-circle fa-lg-circle fa-lg"></i>\n                </a>\n            </div>\n            <div class="col-sm-4 p-left-0">\n                <div class="p-5">\n                    <a href="javascript:void(0);" class="control-tooltip m-left-10" data-help-id="fileInputBillingAllorExclusiveHelp">\n                        <i class="fa fa-question-circle fa-lg-circle c-black"></i>\n                    </a>\n                    <input type="radio" name="all-or-exlusive" value="all" checked="checked"/> <span class="p-right-10">All</span>\n                    <input type="radio" name="all-or-exlusive" value="exclusive"/> Exclusive to {options.fileModel.getClientName}\n\n                </div>\n                <div id=\'all-snippets\'>\n                    <div class="p-5">\n                        <select name="snippet-category-type" class="form-control">\n                            <option selected="selected" value="">Select Snippet Category</option>\n                            <option rv-value="row" rv-each-row="snippetsCategoriesArray">{row}</option>\n                        </select>\n                    </div>\n                    <div class="p-5">\n                        <select name="snippet-name" class="form-control" multiple style="height:135px;">\n                            <option rv-value="row:id" rv-each-row="colSnippetsName.models">- {row:snippet_name}</option>\n                        </select>\n                    </div>\n                </div>\n                <div id=\'exclusive-snippets\' class="display-none">\n                    <div class="p-5">\n                        <select name="exclusive-snippet-category-type" class="form-control">\n                            <option selected="selected" value="">Select Exclusive Snippet Category</option>\n                            <option rv-value="row" rv-each-row="exclusiveSnippetsCategoriesArray">{row}</option>\n                        </select>\n                    </div>\n                    <div class="p-5">\n                        <select name="exclusive-snippet-name" class="form-control" multiple style="height:135px;">\n                            <option rv-value="row:id" rv-each-row="colExclusiveSnippetsName.models">- {row:snippet_name}</option>\n                        </select>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5" rv-if="model:hourly">\n            <label class="col-sm-2 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Litigation Code:</label>\n            <div class="col-sm-5">\n                <select name="litigationCode" rv-value="model:litigationCode" class="form-control" required>\n                    <option selected="selected" value="">Select...</option>\n                    <option rv-value="row:litigationCode" rv-each-row="colLitigationCodes.models">{row:litigationCode} -- {row:codeDescription}</option>\n                </select>\n            </div>\n        </div>\n\n        <div id="panelActivityCode" class="form-group m-bottom-5" rv-if="model:hourly">\n            <label class="col-sm-2 control-label"> <i class="fa fa-asterisk c-red font-size-10"></i> Activity Code:</label>\n            <div class="col-sm-5 description-exhibit">\n                <select name="activityCode" rv-value="model:activityCode" class="form-control" required>\n                    <option selected="selected" value="">Select...</option>\n                    <option rv-value="row:litigationCode" rv-each-row="colActivationCodes.models">{row:litigationCode} -- {row:codeDescription}</option>\n                </select>\n            </div>\n        </div>\n\n        <div class="form-group m-bottom-5" rv-unless="model:hourly">\n            <label class="col-sm-2 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Expense Code:</label>\n            <div class="col-sm-5">\n                <select name="expenseCode" rv-value="model:expenseCode" class="form-control" required>>\n                    <option selected="selected" value="">Select...</option>\n                    <option rv-value="row:litigationCode" rv-each-row="colExpenseCodes.models">{row:litigationCode} -- {row:codeDescription}</option>\n                </select>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5" rv-if="model:billingID" data-permission="84">\n            <label class="col-sm-2 control-label">Reviewed: </label>\n            <div class="col-sm-4 p-top-5">\n                <span rv-if="model:reviewed" class="label label-success">YES</span>\n                <span rv-unless="model:reviewed" class="label label-warning">NO</span>\n            </div>\n        </div>\n\n        <!-- display any errors when this template is used to upload documents -->\n    </form>\n</div>\n<div class="modal-footer">\n    <button type="button" class="tst-eventsBillForm-close-btn btn btn-default btn-close" data-dismiss="modal">Close</button>\n    <button type="button" id="mark-as-reviewed" class="btn btn-warning billingActionBtn" rv-if="model:billingID" data-permission="84">Mark as Reviewed</button>\n    <button type="button" class="tst-eventsBillForm-save-btn btn btn-primary btnSave billingActionBtn">Save</button>\n    <button type="button" id="bill-delete-btn" class="btn btn-danger display-none billingActionBtn" data-permission="36">Delete</button>\n    <button type="button" id="bill-delete-invoiced-btn" class="btn btn-danger display-none billingActionBtn" data-permission="85">Delete Invoiced</button>\n\n</div>\n'},this.App.Templates.filesEventTabsDoctorFacilitiesForm=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <a class="close" data-dismiss="modal">×</a>\n    <h1 class="modal-title font-bold font-size-17" rv-if="model.isNew">Create New Facility</h1>\n    <h1 class="modal-title font-bold font-size-17" rv-unless="model.isNew">Edit Existing Facility</h1>\n</div>\n\n<div class="modal-body">\n    <form id="from-doctor-facility">\n        <div class="panel-employer p-top-15">\n            <div class="form-horizontal">\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Facility Name:</label>\n                    <div class="col-sm-8">\n                        <input type="text" name="facilityName" rv-value="model:facilityName" class=\'form-control\' required>\n                        <input type=\'hidden\' name="facilityID" rv-value="model:facilityID"/>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Facility Phone:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="officePhone" rv-value="model:officePhone" required>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Fax:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="faxNumber" rv-value="model:faxNumber">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <h3 class="font-bold sub-header-forms p-bottom-10 col-sm-3 col-sm-offset-3">Mailing</h3>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Address:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="mailingAddress" rv-value="model:mailingAddress">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">City:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="mailingCity" rv-value="model:mailingCity">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">State:</label>\n                    <div class="col-sm-8">\n                        <select class=\'form-control state-helper\' rv-value="model:mailingState" name=\'mailingState\'></select>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 font-size-15 control-label">County:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="typeahead form-control search-files mailingCounty_typeahead" name="mailingCountyTypeahead" rv-value="model:mailingCounty">\n                        <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="mailingCountyTypeahead"><i class="fa fa-chevron-down"></i></a>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Zip:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="mailingZip" rv-value="model:mailingZip">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <h3 class="font-bold sub-header-forms p-bottom-10 col-sm-5 col-sm-offset-3">Physical\n                        <a class="tst-copyAddressClinicForm-btn btn btn-info copy-button-size" id="copy-to-address" href="javascript:void(0);"><i class="fa fa-files-o"></i> Copy Mailing Address</a>\n                    </h3>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Address:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="physicalAddress" rv-value="model:physicalAddress">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> City:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="physicalCity" rv-value="model:physicalCity" required>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">State:</label>\n                    <div class="col-sm-8">\n                        <select class=\'form-control state-helper\' rv-value="model:physicalState" name=\'physicalState\'></select>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 font-size-15 control-label">County:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="typeahead form-control search-files physicalCounty_typeahead" name="physicalCountyTypeahead" rv-value="model:physicalCounty">\n                        <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="physicalCountyTypeahead"><i class="fa fa-chevron-down"></i></a>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Zip:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="physicalZip" rv-value="model:physicalZip">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Facility Notes:</label>\n                    <div class="col-sm-8">\n                        <textarea class="form-control" rows="5" name="facilityNotes" rv-value="model:facilityNotes"></textarea>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </form>\n</div>\n<div class="modal-footer">\n    <button type="button" class="tst-editClinic-close-btn btn btn-default" data-dismiss="modal">Close</button>\n    <button type="button" class="btn btn-primary" id=\'save-doctor-facility\'>Save changes</button>\n</div>'},this.App.Templates.filesEventTabsDoctorsForm=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <a class="close" data-dismiss="modal">×</a>\n    <h1 class="modal-title font-bold font-size-17" rv-if="model.isNew">Create New Doctor</h1>\n    <h1 class="modal-title font-bold font-size-17" rv-unless="model.isNew">Edit Existing Doctor</h1>\n</div>\n<div class="modal-body">\n    <form id="from-doctor">\n        <div class="p-top-15">\n            <div class="form-horizontal">\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> First Name:</label>\n                    <div class="col-sm-8">\n                        <input type="text" name="doctorFirstName" rv-value="model:doctorFirstName" class=\'form-control\' required>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Middle Name:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="doctorMiddleName" rv-value="model:doctorMiddleName"/>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Last Name:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="doctorLastName" rv-value="model:doctorLastName" required/>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Email:</label>\n                    <div class="col-sm-8">\n                        <input type="email" class="form-control" name="doctorEmail" rv-value="model:doctorEmail"/>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Direct Phone:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="doctorDirectPhone" rv-value="model:doctorDirectPhone" required>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Cell Phone:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="doctorCellPhone" rv-value="model:doctorCellPhone">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Fax #:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="doctorFax" rv-value="model:doctorFax">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Phone Extension:</label>\n                    <div class="col-sm-8">\n                        <input type="number" class="form-control" name="doctorPhoneExtension" rv-value="model:doctorPhoneExtension">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Doctor Specialty:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="doctorSpecialty" rv-value="model:doctorSpecialty">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Doctor Rating:</label>\n                    <div class="col-sm-8">\n                        <select class="form-control" name="doctorRating" rv-value="model:doctorRating">\n                            <option value="0">0</option>\n                            <option value="1">1</option>\n                            <option value="2">2</option>\n                            <option value="3">3</option>\n                            <option value="4">4</option>\n                            <option value="5">5</option>\n                        </select>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <h3 class="font-bold sub-header-forms p-bottom-10 col-sm-3 col-sm-offset-3">Physical</h3>\n\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Address:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="physicalAddress" rv-value="model:physicalAddress">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> City:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="physicalCity" rv-value="model:physicalCity" required>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">State:</label>\n                    <div class="col-sm-8">\n                        <select class=\'form-control state-helper\' rv-value="model:physicalState" name=\'physicalState\'></select>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 font-size-15 control-label">County:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="typeahead form-control search-files physicalCounty_typeahead" name="physicalCountyTypeahead" rv-value="model:physicalCounty">\n                        <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="physicalCountyTypeahead"><i class="fa fa-chevron-down"></i></a>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Zip:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="physicalZip" rv-value="model:physicalZip">\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <h3 class="font-bold sub-header-forms p-bottom-10 col-sm-5 col-sm-offset-3">Mailing\n                        <a class="tst-copyAddressDocForm-btn btn btn-info copy-button-size" id="copy-to-address" href="javascript:void(0);"><i class="fa fa-files-o"></i> Copy Mailing Address</a>\n                    </h3>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Address:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="mailingAddress" rv-value="model:mailingAddress">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">City:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="mailingCity" rv-value="model:mailingCity">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">State:</label>\n                    <div class="col-sm-8">\n                        <select class=\'form-control state-helper\' rv-value="model:mailingState" name=\'mailingState\'></select>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 font-size-15 control-label">County:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="typeahead form-control search-files mailingCounty_typeahead" name="mailingCountyTypeahead" rv-value="model:mailingCounty">\n                        <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="mailingCountyTypeahead"><i class="fa fa-chevron-down"></i></a>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Zip:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="mailingZip" rv-value="model:mailingZip">\n                    </div>\n                </div>\n\n                <hr class="hr-white"/>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 font-size-15 control-label">Assign Facility:</label>\n                    <div class="col-sm-6">\n                        <input type="text" class="typeahead form-control search-files facilities_typeahead" name="facilitiesTypeahead">\n                        <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="facilitiesTypeahead"><i class="fa fa-chevron-down"></i></a>\n                    </div>\n                    <div class="input-group-btn col-sm-2">\n                        <a class="btn btn-default" id=\'doctor_facility_form_new\' href="javascript:void(0);"><i class="fa fa-plus"></i></a>\n                        <a class="btn btn-default control-tooltip" data-help-id="fileInputFacilitySearchHelp" href="javascript:void(0);"><i class="fa fa-question-circle fa-lg-circle fa-lg"></i></a>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 font-size-15 control-label"></label>\n                    <div class="col-sm-8">\n                        <table class=\'table\' id="da_table">\n                            <thead>\n                            <tr>\n                                <td>Facility Name</td>\n                                <td>Office Phone</td>\n                                <td>Action</td>\n                            </tr>\n                            </thead>\n                            <tbody>\n                            <tr id=\'da-list\' rv-each-row="facilityCol.models">\n                                <td>{row:facilityName}</td>\n                                <td><a rv-href="row:phone">{row:officePhone}</a></td>\n                                <td>\n                                    <a class=\'m-right-5 doctor_facility_form_edit\' href="javascript:void(0);" rv-data-facility=\'row:facilityID\' rv-data-model=\'row.cid\'><i class="fa fa-pencil"></i></a>\n                                    <a class=\'m-right-5 facility-delete\' href="javascript:void(0);" rv-data-model=\'row.cid\'><i class="c-red t-align-right fa fa-times"></i></a>\n                                </td>\n                            </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n                <hr class="hr-white"/>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 font-size-15 control-label">Assign subspecialties:</label>\n                    <div class="col-sm-6">\n                        <input type="text" class="typeahead form-control search-files subspecialty_typeahead" name="subspecialtyTypeahead">\n                        <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="subspecialtyTypeahead"><i class="fa fa-chevron-down"></i></a>\n                    </div>\n                    <div class="input-group-btn col-sm-2">\n                        <a class="btn btn-default" id=\'subspecialty_form_new\' href="javascript:void(0);"><i class="fa fa-plus"></i></a>\n                        <a class="btn btn-default control-tooltip" data-help-id="fileInputSubSpecialitySearchHelp" href="javascript:void(0);"><i class="fa fa-question-circle fa-lg-circle fa-lg"></i></a>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 font-size-15 control-label"></label>\n                    <div class="col-sm-8">\n                        <table class=\'table\' id="da_table">\n                            <thead>\n                            <tr>\n                                <td>SubSpecialty Name</td>\n                                <td>Action</td>\n                            </tr>\n                            </thead>\n                            <tbody>\n                            <tr id=\'da-list\' rv-each-row="subspecialtiesCol.models">\n                                <td>{row:subSpecialtyName}</td>\n                                <td>\n                                    <a class=\'m-right-5 subspecialty_form_edit\' href="javascript:void(0);" rv-data-subspecialty=\'row:subSpecialtyID\' rv-data-model=\'row.cid\'><i class="fa fa-pencil"></i></a>\n                                    <a class=\'m-right-5 subspecialty-delete\' href="javascript:void(0);" rv-data-model=\'row.cid\'><i class="c-red t-align-right fa fa-times"></i></a>\n                                </td>\n                            </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n                <hr class="hr-white"/>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Doctor Notes:</label>\n                    <div class="col-sm-8">\n                        <textarea class="form-control" rows="5" name="doctorNotes" rv-value="model:doctorNotes"></textarea>\n                    </div>\n                </div>\n\n                <hr class="hr-white"/>\n                <div class="form-group m-bottom-5">\n                    <h2 class=\'font-bold font-size-20 p-bottom-10 col-sm-6 col-sm-offset-1\'>Event associated to this Doctor:</h2>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <div rv-each-event="eventsCol.models" class="col-sm-offset-1 col-sm-5">\n                        <span class="file-icon">{event:fileNumber}</span>\n                        <a class="gotoEvent" role="button" rv-data-id="event:eventID" rv-data-filenumber="event:fileNumber"><i class="fa fa-search fa-lg"></i></a>\n                        <a class="goto-event-new-tab" rv-href="event:eventID" target="_blank" rv-data-filenumber="event:fileNumber"><i class="fa fa-search-plus fa-lg"></i></a>\n                        <a class="gotoEvent" role="button" rv-data-id="event:eventID" rv-data-filenumber="event:fileNumber">\n                            <span>{event:eventTitle}</span>\n                        </a>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </form>\n</div>\n<div class="modal-footer">\n    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n    <button type="button" class="btn btn-primary" id=\'save-doctor\'>Save changes</button>\n</div>';

},this.App.Templates.filesEventTabsEventBilling=function(a){{var b="";_.escape}return b+='<a class="btn btn-default btn-new-bill" href="javascript:void(0);" rv-if="options.fileModel.isFileOpened"><i class="glyphicon glyphicon-plus"></i> Add New Bill</a>\n<a class="control-tooltip c-black p-left-10" data-help-id="eventAddBillHelp" href="javascript:void(0);"><i class="fa fa-question-circle fa-lg"></i></a>\n<fieldset class="m-top-20">\n    <legend rv-if="options.colBillings.length">Bills ({options.colBillings.length})</legend>\n    <legend rv-unless="options.colBillings.length">Bills (0)</legend>\n\n    <div class="table-responsive m-bottom-5">\n        <table class="table">\n            <thead>\n            <tr class="b-blue-light c-white">\n                <th class="width-100">Billing Date</th>\n                <th>Billing Description</th>\n                <th class="width-115">Invoice Number</th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr rv-each-model=\'options.colBillings.models\' class="billing-row cursor-pointer">\n                <td rv-data-billingid="model:billingID" class="gotoBilling">\n                    <div>{model:billingDate}</div>\n                </td>\n                <td rv-data-billingid="model:billingID" class="gotoBilling">\n                    <div>{model:billingDescription}</div>\n                </td>\n                <td rv-data-billingid="model:billingID">\n                    <div rv-if="model:invoiceNumber" class="gotoInvoice" rv-data-invoicenumber="model:invoiceNumber">{model:invoiceNumber}</div>\n                    <div rv-unless="model:invoiceNumber">Not Invoiced</div>\n                </td>\n            </tr>\n            <tr rv-unless=\'options.colBillings.length\'>\n                <td colspan="3" class="no-data">\n                    <strong>No bills filed yet.</strong>\n                </td>\n            </tr>\n            </tbody>\n        </table>\n    </div>\n</fieldset>'},this.App.Templates.filesEventTabsEventClosureFirst=function(a){{var b="";_.escape}return b+='<form id="closure-form" data-permission="31">\n    <div class="form-horizontal">\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Close Reason:</label>\n            <div class="col-sm-8">\n                <select class="form-control" id="eventReason" rv-value="model:eventReasonID" name="appointedBy" required>\n                    <option rv-each-reason="colEventReasons.models" rv-value="reason:eventReasonID">{reason:description}</option>\n                </select>\n            </div>\n        </div>\n    </div>\n</form>'},this.App.Templates.filesEventTabsEventDocument=function(a){{var b="";_.escape}return b+='<form id="event-document-form" data-permission="31">\n    <a class="btn btn-default btn-documentBrowser" href="javascript:void(0);"><i class="glyphicon glyphicon-plus"></i> Add Documents</a> <a class="control-tooltip c-black p-left-10" data-help-id="eventAddDocumentHelp" href="javascript:void(0);"><i class="fa fa-question-circle fa-lg"></i></a>\n\n    <fieldset class="m-top-20">\n        <legend>Documents Assigned ({options.colEventToDocuments.length})</legend>\n        <div class="table-responsive panel-documents m-bottom-5">\n            <table class="table">\n                <thead>\n                <tr class="b-blue-light c-white">\n                    <th>Edit</th>\n                    <th data-permission="53">Remove</th>\n                    <th class="width-200">\n                        Document Title\n                    </th>\n                    <th>\n                        Document Name\n                    </th>\n                    <th>Designations</th>\n                </tr>\n                </thead>\n                <tbody>\n                <tr rv-each-row=\'options.colEventToDocuments.models\' rv-hide=\'isRemoved < row:removed\'>\n                    <td>\n                        <a href="javascript:void(0);" class="tst-eventsDocumentEdit-Pencil btnEditDocument" rv-data-document-id=\'row:documentID\'>\n                            <i class="fa fa-pencil"></i>\n                        </a>\n                    </td>\n                    <td data-permission="53">\n                        <a href="javascript:void(0);" class="btnRemoveDocument" rv-data-document-id=\'row:documentID\'>\n                            <i class="fa fa-remove"></i>\n                        </a>\n                    </td>\n                    <td class="width-200">\n                        <a rv-title=\'row:documentTitle\' rv-href="getDocumentUrl < row" target="_blank">{row:documentTitle}</a>\n                    </td>\n                    <td>\n                        <a rv-title=\'row:documentName\' rv-href="getDocumentUrl < row" target="_blank">{row:documentName}</a>\n                    </td>\n                    <td>\n                        {getDesignations < row:designations}\n                    </td>\n                </tr>\n                <tr rv-unless=\'options.colEventToDocuments.length\'>\n                    <td colspan="18" class="no-data">\n                        <strong>No data to display</strong>\n                    </td>\n                </tr>\n                </tbody>\n            </table>\n        </div>\n    </fieldset>\n</form>\n'},this.App.Templates.filesEventTabsEventForm=function(a){{var b="";_.escape}return b+='<div class="container m-top-15" data-permission="31">\n    <div class="b-grey-tabs box-shadow p-20">\n        <div class="form-horizontal">\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-3 control-label"></i> File Name:</label>\n                <div class="col-sm-8 p-top-7">\n                    {options.fileModel:fileTitle}\n                </div>\n            </div>\n        </div>\n        <div class="form-horizontal">\n            <div class="form-group m-bottom-5" data-permission="37">\n                <label class="col-sm-3 control-label">Event Category:</label>\n                <div class="col-sm-8">\n                    <select name="category-type" rv-value="model:etcID < :etcID" class="form-control">\n                        <option selected="selected" value="">Select one category</option>\n                        <option rv-value="row:etcID" rv-each-row="colEventTypeCategories.models">{row:etcName}</option>\n                    </select>\n                </div>\n            </div>\n            <span data-permission="37">\n					<div class="form-group m-bottom-5" rv-if="model.hasCategory < :etcID">\n						<label class="col-sm-3 control-label">Event Type:</label>\n						<div class="col-sm-8">\n							<input type="text" class="form-control typeahead search-files eventTypes-Typeahead" name="eventTypes" required>\n							<a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="eventTypes"><i class="fa fa-chevron-down"></i></a>\n						</div>\n					</div>\n				</span>\n            <div id=\'existing-events-select\' class="form-group m-bottom-5 display-none">\n\n                <label class="col-sm-3 control-label"><a class="control-tooltip c-black p-left-10" data-help-id="fileEventChooseNewOrExistingHelp" href="javascript:void(0);"><i class="fa fa-question-circle fa-lg"></i></a> Choose new or existing:</label>\n                <input type="hidden" name="existing-select">\n                <div class="col-sm-8 some-div">\n                    <input type="text" class="form-control typeahead search-files existing-events-typeahead" name="existing-events" required>\n                    <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="existing-events"><i class="fa fa-chevron-down"></i></a>\n                </div>\n            </div>\n            <div id=\'close-event-reasons\' class="form-group m-bottom-5 display-none">\n                <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Close Reason:</label>\n                <div class="col-sm-8">\n                    <select class="form-control" id="eventReason" rv-value="model:eventReasonID" name="appointedBy" required>\n                        <option rv-each-reason="colEventReasons.models" rv-value="reason:eventReasonID">{reason:description}</option>\n                    </select>\n                </div>\n            </div>\n            <div id="eventTypeInstructions" class="form-group m-bottom-5 display-none">\n                <label class="event-instructions col-sm-8 col-sm-offset-3 control-label" id="instructionsText"></label>\n            </div>\n            <div id=\'other-fields\' class=\'display-none\'>\n                <!-- Nav tabs -->\n                <ul class="nav nav-tabs m-top-20" role="tablist">\n                    <li role="presentation" class="active"><a href="#event-form-tab" role="tab" data-toggle="tab">Event</a></li>\n                    <li role="presentation"><a href="#event-form-tab3" role="tab" data-toggle="tab">{tab3}</a></li>\n                    <li role="presentation"><a href="#event-form-tab4" role="tab" data-toggle="tab">{tab4}</a></li>\n                    <li role="presentation"><a href="#event-form-tab5" role="tab" data-toggle="tab">{tab5}</a></li>\n                    <li role="presentation"><a href="#event-form-tab6" role="tab" data-toggle="tab">{tab6}</a></li>\n                    <li role="presentation"><a href="#event-form-tab7" role="tab" data-toggle="tab">{tab7}</a></li>\n                    <li role="presentation"><a href="#event-form-tab8" role="tab" data-toggle="tab">{tab8}</a></li>\n\n                    <li role="presentation"><a class=\'tabAttachments\' href="#document-form-tab" role="tab" data-toggle="tab">Attachments</a></li>\n                    <li role="presentation" class="additional-button">\n                        <a class=\'auto-save\' href="#billing-form-tab" role="tab" data-toggle="tab">\n                            Billing\n                            <span class="cursor-pointer" id="add-new-bill"><i class="fa fa-plus" aria-hidden="true"></i></span>\n                        </a>\n                    </li>\n                    <li role="presentation"><a class=\'tabLetters auto-save\' href="#letters-tab" role="tab" data-toggle="tab">Letters</a></li>\n                </ul>\n\n                <!-- Tab panes -->\n                <div class="tab-content">\n                    <div role="tabpanel" class="tab-pane active" id="event-form-tab"></div>\n                    <div role="tabpanel" class="tab-pane" id="event-form-tab3"></div>\n                    <div role="tabpanel" class="tab-pane" id="event-form-tab4"></div>\n                    <div role="tabpanel" class="tab-pane" id="event-form-tab5"></div>\n                    <div role="tabpanel" class="tab-pane" id="event-form-tab6"></div>\n                    <div role="tabpanel" class="tab-pane" id="event-form-tab7"></div>\n                    <div role="tabpanel" class="tab-pane" id="event-form-tab8"></div>\n                    <div role="tabpanel" class="tab-pane" id="document-form-tab"></div>\n                    <div role="tabpanel" class="tab-pane" id="billing-form-tab"></div>\n                    <div role="tabpanel" class="tab-pane" id="letters-tab"></div>\n                </div><!-- End of tab content -->\n                <div class="form-group m-bottom-5">\n                    <div class="col-sm-2 p-top-10" rv-unless="model:isCorrupt">\n                        <div>\n                            <button id="save-event" class="btn-casefriend btn-lg">Save Event</button>\n                        </div>\n                    </div>\n                    <div class="col-sm-3 p-top-10" rv-unless="model:isCorrupt">\n                        <div>\n                            <button id="save-event-and-create-new-event" class="btn-casefriend btn-lg">Save & Create New</button>\n                        </div>\n                        <div id=\'error-msg\' class=\'c-red\'></div>\n                    </div>\n                    <div class="col-sm-3 p-top-10 font-size-16 m-top-5" rv-unless="model.isNew">\n                        <button id="show-dependencies" class="btn btn-info" data-permission="32">Show Dependencies</button>\n                        <div id=\'error-msg\' class=\'c-red\'></div>\n                    </div>\n                    <div class="col-sm-4 p-top-10 t-align-right" rv-if="model:childID">\n                        Extended Event ID: {model:childID}\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'},this.App.Templates.filesEventTabsEventGeneral=function(a){{var b="";_.escape}return b+='<form id=\'event-general-tab-form\' data-permission="31">\n    <div class="form-group m-bottom-5">\n        <label class="col-sm-3 control-label">Event Title:</label>\n        <div class="col-sm-8">\n            <input type="text" class="form-control tst-event-title-input" name="eventTitle" rv-value="model:eventTitle">\n        </div>\n    </div>\n    <div class="form-group m-bottom-5">\n        <div class="col-sm-3 t-align-right">\n            <label class="">Milestones:</label>\n            <a id="arrow-milestone" href="javascript:void(0);">\n                <i class="tst-milestones-arrow fa fa-arrow-right milestones-inline fa-lg"></i>\n                <i class="tst-milestones-arrow fa fa-arrow-down milestones-expanded display-none fa-lg"></i>\n            </a>\n        </div>\n        <div class="col-sm-8 contro-label">\n            <div class="milestones-inline">\n				<span rv-each-row="options.colMilestones.models">\n					<span rv-if="row:selected">\n					{row:name} &nbsp;\n					</span>\n				</span>\n            </div>\n\n            <div class="milestones-expanded display-none">\n                <table>\n                    <thead>\n                    <tr>\n                        <td class="p-right-10 font-bold">Check</td>\n                        <td class="p-right-10 font-bold">Milestone</td>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    <tr rv-each-row="options.colMilestones.models">\n                        <td>\n                            <input type="checkbox" class="milestone" rv-checked=\'row:selected\'/>\n                        </td>\n                        <td>\n                            {row:name}\n                        </td>\n                    </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    </div>\n    <div class="form-group m-bottom-5">\n        <label class="col-sm-3 control-label"> <i class="fa fa-asterisk c-red font-size-10"></i> Event Date:</label>\n        <div class="col-sm-8">\n            <input type="text" class="form-control datepicker" default-today name="eventDate" placeholder="yyyy-mm-dd" rv-value="model:eventDate" required>\n        </div>\n    </div>\n    <div class="form-group m-bottom-5">\n        <label class="col-sm-3 control-label"> Short Note:</label>\n        <div class="col-sm-8">\n            <textarea class="form-control" rows="2" name="shortNote" rv-value="model:shortNote"></textarea>\n        </div>\n    </div>\n    <div class="form-group m-bottom-5">\n        <label class="col-sm-3 control-label"> Long Note:</label>\n        <div class="col-sm-8">\n            <textarea class="form-control" rows="15" name="longNote" rv-value="model:longNote"></textarea>\n        </div>\n    </div>\n    <div class="form-group m-bottom-5">\n        <label class="col-sm-3 control-label"> Important:</label>\n        <div class="col-sm-8">\n            <input type="checkbox" name="important" class="m-top-i-10" rv-checked="model:important">\n        </div>\n    </div>\n    <div class="form-group m-bottom-5">\n        <label class="col-sm-3 control-label">Read:</label>\n        <div class="col-sm-8">\n            <input type="checkbox" name="read" class="m-top-i-10" rv-checked="model:read">\n        </div>\n    </div>\n\n    <fieldset class="m-top-20">\n        <div class="table-responsive m-bottom-5">\n            <table class="table">\n                <caption  class="font-size-16 p-bottom-10">\n                    <i class="fa fa-exclamation-triangle p-right-10 text-danger" aria-hidden="true"></i>Calendar Reminders associated to this event ({colAlerts.length})\n                    <a id="arrow-alerts" href="javascript:void(0);" class="p-left-10">\n                        <i class="tst-alerts-arrow fa fa-arrow-right alerts-inline display-none fa-lg"></i>\n                        <i id=\'alerts-arrow-down\' class="tst-alerts-arrow fa fa-arrow-down alerts-expanded  fa-lg"></i>\n                    </a>\n                    <a class="pull-right p-right-75" href="javascript:void(0);" id="new-alert"><i class="glyphicon glyphicon-plus"></i> Add New</a>\n                </caption>\n                <thead class="alerts-expanded ">\n                <tr class="success">\n                    <th class="">Description</th>\n                    <th class="">Date</th>\n                    <th>Time</th>\n                    <th class="">End Date</th>\n                    <th>End Time</th>\n                    <th class="">Alert Prior</th>\n                    <th class="">Users</th>\n\n                </tr>\n                </thead>\n                <tbody class="alerts-expanded ">\n                <tr rv-each-row=\'colAlerts.models\' class="cursor-pointer alert-row" rv-data-alert-id="row:alert_id">\n                    <td>\n                        <div>{row:description}</div>\n                    </td>\n                    <td>\n                        <div>{row:date}</div>\n                    </td>\n                    <td>\n                        <div>{row:time}</div>\n                    </td>\n                    <td>\n                        <div>{row:end_date}</div>\n                    </td>\n                    <td>\n                        <div>{row:end_time}</div>\n                    </td>\n                    <td>\n                        <div>{row:notificationQuantity} {row:notificationUnit}</div>\n                    </td>\n                    <td>\n                        <ul>\n                            <li rv-each-user="row:colUsers">\n                                {user.typeaheadResult}\n                            </li>\n                        </ul>\n\n                    </td>\n                </tr>\n                <tr rv-unless=\'colAlerts.length\'>\n                    <td colspan="3" class="no-data">\n                        <strong>No alerts created for this event.</strong>\n                    </td>\n                </tr>\n                </tbody>\n            </table>\n        </div>\n    </fieldset>\n\n\n\n\n</form>\n'},this.App.Templates.filesEventTabsEventWcCaseBodyPart=function(a){{var b="";_.escape}return b+='<div class="modal-header" data-permission="31">\n    <h4 class="modal-title" rv-if=\'bodyPartModel.isNew\'>Add Body Part</h4>\n    <h4 class="modal-title" rv-unless=\'bodyPartModel.isNew\'>Edit Body Part</h4>\n</div>\n<div class="modal-body">\n    <form class="form-horizontal form-bodypart" method="POST" enctype="multipart/form-data">\n        <ul class="nav nav-tabs m-top-20" role="tablist">\n            <li role="presentation" class="active"><a class="tabHeader" href="#bodyPart-first" role="tab" data-toggle="tab">First Tab</a></li>\n            <li role="presentation"><a class="tst-bodyPartCase-form-2ndTab tabHeader" href="#bodyPart-second" role="tab" data-toggle="tab">Second</a></li>\n            <li role="presentation"><a class="tst-bodyPartCase-form-3rdTab tabHeader" href="#bodyPart-third" role="tab" data-toggle="tab">Third</a></li>\n            <li role="presentation"><a class="tst-bodyPartCase-form-attachTab tabHeader" href="#bodyPart-attachments" role="tab" data-toggle="tab">Attachments</a></li>\n            <li role="presentation"><a class="tabHeader" href="#bodyPart-ps" role="tab" data-toggle="tab">P&S</a></li>\n        </ul>\n        <div class="tab-content">\n            <div role="tabpanel" class="tab-pane active" id="bodyPart-first">\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3">\n                        <i class="fa fa-asterisk c-red font-size-10"></i>\n                        Body Part:\n                    </label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="bodyPart" rv-value="bodyPartModel:bodyPart" required>\n                    </div>\n                    <div class="input-group-btn">\n                        <a href="javascript:void(0);" class="btn btn-default control-tooltip" data-help-id="fileInputBodyPartHelp">\n                            <i class="fa fa-question-circle fa-lg-circle fa-lg"></i>\n                        </a>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3">Injury Description:</label>\n                    <div class="col-sm-8">\n                        <textarea class="form-control" name="bpDescription" rv-value="bodyPartModel:bpDescription"></textarea>\n                    </div>\n                    <div class="input-group-btn">\n                        <a href="javascript:void(0);" class="btn btn-default control-tooltip" data-help-id="fileInputBodyPartDescriptionHelp">\n                            <i class="fa fa-question-circle fa-lg-circle fa-lg"></i>\n                        </a>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3">Diagnosis:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="diagnosis" rv-value="bodyPartModel:diagnosis">\n                    </div>\n                    <div class="input-group-btn">\n                        <a href="javascript:void(0);" class="btn btn-default control-tooltip" data-help-id="fileInputBodyPartDiagnosisHelp">\n                            <i class="fa fa-question-circle fa-lg-circle fa-lg"></i>\n                        </a>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3">Subjective</label>\n                    <div class="col-sm-8">\n                        <textarea class="form-control" name="subjective" rv-value="bodyPartModel:subjective"></textarea>\n                    </div>\n                    <div class="input-group-btn">\n                        <a href="javascript:void(0);" class="btn btn-default control-tooltip" data-help-id="fileInputBodyPartSubjectiveHelp">\n                            <i class="fa fa-question-circle fa-lg-circle fa-lg"></i>\n                        </a>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3">Objective</label>\n                    <div class="col-sm-8">\n                        <textarea class="form-control" name="objective" rv-value="bodyPartModel:objective"></textarea>\n                    </div>\n                    <div class="input-group-btn">\n                        <a href="javascript:void(0);" class="btn btn-default control-tooltip" data-help-id="fileInputBodyPartObjectiveHelp">\n                            <i class="fa fa-question-circle fa-lg-circle fa-lg"></i>\n                        </a>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3">Work Restrictions</label>\n                    <div class="col-sm-8">\n                        <textarea class="form-control" name="workRestrictions" rv-value="bodyPartModel:workRestrictions"></textarea>\n                    </div>\n                    <div class="input-group-btn">\n                        <a href="javascript:void(0);" class="btn btn-default control-tooltip" data-help-id="fileInputBodyPartWorkRestrictionsHelp">\n                            <i class="fa fa-question-circle fa-lg-circle fa-lg"></i>\n                        </a>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3">Accepted/Denied:</label>\n                    <div class="col-sm-8">\n                        <select class="form-control" name="bpAdmitted" rv-value="bodyPartModel:bpAdmitted">\n                            <option value="1">Accepted</option>\n                            <option value="2">Denied</option>\n                            <option value="0" selected="selected">Delayed</option>\n                            <option value="3">Dispute</option>\n                        </select>\n                    </div>\n                    <div class="input-group-btn">\n                        <a href="javascript:void(0);" class="btn btn-default control-tooltip" data-help-id="fileInputBodyPartAdmittedHelp">\n                            <i class="fa fa-question-circle fa-lg-circle fa-lg"></i>\n                        </a>\n                    </div>\n                </div>\n            </div>\n            <div role="tabpanel" class="tab-pane" id="bodyPart-second">\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3">WPI</label>\n                    <div class="col-sm-8">\n                        <textarea class="form-control" name="WPI" rv-value="bodyPartModel:WPI"></textarea>\n                    </div>\n                    <div class="input-group-btn">\n                        <a href="javascript:void(0);" class="btn btn-default control-tooltip" data-help-id="fileInputBodyPartWPIHelp">\n                            <i class="fa fa-question-circle fa-lg-circle fa-lg"></i>\n                        </a>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3">Causation</label>\n                    <div class="col-sm-8">\n                        <textarea class="form-control" name="causation" rv-value="bodyPartModel:causation"></textarea>\n                    </div>\n                    <div class="input-group-btn">\n                        <a href="javascript:void(0);" class="btn btn-default control-tooltip" data-help-id="fileInputBodyPartCausationHelp">\n                            <i class="fa fa-question-circle fa-lg-circle fa-lg"></i>\n                        </a>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3">Apportionment</label>\n                    <div class="col-sm-8">\n                        <textarea class="form-control" name="apportionment" rv-value="bodyPartModel:apportionment"></textarea>\n                    </div>\n                    <div class="input-group-btn">\n                        <a href="javascript:void(0);" class="btn btn-default control-tooltip" data-help-id="fileInputApportionmentHelp">\n                            <i class="fa fa-question-circle fa-lg-circle fa-lg"></i>\n                        </a>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3">QIW</label>\n                    <div class="col-sm-8">\n                        <textarea class="form-control" name="QIW" rv-value="bodyPartModel:QIW"></textarea>\n                    </div>\n                    <div class="input-group-btn">\n                        <a href="javascript:void(0);" class="btn btn-default control-tooltip" data-help-id="fileInputBodyPartQIWHelp">\n                            <i class="fa fa-question-circle fa-lg-circle fa-lg"></i>\n                        </a>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3">Future Medical</label>\n                    <div class="col-sm-8">\n                        <textarea class="form-control" name="futureMedical" rv-value="bodyPartModel:futureMedical"></textarea>\n                    </div>\n                    <div class="input-group-btn">\n                        <a href="javascript:void(0);" class="btn btn-default control-tooltip" data-help-id="fileInputBodyPartFutureMedicalHelp">\n                            <i class="fa fa-question-circle fa-lg-circle fa-lg"></i>\n                        </a>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3">Advisory Rating Formula</label>\n                    <div class="col-sm-8">\n                        <textarea class="form-control" name="advisoryRatingFormula" rv-value="bodyPartModel:advisoryRatingFormula"></textarea>\n                    </div>\n                    <div class="input-group-btn">\n                        <a href="javascript:void(0);" class="btn btn-default control-tooltip" data-help-id="fileInputBodyPartAdvisoryRatingFormulaHelp">\n                            <i class="fa fa-question-circle fa-lg-circle fa-lg"></i>\n                        </a>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3">Advisory Rating Value:</label>\n                    <div class="col-sm-8">\n                        <input type="number" class="form-control" name="advisoryRatingValue" rv-value="bodyPartModel:advisoryRatingValue">\n                    </div>\n                    <div class="input-group-btn">\n                        <a href="javascript:void(0);" class="btn btn-default control-tooltip" data-help-id="fileInputBodyPartAdvisoryRatingValueHelp">\n                            <i class="fa fa-question-circle fa-lg-circle fa-lg"></i>\n                        </a>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3">Advisory Rating Dollars:</label>\n                    <div class="col-sm-8">\n                        <input type="number" class="form-control" name="advisoryRatingDollars" rv-value="bodyPartModel:advisoryRatingDollars">\n                    </div>\n                    <div class="input-group-btn">\n                        <a href="javascript:void(0);" class="btn btn-default control-tooltip" data-help-id="fileInputBodyPartAdvisoryRatingDollarsHelp">\n                            <i class="fa fa-question-circle fa-lg-circle fa-lg"></i>\n                        </a>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3">Advisory Rating Notes</label>\n                    <div class="col-sm-8">\n                        <textarea class="form-control" name="advisoryRatingNotes" rv-value="bodyPartModel:advisoryRatingNotes"></textarea>\n                    </div>\n                    <div class="input-group-btn">\n                        <a href="javascript:void(0);" class="btn btn-default control-tooltip" data-help-id="fileInputBodyPartAdvisoryRatingNotesHelp">\n                            <i class="fa fa-question-circle fa-lg-circle fa-lg"></i>\n                        </a>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3">DEU Rating Formula</label>\n                    <div class="col-sm-8">\n                        <textarea class="form-control" name="DEUratingFormula" rv-value="bodyPartModel:DEUratingFormula"></textarea>\n                    </div>\n                    <div class="input-group-btn">\n                        <a href="javascript:void(0);" class="btn btn-default control-tooltip" data-help-id="fileInputBodyPartDEUratingFormulaHelp">\n                            <i class="fa fa-question-circle fa-lg-circle fa-lg"></i>\n                        </a>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3">DEU Rating Value:</label>\n                    <div class="col-sm-8">\n                        <input type="number" class="form-control" name="DEUratingValue" rv-value="bodyPartModel:DEUratingValue">\n                    </div>\n                    <div class="input-group-btn">\n                        <a href="javascript:void(0);" class="btn btn-default control-tooltip" data-help-id="fileInputBodyPartDEUratingValueHelp">\n                            <i class="fa fa-question-circle fa-lg-circle fa-lg"></i>\n                        </a>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3">DEU Rating Dollars:</label>\n                    <div class="col-sm-8">\n                        <input type="number" class="form-control" name="DEUratingDollars" rv-value="bodyPartModel:DEUratingDollars">\n                    </div>\n                    <div class="input-group-btn">\n                        <a href="javascript:void(0);" class="btn btn-default control-tooltip" data-help-id="fileInputBodyPartDEUratingDollarsHelp">\n                            <i class="fa fa-question-circle fa-lg-circle fa-lg"></i>\n                        </a>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3">DEU Rating Notes:</label>\n                    <div class="col-sm-8">\n                        <textarea class="form-control" name="DEUratingNotes" rv-value="bodyPartModel:DEUratingNotes"></textarea>\n                    </div>\n                    <div class="input-group-btn">\n                        <a href="javascript:void(0);" class="btn btn-default control-tooltip" data-help-id="fileInputBodyPartDEUratingNotesHelp">\n                            <i class="fa fa-question-circle fa-lg-circle fa-lg"></i>\n                        </a>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3">Admitted:</label>\n                    <div class="col-sm-8">\n                        <input type="checkbox" class="tst-bodyPart-caseForm-checkbox form-control" name="admitted" rv-checked="bodyPartModel:admitted">\n                    </div>\n                    <div class="input-group-btn">\n                        <a href="javascript:void(0);" class="btn btn-default control-tooltip" data-help-id="fileInputBodyPartAdmittedHelp">\n                            <i class="fa fa-question-circle fa-lg-circle fa-lg"></i>\n                        </a>\n                    </div>\n                </div>\n            </div>\n            <div role="tabpanel" class="tab-pane" id="bodyPart-third">\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3">Accommodation:</label>\n                    <div class="col-sm-8">\n                        <textarea class="form-control" name="accommodation" rv-value="bodyPartModel:accommodation"></textarea>\n                    </div>\n                    <div class="input-group-btn">\n                        <a href="javascript:void(0);" class="btn btn-default control-tooltip" data-help-id="fileInputBodyPartAccommodationHelp">\n                            <i class="fa fa-question-circle fa-lg-circle fa-lg"></i>\n                        </a>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3">Why Denied:</label>\n                    <div class="col-sm-8">\n                        <textarea class="form-control" name="whyDenied" rv-value="bodyPartModel:whyDenied"></textarea>\n                    </div>\n                    <div class="input-group-btn">\n                        <a href="javascript:void(0);" class="btn btn-default control-tooltip" data-help-id="fileInputBodyPartWhyDeniedHelp">\n                            <i class="fa fa-question-circle fa-lg-circle fa-lg"></i>\n                        </a>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3">Denial Status:</label>\n                    <div class="col-sm-8">\n                        <textarea class="form-control" name="denialStatus" rv-value="bodyPartModel:denialStatus"></textarea>\n                    </div>\n                    <div class="input-group-btn">\n                        <a href="javascript:void(0);" class="btn btn-default control-tooltip" data-help-id="fileInputBodyPartDenialStatusHelp">\n                            <i class="fa fa-question-circle fa-lg-circle fa-lg"></i>\n                        </a>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3">Recommended Treatment:</label>\n                    <div class="col-sm-8">\n                        <textarea class="form-control" name="recommendedTreatment" rv-value="bodyPartModel:recommendedTreatment"></textarea>\n                    </div>\n                    <div class="input-group-btn">\n                        <a href="javascript:void(0);" class="btn btn-default control-tooltip" data-help-id="fileInputBodyPartRecommendedTreatmentHelp">\n                            <i class="fa fa-question-circle fa-lg-circle fa-lg"></i>\n                        </a>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3">Recommended Tests:</label>\n                    <div class="col-sm-8">\n                        <textarea class="form-control" name="recommendedTests" rv-value="bodyPartModel:recommendedTests"></textarea>\n                    </div>\n                    <div class="input-group-btn">\n                        <a href="javascript:void(0);" class="btn btn-default control-tooltip" data-help-id="fileInputBodyPartRecommendedTestsHelp">\n                            <i class="fa fa-question-circle fa-lg-circle fa-lg"></i>\n                        </a>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3">Summary:</label>\n                    <div class="col-sm-8">\n                        <textarea class="form-control" name="summary" rv-value="bodyPartModel:summary"></textarea>\n                    </div>\n                    <div class="input-group-btn">\n                        <a href="javascript:void(0);" class="btn btn-default control-tooltip" data-help-id="fileInputBodyPartSummaryHelp">\n                            <i class="fa fa-question-circle fa-lg-circle fa-lg"></i>\n                        </a>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3">Notes:</label>\n                    <div class="col-sm-8">\n                        <textarea class="form-control" name="notes" rv-value="bodyPartModel:notes"></textarea>\n                    </div>\n                    <div class="input-group-btn">\n                        <a href="javascript:void(0);" class="btn btn-default control-tooltip" data-help-id="fileInputBodyPartNotesHelp">\n                            <i class="fa fa-question-circle fa-lg-circle fa-lg"></i>\n                        </a>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3">Accepted/Denied Notes:</label>\n                    <div class="col-sm-8">\n                        <textarea class="form-control" name="bpADnotes" rv-value="bodyPartModel:bpADnotes"></textarea>\n                    </div>\n                    <div class="input-group-btn">\n                        <a href="javascript:void(0);" class="btn btn-default control-tooltip" data-help-id="fileInputBodyPartADnotesHelp">\n                            <i class="fa fa-question-circle fa-lg-circle fa-lg"></i>\n                        </a>\n                    </div>\n                </div>\n            </div>\n            <div role="tabpanel" class="tab-pane" id="bodyPart-attachments">\n                <a class="tst-bodyPartCase-addDocuments-btn btn btn-default btnBrowserDocument" href="javascript:void(0);"><i class="glyphicon glyphicon-plus"></i> Add Documents</a>\n                <fieldset class="m-top-20">\n                    <legend>Documents Assigned ({options.colDocuments.length})</legend>\n                    <div class="table-responsive panel-documents m-bottom-5">\n                        <table class="table">\n                            <thead>\n                            <tr class="b-blue-light c-white">\n                                <th>Edit</th>\n                                <th>Remove</th>\n                                <th class="width-200">\n                                    Document Title\n                                </th>\n                                <th>\n                                    Document Name\n                                </th>\n                                <th>Designations</th>\n                            </tr>\n                            </thead>\n                            <tbody>\n                            <tr rv-each-row=\'options.colDocuments.models\' rv-class-display-none=\'isRemoved < row:removed\'>\n                                <td>\n                                    <a href="javascript:void(0);" class="btnEditDocument" rv-data-document-id=\'row:documentID\'>\n                                        <i class="fa fa-pencil"></i>\n                                    </a>\n                                </td>\n                                <td>\n                                    <a href="javascript:void(0);" class="btnRemoveDocument" rv-data-document-id=\'row:documentID\'>\n                                        <i class="fa fa-remove"></i>\n                                    </a>\n                                </td>\n                                <td class="width-200">\n                                    <a rv-title=\'row:documentTitle\' rv-href="getDocumentUrl < row" target="_blank">{row:documentTitle}</a>\n                                </td>\n                                <td>\n                                    <a rv-title=\'row:documentName\' rv-href="getDocumentUrl < row" target="_blank">{row:documentName}</a>\n                                </td>\n                                <td>\n                                    {getDesignations < row:designations}\n                                </td>\n                            </tr>\n                            <tr rv-unless=\'options.colDocuments.length\'>\n                                <td colspan="18" class="no-data">\n                                    <strong>No data to display</strong>\n                                </td>\n                            </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                </fieldset>\n            </div>\n            <div role="tabpanel" class="tab-pane" id="bodyPart-ps">\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3">P&S Date:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control datepicker" name="bpPnSdate" rv-value="bodyPartModel:bpPnSdate" placeholder="yyyy-mm-dd">\n                    </div>\n                    <div class="input-group-btn">\n                        <a href="javascript:void(0);" class="btn btn-default control-tooltip" data-help-id="fileInputBodyPartPnSdateHelp">\n                            <i class="fa fa-question-circle fa-lg-circle fa-lg"></i>\n                        </a>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3">Select P&S Record:</label>\n                    <div class="col-sm-8">\n                        <input class="form-control typeahead select_Medicals search-files" type="text" name="select_Medicals">\n                        <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="select_Medicals"><i class="fa fa-chevron-down"></i></a>\n                    </div>\n                    <div class="input-group-btn">\n                        <a href="javascript:void(0);" class="btn btn-default control-tooltip" data-help-id="fileInputBodyPartSelectMedicalsHelp">\n                            <i class="fa fa-question-circle fa-lg-circle fa-lg"></i>\n                        </a>\n                    </div>\n                    <div class="clearfix"></div>\n                    <div class="col-sm-8 col-sm-offset-3">\n                        <div class="panel panel-default m-top-5 m-bottom-10">\n                            <table class=\'table\'>\n                                <thead>\n                                <tr>\n                                    <th>Doctor</th>\n                                    <th>Remove</th>\n                                    <th>Is PnS Record</th>\n                                </tr>\n                                </thead>\n                                <tbody>\n                                <tr rv-each-medical="options.colMedicalsByBodyParts.models ">\n                                    <td>\n                                        {medical:doctorName} {medical:appointDate}\n                                    </td>\n                                    <td>\n                                        <a rv-on-click="removeMedical < medical:medicalID" href="javascript:void(0);">\n                                            <i class="fa fa-remove"></i>\n                                        </a>\n                                    </td>\n                                    <td><input type="checkbox" rv-checked="medical:isPnSRecord" name=\'isPnSRecord\'/></td>\n                                </tr>\n                                <tr rv-hide="options.colMedicalsByBodyParts.length">\n                                    <td colspan="3"><strong>No data to display</strong></td>\n                                </tr>\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div><!-- End of tab content -->\n    </form>\n</div>\n<div class="modal-footer">\n    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n    <button type="button" class="tst-addBodyPart-save-btn btn btn-primary" id="doSaveBodyPart">Save</button>\n    <button type="button" rv-unless="bodyPartModel.isNew" class="btn btn-danger" id=\'delete-body-part\' rv-data-bodyPartID=\'bodyPartModel:bodyPartID\' data-permission="82">Delete Body Part</button>\n</div>\n';

},this.App.Templates.filesEventTabsEventWcCaseFirst=function(a){{var b="";_.escape}return b+='<form id="case-form-first" class="form-horizontal" data-permission="31">\n    <div class="form-group m-bottom-5">\n        <label class="col-sm-3 control-label">File Name:</label>\n        <div class="col-sm-8">\n            <input type="text" class="form-control" name="nameCase" rv-value="options.fileModel:fileTitle" readonly="readonly">\n        </div>\n    </div>\n    <div class="form-group m-bottom-5">\n        <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> ADJ WCCase #:</label>\n        <div class="col-sm-5">\n            <input type="text" class="form-control" name="ADJid" rv-value="model:ADJid" required>\n        </div>\n        <div class="col-sm-3">\n            <label>\n                <input type="checkbox" value="1" rv-checked="model:leadCase" name="leadCase">\n                Lead WC Case\n            </label>\n        </div>\n    </div>\n    <div class="form-group m-bottom-5">\n        <label class="col-sm-3 control-label">Date of Injury:</label>\n        <div class="col-sm-5">\n            <input type="text" class="form-control datepicker" placeholder="yyyy-mm-dd" name="DOI" rv-value="model:DOI">\n        </div>\n        <div class="panel-select-leadCase col-sm-3 display-none">\n            <select name="selectLeadCases" class="form-control">\n                <option value="">Select Lead WC Case</option>\n            </select>\n        </div>\n    </div>\n    <div class="form-group m-bottom-5">\n        <label class="col-sm-3 control-label">End Date of Injury:</label>\n        <div class="col-sm-5">\n            <input type="text" class="form-control datepicker" placeholder="yyyy-mm-dd" name="DOIendCT" rv-value="model:DOIendCT">\n        </div>\n        <div class="col-sm-3">\n            <span class="d-block">(Only enter if CT)</span>\n        </div>\n    </div>\n    <div class="form-group m-bottom-5">\n        <label class="col-sm-3 control-label"> Venue:</label>\n        <div class="col-sm-5">\n            <input type="text" class="typeahead form-control venue_typeahead" name="venue" rv-value="model:venueNameTypeahead">\n            <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="venue"><i class="fa fa-chevron-down"></i></a>\n        </div>\n        <div class="input-group-btn">\n            <a class="btn btn-default" id=\'venue_form_edit\' href="javascript:void(0);" data-permission="66"><i class="fa fa-pencil"></i></a>\n            <a class="btn btn-default" id=\'venue_form_new\' href="javascript:void(0);" data-permission="65"><i class="fa fa-plus"></i></a>\n            <a class="btn btn-default control-tooltip" data-help-id="fileInputVenueHelp" href="javascript:void(0);"><i class="fa fa-question-circle fa-lg-circle fa-lg"></i></a>\n        </div>\n    </div>\n    <div class="form-group m-bottom-5">\n        <label class="col-sm-3 font-size-15 control-label">Claim #:</label>\n        <div class="col-sm-5">\n            <input type="text" class="form-control" name="claimNumber" rv-value="model:claimNumber">\n        </div>\n    </div>\n    <div>\n        <div class="m-top-10 panel panel-default">\n            <div class="panel-heading">Injuries</div>\n            <div class="injury-max-size">\n                <table class="table table-bordered">\n                    <tbody>\n                    <tr rv-each-injury="options.colBodyParts.models < options.colBodyParts.models">\n                        <td>\n                            <span>Body Part:</span> <a href="javascript:void(0);" class="btn-editBodyPart" rv-data-id="injury:bodyPartID" rv-data-cid="injury.cid">{injury:bodyPart}</a>\n                        </td>\n                    </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n        <a href="javascript:void(0);" class="btn btn-default btn-addBodyPart"><i class="fa fa-plus"></i> Add Body Part</a>\n    </div>\n\n    <span class="c-red msg-form pull-left"></span>\n</form>\n'},this.App.Templates.filesEventTabsEventWcDepoFirst=function(a){{var b="";_.escape}return b+='<form id="depo-form-first" data-permission="31">\n    <div class="form-horizontal">\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-2 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Depo Date:</label>\n            <div class="col-sm-8">\n                <input type="text" class="form-control datepicker" name="depoDate" placeholder="yyyy-mm-dd" rv-value="model:depoDate" required>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-2 control-label">Depo Schedule Time:</label>\n            <div class="col-sm-8  display-table bootstrap-timepicker p-right-15">\n                <input type="text" class="form-control input-small timepicker" name=\'depoSchedTime\' rv-value="model:depoSchedTime">\n                <span class="input-group-addon"><i class="glyphicon glyphicon-time"></i></span>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-2 control-label">Deponent Name:</label>\n            <div class="col-sm-8">\n                <input type="text" class="form-control" rv-value="model:deponentName" name="deponentName">\n            </div>\n        </div>\n        <div class="form-group m-bottom-5 t-align-left">\n            <label class="col-sm-2 control-label"><i class="fa fa-asterisk c-red font-size-10"></i>Depo of:</label>\n            <div class="col-sm-2">\n                <select rv-value="model:depoOf" name="depoOf" class="form-control" required>\n                    <option value="Applicant">Applicant</option>\n                    <option value="Doctor">Doctor</option>\n                    <option value="Witness">Witness</option>\n                </select>\n            </div>\n            <label class="col-sm-1 control-label"><i class="fa fa-asterisk c-red font-size-10"></i>By:</label>\n            <div class="col-sm-2">\n                <select rv-value="model:depoBy" name="depoBy" class="form-control" required>\n                    <option value="DA">DA</option>\n                    <option value="AA">AA</option>\n                    <option value="Co-Def">Co-Def</option>\n                    <option value="Other">Other</option>\n                </select>\n            </div>\n            <label class="col-sm-1 control-label"><i class="fa fa-asterisk c-red font-size-10"></i>Status:</label>\n            <div class="col-sm-2">\n                <select rv-value="model:depoStatus" name="depoStatus" class="form-control" required>\n                    <option value="Scheduled">Scheduled</option>\n                    <option value="COMPL">COMPL</option>\n                    <option value="CONT">CONT</option>\n                    <option value="Cancel">Cancel</option>\n                </select>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-2 control-label">Depo Location:</label>\n            <div class="col-sm-8">\n                <input type="text" class="form-control" name="depoLocation" rv-value="model:depoLocation">\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-2 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Depo Address:</label>\n            <div class="col-sm-8">\n                <input type="text" class="form-control" rv-value="model:depoAddress" name="depoAddress" required>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-2 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Depo City:</label>\n            <div class="col-sm-8">\n                <input type="text" class="form-control" rv-value="model:depoCity" name="depoCity" required>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-2 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Depo State:</label>\n            <div class="col-sm-8">\n                <select class=\'form-control state-helper\' rv-value="model:depoState" name=\'depoState\' required></select>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-2 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Depo Location Zip:</label>\n            <div class="col-sm-8">\n                <input type="text" class="form-control" rv-value="model:depoZip" name="depoZip" required>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-2 control-label"> Depo Phone:</label>\n            <div class="col-sm-8">\n                <input type="text" class="form-control phone-mask" rv-value="model:depoPhone" name="depoPhone"/>\n            </div>\n        </div>\n    </div>\n</form>\n'},this.App.Templates.filesEventTabsEventWcDepoSecond=function(a){{var b="";_.escape}return b+='<form id="depo-form-second" data-permission="31">\n    <div class="form-horizontal">\n\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Depo Start Time:</label>\n            <div class="col-sm-3  display-table bootstrap-timepicker p-right-15">\n                <input type="text" class="form-control input-small timepicker" name=\'depoStartTime\' rv-value="model:depoStartTime">\n                <span class="input-group-addon"><i class="glyphicon glyphicon-time"></i></span>\n            </div>\n            <label class="col-sm-2 control-label ">Depo End Time:</label>\n            <div class="col-sm-3  display-table bootstrap-timepicker p-right-15">\n                <input type="text" class="form-control input-small timepicker" name=\'depoEndTime\' rv-value="model:depoEndTime">\n                <span class="input-group-addon"><i class="glyphicon glyphicon-time"></i></span>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Break Minutes:</label>\n            <div class="col-sm-3">\n                <input type="text" class="form-control" rv-value="model:breakMinutes" name="breakMinutes"/>\n            </div>\n            <label class="col-sm-2 control-label">Testimony Minutes:</label>\n            <div class="col-sm-3">\n                <input type="text" class="form-control" rv-value="model:testimonyMinutes" name="testimonyMinutes"/>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Depo Prep Minutes:</label>\n            <div class="col-sm-3">\n                <input type="text" class="form-control" rows="5" rv-value="model:depoPrepMinutes" name="depoPrepMinutes"/>\n            </div>\n            <label class="col-sm-2 control-label">AA Travel Minutes:</label>\n            <div class="col-sm-3">\n                <input type="text" class="form-control" rows="5" rv-value="model:AAtravelMinutes" name="AAtravelMinutes"/>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Total AA minutes:</label>\n            <div class="col-sm-8">\n                <input type="text" class="form-control" rows="5" rv-value="model:totalAAminutes" name="totalAAminutes"/>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Advised 5710 Fees:</label>\n            <div class="col-sm-8">\n                <input type="text" class="form-control" rows="5" rv-value="model:advised5710Fees" name="advised5710Fees"/>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">AA 5710 rate:</label>\n            <div class="col-sm-8">\n                <input type="text" class="form-control" rows="5" rv-value="model:AA5710rate" name="AA5710rate"/>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Deponent Mileage:</label>\n            <div class="col-sm-8">\n                <input type="text" class="form-control" rows="5" rv-value="model:deponentMileage" name="deponentMileage"/>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Mileage Rate:</label>\n            <div class="col-sm-8">\n                <input type="text" class="form-control" rows="5" rv-value="model:mileageRate" name="mileageRate"/>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Advised Mileage Fees</label>\n            <div class="col-sm-8">\n                <input type="text" class="form-control" rows="5" rv-value="model:advisedMileageFees" name="advisedMileageFees"/>\n            </div>\n        </div>\n    </div>\n</form>'},this.App.Templates.filesEventTabsEventWcDepoThird=function(a){{var b="";_.escape}return b+='<form id="depo-form-third" data-permission="31">\n    <div class="form-horizontal">\n\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Continue Date:</label>\n            <div class="col-sm-8">\n                <input type="text" class="form-control datepicker" placeholder="yyyy-mm-dd" rows="5" rv-value="model:continueDate" name="continueDate"/>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Subpoenas:</label>\n            <div class="col-sm-8">\n                <textarea class="tst-depoSubpoenas-box form-control" rows="5" rv-value="model:subpoenas"></textarea>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Issues:</label>\n            <div class="col-sm-8">\n                <input class="form-control" rows="5" rv-value="model:issues" name="issues"/>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Summary:</label>\n            <div class="col-sm-8">\n                <textarea class="tst-depoSummary-box form-control" rows="5" rv-value="model:shortSummary"></textarea>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Signing Attorney:</label>\n            <div class="col-sm-8">\n                <input type="text" rv-value="model:depoSigningAttorneyTypeahead" class="typeahead form-control search-files signingAttorney_typeahead" name="signingAttorneyID" required>\n                <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="signingAttorneyID"><i class="fa fa-chevron-down"></i></a>\n            </div>\n        </div>\n    </div>\n</form>'},this.App.Templates.filesEventTabsEventWcHearingFirst=function(a){{var b="";_.escape}return b+='<form id="hearing-form-first" data-permission="31">\n    <div class="form-horizontal">\n        <div class="form-group m-bottom-5">\n\n            <label class="col-sm-3 control-label">Status:</label>\n            <div class="col-sm-6">\n                <select name="hearingStatus" rv-value="model:hearingStatus" class="form-control">\n                    <option value="Settled">Settled</option>\n                    <option value="Continued">Continued</option>\n                    <option value="OTOC">OTOC</option>\n                    <option value="Trial">Trial</option>\n                    <option value="Hearing">Hearing</option>\n                    <option value="Other">Other</option>\n                    <option value="Scheduled">Scheduled</option>\n                </select>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Hearing Date:</label>\n            <div class="col-sm-8">\n                <input type="text" class="form-control datepicker" name="hearingDate" placeholder="yyyy-mm-dd" rv-value="model:hearingDate" required>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Start Time:</label>\n            <div class="col-sm-8  display-table bootstrap-timepicker p-right-15">\n                <input type="text" class="form-control input-small timepicker" name=\'startTime\' rv-value="model:startTime">\n                <span class="input-group-addon"><i class="glyphicon glyphicon-time"></i></span>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">End Time:</label>\n            <div class="col-sm-8  display-table bootstrap-timepicker p-right-15">\n                <input type="text" class="form-control input-small timepicker" name=\'endTime\' rv-value="model:endTime">\n                <span class="input-group-addon"><i class="glyphicon glyphicon-time"></i></span>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Set by:</label>\n            <div class="col-sm-6">\n                <select name="setBy" rv-value="model:setBy" class="form-control">\n                    <option value="DA">DA</option>\n                    <option value="AA">AA</option>\n                    <option value="Client">Client</option>\n                    <option value="WCAB">WCAB</option>\n                    <option value="Co-Def">Co-Def</option>\n                    <option value="LC">LC</option>\n                </select>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Venue:</label>\n            <div class="col-sm-6">\n                <input type="text" class="typeahead form-control search-files venue_typeahead" name="venueID" rv-value="model:venueNameTypeahead" required>\n                <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="venueID"><i class="fa fa-chevron-down"></i></a>\n            </div>\n            <div class="input-group-btn col-sm-3">\n                <a class="btn btn-default" id=\'venue_form_edit\' href="javascript:void(0);"><i class="fa fa-pencil"></i></a>\n                <a class="btn btn-default control-tooltip" data-help-id="fileInputHearingVenueHelp" href="javascript:void(0);"><i class="fa fa-question-circle fa-lg"></i></a>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">WCAB judge:</label>\n            <div class="col-sm-8">\n                <input type="text" class="form-control" rv-value="model:WCABjudge" name="WCABjudge">\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Batch ID:</label>\n            <div class="col-sm-8">\n                <input type="text" class="form-control" rv-value="model:batchID" name="batchID" maxlength="20" size="20">\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Issues:</label>\n            <div class="col-sm-8">\n                <input type="text" class="form-control" rv-value="model:issues" name="issues">\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Summary:</label>\n            <div class="col-sm-8">\n                <textarea class="tst-hearingSummary-box form-control" rv-value="model:shortSummary" rows="5"></textarea>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Signing Attorney:</label>\n            <div class="col-sm-8">\n                <input type="text" class="typeahead form-control search-files signingAttorney_typeahead" name="signingAttorneyID" rv-value="model:hearingSigningAttorneyTypeahead" required>\n                <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="signingAttorneyID"><i class="fa fa-chevron-down"></i></a>\n            </div>\n        </div>\n    </div>\n</form>'},this.App.Templates.filesEventTabsEventWcLienFifth=function(a){{var b="";_.escape}return b+='<!-- Lien Objection -->\n<div class="panel panel-casefreind" data-permission="31">\n    <div class="panel-heading" role="tab">\n        <h4 class="panel-title">\n            <a class="accordion-toggle font-bold" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseLienObjection" aria-expanded="false" aria-controls="collapseLienObjection">\n                Lien Objection (<span>{liendObjections.length}</span>)\n            </a>\n        </h4>\n    </div>\n    <div class="panel-body collapse in" id="collapseLienObjection">\n        <fieldset rv-if="liendObjections.length">\n            <table class="table liens-panels-max-size">\n                <thead>\n                <tr>\n                    <th>Date</th>\n                    <th>Objection Note</th>\n                    <th>Document</th>\n                    <th>Actions</th>\n                </tr>\n                </thead>\n                <tbody>\n                <tr rv-each-row="liendObjections.models">\n                    <td>{row:objectionDate}</td>\n                    <td>{row:objectionNote}</td>\n                    <td>\n                        <a rv-show="row:documentID < :documentID" target="_blank" rv-href="getDocumentUrl < row:documentID">\n                            <i class="fa fa-paperclip fa-lg t-align-center"></i>\n                        </a>\n                    </td>\n                    <td>\n                        <a class=\'m-right-5 lien-objection-edit\' href="javascript:void(0);" rv-data-model=\'row.cid\'>\n                            <i class="tst-lienObjection-pencil fa fa-pencil"></i>\n                        </a>\n                        <a class=\'m-right-5 lien-objection-delete\' href="javascript:void(0);" rv-data-model=\'row.cid\'>\n                            <i class="c-red t-align-right fa fa-times"></i>\n                        </a>\n                    </td>\n                </tr>\n                </tbody>\n            </table>\n        </fieldset>\n        <div class="form-group m-bottom-5" rv-unless="liendObjections.length">\n            <div class="col-sm-4 p-top-10">\n                <h1><STRONG>NONE</STRONG></h1>\n            </div>\n        </div>\n\n        <div class="form-group m-bottom-5">\n            <div class="col-sm-4 p-top-10">\n                <button class="btn-casefriend btn-lg" id="add-lien-objection">Add Lien Objection</button>\n            </div>\n        </div>\n    </div>\n</div>'},this.App.Templates.filesEventTabsEventWcLienFirst=function(a){{var b="";_.escape}return b+='<form id="lien-form-first" data-permission="31">\n    <div class="form-horizontal">\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Claimant Name:</label>\n            <div class="col-sm-7">\n                <input type="text" class="typeahead form-control search-files lien_claimant_typeahead" rv-value="model:claimantNameTypeahead" name="lienClaimantID" required>\n            </div>\n            <div class="input-group-btn">\n                <a class="btn btn-default" id=\'lien_claimant_form_edit\' href="javascript:void(0);" data-permission="72"><i class="fa fa-pencil"></i></a>\n                <a class="btn btn-default" id=\'lien_claimant_form_new\' href="javascript:void(0);" data-permission="71"><i class="tst-addLienClaimant-btn fa fa-plus"></i></a>\n                <a class="btn btn-default control-tooltip" data-help-id="fileInputLienClaimantHelp" href="javascript:void(0);"><i class="fa fa-question-circle fa-lg"></i></a>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Contact First Name:</label>\n            <div class="col-sm-8">\n                <div class="p-top-7">{lienClaimantModel:contactFirstName}</div>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Contact Middle Name:</label>\n            <div class="col-sm-8">\n                <div class="p-top-7">{lienClaimantModel:contactMiddleName}</div>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Contact Last Name:</label>\n            <div class="col-sm-8">\n                <div class="p-top-7">{lienClaimantModel:contactLastName}</div>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Contact Email:</label>\n            <div class="col-sm-8">\n                <div class="p-top-7">{lienClaimantModel:contactEmail}</div>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Contact Office Phone:</label>\n            <div class="col-sm-8">\n                <div class="p-top-7">{lienClaimantModel:contactOfficePhone}</div>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Contact Cell Phone:</label>\n            <div class="col-sm-8">\n                <div class="p-top-7">{lienClaimantModel:contactCellPhone}</div>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Fax:</label>\n            <div class="col-sm-8">\n                <div class="p-top-7">{lienClaimantModel:claimantFax}</div>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Claimant Office Phone:</label>\n            <div class="col-sm-8">\n                <div class="p-top-7">{lienClaimantModel:claimantOfficePhone}</div>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Tax ID:</label>\n            <div class="col-sm-8">\n                <div class="p-top-7">{lienClaimantModel:taxID}</div>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <h3 class="font-bold sub-header-forms p-bottom-10 col-sm-3 col-sm-offset-3">Mailing</h3>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Address:</label>\n            <div class="col-sm-8">\n                <div class="p-top-7">{lienClaimantModel:mailingAddress}</div>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">City:</label>\n            <div class="col-sm-8">\n                <div class="p-top-7">{lienClaimantModel:mailingCity}</div>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">State:</label>\n            <div class="col-sm-8">\n                <div class="p-top-7">{lienClaimantModel:mailingState}</div>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Zip:</label>\n            <div class="col-sm-8">\n                <div class="p-top-7">{lienClaimantModel:mailingZip}</div>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Toll Free Phone:</label>\n            <div class="col-sm-8">\n                <div class="p-top-7">{lienClaimantModel:tollFreePhone}</div>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <h3 class="font-bold sub-header-forms p-bottom-10 col-sm-3 col-sm-offset-3">Physical</h3>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Address:</label>\n            <div class="col-sm-8">\n                <div class="p-top-7">{lienClaimantModel:physicalAddress}</div>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">City:</label>\n            <div class="col-sm-8">\n                <div class="p-top-7">{lienClaimantModel:physicalCity}</div>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">State:</label>\n            <div class="col-sm-8">\n                <div class="p-top-7">{lienClaimantModel:physicalState}</div>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Zip:</label>\n            <div class="col-sm-8">\n                <div class="p-top-7">{lienClaimantModel:physicalZip}</div>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Services Provided:</label>\n            <div class="col-sm-8">\n                <textarea class="tst-claimantServices-box form-control" rows="5" rv-value="model:lienServices"></textarea>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label"> Lien of Record:</label>\n            <div class="col-sm-8">\n                <input type="checkbox" name="lienOfRecord" rv-checked="model:lienOfRecord">\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label"> ADJ Picker:</label>\n            <div class="col-sm-8">\n                <select name="lien-clainmant-case-id" rv-value="model:caseID" class="tst-claimantADJpicker-select form-control">\n                    <option rv-value="row:caseID" rv-each-row="options.adjPickerCol.models">{row:ADJid}</option>\n                </select>\n            </div>\n        </div>\n\n    </div>\n</form>'},this.App.Templates.filesEventTabsEventWcLienForth=function(a){{var b="";_.escape}return b+='<form id="lien-form-forth" data-permission="31">\n    <div class="form-horizontal">\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Authority (%):</label>\n            <div class="col-sm-8">\n                <input type="number" class="form-control" rv-value="model:authorityPer" name="authorityPer">\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Authority ($):</label>\n            <div class="col-sm-8">\n                <input type="number" class="form-control" rv-value="model:authorityDol" name="authorityDol">\n            </div>\n        </div>\n    </div>\n</form>\n\n<!-- Lien Offers -->\n<div class="panel panel-casefreind" data-permission="31">\n    <div class="panel-heading" role="tab">\n        <h4 class="panel-title">\n            <a class="accordion-toggle font-bold" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseLienOffer" aria-expanded="false" aria-controls="collapseLienOffer">\n                Lien Offers (<span>{liendOffers.length}</span>)\n            </a>\n        </h4>\n    </div>\n    <div class="panel-body collapse in" id="collapseLienOffer">\n        <fieldset rv-if="liendOffers.length">\n            <table class="table">\n                <thead>\n                <tr>\n                    <th>Date</th>\n                    <th>Offer Name</th>\n                    <th>Amount</th>\n                    <th>Actions</th>\n                </tr>\n                </thead>\n                <tbody>\n                <tr rv-each-row="liendOffers.models">\n                    <td>{row:offerDate}</td>\n                    <td>{row:offerName}</td>\n                    <td>${row:offerAmount | currency}</td>\n                    <td>\n                        <a class=\'m-right-5 lien-offer-edit\' href="javascript:void(0);" rv-data-model=\'row.cid\'>\n                            <i class="tst-lienOffer-pencil fa fa-pencil"></i>\n                        </a>\n                        <a class=\'m-right-5 lien-offer-delete\' href="javascript:void(0);" rv-data-model=\'row.cid\'>\n                            <i class="c-red t-align-right fa fa-times"></i>\n                        </a>\n                    </td>\n                </tr>\n                </tbody>\n            </table>\n        </fieldset>\n        <div class="form-group m-bottom-5" rv-unless="liendOffers.length">\n            <div class="col-sm-4 p-top-10">\n                <h1><STRONG>NONE</STRONG></h1>\n            </div>\n        </div>\n\n        <div class="form-group m-bottom-5">\n            <div class="col-sm-4 p-top-10">\n                <button class="tst-addLienOffer-btn btn-casefriend btn-lg" id="add-lien-offer">Add Lien Offer</button>\n            </div>\n        </div>\n    </div>\n</div>\n\n<!-- Lien Demands -->\n<div class="panel panel-casefreind" data-permission="31">\n    <div class="panel-heading" role="tab">\n        <h4 class="panel-title">\n            <a class="accordion-toggle font-bold" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseLienDemand" aria-expanded="false" aria-controls="collapseLienDemand">\n                Lien Demands (<span>{liendDemands.length}</span>)\n            </a>\n        </h4>\n    </div>\n    <div class="panel-body collapse in" id="collapseLienDemand">\n        <fieldset rv-if="liendDemands.length">\n            <table class="table liens-panels-max-size">\n                <thead>\n                <tr>\n                    <th>Date</th>\n                    <th>Demand Name</th>\n                    <th>Amount</th>\n                    <th>Actions</th>\n                </tr>\n                </thead>\n                <tbody>\n                <tr rv-each-row="liendDemands.models">\n                    <td>{row:demandDate}</td>\n                    <td>{row:demandName}</td>\n                    <td>${row:demandAmount}</td>\n                    <td>\n                        <a class=\'m-right-5 lien-demand-edit\' href="javascript:void(0);" rv-data-model=\'row.cid\'>\n                            <i class="tst-lienDemand-pencil fa fa-pencil"></i>\n                        </a>\n                        <a class=\'m-right-5 lien-demand-delete\' href="javascript:void(0);" rv-data-model=\'row.cid\'>\n                            <i class="c-red t-align-right fa fa-times"></i>\n                        </a>\n                    </td>\n                </tr>\n                </tbody>\n            </table>\n        </fieldset>\n        <div class="form-group m-bottom-5" rv-unless="liendDemands.length">\n            <div class="col-sm-4 p-top-10">\n                <h1><STRONG>NONE</STRONG></h1>\n            </div>\n        </div>\n\n        <div class="form-group m-bottom-5">\n            <div class="col-sm-4 p-top-10">\n                <button class="btn-casefriend btn-lg" id="add-lien-demand">Add Lien Demand</button>\n            </div>\n        </div>\n    </div>\n</div>';

},this.App.Templates.filesEventTabsEventWcLienSecond=function(a){{var b="";_.escape}return b+='<!-- Lien REP -->\n<div class="panel panel-casefreind" data-permission="31">\n    <div class="panel-heading" role="tab">\n        <h4 class="panel-title">\n            <a class="accordion-toggle font-bold" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseLienRep" aria-expanded="false" aria-controls="collapseLienRep">\n                Lien REP (<span>{lienReps.length}</span>)\n            </a>\n        </h4>\n    </div>\n    <div class="panel-body collapse in" id="collapseLienRep">\n        <fieldset>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">Add Lien Rep:</label>\n                <div class="col-sm-7">\n                    <input type="text" class="form-control search-files typeahead lien_rep_typeahead" name="lien_rep">\n                    <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="lien_rep"><i class="fa fa-chevron-down"></i></a>\n                </div>\n                <div class="input-group-btn">\n                    <a class="btn btn-default" id=\'add-lien-rep\' href="javascript:void(0);" data-permission="75"><i class="tst-addLienRep-btn fa fa-plus"></i></a>\n                    <a class="btn btn-default control-tooltip" data-help-id="fileInputLienRepHelp" href="javascript:void(0);"><i class="fa fa-question-circle fa-lg"></i></a>\n                </div>\n            </div>\n        </fieldset>\n        <fieldset rv-if="lienReps.length">\n            <table class="table">\n                <thead>\n                <tr>\n                    <th>Lien Rep Name</th>\n                    <th>Rep Email</th>\n                    <th>Rep Office Phone</th>\n                    <th>Company Name</th>\n                    <th>Actions</th>\n                </tr>\n                </thead>\n                <tbody>\n                <tr rv-each-row="lienReps.models">\n                    <td>{row:lienRepLastName}, {row:lienRepFirstName} {row:lienRepMiddleName}</td>\n                    <td><a rv-href="row:lienRepEmail" class=\'mailToLien\'>{row:lienRepEmail}</a></td>\n                    <td>{row:lienRepOfficePhone}</td>\n                    <td>{row:lienRepCompanyName}</td>\n                    <td>\n                        <a class=\'m-right-5 edit-lien-rep\' href="javascript:void(0);" rv-data-model=\'row.cid\' data-permission="76">\n                            <i class="tst-lienRep-pencil fa fa-pencil"></i>\n                        </a>\n                        <a class=\'m-right-5 delete-lien-rep\' href="javascript:void(0);" rv-data-model=\'row.cid\'>\n                            <i class="tst-lienRep-delete c-red t-align-right fa fa-times"></i>\n                        </a>\n                    </td>\n                </tr>\n                </tbody>\n            </table>\n        </fieldset>\n        <div class="form-group m-bottom-5" rv-unless="lienReps.length">\n            <div class="col-sm-4 p-top-10">\n                <h1><STRONG>NONE</STRONG></h1>\n            </div>\n        </div>\n    </div>\n</div>'},this.App.Templates.filesEventTabsEventWcLienSixth=function(a){{var b="";_.escape}return b+='<form id="lien-form-fifth" data-permission="31">\n    <div class="form-horizontal">\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Settled Amount:</label>\n            <div class="col-sm-8">\n                <input type="text" class="form-control" rv-value="model:lienSettlementAmount" name="lienSettlementAmount">\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Lien Notes:</label>\n            <div class="col-sm-8">\n                <textarea class="tst-lienNotes-box form-control" rows="5" rv-value="model:lienNotes"></textarea>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Dismissed:</label>\n            <div class="col-sm-8">\n                <input type="checkbox" name="lienDismissed" rv-checked="model:lienDismissed">\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Settled:</label>\n            <div class="col-sm-8">\n                <input type="checkbox" name="lienSettled" rv-checked="model:lienSettled">\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Settle Date:</label>\n            <div class="col-sm-8">\n                <input type="text" class="form-control datepicker" name="lienSettleDate" placeholder="yyyy-mm-dd" rv-value="model:lienSettleDate">\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Pay By Date:</label>\n            <div class="col-sm-8">\n                <input type="text" class="form-control datepicker" name="lienPaybyDate" placeholder="yyyy-mm-dd" rv-value="model:lienPaybyDate">\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Lien Paid:</label>\n            <div class="col-sm-8">\n                <input type="checkbox" name="lienPaid" rv-checked="model:lienPaid">\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Paid Date:</label>\n            <div class="col-sm-8">\n                <input type="text" class="form-control datepicker" name="lienPaidDate" placeholder="yyyy-mm-dd" rv-value="model:lienPaidDate">\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Payee:</label>\n            <div class="col-sm-7">\n                <input type="text" class="typeahead form-control search-files payee_typeahead" name="payeeID" rv-value="model:payeeNameTypeahead">\n                <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="payeeID"><i class="fa fa-chevron-down"></i></a>\n            </div>\n            <div class="input-group-btn">\n                <a class="btn btn-default" id=\'payee_form_edit\' href="javascript:void(0);" data-permission="74"><i class="fa fa-pencil"></i></a>\n                <a class="tst-settlementNewPayee-plus btn btn-default" id=\'payee_form_new\' href="javascript:void(0);" data-permission="73"><i class="fa fa-plus"></i></a>\n                <a class="btn btn-default control-tooltip" data-help-id="fileInputPayeeHelp" href="javascript:void(0);"><i class="fa fa-question-circle fa-lg"></i></a>\n            </div>\n        </div>\n    </div>\n</form>'},this.App.Templates.filesEventTabsEventWcLienThird=function(a){{var b="";_.escape}return b+='<div class="form-horizontal" data-permission="31">\n    <div class="form-group m-bottom-5">\n        <div class="col-sm-4 p-top-10">\n            <a data-permission="2" href="javascript:void(0);" id=\'add-lien-bill\' class=\'font-size-16\'>\n                <i class="fa fa-plus fa-lg"></i> Add Lien Bill\n            </a>\n        </div>\n    </div>\n    <br>\n    <fieldset rv-if="liendBills.length">\n        <legend class="t-align-right font-bold">Total: $<span id="total-lien"></span></legend>\n        <table class="table">\n            <thead>\n            <tr>\n                <th>Bill Title</th>\n                <th>Date Recived</th>\n                <th>Amount</th>\n                <th>OMFS</th>\n                <th>Service Notes</th>\n                <th>OMFS Document</th>\n                <th>Bill Document</th>\n                <th>Actions</th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr rv-each-row="liendBills.models">\n                <td>{row:name}</td>\n                <td>{row:dateReceived}</td>\n                <td>${row:amount | currency}</td>\n                <td>${row:lienOMFS | currency}</td>\n                <td>{row:serviceNotes}</td>\n                <td>\n                    <a rv-show="row:OMFSdocumentID" target="_blank" rv-href="getOMFSDocumentUrl < row:OMFSdocumentID">\n                        <i class="fa fa-paperclip fa-lg t-align-center"></i>\n                    </a>\n                </td>\n                <td>\n                    <a rv-show="row:billDocumentID" target="_blank" rv-href="getBillDocumentUrl < row:billDocumentID">\n                        <i class="fa fa-paperclip fa-lg t-align-center"></i>\n                    </a>\n                </td>\n                <td>\n                    <a class=\'m-right-5 lien-bill-edit\' href="javascript:void(0);" rv-data-model=\'row.cid\'>\n                        <i class="tst-lienBill-pencil fa fa-pencil"></i>\n                    </a>\n                    <a class=\'m-right-5 lien-bill-delete\' href="javascript:void(0);" rv-data-model=\'row.cid\'>\n                        <i class="c-red t-align-right fa fa-times"></i>\n                    </a>\n                </td>\n            </tr>\n            </tbody>\n        </table>\n    </fieldset>\n</div>'},this.App.Templates.filesEventTabsEventWcMedicalFirst=function(a){{var b="";_.escape}return b+='<form id="medical-form-first" data-permission="31">\n    <div class="form-horizontal">\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Doctor:</label>\n            <div class="col-sm-7">\n                <input type="text" class="typeahead form-control search-files doctor_typeahead doctor-facility" name="doctorID" rv-value="model:doctorNameTypeahead" tabindex="1">\n                <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="doctorID" id="app-doctor-arrow"><i class="fa fa-chevron-down"></i></a>\n            </div>\n            <div class="input-group-btn">\n                <a class="btn btn-default" id=\'doctor_form_edit\' href="javascript:void(0);" data-permission="58"><i class="tst-editDoctor-pencil fa fa-pencil"></i></a>\n                <a class="btn btn-default" id=\'doctor_form_new\' href="javascript:void(0);" data-permission="57"><i class="tst-addDocForm-btn fa fa-plus"></i></a>\n                <a class="btn btn-default control-tooltip" data-help-id="fileInputDoctorHelp" href="javascript:void(0);"><i class="fa fa-question-circle fa-lg"></i></a>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Facility:</label>\n            <div class="col-sm-7">\n                <input type="text" class="typeahead form-control search-files doctor_facility_typeahead doctor-facility" name="doctorFacilityID" rv-value="model:facilityNameTypeahead" tabindex="2">\n                <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="doctorFacilityID"><i class="fa fa-chevron-down"></i></a>\n            </div>\n            <div class="input-group-btn">\n                <a class="btn btn-default" id=\'doctor_facility_form_edit\' href="javascript:void(0);" data-permission="58"><i class="fa fa-pencil"></i></a>\n                <a class="btn btn-default" id=\'doctor_facility_form_new\' href="javascript:void(0);" data-permission="57"><i class="fa fa-plus"></i></a>\n                <a class="btn btn-default control-tooltip" data-help-id="fileInputClinicHelp" href="javascript:void(0);"><i class="fa fa-question-circle fa-lg"></i></a>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Tax ID:</label>\n            <div class="col-sm-8">\n                <input type="text" class="form-control" name="taxID" rv-value="model:taxID" tabindex="3">\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Appointed By:</label>\n            <div class="col-sm-8">\n                <select class="form-control" rv-value="model:appointedBy" name="appointedBy" tabindex="4">\n                    <option value="Consult">Consult</option>\n                    <option value="PTP">PTP</option>\n                    <option value="AME">AME</option>\n                    <option value="AQME">AQME</option>\n                    <option value="PQME">PQME</option>\n                    <option value="DQME">DQME</option>\n                    <option value="Treatment">Treatment</option>\n                </select>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Appointed Date:</label>\n            <div class="col-sm-8">\n                <input type="text" class="form-control datepicker" name="appointDate" placeholder="yyyy-mm-dd" rv-value="model:appointDate" tabindex="5">\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Appointment Time:</label>\n            <div class="col-sm-8  display-table bootstrap-timepicker p-right-15">\n                <input type="text" class="form-control input-small timepicker" name=\'appointTime\' rv-value="model:appointTime" tabindex="6">\n                <span class="input-group-addon"><i class="glyphicon glyphicon-time"></i></span>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Summary:</label>\n            <div class="col-sm-8">\n                <textarea class="tst-medicalSummary-box form-control" rows="5" rv-value="model:MRnotes" tabindex="7"></textarea>\n            </div>\n        </div>\n\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Body Parts:</label>\n            <div class="col-sm-8">\n                <input class="form-control typeahead select_bodyParts search-files" type="text" name="select_bodyParts" tabindex="8">\n                <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="select_bodyParts"><i class="fa fa-chevron-down"></i></a>\n            </div>\n            <div class="clearfix"></div>\n            <div class="col-sm-8 col-sm-offset-3">\n                <div class="panel panel-default m-top-5 m-bottom-10">\n                    <table class=\'table\'>\n                        <thead>\n                        <tr>\n                            <th>ADJ#</th>\n                            <th>Body Part</th>\n                            <th>Remove</th>\n                            <th>Is PnS Record</th>\n                        </tr>\n                        </thead>\n                        <tbody>\n                        <tr rv-each-bp="options.colMedicalToBodyPartsADj.models">\n                            <td>{bp:ADJid}</td>\n                            <td>{bp:bodyPart}</td>\n                            <td>\n                                <a rv-on-click="removeBodyPart < bp:bodyPartID" href="javascript:void(0);">\n                                    <i class="fa fa-remove"></i>\n                                </a>\n                            </td>\n                            <td><input type="checkbox" rv-checked="bp:isPnSRecord" name=\'isPnSRecord\'/></td>\n                        </tr>\n                        <tr rv-hide="options.colMedicalToBodyPartsADj.length">\n                            <td colspan="3"><strong>No data to display</strong></td>\n                        </tr>\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n        </div>\n    </div>\n</form>'},this.App.Templates.filesEventTabsEventWcSubpoenasFirst=function(a){{var b="";_.escape}return b+='<form id="subpoena-form-first" data-permission="31">\n    <div class="form-horizontal">\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Doc Repository: <span class="c-red">*</span></label>\n            <div class="col-sm-8">\n                <input type="text" class="form-control" rv-value="model:subpoenaLocation" name="subpoenaLocation" placeholder="location" required>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Address: <span class="c-red">*</span></label>\n            <div class="col-sm-8">\n                <input type="text" class="form-control" rv-value="model:subpoenaAddress" name="subpoenaAddress" placeholder="" required>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">City: <span class="c-red">*</span></label>\n            <div class="col-sm-8">\n                <input type="text" class="form-control" rv-value="model:subpoenaCity" name="subpoenaCity" placeholder="" required>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">State: <span class="c-red">*</span></label>\n            <div class="col-sm-8">\n                <select class=\'form-control state-helper\' rv-value="model:subpoenaState" name=\'subpoenaState\' required></select>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Zip: <span class="c-red">*</span></label>\n            <div class="col-sm-8">\n                <input type="text" class="form-control" rv-value="model:subpoenaZip" name="subpoenaZip" placeholder="" required>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Description:</label>\n            <div class="col-sm-8">\n                <input type="text" class="form-control" rv-value="model:subpoenaDescription" name="subpoenaDescription" placeholder="">\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Date Ordered:</label>\n            <div class="col-sm-8">\n                <input type="text" class="form-control datepicker" name="dateOrdered" placeholder="yyyy-mm-dd" rv-value="model:dateOrdered">\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Date Arrived:</label>\n            <div class="col-sm-8">\n                <input type="text" class="form-control datepicker" name="dateArrived" placeholder="yyyy-mm-dd" rv-value="model:dateArrived">\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Summarized:</label>\n            <div class="col-sm-8">\n                <input type="checkbox" class="form-control" name="summarized" rv-checked="model:summarized"/>\n            </div>\n        </div>\n    </div>\n</form>\n'},this.App.Templates.filesEventTabsLienWcClaimantForm=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <a class="close" data-dismiss="modal">×</a>\n    <h1 class="modal-title font-bold font-size-17" rv-if="lienClaimantModel.isNew">Create New Lien Claimant</h1>\n    <h1 class="modal-title font-bold font-size-17" rv-unless="lienClaimantModel.isNew">Edit Existing Lien Claimant</h1>\n</div>\n<div class="modal-body">\n    <form id="from-lien-claimant">\n        <div class="panel-employer p-top-15">\n            <div class="form-horizontal">\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Claimant Name:</label>\n                    <div class="col-sm-8">\n                        <input type="text" name="ClaimantName" rv-value="lienClaimantModel:ClaimantName" class=\'form-control\' required>\n                        <input type=\'hidden\' name="ClaimantID" rv-value="lienClaimantModel:ClaimantID"/>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Contact First Name:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="contactFirstName" rv-value="lienClaimantModel:contactFirstName"/>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Contact Middle Name:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="contactMiddleName" rv-value="lienClaimantModel:contactMiddleName" placeholder="Middle name is optional"/>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Contact Last Name:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="contactLastName" rv-value="lienClaimantModel:contactLastName"/>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Contact Email:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="contactEmail" rv-value="lienClaimantModel:contactEmail" type="email"/>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Contact Office Phone:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="contactOfficePhone" rv-value="lienClaimantModel:contactOfficePhone">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Contact Cell Phone:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="contactCellPhone" rv-value="lienClaimantModel:contactCellPhone">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Fax:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="claimantFax" rv-value="lienClaimantModel:claimantFax">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Claimant Office Phone:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="claimantOfficePhone" rv-value="lienClaimantModel:claimantOfficePhone">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Tax ID:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="taxID" rv-value="lienClaimantModel:taxID">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <h3 class="font-bold sub-header-forms p-bottom-10 col-sm-3 col-sm-offset-3">Mailing</h3>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Address:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="mailingAddress" rv-value="lienClaimantModel:mailingAddress">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">City:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="mailingCity" rv-value="lienClaimantModel:mailingCity">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">State:</label>\n                    <div class="col-sm-8">\n                        <select class=\'form-control state-helper\' rv-value="lienClaimantModel:mailingState" name=\'mailingState\'></select>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Zip:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="mailingZip" rv-value="lienClaimantModel:mailingZip">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Toll Free Phone:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="tollFreePhone" rv-value="lienClaimantModel:tollFreePhone">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <h3 class="font-bold sub-header-forms p-bottom-10 col-sm-5 col-sm-offset-3">Physical\n                        <a class="tst-claimantAddress-copy-btn btn btn-info copy-button-size" id="copy-to-address" href="javascript:void(0);"><i class="fa fa-files-o"></i> Copy Mailing Address</a>\n                    </h3>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Address:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="physicalAddress" rv-value="lienClaimantModel:physicalAddress">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">City:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="physicalCity" rv-value="lienClaimantModel:physicalCity">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">State:</label>\n                    <div class="col-sm-8">\n                        <select class=\'form-control state-helper\' rv-value="lienClaimantModel:physicalState" name=\'physicalState\'></select>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Zip:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="physicalZip" rv-value="lienClaimantModel:physicalZip">\n                    </div>\n                </div>\n            </div>\n        </div>\n    </form>\n</div>\n<div class="modal-footer">\n    <button type="button" class="tst-claimantForm-close-btn btn btn-default" data-dismiss="modal">Close</button>\n    <button type="button" class="btn btn-primary" id=\'save-lien-claimant\'>Save changes</button>\n</div>'},this.App.Templates.filesEventTabsPayeesForm=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <a class="close" data-dismiss="modal">×</a>\n    <h1 class="modal-title font-bold font-size-17" rv-if="model.isNew">Create New Payee</h1>\n    <h1 class="modal-title font-bold font-size-17" rv-unless="model.isNew">Edit Existing Payee</h1>\n</div>\n<div class="modal-body">\n    <form id="from-payee">\n        <div class="panel-employer p-top-15">\n            <div class="form-horizontal">\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Payee Name:</label>\n                    <div class="col-sm-8">\n                        <input type="text" name="payeeName" rv-value="model:payeeName" class=\'form-control\' required>\n                        <input type=\'hidden\' name="payeeID" rv-value="model:payeeID"/>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">payee Tax ID:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="payeeTaxID" rv-value="model:payeeTaxID"/>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <h3 class="font-bold sub-header-forms p-bottom-10 col-sm-3 col-sm-offset-3">Mailing</h3>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Address:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="mailingAddress" rv-value="model:mailingAddress" required>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> City:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="mailingCity" rv-value="model:mailingCity" required>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> State:</label>\n                    <div class="col-sm-8">\n                        <select class=\'form-control state-helper\' rv-value="model:mailingState" name=\'mailingState\' required></select>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Zip:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="mailingZip" rv-value="model:mailingZip" required>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <h3 class="font-bold sub-header-forms p-bottom-10 col-sm-5 col-sm-offset-3">Physical\n                        <a class="tst-payeeAddressCopy-btn btn btn-info copy-button-size" id="copy-to-address" href="javascript:void(0);"><i class="fa fa-files-o"></i> Copy Mailing Address</a>\n                    </h3>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Address:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="physicalAddress" rv-value="model:physicalAddress" required>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> City:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="physicalCity" rv-value="model:physicalCity" required>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> State:</label>\n                    <div class="col-sm-8">\n                        <select class=\'form-control state-helper\' rv-value="model:physicalState" name=\'physicalState\' required></select>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Zip:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="physicalZip" rv-value="model:physicalZip" required>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </form>\n</div>\n<div class="modal-footer">\n    <button type="button" class="tst-payeeForm-close-btn btn btn-default" data-dismiss="modal">Close</button>\n    <button type="button" class="btn btn-primary" id=\'save-payee\'>Save changes</button>\n</div>';

},this.App.Templates.filesEventTabsShowDependencies=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <h4 class="modal-title">Event Dependencies for: {model:eventTitle}</h4>\n</div>\n<div class="modal-body">\n    <div class="panel-info-dependencies m-bottom-15 p-bottom-15">\n        <h2 class="title font-size-18 font-bold p-15">{options.categoryName} - {model:eventTypeName}: {model:eventTypeDescription}</h2>\n        <div class="form-horizontal p-left-20">\n            <div class="form-group">\n                <span class="col-sm-2">Event Title:</span>\n                <div class="col-sm-5 p-left-0">\n                    <span class="c-blue-link font-bold">{model:eventTitle}</span>\n                </div>\n                <span class="col-sm-2">Event Date:</span>\n                <div class="col-sm-2 p-left-0">\n                    <span class="c-blue-link font-bold">{model:eventDate}</span>\n                </div>\n            </div>\n\n            <div id="extended-data"></div>\n\n            <div class="form-group">\n                <span class="col-sm-2">Milestones:</span>\n                <div class="col-sm-10 p-left-0">\n                    <span class="c-blue-link font-bold" rv-each-row="milestones.models">\n                    	<span rv-if="row:selected">{row:name} &nbsp; &nbsp; &nbsp;</span>\n                    </span>\n                </div>\n            </div>\n            <div class="form-group">\n                <span class="col-sm-2">Short Note:</span>\n                <div class="col-sm-10 p-left-0">\n                    <p class="font-bold p-left-0 p-right-20">{model:shortNote}</p>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="clearfix"></div>\n\n    <div id="extended-lists"></div>\n\n    <div class="panel panel-casefreind" rv-if="billings.length">\n        <div class="panel-heading" role="tab">\n            <h4 class="panel-title">\n                <a class="accordion-toggle font-bold" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapsebills" aria-expanded="false" aria-controls="collapsebills">\n                    Bills ({billings.length})\n                </a>\n            </h4>\n        </div>\n        <div class="panel-body collapse in" id="collapsebills">\n            <fieldset>\n                <table class="table liens-panels-max-size">\n                    <thead>\n                    <tr>\n                        <th>Date</th>\n                        <th>Description</th>\n                        <th>InvoiceNumber</th>\n                        <th>Reviewed</th>\n                        <th class="t-align-right m-right-30">Actions</th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    <tr rv-each-row="billings.models">\n                        <td>{row:billingDate}</td>\n                        <td>{row:billingDescription}</td>\n                        <td>\n                            <div rv-if="row:invoiceNumber">{row:invoiceNumber}</div>\n                            <div rv-unless="row:invoiceNumber">Not Invoiced</div>\n                        </td>\n                        <td>\n                            <span rv-if="row:reviewed" class="label label-success">YES</span>\n                            <span rv-unless="row:reviewed" class="label label-warning">NO</span>\n                        </td>\n                        <td class="t-align-right p-right-i-20">\n                            <a class=\'m-right-5 bill-delete\' href="javascript:void(0);" rv-if="showDeletebilling" rv-data-model=\'row.cid\' data-permission="36">\n                                <i class="c-red fa fa-times"></i>\n                            </a>\n                        </td>\n                    </tr>\n                    </tbody>\n                </table>\n            </fieldset>\n        </div>\n    </div>\n\n    <div class="clearfix"></div>\n\n    <div class="panel panel-casefreind" rv-if="documents.length">\n        <div class="panel-heading" role="tab">\n            <h4 class="panel-title">\n                <a class="accordion-toggle font-bold" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseDocuments" aria-expanded="false" aria-controls="collapseDocuments">\n                    Documents ({documents.length})\n                </a>\n            </h4>\n        </div>\n        <div class="panel-body collapse in" id="collapseDocuments">\n            <fieldset>\n                <table class="table liens-panels-max-size">\n                    <thead>\n                    <tr>\n                        <th>Document Title</th>\n                        <th>Document Name</th>\n                        <th class="t-align-right m-right-30">Actions</th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    <tr rv-each-row="documents.models">\n                        <td>{row:documentTitle}</td>\n                        <td>{row:documentName}</td>\n                        <td class="t-align-right p-right-i-20">\n                            <a class=\'m-right-5 delete-document\' href="javascript:void(0);" rv-data-model=\'row.cid\' data-permission="53">\n                                <i class="c-red fa fa-times"></i>\n                            </a>\n                        </td>\n                    </tr>\n                    </tbody>\n                </table>\n            </fieldset>\n        </div>\n    </div>\n</div>\n<div class="modal-footer">\n    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n    <button type="button" class="btn btn-danger" data-permission="32" id=\'delete-event\'>Delete Event</button>\n</div>\n'},this.App.Templates.filesFileBillingIndex=function(a){{var b="";_.escape}return b+='<div class="container ">\n    <div id="nonInvoicedBillings" class="p-top-10">\n    </div>\n    <div id="invoicedBillings" class="p-top-10">\n\n    </div>\n</div>\n'},this.App.Templates.filesFileCalendarForm=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <a class="close close-alert-form" data-dismiss="modal">×</a>\n    <h1 class="modal-title font-bold font-size-17" rv-if="model.isNew">Create Calendar Reminder</h1>\n    <h1 class="modal-title font-bold font-size-17" rv-unless="model.isNew">Edit Calendar Reminder</h1>\n</div>\n<div class="modal-body">\n    <form id="alert-form-file">\n        <div class="p-top-15">\n            <div class="form-horizontal">\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10 p-right-5"></i>Start Date</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control datepicker" name="date" placeholder="yyyy-mm-dd" rv-value=\'model:date\' required>\n\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Description:</label>\n                    <div class="col-sm-8">\n                        <input type="text" name="description" rv-value="model:description" class=\'form-control\' required>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 font-size-15 control-label">Add Users:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control search-files typeahead user-Typeahead p-right-30" name="userTypeahead" rv-value="model:userTypeahead">\n                        <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="userTypeahead"><i class="fa fa-chevron-down"></i></a>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <div class="col-sm-offset-3">\n                        <table class=\'table\'>\n                            <thead>\n                            <tr>\n                                <td><i class="fa fa-asterisk c-red font-size-10 p-right-5"></i>Assign</td>\n                                <td>User</td>\n                            </tr>\n                            </thead>\n                            <tbody>\n                            <tr rv-each-row="colUsers.models">\n                                <td><input type="checkbox" class="user-checkbox" rv-data-user-id="row:user_id" rv-data-typeaheadresult="row:typeaheadResult" name=\'user_id\' checked/></td>\n                                <td>{row:typeaheadResult}</td>\n                            </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n                <hr>\n                <div class="form-group m-bottom-10">\n                    <em class=\'font-size-17 p-bottom-10 p-left-50\'> Extra Settings (Optional)</em>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Start Time:</label>\n                    <div class="col-sm-8  display-table bootstrap-timepicker p-right-15">\n                        <input type="text" class="form-control input-small timepicker" name=\'time\' rv-value="model:time">\n                        <span class="input-group-addon"><i class="glyphicon glyphicon-time"></i></span>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">End Time:</label>\n                    <div class="col-sm-8  display-table bootstrap-timepicker p-right-15">\n                        <input type="text" class="form-control input-small timepicker" name=\'end_time\' rv-value="model:end_time">\n                        <span class="input-group-addon"><i class="glyphicon glyphicon-time"></i></span>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">End Date</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control datepicker" name="end_date" placeholder="yyyy-mm-dd" rv-value=\'model:end_date\'>\n                    </div>\n                </div>\n\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Alert set:</label>\n                    <div class="col-sm-3">\n                        <input type="number" name="notificationQuantity" rv-value="model:notificationQuantity" class=\'form-control\' number="true">\n                    </div>\n                    <div class="col-sm-3">\n                        <select name="notificationUnit" rv-value="model:notificationUnit" class=\'form-control\'>\n                            <option value="minutes">Minutes</option>\n                            <option value="hours">Hours</option>\n                            <option value="days">Days</option>\n                        </select>\n                    </div>\n                    <label class="col-sm-2 control-label">Before</label>\n                </div>\n            </div>\n        </div>\n    </form>\n</div>\n<div class="modal-footer">\n    <button type="button" class="btn btn-default close-alert-form" data-dismiss="modal">Close</button>\n    <button type="button" class="btn btn-primary" id=\'save-alert\'>Save Changes</button>\n    <button type="button" class="btn btn-danger" id=\'delete-alert\' rv-data-alert-id="model:alert_id">Delete</button>\n</div>'},this.App.Templates.filesFileEvents=function(a){{var b="";_.escape}return b+='<div class="container m-top-15" data-permission="30">\n    <div class="b-grey-tabs box-shadow">\n        <div class="sticky-wrapper" id="filter-fileEvents-sticky" style="min-height: 138px;">\n            <div class=\'b-green-casefriend min-height-100 p-top-10 p-bottom-5\'>\n                <div class="form-group col-sm-3 p-top-45">\n                    <a data-permission="2" rv-href="options.fileModel.fileNewEventUrl" id=\'add-new\' class=\'font-size-16\'>\n                        <i class="fa fa-plus fa-lg"></i>\n                        Create new event\n                    </a>\n                </div>\n                <div class="col-sm-6 col-xs-12 t-align-center">\n                    <span class="">\n                        <i class="fa fa-angle-double-left fa-lg sequential-counter c-blue-link cursor-pointer display-none p-right-5" id=\'load-files-first\'></i>\n					</span>\n                    <span class="">\n						<i class="fa fa-chevron-left sequential-counter c-blue-link cursor-pointer display-none p-right-5" id=\'load-files-prev\'></i>\n					</span>\n                    <span class=\'display-inline-block p-left-10 p-right-10\'>\n						<label class=\'p-bottom-6 font-size-17\'>\n                            <span id="show-offset" class="display-none">\n                                Showing Events from <span id=\'from-offset\'>0</span> to <span id="to-offset">{options.paginationConstant}</span>\n                            </span> \n                            <span id="show-all">\n                                Showing All Events\n                            </span>\n                            (Total {totalRows})\n                        </label>\n						<select class="form-control" id="eventOffset" data-selectorname="fileType" name="eventOffset">\n                            <option rv-data-min="-1">Show All Events</option>\n                            <option rv-each-row="PagesNumbers.models" rv-data-position="row:position" rv-data-min="row:min" rv-data-max="row:max">{row:min} - {row:max}</option>\n                        </select>\n					</span>\n                    <span>\n						<i class="fa fa-chevron-right sequential-counter c-blue-link cursor-pointer p-left-5" id=\'load-files-next\'></i>\n					</span>\n                    <span>\n						<i class="fa fa-angle-double-right fa-lg sequential-counter c-blue-link cursor-pointer p-left-5" id=\'load-files-last\'></i>\n					</span>\n                </div>\n                <div class="form-group col-sm-3 col-xs-12 p-top-45 t-align-right font-size-16">\n                    <a data-permission="2" class=\'display-none cursor-pointer\' id="filter-btn">\n                        <i class="fa fa-arrow-down"></i>\n                        Show Filters\n                    </a>\n                    <a data-permission="2" class=\'cursor-pointer\' id="filter-btn-close">\n                        <i class="fa fa-arrow-up"></i>\n                        Hide Filters\n                    </a>\n                    <a class="control-tooltip c-black p-left-10" data-help-id="fileEventFiltersHelp" href="javascript:void(0);"><i class="fa fa-question-circle fa-lg"></i></a>\n\n                </div>\n                <div>\n                    <div id=\'file-filters\' class="b-green-casefriend height-100">\n                        <div class="form-group col-sm-4 col-xs-12">\n                            <label class="control-label c-gray">Search by Event Title/Notes:</label><br>\n                            <div class="col-sm-12 p-left-0">\n                                <input type="text" class="typeahead form-control p-right-30 search-files event_typeahead" name="eventTitle" placeholder="Search by Event Title/Notes">\n                                <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="eventTitle">\n                                    <i class="fa fa-chevron-down"></i>\n                                </a>\n                            </div>\n                        </div>\n                        <div class="form-group col-sm-4 col-xs-12">\n                            <label class="control-label c-gray">Search by Event Category:</label><br>\n                            <div class="col-sm-12 p-left-0">\n                                <select class="form-control p-right-30" id="eventCategory" data-selectorname="etcName" name="eventCategorys">\n                                    <option value="0">Timeline</option>\n                                    <option rv-each-row="options.colEventTypesCategories.models < .colEventTypesCategories" rv-value="row:etcID">{row:etcName}</option>\n                                </select>\n                            </div>\n                        </div>\n                        <div class="form-group col-sm-4 col-xs-12">\n                            <label class="control-label c-gray">Search by Event Type:</label><br>\n                            <div class="col-sm-12 p-left-0">\n                                <input type="text" class="typeahead form-control p-right-30 search-files event_type_typeahead" name="eventTypeName" placeholder="Search by Event Type">\n                                <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="eventTypeName">\n                                    <i class="fa fa-chevron-down"></i>\n                                </a>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class="clearfix"></div>\n            </div>\n            <table class=\'table file-events-table file-events-header-table m-bottom-0\' style="height: 37px;">\n                <thead id=\'events-heads\'>\n                <tr>\n                    <th class="width-31 events-sortable cursor-pointer" data-sort=\'read\'></th>\n                    <th class=" events-sortable cursor-pointer font-bold width-100" data-sort=\'eventDate\'>\n                        Date <i class="fa fa-chevron-down"></i>\n                    </th>\n                    <th class=" events-sortable cursor-pointer font-bold width-100" data-sort=\'etcName\'>\n                        Category\n                    </th>\n                    <th class=" events-sortable cursor-pointer font-bold width-115" data-sort=\'eventTypeName\'>\n                        Event Type\n                    </th>\n                    <th class=" events-sortable cursor-pointer font-bold width-115" data-sort=\'milestoneName\'>\n                        Milestone\n                    </th>\n                    <th class=" events-sortable cursor-pointer font-bold width-200" data-sort=\'eventTitle\'>\n                        Event Title\n                    </th>\n                    <th class=" events-sortable cursor-pointer font-bold width-369" data-sort=\'shortNote\'>\n                        Short Note\n                    </th>\n                    <th class=" font-bold width-110" data-sort=\'shortNote\'>\n                        Extra Field\n                    </th>\n                </tr>\n                </thead>\n            </table>\n        </div>\n        <table class=\'table file-events-table rows-file-events\'>\n            <tbody>\n            <tr rv-hide="collection.length">\n                <td colspan="8" class="t-align-c">\n                    <strong>NONE</strong>\n                </td>\n            </tr>\n            <tr rv-each-row="collection.models" rv-class-unread-color="row:unread">\n                <td class="width-31">\n                    <i rv-show="row:unread" class="fa fa-circle dot-color" aria-hidden="true"></i>\n                    <i rv-if="row:documentID" class="fa fa-paperclip fa-lg"></i>\n                </td>\n                <td class=\'event-row width-100 cursor-pointer\' rv-data-id=\'row:eventID\'>\n                    <span rv-class-font-bold="row:important">{row:eventDate}</span>\n                </td>\n                <td class=\'event-row width-100 cursor-pointer\' rv-data-id=\'row:eventID\'>\n                    <span rv-class-font-bold="row:important">{row:etcName}</span>\n                </td>\n                <td class=\'event-row width-115 cursor-pointer\' rv-data-id=\'row:eventID\'>\n                    <span rv-class-font-bold="row:important">{row:eventTypeName}</span>\n                </td>\n                <td class=\'event-row width-115 cursor-pointer\' rv-data-id=\'row:eventID\'>\n                    <span rv-class-font-bold="row:important">{row:milestoneName}</span>\n                </td>\n                <td class=\'event-row width-200 cursor-pointer\' rv-data-id=\'row:eventID\'>\n                    <span rv-class-font-bold="row:important">{row:eventTitle}</span>\n                </td>\n                <td class=\'event-row cursor-pointer width-369\' rv-data-id=\'row:eventID\'>\n                    <span rv-class-font-bold="row:important">{row:shortNote}</span>\n                </td>\n                <td class=\'event-row width-110\'>\n                    <span>{row:extraField}</span>\n                </td>\n            </tr>\n            </tbody>\n        </table>\n    </div>\n</div>'},this.App.Templates.filesFileSubroTabsClientPanel=function(a){{var b="";_.escape}return b+='<div id=\'insurer-company-modal\'></div>\n<div class="panel-tpa p-top-15">\n    <div class="form-horizontal">\n        <div class="form-group m-bottom-5">\n            <h2 class="font-bold font-size-22 p-bottom-10 col-sm-3 col-sm-offset-2">CLIENT INFO</h2>\n        </div>\n        <div class="form-group">\n            <label class="col-sm-2 p-top-5 control-label">Name:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{model:clientName}</div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="col-sm-2 p-top-5 control-label">Client Name Short:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{model:clientNameShort}</div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="col-sm-2 p-top-5 control-label">Office Phone:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{model:officePhone}</div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="col-sm-2 p-top-5 control-label">Fax:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{model:faxNumber}</div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="col-sm-2 p-top-5 control-label">Client Notes:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{model:clientNotes}</div>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <h3 class="font-bold sub-header-forms p-bottom-10 col-sm-3 col-sm-offset-2">Mailing</h3>\n        </div>\n        <div class="form-group">\n            <label class="col-sm-2 p-top-5 control-label">Address:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{model:mailingAddress}</div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="col-sm-2 p-top-5 control-label">City:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{model:mailingCity}</div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="col-sm-2 p-top-5 control-label">State:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{model:mailingStateName}</div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="col-sm-2 p-top-5 control-label">Zip:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{model:mailingZip}</div>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <h3 class="font-bold sub-header-forms p-bottom-10 col-sm-3 col-sm-offset-2">Billing</h3>\n        </div>\n        <div class="form-group">\n            <label class="col-sm-2 p-top-5 control-label">Address:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{model:billingAddress}</div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="col-sm-2 p-top-5 control-label">City:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{model:billingCity}</div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="col-sm-2 p-top-5 control-label">State:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{model:billingStateName}</div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="col-sm-2 p-top-5 control-label">Zip:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{model:billingZip}</div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="col-sm-2 p-top-5 control-label">Toll Free Phone:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{model:tollFreePhone}</div>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <h3 class="font-bold sub-header-forms p-bottom-10 col-sm-3 col-sm-offset-2">Physical</h3>\n        </div>\n        <div class="form-group">\n            <label class="col-sm-2 p-top-5 control-label">Address:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{model:physicalAddress}</div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="col-sm-2 p-top-5 control-label">City:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{model:physicalCity}</div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="col-sm-2 p-top-5 control-label">State:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{model:physicalStateName}</div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="col-sm-2 p-top-5 control-label">Zip:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{model:physicalZip}</div>\n            </div>\n        </div>\n\n        <hr class="hr-white">\n\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-2 control-label">Insurer Company:</label>\n            <div class="col-sm-8">\n                <input type="text" class="typeahead form-control search-files insurer_company_typeahead" name="insurerCompanyName" placeholder="Select to add an insurer company">\n                <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="insurerCompanyName"><i class="fa fa-chevron-down"></i></a>\n            </div>\n            <div class="input-group-btn">\n                <!--<a class="btn btn-default" id="insurer_form_edit" href="javascript:void(0);"><i class="fa fa-pencil"></i></a>-->\n                <a class="tst-createInsurerComp-btn btn btn-default" id="insurer_form_new" href="javascript:void(0);"><i class="fa fa-plus"></i></a>\n            </div>\n        </div>\n\n        <div class="form-group">\n            <div class="col-sm-offset-2 col-sm-10">\n                <div class="p-top-5">\n                    <table class="cf-table table table-striped table-hover">\n                        <thead>\n                        <tr>\n                            <th colspan="3">\n                                Insurer Companies ({options.colInsurerCompanies.length})\n                            </th>\n                        </tr>\n                        <tr>\n                            <th class="width-400">Company Name</th>\n                            <th>Office Phone</th>\n                            <th class="width-100">Actions</th>\n                        </tr>\n                        </thead>\n                        <tbody>\n                        <tr rv-each-model="options.colInsurerCompanies.models < options.colInsurerCompanies.models">\n                            <td>\n                                <a href="javascript:void(0);" class="insurer_form_edit" rv-data-id="model:id < model:id">{model:companyName < :companyName}</a>\n                            </td>\n                            <td>\n                                {model:officePhone < :officePhone}\n                            </td>\n                            <td>\n                                <a href="javascript:void(0);" class="btn btn-link insurer_form_edit" rv-data-id="model:id < model:id">\n                                    <i class="fa fa-edit"></i>\n                                </a>\n                                <a href="javascript:void(0);" class="btn btn-link c-red remove_insurer_company" rv-data-id="model:id < model:id">\n                                    <i class="fa fa-remove"></i>\n                                </a>\n                            </td>\n                        </tr>\n                        <tr rv-unless="options.colInsurerCompanies.length">\n                            <td colspan="3">\n                                <strong>No record.</strong>\n                            </td>\n                        </tr>\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n        </div>\n\n\n        <div class="form-group m-bottom-5">\n            <div class=" col-sm-4 control-label">\n                <button id="btn-InsurerCompanies" class="btn-casefriend btn-lg">Save File Changes</button>\n            </div>\n        </div>\n    </div>\n</div>'},this.App.Templates.filesFileSubroTabsClientRepClientRepForm=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <h4 class="modal-title" rv-if=\'model.isNew\' id="modalCase">Create New Client Rep/Adjuster</h4>\n    <h4 class="modal-title" rv-unless=\'model.isNew\' id="modalCase">Edit Existing Client Rep/Adjuster</h4>\n</div>\n<div class="modal-body">\n    <form>\n        <div class="panel-client-rep p-top-15">\n            <div class="form-horizontal">\n                <div class="form-group m-bottom-5">\n                    <h2 class=\'font-bold font-size-22 p-bottom-10 col-sm-12\'>Required:\n                        <small class="text-danger" rv-if="model:UCL"> You cannot edit the required information of this clientRep/adjuster</small>\n                        <small class="text-success" rv-unless="model:UCL"> You can edit the required information of this clientRep/adjuster</small>\n                    </h2>\n                </div>\n                <input type="hidden" name="manager" rv-value="model:manager">\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> First:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="first" rv-value="model:first" rv-unless="model:UCL" required>\n                        <div class="m-7" id="first" rv-if="model:UCL">{model:first}</div>\n                        <input rv-if="model:UCL" type="hidden" rv-value="model:first" name="first">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Middle:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="middle" rv-value="model:middle" placeholder="middle name is optional" rv-unless="model:UCL">\n                        <div class="m-7" id="middle" rv-if="model:UCL">{model:middle}</div>\n                        <input rv-if="model:UCL" type="hidden" rv-value="model:middle" name="middle">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Last:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="Last" rv-value="model:last" rv-unless="model:UCL" required>\n                        <div class="m-7" id="last" rv-if="model:UCL">{model:last}</div>\n                        <input rv-if="model:UCL" type="hidden" rv-value="model:last" name="last">\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Office Phone:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="phone" rv-value="model:phone" rv-unless="model:UCL" required>\n                        <div class="m-7" id="phone" rv-if="model:UCL">{model:phone}</div>\n                        <input rv-if="model:UCL" type="hidden" rv-value="model:phone" name="phone">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Email:</label>\n                    <div class="col-sm-8">\n                        <input type="email" class="form-control" name="email" rv-value="model:email" rv-unless="model:UCL" required>\n                        <div class="m-7" id="email" rv-if="model:UCL">{model:email}</div>\n                        <input rv-if="model:UCL" type="hidden" rv-value="model:email" name="email">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <hr class="hr-white"/>\n\n                    <h2 class=\'font-bold font-size-22 p-bottom-10 col-sm-6\'>Firm Settings Optional:</h2>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Office Phone Ext:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="phoneExtension" rv-value="model:phoneExtension">\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Cell Phone:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="cell" rv-value="model:cell">\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Fax:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="fax" rv-value="model:fax">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Notes:</label>\n                    <div class="col-sm-8">\n                        <textarea class="form-control" rows="5" rv-value="model:notes" name="notes">{model:notes}</textarea>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </form>\n</div>\n\n<div class="modal-footer">\n    <button type="button" class="btn btn-default" rv-on-click=\'closeModal\'>Close</button>\n    <button type="button" class="tst-createNewClientRep-save-btn btn btn-primary" id=\'save-client-rep\'>Save changes</button>\n</div>';

},this.App.Templates.filesFileSubroTabsClientRepConfirmDeleteModal=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <h4 class="modal-title" id="myModalLabel">Remove Temporary Client Rep/Adjuster</h4>\n</div>\n<div class="modal-body">\n    <h2 class="t-align-c fs-medium">Are you sure you want to remove this Temp Client Rep/Adjuster</h2>\n</div>\n<div class="modal-footer">\n    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n    <button type="button" class="btn btn-danger" id=\'delete-temp-client-rep\'>Remove Temp Client Rep/Adjuster</button>\n</div>'},this.App.Templates.filesFileSubroTabsClientRepPanel=function(a){{var b="";_.escape}return b+='<div class="panel-client-rep p-top-15" data-permission="27">\n    <div class="form-horizontal">\n        <form id="form-client-rep">\n            <div rv-if="options.fileModel.original.tempClientRepID">\n                <div class="form-group m-bottom-5">\n                    <h2 class=\'font-bold font-size-22 p-bottom-10 col-sm-8 col-sm-offset-1\'>\n                        <a class="tmp-ad-info-down-arrow display-none" href="javascript:void(0);"><i class="fa fa-chevron-down"></i></a>\n                        <a class="tmp-ad-info-up-arrow" href="javascript:void(0);"><i class="fa fa-chevron-up"></i></a>\n                        Temp Client Rep/Adjuster: {options.modTempClientRep:last} {options.modTempClientRep:first} {options.modTempClientRep:middel}\n                        <a class="tst-remove-tempAdjuster-btn btn btn-danger" href="javascript:void(0);" title="Remove Temp ClientRep/Adjuster" id="delete-tmp-da">Remove Temp ClientRep/Adjuster</a>\n                    </h2>\n                </div>\n                <div class="tmp-ad-info-container">\n                    <div class="form-group m-bottom-5">\n                        <label class="col-sm-2 font-size-15 control-label">First:</label>\n                        <div class="col-sm-8">\n                            <div class="p-top-5">{options.modTempClientRep:first}</div>\n                        </div>\n                    </div>\n                    <div class="form-group m-bottom-5">\n                        <label class="col-sm-2 font-size-15 control-label">Middle:</label>\n                        <div class="col-sm-8">\n                            <div class="p-top-5">{options.modTempClientRep:middle}</div>\n                        </div>\n                    </div>\n                    <div class="form-group m-bottom-5">\n                        <label class="col-sm-2 font-size-15 control-label">Last:</label>\n                        <div class="col-sm-8">\n                            <div class="p-top-5">{options.modTempClientRep:last}</div>\n                        </div>\n                    </div>\n\n                    <div class="form-group m-bottom-5">\n                        <label class="col-sm-2 font-size-15 control-label">Office Phone:</label>\n                        <div class="col-sm-8">\n                            <div class="p-top-5">{options.modTempClientRep:phone}</div>\n                        </div>\n                    </div>\n\n                    <div class="form-group m-bottom-5">\n                        <label class="col-sm-2 font-size-15 control-label">Office Phone Ext:</label>\n                        <div class="col-sm-8">\n                            <div class="p-top-5">{options.modTempClientRep:phoneExtension}</div>\n                        </div>\n                    </div>\n\n                    <div class="form-group m-bottom-5">\n                        <label class="col-sm-2 font-size-15 control-label">Cell Phone:</label>\n                        <div class="col-sm-8">\n                            <div class="p-top-5">{options.modTempClientRep:cell}</div>\n                        </div>\n                    </div>\n\n                    <div class="form-group m-bottom-5">\n                        <label class="col-sm-2 font-size-15 control-label">Fax:</label>\n                        <div class="col-sm-8">\n                            <div class="p-top-5">{options.modTempClientRep:fax}</div>\n                        </div>\n                    </div>\n\n                    <div class="form-group m-bottom-5">\n                        <label class="col-sm-2 font-size-15 control-label">Email:</label>\n                        <div class="col-sm-8">\n                            <div class="p-top-5">\n                                <a rv-href="options.modTempClientRep:email" class=\'mailtoWithSubject\'>{options.modTempClientRep:email}</a>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class="form-group m-bottom-5">\n                        <label class="col-sm-2 font-size-15 control-label">Notes:</label>\n                        <div class="col-sm-8">\n                            <div class="p-top-5">{options.modTempClientRep:notes}</div>\n                        </div>\n                    </div>\n                </div>\n                <hr class="hr-white"/>\n            </div>\n\n            <div class="form-group m-bottom-5">\n                <div class="col-sm-offset-2 col-sm-8">\n                    <em>Client: {options.fileModel:clientNameTypeahead}</em>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Search Client Rep/Adjuster:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control search-files typeahead client_rep_typeahead" name="clientRepName" rv-value="options.fileModel:clientRepNameTypeahead" required>\n                    <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="clientRepName"><i class="fa fa-chevron-down"></i></a>\n                </div>\n                <div class="input-group-btn">\n                    <a class="btn btn-default" id=\'client_rep_form_edit\' href="javascript:void(0);" data-permission="60"><i class="fa fa-pencil"></i></a>\n                    <a class="btn btn-default" id=\'client_rep_form_new\' href="javascript:void(0);" data-permission="59"><i class="fa fa-plus"></i></a>\n                    <a href="javascript:void(0);" class="btn btn-default control-tooltip" data-help-id="fileInputAdjusterSearchHelp">\n                        <i class="fa fa-question-circle fa-lg-circle fa-lg"></i>\n                    </a>\n                </div>\n            </div>\n\n            <div rv-if="options.modClientRep:user_id">\n                <div class="form-group m-bottom-5">\n                    <hr class="hr-white"/>\n                    <h2 class=\'font-bold font-size-22 p-bottom-10 col-sm-4 col-sm-offset-1\'>Client Rep/Adjuster Info:</h2>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label">First:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modClientRep:first}</div>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label">Middle:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modClientRep:middle}</div>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label">Last:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modClientRep:last}</div>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label">Office Phone:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modClientRep:phone}</div>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label">Office Phone Ext:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modClientRep:phoneExtension}</div>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label">Cell Phone:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modClientRep:cell}</div>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label">Fax:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modClientRep:fax}</div>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label">Email:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">\n                            <a rv-href="options.modClientRep:email" class=\'mailtoWithSubject\'>{options.modClientRep:email}</a>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label">Notes:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modClientRep:notes}</div>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <div class=" col-sm-6 control-label">\n                        <button type="button" id=\'assign-client_rep\' class="btn-casefriend btn-lg">Assign Client Rep/Adjuster</button>\n                        <button type="button" id=\'temp-client-rep-btn\' class="btn-casefriend btn-lg">Temporary Client Rep/Adjuster</button>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <hr class="hr-white"/>\n                    <h2 class=\'font-bold font-size-22 p-bottom-10 col-sm-6 col-sm-offset-1\'>Files associated with Client Rep/Adjuster:\n                        <a class=" p-left-10 control-tooltip fs-medium" data-help-id="fileInputAdjusterAssociatedFiles" href="javascript:void(0);" data-original-title="" title="" tooltip-initialized="true"><i class="fa fa-question-circle c-black"></i></a></h2>\n                </div>\n\n                <div class="form-group m-bottom-5" rv-if="colWCFiles.length < .length">\n                    <label class="col-lg-2 font-size-15 control-label c-grey-medium">WC Files:</label>\n                </div>\n\n                <div class="form-group m-bottom-5" rv-if="colWCFiles.length < .length">\n                    <div rv-each-files="colWCFiles.models" class="col-lg-offset-1 col-lg-5 p-top-7">\n                        <span class="file-icon">{files:fileStatus}</span>\n                        <a class="gotoFile" role="button" rv-data-id="files:fileNumber"><i class="fa fa-search fa-lg"></i></a>\n                        <a class="goto-file-new-tab" rv-href="files:fileNumber" target="_blank"><i class="fa fa-search-plus fa-lg"></i></a>\n                        <a class="gotoFile" role="button" rv-data-id="files:fileNumber">\n                            <span>{files:fileTitle}</span>\n                        </a>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5" rv-if="colSubroFiles.length < .length">\n                    <label class="col-lg-2 font-size-15 control-label c-grey-medium">Subro Files:</label>\n                </div>\n\n                <div class="form-group m-bottom-5" rv-if="colSubroFiles.length < .length">\n                    <div rv-each-files="colSubroFiles.models" class="col-lg-offset-1 col-lg-5 p-top-7">\n                        <span class="file-icon">{files:fileStatus}</span>\n                        <a class="gotoFile" role="button" rv-data-id="files:subroFileNumber"><i class="fa fa-search fa-lg"></i></a>\n                        <a class="goto-file-new-tab" rv-href="files:subroFileNumber" target="_blank"><i class="fa fa-search-plus fa-lg"></i></a>\n                        <a class="gotoFile" role="button" rv-data-id="files:subroFileNumber">\n                            <span>{files:fileTitle}</span>\n                        </a>\n                    </div>\n                </div>\n            </div>\n            <span class=\'display-none\'></span>\n        </form>\n    </div>\n</div>'},this.App.Templates.filesFileSubroTabsClientRepTempClientRepModal=function(a){{var b="";_.escape}return b+='<div class="modal-header" data-permission="27">\n    <h4 class="modal-title" id="myModalLabel">Assign Temporary Client Rep: </h4>\n</div>\n<div class="modal-body" data-permission="27">\n    <div class="form-horizontal">\n        <div class="form-group m-bottom-5">\n            <div class="col-sm-offset-2 col-sm-8">\n                <em>Client: {options.clientName}</em>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-2 font-size-15 control-label">Temp Client Rep/Adjuster:</label>\n            <div class="col-sm-8">\n                <input type="text" class="form-control search-files typeahead tempClientRep_typeahead" name="tempClientRepName" rv-value="options.fileModel:tempClientRepNameTypeahead">\n                <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="tempClientRepName"><i class="fa fa-chevron-down"></i></a>\n            </div>\n            <div class="input-group-btn">\n                <a class="btn btn-default" id=\'tempClientRep_form_edit\' href="javascript:void(0);" data-permission="60"><i class="fa fa-pencil"></i></a>\n                <a class="btn btn-default" id=\'tempAClientRep_form_new\' href="javascript:void(0);" data-permission="59"><i class="fa fa-plus"></i></a>\n                <a class="btn btn-default control-tooltip" data-help-id="fileInputTempAdjusterNameHelp" href="javascript:void(0);"><i class="fa fa-question-circle fa-lg"></i></a>\n            </div>\n        </div>\n\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-2 font-size-15 control-label">First:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{model:first}</div>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-2 font-size-15 control-label">Middle:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{model:middle}</div>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-2 font-size-15 control-label">Last:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{model:last}</div>\n            </div>\n        </div>\n\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-2 font-size-15 control-label">Office Phone:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{model:phone}</div>\n            </div>\n        </div>\n\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-2 font-size-15 control-label">Office Phone Ext:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{model:phoneExtension}</div>\n            </div>\n        </div>\n\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-2 font-size-15 control-label">Cell Phone:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{model:cell}</div>\n            </div>\n        </div>\n\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-2 font-size-15 control-label">Fax:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{model:fax}</div>\n            </div>\n        </div>\n\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-2 font-size-15 control-label">Email:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{model:email}</div>\n            </div>\n        </div>\n\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-2 font-size-15 control-label">Notes:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{model:notes}</div>\n            </div>\n        </div>\n    </div>\n</div>\n<div class="modal-footer" data-permission="27">\n    <button type="button" class="tst-assignTempA-close-btn btn btn-default" data-dismiss="modal">Close</button>\n    <button type="button" class="btn btn-primary" id=\'assign-tempClientRep\'> Assign Temp ClientRep/Adjuster</button>\n</div>'},this.App.Templates.filesFileSubroTabsDefendantsDefendantForm=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <h4 class="modal-title" rv-if=\'model.isNew\' id="modalDefendat">New Defendant</h4>\n    <h4 class="modal-title" rv-unless=\'model.isNew\' id="modalDefendat">Edit Defendant</h4>\n</div>\n<div class="modal-body">\n    <div role="tabpanel" class="tab-pane active" id="tab-defendant">\n        <div class="panel-general p-top-15">\n            <div class="form-horizontal form-general">\n                <form class="form-horizontal form-defendat">\n                    <div class="form-group m-bottom-5">\n                        <label class="col-sm-3 control-label">File Name:</label>\n                        <div class="col-sm-8">\n                            <label class="m-top-8">{options.fileModel:subroInternalFileName}</label>\n                        </div>\n                    </div>\n\n                    <div class="form-group m-bottom-5">\n                        <label class="col-sm-3 control-label"><i\n                                    class="fa fa-asterisk c-red font-size-10"></i> Defendant\n                            Name:</label>\n                        <div class="col-sm-8">\n                            <input type="text" class="form-control" name="defendantName"\n                                   rv-value="modelData:defendantName" required>\n                        </div>\n                    </div>\n                    <div class="form-group m-bottom-5">\n                        <hr class="hr-white"/>\n                    </div>\n\n                    <div class="form-group m-bottom-5">\n                        <label class="col-sm-3 font-size-15 control-label"> Defendant\n                            Firm:</label>\n                        <div class="col-sm-7">\n                            <input type="text"\n                                   class="form-control search-files typeahead aaFirm_typeahead"\n                                   name="appAttorneyFirm"\n                                   rv-value="modelData:defendantFirmNameTypeahead">\n                            <a href="javascript:void(0);" class="icon-typeahead-down"\n                               data-input-name="appAttorneyFirm"><i class="fa fa-chevron-down"></i></a>\n                        </div>\n                        <div class="input-group-btn">\n                            <a class="btn btn-default" id=\'aaFirm_form_edit\' href="javascript:void(0);"><i class="fa fa-pencil"></i></a>\n                            <a class="tst-addDefFirm-form btn btn-default" id=\'aaFirm_form_new\'\n                               href="javascript:void(0);"><i\n                                        class="fa fa-plus"></i></a>\n                            <a class="btn btn-default control-tooltip"\n                               data-help-id="fileInputDefAAFirmHelp" href="javascript:void(0);"><i class="fa fa-question-circle fa-lg-circle fa-lg"></i></a>\n                        </div>\n                    </div>\n\n                    <div id="attorney-container">\n                        <div class="form-group m-bottom-5">\n                            <hr class="hr-white"/>\n                        </div>\n                        <div class="form-group m-bottom-5">\n                            <label class="col-sm-3 font-size-15 control-label"> Defendant Attorney:</label>\n                            <div class="col-sm-7">\n                                <input type="text" class="form-control search-files typeahead aa_typeahead"\n                                       name="appAttorney" rv-value="modelData:defendantLawyerTypeahead">\n                                <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="appAttorney"><i\n                                            class="fa fa-chevron-down"></i></a>\n                            </div>\n                            <div class="input-group-btn">\n                                <a class="tst-defEdit-pencil btn btn-default" id=\'aa_form_edit\'\n                                   href="javascript:void(0);"><i class="fa fa-pencil"></i></a>\n                                <a class="tst-addDefAttorney-form btn btn-default" id=\'aa_form_new\'\n                                   href="javascript:void(0);"><i class="fa fa-plus"></i></a>\n                                <a class="btn btn-default control-tooltip" data-help-id="fileInputDefAAHelp"\n                                   href="javascript:void(0);"><i class="fa fa-question-circle fa-lg-circle fa-lg"></i></a>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class="form-group m-bottom-5 m-top-15">\n                        <label class="col-sm-3 control-label">Notes:</label>\n                        <div class="col-sm-8">\n                                        <textarea rows="5" cols="5" class="tst-notes-box form-control" name="coverages"\n                                                  rv-value="modelData:notes"></textarea>\n                        </div>\n                    </div>\n                </form>\n            </div>\n        </div>\n    </div>\n</div><!-- end of modal body -->\n<div class="modal-footer">\n    <button type="button" class="tst-defForm-close-btn btn btn-default" data-dismiss="modal">Close\n    </button>\n    <button type="button" class="tst-newDef-save-btn btn btn-primary" rv-on-click="doSaveDefendant">Save\n        changes\n    </button>\n</div>\n'},this.App.Templates.filesFileSubroTabsDefendantsPanel=function(a){{var b="";_.escape}return b+='<div id=\'defendantModal\'></div>\n<div class="panel-co-def p-top-15">\n    <div class="form-horizontal">\n        <div class="form-group">\n            <div class="col-lg-12 font-size-16 font-bold">Defendants ({collection.length}):</div>\n            <div class="clearfix"></div>\n            <div class="col-sm-10 col-sm-offset-2">\n                <table class="table table-hover m-bottom-0">\n                    <thead>\n                    <tr>\n                        <th>Defendant</th>\n                        <th class="width-20">\n                            <span>Remove</span>\n                        </th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    <tr rv-each-row="options.collection.models < options.collection.models">\n                        <td>\n                            <a href="javascript:void(0);" rv-on-click="doEditDefendant" rv-data-id="row:defendantID < row:defendantID">\n                                {row:defendantName < row:defendantName}\n                                <i rv-if="row:firmName"> - {row:defendantFirmNameTypeahead < row:defendantFirmNameTypeahead}</i>\n                                <i rv-if="row:lawyerLastName"> - {row:defendantLawyerTypeahead < row:defendantLawyerTypeahead}</i>\n                            </a>\n                        </td>\n                        <td class="t-align-center">\n                            <a href="javascript:void(0);" rv-on-click="removeDefendant" class="c-red">\n                                <i class="fa fa-remove"></i>\n                            </a>\n                        </td>\n                    </tr>\n                    <tr rv-unless="options.collection.length">\n                        <td colspan="2">\n                            <STRONG>NONE</STRONG>\n                        </td>\n                    </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n\n        <div class="form-group m-bottom-5">\n            <div class="col-sm-offset-2 col-sm-4 p-top-10">\n                <button class="tst-addDef-btn btn-casefriend btn-lg tstAddDef" rv-on-click="doAddDefendant">Add Defendant</button>\n            </div>\n        </div>\n    </div>\n</div>\n'},this.App.Templates.filesFileSubroTabsEmployerPanel=function(a){{var b="";_.escape}return b+='<div class="panel-employer p-top-15">\n    <div class="form-horizontal">\n        <form id="form-employer">\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">Search Employer:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control typeahead employer_typeahead" name="employerName" rv-value="options.fileModel:employerCompanyTypeahead">\n                    <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="employerName"><i class="fa fa-chevron-down"></i></a>\n\n                </div>\n                <div class="input-group-btn">\n                    <a class="tst-employerEdit-pencil btn btn-default" id=\'employer_form_edit\' href="javascript:void(0);"><i class="fa fa-pencil"></i></a>\n                    <a class="tst-newEmployer-form-btn btn btn-default" id=\'employer_form_new\' href="javascript:void(0);"><i class="fa fa-plus"></i></a>\n                    <a class="btn btn-default control-tooltip" data-help-id="fileInputEmployerSearchHelp" href="javascript:void(0);"><i class="fa fa-question-circle fa-lg-circle fa-lg"></i></a>\n                </div>\n            </div>\n\n            <div rv-if="options.modEmployer:companyID">\n                <div class="form-group m-bottom-5">\n                    <hr class="hr-white"/>\n                    <h2 class=\'font-bold font-size-22 p-bottom-10 col-sm-4 col-sm-offset-2\'>Employer Info:</h2>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label">ID:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modEmployer:companyID}</div>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label">Name:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modEmployer:companyName}</div>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label">Office Phone:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modEmployer:officePhone}</div>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label">Fax:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modEmployer:faxNumber}</div>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label">Company Notes:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modEmployer:companyNotes}</div>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <h3 class="font-bold sub-header-forms p-bottom-10 col-sm-3 col-sm-offset-2">Mailing</h3>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label">Address:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modEmployer:mailingAddress}</div>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label">City:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modEmployer:mailingCity}</div>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label">State:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modEmployer:mailingStateName}</div>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label">Zip:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modEmployer:mailingZip}</div>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <h3 class="font-bold sub-header-forms p-bottom-10 col-sm-3 col-sm-offset-2">Billing</h3>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label">Address:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modEmployer:billingAddress}</div>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label">City:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modEmployer:billingCity}</div>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label">State:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modEmployer:billingStateName}</div>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label">Zip:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modEmployer:billingZip}</div>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label">Toll Free Phone:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modEmployer:tollFreePhone}</div>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <h3 class="font-bold sub-header-forms p-bottom-10 col-sm-3 col-sm-offset-2">Physical</h3>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label">Address:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modEmployer:physicalAddress}</div>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label">City:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modEmployer:physicalCity}</div>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label">State:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modEmployer:physicalStateName}</div>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label">Zip:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modEmployer:physicalZip}</div>\n                    </div>\n                </div>\n            </div>\n\n            <div class="form-group m-bottom-5">\n                <div class=" col-sm-4 control-label">\n                    <button id=\'assign-employer\' class="btn-casefriend btn-lg">\n                        Assign Employer\n                    </button>\n                </div>\n            </div>\n        </form>\n    </div>\n</div>\n';

},this.App.Templates.filesFileSubroTabsGeneralPanel=function(a){{var b="";_.escape}return b+='<div class="panel-general p-top-15">\n    <div class="form-horizontal form-general">\n        <form>\n            <div class="form-group m-bottom-5" rv-if="options.fileModel.isNew < options.fileModel.isNew">\n                <label class="col-sm-2 font-size-15 control-label">Client Rep:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control search-files general typeahead client_rep_typeahead" name="clientRepName" rv-value="options.fileModel:clientRepNameTypeahead">\n                    <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="clientRepName"><i class="fa fa-chevron-down"></i></a>\n                </div>\n                <div class="clearfix"></div>\n                <hr class="hr-white m-top-20 display-block">\n            </div>\n\n            <div class="form-group m-bottom-5">\n                <h2 class=\'font-bold font-size-20 p-bottom-10 col-sm-3 col-sm-offset-2\'>Required</h2>\n            </div>\n\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Client:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="typeahead form-control search-files client_typeahead" name="clientName" rv-value="options.fileModel:clientNameTypeahead" required>\n                    <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="clientName"><i class="fa fa-chevron-down"></i></a>\n                </div>\n                <div class="input-group-btn" data-permission="103">\n                    <a class="btn btn-default" id=\'edit_client\' href="javascript:void(0);"><i class="fa fa-pencil"></i></a>\n                    <a class="btn btn-default" id=\'new_client\' href="javascript:void(0);"><i class="fa fa-plus"></i></a>\n                    <a class="btn btn-default control-tooltip" data-help-id="fileInputEmployerHelp" href="javascript:void(0);"><i class="fa c-black p-left-5 fa-question-circle"></i></a>\n                </div>\n            </div>\n            <div rv-if="options.fileModel:subroFileNumber">\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Our File Name:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="subroInternalFileName" rv-value="options.fileModel:subroInternalFileName" placeholder="Name will be autogenerated" required>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <div class="col-sm-offset-2 col-sm-8  font-size-12 c-gray">\n                        <em>Edit Case Name</em>\n                        <i class="fa fa-chevron-down oficialFileName-down-arrow"></i>\n                        <i class="fa fa-chevron-up oficialFileName-up-arrow display-none"></i>\n                        <a class="control-tooltip fs-medium" data-help-id="fileInputEditWCABNameHelp" href="javascript:void(0);"><i class="fa c-black p-left-5 fa-question-circle"></i></a>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5 oficialFileName-container display-none">\n                    <label class="col-sm-2 font-size-15 control-label">Office Case Name:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="subroOfficialFileName" rv-value="options.fileModel:subroOfficialFileName" placeholder="Name will be autogenerated">\n                    </div>\n                </div>\n            </div>\n\n            <div rv-unless="options.fileModel:subroFileNumber">\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Injured Worker First:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="newFileInjuredWorkerFirstName" rv-value="options.fileModel:injuredWorkerFirstName" required>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label">Injured Worker Middle:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="newFileInjuredWorkerMiddleName" rv-value="options.fileModel:injuredWorkerMiddleName" placeholder="Middle name is optional">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Injured Worker Last:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="newFileInjuredWorkerLastName" rv-value="options.fileModel:injuredWorkerLastName" required>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Our File Name:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="subroInternalFileName" rv-value="options.fileModel:subroInternalFileName" placeholder="Name will be autogenerated" required>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <div class="col-sm-offset-2 col-sm-8  font-size-12 c-gray">\n                        <em>Edit Case Name</em>\n                        <i class="fa fa-chevron-down oficialFileName-down-arrow"></i>\n                        <i class="fa fa-chevron-up oficialFileName-up-arrow display-none"></i>\n                        <a class="control-tooltip fs-medium" data-help-id="fileInputEditWCABNameHelp" href="javascript:void(0);"><i class="fa c-black p-left-5 fa-question-circle"></i></a>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5 oficialFileName-container display-none">\n                    <label class="col-sm-2 font-size-15 control-label">Office Case Name:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="subroOfficialFileName" rv-value="options.fileModel:subroOfficialFileName" placeholder="Name will be autogenerated">\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Subro Attorney:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="typeahead form-control search-files new_file_da_typeahead" name="newFileDA" required>\n                        <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="newFileDA"><i class="fa fa-chevron-down"></i></a>\n                    </div>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> File Type:</label>\n                <div class="col-sm-8">\n                    <select class="form-control" name="fileType" rv-value="options.fileModel:subroFileTypeID" required>\n                        <option value="">-</option>\n                        <option rv-each-row="options.colFileTypes.models" rv-value="row:fileTypeID" rv-data-flatfee="row:flatfee" selected>\n                            {row:fileType}\n                        </option>\n                    </select>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5 p-top-10">\n                <label class="col-sm-2 font-size-15 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> File Status:</label>\n                <div class="col-lg-6 col-md-6 col-sm-8 p-bottom-10">\n                    <div class="input-group">\n                        <div class="input-group-addon width-170" id="currentSubroFileStatus">\n                                <span rv-show="options.fileModel:currentSubroFileStatus < options.fileModel:currentSubroFileStatus">\n                                <i rv-if="isFileOpened < options.fileModel:currentSubroFileStatus" class="fa fa-folder-open c-blue-link" aria-hidden="true"></i>\n                                <i rv-unless="isFileOpened < options.fileModel:currentSubroFileStatus" class="fa fa-folder c-red-dark" aria-hidden="true"></i>\n                                </span>\n                            Subro {printSubroCurrentStatus < options.fileModel:currentSubroFileStatus}:\n                        </div>\n                        <input class="form-control input-file-status bgc-white" readonly id="inputSubro" rv-value="options.fileModel:subroOpenDate < :subroOpenDate" placeholder="yyyy-mm-dd" data-toggle="popover" data-title="Change Status" data-placement="bottom" role="button" data-file-type="Subro">\n                        <div id="history-file-status-subro" data-column="previousSubroFileOpens" class="btn input-group-addon popover-history-file-status" data-toggle="popover" role="button" data-placement="bottom" data-container="body">\n                            <i class="fa fa-list" aria-hidden="true"></i>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div class="form-group m-bottom-5">\n                <div class="col-lg-offset-2 col-lg-6 col-md-offset-2 col-md-6 col-sm-offset-2 col-sm-8 p-bottom-10">\n                    <div class="input-group">\n                        <div class="input-group-addon width-170" id="currentLienFileStatus">\n                                <span rv-show="options.fileModel:currentLienFileStatus < options.fileModel:currentLienFileStatus">\n                                    <i rv-if="isFileLienOpened < options.fileModel:currentLienFileStatus" class="fa fa-folder-open c-blue-link" aria-hidden="true"></i>\n                                    <i rv-unless="isFileLienOpened < options.fileModel:currentLienFileStatus" class="fa fa-folder c-red-dark" aria-hidden="true"></i>\n                                </span>\n                            Lien {printLienCurrentStatus < options.fileModel:currentLienFileStatus}:\n                        </div>\n                        <input class="form-control input-file-status bgc-white" readonly id="inputLien" rv-value="options.fileModel:openLienDate < :openLienDate" placeholder="yyyy-mm-dd" data-toggle="popover" data-title="Change Status" data-placement="bottom" role="button" data-file-type="Lien">\n                        <div id="history-file-status-lien" data-column="previousLienFileOpens" class="btn input-group-addon popover-history-file-status" data-toggle="popover" role="button" data-placement="bottom" data-container="body">\n                            <i class="fa fa-list" aria-hidden="true"></i>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div class="form-group m-bottom-5">\n                <div class="col-lg-offset-2 col-lg-6 col-md-offset-2 col-md-6 col-sm-offset-2 col-sm-8 p-bottom-10">\n                    <div class="input-group">\n                        <div class="input-group-addon width-170" id="currentInterventionFileStatus">\n                                <span rv-show="options.fileModel:currentInterventionFileStatus < options.fileModel:currentInterventionFileStatus">\n                                    <i rv-if="isFileInterventionOpened < options.fileModel:currentInterventionFileStatus" class="fa fa-folder-open c-blue-link" aria-hidden="true"></i>\n                                    <i rv-unless="isFileInterventionOpened < options.fileModel:currentInterventionFileStatus" class="fa fa-folder c-red-dark" aria-hidden="true"></i>\n                                </span>\n                            Intervention {printInterventionCurrentStatus < options.fileModel:currentInterventionFileStatus}:\n                        </div>\n                        <input class="form-control input-file-status bgc-white" readonly id="inputIntervention" rv-value="options.fileModel:interventionOpenDate < :interventionOpenDate" placeholder="yyyy-mm-dd" data-toggle="popover" data-title="Change Status" data-placement="bottom" role="button" data-file-type="Intervention">\n                        <div id="history-file-status-intervention" data-column="previousInterventionFileOpens" class="btn input-group-addon popover-history-file-status" data-toggle="popover" role="button" data-placement="bottom" data-container="body">\n                            <i class="fa fa-list" aria-hidden="true"></i>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div class="form-group m-bottom-5">\n                <hr class="hr-white"/>\n                <h2 class=\'font-bold font-size-20 p-bottom-10 col-sm-3 col-sm-offset-2\'>Optional</h2>\n            </div>\n\n            <div class="form-group m-bottom-5" rv-if="options.fileModel.isNew">\n                <label class="col-sm-2 control-label"> Employer:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="typeahead form-control search-files new_file_employer_typeahead" name="newFileEmployer">\n                    <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="newFileEmployer"><i class="fa fa-chevron-down"></i></a>\n                </div>\n                <div class="input-group-btn" data-permission="103">\n                    <a class="btn btn-default" id=\'file_creation_employer_form_edit\' href="javascript:void(0);"><i class="fa fa-pencil"></i></a>\n                    <a class="btn btn-default" id=\'file_creation_employer_form_new\' href="javascript:void(0);"><i class="fa fa-plus"></i></a>\n                    <a class="btn btn-default control-tooltip" data-help-id="fileInputEmployerHelp" href="javascript:void(0);"><i class="fa c-black p-left-5 fa-question-circle"></i></a>\n                </div>\n            </div>\n\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">Billing Claim #:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control" name="subroBillingClaimNum" rv-value="options.fileModel:subroBillingClaimNum">\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">Claim DOL:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control datepicker" name="subroClaimDOL" placeholder="yyyy-mm-dd" rv-value="options.fileModel:subroClaimDOL">\n                </div>\n            </div>\n            <div class="form-group m-bottom-5" rv-if="requireMatterID">\n                <label class="col-sm-2 font-size-15 control-label">Matter ID:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control" name="matter_id" maxlength="10" rv-value="options.fileModel:matter_id">\n                </div>\n            </div>\n            <div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label">Plan of Action:</label>\n                    <div class="col-sm-8">\n                        <textarea class="form-control" rows="5" rv-value="options.fileModel:subroPlanOfAction" name="subroPlanOfAction"></textarea>\n                    </div>\n                </div>\n            </div>\n            <div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label">Coverages:</label>\n                    <div class="col-sm-8">\n                        <textarea class="form-control" rows="5" rv-value="options.fileModel:subroCoverages" name="subroCoverages"></textarea>\n                    </div>\n                </div>\n            </div>\n            <div class="form-group m-top-15 m-bottom-5" id="milestones-container">\n                <div class="col-sm-2">\n                    <label class="font-bold">Active Milestones:</label>\n                    <a href="javascript:void(0);" rv-on-click="changeStateFlagMilestones">\n                        <i class="fa fa-arrow-down milestones-expanded display-none fa-lg"></i>\n                        <i class="fa fa-arrow-right milestones-inline fa-lg"></i>\n                    </a>\n\n                </div>\n                <div class="col-sm-8 display-inline-flex">\n                    <div class="milestones-inline">\n                            <span rv-each-row="options.colMilestones.models">\n                                <span rv-class="row:msColor">\n                                    {row:name} &nbsp;\n                                </span>\n                            </span>\n                    </div>\n                    <div class="milestones-expanded display-none">\n                        <table>\n                            <thead>\n                            <tr>\n                                <td class="p-right-10">Check</td>\n                                <td class="p-right-10">Milestone</td>\n                                <td class="">Status</td>\n                            </tr>\n                            </thead>\n                            <tbody>\n                            <tr rv-each-row="options.colMilestones.models" rv-data-tst-name=\'row:name\'>\n                                <td>\n                                    <input type="checkbox" class="tst-general-milestone milestone" rv-checked=\'row:selected\'/>\n                                </td>\n                                <td>\n                                    {row:name}\n                                </td>\n                                <td>\n                                    <span rv-if=\'row:selected\' rv-class="row:msColor"></span>\n                                </td>\n                            </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                    <a class="control-tooltip fs-medium" data-help-id="fileInputActiveMilestonesHelp" href="javascript:void(0);"><i class="fa c-black p-left-5 fa-question-circle"></i></a>\n                </div>\n            </div>\n\n            <div class="form-group m-bottom-5">\n                <div class="col-sm-offset-2 col-sm-10 p-top-10 general-file-actions">\n                    <div>\n                        <button rv-if="options.fileModel:subroFileNumber" class="tst-save-general-file save-general btn-casefriend btn-lg">Save File</button>\n                    </div>\n                    <div>\n                        <button rv-unless="options.fileModel:subroFileNumber" class="btn-goBack btn-casefriend btn-lg">Go Back</button>\n                        <button rv-unless="options.fileModel:subroFileNumber" class="tst-create-general-file save-general btn-casefriend btn-lg">Create File</button>\n                    </div>\n                </div>\n            </div>\n        </form>\n    </div>\n</div>\n\n<div class="panel-status-flow hidden">\n    <div class="btn-group width-203" role="group">\n        <button class="btn btn-default change-file-status" data-action="open">\n            <i class="fa fa-folder-open c-blue-link display-block" aria-hidden="true"></i>\n            Open\n        </button>\n        <button class="btn btn-default change-file-status" data-action="re-open">\n            <i class="fa fa-folder-open c-blue-link display-block" aria-hidden="true"></i>\n            Re-Open\n        </button>\n        <button class="btn btn-default change-file-status" data-action="close">\n            <i class="fa fa-folder c-red-dark display-block" aria-hidden="true"></i>\n            Close\n        </button>\n    </div>\n</div>'},this.App.Templates.filesFileSubroTabsInjuredWkrPanel=function(a){{var b="";_.escape}return b+='<div class="panel-injuredWorker p-top-15">\n    <div class="form-horizontal">\n        <form>\n            <div class="form-group m-bottom-5">\n                <h2 class=\'font-bold font-size-20 p-bottom-10 col-sm-3 col-sm-offset-2\'>Required</h2>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> First:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control" name="injuredWorkerFirstName" rv-value="options.fileModel:injuredWorkerFirstName" required>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">Middle:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control" name="injuredWorkerMiddleName" rv-value="options.fileModel:injuredWorkerMiddleName" placeholder="Middle name is optional">\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Last:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control" name="injuredWorkerLastName" rv-value="options.fileModel:injuredWorkerLastName" required>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <hr class="hr-white"/>\n                <h2 class=\'font-bold font-size-20 p-bottom-10 col-sm-3 col-sm-offset-2\'>Optional</h2>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">Date of Hire:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control datepicker date-mask" placeholder="yyyy-mm-dd" name="injuredWorkerDOH" rv-value="options.fileModel:injuredWorkerDOH">\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">Date of Birth:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control datepicker date-mask" placeholder="yyyy-mm-dd" name="injuredWorkerDOB" rv-value="options.fileModel:injuredWorkerDOB">\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">Job Title:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control" name="injuredWorkerJobTitle" rv-value="options.fileModel:injuredWorkerJobTitle">\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">SSN:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control" name="injuredWorkerSSN" rv-value="options.fileModel:injuredWorkerSSN">\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">Home Phone:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control" name="homePhone" rv-value="options.fileModel:injuredWorkerHomePhone">\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">Cell Phone:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control" name="cellPhone" rv-value="options.fileModel:injuredWorkerCellPhone">\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">Email:</label>\n                <div class="col-sm-8">\n                    <input type="email" class="form-control" name="injuredWorkerEmail" rv-value="options.fileModel:injuredWorkerEmail">\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <h3 class="font-bold sub-header-forms p-bottom-10 col-sm-3 col-sm-offset-2">Mailing</h3>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">Applicant Address:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control" name="appMailingAddress" rv-value="options.fileModel:injuredWorkerMailingAddress">\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">City:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control" name="appMailingCity" rv-value="options.fileModel:injuredWorkerMailingCity">\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">State:</label>\n                <div class="col-sm-8">\n                    <select class=\'state-helper form-control\' rv-value="options.fileModel:injuredWorkerMailingState" name=\'appMailingState\'></select>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">Zip:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control" name="appMailingZip" rv-value="options.fileModel:injuredWorkerMailingZip">\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <h3 class="font-bold sub-header-forms p-bottom-10 col-sm-3 col-sm-offset-2">Physical\n                    <a class="tst-AP-copy-btn btn btn-info copy-button-size" id="copy-to-address" href="javascript:void(0);"><i class="fa fa-files-o"></i> Copy Mailing Address</a>\n                </h3>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">Applicant Address:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control" name="appPhysicalAddress" rv-value="options.fileModel:injuredWorkerPhysicalAddress">\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">City:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control" name="appPhysicalCity" rv-value="options.fileModel:injuredWorkerPhysicalCity">\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">State:</label>\n                <div class="col-sm-8">\n                    <select class=\'state-helper form-control\' rv-value="options.fileModel:injuredWorkerPhysicalState" name="appPhysicalState"></select>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">Zip:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control" name="appPhysicalZip" rv-value="options.fileModel:injuredWorkerPhysicalZip">\n                </div>\n            </div>\n\n            <div class="form-group m-bottom-5">\n                <hr class="hr-white"/>\n                <h2 class=\'font-bold font-size-20 p-bottom-10 col-sm-3 col-sm-offset-2\'>Plaintiff\'s Attorney</h2>\n            </div>\n\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">Firm:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control  typeahead plaintiffFirmTypeahead" name="plaintiffFirmTypeahead" rv-value="options.fileModel:plaintiffFirmTypeahead">\n                    <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="plaintiffFirmTypeahead"><i class="fa fa-chevron-down"></i></a>\n                </div>\n                <div class="input-group-btn">\n                    <a class="tst-AAfirm-edit-pencil btn btn-default" id=\'editAAfirm_plaintiffAttorney\' href="javascript:void(0);"><i class="fa fa-pencil"></i></a>\n                    <a class="btn btn-default" id=\'newAAfirm_plaintiffAttorney\' href="javascript:void(0);"><i class="fa fa-plus"></i></a>\n                    <a class="btn btn-default control-tooltip" data-help-id="fileInputApplicantAttorneyFirmHelp" href="javascript:void(0);"><i class="fa fa-question-circle fa-lg-circle fa-lg"></i></a>\n                </div>\n            </div>\n\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">Attorney:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control typeahead plaintiffTypeahead" name="plaintiffTypeahead" rv-value="options.fileModel:plaintiffTypeahead">\n                    <a href="javascript:void(0);" class="icon-typeahead-down app-attorney-arrow" data-input-name="plaintiffTypeahead" id="app-attorney-arrow"><i class="fa fa-chevron-down"></i></a>\n                </div>\n                <div class="input-group-btn">\n                    <a class="tst-newAA-edit-pencil btn btn-default" id=\'editAA_plaintiffAttorney\' href="javascript:void(0);"><i class="fa fa-pencil"></i></a>\n                    <a class="btn btn-default" id=\'newAA_plaintiffAttorney\' href="javascript:void(0);"><i class="fa fa-plus"></i></a>\n                    <a class="btn btn-default control-tooltip" data-help-id="fileInputApplicantAttorneyHelp" href="javascript:void(0);"><i class="fa fa-question-circle fa-lg-circle fa-lg"></i></a>\n                </div>\n            </div>\n\n            <div rv-if="options.modPlaintiff:lawyerID">\n                <div class="form-group m-bottom-5">\n                    <hr class="hr-white"/>\n                    <h2 class=\'font-bold font-size-22 p-bottom-10 col-sm-4 col-sm-offset-2\'>Attorney Info:</h2>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 control-label">First Name:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modPlaintiff:lawyerFirstName}</div>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 control-label">Middle Name:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modPlaintiff:lawyerMiddleName}</div>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 control-label">Last Name:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modPlaintiff:lawyerLastName}</div>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 control-label">Office Phone:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modPlaintiff:lawyerOfficePhone}</div>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 control-label">Office Phone Ext:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modPlaintiff:lawyerPhoneExtension}</div>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 control-label">Cell Phone:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modPlaintiff:lawyerCellPhone}</div>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 control-label">Fax:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modPlaintiff:lawyerFax}</div>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 control-label">Email:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">\n                            <a role="button" rv-href="options.modPlaintiff:lawyerEmail" class=\'mailtoWithSubject\'>{options.modPlaintiff:lawyerEmail}</a>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 control-label">Receptionist:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modPlaintiff:lawyerReceptionist}</div>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 control-label">Notes:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modPlaintiff:lawyerNotes}</div>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 control-label">Tax ID:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">\n                            {options.modPlaintiff:lawyerTaxID}\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div class="form-group m-bottom-5">\n                <hr class="hr-white"/>\n                <h2 class=\'font-bold font-size-20 p-bottom-10 col-sm-3 col-sm-offset-2\'>Worker\'s Comp Attorney</h2>\n            </div>\n\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">Firm:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control typeahead workerCompFirmTypeahead" name="workerCompFirmTypeahead" rv-value="options.fileModel:workerCompFirmTypeahead">\n                    <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="workerCompFirmTypeahead"><i class="fa fa-chevron-down"></i></a>\n                </div>\n                <div class="input-group-btn">\n                    <a class="tst-AAfirm-edit-pencil btn btn-default" id=\'editAAfirm_workerComp\' href="javascript:void(0);"><i class="fa fa-pencil"></i></a>\n                    <a class="btn btn-default" id=\'newAAfirm_workerComp\' href="javascript:void(0);"><i class="fa fa-plus"></i></a>\n                    <a class="btn btn-default control-tooltip" data-help-id="fileInputApplicantAttorneyFirmHelp" href="javascript:void(0);"><i class="fa fa-question-circle fa-lg-circle fa-lg"></i></a>\n                </div>\n            </div>\n\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">Attorney:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control typeahead workerCompTypeahead" name="workerCompTypeahead" rv-value="options.fileModel:workerCompTypeahead">\n                    <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="workerCompTypeahead"><i class="fa fa-chevron-down"></i></a>\n                </div>\n                <div class="input-group-btn">\n                    <a class="tst-newAA-edit-pencil btn btn-default" id=\'editAA_workerComp\' href="javascript:void(0);"><i class="fa fa-pencil"></i></a>\n                    <a class="btn btn-default" id=\'newAA_workerComp\' href="javascript:void(0);"><i class="fa fa-plus"></i></a>\n                    <a class="btn btn-default control-tooltip" data-help-id="fileInputApplicantAttorneyHelp" href="javascript:void(0);"><i class="fa fa-question-circle fa-lg-circle fa-lg"></i></a>\n                </div>\n            </div>\n\n            <div rv-if="options.modWorkerComp:lawyerID">\n                <div class="form-group m-bottom-5">\n                    <hr class="hr-white"/>\n                    <h2 class=\'font-bold font-size-22 p-bottom-10 col-sm-4 col-sm-offset-2\'>Attorney Info:</h2>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 control-label">First Name:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modWorkerComp:lawyerFirstName}</div>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 control-label">Middle Name:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modWorkerComp:lawyerMiddleName}</div>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 control-label">Last Name:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modWorkerComp:lawyerLastName}</div>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 control-label">Office Phone:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modWorkerComp:lawyerOfficePhone}</div>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 control-label">Office Phone Ext:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modWorkerComp:lawyerPhoneExtension}</div>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 control-label">Cell Phone:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modWorkerComp:lawyerCellPhone}</div>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 control-label">Fax:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modWorkerComp:lawyerFax}</div>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 control-label">Email:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">\n                            <a role="button" rv-href="options.modWorkerComp:lawyerEmail" class=\'mailtoWithSubject\'>{options.modWorkerComp:lawyerEmail}</a>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 control-label">Receptionist:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modWorkerComp:lawyerReceptionist}</div>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 control-label">Notes:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modWorkerComp:lawyerNotes}</div>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 control-label">Tax ID:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">\n                            {options.modWorkerComp:lawyerTaxID}\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div class="form-group m-bottom-5">\n                <div class="col-sm-offset-2 col-sm-2 p-top-10">\n                    <div>\n                        <button class="tst-save-injuredWorker-panel update-injuredWorker btn-casefriend btn-lg">Save File</button>\n                    </div>\n                </div>\n            </div>\n        </form>\n    </div>\n</div>\n';

},this.App.Templates.filesFileSubroTabsSubroAttyPanel=function(a){{var b="";_.escape}return b+='<div class="panel-defenseAttorney p-top-15">\n    <div class="form-horizontal" data-permission="22">\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-2 font-size-15 control-label">Add Subro Attorney:</label>\n            <div class="col-sm-8">\n                <input type="text" class="typeahead form-control search-files da_typeahead" name="defenseAttorneyName">\n                <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="defenseAttorneyName"><i class="fa fa-chevron-down"></i></a>\n            </div>\n            <div class="input-group-btn">\n                <a href="javascript:void(0);" class="btn btn-default control-tooltip" data-help-id="fileInputDefenseAttorneyHelp">\n                    <i class="fa fa-question-circle fa-lg-circle fa-lg"></i>\n                </a>\n            </div>\n\n        </div>\n        <div class="form-group m-bottom-5">\n            <hr class="hr-white"/>\n            <h2 class=\'font-bold font-size-20 p-bottom-10 col-sm-6 col-sm-offset-2\'>Subro Attorneys for current file:</h2>\n        </div>\n        <table class=\'table\' id="da_table">\n            <thead>\n            <tr>\n                <td>Assign</td>\n                <td>Name</td>\n                <td>Email</td>\n                <td>Phone</td>\n                <td>Primary Subro Attorney</td>\n            </tr>\n            </thead>\n            <tbody>\n            <tr id=\'da-list\' rv-each-row="options.collection.models">\n                <td><input type="checkbox" rv-id="row:uAttId" name=\'uAttId\' checked/></td>\n                <td>{row:last}, {row:first} {row:middle}</td>\n                <td><a rv-href="row:email" class=\'mailtoWithSubject\'>{row:email}</a></td>\n                <td><a rv-href="row:phone">{row:phone}</a></td>\n                <td>\n                    <input type="radio" name=\'primaryDA\' rv-value=\'row:uAttId\'/>\n                </td>\n            </tr>\n            </tbody>\n        </table>\n        <div class="form-group m-bottom-5">\n            <div class="col-sm-4 col-sm-offset-1 control-label">\n                <button class="btn-casefriend btn-lg" id=\'save-file-DAs\'>Save Subro Attorneys</button>\n            </div>\n        </div>\n    </div>\n</div>\n'},this.App.Templates.filesFileTabsAddressPosAddressForm=function(a){{var b="";_.escape}return b+='<div class="modal-header" data-permission="56">\n    <h4 class="modal-title" rv-if=\'model.isNew\'>New Address</h4>\n    <h4 class="modal-title" rv-unless=\'model.isNew\'>Edit Address</h4>\n</div>\n<div class="modal-body">\n    <form class="formAddressMaster form-horizontal" onsubmit="javascript: return false;">\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3"><i class="fa fa-asterisk c-red font-size-10"></i> Type Category:</label>\n            <div class="col-sm-8">\n                <select class="form-control" name="typeCategory" rv-value=\'objAddress.typeCategory\' required>\n                    <option rv-each-row="groupTypeCategory" rv-value="row">{row}</option>\n                </select>\n            </div>\n        </div>\n\n        <div class="clearfix"></div>\n\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3"><i class="fa fa-asterisk c-red font-size-10"></i> Address:</label>\n            <div class="col-sm-8">\n                <textarea class="form-control inputAddress" name="address" rv-value=\'objAddress.address\' required></textarea>\n            </div>\n        </div>\n\n        <div class="clearfix"></div>\n\n        <div class="form-group m-top-5 m-bottom-10">\n            <label class="col-sm-3 lbl-note font-size-12">Note:</label>\n            <div class="col-sm-8">\n                <input type="text" name="note" class="form-control" rv-value="objAddress.note">\n            </div>\n        </div>\n\n        <div class="form-group m-top-5 m-bottom-10">\n            <label class="col-sm-3 lbl-primary-location font-size-12" for="primaryLocation">\n                <i class="fa fa-star" aria-hidden="true"></i>\n                Primary Location:\n            </label>\n            <div class="col-sm-8">\n                <input type="checkbox" name="primaryLocation" id="primaryLocation" value=\'1\' rv-checked=\'objAddress.primaryLocation\'>\n            </div>\n        </div>\n\n        <div class="form-group m-top-5 m-bottom-10">\n            <label class="col-sm-3 lbl-old-address font-size-12" for="oldAddress">Old Address:</label>\n            <div class="col-sm-8">\n                <input type="checkbox" name="oldAddress" id="oldAddress" value=\'1\' rv-checked=\'objAddress.oldAddress\'>\n            </div>\n        </div>\n\n        <div class="form-group m-top-5 m-bottom-10">\n            <label class="col-sm-3 lbl-not-use font-size-12" for="doNotUse">Do not Use:</label>\n            <div class="col-sm-8">\n                <input type="checkbox" name="doNotUse" id="doNotUse" value=\'1\' rv-checked=\'objAddress.doNotUse\'>\n            </div>\n        </div>\n\n        <div class="clearfix"></div>\n    </form>\n</div>\n<div class="modal-footer">\n    <button type="button" class="tst-addressForm-close-btn btn btn-default btn-close" data-dismiss="modal">Close\n    </button>\n    <button type="button" class="tst-addressForm-save-btn btn btn-primary btnSave">Save</button>\n</div>'},this.App.Templates.filesFileTabsAddressPosAddressesMaster=function(a){{var b="";_.escape}return b+='<div class="body" data-permission="56">\n    <table class="table table-condensed table-hover table-address m-bottom-0">\n        <thead>\n        <tr class="col-category height-33">\n            <th colspan="3">\n                <span class="title-typeCategory">{options.typeCategory} ({collection.length})</span>\n            </th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr rv-each-model=\'collection.models\'>\n            <td class=\'column-select\'>\n                <a class="btn btn-moveLeft btn-default" rv-on-click=\'selectAddressMaster\' href="javascript:void(0);">\n                    <i class="fa fa-arrow-left"></i>\n                </a>\n            </td>\n            <td>\n                <span class="label lbl-address-used label-default hidden">Used</span>\n                <div class="address" rv-html=\'model:address | formatterHtml\'></div>\n                <span class="label label-primary m-right-5" rv-if=\'model:primaryLocation\' title="Primary Location">\n                   <i class="fa fa-star p-left-3" aria-hidden="true"></i>\n                </span>\n                <span class="label label-warning" rv-if=\'model:oldAddress\' title="Old Address">Old Address</span>\n                <span class="label label-danger" rv-if=\'model:doNotUse\' title="Do not Use">Do not Use</span>\n                <span class="label label-info" rv-if=\'model:note\' title="Note">{model:note}</span>\n            </td>\n            <td class="width-100">\n                <a href="javascript:void(0);" class="btn btn-default m-bottom-5" rv-on-click=\'editAddressMaster\'>\n                    <i class="fa fa-pencil"></i>\n                </a>\n                <a rv-unless=\'model:cannot_deleted\' href="javascript:void(0);" class="btn btn-danger m-bottom-5" rv-on-click="removeAddressMaster" data-permission="54">\n                    <i class="fa fa-remove"></i>\n                </a>\n            </td>\n        </tr>\n        </tbody>\n    </table>\n</div>'},this.App.Templates.filesFileTabsAddressPosPanel=function(a){{var b="";_.escape}return b+='<div class="wrapper m-bottom-30" data-permission="56">\n    <div class="col-sm-12">\n        <form class=\'formAddressSet\' onsubmit="return false;">\n            <div class="col-sm-3 col-xs-6 p-left-0 m-bottom-20">\n                <label class="control-label">\n                    Sets:\n                </label>\n                <a class="control-tooltip fs-medium" data-help-id="fileSelectSetHelp" href="javascript:void(0);"><i class="fa fa-question-circle fa-lg-circle c-black"></i></a>\n                <select class="form-control selectSet" rv-value=\'setNameSelected\'>\n                    <option value=\'\'>New</option>\n                    <option rv-each-parentaddress=\'addressSetParents < addressSetParents\' rv-value=\'parentaddress\'>{parentaddress}</option>\n                </select>\n            </div>\n            <div class="input-group-btn" rv-show="allowCloneSet">\n                <a href="javascript:void(0);" class="btn btn-link m-top-25 btn-copySet"><i class="fa fa-files-o"></i> Copy Set</a>\n            </div>\n            <div class="clearfix"></div>\n\n            <div class="col-sm-3 p-left-0">\n                <label class="control-label">\n                    Set Name:\n                </label>\n                <input type=\'text\' class="form-control" rv-value=\'model:setName\' name=\'setName\' required>\n                <a href="javascript:void(0);" class=\'btn btn-link p-left-0 btn-removeSet display-none\'><i class="fa fa-remove"></i> Remove address set</a>\n            </div>\n\n            <div class="col-sm-offset-3 col-sm-6 m-bottom-20">\n                <div class="col-sm-6 p-left-0  m-bottom-20">\n                    <label class="control-label">Type Category: </label> <a class="control-tooltip fs-medium" data-help-id="fileSelectAddressMasterHelp" href="javascript:void(0);"><i class="fa fa-question-circle fa-lg-circle c-black"></i></a>\n                    <select class="form-control" name="selectTypeCategory" rv-value="typeCategorySelected">\n                        <option value="All">All</option>\n                        <option rv-each-row="groupTypeCategory" rv-value="row">{row}</option>\n                    </select>\n                </div>\n            </div>\n        </form>\n    </div>\n\n    <div class="clearfix"></div>\n\n    <div class="col-sm-6 col-xs-6">\n        <div class="separator-line-right"></div>\n        <div class="table-responsive">\n            <table class="table table-condensed table-hover table-address table-address-set">\n                <thead>\n                <tr>\n                    <th class="order">Order <a class="control-tooltip fs-medium" data-help-id="fileOrderSetHelp" href="javascript:void(0);"><i class="fa fa-question-circle fa-lg-circle c-black"></i></a>\n                    </th>\n                    <th class="column-type-category">Type Category</th>\n                    <th>Address</th>\n                    <th></th>\n                </tr>\n                </thead>\n                <tbody>\n                <tr class="col-hidden" rv-hide=\'colAddresses.length\'>\n                    <td colspan="4">\n                        <strong>No data to display</strong>\n                    </td>\n                </tr>\n                </tbody>\n            </table>\n\n            <button class="btn btn-default btn-printPost">Print POS</button>\n            <button class="btn btn-default btn-printLabels">Print Labels</button>\n            <button class="btn btn-default btn-printEnvelope">Print Envelope</button>\n\n            <button class="tst-saveSet-btn btn btn-default pull-right btn-saveSet">Save Set</button>\n        </div>\n    </div>\n\n    <div class="col-sm-6 col-xs-6">\n        <div class="separator-line-left"></div>\n        <div class="table-responsive">\n            <div class="container-addresses-master m-bottom-20" rv-if=\'colAddressMaster.length\'>\n            </div>\n            <strong rv-unless=\'colAddressMaster.length\'>No data to display</strong>\n            <button class="tst-newAddress-btn btn btn-default pull-right" rv-on-click=\'newAddressMaster\'>New Address</button>\n        </div>\n    </div>\n    <div class="clearfix"></div>\n</div>'},this.App.Templates.filesFileTabsAddressPosProofServiceForm=function(a){{var b="";_.escape}return b+='<div class="modal-header" data-permission="56">\n    <h4 class="modal-title">Proof Service</h4>\n</div>\n<div class="modal-body">\n    <form id="proof-service" class="formAddressMaster form-horizontal" onsubmit="javascript: return false;">\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3">e-File:</label>\n            <div class="col-sm-8">\n                <input type="checkbox" name=\'eFile\' value=\'1\' rv-checked=\'model:eFile\'> <strong>(check if you are e-filing this POS)</strong>\n            </div>\n        </div>\n\n        <div class="clearfix"></div>\n\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3">Document Name:</label>\n            <div class="col-sm-8">\n                <textarea class="form-control t-uppercase" name="documentName" rv-value=\'model:documentName\'></textarea>\n            </div>\n        </div>\n\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3">Date:</label>\n            <div class="col-sm-8">\n                <input type="text" class="form-control datepicker" placeholder="yyyy-mm-dd" name="date" rv-value=\'model:date\'>\n            </div>\n        </div>\n\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3"><i class="fa fa-asterisk c-red font-size-10"></i>Person Signing:</label>\n            <div class="col-sm-8">\n                <select class="form-control" name=\'sognorID\' rv-value=\'model:sognorID\' required>\n                    <option rv-each-model=\'colUsers.models\' rv-value=\'model:id\'>{model:fullName}</option>\n                </select>\n            </div>\n        </div>\n        <div class="clearfix"></div>\n    </form>\n</div>\n<div class="modal-footer">\n    <button type="button" class="btn btn-default btn-close" data-dismiss="modal">Close</button>\n    <button type="button" class="btn btn-primary btnGeneratePDF">Generate Pdf</button>\n</div>'},this.App.Templates.filesFileTabsAddressPosTrAddressSet=function(a){{var b="";_.escape}return b+='<td>\n    <a href="javascript:void(0);" class="btn btn-default controlMove"><i class="fa fa-arrows-v"></i></a>\n</td>\n<td class="width-105">\n    <strong class="typeCategory"></strong>\n</td>\n<td>\n    <div class="address"></div>\n    <span class="label label-primary label-primary-location m-right-5" title="Primary Location">\n        <i class="fa fa-star p-left-3" aria-hidden="true"></i>\n    </span>\n    <span class="label label-warning label-old" title="Old Address">Old Address</span>\n    <span class="label label-danger label-do-not-use" title="Do not Use">Do not Use</span>\n    <span class="label label-info label-note" title="Note"></span>\n</td>\n<td class="width-100">\n    <a href="javascript:void(0);" class="btn btn-default btn-editAddressSet">\n        <i class="fa fa-pencil"></i>\n    </a>\n    <a href="javascript:void(0);" class="tst-deleteAddFromSet-btn btn btn-danger btn-removeAddressSet">\n        <i class="fa fa-remove"></i>\n    </a>\n</td>'},this.App.Templates.filesFileTabsApplicantPanel=function(a){{var b="";_.escape}return b+='<div class="panel-applicant p-top-15">\n    <div class="form-horizontal" data-permission="21">\n        <form>\n            <div class="form-group m-bottom-5">\n                <h2 class=\'font-bold font-size-20 p-bottom-10 col-sm-3 col-sm-offset-2\'>Required</h2>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> First:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control" name="applicantFirstName" rv-value="options.fileModel:applicantFirstName" required>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">Middle:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control" name="applicantMiddleName" rv-value="options.fileModel:applicantMiddleName" placeholder="Middle name is optional">\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Last:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control" name="applicantLastName" rv-value="options.fileModel:applicantLastName" required>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <hr class="hr-white"/>\n                <h2 class=\'font-bold font-size-20 p-bottom-10 col-sm-3 col-sm-offset-2\'>Optional</h2>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">Date of Hire:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control datepicker date-mask" placeholder="yyyy-mm-dd" name="applicantDOH" rv-value="options.fileModel:applicantDOH">\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">Date of Birth:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control datepicker date-mask" placeholder="yyyy-mm-dd" name="applicantDOB" rv-value="options.fileModel:applicantDOB">\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">Job Title:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control" name="applicantJobTitle" rv-value="options.fileModel:applicantJobTitle">\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">SSN:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control" name="applicantSSN" rv-value="options.fileModel:applicantSSN">\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">Home Phone:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control" name="homePhone" rv-value="options.fileModel:applicantHomePhone">\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">Cell Phone:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control" name="cellPhone" rv-value="options.fileModel:applicantCellPhone">\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">Email:</label>\n                <div class="col-sm-8">\n                    <input type="email" class="form-control" name="applicantEmail" rv-value="options.fileModel:applicantEmail">\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <h3 class="font-bold sub-header-forms p-bottom-10 col-sm-3 col-sm-offset-2">Mailing</h3>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">Applicant Address:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control" name="appMailingAddress" rv-value="options.fileModel:applicantMailingAddress">\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">City:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control" name="appMailingCity" rv-value="options.fileModel:applicantMailingCity">\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">State:</label>\n                <div class="col-sm-8">\n                    <select class=\'state-helper form-control\' rv-value="options.fileModel:applicantMailingState" name=\'appMailingState\'></select>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">Zip:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control" name="appMailingZip" rv-value="options.fileModel:applicantMailingZip">\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <h3 class="font-bold sub-header-forms p-bottom-10 col-sm-3 col-sm-offset-2">Physical\n                    <a class="tst-AP-copy-btn btn btn-info copy-button-size" id="copy-to-address" href="javascript:void(0);"><i class="fa fa-files-o"></i> Copy Mailing Address</a>\n                </h3>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">Applicant Address:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control" name="appPhysicalAddress" rv-value="options.fileModel:applicantPhysicalAddress">\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">City:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control" name="appPhysicalCity" rv-value="options.fileModel:applicantPhysicalCity">\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">State:</label>\n                <div class="col-sm-8">\n                    <select class=\'state-helper form-control\' rv-value="options.fileModel:applicantPhysicalState" name="appPhysicalState"></select>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">Zip:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control" name="appPhysicalZip" rv-value="options.fileModel:applicantPhysicalZip">\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <div class="col-sm-offset-2 col-sm-2 p-top-10">\n                    <div>\n                        <button class="tst-save-applicant-panel update-applicant btn-casefriend btn-lg">Save File</button>\n                    </div>\n                </div>\n            </div>\n        </form>\n    </div>\n</div>'},this.App.Templates.filesFileTabsApplicantAttorneyApplicantAttorneyFirms=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <h4 class="modal-title" id="myModalLabel">Applicant Attorney Firms: </h4>\n</div>\n<div class="modal-body">\n    <div class="p-relative">\n        <input class="form-control typeahead aa-firm search-files" type="text" name="search">\n        <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="search"><i class="fa fa-chevron-down"></i></a>\n    </div>\n    <table class=\'table\'>\n        <thead>\n        <tr>\n            <td>Assign</td>\n            <td>FirmID</td>\n            <td>Name</td>\n            <td>Primary Firm</td>\n        </tr>\n        </thead>\n        <tbody>\n        <tr id=\'firms-list\' rv-each-model="collection.models">\n            <td><input type="checkbox" rv-id="model:firmID" name=\'firms\' checked/></td>\n            <td>{model:firmID}</td>\n            <td>{model:firmName}</td>\n            <td>\n                <input type="radio" name=\'primaryFirm\' rv-value=\'model:firmID\'/>\n            </td>\n        </tr>\n        </tbody>\n    </table>\n    <div><label class="error">Note: Changing the primary firm of this attorney will change the firm of this file. Save the file to update the new firm.</label></div>\n    <div id=\'error\'></div>\n</div>\n<div class="modal-footer">\n    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n    <button type="button" class="btn btn-primary" id=\'save-assign-firms\'>Save changes</button>\n</div>\n'},this.App.Templates.filesFileTabsApplicantAttorneyApplicantAttorneyForm=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <h4 class="modal-title" id="modalCase">{options.modalTitle}</h4>\n</div>\n<div class="modal-body">\n    <form id="applicantAttorneyform">\n        <div class="panel-aa p-top-15">\n            <div class="form-horizontal">\n                <div class="form-group m-bottom-5">\n                    <h2 class=\'font-bold font-size-22 p-bottom-10 col-sm-6\'>Required:</h2>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> First Name:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="lawyerFirstName" rv-value="model:lawyerFirstName" required>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Middle Name:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="lawyerMiddleName" rv-value="model:lawyerMiddleName" placeholder="Middle name is optional">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Last Name:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="lawyerLastName" rv-value="model:lawyerLastName" required>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Office Phone:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="lawyerOfficePhone" rv-value="model:lawyerOfficePhone" required>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <hr class="hr-white"/>\n                    <div rv-if=\'model.isNew\' data-permission="67">\n                        <label class="col-sm-3 font-size-15 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Assign Firm:</label>\n                        <div class="col-sm-6">\n                            <input type="text" class="typeahead form-control search-files firms_typeahead" name="firmsTypeahead">\n                            <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="firmsTypeahead" id="firms-arrow"><i class="fa fa-chevron-down"></i></a>\n                        </div>\n                        <div class="input-group-btn col-sm-2">\n                            <a class="btn btn-default" id=\'new-firm\' href="javascript:void(0);" data-permission="69"><i class="fa fa-plus"></i></a>\n                            <a class="btn btn-default control-tooltip" data-help-id="fileInputFirmsOfApplicantAttorneyHelp" href="javascript:void(0);"><i class="fa fa-question-circle fa-lg-circle fa-lg"></i></a>\n                        </div>\n                    </div>\n                    <div rv-unless=\'model.isNew\' data-permission="68">\n                        <label class="col-sm-3 font-size-15 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Assign Firm:</label>\n                        <div class="col-sm-6">\n                            <input type="text" class="typeahead form-control search-files firms_typeahead" name="firmsTypeahead">\n                            <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="firmsTypeahead" id="firms-arrow"><i class="fa fa-chevron-down"></i></a>\n                        </div>\n                        <div class="input-group-btn col-sm-2">\n                            <a class="btn btn-default" id=\'new-firm\' href="javascript:void(0);" data-permission="69"><i class="fa fa-plus"></i></a>\n                            <a class="btn btn-default control-tooltip" data-help-id="fileInputFirmsOfApplicantAttorneyHelp" href="javascript:void(0);"><i class="fa fa-question-circle fa-lg-circle fa-lg"></i></a>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 font-size-15 control-label"></label>\n                    <div class="col-sm-8">\n                        <table class=\'table\'>\n                            <thead>\n                            <tr>\n                                <td>FirmID</td>\n                                <td>Name</td>\n                                <td>Primary Firm</td>\n                                <td>Actions</td>\n                            </tr>\n                            </thead>\n                            <tbody>\n                            <tr id=\'firms-list\' rv-each-model="collection.models">\n                                <td>{model:firmID}</td>\n                                <td>{model:firmName}</td>\n                                <td class="t-align-center"><input type="radio" name=\'primaryFirm\' rv-value=\'model:firmID\'/></td>\n                                <td>\n                                    <a class=\'m-right-5 edit-firm\' href="javascript:void(0);" rv-data-firmID=\'model:firmID\' rv-data-model=\'model.cid\' data-permission="70"><i class="fa fa-pencil"></i></a>\n                                    <a class=\'m-right-5 delete-firm\' href="javascript:void(0);" rv-data-model=\'model.cid\' rv-if=\'model.isNew\' data-permission="67"><i class="c-red t-align-right fa fa-times"></i></a>\n                                    <a class=\'m-right-5 delete-firm\' href="javascript:void(0);" rv-data-model=\'model.cid\' rv-unless=\'model.isNew\' data-permission="68"><i class="c-red t-align-right fa fa-times"></i></a>\n                                </td>\n                            </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <hr class="hr-white"/>\n                    <h2 class=\'font-bold font-size-22 p-bottom-10 col-sm-6\'>Optional:</h2>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Office Phone Ext:</label>\n                    <div class="col-sm-8">\n                        <input type="number" class="form-control" name="lawyerPhoneExtension" rv-value="model:lawyerPhoneExtension">\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Cell Phone:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="lawyerCellPhone" rv-value="model:lawyerCellPhone">\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Fax:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="lawyerFax" rv-value="model:lawyerFax">\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Email:</label>\n                    <div class="col-sm-8">\n                        <input type="email" class="form-control" name="lawyerEmail" rv-value="model:lawyerEmail">\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Receptionist:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="lawyerReceptionist" rv-value="model:lawyerReceptionist">\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Notes:</label>\n                    <div class="col-sm-8">\n                        <textarea class="form-control" rows="5" name="lawyerNotes" rv-value="model:lawyerNotes">{model:lawyerNotes}</textarea>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Tax ID:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">\n                            <input type="text" class="form-control" name="lawyerTaxID" rv-value="model:lawyerTaxID">\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </form>\n</div>\n<div class="modal-footer">\n    <button type="button" class="tst-AAform-close-btn btn btn-default" id=\'close-modal-attorney\'>Close</button>\n    <button type="button" class="tst-newAAform-save-btn btn btn-primary" id=\'save-aa\'>Save changes</button>\n</div>\n';

},this.App.Templates.filesFileTabsApplicantAttorneyFirmApplicantAttorney=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <h4 class="modal-title" id="modalCase">{options.modalTitle}</h4>\n</div>\n<div class="modal-body">\n    <form id="applicantAttorneyFirmForm">\n        <div class="form-horizontal">\n            <div class="form-group m-bottom-5">\n                <h2 class=\'font-bold font-size-20 p-bottom-10 col-sm-4\'>Required</h2>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Firm Name:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control" name="firmName" rv-value="model:firmName" required>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Office Phone:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control" name="officePhone" rv-value="model:officePhone" required>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <h3 class="font-bold sub-header-forms p-bottom-10 col-sm-3 col-sm-offset-3">Mailing</h3>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Address:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control" name="mailingAddress" rv-value="model:mailingAddress" required>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> City:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control" name="mailingCity" rv-value="model:mailingCity" required>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> State:</label>\n                <div class="col-sm-8">\n                    <select class=\'state-helper form-control\' rv-value="model:mailingState" name="mailingState" required></select>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Zip:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control" name="mailingZip" rv-value="model:mailingZip" required>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <h3 class="font-bold sub-header-forms p-bottom-10 col-sm-5 col-sm-offset-3">Physical\n                    <a class="tst-newAAfirm-copyAdd-btn btn btn-info copy-button-size" id="copy-to-address" href="javascript:void(0);"><i class="fa fa-files-o"></i> Copy Mailing Address</a>\n                </h3>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Address:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control" name="physicalAddress" rv-value="model:physicalAddress" required>\n                </div>\n            </div>\n            <div class="form-group">\n                <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> City:</label>\n                <div class="col-sm-8">\n                    <input type="text" name="physicalCity" rv-value="model:physicalCity" class=\'form-control\' required>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> State:</label>\n                <div class="col-sm-8">\n                    <select class=\'state-helper form-control\' rv-value="model:physicalState" name="physicalState" required></select>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Zip:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control" name="physicalZip" rv-value="model:physicalZip" required>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <hr class="hr-white"/>\n                <h2 class=\'font-bold font-size-20 p-bottom-10 col-sm-4\'>Optional</h2>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-3 control-label">Toll Free Phone:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control" name="tollFreePhone" rv-value="model:tollFreePhone">\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-3 control-label">Fax Number:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control" name="faxNumber" rv-value="model:faxNumber">\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-3 control-label">EAMS No.:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control" name="EAMSno" rv-value="model:EAMSno">\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-3 control-label">EAMS Name:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control" name="EAMSname" rv-value="model:EAMSname">\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-3 control-label">Firm Notes:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control" name="firmNotes" rv-value="model:firmNotes">\n                </div>\n            </div>\n\n        </div>\n    </form>\n</div>\n<div class="modal-footer">\n    <button type="button" class="btn btn-default" id=\'close-modal\'>Close</button>\n    <button type="button" class="tst-newAAfirm-save-btn btn btn-primary" id=\'save-firm\'>Save changes</button>\n</div>'},this.App.Templates.filesFileTabsApplicantAttorneyPanel=function(a){{var b="";_.escape}return b+='<div class="panel-attorney p-top-15" data-permission="28">\n    <div class="form-horizontal">\n        <form id="form-applicant-attorney">\n            <div class="form-group m-bottom-5">\n                <h2 class=\'font-bold font-size-20 p-bottom-10 col-sm-4 col-sm-offset-2\'>Applicant Attorney Firm</h2>\n            </div>\n            <div class="form-group m-bottom-5">\n                <div class="col-sm-8 col-sm-offset-2">\n                    <input type="text" class="form-control search-files typeahead aaFirm_typeahead" name="appAttorneyFirm" rv-value="options.fileModel:applicantAttorneyFirmTypeahead" tabindex="30">\n                    <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="appAttorneyFirm"><i class="fa fa-chevron-down"></i></a>\n                </div>\n                <div class="input-group-btn">\n                    <a class="tst-AAfirm-edit-pencil btn btn-default" id=\'aaFirm_form_edit\' href="javascript:void(0);" data-permission="70"><i class="fa fa-pencil"></i></a>\n                    <a class="btn btn-default" id=\'aaFirm_form_new\' href="javascript:void(0);" data-permission="69"><i class="fa fa-plus"></i></a>\n                    <a class="btn btn-default control-tooltip" data-help-id="fileInputApplicantAttorneyFirmHelp" href="javascript:void(0);"><i class="fa fa-question-circle fa-lg-circle fa-lg"></i></a>\n                </div>\n            </div>\n            <div rv-if="aaFirmTypeaheadID">\n                <div class="form-group m-bottom-5">\n                    <hr class="hr-white"/>\n                    <h2 class=\'font-bold font-size-22 p-bottom-10 col-sm-8 col-sm-offset-2\'>Applicant Attorney Firm Info:</h2>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 control-label">Firm Name:</label>\n                    <div class="col-sm-4">\n                        <div class="p-top-5">{options.modAAfirm:firmName}</div>\n                    </div>\n                    <label class="col-sm-2 control-label">Office Phone:</label>\n                    <div class="col-sm-4">\n                        <div class="p-top-5">{options.modAAfirm:officePhone}</div>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 control-label">Toll Free:</label>\n                    <div class="col-sm-4">\n                        <div class="p-top-5">{options.modAAfirm:tollFreePhone}</div>\n                    </div>\n\n                    <label class="col-sm-2 control-label">Fax Number:</label>\n                    <div class="col-sm-4">\n                        <div class="p-top-5">{options.modAAfirm:faxNumber}</div>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 control-label">EAMS No:</label>\n                    <div class="col-sm-4">\n                        <div class="p-top-5">{options.modAAfirm:EAMSno}</div>\n                    </div>\n\n                    <label class="col-sm-2 control-label">EAMS Name:</label>\n                    <div class="col-sm-4">\n                        <div class="p-top-5">\n                            <div class="p-top-5">{options.modAAfirm:EAMSname}</div>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 control-label">Firm Notes:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modAAfirm:firmNotes}</div>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 control-label">Physical Address:</label>\n                    <div class="col-sm-4">\n                        <div class="p-top-5">{options.modAAfirm:physicalAddress}</div>\n                    </div>\n\n                    <label class="col-sm-2 control-label">Physical City:</label>\n                    <div class="col-sm-4">\n                        <div class="p-top-5">\n                            <div class="p-top-5">{options.modAAfirm:physicalCity}</div>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 control-label">Physical State:</label>\n                    <div class="col-sm-4">\n                        <div class="p-top-5">{options.modAAfirm:physicalState}</div>\n                    </div>\n\n                    <label class="col-sm-2 control-label">Pysical Zip:</label>\n                    <div class="col-sm-4">\n                        <div class="p-top-5">\n                            <div class="p-top-5">{options.modAAfirm:physicalZip}</div>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 control-label">Mailing Address:</label>\n                    <div class="col-sm-4">\n                        <div class="p-top-5">{options.modAAfirm:mailingAddress}</div>\n                    </div>\n\n                    <label class="col-sm-2 control-label">Mailing City:</label>\n                    <div class="col-sm-4">\n                        <div class="p-top-5">\n                            <div class="p-top-5">{options.modAAfirm:mailingCity}</div>\n                        </div>\n                    </div>\n                </div>\n\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 control-label">Mailing State:</label>\n                    <div class="col-sm-4">\n                        <div class="p-top-5">{options.modAAfirm:mailingState}</div>\n                    </div>\n\n                    <label class="col-sm-2 control-label">Mailing Zip:</label>\n                    <div class="col-sm-4">\n                        <div class="p-top-5">\n                            <div class="p-top-5">{options.modAAfirm:mailingZip}</div>\n                        </div>\n                    </div>\n                </div>\n\n\n            </div>\n            <div class="form-group m-bottom-5">\n                <hr class="hr-white"/>\n                <h2 class=\'font-bold font-size-20 p-bottom-10 col-sm-3 col-sm-offset-2\'>Applicant Attorney</h2>\n            </div>\n            <div class="form-group m-bottom-5">\n                <div class="col-sm-8 col-sm-offset-2">\n                    <input type="text" class="form-control search-files typeahead aa_typeahead" name="appAttorney" rv-value="options.fileModel:applicantAttorneyTypeahead" tabindex="31">\n                    <a href="javascript:void(0);" class="icon-typeahead-down app-attorney-arrow" data-input-name="appAttorney" id="app-attorney-arrow"><i class="fa fa-chevron-down"></i></a>\n                </div>\n                <div class="input-group-btn">\n                    <a class="tst-newAA-edit-pencil btn btn-default" id=\'aa_form_edit\' href="javascript:void(0);" data-permission="68"><i class="fa fa-pencil"></i></a>\n                    <a class="btn btn-default" id=\'aa_form_new\' href="javascript:void(0);" data-permission="67"><i class="fa fa-plus"></i></a>\n                    <a class="btn btn-default control-tooltip" data-help-id="fileInputApplicantAttorneyHelp" href="javascript:void(0);"><i class="fa fa-question-circle fa-lg-circle fa-lg"></i></a>\n                </div>\n            </div>\n        </form>\n        <div rv-if="options.modAA:lawyerID">\n            <div class="form-group m-bottom-5">\n                <hr class="hr-white"/>\n                <h2 class=\'font-bold font-size-22 p-bottom-10 col-sm-4 col-sm-offset-2\'>Applicant Attorney Info:</h2>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 control-label">First Name:</label>\n                <div class="col-sm-4">\n                    <div class="p-top-5">{options.modAA:lawyerFirstName}</div>\n                </div>\n                <label class="col-sm-2 control-label">Middle Name:</label>\n                <div class="col-sm-4">\n                    <div class="p-top-5">{options.modAA:lawyerMiddleName}</div>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 control-label">Last Name:</label>\n                <div class="col-sm-4">\n                    <div class="p-top-5">{options.modAA:lawyerLastName}</div>\n                </div>\n\n                <label class="col-sm-2 control-label">Office Phone:</label>\n                <div class="col-sm-4">\n                    <div class="p-top-5">{options.modAA:lawyerOfficePhone}</div>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 control-label">Office Phone Ext:</label>\n                <div class="col-sm-4">\n                    <div class="p-top-5">{options.modAA:lawyerPhoneExtension}</div>\n                </div>\n\n                <label class="col-sm-2 control-label">Cell Phone:</label>\n                <div class="col-sm-4">\n                    <div class="p-top-5">{options.modAA:lawyerCellPhone}</div>\n                </div>\n            </div>\n\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 control-label">Fax:</label>\n                <div class="col-sm-4">\n                    <div class="p-top-5">{options.modAA:lawyerFax}</div>\n                </div>\n\n                <label class="col-sm-2 control-label">Email:</label>\n                <div class="col-sm-4">\n                    <div class="p-top-5">\n                        <a role="button" rv-href="options.modAA:lawyerEmail" class=\'mailtoWithSubject\'>{options.modAA:lawyerEmail}</a>\n                    </div>\n                </div>\n            </div>\n\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 control-label">Receptionist:</label>\n                <div class="col-sm-4">\n                    <div class="p-top-5">{options.modAA:lawyerReceptionist}</div>\n                </div>\n\n                <label class="col-sm-2 control-label">Notes:</label>\n                <div class="col-sm-4">\n                    <div class="p-top-5">{options.modAA:lawyerNotes}</div>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 control-label">Tax ID:</label>\n                <div class="col-sm-4">\n                    <div class="p-top-5">\n                        {options.modAA:lawyerTaxID}\n                    </div>\n                </div>\n\n                <hr class="hr-white"/>\n                <h2 class=\'font-bold font-size-22 p-bottom-10 col-sm-6 col-sm-offset-2\'>Firms of Applicant Attorney: <a class="control-tooltip fs-medium" data-help-id="fileInputFirmsOfApplicantAttorneyHelp" href="javascript:void(0);"><i class="fa fa-question-circle fa-lg-circle c-black"></i></a>\n                </h2>\n            </div>\n            <div rv-each-row="options.aaCompanies.models < options.aaCompanies.models" class="col-sm-offset-2 col-sm-8">\n                <div rv-data-aa-firm=\'row:firmID\' rv-id=\'row:firmID\'>\n                    <span class=\'fa fa-hand-o-right\'></span><span class=\'p-10\'>{row:firmName}</span>\n                    <span rv-if="row:isPrimaryFirm"><i class="fa fa-check-circle"></i> <em class="c-red">Primary Firm</em></span>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <div class="m-left-50 col-sm-4 control-label">\n                    <button type="button" class="tst-aa-firmAssign-btn btn-casefriend btn-lg btn-lg" id=\'edit-firms-aa\' data-permission="68">Edit Firm Assignment</button>\n                </div>\n            </div>\n        </div>\n        <hr class="hr-white"/>\n        <div class="form-group m-bottom-5">\n            <div class="m-left-50 col-sm-4 control-label">\n                <button type="button" id=\'assign-applicant-attorney\' class="btn-casefriend btn-lg">Save Firm & Attorney</button>\n            </div>\n        </div>\n    </div>\n</div>\n'},this.App.Templates.filesFileTabsClientInsurerCompanyForm=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <h4 class="modal-title" rv-if=\'model.isNew\' id="modalCase">Create New Insurer Company</h4>\n    <h4 class="modal-title" rv-unless=\'model.isNew\' id="modalCase">Edit Existing Insurer Company</h4>\n</div>\n<div class="modal-body">\n    <form>\n        <div class="panel-employer p-top-15">\n            <div class="form-horizontal">\n                <div class="form-group m-bottom-5">\n                    <h2 class=\'font-bold font-size-22 p-bottom-10 col-sm-6\'>Required:</h2>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Name:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="companyName" rv-value="model:companyName" required>\n                        <input type=\'hidden\' name="companyID" rv-value="model:companyID"/>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Office Phone:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="officePhone" rv-value="model:officePhone">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Fax:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="faxNumber" rv-value="model:faxNumber">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Notes:</label>\n                    <div class="col-sm-8">\n                        <textarea type="text" rows="5" class="form-control" name="companyNotes" rv-value="model:companyNotes"> </textarea>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <h3 class="font-bold sub-header-forms p-bottom-10 col-sm-3 col-sm-offset-3">Mailing</h3>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Address:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="mailingAddress" rv-value="model:mailingAddress">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">City:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="mailingCity" rv-value="model:mailingCity">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">State:</label>\n                    <div class="col-sm-8">\n                        <select class=\'form-control state-helper\' rv-value="model:mailingState" name=\'mailingState\'></select>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Zip:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="mailingZip" rv-value="model:mailingZip">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <h3 class="font-bold sub-header-forms p-bottom-10 col-sm-5 col-sm-offset-3">Billing\n                        <a class="btn btn-info copy-button-size" id="copy-to-address-billing" href="javascript:void(0);"><i class="fa fa-files-o"></i> Copy Mailing Address</a>\n                    </h3>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Address:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="billingAddress" rv-value="model:billingAddress">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">City:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="billingCity" rv-value="model:billingCity">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">State:</label>\n                    <div class="col-sm-8">\n                        <select class=\'form-control state-helper\' rv-value="model:billingState" name=\'billingState\'></select>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Zip:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="billingZip" rv-value="model:billingZip">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Toll Free Phone:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="tollFreePhone" rv-value="model:tollFreePhone">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <h3 class="font-bold sub-header-forms p-bottom-10 col-sm-5 col-sm-offset-3">Physical\n                        <a class="btn btn-info copy-button-size" id="copy-to-address" href="javascript:void(0);"><i class="fa fa-files-o"></i> Copy Mailing Address</a>\n                    </h3>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Address:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="physicalAddress" rv-value="model:physicalAddress">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">City:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="physicalCity" rv-value="model:physicalCity">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">State:</label>\n                    <div class="col-sm-8">\n                        <select class=\'form-control state-helper\' rv-value="model:physicalState" name=\'physicalState\'></select>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Zip:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="physicalZip" rv-value="model:physicalZip">\n                    </div>\n                </div>\n            </div>\n        </div>\n    </form>\n</div>\n<div class="modal-footer">\n    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n    <button type="button" class="tst-newInsurerComp-save-btn btn btn-primary" id=\'save-insurer-company\'>Save changes</button>\n</div>'},this.App.Templates.filesFileTabsClientInsurerForm=function(a){{var b="";_.escape}return b+='<div class="panel-tpa p-top-15">\n    <div class="form-horizontal">\n        <div class="form-group m-bottom-5">\n            <h2 class=\'font-bold font-size-22 p-bottom-10 col-sm-6 col-sm-offset-2\'>Insurer Info</h2>\n        </div>\n        <div class="form-group">\n            <label class=\'col-sm-2 p-top-5 control-label\'>Name:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{options.modInsurerClient:clientName}</div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class=\'col-sm-2 p-top-5 control-label\'>Client Name Short:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{options.modInsurerClient:clientNameShort}</div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class=\'col-sm-2 p-top-5 control-label\'>Office Phone:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{options.modInsurerClient:officePhone}</div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class=\'col-sm-2 p-top-5 control-label\'>Fax:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{options.modInsurerClient:faxNumber}</div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class=\'col-sm-2 p-top-5 control-label\'>client Notes:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{options.modInsurerClient:clientNotes}</div>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <h3 class="font-bold sub-header-forms p-bottom-10 col-sm-3 col-sm-offset-2">Mailing</h3>\n        </div>\n        <div class="form-group">\n            <label class=\'col-sm-2 p-top-5 control-label\'>Address:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{options.modInsurerClient:mailingAddress}</div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class=\'col-sm-2 p-top-5 control-label\'>City:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{options.modInsurerClient:mailingCity}</div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class=\'col-sm-2 p-top-5 control-label\'>State:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{options.modInsurerClient:mailingStateName}</div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class=\'col-sm-2 p-top-5 control-label\'>Zip:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{options.modInsurerClient:mailingZip}</div>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <h3 class="font-bold sub-header-forms p-bottom-10 col-sm-3 col-sm-offset-2">Billing</h3>\n        </div>\n        <div class="form-group">\n            <label class=\'col-sm-2 p-top-5 control-label\'>Address:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{options.modInsurerClient:billingAddress}</div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class=\'col-sm-2 p-top-5 control-label\'>City:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{options.modInsurerClient:billingCity}</div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class=\'col-sm-2 p-top-5 control-label\'>State:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{options.modInsurerClient:billingStateName}</div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class=\'col-sm-2 p-top-5 control-label\'>Zip:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{options.modInsurerClient:billingZip}</div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class=\'col-sm-2 p-top-5 control-label\'>Toll Free Phone:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{options.modInsurerClient:tollFreePhone}</div>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <h3 class="font-bold sub-header-forms p-bottom-10 col-sm-3 col-sm-offset-2">Physical</h3>\n        </div>\n        <div class="form-group">\n            <label class=\'col-sm-2 p-top-5 control-label\'>Address:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{options.modInsurerClient:physicalAddress}</div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class=\'col-sm-2 p-top-5 control-label\'>City:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{options.modInsurerClient:physicalCity}</div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class=\'col-sm-2 p-top-5 control-label\'>State:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{options.modInsurerClient:physicalStateName}</div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class=\'col-sm-2 p-top-5 control-label\'>Zip:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{options.modInsurerClient:physicalZip}</div>\n            </div>\n        </div>\n    </div>\n</div>';

},this.App.Templates.filesFileTabsClientPanel=function(a){{var b="";_.escape}return b+='<div class="container-client"></div>'},this.App.Templates.filesFileTabsClientTpaForm=function(a){{var b="";_.escape}return b+='<div id=\'insurer-company-modal\'></div>\n<div class="panel-tpa p-top-15">\n    <div class="form-horizontal" data-permission="25">\n        <div class="form-group m-bottom-5">\n            <h2 class="font-bold font-size-22 p-bottom-10 col-sm-3 col-sm-offset-2">TPA INFO</h2>\n        </div>\n        <div class="form-group">\n            <label class="col-sm-2 p-top-5 control-label">Name:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{options.modTpaClient:clientName}</div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="col-sm-2 p-top-5 control-label">Client Name Short:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{options.modTpaClient:clientNameShort}</div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="col-sm-2 p-top-5 control-label">Office Phone:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{options.modTpaClient:officePhone}</div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="col-sm-2 p-top-5 control-label">Fax:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{options.modTpaClient:faxNumber}</div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="col-sm-2 p-top-5 control-label">Client Notes:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{options.modTpaClient:clientNotes}</div>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <h3 class="font-bold sub-header-forms p-bottom-10 col-sm-3 col-sm-offset-2">Mailing</h3>\n        </div>\n        <div class="form-group">\n            <label class="col-sm-2 p-top-5 control-label">Address:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{options.modTpaClient:mailingAddress}</div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="col-sm-2 p-top-5 control-label">City:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{options.modTpaClient:mailingCity}</div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="col-sm-2 p-top-5 control-label">State:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{options.modTpaClient:mailingStateName}</div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="col-sm-2 p-top-5 control-label">Zip:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{options.modTpaClient:mailingZip}</div>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <h3 class="font-bold sub-header-forms p-bottom-10 col-sm-3 col-sm-offset-2">Billing</h3>\n        </div>\n        <div class="form-group">\n            <label class="col-sm-2 p-top-5 control-label">Address:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{options.modTpaClient:billingAddress}</div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="col-sm-2 p-top-5 control-label">City:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{options.modTpaClient:billingCity}</div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="col-sm-2 p-top-5 control-label">State:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{options.modTpaClient:billingStateName}</div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="col-sm-2 p-top-5 control-label">Zip:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{options.modTpaClient:billingZip}</div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="col-sm-2 p-top-5 control-label">Toll Free Phone:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{options.modTpaClient:tollFreePhone}</div>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <h3 class="font-bold sub-header-forms p-bottom-10 col-sm-3 col-sm-offset-2">Physical</h3>\n        </div>\n        <div class="form-group">\n            <label class="col-sm-2 p-top-5 control-label">Address:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{options.modTpaClient:physicalAddress}</div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="col-sm-2 p-top-5 control-label">City:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{options.modTpaClient:physicalCity}</div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="col-sm-2 p-top-5 control-label">State:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{options.modTpaClient:physicalStateName}</div>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="col-sm-2 p-top-5 control-label">Zip:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{options.modTpaClient:physicalZip}</div>\n            </div>\n        </div>\n\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-2 control-label">Insurer Company:</label>\n            <div class="col-sm-8">\n                <input type="text" class="typeahead form-control search-files insurer_company_typeahead" name="insurerCompanyName" placeholder="Select to add an insurer company">\n                <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="insurerCompanyName"><i class="fa fa-chevron-down"></i></a>\n            </div>\n            <div class="input-group-btn">\n                <!--<a class="btn btn-default" id="insurer_form_edit" href="javascript:void(0);"><i class="fa fa-pencil"></i></a>-->\n                <a class="tst-createInsurerComp-btn btn btn-default" id="insurer_form_new" href="javascript:void(0);"><i class="fa fa-plus"></i></a>\n            </div>\n        </div>\n\n        <div class="form-group">\n            <div class="col-sm-offset-2 col-sm-10">\n                <div class="p-top-5">\n                    <table class="cf-table table table-striped table-hover">\n                        <thead>\n                        <tr>\n                            <th colspan="3">\n                                Insurer Companies ({options.colInsurerCompanies.length})\n                            </th>\n                        </tr>\n                        <tr> \n                            <th class="width-400">Company Name</th>\n                            <th>ADJ</th>\n                            <th class="width-100">Actions</th>\n                        </tr>\n                        </thead>\n                        <tbody>\n                        <tr rv-each-model="options.colInsurerCompanies.models < options.colInsurerCompanies.models">\n                            <td>\n                                <a href="javascript:void(0);" class="insurer_form_edit" rv-data-id="model:id < model:id">{model:companyName < :companyName}</a>\n                            </td>                            \n                            <td>\n                                <select class="form-control" rv-value="model:caseID"> \n                                    <option></option>\n                                    <option rv-each-m="options.colCases.models < colCases.length" rv-value="m:caseID < m:caseID">{m:ADJid < m:ADJid}</option>\n                                </select>\n                            </td>\n                            <td>\n                                <a href="javascript:void(0);" class="btn btn-link insurer_form_edit" rv-data-id="model:id < model:id">\n                                    <i class="fa fa-edit"></i>\n                                </a>\n                                <a href="javascript:void(0);" class="btn btn-link c-red remove_insurer_company" rv-data-id="model:id < model:id">\n                                    <i class="fa fa-remove"></i>\n                                </a>\n                            </td>\n                        </tr>\n                        <tr rv-unless="options.colInsurerCompanies.length">\n                            <td colspan="3">\n                                <strong>No record.</strong>\n                            </td>\n                        </tr>\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n        </div>\n\n\n        <div class="form-group m-bottom-5">\n            <div class=" col-sm-4 control-label">\n                <button id="btn-InsurerCompanies" class="btn-casefriend btn-lg">Save File Changes</button>\n            </div>\n        </div>\n    </div>\n</div>'},this.App.Templates.filesFileTabsClientRepClientRepForm=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <h4 class="modal-title" rv-if=\'model.isNew\' id="modalCase">Create New Client Rep/Adjuster</h4>\n    <h4 class="modal-title" rv-unless=\'model.isNew\' id="modalCase">Edit Existing Client Rep/Adjuster</h4>\n</div>\n<div class="modal-body">\n    <form>\n        <div class="panel-client-rep p-top-15">\n            <div class="form-horizontal">\n                <div class="form-group m-bottom-5">\n                    <h2 class=\'font-bold font-size-22 p-bottom-10 col-sm-12\'>Required:\n                        <small class="text-danger" rv-if="model:UCL"> You cannot edit the required information of this clientRep/adjuster</small>\n                        <small class="text-success" rv-unless="model:UCL"> You can edit the required information of this clientRep/adjuster</small>\n                    </h2>\n                </div>\n                <input type="hidden" name="manager" rv-value="model:manager">\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> First:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="first" rv-value="model:first" rv-unless="model:UCL" required>\n                        <div class="m-7" id="first" rv-if="model:UCL">{model:first}</div>\n                        <input rv-if="model:UCL" type="hidden" rv-value="model:first" name="first">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Middle:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="middle" rv-value="model:middle" placeholder="middle name is optional" rv-unless="model:UCL">\n                        <div class="m-7" id="middle" rv-if="model:UCL">{model:middle}</div>\n                        <input rv-if="model:UCL" type="hidden" rv-value="model:middle" name="middle">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Last:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="Last" rv-value="model:last" rv-unless="model:UCL" required>\n                        <div class="m-7" id="last" rv-if="model:UCL">{model:last}</div>\n                        <input rv-if="model:UCL" type="hidden" rv-value="model:last" name="last">\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Office Phone:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="phone" rv-value="model:phone" rv-unless="model:UCL" required>\n                        <div class="m-7" id="phone" rv-if="model:UCL">{model:phone}</div>\n                        <input rv-if="model:UCL" type="hidden" rv-value="model:phone" name="phone">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Email:</label>\n                    <div class="col-sm-8">\n                        <input type="email" class="form-control" name="email" rv-value="model:email" rv-unless="model:UCL" required>\n                        <div class="m-7" id="email" rv-if="model:UCL">{model:email}</div>\n                        <input rv-if="model:UCL" type="hidden" rv-value="model:email" name="email">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <hr class="hr-white"/>\n\n                    <h2 class=\'font-bold font-size-22 p-bottom-10 col-sm-6\'>Firm Settings Optional:</h2>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Office Phone Ext:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="phoneExtension" rv-value="model:phoneExtension">\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Cell Phone:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="cell" rv-value="model:cell">\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Fax:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="fax" rv-value="model:fax">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Notes:</label>\n                    <div class="col-sm-8">\n                        <textarea class="form-control" rows="5" rv-value="model:notes" name="notes">{model:notes}</textarea>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </form>\n</div>\n\n<div class="modal-footer">\n    <button type="button" class="btn btn-default" rv-on-click=\'closeModal\'>Close</button>\n    <button type="button" class="tst-createNewClientRep-save-btn btn btn-primary" id=\'save-client-rep\'>Save changes</button>\n</div>'},this.App.Templates.filesFileTabsClientRepConfirmDeletionModal=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <h4 class="modal-title" id="myModalLabel">Remove Temporary Client Rep/Adjuster</h4>\n</div>\n<div class="modal-body">\n    <h2 class="t-align-c fs-medium">Are you sure you want to remove this Temp Client Rep/Adjuster</h2>\n</div>\n<div class="modal-footer">\n    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n    <button type="button" class="btn btn-danger" id=\'delete-temp-client-rep\'>Remove Temp Client Rep/Adjuster</button>\n</div>'},this.App.Templates.filesFileTabsClientRepPanel=function(a){{var b="";_.escape}return b+='<div class="panel-client-rep p-top-15" data-permission="27">\n    <div class="form-horizontal">\n        <form id="form-client-rep">\n            <div rv-if="options.fileModel.original.tempClientRepID">\n                <div class="form-group m-bottom-5">\n                    <h2 class=\'font-bold font-size-22 p-bottom-10 col-sm-8 col-sm-offset-1\'>\n                        <a class="tmp-ad-info-down-arrow display-none" href="javascript:void(0);"><i class="fa fa-chevron-down"></i></a>\n                        <a class="tmp-ad-info-up-arrow" href="javascript:void(0);"><i class="fa fa-chevron-up"></i></a>\n                        Temp Client Rep/Adjuster: {options.modTempClientRep:last} {options.modTempClientRep:first} {options.modTempClientRep:middel}\n                        <a class="tst-remove-tempAdjuster-btn btn btn-danger" href="javascript:void(0);" title="Remove Temp ClientRep/Adjuster" id="delete-tmp-da">Remove Temp ClientRep/Adjuster</a>\n                    </h2>\n                </div>\n                <div class="tmp-ad-info-container">\n                    <div class="form-group m-bottom-5">\n                        <label class="col-sm-2 font-size-15 control-label">First:</label>\n                        <div class="col-sm-8">\n                            <div class="p-top-5">{options.modTempClientRep:first}</div>\n                        </div>\n                    </div>\n                    <div class="form-group m-bottom-5">\n                        <label class="col-sm-2 font-size-15 control-label">Middle:</label>\n                        <div class="col-sm-8">\n                            <div class="p-top-5">{options.modTempClientRep:middle}</div>\n                        </div>\n                    </div>\n                    <div class="form-group m-bottom-5">\n                        <label class="col-sm-2 font-size-15 control-label">Last:</label>\n                        <div class="col-sm-8">\n                            <div class="p-top-5">{options.modTempClientRep:last}</div>\n                        </div>\n                    </div>\n\n                    <div class="form-group m-bottom-5">\n                        <label class="col-sm-2 font-size-15 control-label">Office Phone:</label>\n                        <div class="col-sm-8">\n                            <div class="p-top-5">{options.modTempClientRep:phone}</div>\n                        </div>\n                    </div>\n\n                    <div class="form-group m-bottom-5">\n                        <label class="col-sm-2 font-size-15 control-label">Office Phone Ext:</label>\n                        <div class="col-sm-8">\n                            <div class="p-top-5">{options.modTempClientRep:phoneExtension}</div>\n                        </div>\n                    </div>\n\n                    <div class="form-group m-bottom-5">\n                        <label class="col-sm-2 font-size-15 control-label">Cell Phone:</label>\n                        <div class="col-sm-8">\n                            <div class="p-top-5">{options.modTempClientRep:cell}</div>\n                        </div>\n                    </div>\n\n                    <div class="form-group m-bottom-5">\n                        <label class="col-sm-2 font-size-15 control-label">Fax:</label>\n                        <div class="col-sm-8">\n                            <div class="p-top-5">{options.modTempClientRep:fax}</div>\n                        </div>\n                    </div>\n\n                    <div class="form-group m-bottom-5">\n                        <label class="col-sm-2 font-size-15 control-label">Email:</label>\n                        <div class="col-sm-8">\n                            <div class="p-top-5">\n                                <a rv-href="options.modTempClientRep:email" class=\'mailtoWithSubject\'>{options.modTempClientRep:email}</a>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class="form-group m-bottom-5">\n                        <label class="col-sm-2 font-size-15 control-label">Notes:</label>\n                        <div class="col-sm-8">\n                            <div class="p-top-5">{options.modTempClientRep:notes}</div>\n                        </div>\n                    </div>\n                </div>\n                <hr class="hr-white"/>\n            </div>\n\n            <div class="form-group m-bottom-5">\n                <div class="col-sm-offset-2 col-sm-8">\n                    <em>Client: {options.fileModel:clientNameTypeahead}</em>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Search Client Rep/Adjuster:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control search-files typeahead client_rep_typeahead" name="clientRepName" rv-value="options.fileModel:clientRepNameTypeahead" required>\n                    <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="clientRepName"><i class="fa fa-chevron-down"></i></a>\n                </div>\n                <div class="input-group-btn">\n                    <a class="btn btn-default" id=\'client_rep_form_edit\' href="javascript:void(0);" data-permission="60"><i class="fa fa-pencil"></i></a>\n                    <a class="btn btn-default" id=\'client_rep_form_new\' href="javascript:void(0);" data-permission="59"><i class="fa fa-plus"></i></a>\n                    <a href="javascript:void(0);" class="btn btn-default control-tooltip" data-help-id="fileInputAdjusterSearchHelp">\n                        <i class="fa fa-question-circle fa-lg-circle fa-lg"></i>\n                    </a>\n                </div>\n            </div>\n\n            <div rv-if="options.modClientRep:user_id">\n                <div class="form-group m-bottom-5">\n                    <hr class="hr-white"/>\n                    <h2 class=\'font-bold font-size-22 p-bottom-10 col-sm-4 col-sm-offset-1\'>Client Rep/Adjuster Info:</h2>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label">First:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modClientRep:first}</div>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label">Middle:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modClientRep:middle}</div>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label">Last:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modClientRep:last}</div>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label">Office Phone:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modClientRep:phone}</div>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label">Office Phone Ext:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modClientRep:phoneExtension}</div>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label">Cell Phone:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modClientRep:cell}</div>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label">Fax:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modClientRep:fax}</div>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label">Email:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">\n                            <a rv-href="options.modClientRep:email" class=\'mailtoWithSubject\'>{options.modClientRep:email}</a>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label">Notes:</label>\n                    <div class="col-sm-8">\n                        <div class="p-top-5">{options.modClientRep:notes}</div>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <div class=" col-sm-6 control-label">\n                        <button type="button" id=\'assign-client_rep\' class="btn-casefriend btn-lg">Assign Client Rep/Adjuster</button>\n                        <button type="button" id=\'temp-client-rep-btn\' class="btn-casefriend btn-lg">Temporary Client Rep/Adjuster</button>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <hr class="hr-white"/>\n                    <h2 class=\'font-bold font-size-22 p-bottom-10 col-sm-6 col-sm-offset-1\'>Files associated with Client Rep/Adjuster:\n                        <a class=" p-left-10 control-tooltip fs-medium" data-help-id="fileInputAdjusterAssociatedFiles" href="javascript:void(0);" data-original-title="" title="" tooltip-initialized="true"><i class="fa fa-question-circle c-black"></i></a></h2>\n                </div>\n\n                <div class="form-group m-bottom-5" rv-if="colWCFiles.length < .length">\n                    <label class="col-lg-2 font-size-15 control-label c-grey-medium">WC Files:</label>\n                </div>\n\n                <div class="form-group m-bottom-5" rv-if="colWCFiles.length < .length">\n                    <div rv-each-files="colWCFiles.models" class="col-lg-offset-1 col-lg-5 p-top-7">\n                        <span class="file-icon">{files:fileStatus}</span>\n                        <a class="gotoFile" role="button" rv-data-id="files:fileNumber"><i class="fa fa-search fa-lg"></i></a>\n                        <a class="goto-file-new-tab" rv-href="files:fileNumber" target="_blank"><i class="fa fa-search-plus fa-lg"></i></a>\n                        <a class="gotoFile" role="button" rv-data-id="files:fileNumber">\n                            <span>{files:fileTitle}</span>\n                        </a>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5" rv-if="colSubroFiles.length < .length">\n                    <label class="col-lg-2 font-size-15 control-label c-grey-medium">Subro Files:</label>\n                </div>\n\n                <div class="form-group m-bottom-5" rv-if="colSubroFiles.length < .length">\n                    <div rv-each-files="colSubroFiles.models" class="col-lg-offset-1 col-lg-5 p-top-7">\n                        <span class="file-icon">{files:fileStatus}</span>\n                        <a class="gotoFile" role="button" rv-data-id="files:subroFileNumber"><i class="fa fa-search fa-lg"></i></a>\n                        <a class="goto-file-new-tab" rv-href="files:subroFileNumber" target="_blank"><i class="fa fa-search-plus fa-lg"></i></a>\n                        <a class="gotoFile" role="button" rv-data-id="files:subroFileNumber">\n                            <span>{files:fileTitle}</span>\n                        </a>\n                    </div>\n                </div>\n            </div>\n            <span class=\'display-none\'></span>\n        </form>\n    </div>\n</div>\n'},this.App.Templates.filesFileTabsClientRepTempClientRepModal=function(a){{var b="";_.escape}return b+='<div class="modal-header" data-permission="27">\n    <h4 class="modal-title" id="myModalLabel">Assign Temporary Adjuster: </h4>\n</div>\n<div class="modal-body" data-permission="27">\n    <div class="form-horizontal">\n        <div class="form-group m-bottom-5">\n            <div class="col-sm-offset-2 col-sm-8">\n                <em>Client: {options.clientName}</em>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-2 font-size-15 control-label">Temp Client Rep/Adjuster:</label>\n            <div class="col-sm-8">\n                <input type="text" class="form-control search-files typeahead tempClientRep_typeahead" name="tempClientRepName" rv-value="options.fileModel:tempClientRepNameTypeahead">\n                <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="tempClientRepName"><i class="fa fa-chevron-down"></i></a>\n            </div>\n            <div class="input-group-btn">\n                <a class="btn btn-default" id=\'tempClientRep_form_edit\' href="javascript:void(0);" data-permission="60"><i class="fa fa-pencil"></i></a>\n                <a class="btn btn-default" id=\'tempAClientRep_form_new\' href="javascript:void(0);" data-permission="59"><i class="fa fa-plus"></i></a>\n                <a class="btn btn-default control-tooltip" data-help-id="fileInputTempAdjusterNameHelp" href="javascript:void(0);"><i class="fa fa-question-circle fa-lg"></i></a>\n            </div>\n        </div>\n\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-2 font-size-15 control-label">First:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{model:first}</div>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-2 font-size-15 control-label">Middle:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{model:middle}</div>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-2 font-size-15 control-label">Last:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{model:last}</div>\n            </div>\n        </div>\n\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-2 font-size-15 control-label">Office Phone:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{model:phone}</div>\n            </div>\n        </div>\n\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-2 font-size-15 control-label">Office Phone Ext:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{model:phoneExtension}</div>\n            </div>\n        </div>\n\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-2 font-size-15 control-label">Cell Phone:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{model:cell}</div>\n            </div>\n        </div>\n\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-2 font-size-15 control-label">Fax:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{model:fax}</div>\n            </div>\n        </div>\n\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-2 font-size-15 control-label">Email:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{model:email}</div>\n            </div>\n        </div>\n\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-2 font-size-15 control-label">Notes:</label>\n            <div class="col-sm-8">\n                <div class="p-top-5">{model:notes}</div>\n            </div>\n        </div>\n    </div>\n</div>\n<div class="modal-footer" data-permission="27">\n    <button type="button" class="tst-assignTempA-close-btn btn btn-default" data-dismiss="modal">Close</button>\n    <button type="button" class="btn btn-primary" id=\'assign-tempClientRep\'> Assign Temp ClientRep/Adjuster</button>\n</div>';

},this.App.Templates.filesFileTabsCoDefendantsCodefendantsForm=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <h4 class="modal-title" rv-if=\'model.isNew\' id="modalCoDefendat">New Co-Defendant</h4>\n    <h4 class="modal-title" rv-unless=\'model.isNew\' id="modalCoDefendat">Edit Co-Defendant</h4>\n</div>\n<div class="modal-body">\n    <div role="tabpanel" class="tab-pane active" id="tab-codefendant">\n        <div class="panel-general p-top-15">\n            <div class="form-horizontal form-general">\n                <form class="form-horizontal form-codefendat">\n                    <div class="form-group m-bottom-5">\n                        <label class="col-sm-3 control-label">File Name:</label>\n                        <div class="col-sm-8">\n                            <label class="m-top-8">{fileTitle}</label>\n                        </div>\n                    </div>\n\n                    <div class="form-group m-bottom-5">\n                        <label class="col-sm-3 control-label"><i\n                                    class="fa fa-asterisk c-red font-size-10"></i> Co-Defendant\n                            Name:</label>\n                        <div class="col-sm-8">\n                            <input type="text" class="form-control" name="codefendantName"\n                                   rv-value="modelData:codefendantName" required>\n                        </div>\n                    </div>\n                    <div class="form-group m-bottom-5">\n                        <hr class="hr-white"/>\n                    </div>\n\n                    <div class="form-group m-bottom-5">\n                        <label class="col-sm-3 font-size-15 control-label"><i\n                                    class="fa fa-asterisk c-red font-size-10"></i> Co-Defendant\n                            Firm:</label>\n                        <div class="col-sm-7">\n                            <input type="text"\n                                   class="form-control search-files typeahead co-aaFirm_typeahead"\n                                   name="co-appAttorneyFirm"\n                                   rv-value="modelData:codefendantFirmNameTypeahead" required>\n                            <a href="javascript:void(0);" class="icon-typeahead-down"\n                               data-input-name="co-appAttorneyFirm"><i class="fa fa-chevron-down"></i></a>\n                        </div>\n                        <div class="input-group-btn">\n                            <a class="btn btn-default" id=\'co-aaFirm_form_edit\' href="javascript:void(0);"\n                               data-permission="70"><i class="fa fa-pencil"></i></a>\n                            <a class="tst-addCoDefFirm-form btn btn-default" id=\'co-aaFirm_form_new\'\n                               href="javascript:void(0);" data-permission="69"><i\n                                        class="fa fa-plus"></i></a>\n                            <a class="btn btn-default control-tooltip"\n                               data-help-id="fileInputCoDefAAFirmHelp" href="javascript:void(0);"><i class="fa fa-question-circle fa-lg-circle fa-lg"></i></a>\n                        </div>\n                    </div>\n\n                    <div id="co-attorney-container">\n                        <div class="form-group m-bottom-5">\n                            <hr class="hr-white"/>\n                        </div>\n                        <div class="form-group m-bottom-5">\n                            <label class="col-sm-3 font-size-15 control-label"><i\n                                        class="fa fa-asterisk c-red font-size-10"></i> Co-Defendant Attorney:</label>\n                            <div class="col-sm-7">\n                                <input type="text" class="form-control search-files typeahead co-aa_typeahead"\n                                       name="co-appAttorney" rv-value="modelData:codefendantLawyerTypeahead" required>\n                                <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="co-appAttorney"><i\n                                            class="fa fa-chevron-down"></i></a>\n                            </div>\n                            <div class="input-group-btn">\n                                <a class="tst-coDefEdit-pencil btn btn-default" id=\'co-aa_form_edit\'\n                                   href="javascript:void(0);" data-permission="68"><i class="fa fa-pencil"></i></a>\n                                <a class="tst-addCoDefAttorney-form btn btn-default" id=\'co-aa_form_new\'\n                                   href="javascript:void(0);" data-permission="67"><i class="fa fa-plus"></i></a>\n                                <a class="btn btn-default control-tooltip" data-help-id="fileInputCoDefAAHelp"\n                                   href="javascript:void(0);"><i class="fa fa-question-circle fa-lg-circle fa-lg"></i></a>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class="form-group m-bottom-5 m-top-15">\n                        <label class="col-sm-3 control-label">Notes:</label>\n                        <div class="col-sm-8">\n                                        <textarea rows="5" cols="5" class="tst-notes-box form-control" name="coverages"\n                                                  rv-value="modelData:notes"></textarea>\n                        </div>\n                    </div>\n                </form>\n            </div>\n        </div>\n    </div>\n</div><!-- end of modal body -->\n<div class="modal-footer">\n    <button type="button" class="tst-CoDefForm-close-btn btn btn-default" data-dismiss="modal">Close\n    </button>\n    <button type="button" class="tst-newCoDef-save-btn btn btn-primary" rv-on-click="doSaveCoDefendant">Save\n        changes\n    </button>\n</div>\n'},this.App.Templates.filesFileTabsCoDefendantsPanel=function(a){{var b="";_.escape}return b+='<div id=\'coDefendantModal\' data-permission="29"></div>\n<div class="panel-co-def p-top-15" data-permission="29">\n    <div class="form-horizontal">\n        <div class="form-group">\n            <div class="col-lg-12 font-size-16 font-bold">Co-Defendants ({collection.length}):</div>\n            <div class="clearfix"></div>\n            <div class="col-sm-10 col-sm-offset-2">\n                <table class="table table-hover m-bottom-0">\n                    <thead>\n                    <tr>\n\n                        <th>Co-Defendant</th>\n                        <th class="width-20">\n                            <span data-permission="88">Remove</span>\n                        </th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    <tr rv-each-row="options.collection.models < options.collection.models">\n                        <td>\n                            <a href="javascript:void(0);" rv-on-click="doEditCoDefendant" rv-data-id="row:codefendantID < row:codefendantID">\n                                {row:codefendantName < row:codefendantName}\n                                <i rv-if="row:firmName"> - {row:codefendantFirmNameTypeahead < row:codefendantFirmNameTypeahead}</i>\n                                <i rv-if="row:lawyerLastName"> - {row:codefendantLawyerTypeahead < row:codefendantLawyerTypeahead}</i>\n                            </a>\n                        </td>\n                        <td class="t-align-center">\n                            <a href="javascript:void(0);" rv-on-click="removeCoDefendant" data-permission="88" class="c-red">\n                                <i class="fa fa-remove"></i>\n                            </a>\n                        </td>\n\n                    </tr>\n                    <tr rv-unless="options.collection.length">\n                        <td colspan="2">\n                            <STRONG>NONE</STRONG>\n                        </td>\n                    </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n\n        <div class="form-group m-bottom-5">\n            <div class="col-sm-offset-2 col-sm-4 p-top-10">\n                <button class="tst-addCoDef-btn btn-casefriend btn-lg tstAddCoDef" rv-on-click="doAddCoDefendant">Add Co-Defendant</button>\n            </div>\n        </div>\n    </div>\n</div>\n'},this.App.Templates.filesFileTabsDefenseAttorneyPanel=function(a){{var b="";_.escape}return b+='<div class="panel-defenseAttorney p-top-15">\n    <div class="form-horizontal" data-permission="22">\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-2 font-size-15 control-label">Add DA:</label>\n            <div class="col-sm-8">\n                <input type="text" class="typeahead form-control search-files da_typeahead" name="defenseAttorneyName">\n                <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="defenseAttorneyName"><i class="fa fa-chevron-down"></i></a>\n            </div>\n            <div class="input-group-btn">\n                <a href="javascript:void(0);" class="btn btn-default control-tooltip" data-help-id="fileInputDefenseAttorneyHelp">\n                    <i class="fa fa-question-circle fa-lg-circle fa-lg"></i>\n                </a>\n            </div>\n\n        </div>\n        <div class="form-group m-bottom-5">\n            <hr class="hr-white"/>\n            <h2 class=\'font-bold font-size-20 p-bottom-10 col-sm-6 col-sm-offset-2\'>Defense Attorneys for current file:</h2>\n        </div>\n        <table class=\'table\' id="da_table">\n            <thead>\n            <tr>\n                <td>Assign</td>\n                <td>DA Name</td>\n                <td>Email</td>\n                <td>Phone</td>\n                <td>Primary DA</td>\n            </tr>\n            </thead>\n            <tbody>\n            <tr id=\'da-list\' rv-each-row="options.collection.models">\n                <td><input type="checkbox" rv-id="row:uAttId" name=\'uAttId\' checked/></td>\n                <td>{row:last}, {row:first} {row:middle}</td>\n                <td><a rv-href="row:email" class=\'mailtoWithSubject\'>{row:email}</a></td>\n                <td><a rv-href="row:phone">{row:phone}</a></td>\n                <td>\n                    <input type="radio" name=\'primaryDA\' rv-value=\'row:uAttId\'/>\n                </td>\n            </tr>\n            </tbody>\n        </table>\n        <div class="form-group m-bottom-5">\n            <div class="col-sm-4 col-sm-offset-1 control-label">\n                <button class="btn-casefriend btn-lg" id=\'save-file-DAs\'>Save Defense Attorneys</button>\n            </div>\n        </div>\n    </div>\n</div>\n'},this.App.Templates.filesFileTabsEmployerEmployerForm=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <h4 class="modal-title" rv-if=\'model.isNew\' id="modalCase">Create New Employer</h4>\n    <h4 class="modal-title" rv-unless=\'model.isNew\' id="modalCase">Edit Existing Employer</h4>\n</div>\n<div class="modal-body">\n    <form>\n        <div class="panel-employer p-top-15">\n            <div class="form-horizontal">\n                <div class="form-group m-bottom-5">\n                    <h2 class=\'font-bold font-size-22 p-bottom-10 col-sm-6\'>Required:</h2>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Name:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="companyName" rv-value="model:companyName" required>\n                        <input type=\'hidden\' name="companyID" rv-value="model:companyID"/>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Office Phone:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="officePhone" rv-value="model:officePhone">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Fax:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="faxNumber" rv-value="model:faxNumber">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Toll Free Phone:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="tollFreePhone" rv-value="model:tollFreePhone">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Notes:</label>\n                    <div class="col-sm-8">\n                        <textarea type="text" rows="5" class="form-control" name="companyNotes" rv-value="model:companyNotes"> </textarea>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <h3 class="font-bold sub-header-forms p-bottom-10 col-sm-3 col-sm-offset-3">Mailing</h3>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Address:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="mailingAddress" rv-value="model:mailingAddress">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">City:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="mailingCity" rv-value="model:mailingCity">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">State:</label>\n                    <div class="col-sm-8">\n                        <select class=\'form-control state-helper\' rv-value="model:mailingState" name=\'mailingState\'></select>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Zip:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="mailingZip" rv-value="model:mailingZip">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <h3 class="font-bold sub-header-forms p-bottom-10 col-sm-5 col-sm-offset-3">Billing\n                        <a class="btn btn-info copy-button-size" id="copy-to-address-billing" href="javascript:void(0);"><i class="fa fa-files-o"></i> Copy Mailing Address</a>\n                    </h3>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Address:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="billingAddress" rv-value="model:billingAddress">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">City:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="billingCity" rv-value="model:billingCity">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">State:</label>\n                    <div class="col-sm-8">\n                        <select class=\'form-control state-helper\' rv-value="model:billingState" name=\'billingState\'></select>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Zip:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="billingZip" rv-value="model:billingZip">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <h3 class="font-bold sub-header-forms p-bottom-10 col-sm-5 col-sm-offset-3">Physical\n                        <a class="tst-newEmployerCopyAddress-btn btn btn-info copy-button-size" id="copy-to-address" href="javascript:void(0);"><i class="fa fa-files-o"></i> Copy Mailing Address</a>\n                    </h3>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Address:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="physicalAddress" rv-value="model:physicalAddress">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">City:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="physicalCity" rv-value="model:physicalCity">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">State:</label>\n                    <div class="col-sm-8">\n                        <select class=\'form-control state-helper\' rv-value="model:physicalState" name=\'physicalState\'></select>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Zip:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="physicalZip" rv-value="model:physicalZip">\n                    </div>\n                </div>\n            </div>\n        </div>\n    </form>\n</div>\n<div class="modal-footer">\n    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n    <button type="button" class="btn btn-primary" id=\'save-employer\'>Save changes</button>\n</div>\n'},this.App.Templates.filesFileTabsEmployerPanel=function(a){{var b="";_.escape}return b+='<div class="panel-employer p-top-15">\n    <div class="form-horizontal" data-permission="23">\n        <form id="form-employer">\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Search Employer:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control search-files typeahead employer_typeahead" name="employerName" rv-value="options.fileModel:employerCompanyTypeahead" required>\n                    <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="employerName"><i class="fa fa-chevron-down"></i></a>\n\n                </div>\n                <div class="input-group-btn">\n                    <a class="tst-employerEdit-pencil btn btn-default" id=\'employer_form_edit\' href="javascript:void(0);" data-permission="62"><i class="fa fa-pencil"></i></a>\n                    <a class="tst-newEmployer-form-btn btn btn-default" id=\'employer_form_new\' href="javascript:void(0);" data-permission="61"><i class="fa fa-plus"></i></a>\n                    <a class="btn btn-default control-tooltip" data-help-id="fileInputEmployerSearchHelp" href="javascript:void(0);"><i class="fa fa-question-circle fa-lg-circle fa-lg"></i></a>\n                </div>\n            </div>\n\n            <div class="form-group m-bottom-5">\n                <hr class="hr-white"/>\n                <h2 class=\'font-bold font-size-22 p-bottom-10 col-sm-4 col-sm-offset-2\'>Employer Info:</h2>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">ID:</label>\n                <div class="col-sm-8">\n                    <div class="p-top-5">{options.modEmployer:companyID}</div>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">Name:</label>\n                <div class="col-sm-8">\n                    <div class="p-top-5">{options.modEmployer:companyName}</div>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">Office Phone:</label>\n                <div class="col-sm-8">\n                    <div class="p-top-5">{options.modEmployer:officePhone}</div>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">Fax:</label>\n                <div class="col-sm-8">\n                    <div class="p-top-5">{options.modEmployer:faxNumber}</div>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">Company Notes:</label>\n                <div class="col-sm-8">\n                    <div class="p-top-5">{options.modEmployer:companyNotes}</div>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <h3 class="font-bold sub-header-forms p-bottom-10 col-sm-3 col-sm-offset-2">Mailing</h3>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">Address:</label>\n                <div class="col-sm-8">\n                    <div class="p-top-5">{options.modEmployer:mailingAddress}</div>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">City:</label>\n                <div class="col-sm-8">\n                    <div class="p-top-5">{options.modEmployer:mailingCity}</div>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">State:</label>\n                <div class="col-sm-8">\n                    <div class="p-top-5">{options.modEmployer:mailingStateName}</div>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">Zip:</label>\n                <div class="col-sm-8">\n                    <div class="p-top-5">{options.modEmployer:mailingZip}</div>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <h3 class="font-bold sub-header-forms p-bottom-10 col-sm-3 col-sm-offset-2">Billing</h3>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">Address:</label>\n                <div class="col-sm-8">\n                    <div class="p-top-5">{options.modEmployer:billingAddress}</div>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">City:</label>\n                <div class="col-sm-8">\n                    <div class="p-top-5">{options.modEmployer:billingCity}</div>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">State:</label>\n                <div class="col-sm-8">\n                    <div class="p-top-5">{options.modEmployer:billingStateName}</div>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">Zip:</label>\n                <div class="col-sm-8">\n                    <div class="p-top-5">{options.modEmployer:billingZip}</div>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">Toll Free Phone:</label>\n                <div class="col-sm-8">\n                    <div class="p-top-5">{options.modEmployer:tollFreePhone}</div>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <h3 class="font-bold sub-header-forms p-bottom-10 col-sm-3 col-sm-offset-2">Physical</h3>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">Address:</label>\n                <div class="col-sm-8">\n                    <div class="p-top-5">{options.modEmployer:physicalAddress}</div>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">City:</label>\n                <div class="col-sm-8">\n                    <div class="p-top-5">{options.modEmployer:physicalCity}</div>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">State:</label>\n                <div class="col-sm-8">\n                    <div class="p-top-5">{options.modEmployer:physicalStateName}</div>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-2 font-size-15 control-label">Zip:</label>\n                <div class="col-sm-8">\n                    <div class="p-top-5">{options.modEmployer:physicalZip}</div>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <div class=" col-sm-4 control-label">\n                    <button id=\'assign-employer\' class="btn-casefriend btn-lg">Assign Employer</button>\n                </div>\n            </div>\n        </form>\n    </div>\n</div>\n'},this.App.Templates.filesFileTabsGeneralPanel=function(a){{var b="";_.escape}return b+='<div class="panel-general p-top-15">\n    <div class="form-horizontal form-general">\n        <form>\n            <div data-permission="17">\n                <div class="form-group m-bottom-5">\n                    <h2 class=\'font-bold font-size-20 p-bottom-10 col-sm-3 col-sm-offset-2\'>Required</h2>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Client:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="typeahead form-control search-files client_typeahead" name="clientName" rv-value="options.fileModel:clientNameTypeahead" required>\n                        <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="clientName"><i class="fa fa-chevron-down"></i></a>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> File Name:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="fileTitle" rv-value="options.fileModel:fileTitle" placeholder="Name will be autogenerated" required>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <div class="col-sm-offset-2 col-sm-8  font-size-12 c-gray">\n                        <em>Edit WCAB Name</em>\n                        <i class="fa fa-chevron-down wcab-down-arrow"></i>\n                        <i class="fa fa-chevron-up wcab-up-arrow display-none"></i>\n                        <a class="control-tooltip fs-medium" data-help-id="fileInputEditWCABNameHelp" href="javascript:void(0);"><i class="fa c-black p-left-5 fa-question-circle"></i></a>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5 wcab-container display-none">\n                    <label class="col-sm-2 font-size-15 control-label">WCAB Name:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="WCABname" rv-value="options.fileModel:WCABname" placeholder="Name will be autogenerated" required>\n                    </div>\n                </div>\n                <div rv-unless="options.fileModel:fileNumber">\n                    <div class="form-group m-bottom-5">\n                        <label class="col-sm-2 font-size-15 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Applicant First:</label>\n                        <div class="col-sm-8">\n                            <input type="text" class="form-control" name="newFileApplicantFirstName" rv-value="options.fileModel:applicantFirstName" required>\n                        </div>\n                    </div>\n                    <div class="form-group m-bottom-5">\n                        <label class="col-sm-2 font-size-15 control-label">Applicant Middle:</label>\n                        <div class="col-sm-8">\n                            <input type="text" class="form-control" name="newFileApplicantMiddleName" rv-value="options.fileModel:applicantMiddleName" placeholder="Middle name is optional">\n                        </div>\n                    </div>\n                    <div class="form-group m-bottom-5">\n                        <label class="col-sm-2 font-size-15 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Applicant Last:</label>\n                        <div class="col-sm-8">\n                            <input type="text" class="form-control" name="newFileApplicantLastName" rv-value="options.fileModel:applicantLastName" required>\n                        </div>\n                    </div>\n                    <div class="form-group m-bottom-5">\n                        <label class="col-sm-2 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Employer:</label>\n                        <div class="col-sm-8">\n                            <input type="text" class="typeahead form-control search-files new_file_employer_typeahead" name="newFileEmployer" required>\n                            <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="newFileEmployer"><i class="fa fa-chevron-down"></i></a>\n                        </div>\n                        <div class="input-group-btn">\n                            <a class="btn btn-default" id=\'file_creation_employer_form_edit\' href="javascript:void(0);" data-permission="62"><i class="fa fa-pencil"></i></a>\n                            <a class="btn btn-default" id=\'file_creation_employer_form_new\' href="javascript:void(0);" data-permission="61"><i class="fa fa-plus"></i></a>\n                            <a class="btn btn-default control-tooltip" data-help-id="fileInputEmployerHelp" href="javascript:void(0);"><i class="fa c-black p-left-5 fa-question-circle"></i></a>\n                        </div>\n                    </div>\n                    <div class="form-group m-bottom-5">\n                        <label class="col-sm-2 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Defense Attorney:</label>\n                        <div class="col-sm-8">\n                            <input type="text" class="typeahead form-control search-files new_file_da_typeahead" name="newFileDA" required>\n                            <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="newFileDA"><i class="fa fa-chevron-down"></i></a>\n                        </div>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> File Type:</label>\n                    <div class="col-sm-8">\n                        <select class="form-control" name="fileType" rv-value="options.fileModel:fileTypeID" required>\n                            <option rv-each-row="options.colFileTypes.models" rv-value="row:fileTypeID" rv-data-flatfee="row:flatfee" selected>\n                                {row:fileType}\n                            </option>\n                        </select>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5" data-permission="77">\n                    <label class="col-sm-2 font-size-15 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> File Status</label>\n                    <div class="col-lg-4 col-md-4 col-sm-8">\n                        <div class="input-group">\n                            <div class="input-group-addon" id="currentWCFileStatus">\n                                <span rv-show="options.fileModel:currentWCFileStatus < options.fileModel:currentWCFileStatus">\n                                <i rv-if="isFileOpened < options.fileModel:currentWCFileStatus" class="fa fa-folder-open c-blue-link" aria-hidden="true"></i>\n                                <i rv-unless="isFileOpened < options.fileModel:currentWCFileStatus" class="fa fa-folder c-red-dark" aria-hidden="true"></i>\n                                </span>\n                                WC {printWCCurrentStatus < options.fileModel:currentWCFileStatus}:\n                            </div>\n                            <input class="form-control input-file-status bgc-white" readonly id="inputWC" rv-value="options.fileModel:openDate < :openDate" placeholder="yyyy-mm-dd" data-toggle="popover" data-title="Change Status" data-placement="bottom" role="button" data-file-type="WC">\n                            <div id="history-file-status-wc" data-column="previousWCFileOpens" class="btn input-group-addon popover-history-file-status" data-toggle="popover" role="button" data-placement="bottom" data-container="body">\n                                <i class="fa fa-list" aria-hidden="true"></i>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class="visible-sm m-top-10"></div>\n\n                    <div class="col-lg-4 col-md-4 col-sm-8">\n                        <div class="input-group">\n                            <div class="input-group-addon" id="currentLienFileStatus">\n                                <span rv-show="options.fileModel:currentLienFileStatus < options.fileModel:currentLienFileStatus">\n                                    <i rv-if="isFileLienOpened < options.fileModel:currentLienFileStatus" class="fa fa-folder-open c-blue-link" aria-hidden="true"></i>\n                                    <i rv-unless="isFileLienOpened < options.fileModel:currentLienFileStatus" class="fa fa-folder c-red-dark" aria-hidden="true"></i>\n                                </span>\n                                Lien {printLienCurrentStatus < options.fileModel:currentLienFileStatus}:\n                            </div>\n                            <input class="form-control input-file-status bgc-white" readonly id="inputLien" rv-value="options.fileModel:openLienDate < :openLienDate" placeholder="yyyy-mm-dd" data-toggle="popover" data-title="Change Status" data-placement="bottom" role="button" data-file-type="Lien">\n                            <div id="history-file-status-lien" data-column="previousLienFileOpens" class="btn input-group-addon popover-history-file-status" data-toggle="popover" role="button" data-placement="bottom" data-container="body">\n                                <i class="fa fa-list" aria-hidden="true"></i>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <hr class="hr-white"/>\n                    <h2 class=\'font-bold font-size-20 p-bottom-10 col-sm-3 col-sm-offset-2\'>Optional</h2>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label">Billing Claim #:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="claimNumber" rv-value="options.fileModel:claimNumber">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label">Claim DOL:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control datepicker" name="claimDOL" placeholder="yyyy-mm-dd" rv-value="options.fileModel:claimDOL">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5" rv-if="requireMatterID">\n                    <label class="col-sm-2 font-size-15 control-label">Matter ID:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="matter_id" maxlength="10" rv-value="options.fileModel:matter_id">\n                    </div>\n                </div>\n            </div><!-- end of permissions -->\n            <div data-permission="19">\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label">Plan of Action:</label>\n                    <div class="col-sm-8">\n                        <textarea class="form-control" rows="5" rv-value="options.fileModel:recommendations" name="planOfAction">{options.fileModel:recommendations}</textarea>\n                    </div>\n                </div>\n            </div>\n            <div data-permission="18">\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 font-size-15 control-label">Coverages:</label>\n                    <div class="col-sm-8">\n                        <textarea class="form-control" rows="5" rv-value="options.fileModel:coverages" name="coverages">{options.fileModel:coverages}</textarea>\n                    </div>\n                </div>\n            </div>\n            <div data-permission="20">\n                <div class="form-group m-top-15 m-bottom-5" id="milestones-container" rv-unless="options.fileModel:wcIsFileClosed < :wcIsFileClosed">\n                    <div class="col-sm-2">\n                        <label class="font-bold">Active Milestones:</label>\n                        <a href="javascript:void(0);" rv-on-click="changeStateFlagMilestones">\n                            <i class="fa fa-arrow-down milestones-expanded display-none fa-lg"></i>\n                            <i class="fa fa-arrow-right milestones-inline fa-lg"></i>\n                        </a>\n\n                    </div>\n                    <div class="col-sm-8 display-inline-flex">\n                        <div class="milestones-inline">\n                            <span rv-each-row="options.colMilestones.models">\n                                <span rv-class="row:msColor">\n                                    {row:name} &nbsp;\n                                </span>\n                            </span>\n                        </div>\n                        <div class="milestones-expanded display-none">\n                            <table>\n                                <thead>\n                                <tr>\n                                    <td class="p-right-10">Check</td>\n                                    <td class="p-right-10">Milestone</td>\n                                    <td class="">Status</td>\n                                </tr>\n                                </thead>\n                                <tbody>\n                                <tr rv-each-row="options.colMilestones.models" rv-data-tst-name=\'row:name\'>\n                                    <td>\n                                        <input type="checkbox" class="tst-general-milestone milestone" rv-checked=\'row:selected\'/>\n                                    </td>\n                                    <td>\n                                        {row:name}\n                                    </td>\n                                    <td>\n                                        <span rv-if=\'row:selected\' rv-class="row:msColor"></span>\n                                    </td>\n                                </tr>\n                                </tbody>\n                            </table>\n                        </div>\n                        <a class="control-tooltip fs-medium" data-help-id="fileInputActiveMilestonesHelp" href="javascript:void(0);"><i class="fa c-black p-left-5 fa-question-circle"></i></a>\n                    </div>\n                </div>\n            </div>\n            <div data-permission="90" class="form-group m-bottom-5 m-top-30" id="fileProgress-container" rv-if="colAdjProgress.length">\n                <div rv-each-model="colAdjProgress.models < colAdjProgress.models">\n                    <div class="col-sm-2">\n                        <label class="font-size-14 p-top-15">\n                            {model:ADJid} Progress\n                        </label>\n                    </div>\n                    <div class="col-sm-10 p-left-0 diplayed-container">\n                        <div style="display: inherit;" rv-class-canedit="canEditAdjProgress">\n                            <div class="box-container p-left-15 p-right-15 adjProgressContainer">\n                                <span class="title">Set-up</span>\n                                <div class="checkbox-container">\n                                    <div class="item-container">\n                                        <label class="checkbox">\n                                            <span rv-class="getClassNameBySetUp < model:adjPgSetUp" data-attribute="adjPgSetUp" rv-data-caseID="model:caseID"></span>\n                                        </label>\n                                        <label class="label-item">{model:adjPgSetUp}</label>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="box-container p-left-15 p-right-15 adjProgressContainer">\n                                <span class="title">Discovery</span>\n                                <div class="checkbox-container">\n                                    <div class="item-container">\n                                        <label class="checkbox">\n                                            <span rv-class="getClassNameByDiscovery < model:adjPgDiscovery" data-attribute="adjPgDiscovery" rv-data-caseID="model:caseID"></span>\n                                        </label>\n                                        <label class="label-item">{model:adjPgDiscovery}</label>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="box-container p-left-15 p-right-15 adjProgressContainer">\n                                <span class="title">Treatment</span>\n                                <div class="checkbox-container">\n                                    <div class="item-container">\n                                        <label class="checkbox">\n                                            <span rv-class="getClassNameByTreatment < model:adjPgTreatment" data-attribute="adjPgTreatment" rv-data-caseID="model:caseID"></span>\n                                        </label>\n                                        <label class="label-item">{model:adjPgTreatment}</label>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="box-container p-left-15 p-right-15 adjProgressContainer">\n                                <span class="title">Hearings/Trial</span>\n                                <div class="checkbox-container">\n                                    <div class="item-container">\n                                        <label class="checkbox">\n                                            <span rv-class="getClassNameByHearingTrial < model:adjPgHearingsTrial" data-attribute="adjPgHearingsTrial" rv-data-caseID="model:caseID"></span>\n                                        </label>\n                                        <label class="label-item">{model:adjPgHearingsTrial}</label>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="box-container p-left-15 p-right-15 adjProgressContainer">\n                                <span class="title">WC-Closed</span>\n                                <div class="checkbox-container">\n                                    <div class="item-container">\n                                        <label class="checkbox">\n                                            <span rv-class="getClassNameByWCClosed < model:adjPgWCClosed" data-attribute="adjPgWCClosed" rv-data-caseID="model:caseID"></span>\n                                        </label>\n                                        <label class="label-item">{model:adjPgWCClosed}</label>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="box-container p-left-15 p-right-15 adjProgressContainer">\n                                <span class="title">Liens</span>\n                                <div class="checkbox-container">\n                                    <div class="item-container">\n                                        <label class="checkbox">\n                                            <span rv-class="getClassNameByLiens < model:adjPgLiens" data-attribute="adjPgLiens" rv-data-caseID="model:caseID"></span>\n                                        </label>\n                                        <label class="label-item">{model:adjPgLiens}</label>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="box-container p-left-15 p-right-15 adjProgressContainer">\n                                <span class="title">File Closed</span>\n                                <div class="checkbox-container">\n                                    <div class="item-container">\n                                        <label class="checkbox">\n                                            <span rv-class="getClassNameByFileClosed < model:adjPgFileClosed" data-attribute="adjPgFileClosed" rv-data-caseID="model:caseID"></span>\n                                        </label>\n                                        <label class="label-item">{model:adjPgFileClosed}</label>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="clearfix"></div>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <div class="col-sm-offset-2 col-sm-10 p-top-10 general-file-actions" data-permission="17">\n                    <div>\n                        <button rv-if="options.fileModel:fileNumber" class="tst-save-general-file save-general btn-casefriend btn-lg">Save File</button>\n                    </div>\n                    <div>\n                        <button rv-unless="options.fileModel:fileNumber" class="btn-goBack btn-casefriend btn-lg">Go Back</button>\n                        <button rv-unless="options.fileModel:fileNumber" class="tst-create-general-file save-general btn-casefriend btn-lg">Create File</button>\n                    </div>\n                    <div class="m-right-45" data-permission="34" rv-unless="hasDependencies">\n                        <button rv-if="options.fileModel:fileNumber" class="btn delete-file btn-danger">Delete File</button>\n                    </div>\n                </div>\n            </div>\n        </form>\n    </div>\n</div>\n\n<div class="panel-status-flow hidden">\n    <div class="btn-group width-203" role="group">\n        <button class="btn btn-default change-file-status" data-action="open">\n            <i class="fa fa-folder-open c-blue-link display-block" aria-hidden="true"></i>\n            Open\n        </button>\n        <button class="btn btn-default change-file-status" data-action="re-open">\n            <i class="fa fa-folder-open c-blue-link display-block" aria-hidden="true"></i>\n            Re-Open\n        </button>\n        <button class="btn btn-default change-file-status" data-action="close">\n            <i class="fa fa-folder c-red-dark display-block" aria-hidden="true"></i>\n            Close\n        </button>\n    </div>\n</div>';

},this.App.Templates.filesFileTabsInjuriesVenueForm=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <h4 class="modal-title" rv-if=\'model.isNew\' id="modalVenue">New Venue</h4>\n    <h4 class="modal-title" rv-unless=\'model.isNew\' id="modalVenue">Edit Venue</h4>\n</div>\n<div class="modal-body">\n    <form class="form-horizontal form-venue">\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> WCAB Venue:</label>\n            <div class="col-sm-8">\n                <input type="text" class="form-control" name="venueName" rv-value="model:venueName" required>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> ABBREV:</label>\n\n            <div class="col-sm-8">\n                <input type="text" class="form-control" name="venueAbbrev" rv-value="model:venueAbbrev" required>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Address:</label>\n\n            <div class="col-sm-8">\n                <input type="text" class="form-control" name="venueAddress" rv-value="model:venueAddress" required>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">City:</label>\n\n            <div class="col-sm-8">\n                <input type="text" class="form-control" name="venueCity" rv-value="model:venueCity">\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">State:</label>\n\n            <div class="col-sm-8">\n                <select class=\'state-helper form-control\' name="venueState" rv-value="model:venueState"></select>\n            </div>\n        </div>\n        <div class="form-group m-bottom-5">\n            <label class="col-sm-3 control-label">Zip Code:</label>\n\n            <div class="col-sm-8">\n                <input type="text" class="form-control" name="venueZipCode" rv-value="model:venueZipCode">\n            </div>\n        </div>\n    </form>\n</div>\n<div class="modal-footer">\n    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n    <button type="button" class="tst-newVenue-saveChanges-btn btn btn-primary" id="save-venue">Save changes</button>\n</div>'},this.App.Templates.filesFileTabsInjuriesWcCasesForm=function(a){{var b="";_.escape}return b+='<span data-permission="26">\n    <div class="modal-header">\n        <h4 class="modal-title" rv-if=\'model.isNew\' id="modalCase">New Injury/WC Case</h4>\n        <h4 class="modal-title" rv-unless=\'model.isNew\' id="modalCase">Edit Injury/WC Case</h4>\n    </div>\n    <div class="modal-body">\n        <form class="form-horizontal form-cases">\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-3 control-label">File Name:</label>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control" name="nameCase" rv-value=\'fileModel:fileTitle\' readonly="readonly">\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> ADJ WCCase #:</label>\n                <div class="col-sm-5">\n                    <input type="text" class="form-control" name="ADJid" rv-value=\'model:ADJid\' required>\n                </div>\n                <div class="col-sm-3">\n                    <label>\n                        <input type="checkbox" value="1" rv-checked="model:leadCase" name="leadCase">\n                        Lead WC Case\n                    </label>\n                </div>\n            </div>\n\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-3 control-label">Date of Injury:</label>\n                <div class="col-sm-5">\n                    <input type="text" class="form-control datepicker" rv-value=\'model:DOI\' placeholder="yyyy-mm-dd" name="DOI">\n                </div>\n                <div class="panel-select-leadCase col-sm-3 display-none">\n                    <select name="selectLeadCases" class="form-control">\n                        <option value="">Select Lead WC Case</option>\n                    </select>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-3 control-label">End Date of Injury:</label>\n                <div class="col-sm-5">\n                    <input type="text" class="form-control datepicker" placeholder="yyyy-mm-dd" rv-value=\'model:DOIendCT\' name="DOIendCT">\n                </div>\n                <div class="col-sm-3">\n                    <span class="d-block">(Only enter if CT)</span>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-3 control-label">Venue:</label>\n                <div class="col-sm-5">\n                    <input type="text" class="typeahead form-control search-files venue_typeahead" name="venue" rv-value="model:venueNameTypeahead">\n                    <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="venue"><i class="fa fa-chevron-down"></i></a>\n                </div>\n                <div class="input-group-btn">\n                    <a class="tst-cases-form-editVenue-btn btn btn-default" id=\'venue_form_edit\' href="javascript:void(0);" data-permission="66"><i class="fa fa-pencil"></i></a>\n                    <a class="tst-cases-form-newVenue-btn btn btn-default" id=\'venue_form_new\' href="javascript:void(0);" data-permission="65"><i class="fa fa-plus"></i></a>\n                    <a class="btn btn-default control-tooltip" data-help-id="fileInputVenueHelp" href="javascript:void(0);"><i class="fa fa-question-circle fa-lg-circle fa-lg"></i></a>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-3 font-size-15 control-label">Claim #:</label>\n                <div class="col-sm-5">\n                    <input type="text" class="form-control" name="claimNumber" rv-value="model:claimNumber">\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-3 font-size-15 control-label">Status:</label>\n                <div class="col-sm-5">\n                    <select class="form-control" name="status" rv-value="model:status">\n                        <option></option>\n                        <option>Resolved</option>\n                        <option>Dismissed</option>\n                        <option>Co-Def</option>\n                        <option>Prior Injury</option>\n                    </select>\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-3 font-size-15 control-label">Remove From Letters</label>\n                <div class="col-sm-5 c-red">\n                    <input type="checkbox" class="form-control" value="1" name="removeFromLetters" rv-checked="model:removeFromLetters">\n                </div>\n            </div>\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-3 font-size-15 control-label">Remove From ADJ# Progress</label>\n                <div class="col-sm-5 c-red">\n                    <input type="checkbox" class="form-control" value="1" name="removeAdjProgress" rv-checked="model:removeAdjProgress">\n                </div>\n            </div>\n            <div>\n                <div class="m-top-10 panel panel-default">\n                    <div class="panel-heading">Injuries</div>\n                    <div class="injury-max-size">\n                        <table class="table table-bordered">\n                            <tbody>\n                            <tr rv-each-injury="colBodyParts.models < colBodyParts.models">\n                                <td>\n                                    <span>Body Part:</span> <a href="javascript:void(0);" class="btn-editBodyPart" rv-data-id="injury:bodyPartID" rv-data-cid="injury.cid">{injury:bodyPart}</a>\n                                </td>\n                            </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n                <a href="javascript:void(0);" class="btn btn-default btn-addBodyPart"><i class="fa fa-plus"></i> Add Body Part</a>\n            </div>\n        </form>\n    </div>\n    <div class="modal-footer">\n        <span class="c-red msg-form pull-left"></span>\n        <button type="button" class="btn btn-default btn-close" data-dismiss="modal">Close</button>\n        <button id="save-case" type="button" class="tst-casesForm-save-btn btn btn-primary">Save changes</button>\n    </div>\n</span>'},this.App.Templates.filesFileTabsInjuriesWcCasesPanel=function(a){{var b="";_.escape}return b+='<div class="panel-cases p-top-15" data-permission="26">\n    <fieldset>\n        <!--<legend>INJURIES (<span>{options.collection.length}</span>) <a class="control-tooltip fs-medium" data-help-id="fileInputInjuriesHelp" href="javascript:void(0);"><i class="fa fa-question-circle c-black"></i></a></legend>-->\n        <table class="cf-table table table-striped table-hover">\n            <thead>\n            <tr>\n                <th colspan="9">\n                    Injuries/Cases ({options.collection.length}) <a class="control-tooltip fs-medium" data-help-id="fileInputInjuriesHelp" href="javascript:void(0);"><i class="fa fa-question-circle c-black"></i></a>\n                </th>\n            </tr>\n            <tr>\n                <th class="width-30"></th>\n                <th>ADJ</th>\n                <th>STATUS</th>\n                <th>DOI</th>\n                <th>Claim Number</th>\n                <th>Venues</th>\n                <th>Body Part</th>\n                <th>A/D/D</th>\n                <th>Actions</th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr rv-class-remove-row="model:removeFromLetters" rv-each-model="collection.models">\n                <td class="width-30">\n                    <span rv-show="model:leadCase">\n                        <i class="fa fa-check-square-o"></i>\n                    </span>\n                </td>\n                <td>\n                    <a class="btn-editCase" href="javascript:void(0);" rv-data-id="model:caseID">\n                        {model:ADJid}\n                    </a>\n                </td>\n                <td class="width-30">\n                    {model:status}\n                </td>\n                <td>{getDOIandEndCT < model:DOI model:DOIendCT}</td>\n                <td>{model:claimNumber}</td>\n                <td>{model:venueAbbrev}</td>\n                <td>\n                    <ul class=\'list-unstyled\'>\n                        <li rv-each-body=\'model:bodyParts < :bodyParts\'>\n                            {body.bodyPart}\n                        </li>\n                    </ul>\n                </td>\n                <td>\n                    <ul class=\'list-unstyled\'>\n                        <li rv-each-body=\'model:bodyParts < :bodyParts\'>\n                            {body.bpAdmittedADD}\n                        </li>\n                    </ul>\n                </td>\n                <!-- <td>\n                    <ul class=\'list-unstyled\'>\n                        <li rv-each-body=\'model:bodyParts < :bodyParts\'>\n                            <a href="javascript:void(0);">\n                                <i class="fa fa-check-circle-o"></i>\n                            </a>\n                        </li>\n                    </ul>\n                </td> -->\n                <td>\n                    <ul class=\'list-unstyled\'>\n                        <li rv-each-body=\'model:bodyParts < :bodyParts\'>\n                            <a class=\'m-right-5 btn-bodypart-edit\' href="javascript:void(0);" rv-data-bodyPartID=\'body.bodyPartID\' rv-data-caseID=\'model:caseID\'>\n                                <i class="tst-casePanel-pencil fa fa-pencil"></i>\n                            </a>\n                            <a class=\'m-right-5 body-part-delete\' href="javascript:void(0);" rv-data-bodyPartID=\'body.bodyPartID\' rv-data-caseID=\'model:caseID\' data-permission="82">\n                                <i class="c-red t-align-right fa fa-times"></i>\n                            </a>\n                        </li>\n                    </ul>\n                </td>\n            </tr>\n            <tr rv-unless=\'options.collection.length\'>\n                <td colspan="9" class="font-bold">NONE</td>\n            </tr>\n            </tbody>\n        </table>\n    </fieldset>\n\n    <!--<fieldset>-->\n    <!--<legend>OTHER INJURIES</legend>-->\n    <!--</fieldset>-->\n\n    <div>\n        <button class="tst-cases-add-injury-btn btn-casefriend btn-newCase btn-lg">Add Injury Case</button>\n    </div>\n    <em>Note: Adding a case will automatically associate it to this file.</em>\n</div>\n'},this.App.Templates.filesForm=function(a){{var b="";_.escape}return b+='<div class="container m-top-15">\n    <div class="files-tab-container">\n        <ul class="box-shadow nav nav-tabs sticky-wrapper" role="tablist" id="tabFiles" style="min-height:42px;background: aliceblue;">\n            <li role="presentation" class="unsaved active">\n                <a href="#panel-general" data-tabname="general" role="tab" data-toggle="tab" aria-controls="panel-general" aria-expanded="true" id="panel-general-link">\n					<span rv-if="model:fileNumber">\n						General\n					</span>\n                    <span rv-unless="model:fileNumber" class="font-bold">File Creation: Step 2 of 2</span>\n                </a>\n            </li>\n            <li role="presentation" class="unsaved" rv-if="model:fileNumber" data-permission="21">\n                <a href="#panel-applicant" data-tabname="applicant" role="tab" data-toggle="tab" aria-controls="panel-applicant" aria-expanded="false" id="panel-applicant-link">Claimant</a>\n            </li>\n            <li role="presentation" class="unsaved" rv-if="model:fileNumber" data-permission="26">\n                <a href="#panel-cases" data-tabname="injuries" role="tab" data-toggle="tab" aria-controls="panel-cases" aria-expanded="false" id="panel-cases-link">Injuries</a>\n            </li>\n            <li role="presentation" class="unsaved" rv-if="model:fileNumber" data-permission="28">\n                <a href="#panel-app-attorney" data-tabname="applicant_attorney" role="tab" data-toggle="tab" aria-controls="panel-app-attorney" aria-expanded="false" id="panel-applicant-attorney-link">AA</a>\n            </li>\n            <li role="presentation" class="unsaved" rv-if="model:fileNumber" data-permission="27">\n                <a href="#panel-client-rep" data-tabname="panel-client-rep" role="tab" data-toggle="tab" aria-controls="panel-client-rep" aria-expanded="false" id="panel-client-rep-link">Adjuster</a>\n            </li>\n            <li role="presentation" class="unsaved" rv-if="model:fileNumber" data-permission="25">\n                <a href="#panel-client" data-tabname="client" role="tab" data-toggle="tab" aria-controls="panel-client" aria-expanded="false" id="panel-client-link">Client</a>\n            </li>\n            <li role="presentation" class="unsaved" rv-if="model:fileNumber" data-permission="23">\n                <a href="#panel-employer" data-tabname="employer" role="tab" data-toggle="tab" aria-controls="panel-employer" aria-expanded="false" id="panel-employer-link">Employer</a>\n            </li>\n            <li role="presentation" class="unsaved" rv-if="model:fileNumber" data-permission="22">\n                <a href="#panel-defenseAttorney" data-tabname="defense_attorney" role="tab" data-toggle="tab" aria-controls="panel-defenseAttorney" aria-expanded="false" id="panel-defense-attorney-link">DA</a>\n            </li>\n            <li role="presentation" class="unsaved" rv-if="model:fileNumber" data-permission="29">\n                <a href="#panel-co-def" data-tabname="co_defendants" role="tab" data-toggle="tab" aria-controls="panel-co-def" aria-expanded="false" id="panel-co-defendant-link">Co-Def</a>\n            </li>\n            <li role="presentation" class="unsaved" rv-if="model:fileNumber" data-permission="56">\n                <a href="#panel-address-pos" data-tabname="address_pos" role="tab" data-toggle="tab" aria-controls="panel-address-pos" aria-expanded="false" id="panel-address-pos-link">Add./POS</a>\n            </li>\n            <li role="presentation" class="unsaved" rv-if="model:fileNumber">\n                <a href="#panel-calendar" data-tabname="panel-calendar" role="tab" data-toggle="tab" aria-controls="panel-calendar" aria-expanded="false" id="panel-calendar-link">Calendar</a>\n            </li>\n        </ul>\n\n        <div class="tab-content box-shadow">\n            <!-- General -->\n            <div role="tabpanel" class="tab-pane in active" id="panel-general"></div>\n\n            <!-- Applicant -->\n            <div role="tabpanel" class="tab-pane panel-applicant" id="panel-applicant"></div>\n\n            <!-- Defense Attorney -->\n            <div role="tabpanel" class="tab-pane panel-defenseAttorney" id="panel-defenseAttorney"></div>\n\n            <!-- Employer -->\n            <div role="tabpanel" class="tab-pane" id="panel-employer"></div>\n\n            <!-- Client -->\n            <div role="tabpanel" class="tab-pane" id="panel-client"></div>\n\n            <!-- Cases -->\n            <div role="tabpanel" class="tab-pane" id="panel-cases"></div>\n\n            <!-- Adjuster -->\n            <div role="tabpanel" class="tab-pane" id="panel-client-rep"></div>\n\n            <!-- Applicant Attorney -->\n            <div role="tabpanel" class="tab-pane" id="panel-app-attorney"></div>\n\n            <!-- Co-Defendants -->\n            <div role="tabpanel" class="tab-pane" id="panel-co-def"></div>\n\n            <!-- AKA POS -->\n            <div role="tabpanel" class="tab-pane" id="panel-address-pos"></div>\n\n            <div role="tabpanel" class="tab-pane" id="panel-calendar"></div>\n\n        </div>\n    </div>\n</div>\n'},this.App.Templates.filesFormSubro=function(a){{var b="";_.escape}return b+='<div class="container m-top-15">\n    <div class="files-tab-container">\n        <ul class="box-shadow nav nav-tabs sticky-wrapper" role="tablist" id="tabFiles" style="min-height:42px;background: aliceblue;">\n            <li role="presentation" class="unsaved active">\n                <a href="#panel-general" data-tabname="general" role="tab" data-toggle="tab" aria-controls="panel-general" aria-expanded="true" id="panel-general-link">\n                    <span rv-if="model:subroFileNumber">\n                        General\n                    </span>\n                    <span rv-unless="model:subroFileNumber" class="font-bold">File Creation: Step 2 of 2</span>\n                </a>\n            </li>\n            <li role="presentation" class="unsaved" rv-if="model:subroFileNumber">\n                <a href="#panel-injured-wkr" data-tabname="panel-injured-wkr" role="tab" data-toggle="tab" aria-controls="panel-injuredWkr" aria-expanded="false" id="panel-injured-link">Injured Wkr</a>\n            </li>\n            <li role="presentation" class="unsaved" rv-if="model:subroFileNumber">\n                <a href="#panel-employer" data-tabname="panel-employer" role="tab" data-toggle="tab" aria-controls="panel-employer" aria-expanded="false" id="panel-employer-link">Employer</a>\n            </li>\n            <li role="presentation" class="unsaved" rv-if="model:subroFileNumber">\n                <a href="#panel-client-rep" data-tabname="panel-client-rep" role="tab" data-toggle="tab" aria-controls="panel-client-rep" aria-expanded="false" id="panel-client-rep-link">Client Rep</a>\n            </li>\n            <li role="presentation" class="unsaved" rv-if="model:subroFileNumber">\n                <a href="#panel-client" data-tabname="client" role="tab" data-toggle="tab" aria-controls="panel-client" aria-expanded="false" id="panel-client-link">Client</a>\n            </li>\n            <li role="presentation" class="unsaved" rv-if="model:subroFileNumber">\n                <a href="#panel-subro-atty" data-tabname="panel-subro-atty" role="tab" data-toggle="tab" aria-controls="panel-subro-atty" aria-expanded="false" id="panel-subro-link">Subro Attorneys</a>\n            </li>\n            <li role="presentation" class="unsaved" rv-if="model:subroFileNumber">\n                <a href="#panel-def" data-tabname="panel-def" role="tab" data-toggle="tab" aria-controls="panel-def" aria-expanded="false" id="panel-def-link">Defendants</a>\n            </li>\n            <li role="presentation" class="unsaved" rv-if="model:subroFileNumber">\n                <a href="#panel-address-pos" data-tabname="panel-address-pos" role="tab" data-toggle="tab" aria-controls="panel-pos" aria-expanded="false" id="panel-pos-link">Addresses</a>\n            </li>\n\n            <li role="presentation" class="unsaved" rv-if="model:subroFileNumber">\n                <a href="#panel-calendar" data-tabname="panel-calendar" role="tab" data-toggle="tab" aria-controls="panel-calendar" aria-expanded="false" id="panel-calendar-link">Calendar</a>\n            </li>\n        </ul>\n\n        <div class="tab-content box-shadow">\n            <!-- General -->\n            <div role="tabpanel" class="tab-pane in active" id="panel-general"></div>\n\n            <!-- Injured Wkr -->\n            <div role="tabpanel" class="tab-pane panel-injured-wkr" id="panel-injured-wkr">panel-injured-wkr</div>\n\n            <!-- Employer -->\n            <div role="tabpanel" class="tab-pane" id="panel-employer">panel-employer</div>\n\n            <!-- Client Rep -->\n            <div role="tabpanel" class="tab-pane" id="panel-client-rep"></div>\n\n            <!-- Client Insurer -->\n            <div role="tabpanel" rv-unless="model.original.TPAid" class="tab-pane" id="panel-client"></div>\n\n            <!-- Subro Attorney -->\n            <div role="tabpanel" class="tab-pane" id="panel-subro-atty">panel-subro</div>\n\n            <!-- Co-Defendants -->\n            <div role="tabpanel" class="tab-pane" id="panel-def">panel-def</div>\n\n            <!-- AKA POS -->\n            <div role="tabpanel" class="tab-pane" id="panel-address-pos">panel-pos</div>\n\n            <div role="tabpanel" class="tab-pane" id="panel-calendar"></div>\n\n        </div>\n    </div>\n</div>\n'},this.App.Templates.filesFormWizardNew=function(a){{var b="";_.escape}return b+='<div class="container m-top-15">\n    <ul class="box-shadow nav nav-tabs" style="min-height:42px;background: aliceblue;">\n        <li role="presentation" class="active">\n            <a href="#panel-wizard" data-tabname="general" role="tab" data-toggle="tab">\n                <span class="font-bold">File Creation: Step 1 of 2</span>\n            </a>\n        </li>\n    </ul>\n    <div class="tab-content box-shadow">\n        <!-- Wizard -->\n        <div role="tabpanel" class="tab-pane in active" id="panel-wizard">\n\n            <div class="panel-general p-top-15">\n                <div class="form-horizontal form-general">\n                    <form>\n                        <div class="form-group m-bottom-5" rv-if="colModules.length | greater 1">\n                            <label class="col-sm-3 font-size-15 control-label">Module:</label>\n                            <div class="col-sm-8">\n                                <select class="form-control" name="module" rv-value="wizardModel:module">\n                                    <option rv-each-module="colModules.models < .models" rv-value="module:moduleID">{module:moduleDescription}</option>\n                                </select>\n                            </div>\n                        </div>\n                        <div class="form-group m-bottom-5">\n                            <label class="col-sm-3 font-size-15 control-label">Link to an existing File:</label>\n                            <div class="col-sm-8">\n                                <select class="form-control" name="linkToFile" rv-value="wizardModel:linkToFile < :linkToFile">\n                                    <option value="">Select...</option>\n                                    <option value="1">Yes</option>\n                                    <option value="2">No</option>\n                                </select>\n                            </div>\n                        </div>\n                        <div class="form-group m-bottom-5" rv-show="linkToFile < wizardModel:linkToFile" style="display:none">\n                            <label class="col-sm-3 font-size-15 control-label">Files:</label>\n                            <div class="col-sm-8">\n                                <input type="text" class="typeahead form-control search-files file_by_module" name="file_by_module" required>\n                                <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="file_by_module"><i class="fa fa-chevron-down"></i></a>\n                            </div>\n                        </div>\n\n                        <div class="form-group m-bottom-5">\n                            <div class="col-sm-offset-3 col-sm-10 p-top-10 general-file-actions">\n                                <button class="tst-create-general-file btn-continue btn-casefriend btn-lg" rv-disabled="handlerContinue < wizardModel:linkToFile wizardModel:relatedFileNumber">Continue</button>\n                            </div>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'},this.App.Templates.filesGenericEventsModalsClosureModal=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <h4 class="modal-title">Close this {options.category} File</h4>\n</div>\n<div class="modal-body">\n    <form id="closure_event">\n        <div class="panel-employer p-top-15">\n            <div class="form-horizontal">\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Closure Date:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control datepicker" default-today="" name="eventDate" placeholder="yyyy-mm-dd" rv-value="model:eventDate" required>\n                        <input type="hidden" rv-value="model:id">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5 m-top-15">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Reason:</label>\n                    <div class="col-sm-8">\n                        <select name="eventReasonID" class="form-control" id="eventReason" rv-value="model:eventReasonID" required>\n                            <option rv-each-reason="colEventReasons.models" rv-value="reason:eventReasonID">{reason:description}</option>\n                        </select>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5 m-top-15">\n                    <label class="col-sm-3 control-label"> Note:</label>\n                    <div class="col-sm-8">\n                        <textarea class="form-control" rows="5" name="longNote" rv-value="model:longNote"></textarea>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5 m-top-15">\n                    <label class="col-sm-12 control-label font-size-11 c-red t-align-left-i">Note: Clicking on save changes will update this file</label>\n                </div>\n            </div>\n        </div>\n    </form>\n</div>\n<div class="modal-footer">\n    <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>\n    <button type="button" class="btn btn-primary" id=\'save-closure\'>Save changes</button>\n</div>\n'},this.App.Templates.filesGenericEventsModalsOpenModal=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <h4 class="modal-title">{options.type} this {options.category} file</h4>\n</div>\n<div class="modal-body">\n    <form id="open_event">\n        <div class="panel-employer p-top-15">\n            <div class="form-horizontal">\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Open Date:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control datepicker" default-today="" name="eventDate" placeholder="yyyy-mm-dd" rv-value="model:eventDate" required>\n                        <input type="hidden" rv-value="model:id">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5 m-top-15" rv-unless="options.fileModel.isNew">\n                    <label class="col-sm-3 control-label"> Note:</label>\n                    <div class="col-sm-8">\n                        <textarea class="form-control" rows="5" name="longNote" rv-value="model:longNote"></textarea>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5 m-top-15" rv-unless="options.fileModel.isNew">\n                    <label class="col-sm-12 control-label font-size-11 c-red t-align-left-i">Note: Clicking on save changes will update this file</label>\n                </div>\n            </div>\n        </div>\n    </form>\n</div>\n<div class="modal-footer">\n    <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>\n    <button type="button" class="btn btn-primary" id=\'save-open\'>Save changes</button>\n</div>\n'},this.App.Templates.filesGenericQuestion=function(a){{var b="";_.escape}return b+='<div class="modal-body">\n    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n    Do you want to Save changes?\n</div>\n<div class="modal-footer">\n    <button type="button" class="btn btn-default noAnswer">No</button>\n    <button type="button" class="btn btn-primary yesAnswer">Yes</button>\n</div>\n'},this.App.Templates.filesIndex=function(a){{var b="";_.escape}return b+='<div class="container">\n    <div class="m-top-15 m-bottom-15 box-shadow">\n        <form>\n            <div class=\'b-green-casefriend height-100 p-top-10 p-bottom-5\'>\n                <div class="form-group col-sm-3 p-top-45">\n                    <a data-permission="2" href="#files/new/step1" id=\'add-new\' class=\'font-size-16\'>\n                        <i class="fa fa-plus fa-lg"></i>\n                        Create new file\n                    </a>\n                </div>\n                <div class="col-sm-6 t-align-center">\n				<span class="">\n		       		<i class="fa fa-angle-double-left fa-lg sequential-counter c-blue-link cursor-pointer display-none p-right-5" id=\'load-files-first\'></i>\n		     	</span>\n                    <span class="">\n		       		<i class="fa fa-chevron-left sequential-counter c-blue-link cursor-pointer display-none p-right-5" id=\'load-files-prev\'></i>\n		     	</span>\n                    <span class=\'display-inline-block p-left-10 p-right-10\'>\n		     		<label class=\'p-bottom-6 font-size-17\'>\n						<span rv-unless="showAllFiles">\n							Showing files from <span id=\'from-offset\' rv-text="offset < offset"></span> to <span id="to-offset" rv-text="setToOffset"></span>\n						</span>\n						<span rv-if="showAllFiles">\n							Showing all files\n						</span>\n							(Total {totalFiles})\n					</label>\n		     		<select class="form-control" id="filesOffset" data-selectorname="fileType" name="filesOffset">\n					</select>\n		     	</span>\n                    <span class="">\n			        <i class="fa fa-chevron-right sequential-counter c-blue-link cursor-pointer p-left-5" id=\'load-files-next\'></i>\n			    </span>\n                    <span class="">\n			        <i class="fa fa-angle-double-right fa-lg sequential-counter c-blue-link cursor-pointer p-left-5" id=\'load-files-last\'></i>\n			    </span>\n                </div>\n                <div class="form-group col-sm-3 p-top-45 t-align-right font-size-16">\n                    <a data-permission="2" class=\'display-none cursor-pointer\' id="filter-btn">\n                        <i class="fa fa-arrow-down"></i>\n                        Show Filters\n                    </a>\n                    <a data-permission="2" class=\'cursor-pointer\' id="filter-btn-close">\n                        <i class="fa fa-arrow-up"></i>\n                        Hide Filters\n                    </a>\n                    <a class="control-tooltip c-black p-left-10" data-help-id="fileFiltersHelp" data-placement="left" href="javascript:void(0);"><i class="fa fa-question-circle fa-lg"></i></a>\n                </div>\n\n            </div>\n            <div id=\'file-filters\' class="b-green-casefriend min-height-150">\n                <div class="form-group col-sm-3 p-right-0 p-left-10">\n                    <div class="col-sm-12 p-left-0">\n                        <input type="text" class="typeahead form-control p-right-30 search-files file_title" name="fileTitle" placeholder="Search by File Title">\n                        <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="fileTitle"><i class="fa fa-chevron-down"></i></a>\n                    </div>\n                </div>\n\n                <div class="form-group col-sm-3 p-right-0 p-left-10">\n                    <div class="col-sm-12 p-left-0">\n                        <input type="text" class="typeahead form-control p-right-30 search-files da_typeahead" name="defenseAttorneyName" placeholder="Search by User Attorney">\n                        <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="defenseAttorneyName"><i class="fa fa-chevron-down"></i></a>\n                    </div>\n                </div>\n                <div class="form-group col-sm-3 p-right-0 p-left-10">\n                    <div class="col-sm-12 p-left-0">\n                        <input type="text" class="typeahead form-control p-right-30 search-files aa_typeahead" name="applicantAttorneyName" placeholder="Search by Other Attorney">\n                        <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="applicantAttorneyName"><i class="fa fa-chevron-down"></i></a>\n                    </div>\n                </div>\n\n                <div class="form-group col-sm-3 p-right-0 p-left-10">\n                    <div class="col-sm-12 p-left-0">\n                        <input type="text" class="typeahead form-control p-right-30 search-files client_rep_typeahead" name="clientRepName" placeholder="Search by Client Rep">\n                        <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="clientRepName"><i class="fa fa-chevron-down"></i></a>\n                    </div>\n                </div>\n\n                <div class="clearfix"></div>\n\n                <div class="form-group col-sm-3 p-right-0 p-left-10">\n                    <div class="col-sm-12 p-left-0">\n                        <input type="text" class="typeahead form-control p-right-30 search-files client_typeahead" name="client" placeholder="Search by Client">\n                        <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="client"><i class="fa fa-chevron-down"></i></a>\n                    </div>\n                </div>\n\n                <div class="form-group col-sm-3 p-right-0 p-left-10">\n                    <div class="col-sm-12 p-left-0">\n                        <input type="text" class="typeahead form-control p-right-30 search-files employer_typeahead" name="employerName" placeholder="Search by Employer">\n                        <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="employerName"><i class="fa fa-chevron-down"></i></a>\n                    </div>\n                </div>\n\n                <div class="form-group col-sm-3 p-right-0 p-left-10">\n                    <div class="col-sm-12 p-left-0">\n                        <input type="text" class="typeahead form-control p-right-30 search-files venue_typeahead" name="venue" placeholder="Search by Venue">\n                        <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="venue"><i class="fa fa-chevron-down"></i></a>\n                    </div>\n                </div>\n\n                <div class="form-group col-sm-3 p-right-0 p-left-10">\n                    <!-- <label class="control-label c-gray">Search by File Type:</label><br> -->\n                    <div class="col-sm-12 p-left-0">\n                        <select class="form-control p-right-30" id="fileTypeMS" data-selectorname="fileType" name="fileTypes">\n                            <option rv-each-row="options.colFileTypes.models < .colFileTypes" rv-value="row.id">{row:fileType}</option>\n                            <option value="-1">All Files Types</option>\n                        </select>\n                    </div>\n                </div>\n\n                <div class="clearfix"></div>\n\n                <div class="form-group col-sm-3 p-right-0 p-left-10">\n                    <!-- <label class="control-label c-gray">File Status:</label><br> -->\n                    <div class="col-sm-12 p-left-0">\n                        <select class="form-control" name="fileStatus" id="fileStatus">\n                            <option value="active">All Active Files (not closed)</option>\n                            <option value="all">All Files</option>\n                            <option rv-each-status="fileStatus.models" rv-value="status:status">{status:displayName}</option>\n                        </select>\n                    </div>\n                </div>\n\n                <div class="form-group col-sm-3 p-right-0 p-left-10">\n                    <div class="col-sm-12 p-left-0">\n                        <input type="text" class="typeahead form-control p-right-30 search-files adj_typeahead" name="adj" placeholder="Search by ADJ#">\n                        <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="adj"><i class="fa fa-chevron-down"></i></a>\n                    </div>\n                </div>\n\n                <div class="form-group col-sm-3 p-right-0 p-left-10">\n                    <div class="col-sm-12 p-left-0">\n                        <input type="text" class="typeahead form-control p-right-30 search-files claim_number_typeahead" name="claimNumber" placeholder="Search by Claim number">\n                        <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="claimNumber"><i class="fa fa-chevron-down"></i></a>\n                    </div>\n                </div>\n\n                <div class="form-group col-sm-3 p-right-0 p-left-10" rv-if="colModules.length | greater 1">\n                    <div class="col-sm-12 p-left-0">\n                        <select class="form-control" name="module" id="module">\n                            <option value="0">All Modules</option>\n                            <option rv-each-module="colModules.models" rv-value="module:moduleID">{module:moduleDescription}</option>\n                        </select>\n                    </div>\n                </div>\n\n                <div class="clearfix"></div>\n            </div>\n\n            <div class="col-sm-12 p-0">\n                <div class="table-responsive">\n                    <div class="p-15 bgc-controls c-white">\n                        <label class="m-0 m-right-15"><input type="radio" name="view_type" rv-checked="view_type" value="default"> Default</label>\n                        <label class="m-0 m-right-15"><input type="radio" name="view_type" rv-checked="view_type" value="milestones"> Milestones</label>\n                        <label class="m-0 m-right-15"><input type="radio" name="view_type" rv-checked="view_type" value="summary"> Summary</label>\n                    </div>\n                    <table id="no-record" class="table table-hover table-bordered m-0 no-record-border display-none">\n                        <tbody class="b-snow ">\n                        <tr>\n                            <td class="t-align-center font-bold">No records</td>\n                        </tr>\n                        </tbody>\n                    </table>\n                    <table class="table table-hover table-bordered m-0" id="tableFiles" rv-show=\'options.defaultWC\'>\n                        <thead class="b-blue-new-casefriend c-white font-size-14" id="files-thead">\n                        <tr class="font-bold">\n                            <th class="column-name file-sortable cursor-pointer" data-sort=\'name\'>\n                                <span class="font-bold">File Name</span><i class="fa fa-chevron-down"></i>\n                            </th>\n                            <th class=\'file-sortable column-default column column-summary cursor-pointer font-bold\' data-sort=\'billable\'><span>$$</span></th>\n                            <th class=\'file-sortable column-default column column-summary cursor-pointer font-bold\' data-sort=\'venueAbbrev\'><span>Vnu</span></th>\n                            <th class=\'file-sortable column-default column column-summary cursor-pointer font-bold\' data-sort=\'client\'><span>Cli</span></th>\n                            <th class=\'file-sortable column-default column column-summary cursor-pointer font-bold\' data-sort=\'DA\'><span>DA</span></th>\n                            <th class=\'file-sortable column-default column column-summary cursor-pointer font-bold\' data-sort=\'openDate\' rv-unless="isFilterClose < filterUrlModel:fileStatus"><span>O. Date</span></th>\n                            <th class=\'file-sortable column-default column column-summary cursor-pointer font-bold\' data-sort=\'lastEventDate\' title="Client Communication Due (Days)"><span class="font-bold">Comm</span></th>\n                            <th class=\'file-sortable column-default column column-summary cursor-pointer font-bold\' data-sort=\'planDays\'><span class="font-bold">Plan</span></th>\n                            <th class=\'file-sortable column-default column column-summary cursor-pointer font-bold\' data-sort=\'unreadCount\'><span class="font-bold">UNR</span></th>\n                            <th class=\'column column-summary-milestones font-bold display-none\'><span class="font-bold">Milestones</span></th>\n                            <th class="font-bold column column-default column-milestones" rv-each-column=\'wcDefaultMilestoneColumns\'>{column}</th>\n                        </tr>\n                        </thead>\n                        <tbody id="cic-files" class="b-snow"></tbody>\n                    </table>\n                    <table class="table table-hover table-bordered m-0" id="tableFilesLiens" rv-show=\'options.defaultLiens\'>\n                        <thead class="b-blue-new-casefriend c-white font-size-17">\n                        <tr>\n                            <th rv-colspan=\'defaultLiensColumnMax\' class="t-align-center"><span class="p-right-3">WC Liens</span></th>\n                        </tr>\n                        </thead>\n                        <thead class="b-blue-new-casefriend c-white font-size-14" id="liens-files-thead">\n                        <tr class="font-bold">\n                            <th class="column-name file-sortable-liens cursor-pointer font-bold" data-sort=\'name\'><span class="p-right-3">File Name</span><i class="fa fa-chevron-down"></i></th>\n                            <th class=\'file-sortable-liens column-default column column-summary cursor-pointer font-bold\' data-sort=\'billable\'><span class="p-right-3">$$</span></th>\n                            <th class=\'file-sortable-liens column-default column column-summary cursor-pointer font-bold\' data-sort=\'client\'><span class="p-right-3">Cli</span></th>\n                            <th class=\'file-sortable-liens column-default column column-summary cursor-pointer font-bold\' data-sort=\'DA\'><span class="p-right-3">DA</span></th>\n                            <th class=\'file-sortable-liens column-default column column-summary cursor-pointer font-bold\' data-sort=\'openDate\' rv-hide="isFilterClose < filterUrlModel:fileStatus"><span class="p-right-3">O. Date</span></th>\n                            <th class=\'file-sortable-liens column-default column column-summary cursor-pointer font-bold\' data-sort=\'lastEventDate\' title="Client Communication Due (Days)"><span class="font-bold">Comm</span></th>\n                            <th class=\'file-sortable-liens column-default column column-summary cursor-pointer font-bold\' data-sort=\'planDays\'><span class="font-bold">Plan</span></th>\n                            <th class=\'file-sortable-liens column-default column column-summary cursor-pointer font-bold\' data-sort=\'unreadCount\'><span class="font-bold">UNR</span></th>\n                            <th class=\'column column-summary-milestones font-bold display-none\'><span class="font-bold">Milestones</span></th>\n                            <th rv-colspan=\'defaultLiensColumn\' class="t-align-center column column-default column-milestones">Milestones</th>\n                        </tr>\n                        </thead>\n                        <tbody id="liens-files" class="b-snow"></tbody>\n                    </table>\n                    <table class="table table-hover table-bordered m-0" id="tableFilesSubro" rv-show=\'options.defaultSubro\'>\n                        <thead class="b-blue-new-casefriend c-white font-size-17">\n                        <tr>\n                            <th rv-colspan=\'defaultLiensColumnMax\' class="t-align-center"><span class="p-right-3">Subro</span></th>\n                        </tr>\n                        </thead>\n                        <thead class="b-blue-new-casefriend c-white font-size-14" id="subro-files-thead">\n                        <tr class="font-bold">\n                            <th class="column-name file-sortable-subro cursor-pointer font-bold" data-sort=\'name\'><span class="p-right-3">File Name</span><i class="fa fa-chevron-down"></i></th>\n                            <th class=\'file-sortable-subro column-default column column-summary cursor-pointer font-bold\' data-sort=\'client\'><span class="p-right-3">Cli</span></th>\n                            <th class=\'file-sortable-subro column-default column column-summary cursor-pointer font-bold\' data-sort=\'DA\'><span class="p-right-3">UF</span></th>\n                            <th class=\'file-sortable-subro column-default column column-summary cursor-pointer font-bold\' data-sort=\'openDate\' rv-hide="isFilterClose < filterUrlModel:fileStatus"><span class="p-right-3">O. Date</span></th>\n                            <th class=\'file-sortable column-default column column-summary cursor-pointer font-bold\' data-sort=\'lastEventDate\' title="Client Communication Due (Days)"><span class="font-bold">Comm</span></th>\n                            <th class=\'file-sortable column-default column column-summary cursor-pointer font-bold\' data-sort=\'planDays\'><span class="font-bold">Plan</span></th>\n                            <th class=\'file-sortable column-default column column-summary cursor-pointer font-bold\' data-sort=\'unreadCount\'><span class="font-bold">UNR</span></th>\n                            <th class=\'column column-summary-milestones font-bold display-none\'><span class="font-bold">Milestones</span></th>\n                            <th class="font-bold column column-default column-milestones" rv-each-column=\'subroDefaultMilestoneColumns\'>{column}</th>\n                        </tr>\n                        </thead>\n                        <tbody id="subro-files" class="b-snow"></tbody>\n                    </table>\n                    <table class="table table-hover table-bordered m-0" id="tableFilesSubroLiens" rv-show=\'options.defaultSubroLiens\'>\n                        <thead class="b-blue-new-casefriend c-white font-size-17">\n                        <tr>\n                            <th rv-colspan=\'defaultLiensColumnMax\' class="t-align-center"><span class="p-right-3">Subro Liens</span></th>\n                        </tr>\n                        </thead>\n                        <thead class="b-blue-new-casefriend c-white font-size-14" id="subro-liens-thead">\n                        <tr class="font-bold">\n                            <th class="column-name file-sortable-subro-liens cursor-pointer font-bold" data-sort=\'name\'><span class="p-right-3">File Name</span><i class="fa fa-chevron-down"></i></th>\n                            <th class=\'file-sortable-subro-liens column-default column column-summary cursor-pointer font-bold\' data-sort=\'client\'><span class="p-right-3">Cli</span></th>\n                            <th class=\'file-sortable-subro-liens column-default column column-summary cursor-pointer font-bold\' data-sort=\'DA\'><span class="p-right-3">UF</span></th>\n                            <th class=\'file-sortable-subro-liens column-default column column-summary cursor-pointer font-bold\' data-sort=\'openDate\' rv-hide="isFilterClose < filterUrlModel:fileStatus"><span class="p-right-3">O. Date</span></th>\n                            <th class=\'file-sortable column-default column column-summary cursor-pointer font-bold\' data-sort=\'lastEventDate\' title="Client Communication Due (Days)"><span class="font-bold">Comm</span></th>\n                            <th class=\'file-sortable column-default column column-summary cursor-pointer font-bold\' data-sort=\'planDays\'><span class="font-bold">Plan</span></th>\n                            <th class=\'file-sortable column-default column column-summary cursor-pointer font-bold\' data-sort=\'unreadCount\'><span class="font-bold">UNR</span></th>\n                            <th class=\'column column-summary-milestones font-bold display-none\'><span class="font-bold">Milestones</span></th>\n                            <th class="font-bold column column-default column-milestones" rv-each-column=\'subroDefaultMilestoneColumns\'>{column}</th>\n                        </tr>\n                        </thead>\n                        <tbody id="subro-liens-files" class="b-snow"></tbody>\n                    </table>\n                    <table class="table table-hover table-bordered m-0" id="tableFilesSubroInterventions" rv-show=\'options.defaultSubroInterventions\'>\n                        <thead class="b-blue-new-casefriend c-white font-size-17">\n                        <tr>\n                            <th rv-colspan=\'defaultLiensColumnMax\' class="t-align-center"><span class="p-right-3">Subro Intervention</span></th>\n                        </tr>\n                        </thead>\n                        <thead class="b-blue-new-casefriend c-white font-size-14" id="subro-intervention-thead">\n                        <tr class="font-bold">\n                            <th class="column-name file-sortable-subro-intervention cursor-pointer font-bold" data-sort=\'name\'><span class="p-right-3">File Name</span><i class="fa fa-chevron-down"></i></th>\n                            <th class=\'file-sortable-subro-intervention column-default column column-summary cursor-pointer font-bold\' data-sort=\'client\'><span class="p-right-3">Cli</span></th>\n                            <th class=\'file-sortable-subro-intervention column-default column column-summary cursor-pointer font-bold\' data-sort=\'DA\'><span class="p-right-3">UF</span></th>\n                            <th class=\'file-sortable-subro-intervention column-default column column-summary cursor-pointer font-bold\' data-sort=\'openDate\' rv-hide="isFilterClose < filterUrlModel:fileStatus"><span class="p-right-3">O. Date</span></th>\n                            <th class=\'file-sortable column-default column column-summary cursor-pointer font-bold\' data-sort=\'lastEventDate\' title="Client Communication Due (Days)"><span class="font-bold">Comm</span></th>\n                            <th class=\'file-sortable column-default column column-summary cursor-pointer font-bold\' data-sort=\'planDays\'><span class="font-bold">Plan</span></th>\n                            <th class=\'file-sortable column-default column column-summary cursor-pointer font-bold\' data-sort=\'unreadCount\'><span class="font-bold">UNR</span></th>\n                            <th class=\'column column-summary-milestones font-bold display-none\'><span class="font-bold">Milestones</span></th>\n                            <th class="font-bold column column-default column-milestones" rv-each-column=\'subroDefaultMilestoneColumns\'>{column}</th>\n                        </tr>\n                        </thead>\n                        <tbody id="subro-intervention-files" class="b-snow"></tbody>\n                    </table>\n                </div>\n            </div>\n        </form>\n        <div class="clearfix m-top-5 m-bottom-5"></div>\n    </div>\n</div>\n\n';

},this.App.Templates.filesLettersDocumentsNonMedicalModal=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <h4 class="modal-title">Medical Reports and Exhibits</h4>\n</div>\n<div class="modal-body">\n    <select name="documents" class="form-control documents" multiple>\n        <option rv-each-model="collection.models" rv-value="model:documentID">{model:documentTitle}</option>\n    </select>\n\n    <div class="m-top-15">Total documents selected <span id="countDocumentsSelected">(0)</span></div>\n</div>\n<div class="modal-footer">\n    <button type="button" class="btn btn-default btn-close" data-dismiss="modal">Close</button>\n    <button type="button" class="btn btn-primary btn-generateReport">Continue...</button>\n</div>\n'},this.App.Templates.filesLettersLetterTemplate=function(a){{var b="";_.escape}return b+='<div class="letterTemplateHeader"></div>\n<div class="letterTemplateHTML"></div>\n<div class="letterTemplateFooter">\n</div>\n<a class="btn btn-primary btn-createPDF m-top-15" href="javascript:void(0);"><i class="fa fa-file-pdf-o"></i> Create PDF</a>'},this.App.Templates.filesLettersLettersTab=function(a){{var b="";_.escape}return b+='<div rv-show=\'showLetterOptions\'>\n    <div class="p-bottom-15">\n        <label class="display-block">Letters:</label>\n        <select class="form-control selectLetterTemplate" name="letterTemplate">\n            <option value="">Select...</option>\n            <option rv-each-model=\'options.colLetters.models\' rv-value="model:letterTemplateID">\n                {model:name}\n            </option>\n        </select>\n        <button class="btn btn-primary btn-GenerateLetter" disabled="disabled">\n            <i class="fa fa-file-tet-o"></i> Generate Letter\n        </button>\n    </div>\n\n    <div class="p-bottom-15">\n        <label class="display-block">Word Letter Templates:</label>\n        <select class="form-control selectLetterTemplate" name="wordLetterTemplate">\n            <option value="">Select...</option>\n            <option rv-each-model=\'options.colWordLetters.models\' rv-value="model:letterTemplateID">{model:name} </option>\n        </select>\n        <button class="btn btn-primary btn-GenerateWordLetter" disabled="disabled">\n            <i class="fa fa-file-tet-o"></i> Generate Letter\n        </button>\n    </div>\n</div>\n\n<div class="container-view" rv-hide=\'showLetterOptions\' style="display: none;">\n    <a title=\'Show Letters\' class="btn pull-left btn-default btn-showLetters" href="javascript:void(0);"><i class="fa fa-backward"></i></a>\n    <div class="body"></div>\n</div>'},this.App.Templates.filesLettersPreMergeFormOptionsModal=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <h4 class="modal-title">Pre Merge Options</h4>\n</div>\n<div class="modal-body height-auto max-height-500">\n    <div class="p-15">\n        <div rv-if="options.letterTemplateModel:medicalDocuments" class="container-medicalDocuments m-bottom-15">\n            <label>Non-Medical Documents:</label>\n            <select name="medicalDocuments" class="form-control medicalDocuments multi-select-pre-merge" multiple>\n                <option rv-each-row="nonMedicalDocumentsCol.models" rv-value="row:documentID">{row:documentTitle}</option>\n            </select>\n            <div class="m-top-5">Total documents selected <span id="count_medicalDocumentsSelected">(0)</span></div>\n        </div>\n\n        <div rv-if="options.letterTemplateModel:contactList" class="container-contactList m-bottom-15">\n            <label>Contact List:</label>\n            <select name="contactList" id="contactList" class="form-control" size="2">\n            </select>\n        </div>\n\n        <div rv-if="options.letterTemplateModel:ccList" class="container-ccList m-bottom-15">\n            <label>CC List:</label>\n            <select name="ccList" id="medicalCCList" class="form-control multi-select-pre-merge" multiple>\n            </select>\n            <div class="m-top-5">Total CC List selected <span id="count_medicalCCListSelected">(0)</span></div>\n        </div>\n\n        <div rv-if="options.letterTemplateModel:medicalJointDefense" class="container-medical-JOINT-DEFENSE m-bottom-15">\n            <label>Medical: Joint/Defense:</label>\n            <select name="medicalJointDefense" class="form-control">\n                <option value="Joint">Joint</option>\n                <option value="Defense">Defense</option>\n            </select>\n        </div>\n\n        <div rv-if="options.letterTemplateModel:medicalAmePqmeQme" class="container-medical-AME-PQME-QME m-bottom-15">\n            <label>Medical: AME/PQME/QME:</label>\n            <select name="medicalAmePqmeQme" class="form-control">\n                <option value="AME">AME</option>\n                <option value="PQME">PQME</option>\n                <option value="QME">QME</option>\n            </select>\n        </div>\n\n        <div rv-if="options.letterTemplateModel:medicalPreviousAppointmentDate" class=" m-bottom-15">\n            <label>Medical: Previous Appointment Date:</label>\n            <input type="text" class="form-control datepicker" placeholder="yyyy-mm-dd" name="medicalPreviousAppointmentDate"> (Only enter if this is a rescheduled appointment)\n        </div>\n\n        <div rv-if="options.letterTemplateModel:medicalDoctor" class=" m-bottom-15">\n            <label class="display-block">Medical: Doctor/Facility:</label>\n            <label for="doctor" class="font-normal">\n                <input type="radio" checked value="1" id="doctor" name="medicalDoctor"> Doctor\n            </label>\n\n            <label for="facility" class="font-normal">\n                <input type="radio" value="0" id="facility" name="medicalDoctor"> Facility\n            </label>\n        </div>\n\n        <div rv-if="options.letterTemplateModel:medicalTransportation" class=" m-bottom-15">\n            <label>Medical: Transportation:</label>\n            <select name="medicalTransportation" class="form-control" id="medical-transportation">\n                <option value="Insurer Check">Insurer Check</option>\n                <option value="Calculated Check">Calculated Check</option>\n                <option value="Provide Transportation">Provide Transportation</option>\n            </select>\n        </div>\n        <div class="m-bottom-15 display-none" id="calculated-check">\n            <label>Miles:</label>\n            <input type="number" class="form-control" name="miles">\n            <label>Mileage Rate:</label>\n            <input type="number" class="form-control" value=".50" name="mileageRate">\n            <label>Parking Fees:</label>\n            <input type="number" class="form-control" name="parkingFees">\n        </div>\n        <div class="m-bottom-15 display-none" id="provide-transportation">\n            <label>Transportation Service:</label>\n            <input type="text" class="form-control" name="transportationService">\n            <label>Service Phone:</label>\n            <input type="text" class="form-control" name="servicePhone">\n            <label>Pick-Up Time:</label>\n            <input type="text" class="form-control" name="pickUpTime">\n        </div>\n        <div rv-if="options.letterTemplateModel:objectionNonMpm" class=" m-bottom-15">\n            <label>\n                <input type="checkbox" name="AMEOffer" value="1"> AME Offer\n            </label>\n        </div>\n        <div rv-if="options.letterTemplateModel:mpmTransfer" class=" m-bottom-15">\n            <label>MPN Name:</label>\n            <input type="text" class="form-control" name="PTPName">\n            <label>Address:</label>\n            <input type="text" class="form-control" name="PTPaddress">\n            <label>City State Zip:</label>\n            <input type="text" class="form-control" name="PTPcityStZip">\n        </div>\n        <!-- <div rv-if="options.letterTemplateModel:eFile" class="m-bottom-15">\n            <label>\n                <input type="checkbox" name="eFile" value="1"> e-File\n            </label> -->\n    </div>\n\n    <div rv-if="options.letterTemplateModel:venuesList" class="m-bottom-15">\n        <label>All venues:</label>\n        <select name="venuesList" class="form-control">\n            <option value=""></option>\n        </select>\n    </div>\n\n</div>\n</div>\n<div class="modal-footer">\n    <button type="button" class="btn btn-default btn-close" data-dismiss="modal">Close</button>\n    <button type="button" class="btn btn-primary btn-generateReport">Continue...</button>\n    <button type="button" class="btn btn-primary btn-generateWordDocument" style="display:none;">Generate Word Document</button>\n</div>\n'},this.App.Templates.filesLiensLienBillForm=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <h4 class="modal-title" rv-if="lienBillModel.isNew">New Lien Bill</h4>\n    <h4 class="modal-title" rv-unless="lienBillModel.isNew">Edit Lien Bill</h4>\n</div>\n<div class="modal-body">\n    <form id="lien-bill-form">\n        <div class="panel-client-rep p-top-15">\n            <div class="form-horizontal">\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">\n                    </label>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Bill Document:</label>\n                    <div class="col-sm-8">\n                        <label class="m-top-7" rv-unless="lienBillModel:billDocumentID">NONE</label>\n                        <a rv-unless="lienBillModel:billDocumentID" href="javascript:void(0);" class="tst-addLienBill-plus btn btn-default btn-add-document"><i class="fa fa-plus"></i></a>\n\n                        <a class="btn btn-link" rv-if="lienBillModel:billDocumentID" target="_blank" rv-href="documentBillModel.getUrl < :documentID :documentName" rv-text="documentBillModel.getDocumentTitleOrNone < :documentTitle"></a>\n                        <a rv-if="lienBillModel:billDocumentID" href="javascript:void(0);" class="btn btn-default btn-add-document"><i class="fa fa-pencil"></i></a>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">OMFS Document:</label>\n                    <div class="col-sm-8">\n                        <label class="m-top-7" rv-unless="lienBillModel:OMFSdocumentID">NONE</label>\n                        <a rv-unless="lienBillModel:OMFSdocumentID" href="javascript:void(0);" class="tst-addOMFSdocument-plus btn btn-default btn-add-document-omfs"><i class="fa fa-plus"></i></a>\n\n                        <a class="btn btn-link" rv-if="lienBillModel:OMFSdocumentID" target="_blank" rv-href="documentOMFSModel.getUrl < :documentID :documentName" rv-text="documentOMFSModel.getDocumentTitleOrNone < :documentTitle"></a>\n                        <a rv-if="lienBillModel:OMFSdocumentID" href="javascript:void(0);" class="btn btn-default btn-add-document-omfs"><i class="fa fa-pencil"></i></a>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Bill Title:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="name" rv-value="lienBillModel:name" required>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Date Received:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control datepicker date-mask" placeholder="yyyy-mm-dd" name="dateReceived" rv-value="lienBillModel:dateReceived">\n                        <input type="hidden" class="form-control" name="lienBillID" rv-value="lienBillModel:lienBillID">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Amount:</label>\n                    <div class="col-sm-8">\n                        <input type="number" class="form-control" name="amount" rv-value="lienBillModel:amount">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">OMFS Amount:</label>\n                    <div class="col-sm-8">\n                        <input type="number" class="form-control" name="lienOMFS" rv-value="lienBillModel:lienOMFS">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Service Notes:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="service" rv-value="lienBillModel:serviceNotes">\n                    </div>\n                </div>\n            </div>\n        </div>\n    </form>\n</div>\n<div class="modal-footer">\n    <button type="button" class="tst-lienBill-save-btn btn btn-primary pull-right m-left-8" id="save-lien-bill">Save</button>\n    <button type="button" class="btn btn-default pull-right" data-dismiss="modal">Close</button>\n</div>'},this.App.Templates.filesLiensLienDemandForm=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <h4 class="modal-title" rv-if="isNew">New Lien Demand</h4>\n    <h4 class="modal-title" rv-unless="isNew">Edit Lien Demand</h4>\n</div>\n<div class="modal-body">\n    <form id="lien-demand-form">\n        <div class="panel-client-rep p-top-15">\n            <div class="form-horizontal">\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Demand Name:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="demandName" rv-value="lienDemandModel:demandName" required>\n                        <input type="hidden" class="form-control" name="lienDemandID" rv-value="lienDemandModel:lienDemandID">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Demand Amount:</label>\n                    <div class="col-sm-8">\n                        <input type="number" class="form-control" name="demandAmount" rv-value="lienDemandModel:demandAmount" required>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Demand Date:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control datepicker" placeholder="yyyy-mm-dd" name="demandDate" rv-value="lienDemandModel:demandDate" required>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </form>\n</div>\n<div class="modal-footer">\n    <button type="button" class="tst-lienDemand-save-btn btn btn-primary pull-right m-left-8" id="save-lien-demand">Save</button>\n    <button type="button" class="btn btn-default pull-right" data-dismiss="modal">Close</button>\n</div>'},this.App.Templates.filesLiensLienObjectionForm=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <h4 class="modal-title" rv-if="isNew">New Lien Objection</h4>\n    <h4 class="modal-title" rv-unless="isNew">Edit Lien Objection</h4>\n</div>\n<div class="modal-body">\n    <form id="lien-objection-form">\n        <div class="panel-client-rep p-top-15">\n            <div class="form-horizontal">\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">\n                        <a rv-unless="lienObjectionModel:documentID" href="javascript:void(0);" class="btn btn-default btn-add-document"><i class="fa fa-plus"></i> Add Document</a>\n                        <a rv-if="lienObjectionModel:documentID" href="javascript:void(0);" class="btn btn-default btn-add-document"><i class="fa fa-pencil"></i> Replace Document</a>\n                    </label>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Document:</label>\n                    <div class="col-sm-8">\n                        <label class="m-top-7" rv-unless="lienObjectionModel:documentID">NONE</label>\n                        <a class="btn btn-link" rv-if="lienObjectionModel:documentID" target="_blank" rv-href="documentModel.getUrl < :documentID :documentName" rv-text="documentModel.getDocumentTitleOrNone < :documentTitle"></a>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Objection Date:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control datepicker" placeholder="yyyy-mm-dd" name="objectionDate" rv-value="lienObjectionModel:objectionDate" required>\n                        <input type="hidden" class="form-control" name="objectionID" rv-value="lienObjectionModel:objectionID">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Objection Note:</label>\n                    <div class="col-sm-8">\n                        <textarea class="form-control" name="objectionNote" rv-value="lienObjectionModel:objectionNote"></textarea>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </form>\n</div>\n<div class="modal-footer">\n    <button type="button" class="tst-lienObjection-save-btn btn btn-primary pull-right m-left-8" id="save-lien-objection">Save</button>\n    <button type="button" class="btn btn-default pull-right" data-dismiss="modal">Close</button>\n</div>'},this.App.Templates.filesLiensLienOfferForm=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <h4 class="modal-title" rv-if="isNew">New Lien Offer</h4>\n    <h4 class="modal-title" rv-unless="isNew">Edit Lien Offer</h4>\n</div>\n<div class="modal-body">\n    <form id="lien-offer-form">\n        <div class="panel-client-rep p-top-15">\n            <div class="form-horizontal">\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Offer Name:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="offerName" rv-value="lienOfferModel:offerName" required>\n                        <input type="hidden" class="form-control" name="lienOfferID" rv-value="lienOfferModel:lienOfferID">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Offer Amount:</label>\n                    <div class="col-sm-8">\n                        <input type="number" class="form-control" name="offerAmount" rv-value="lienOfferModel:offerAmount" required>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Offer Date:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control datepicker" placeholder="yyyy-mm-dd" name="offerDate" rv-value="lienOfferModel:offerDate" required>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </form>\n</div>\n<div class="modal-footer">\n    <button type="button" class="tst-lienOffer-save-btn btn btn-primary pull-right m-left-8" id="save-lien-offer">Save</button>\n    <button type="button" class="btn btn-default pull-right" data-dismiss="modal">Close</button>\n</div>'},this.App.Templates.filesLiensLienRepForm=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <h4 class="modal-title" rv-if="isNew">New Lien Rep</h4>\n    <h4 class="modal-title" rv-unless="isNew">Edit Lien Rep</h4>\n</div>\n<div class="modal-body">\n    <form id="lien-rep-form">\n        <div class="panel-client-rep p-top-15">\n            <div class="form-horizontal">\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 font-size-15 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Company:</label>\n                    <div class="col-sm-7">\n                        <input type="text" class="form-control search-files typeahead company_typeahead" name="companyName" required>\n                        <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="companyName"><i class="fa fa-chevron-down"></i></a>\n\n                    </div>\n                    <div class="input-group-btn">\n                        <a class="btn btn-default" id=\'company_form_edit\' href="javascript:void(0);"><i class="fa fa-pencil"></i></a>\n                        <a class="btn btn-default" id=\'company_form_new\' href="javascript:void(0);"><i class="tst-addCompanyForm-btn fa fa-plus"></i></a>\n                        <a class="btn btn-default control-tooltip" data-help-id="fileInputCompanySearchHelp" href="javascript:void(0);"><i class="fa fa-question-circle fa-lg"></i></a>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> First Name:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="lienRepFirstName" rv-value="lienRepModel:lienRepFirstName" required>\n                        <input type="hidden" class="form-control" name="lienRepID" rv-value="lienRepModel:lienRepID">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Middle Name:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="lienRepMiddleName" rv-value="lienRepModel:lienRepMiddleName">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Last Name:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="lienRepLastName" rv-value="lienRepModel:lienRepLastName" required>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Email:</label>\n                    <div class="col-sm-8">\n                        <input type="email" class="form-control" name="lienRepEmail" rv-value="lienRepModel:lienRepEmail">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Office Phone:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control phone-mask" name="lienRepOfficePhone" rv-value="lienRepModel:lienRepOfficePhone">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Cell Phone:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control phone-mask" name="lienRepCellPhone" rv-value="lienRepModel:lienRepCellPhone">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Fax:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control phone-mask" name="lienRepFax" rv-value="lienRepModel:lienRepFax">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Phone Ext:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="lienRepPhoneExtension" rv-value="lienRepModel:lienRepPhoneExtension">\n                    </div>\n                </div>\n            </div>\n        </div>\n    </form>\n</div>\n<div class="modal-footer">\n    <button type="button" class="btn btn-primary pull-right m-left-8" id="save-lien-rep">Save</button>\n    <button type="button" class="tst-lienRepForm-close-btn btn btn-default pull-right" data-dismiss="modal">Close</button>\n</div>'},this.App.Templates.filesSubroEventTabsDiscoveryExtensionForm=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <h4 class="modal-title" rv-if="isNew">New Discovery Extension</h4>\n    <h4 class="modal-title" rv-unless="isNew">Edit Discovery Extension</h4>\n</div>\n<div class="modal-body">\n    <form id="discovery-extension-form">\n        <div class="panel-client-rep p-top-15">\n            <div class="form-horizontal">\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"> Extension Granted?:</label>\n                    <div class="col-sm-8">\n                        <input type="checkbox" name="done" rv-checked="discoveryExtensionModel:extensionGranted">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Due Date:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control datepicker" placeholder="yyyy-mm-dd" name="dueDate" rv-value="discoveryExtensionModel:dueDate" required>\n                        <input type="hidden" name="extensionID" rv-value="discoveryExtensionModel:extensionID">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"> Notes:</label>\n                    <div class="col-sm-8">\n                        <textarea class="form-control" name="note" rv-value="discoveryExtensionModel:note"></textarea>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </form>\n</div>\n<div class="modal-footer">\n    <button type="button" class="tst-lienOffer-save-btn btn btn-primary pull-right m-left-8" id="save-discovery-extension">Save</button>\n    <button type="button" class="btn btn-default pull-right" data-dismiss="modal">Close</button>\n</div>'},this.App.Templates.filesSubroEventTabsDiscoveryResponseForm=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <h4 class="modal-title" rv-if="isNew">New Discovery Response</h4>\n    <h4 class="modal-title" rv-unless="isNew">Edit Discovery Response</h4>\n</div>\n<div class="modal-body">\n    <form id="discovery-response-form">\n        <div class="panel-client-rep p-top-15">\n            <div class="form-horizontal">\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"> Adequate Response?:</label>\n                    <div class="col-sm-8">\n                        <input type="checkbox" name="done" rv-checked="discoveryResponseModel:adequateResponse">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> POS Date:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control datepicker" placeholder="yyyy-mm-dd" name="posDate" rv-value="discoveryResponseModel:posDate" required>\n                        <input type="hidden" name="responseID" rv-value="discoveryResponseModel:responseID">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"> Notes:</label>\n                    <div class="col-sm-8">\n                        <textarea class="form-control" name="note" rv-value="discoveryResponseModel:note"></textarea>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </form>\n</div>\n<div class="modal-footer">\n    <button type="button" class="tst-response-save-btn btn btn-primary pull-right m-left-8" id="save-discovery-response">Save</button>\n    <button type="button" class="btn btn-default pull-right" data-dismiss="modal">Close</button>\n</div>'},this.App.Templates.filesSubroEventTabsEventBilling=function(a){{var b="";_.escape}return b+='<a class="btn btn-default btn-new-bill" href="javascript:void(0);" rv-if="options.fileModel.isFileOpened"><i class="glyphicon glyphicon-plus"></i> Add New Bill</a>\n<a class="control-tooltip c-black p-left-10" data-help-id="eventAddBillHelp" href="javascript:void(0);"><i class="fa fa-question-circle fa-lg"></i></a>\n<fieldset class="m-top-20">\n    <legend rv-if="options.colBillings.length">Bills ({options.colBillings.length})</legend>\n    <legend rv-unless="options.colBillings.length">Bills (0)</legend>\n\n    <div class="table-responsive m-bottom-5">\n        <table class="table">\n            <thead>\n            <tr class="b-blue-light c-white">\n                <th class="width-100">Billing Date</th>\n                <th>Billing Description</th>\n                <th class="width-115">Invoice Number</th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr rv-each-model=\'options.colBillings.models\' class="billing-row cursor-pointer">\n                <td rv-data-billingid="model:billingID" class="gotoBilling">\n                    <div>{model:billingDate}</div>\n                </td>\n                <td rv-data-billingid="model:billingID" class="gotoBilling">\n                    <div>{model:billingDescription}</div>\n                </td>\n                <td rv-data-billingid="model:billingID">\n                    <div rv-if="model:invoiceNumber" class="gotoInvoice" rv-data-invoicenumber="model:invoiceNumber">{model:invoiceNumber}</div>\n                    <div rv-unless="model:invoiceNumber">Not Invoiced</div>\n                </td>\n            </tr>\n            <tr rv-unless=\'options.colBillings.length\'>\n                <td colspan="3" class="no-data">\n                    <strong>No bills filed yet.</strong>\n                </td>\n            </tr>\n            </tbody>\n        </table>\n    </div>\n</fieldset>'},this.App.Templates.filesSubroEventTabsEventDocument=function(a){{var b="";_.escape}return b+='<form id="event-document-form" data-permission="31">\n    <a class="btn btn-default btn-documentBrowser" href="javascript:void(0);"><i class="glyphicon glyphicon-plus"></i> Add Documents</a> <a class="control-tooltip c-black p-left-10" data-help-id="eventAddDocumentHelp" href="javascript:void(0);"><i class="fa fa-question-circle fa-lg"></i></a>\n\n    <fieldset class="m-top-20">\n        <legend>Documents Assigned ({options.colEventToDocuments.length})</legend>\n        <div class="table-responsive panel-documents m-bottom-5">\n            <table class="table">\n                <thead>\n                <tr class="b-blue-light c-white">\n                    <th>Edit</th>\n                    <th data-permission="53">Remove</th>\n                    <th class="width-200">\n                        Document Title\n                    </th>\n                    <th>\n                        Document Name\n                    </th>\n                    <th>Designations</th>\n                </tr>\n                </thead>\n                <tbody>\n                <tr rv-each-row=\'options.colEventToDocuments.models\' rv-hide=\'isRemoved < row:removed\'>\n                    <td>\n                        <a href="javascript:void(0);" class="tst-eventsDocumentEdit-Pencil btnEditDocument" rv-data-document-id=\'row:documentID\'>\n                            <i class="fa fa-pencil"></i>\n                        </a>\n                    </td>\n                    <td data-permission="53">\n                        <a href="javascript:void(0);" class="btnRemoveDocument" rv-data-document-id=\'row:documentID\'>\n                            <i class="fa fa-remove"></i>\n                        </a>\n                    </td>\n                    <td class="width-200">\n                        <a rv-title=\'row:documentTitle\' rv-href="getDocumentUrl < row" target="_blank">{row:documentTitle}</a>\n                    </td>\n                    <td>\n                        <a rv-title=\'row:documentName\' rv-href="getDocumentUrl < row" target="_blank">{row:documentName}</a>\n                    </td>\n                    <td>\n                        {getDesignations < row:designations}\n                    </td>\n                </tr>\n                <tr rv-unless=\'options.colEventToDocuments.length\'>\n                    <td colspan="18" class="no-data">\n                        <strong>No data to display</strong>\n                    </td>\n                </tr>\n                </tbody>\n            </table>\n        </div>\n    </fieldset>\n</form>\n';

},this.App.Templates.filesSubroEventTabsEventForm=function(a){{var b="";_.escape}return b+='<div class="container m-top-15" data-permission="31">\n    <div class="b-grey-tabs box-shadow p-20">\n        <div class="form-horizontal">\n            <div class="form-group m-bottom-5">\n                <label class="col-sm-3 control-label"></i> File Name:</label>\n                <div class="col-sm-8 p-top-7">\n                    {options.fileModel:subroInternalFileName}\n                </div>\n            </div>\n        </div>\n        <div class="form-horizontal">\n            <div class="form-group m-bottom-5" data-permission="37">\n                <label class="col-sm-3 control-label">Event Category:</label>\n                <div class="col-sm-8">\n                    <select name="category-type" rv-value="model:etcID" class="form-control">\n                        <option selected="selected" value="">Select one category</option>\n                        <option rv-value="row:etcID" rv-each-row="colEventTypeCategories.models">{row:etcName}</option>\n                    </select>\n                </div>\n            </div>\n            <span data-permission="37">\n					<div class="form-group m-bottom-5" rv-if="model.hasCategory < :etcID">\n						<label class="col-sm-3 control-label">Event Type:</label>\n						<div class="col-sm-8">\n							<input type="text" class="form-control typeahead eventTypes-Typeahead" name="eventTypes" required>\n							<a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="eventTypes"><i class="fa fa-chevron-down"></i></a>\n						</div>\n					</div>\n				</span>\n            <div id=\'existing-events-select\' class="form-group m-bottom-5 display-none">\n\n                <label class="col-sm-3 control-label"><a class="control-tooltip c-black p-left-10" data-help-id="fileEventChooseNewOrExistingHelp" href="javascript:void(0);"><i class="fa fa-question-circle fa-lg"></i></a> Choose new or existing:</label>\n                <div class="col-sm-8 some-div">\n                    <select name="existing-select" class="form-control">\n                        <option selected value="-1">Please select one</option>\n                        <option value=\'new\'>New</option>\n                        <option rv-value="row:eventID" rv-each-row="colExistingEvents.models">\n                            {row:eventTitle} - {row:billingDescription} - {row:eventDate}\n                        </option>\n                    </select>\n                </div>\n            </div>\n            <div id=\'close-event-reasons\' class="form-group m-bottom-5 display-none">\n                <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Close Reason:</label>\n                <div class="col-sm-8">\n                    <select class="form-control" id="eventReason" rv-value="model:eventReasonID" name="appointedBy" required>\n                        <option rv-each-reason="colEventReasons.models" rv-value="reason:eventReasonID">{reason:description}</option>\n                    </select>\n                </div>\n            </div>\n            <div id="eventTypeInstructions" class="form-group m-bottom-5 display-none">\n                <label class="event-instructions col-sm-8 col-sm-offset-3 control-label" id="instructionsText"></label>\n            </div>\n            <div id=\'other-fields\' class=\'display-none\'>\n                <!-- Nav tabs -->\n                <ul class="nav nav-tabs m-top-20" role="tablist">\n                    <li role="presentation" class="active"><a href="#event-form-tab" role="tab" data-toggle="tab">Event</a></li>\n                    <li role="presentation"><a href="#event-form-tab3" role="tab" data-toggle="tab">{tab3}</a></li>\n                    <li role="presentation"><a href="#event-form-tab4" role="tab" data-toggle="tab">{tab4}</a></li>\n                    <li role="presentation"><a href="#event-form-tab5" role="tab" data-toggle="tab">{tab5}</a></li>\n                    <li role="presentation"><a href="#event-form-tab6" role="tab" data-toggle="tab">{tab6}</a></li>\n                    <li role="presentation"><a href="#event-form-tab7" role="tab" data-toggle="tab">{tab7}</a></li>\n                    <li role="presentation"><a href="#event-form-tab8" role="tab" data-toggle="tab">{tab8}</a></li>\n\n                    <li role="presentation"><a class=\'tabAttachments\' href="#document-form-tab" role="tab" data-toggle="tab">Attachments</a></li>\n                    <li role="presentation" class="additional-button">\n                        <a class=\'auto-save\' href="#billing-form-tab" role="tab" data-toggle="tab">\n                            Billing\n                            <span class="cursor-pointer" id="add-new-bill"><i class="fa fa-plus" aria-hidden="true"></i></span>\n                        </a>\n                    </li>\n                    <li role="presentation"><a class=\'tabLetters auto-save\' href="#letters-tab" role="tab" data-toggle="tab">Letters</a></li>\n                </ul>\n\n                <!-- Tab panes -->\n                <div class="tab-content">\n                    <div role="tabpanel" class="tab-pane active" id="event-form-tab"></div>\n                    <div role="tabpanel" class="tab-pane" id="event-form-tab3"></div>\n                    <div role="tabpanel" class="tab-pane" id="event-form-tab4"></div>\n                    <div role="tabpanel" class="tab-pane" id="event-form-tab5"></div>\n                    <div role="tabpanel" class="tab-pane" id="event-form-tab6"></div>\n                    <div role="tabpanel" class="tab-pane" id="event-form-tab7"></div>\n                    <div role="tabpanel" class="tab-pane" id="event-form-tab8"></div>\n                    <div role="tabpanel" class="tab-pane" id="document-form-tab"></div>\n                    <div role="tabpanel" class="tab-pane" id="billing-form-tab"></div>\n                    <div role="tabpanel" class="tab-pane" id="letters-tab"></div>\n                </div><!-- End of tab content -->\n                <div class="form-group m-bottom-5">\n                    <div class="col-sm-2 p-top-10" rv-unless="model:isCorrupt">\n                        <div>\n                            <button id="save-event" class="btn-casefriend btn-lg">Save Event</button>\n                        </div>\n                    </div>\n                    <div class="col-sm-3 p-top-10" rv-unless="model:isCorrupt">\n                        <div>\n                            <button id="save-event-and-create-new-event" class="btn-casefriend btn-lg">Save & Create New</button>\n                        </div>\n                        <div id=\'error-msg\' class=\'c-red\'></div>\n                    </div>\n                    <div class="col-sm-3 p-top-10 font-size-16 m-top-5" rv-unless="model.isNew">\n                        <button id="show-dependencies" class="btn btn-info" data-permission="32">Show Dependencies</button>\n                        <div id=\'error-msg\' class=\'c-red\'></div>\n                    </div>\n                    <div class="col-sm-4 p-top-10 t-align-right" rv-if="model:childID">\n                        Extended Event ID: {model:childID}\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'},this.App.Templates.filesSubroEventTabsEventGeneral=function(a){{var b="";_.escape}return b+='<form id=\'event-general-tab-form\' data-permission="31">\n    <div class="form-group m-bottom-5">\n        <label class="col-sm-3 control-label">Event Title:</label>\n        <div class="col-sm-8">\n            <input type="text" class="form-control tst-event-title-input" name="eventTitle" rv-value="model:eventTitle">\n        </div>\n    </div>\n    <!--All commented code lines are waiting for if add or not the propoundedBy and propoundedBy columns-->\n    <!--<div class="form-group m-bottom-5">-->\n        <!--<label class="col-sm-3 control-label">Propounded By:</label>-->\n        <!--<div class="col-sm-8">-->\n            <!--<input type="text" class="form-control tst-event-propounded-by-input" name="propoundedBy" rv-value="model:propoundedBy">-->\n        <!--</div>-->\n    <!--</div>-->\n    <!--<div class="form-group m-bottom-5">-->\n        <!--<label class="col-sm-3 control-label">Responding Party:</label>-->\n        <!--<div class="col-sm-8">-->\n            <!--<input type="text" class="form-control tst-event-responding-by-input" name="respondingBy" rv-value="model:respondingBy">-->\n        <!--</div>-->\n    <!--</div>-->\n    <div class="form-group m-bottom-5" rv-if=\'false\'>\n        <label class="col-sm-3 control-label">Set Notification:</label>\n        <div class="col-sm-8">\n            <select name="alarm-type">\n                <option>None</option>\n                <option>Alarm</option>\n                <option disabled>Email</option>\n                <option disabled>Message</option>\n            </select>\n            <span class="c-blue-link p-left-10 cursor-pointer"><i class="fa fa-plus fa-lg"></i><span class="p-left-5">Notification</span></span>\n        </div>\n    </div>\n    <div class="form-group m-bottom-5" rv-if=\'false\'>\n        <label class="col-sm-3 control-label">Done:</label>\n        <div class="col-sm-8">\n            <input type="checkbox" name="done" rv-checked="model:done">\n        </div>\n    </div>\n    <div class="form-group m-bottom-5">\n        <div class="col-sm-3 t-align-right">\n            <label class="">Milestones:</label>\n            <a id="arrow-milestone" href="javascript:void(0);">\n                <i class="tst-milestones-arrow fa fa-arrow-right milestones-inline fa-lg"></i>\n                <i class="tst-milestones-arrow fa fa-arrow-down milestones-expanded display-none fa-lg"></i>\n            </a>\n        </div>\n        <div class="col-sm-8 contro-label">\n            <div class="milestones-inline">\n				<span rv-each-row="options.colMilestones.models">\n					<span rv-if="row:selected">\n					{row:name} &nbsp;\n					</span>\n				</span>\n            </div>\n\n            <div class="milestones-expanded display-none">\n                <table>\n                    <thead>\n                    <tr>\n                        <td class="p-right-10 font-bold">Check</td>\n                        <td class="p-right-10 font-bold">Milestone</td>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    <tr rv-each-row="options.colMilestones.models">\n                        <td>\n                            <input type="checkbox" class="milestone" rv-checked=\'row:selected\'/>\n                        </td>\n                        <td>\n                            {row:name}\n                        </td>\n                    </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    </div>\n    <div class="form-group m-bottom-5">\n        <label class="col-sm-3 control-label"> <i class="fa fa-asterisk c-red font-size-10"></i> Event Date:</label>\n        <div class="col-sm-8">\n            <input type="text" class="form-control datepicker" default-today name="eventDate" placeholder="yyyy-mm-dd" rv-value="model:eventDate" required>\n        </div>\n    </div>\n    <div class="form-group m-bottom-5">\n        <label class="col-sm-3 control-label"> Short Note:</label>\n        <div class="col-sm-8">\n            <textarea class="form-control" rows="2" name="shortNote" rv-value="model:shortNote"></textarea>\n        </div>\n    </div>\n    <div class="form-group m-bottom-5">\n        <label class="col-sm-3 control-label"> Long Note:</label>\n        <div class="col-sm-8">\n            <textarea class="form-control" rows="15" name="longNote" rv-value="model:longNote"></textarea>\n        </div>\n    </div>\n    <div class="form-group m-bottom-5">\n        <label class="col-sm-3 control-label"> Important:</label>\n        <div class="col-sm-8">\n            <input type="checkbox" name="important" class="m-top-i-10" rv-checked="model:important">\n        </div>\n    </div>\n    <div class="form-group m-bottom-5">\n        <label class="col-sm-3 control-label">Read:</label>\n        <div class="col-sm-8">\n            <input type="checkbox" name="read" class="m-top-i-10" rv-checked="model:read">\n        </div>\n    </div>\n\n    <fieldset class="m-top-20">\n        <div class="table-responsive m-bottom-5">\n            <table class="table">\n                <caption  class="font-size-16 p-bottom-10">\n                    <i class="fa fa-exclamation-triangle p-right-10 text-danger" aria-hidden="true"></i>Alert Reminders ({colAlerts.length})\n                    <a id="arrow-alerts" href="javascript:void(0);" class="p-left-10">\n                        <i class="tst-alerts-arrow fa fa-arrow-right alerts-inline display-none fa-lg"></i>\n                        <i id=\'alerts-arrow-down\' class="tst-alerts-arrow fa fa-arrow-down alerts-expanded  fa-lg"></i>\n                    </a>\n                    <a class="pull-right p-right-75" href="javascript:void(0);" id="new-alert"><i class="glyphicon glyphicon-plus"></i> Add New Alert</a>\n                </caption>\n                <thead class="alerts-expanded ">\n                <tr class="success">\n                    <th class="">Alert Date</th>\n                    <th>Alert Time</th>\n                    <th class="">Description</th>\n                    <th class="">Remind Prior</th>\n                    <th class="">Users</th>\n                    <th class="">Actions</th>\n                </tr>\n                </thead>\n                <tbody class="alerts-expanded ">\n                <tr rv-each-row=\'colAlerts.models\' class="cursor-pointer alert-row" rv-data-alert-id="row:alert_id">\n                    <td>\n                        <div>{row:date}</div>\n                    </td>\n                    <td>\n                        <div>{row:time}</div>\n                    </td>\n                    <td>\n                        <div>{row:description}</div>\n                    </td>\n                    <td>\n                        <div>{row:notificationQuantity} {row:notificationUnit}</div>\n                    </td>\n                    <td>\n                        <ul>\n                            <li rv-each-user="row:colUsers">\n                                {user.typeaheadResult}\n                            </li>\n                        </ul>\n\n                    </td>\n                    <td>\n                        <a href="javascript:void(0);" class="btn btn-link alert-row" rv-data-alert-id="row:alert_id">\n                            <i class="fa fa-edit"></i>\n                        </a>\n                        <a href="javascript:void(0);" class="btn btn-link c-red remove-alert" rv-data-alert-id="row:alert_id">\n                            <i class="fa fa-remove"></i>\n                        </a>\n                    </td>\n                </tr>\n                <tr rv-unless=\'colAlerts.length\'>\n                    <td colspan="3" class="no-data">\n                        <strong>No alerts created for this event.</strong>\n                    </td>\n                </tr>\n                </tbody>\n            </table>\n        </div>\n    </fieldset>\n</form>\n'},this.App.Templates.filesSubroEventTabsEventSubroCaseInfoFirst=function(a){{var b="";_.escape}return b+="<div>View for eventSubroCaseInfoFirst</div>"},this.App.Templates.filesSubroEventTabsEventSubroCorrespondenceFirst=function(a){{var b="";_.escape}return b+="<div>View for eventSubroCorrespondenceFirst</div>"},this.App.Templates.filesSubroEventTabsEventSubroCostFirst=function(a){{var b="";_.escape}return b+="<div>View for eventSubroCostFirst</div>"},this.App.Templates.filesSubroEventTabsEventSubroDiscoveryFirst=function(a){{var b="";_.escape}return b+='<!-- Discovery Extension -->\n<div class="form-horizontal" data-permission="31">\n    <div class="form-group m-bottom-5">\n        <label class="col-sm-3 control-label"> User Most Respond?:</label>\n        <div class="col-sm-8">\n            <input type="checkbox" name="done" rv-checked="model:userMostResponse">\n        </div>\n    </div>\n    <div class="form-group m-bottom-5">\n        <label class="col-sm-3 control-label"> Due Date:</label>\n        <div class="col-sm-8">\n            <input type="text" class="form-control datepicker" name="eventDate" placeholder="yyyy-mm-dd" rv-value="model:dueDate" required>\n        </div>\n    </div>\n    <div class="form-group m-bottom-5">\n        <div class="col-sm-4 p-top-10">\n            <a data-permission="2" href="javascript:void(0);" id=\'add-discovery-extension\' class=\'font-size-16\'>\n                <i class="fa fa-plus fa-lg"></i> Add Extension\n            </a>\n        </div>\n    </div>\n    <br>\n    <fieldset >\n        <table class="table">\n            <thead>\n            <tr>\n                <th>Extension Granted</th>\n                <th>Due Date</th>\n                <th>Note</th>\n                <th>Actions</th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr rv-each-row="discoveryExtensions.models">\n                <td>\n                    <i class="fa fa-check-square-o fonst-size-18" aria-hidden="true" rv-if="row:extensionGranted"></i>\n                </td>\n                <td>{row:dueDate}</td>\n                <td>{row:note}</td>\n                <td>\n                    <a class=\'m-right-5 discovery-extension-edit\' href="javascript:void(0);" rv-data-model=\'row.cid\'>\n                        <i class="fa fa-pencil"></i>\n                    </a>\n                    <a class=\'m-right-5 discovery-extension-delete\' href="javascript:void(0);" rv-data-model=\'row.cid\'>\n                        <i class="c-red t-align-right fa fa-times"></i>\n                    </a>\n                </td>\n            </tr>\n            </tbody>\n        </table>\n    </fieldset>\n</div>'},this.App.Templates.filesSubroEventTabsEventSubroDiscoverySecond=function(a){{var b="";_.escape}return b+='<!-- Discovery Response -->\n<div class="form-horizontal" data-permission="31">\n    <div class="form-group m-bottom-5">\n        <div class="col-sm-4 p-top-10">\n            <a data-permission="2" href="javascript:void(0);" id=\'add-discovery-response\' class=\'font-size-16\'>\n                <i class="fa fa-plus fa-lg"></i> Add Response\n            </a>\n        </div>\n    </div>\n    <br>\n    <fieldset >\n        <table class="table">\n            <thead>\n            <tr>\n                <th>Adequate Response</th>\n                <th>POS Date</th>\n                <th>Note</th>\n                <th>Actions</th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr rv-each-row="discoveryResponses.models">\n                <td>\n                    <i class="fa fa-check-square-o fonst-size-18" aria-hidden="true" rv-if="row:adequateResponse"></i>\n                </td>\n                <td>{row:posDate}</td>\n                <td>{row:note}</td>\n                <td>\n                    <a class=\'m-right-5 discovery-response-edit\' href="javascript:void(0);" rv-data-model=\'row.cid\'>\n                        <i class="fa fa-pencil"></i>\n                    </a>\n                    <a class=\'m-right-5 discovery-response-delete\' href="javascript:void(0);" rv-data-model=\'row.cid\'>\n                        <i class="c-red t-align-right fa fa-times"></i>\n                    </a>\n                </td>\n            </tr>\n            </tbody>\n        </table>\n    </fieldset>\n</div>'},this.App.Templates.filesSubroEventTabsEventSubroEvidenceFirst=function(a){{var b="";_.escape}return b+="<div>View for eventSubroEvidenceFirst</div>"},this.App.Templates.filesSubroEventTabsEventSubroHearingFirst=function(a){{var b="";_.escape}return b+="<div>View for eventSubroHearingFirst</div>"},this.App.Templates.filesSubroEventTabsEventSubroPleadingFirst=function(a){{var b="";_.escape}return b+="<div>View for eventSubroPleadingFirst</div>"},this.App.Templates.filesSubroEventTabsShowDependencies=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <h4 class="modal-title">Event Dependencies for: {model:eventTitle}</h4>\n</div>\n<div class="modal-body">\n    <div class="panel-info-dependencies m-bottom-15 p-bottom-15">\n        <h2 class="title font-size-18 font-bold p-15">{options.categoryName} - {model:eventTypeName}: {model:eventTypeDescription}</h2>\n        <div class="form-horizontal p-left-20">\n            <div class="form-group">\n                <span class="col-sm-2">Event Title:</span>\n                <div class="col-sm-5 p-left-0">\n                    <span class="c-blue-link font-bold">{model:eventTitle}</span>\n                </div>\n                <span class="col-sm-2">Event Date:</span>\n                <div class="col-sm-2 p-left-0">\n                    <span class="c-blue-link font-bold">{model:eventDate}</span>\n                </div>\n            </div>\n\n            <div id="extended-data"></div>\n\n            <div class="form-group">\n                <span class="col-sm-2">Milestones:</span>\n                <div class="col-sm-10 p-left-0">\n                    <span class="c-blue-link font-bold" rv-each-row="milestones.models">\n                    	<span rv-if="row:selected">{row:name} &nbsp; &nbsp; &nbsp;</span>\n                    </span>\n                </div>\n            </div>\n            <div class="form-group">\n                <span class="col-sm-2">Short Note:</span>\n                <div class="col-sm-10 p-left-0">\n                    <p class="font-bold p-left-0 p-right-20">{model:shortNote}</p>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="clearfix"></div>\n\n    <div id="extended-lists"></div>\n\n    <div class="panel panel-casefreind" rv-if="billings.length">\n        <div class="panel-heading" role="tab">\n            <h4 class="panel-title">\n                <a class="accordion-toggle font-bold" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapsebills" aria-expanded="false" aria-controls="collapsebills">\n                    Bills ({billings.length})\n                </a>\n            </h4>\n        </div>\n        <div class="panel-body collapse in" id="collapsebills">\n            <fieldset>\n                <table class="table liens-panels-max-size">\n                    <thead>\n                    <tr>\n                        <th>Date</th>\n                        <th>Description</th>\n                        <th>InvoiceNumber</th>\n                        <th>Reviewed</th>\n                        <th class="t-align-right m-right-30">Actions</th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    <tr rv-each-row="billings.models">\n                        <td>{row:billingDate}</td>\n                        <td>{row:billingDescription}</td>\n                        <td>\n                            <div rv-if="row:invoiceNumber">{row:invoiceNumber}</div>\n                            <div rv-unless="row:invoiceNumber">Not Invoiced</div>\n                        </td>\n                        <td>\n                            <span rv-if="row:reviewed" class="label label-success">YES</span>\n                            <span rv-unless="row:reviewed" class="label label-warning">NO</span>\n                        </td>\n                        <td class="t-align-right p-right-i-20">\n                            <a class=\'m-right-5 bill-delete\' href="javascript:void(0);" rv-if="showDeletebilling" rv-data-model=\'row.cid\' data-permission="36">\n                                <i class="c-red fa fa-times"></i>\n                            </a>\n                        </td>\n                    </tr>\n                    </tbody>\n                </table>\n            </fieldset>\n        </div>\n    </div>\n\n    <div class="clearfix"></div>\n\n    <div class="panel panel-casefreind" rv-if="documents.length">\n        <div class="panel-heading" role="tab">\n            <h4 class="panel-title">\n                <a class="accordion-toggle font-bold" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseDocuments" aria-expanded="false" aria-controls="collapseDocuments">\n                    Documents ({documents.length})\n                </a>\n            </h4>\n        </div>\n        <div class="panel-body collapse in" id="collapseDocuments">\n            <fieldset>\n                <table class="table liens-panels-max-size">\n                    <thead>\n                    <tr>\n                        <th>Document Title</th>\n                        <th>Document Name</th>\n                        <th class="t-align-right m-right-30">Actions</th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    <tr rv-each-row="documents.models">\n                        <td>{row:documentTitle}</td>\n                        <td>{row:documentName}</td>\n                        <td class="t-align-right p-right-i-20">\n                            <a class=\'m-right-5 delete-document\' href="javascript:void(0);" rv-data-model=\'row.cid\' data-permission="53">\n                                <i class="c-red fa fa-times"></i>\n                            </a>\n                        </td>\n                    </tr>\n                    </tbody>\n                </table>\n            </fieldset>\n        </div>\n    </div>\n</div>\n<div class="modal-footer">\n    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n    <button type="button" class="btn btn-danger" data-permission="32" id=\'delete-event\'>Delete Event</button>\n</div>\n'},this.App.Templates.filesSubroFileEvents=function(a){{var b="";_.escape}return b+='<div class="container m-top-15" data-permission="30">\n    <div class="b-grey-tabs box-shadow">\n        <div class="sticky-wrapper" id="filter-fileEvents-sticky" style="min-height: 138px;">\n            <div class=\'b-green-casefriend min-height-100 p-top-10 p-bottom-5\'>\n                <div class="form-group col-sm-3 p-top-45">\n                    <a data-permission="2" rv-href="options.fileModel.fileNewEventUrl" id=\'add-new\' class=\'font-size-16\'>\n                        <i class="fa fa-plus fa-lg"></i>\n                        Create new event\n                    </a>\n                </div>\n                <div class="col-sm-6 col-xs-12 t-align-center">\n                    <span class="">\n                        <i class="fa fa-angle-double-left fa-lg sequential-counter c-blue-link cursor-pointer display-none p-right-5" id=\'load-files-first\'></i>\n					</span>\n                    <span class="">\n						<i class="fa fa-chevron-left sequential-counter c-blue-link cursor-pointer display-none p-right-5" id=\'load-files-prev\'></i>\n					</span>\n                    <span class=\'display-inline-block p-left-10 p-right-10\'>\n						<label class=\'p-bottom-6 font-size-17\'>\n                            <span id="show-offset" class="display-none">\n                                Showing Events from <span id=\'from-offset\'>0</span> to <span id="to-offset">{options.paginationConstant}</span>\n                            </span>\n                            <span id="show-all">\n                                Showing All Events\n                            </span>\n                            (Total {totalRows})\n                        </label>\n						<select class="form-control" id="eventOffset" data-selectorname="fileType" name="eventOffset">\n                            <option rv-data-min="-1">Show All Events</option>\n                            <option rv-each-row="PagesNumbers.models" rv-data-position="row:position" rv-data-min="row:min" rv-data-max="row:max">{row:min} - {row:max}</option>\n                        </select>\n					</span>\n                    <span>\n						<i class="fa fa-chevron-right sequential-counter c-blue-link cursor-pointer p-left-5" id=\'load-files-next\'></i>\n					</span>\n                    <span>\n						<i class="fa fa-angle-double-right fa-lg sequential-counter c-blue-link cursor-pointer p-left-5" id=\'load-files-last\'></i>\n					</span>\n                </div>\n                <div class="form-group col-sm-3 col-xs-12 p-top-45 t-align-right font-size-16">\n                    <a data-permission="2" class=\'display-none cursor-pointer\' id="filter-btn">\n                        <i class="fa fa-arrow-down"></i>\n                        Show Filters\n                    </a>\n                    <a data-permission="2" class=\'cursor-pointer\' id="filter-btn-close">\n                        <i class="fa fa-arrow-up"></i>\n                        Hide Filters\n                    </a>\n                    <a class="control-tooltip c-black p-left-10" data-help-id="fileEventFiltersHelp" href="javascript:void(0);"><i class="fa fa-question-circle fa-lg"></i></a>\n\n                </div>\n                <div>\n                    <div id=\'file-filters\' class="b-green-casefriend height-100">\n                        <div class="form-group col-sm-4 col-xs-12">\n                            <label class="control-label c-gray">Search by Event Title/Notes:</label><br>\n                            <div class="col-sm-12 p-left-0">\n                                <input type="text" class="typeahead form-control p-right-30 search-files event_typeahead" name="eventTitle">\n                                <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="eventTitle">\n                                    <i class="fa fa-chevron-down"></i>\n                                </a>\n                            </div>\n                        </div>\n                        <div class="form-group col-sm-4 col-xs-12">\n                            <label class="control-label c-gray">Search by Event Category:</label><br>\n                            <div class="col-sm-12 p-left-0">\n                                <select class="form-control p-right-30" id="eventCategory" data-selectorname="etcName" name="eventCategorys">\n                                    <option value="13">Timeline</option>\n                                    <option rv-each-row="options.colEventTypesCategories.models < .colEventTypesCategories" rv-value="row:etcID">{row:etcName}</option>\n                                </select>\n                            </div>\n                        </div>\n                        <div class="form-group col-sm-4 col-xs-12">\n                            <label class="control-label c-gray">Search by Event Type:</label><br>\n                            <div class="col-sm-12 p-left-0">\n                                <input type="text" class="typeahead form-control p-right-30 search-files event_type_typeahead" name="eventTypeName">\n                                <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="eventTypeName">\n                                    <i class="fa fa-chevron-down"></i>\n                                </a>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class="clearfix"></div>\n            </div>\n            <table class=\'table file-events-table file-events-header-table m-bottom-0\' style="height: 37px;">\n                <thead id=\'events-heads\'>\n                <tr>\n                    <th class="width-31 events-sortable cursor-pointer" data-sort=\'read\'></th>\n                    <th class=" events-sortable cursor-pointer font-bold width-100" data-sort=\'eventDate\'>\n                        Date <i class="fa fa-chevron-down"></i>\n                    </th>\n                    <th class=" events-sortable cursor-pointer font-bold width-100" data-sort=\'etcName\'>\n                        Category\n                    </th>\n                    <th class=" events-sortable cursor-pointer font-bold width-115" data-sort=\'eventTypeName\'>\n                        Event Type\n                    </th>\n                    <th class=" events-sortable cursor-pointer font-bold width-115" data-sort=\'milestoneName\'>\n                        Milestone\n                    </th>\n                    <th class=" events-sortable cursor-pointer font-bold width-200" data-sort=\'eventTitle\'>\n                        Event Title\n                    </th>\n                    <th class=" events-sortable cursor-pointer font-bold width-369" data-sort=\'shortNote\'>\n                        Short Note\n                    </th>\n                    <th class=" font-bold width-110" data-sort=\'shortNote\'>\n                        Extra Field\n                    </th>\n                </tr>\n                </thead>\n            </table>\n        </div>\n        <table class=\'table file-events-table rows-file-events\'>\n            <tbody>\n            <tr rv-hide="collection.length">\n                <td colspan="8" class="t-align-c">\n                    <strong>NONE</strong>\n                </td>\n            </tr>\n            <tr rv-each-row="collection.models" rv-class-unread-color="row:unread">\n                <td class="width-31">\n                    <i rv-show="row:unread" class="fa fa-circle dot-color" aria-hidden="true"></i>\n                    <i rv-if="row:documentID" class="fa fa-paperclip fa-lg"></i>\n                </td>\n                <td class=\'event-row width-100 cursor-pointer\' rv-data-id=\'row:eventID\'>\n                    <span rv-class-font-bold="row:important">{row:eventDate}</span>\n                </td>\n                <td class=\'event-row width-100 cursor-pointer\' rv-data-id=\'row:eventID\'>\n                    <span rv-class-font-bold="row:important">{row:etcName}</span>\n                </td>\n                <td class=\'event-row width-115 cursor-pointer\' rv-data-id=\'row:eventID\'>\n                    <span rv-class-font-bold="row:important">{row:eventTypeName}</span>\n                </td>\n                <td class=\'event-row width-115 cursor-pointer\' rv-data-id=\'row:eventID\'>\n                    <span rv-class-font-bold="row:important">{row:milestoneName}</span>\n                </td>\n                <td class=\'event-row width-200 cursor-pointer\' rv-data-id=\'row:eventID\'>\n                    <span rv-class-font-bold="row:important">{row:eventTitle}</span>\n                </td>\n                <td class=\'event-row cursor-pointer width-369\' rv-data-id=\'row:eventID\'>\n                    <span rv-class-font-bold="row:important">{row:shortNote}</span>\n                </td>\n                <td class=\'event-row width-110\'>\n                    <span>{row:extraField}</span>\n                </td>\n            </tr>\n            </tbody>\n        </table>\n    </div>\n</div>';

},this.App.Templates.macrosMacrosForm=function(a){{var b="";_.escape}return b+='<p class="bg-info m-top-15 p-15 non-data-macros"><i class="fa fa-info-circle"></i> <strong>No Macros to display</strong></p>\n\n<div class="container-macros-tab snippet-tabs hidden">\n    <ul class="box-shadow nav nav-tabs nav-justified snippet-head-tabs" role="tablist" id="tabMacros">\n        <li class="template-li hidden" role="presentation">\n            <a class="tabName" href="#" role="tab" data-toggle="tab" aria-controls="#" aria-expanded="true" id="#">Panel 1</a>\n        </li>\n    </ul>\n\n    <div class="tab-content macros-content-p container-tab-pane snippet-body-tabs">\n        <div role="tabpanel" class="template-tab-pane tab-pane hidden">\n            <table class="template-table-tab-pane m-bottom-0 hidden table table-hover">\n                <thead class="b-blue-light c-white">\n                <tr>\n                    <th colspan="2" class="col-macro-group">\n                        Macro Group\n                    </th>\n                </tr>\n                <tr>\n                    <th>\n                        <strong>Macros</strong>\n                    </th>\n                    <th>\n                        <strong>Description</strong>\n                    </th>\n                </tr>\n                </thead>\n                <tbody>\n                <tr class="template-tr hidden row-macro">\n                    <td class="col-macro">\n                        Macro\n                    </td>\n                    <td class="col-description">\n                        Description\n                    </td>\n                </tr>\n                </tbody>\n            </table>\n            <div class="clearfix"></div>\n        </div>\n    </div>\n</div>'},this.App.Templates.sessionChangePassword=function(a){{var b="";_.escape}return b+='<div class="container">\n    <div class="row">\n        <div class="col-md-4">\n            <div class="menu-container">\n            </div>\n        </div>\n        <div class="col-md-8">\n            <div class="form-login">\n                <form class="form-horizontal col-md-offset-1 col-md-8 m-top-5 m-bottom-15">\n                    <input type="hidden" name="email" rv-value="model:email">\n                    <span class="pull-left signinLabel">Enter your new password below:</span>\n                    <div class="clearfix m-bottom-5"></div>\n\n                    <div class="form-group">\n                        <label for="email" class="col-sm-4 control-label">Password:</label>\n                        <div class="col-md-7">\n                            <div class="input-group">\n                                <input type="password" class="form-control col-md-2" name="password"\n                                       rv-value="model:new_password" id="password" size="30"\n                                       aria-describedby="password-guide" tabindex="1">\n                                <a tabindex="0" class="input-group-addon cursor-pointer" id="password-guide"\n                                   title="Password instructions" role="button" data-toggle="popover"\n                                   data-container="body" data-html="true" data-trigger="focus">?</a>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class="form-group">\n                        <label for="email" class="col-sm-4 control-label">Confirm Password:</label>\n                        <div class="col-md-7">\n                            <input type="password" class="form-control col-md-2" name="password_confirmation" rv-value="model:confirm_new_password" id="password-confirmation" size="30" tabindex="2">\n                        </div>\n                    </div>\n\n                    <div class="form-group">\n                        <div class="col-md-12 col-sm-offset-4 messages">\n                        </div>\n                    </div>\n\n                    <div class="form-group">\n                        <div class="col-sm-offset-4 col-sm-7 m-top-5">\n                            <button id="change_password" class="btn btn-success btn-login btn-session pull-left">Change Password</button>\n                            <a href="#session/login" class="btn btn-link pull-right c-green">Go back</a>\n                        </div>\n                    </div>\n                </form>\n                <div class="clearfix"></div>\n            </div>\n        </div>\n    </div>\n</div>'},this.App.Templates.sessionForgotPassword=function(a){{var b="";_.escape}return b+='<div class="container">\n    <div class="row">\n        <div class="col-md-4 col-sm-5 m-top-10">\n            <div class="menu-container">\n            </div>\n        </div>\n        <div class="col-md-8 col-sm-7 m-top-10">\n            <div class="form-login">\n                <form class="form-horizontal col-md-offset-1 col-md-8 m-top-5 m-bottom-10 p-top-10">\n                    <span class="pull-left signinLabel">Forgot Password:</span>\n                    <div class="clearfix m-bottom-5"></div>\n                    <div class="form-group">\n                        <label for="email" class="col-sm-3 control-label">Email:</label>\n                        <div class="col-md-9 col-sm-9 col-sm-9">\n                            <input type="email" class="form-control col-md-2" id="login" name="login" placeholder="Enter your email" maxlength="80" size="30">\n                        </div>\n                    </div>\n                    <div class="form-group">\n                        <div class="col-sm-offset-3 col-sm-9 m-top-10">\n                            <button name="forgot-password" class="btn btn-login btn-session btn-forgot-password btn-success pull-left">Get a new password</button>\n                            <a href="#session/login" class="btn btn-link pull-right c-green">Go back</a>\n                        </div>\n                    </div>\n                </form>\n            </div>\n        </div>\n    </div>\n</div>'},this.App.Templates.sessionLogin=function(a){{var b="";_.escape}return b+='<div class="container">\n    <div class="row">\n        <div class="col-md-4 col-sm-5 m-top-10">\n            <div class="menu-container">\n            </div>\n        </div>\n        <div class="col-md-8 col-sm-7 m-top-10">\n            <div class="form-login">\n                <form class="form-horizontal col-md-offset-1 col-md-8 m-top-5 m-bottom-10 p-top-10">\n                    <input type="hidden" name="captcha" rv-value="options.captcha"/>\n\n                    <div class="signinLabel">Sign in:\n                        <a href="#session/register_client_rep" class="btn btn-link  c-green p-left-30">Register</a>\n                        <a href="#session/forgot_password" class="btn btn-link m-left-40 c-green">Forgot Password?</a>\n                    </div>\n\n                    <div class="form-group">\n                        <label for="email" class="col-sm-3 p-top-5">Email:</label>\n                        <div class="col-md-9 col-sm-9 col-sm-9">\n                            <input type="email" class="form-control col-md-2" id="email" name="email" placeholder="Email" rv-value="model:email" required maxlength="80" size="20">\n                        </div>\n                    </div>\n\n                    <div class="form-group">\n                        <label for="password" class="col-sm-3 p-top-5">Password:</label>\n                        <div class="col-md-9 col-sm-9">\n                            <input type="password" class="form-control password-ignore" id="password" name="password" placeholder="Password" rv-value="model:password" required size="20">\n                        </div>\n                    </div>\n\n                    <div class="form-group">\n                        <div class="col-md-9 col-sm-offset-2 col-md-offset-3">\n                            <div class="g-recaptcha" rv-data-sitekey="options.siteKey" rv-if="options.captcha"></div>\n                        </div>\n\n                        <div class="col-md-8 col-sm-offset-3 col-sm-9 message-captcha">\n                        </div>\n                    </div>\n\n                    <script type="text/javascript"\n                            src="https://www.google.com/recaptcha/api.js?hl=en">\n                    </script>\n\n                    <div class="form-group">\n                        <div class="col-sm-offset-3 col-sm-9">\n                            <span>\n                                <button id="login-submit" class="btn btn-login btn-success btn-session m-top-5 pull-left">Sign in</button>\n                            </span>\n                        </div>\n                    </div>\n                </form>\n                <div class="clearfix"></div>\n            </div>\n        </div>\n    </div>\n</div>\n'},this.App.Templates.sessionPartialLoginContainer=function(a){{var b="";_.escape}return b+='<div class="loginContainer">\n    <p class="c-white">What\'s new in casefriend?</p>\n    <ul class="list-unstyled">\n        <li>\n            <a href="#" class="c-black">Comprehensive reports</a>\n        </li>\n        <li>\n            <a href="#" class="c-black">Letter template builder</a>\n        </li>\n        <li>\n            <a href="#" class="c-black">Enhanced search functionality</a>\n        </li>\n        <li>\n            <a href="#" class="c-black">Invoice tracking</a>\n        </li>\n        <li>\n            <a href="#" class="c-black">File notes</a>\n        </li>\n        <li>\n            <a href="#" class="c-black">Discover all the new features!</a>\n        </li>\n    </ul>\n</div>\n'},this.App.Templates.sessionRegisterUser=function(a){{var b="";_.escape}return b+='<div class="container">\n    <div class="row">\n        <div class="col-md-4 col-sm-5 m-top-10">\n            <div class="menu-container">\n            </div>\n        </div>\n        <div class="col-md-8 col-sm-7 m-top-10">\n            <div class="form-login">\n                <form class="form-horizontal col-md-offset-1 col-md-8 m-top-5 m-bottom-10 p-top-10">\n                    <span class="pull-left signinLabel">Register New User:</span>\n                    <div class="clearfix m-bottom-5"></div>\n                    <div class="form-group">\n                        <label for="email" class="col-sm-3 control-label">Email:</label>\n                        <div class="col-md-8 col-sm-9">\n                            <input type="text" class="form-control col-md-2" name="email" value="" id="email" maxlength="80" size="30"/>\n                        </div>\n                    </div>\n                    <div class="form-group">\n                        <div class="col-md-9 col-sm-offset-2 col-md-offset-3">\n                            <div class="g-recaptcha" data-type="image" rv-data-sitekey="options.siteKey"></div>\n                            <input type="hidden" name="recaptcha">\n                        </div>\n\n                        <div class="col-md-8 col-sm-offset-3 col-sm-9 message-captcha">\n                        </div>\n                    </div>\n                    <div class="form-group">\n                        <div class="col-md-offset-3 col-sm-offset-2 col-md-8  col-sm-10 m-top-5">\n                            <button id="register-user" name="register" class="btn btn-register btn-success btn-login btn-session pull-left">Register</button>\n                            <a href="#" class="btn btn-back btn-link pull-right c-green">Go back</a>\n                        </div>\n                    </div>\n                </form>\n                <div class="clearfix"></div>\n            </div>\n        </div>\n    </div>\n</div>'},this.App.Templates.sessionResendEmail=function(a){{var b="";_.escape}return b+='<form class="form-horizontal">\n    <div class="modal-header">\n        <h4 class="modal-title">Resend Activation Email</h4>\n    </div>\n    <div class="modal-body">\n        <div class="form-group m-bottom-5 document-link">\n            <label for="email" class="col-sm-3">Email:</label>\n            <div class="col-sm-8 description-exhibit">\n                <input type="email" class="form-control" id="email" name="email" rv-value="email" required>\n                <div class="help-block">Please confirm your email address</div>\n            </div>\n        </div>\n    </div>\n    <div class="modal-footer">\n        <button type="button" class="btn btn-default btn-close" data-dismiss="modal">Close</button>\n        <button type="submit" class="submit-resend-activation-email btn btn-primary">Save</button>\n    </div>\n</form>\n'},this.App.Templates.settingsEditEventType=function(a){{var b="";_.escape}return b+="<div class='user-top-summary box-shadow b-grey-light' data-permission=\"6\">\n    <div class='container '>\n        <div class='row b-grey-light'>\n            <div class='col-md-6'>\n                <div class='font-size-45 t-align-c c-green-casefriend font-style-oblique p-top-20'>Event Type Details</div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div class='container box-shadow m-top-40' data-permission=\"6\">\n    <div id='user-content' class='general-user-data'>\n        <form id='event-type-edit-form'>\n            <div class='col-md-8'>\n                <div class=\"form-horizontal p-top-15\">\n                    <div class=\"form-group\">\n                        <label class='col-sm-2 p-top-5 p-right-2'></i>Event Type Category:</label>\n\n                        <div class=\"col-sm-10\">\n                            {model:etcName}\n                        </div>\n                    </div>\n                    <h2 class='font-bold font-size-17 p-bottom-10'>Required</h2>\n\n                    <div class=\"form-group\">\n                        <label class='col-sm-2 p-top-5'><i class=\"fa fa-asterisk c-red font-size-10\"></i>Event Type Name:</label>\n\n                        <div class=\"col-sm-10\">\n\n                            <div rv-if=\"model:lockedType\" rv-data-id=\"row:eventTypeID\" class='form-control'>{model:eventTypeName} &ndash; <i>Locked</i></div>\n                            <input rv-unless=\"model:lockedType\" rv-data-id=\"row:eventTypeID\" class='form-control' name='eventTypeName' type=\"text\" rv-value=\"model:eventTypeName\" required>\n\n                        </div>\n                    </div>\n                    <h2 class='font-bold font-size-17 p-bottom-10'> Optional</h2>\n\n                    <div class=\"form-group\">\n                        <label class='col-sm-2 p-top-5'>Description:</label>\n\n                        <div class=\"col-sm-10\">\n                            <input class='form-control' name='description' type=\"text\" rv-value=\"model:description\" placeholder=\"Description is optional\">\n                        </div>\n                    </div>\n                    <div class=\"form-group\">\n                        <label class='col-sm-2 p-top-5'>Instructions:</label>\n\n                        <div class=\"col-sm-10\">\n                            <textarea class='form-control' name='instructions' rv-value=\"model:instructions\"></textarea>\n                        </div>\n                    </div>\n                    <div class=\"form-group\">\n                        <label class='col-sm-2 p-top-5'>Lawyers Only:</label>\n\n                        <div class=\"col-sm-10\">\n                            <input type=\"checkbox\" name='lawyersOnlyCB' rv-checked='model:lawyersOnly'/>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class='col-md-4'>\n                <div>\n                    <button id='save-eventType' class=\"m-10 btn btn-danger btn-lg\">Save</button>\n                </div>\n                <div>\n                    <button id='cancel-eventType' class=\"m-10 btn btn-default btn-lg\">Cancel</button>\n                </div>\n            </div>\n        </form>\n    </div>\n</div>\n"},this.App.Templates.settingsEventTypesEventCategoriesForm=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <h4 class="modal-title" rv-if=\'model.isNew\' id="modalCase">Create New Event Category</h4>\n    <h4 class="modal-title" rv-unless=\'model.isNew\' id="modalCase">Edit Event Category</h4>\n</div>\n<div class="modal-body">\n    <form>\n        <div class="p-top-15">\n            <div class="form-horizontal">\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Category Name:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="etcName" rv-value="eventCategoryModel:etcName" required>\n                        <input type=\'hidden\' name="etcID" rv-value="eventCategoryModel:etcID"/>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5" rv-unless="eventTypeLockType">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Module:</label>\n                    <div class="col-sm-8">\n                        <select class="form-control" rv-value="eventCategoryModel:moduleID" name="module" id="module" required>\n                            <option rv-each-module="options.colModules.models" rv-value="module:moduleID" value="1">{module:moduleDescription}</option>\n                        </select>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5" rv-if="model.isNew">\n                    <label class="col-sm-3 control-label">Lock Type:</label>\n                    <div class="col-sm-8">\n                        <input type="checkbox" class="m-top-i-10" name="lockedType" rv-checked="eventCategoryModel:lockedType"/>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </form>\n</div>\n<div class="modal-footer">\n    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n    <button type="button" class="btn btn-primary" id=\'save-eventCategory\'>Save changes</button>\n</div>\n'},this.App.Templates.settingsEventTypesEventTypesForm=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <h4 class="modal-title" rv-if=\'model.isNew\' id="modalCase">Create New Event Type</h4>\n    <h4 class="modal-title" rv-unless=\'model.isNew\' id="modalCase">Edit Event Type</h4>\n</div>\n<div class="modal-body">\n    <form>\n        <div class="p-top-15">\n            <div class="form-horizontal">\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Event Type Name:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="eventTypeName" rv-value="eventTypeModel:eventTypeName" required>\n                        <input type=\'hidden\' name="eventTypeID" rv-value="eventTypeModel:eventTypeID"/>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Description:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="description" rv-value="eventTypeModel:description" />\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5" rv-unless="eventTypeLockType">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Module:</label>\n                    <div class="col-sm-8">\n                        <select class="form-control" rv-value="eventTypeModel:moduleID" name="module" id="module" required>\n                            <option rv-each-module="options.colModules.models" rv-value="module:moduleID" value="1">{module:moduleDescription}</option>\n                        </select>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5" rv-unless="eventTypeLockType">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Default Category:</label>\n                    <div class="col-sm-8 display-inline-flex">\n                        <select class="form-control width-84-p" name="category" id="category" rv-value="eventTypeModel:default_etc < eventTypeModel:default_etc" required>\n                            <option rv-each-category="cloneCategoriesCol.models" rv-data-locktype="category:lockedType" rv-value="category:etcID">\n                                {category:etcName}\n                            </option>\n                        </select>\n                        <div class="input-group-btn m-left-20">\n                            <a class="btn btn-default" id=\'edit-category\' href="javascript:void(0);" rv-hide="checkCategoryEditable < eventTypeModel:default_etc">\n                                <i class="fa fa-pencil"></i>\n                            </a>\n                            <a class="btn btn-default" href="javascript:void(0);" rv-show="checkCategoryEditable < eventTypeModel:default_etc" disabled data-toggle="popover" data-placement="top" data-trigger="hover" data-content="This Event Category is not editable">\n                                <i class="fa fa-lock"></i>\n                            </a>\n                            <a class="btn btn-default" id=\'new-category\' href="javascript:void(0);"><i class="fa fa-plus"></i></a>\n                        </div>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5" rv-unless="eventTypeLockType">\n                    <label class="col-sm-3 control-label">Has Child Table:</label>\n                    <div class="col-sm-8">\n                        <input type="checkbox" class="m-top-i-10" name="hasChildTable" rv-checked="eventTypeModel:hasChildTable"/>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5" rv-unless="eventTypeLockType" rv-show="eventTypeModel:hasChildTable < eventTypeModel:hasChildTable">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Child Table:</label>\n                    <div class="col-sm-8">\n                        <select class="form-control" rv-value="eventTypeModel:childTable" name="childTable" id="childTable" rv-if="eventTypeModel:hasChildTable < eventTypeModel:hasChildTable" required>\n                            <option rv-each-child="cloneChildTableCol.models" rv-value="child:childTable" value="1">{child:childTable}</option>\n                        </select>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Lawyers Only:</label>\n                    <div class="col-sm-8">\n                        <input type="checkbox" class="m-top-i-10" name="lawyersOnly" rv-checked="eventTypeModel:lawyersOnly"/>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Default Read:</label>\n                    <div class="col-sm-8">\n                        <input type="checkbox" class="m-top-i-10" name="defaultRead" rv-checked="eventTypeModel:defaultRead"/>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5" rv-if="model.isNew">\n                    <label class="col-sm-3 control-label">Lock Type:</label>\n                    <div class="col-sm-8">\n                        <input type="checkbox" class="m-top-i-10" name="lockedType" rv-checked="eventTypeModel:lockedType"/>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Instructions:</label>\n                    <div class="col-sm-8">\n                        <textarea type="text" rows="5" class="form-control" name="instructions" rv-value="eventTypeModel:instructions"></textarea>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </form>\n</div>\n<div class="modal-footer">\n    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n    <button type="button" class="btn btn-primary" id=\'save-eventType\'>Save changes</button>\n    <button type="button" class="btn btn-danger" rv-if="isErasable < eventTypeModel:isErasable" id=\'delete-eventType\'>Delete</button>\n</div>\n'},this.App.Templates.settingsEventTypesIndex=function(a){{var b="";_.escape}return b+='<div class="container m-top-15">\n    <div class="b-grey-tabs box-shadow">\n        <div id="event-types-filters" style="min-height: 138px;">\n            <div class=\'b-green-casefriend min-height-100 p-top-10 p-bottom-5\'>\n                <div class="form-group col-sm-3 p-top-45">\n                    <a data-permission="2" rv-href="options.fileModel.fileNewEventUrl" id=\'add-new\' class=\'font-size-16 cursor-pointer\'>\n                        <i class="fa fa-plus fa-lg"></i>\n                        Create new event type\n                    </a>\n                </div>\n                <div class="col-sm-6 col-xs-12 t-align-center">\n                    <span class="">\n                        <i class="fa fa-angle-double-left fa-lg sequential-counter c-blue-link cursor-pointer display-none p-right-5" id=\'load-files-first\'></i>\n					</span>\n                    <span class="">\n						<i class="fa fa-chevron-left sequential-counter c-blue-link cursor-pointer display-none p-right-5" id=\'load-files-prev\'></i>\n					</span>\n                    <span class=\'display-inline-block p-left-10 p-right-10\'>\n						<label class=\'p-bottom-6 font-size-17\'>\n                            <span id="show-offset" class="display-none">\n                                Showing Event Types from <span id=\'from-offset\'>0</span> to <span id="to-offset">{options.paginationConstant}</span>\n                            </span>\n                            <span id="show-all">\n                                Showing All Event Types\n                            </span>\n                            (Total {totalRows})\n                        </label>\n						<select class="form-control" id="eventOffset" data-selectorname="fileType" name="eventOffset">\n                            <option rv-data-min="-1">Show All Event Types</option>\n                            <option rv-each-row="PagesNumbers.models" rv-data-position="row:position" rv-data-min="row:min" rv-data-max="row:max">{row:min} - {row:max}</option>\n                        </select>\n					</span>\n                    <span>\n						<i class="fa fa-chevron-right sequential-counter c-blue-link cursor-pointer p-left-5" id=\'load-files-next\'></i>\n					</span>\n                    <span>\n						<i class="fa fa-angle-double-right fa-lg sequential-counter c-blue-link cursor-pointer p-left-5" id=\'load-files-last\'></i>\n					</span>\n                </div>\n                <div class="form-group col-sm-3 col-xs-12 p-top-45 t-align-right font-size-16">\n                    <a data-permission="2" class=\'display-none cursor-pointer\' id="filter-btn">\n                        <i class="fa fa-arrow-down"></i>\n                        Show Filters\n                    </a>\n                    <a data-permission="2" class=\'cursor-pointer\' id="filter-btn-close">\n                        <i class="fa fa-arrow-up"></i>\n                        Hide Filters\n                    </a>\n                    <a class="control-tooltip c-black p-left-10" data-help-id="fileEventFiltersHelp" href="javascript:void(0);"><i class="fa fa-question-circle fa-lg"></i></a>\n\n                </div>\n                <div>\n                    <div id=\'file-filters\' class="b-green-casefriend height-100">\n                        <div class="form-group col-sm-4 col-xs-12">\n                            <label class="control-label c-gray">Search by Event Category:</label><br>\n                            <div class="col-sm-12 p-left-0">\n                                <select class="form-control p-right-30" id="eventCategory" data-selectorname="etcName" name="eventCategorys">\n                                    <option value="-1">All Categories</option>\n                                    <option rv-each-row="options.colEventTypesCategories.models < .colEventTypesCategories" rv-value="row:etcID">{row:etcName}</option>\n                                </select>\n                            </div>\n                        </div>\n                        <div class="form-group col-sm-4 col-xs-12">\n                            <label class="control-label c-gray">Search by Event Type:</label><br>\n                            <div class="col-sm-12 p-left-0">\n                                <input type="text" class="typeahead form-control p-right-30 search-files event_type_typeahead" name="eventTypeName">\n                                <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="eventTypeName">\n                                    <i class="fa fa-chevron-down"></i>\n                                </a>\n                            </div>\n                        </div>\n                        <div class="form-group col-sm-4 col-xs-12">\n                            <label class="control-label c-gray">Search by Module:</label><br>\n                            <div class="col-sm-12 p-left-0">\n                                <select class="form-control" name="module" id="module">\n                                    <option value="-1">All Modules</option>\n                                    <option rv-each-module="options.colModules.models" rv-value="module:moduleID">{module:moduleDescription}</option>\n                                </select>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class="clearfix"></div>\n            </div>\n            <table class=\'table file-events-table file-events-header-table m-bottom-0\' style="height: 37px;">\n                <thead id=\'events-heads\'>\n                <tr>\n                    <th class="width-10"></th>\n                    <th class=" events-sortable cursor-pointer font-bold width-100" data-sort=\'eventTypes.eventTypeName\'>\n                        Event Type\n                    </th>\n                    <th class=" events-sortable cursor-pointer font-bold width-115" data-sort=\'eventTypeCategories.etcName\'>\n                        Category\n                    </th>\n                    <th class=" events-sortable cursor-pointer font-bold width-200" data-sort=\'eventTypes.description\'>\n                        Description\n                    </th>\n                    <th class=" events-sortable cursor-pointer font-bold width-200" data-sort=\'eventTypes.childTable\'>\n                        Child Table\n                    </th>\n                    <th class=" events-sortable cursor-pointer font-bold width-100" data-sort=\'eventTypes.moduleID\'>\n                        Module\n                    </th>\n\n                </tr>\n                </thead>\n                <tbody>\n                <tr rv-hide="collection.length">\n                    <td colspan="6" class="t-align-c">\n                        <strong>NONE</strong>\n                    </td>\n                </tr>\n                <tr rv-each-row="collection.models">\n                    <td class="text-center p-5 event-type-row cursor-pointer" rv-data-id=\'row:eventTypeID\'>\n                        <i class="fa fa-lock" aria-hidden="true" rv-if="row:lockedType"></i>\n                    </td>\n                    <td class=\'event-type-row cursor-pointer\' rv-data-id=\'row:eventTypeID\'>\n                        <span>{row:eventTypeName}</span>\n                    </td>\n                    <td class=\'event-type-row cursor-pointer\' rv-data-id=\'row:eventTypeID\'>\n                        <span>{row:etcName}</span>\n                    </td>\n                    <td class=\'event-type-row cursor-pointer\' rv-data-id=\'row:eventTypeID\'>\n                        <span>{row:description}</span>\n                    </td>\n                    <td class=\'event-type-row cursor-pointer\' rv-data-id=\'row:eventTypeID\'>\n                        <span>{row:childTable}</span>\n                    </td>\n                    <td class=\'event-type-row cursor-pointer\' rv-data-id=\'row:eventTypeID\'>\n                        <span>{row:moduleDescription}</span>\n                    </td>\n                </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>';

},this.App.Templates.settingsHotwordsIndex=function(a){{var b="";_.escape}return b+='<div class=\'\' data-permission="101">\n    <div class="container bgc-white">\n        <div class="box-shadow m-top-20">\n            <div class="b-green-casefriend p-15">\n                <a href="#" class="newHotWord font-size-16">\n                    <i class="fa fa-plus fa-lg"></i>\n                    Create new hotword\n                </a>\n\n                <span class="font-size-16 pull-right">Total hotwords ({collection.length})</span>\n            </div>\n\n            <div>\n                <table class="table table-columns">\n                    <thead class="b-blue-light c-white font-size-17">\n                    <tr>\n                        <th>Word</th>\n                        <th>Save</th>\n                        <th>Delete</th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    <tr id="new-hotword" class="hidden">\n                        <td><input type="text" class="form-control hotword-text" name="hot[][word]" rv-value="hot:word"></td>\n                        <td>\n                            <button class="btn btn-success saveHotWord"><span class="fa fa-save"></span></button>\n                        </td>\n                        <td>\n                            <button class="btn btn-danger hideNewHotwordForm"><span class="fa fa-close"></span></button>\n                        </td>\n                    </tr>\n                    </tbody>\n                    <tbody rv-if="collection.length < .length">\n                    <tr rv-each-row="collection.models < .models" rv-data-hotword-id="row:hotwordID < .models">\n                        <td><input type="text" class="form-control hotword-text" name="hot[][word]" rv-value="row:word"></td>\n                        <td>\n                            <button class="btn btn-success saveHotWord"><span class="fa fa-save"></span></button>\n                        </td>\n                        <td>\n                            <button class="btn btn-danger removeHotWord"><span class="fa fa-close"></span></button>\n                        </td>\n                    </tr>\n                    </tbody>\n                </table>\n            </div>\n\n            <p rv-unless=\'collection.length\' class="bg-info m-15 p-15 display-block"><i class="fa fa-info-circle"></i> <strong>There are no hotwords to show.</strong></p>\n\n            <p class="p-15">\n                <em>These are hotwords that would be highlighted when adding billing snippets and that would block users to submit billings which contain these words.</em>\n            </p>\n        </div>\n        <div class="clearfix"></div>\n    </div>\n</div>\n'},this.App.Templates.settingsLettersIndex=function(a){{var b="";_.escape}return b+='<div data-permission="42">\n    <div class="container">\n        <div class="box-shadow m-top-20">\n            <div class="b-green-casefriend p-15">\n                <a href="#letters/new" class="font-size-16">\n                    <i class="fa fa-plus fa-lg"></i>\n                    Create Letter template\n                </a>\n\n                <span class="letter-summary font-size-16 pull-right">Total Letter Templates ({collection.length})</span>\n            </div>\n\n            <div>\n                <table class="table table-letters bgc-white">\n                    <thead class="b-blue-new-casefriend c-white font-size-17">\n                    <tr>\n                        <th class="edit-column">Edit</th>\n                        <th class="download-column">PDF</th>\n                        <th>Name</th>\n                        <th>Module</th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    <tr rv-each-model=\'collection.models\'>\n                        <td>\n                            <a href="javascript:void(0);" class="btnEditLetter" rv-data-id=\'model:letterTemplateID\'><i class="fa fa-pencil"></i></a>\n                        </td>\n                        <td><a href="javascript:void(0);" class="btn-downloadPDF" rv-data-id=\'model:letterTemplateID\'><i class="fa fa-file-pdf-o"></i></a></td>\n                        <td>{model:name}</td>\n                        <td>{model:moduleDescription}</td>\n                    </tr>\n                    <tr rv-unless=\'collection.length\'>\n                        <td colspan="3">\n                            <strong>No data to display</strong>\n                        </td>\n                    </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n        <div class="clearfix"></div>\n    </div>\n</div>\n'},this.App.Templates.settingsLettersLetterForm=function(a){{var b="";_.escape}return b+='<div class=\'container m-top-20\' data-permission="42">\n    <div class="p-15 b-blue-new-casefriend m-top-15">\n        <i class="fa fa-html5" aria-hidden="true"></i>\n        <strong rv-if=\'model.isNew\'>New Letter</strong>\n        <strong rv-unless=\'model.isNew\'>Edit Letter</strong>\n    </div>\n    <div class="tab-content box-shadow">\n        <form class="form-horizontal" onsubmit="return false">\n            <div class="form-group col-sm-5">\n                <label class="control-label">Letter Name:</label>\n                <input type="text" class="form-control" name="name" rv-value=\'model:name\' required>\n            </div>\n            <div class="form-group col-sm-6 pull-right form-group">\n                <label class="control-label">Module</label>\n                <select name="moduleID" id="moduleID" class="form-control" rv-value="model:moduleID" required>\n                    <option rv-each-module="colModules.models" rv-value="module:moduleID">{module:moduleDescription}</option>\n                </select>\n            </div>\n\n            <div class=\'clearfix\'></div>\n\n            <a href="javascript:void(0);" class="btnStyleCss"><i class="fa fa-css3"></i> Style CSS:</a>\n            <a class="control-tooltip fs-medium" data-placement="right" data-help-id="letterTemplateInputStyleCssHelp" href="javascript:void(0);">\n                <i class="fa fa-question-circle c-black"></i>\n            </a>\n\n            <div class="panel-style m-top-5" style="display:none;">\n                <textarea class=\'containerLetterCSS form-control\' name=\'containerLetterCSS\' rv-value="model:style_css"></textarea>\n            </div>\n\n            <div class=\'clearfix m-bottom-15\'></div>\n\n            <a href="javascript:void(0);" class="btnHeader"><i class="fa fa-columns"></i> Header:</a>\n            <a class="control-tooltip fs-medium" data-help-id="letterTemplateInputHeaderHelp" href="javascript:void(0);">\n                <i class="fa fa-question-circle c-black"></i>\n            </a>\n\n            <div class="panel-header m-top-5" style="display:none;">\n                <textarea class=\'containerLetterHeader\' name=\'containerLetterHeader\'></textarea>\n            </div>\n\n            <div class=\'clearfix m-bottom-15\'></div>\n\n            <label class="control-label"></i> Body:</label>\n            <a class="control-tooltip fs-medium" data-help-id="letterTemplateInputBodyHelp"\n               href="javascript:void(0);">\n                <i class="fa fa-question-circle c-black"></i>\n            </a>\n            <div>\n                <textarea class=\'containerLetterBody\' name=\'containerLetter\' required></textarea>\n            </div>\n\n            <div class=\'clearfix m-top-30\'></div>\n\n            <a href="javascript:void(0);" class="btnFooter"><i class="fa fa-columns"></i> Footer:</a>\n            <a class="control-tooltip fs-medium" data-help-id="letterTemplateInputFooterHelp" href="javascript:void(0);">\n                <i class="fa fa-question-circle c-black"></i>\n            </a>\n            <div class="panel-Footer m-top-5" style="display:none;">\n                <textarea class=\'containerLetterFooter\' name=\'containerLetterFooter\'></textarea>\n            </div>\n\n            <div class=\'clearfix m-top-20\'></div>\n\n            <ul class="list-inline">\n                <li>\n                    <label><input type="radio" name="isPrivate" value="0" rv-checked=\'model:isPrivate\'> Public</label>\n                </li>\n                <li>\n                    <label><input type="radio" name="isPrivate" value="1" rv-checked=\'model:isPrivate\'> Private</label>\n                    <a class="control-tooltip fs-medium" data-help-id="letterTemplateInputIsPrivateHelp"\n                       href="javascript:void(0);">\n                        <i class="fa fa-question-circle c-black"></i>\n                    </a>\n                </li>\n            </ul>\n\n            <div class=\'clearfix m-top-20\'></div>\n            <div class="row">\n                <div class="col-sm-5">\n                    <label class="control-label"></i> All Event Type ({colEventTypesAll.length}):</label>\n\n                    <select name=\'eventTypesAll\' class="form-control select-multiple" multiple>\n                        <option rv-each-model=\'colEventTypesAll.models\' rv-value=\'model:eventTypeID\'>\n                            {model:eventTypeName}\n                        </option>\n                    </select>\n                </div>\n\n                <div class="col-sm-1">\n                    <div class="text-center m-top-100">\n                        <div class="m-top-5 m-bottom-5">\n                            <a class="btn btn-moveLeft btn-default" data-collection-left="colEventTypesAll"\n                               data-select-left="eventTypesAll" data-collection-right="colEventTypesSelected"\n                               data-select-right="eventTypesSelected" href="javascript:void(0);"><i\n                                        class="fa fa-arrow-left"></i></a>\n                        </div>\n                        <div>\n                            <a class="btn btn-moveRight btn-default" data-collection-left="colEventTypesAll"\n                               data-select-left="eventTypesAll" data-collection-right="colEventTypesSelected"\n                               data-select-right="eventTypesSelected" href="javascript:void(0);"><i\n                                        class="fa fa-arrow-right"></i></a>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="col-sm-6">\n                    <label class="control-label"></i> Event type selected for this template\n                        ({colEventTypesSelected.length}):</label>\n                    <a class="control-tooltip fs-medium" data-help-id="letterTemplateInputEventTypeSelectedHelp"\n                       href="javascript:void(0);">\n                        <i class="fa fa-question-circle c-black"></i>\n                    </a>\n                    <select name=\'eventTypesSelected\' class="form-control select-multiple" multiple>\n                        <option rv-each-model=\'colEventTypesSelected.models\' rv-value=\'model:eventTypeID\'>\n                            {model:eventTypeName}\n                        </option>\n                    </select>\n                </div>\n            </div>\n\n            <div class=\'clearfix m-top-20\'></div>\n\n            <div>\n                <label><input type="checkbox" name=\'isClientSpecific\' value=\'1\' rv-checked=\'model:isClientSpecific\'>\n                    Client Specific</label>\n\n            </div>\n\n            <div class="row">\n                <div class="col-sm-5">\n                    <label class="control-label"></i> All Clients ({colClientsAll.length}):</label>\n                    <select rv-enabled=\'model:isClientSpecific\' name=\'clientsAll\' class="form-control select-multiple"\n                            multiple>\n                        <option rv-each-model=\'colClientsAll.models\' rv-value=\'model:clientID\'>{model:clientName}\n                        </option>\n                    </select>\n                </div>\n\n                <div class="col-sm-1">\n                    <div class="text-center m-top-100">\n                        <div class="m-top-5 m-bottom-5">\n                            <a rv-enabled=\'model:isClientSpecific\' class="btn btn-moveLeft btn-default"\n                               data-collection-left="colClientsAll" data-select-left="clientsAll"\n                               data-collection-right="colClientsSelected" data-select-right="clientsSelected"\n                               href="javascript:void(0);"><i class="fa fa-arrow-left"></i></a>\n                        </div>\n                        <div>\n                            <a rv-enabled=\'model:isClientSpecific\' class="btn btn-moveRight btn-default"\n                               data-collection-left="colClientsAll" data-select-left="clientsAll"\n                               data-collection-right="colClientsSelected" data-select-right="clientsSelected"\n                               href="javascript:void(0);"><i class="fa fa-arrow-right"></i></a>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="col-sm-6">\n                    <label class="control-label"></i> Clients selected for this template\n                        ({colClientsSelected.length}):</label>\n                    <a class="control-tooltip fs-medium" data-help-id="letterTemplateInputClientSelectedHelp"\n                       href="javascript:void(0);">\n                        <i class="fa fa-question-circle c-black"></i>\n                    </a>\n                    <select rv-enabled=\'model:isClientSpecific\' name=\'clientsSelected\'\n                            class="form-control select-multiple" multiple>\n                        <option rv-each-model=\'colClientsSelected.models\' rv-value=\'model:clientID\'>{model:clientName}\n                        </option>\n                    </select>\n                </div>\n            </div>\n\n            <div class=\'clearfix m-top-20 m-bottom-20\'></div>\n            <div class="display-inline-flex">\n                <div>\n                    <label>\n                        <input type="checkbox" name=\'isPleading\' value=\'1\' rv-checked=\'model:isPleading\'>\n                        Is Pleading?\n                    </label>\n                    <a class="control-tooltip fs-medium" data-help-id="letterTemplateInputAllowEditHelp" href="javascript:void(0);">\n                        <i class="fa fa-question-circle c-black"></i>\n                    </a>\n                </div>\n                <div class="m-left-20">\n                    <label>\n                        <input type="checkbox" name=\'allowEdit\' value=\'1\' rv-checked=\'model:allowEdit\'>\n                        Allow Edit\n                    </label>\n                    <a class="control-tooltip fs-medium" data-help-id="letterTemplateInputAllowEditHelp" href="javascript:void(0);">\n                        <i class="fa fa-question-circle c-black"></i>\n                    </a>\n                </div>\n            </div>\n\n            <div class=\'clearfix m-top-20 m-bottom-20\'></div>\n\n            <fieldset>\n                <legend>\n                    Pre Merge Options\n                    <a class="control-tooltip fs-medium" data-help-id="letterTemplateInputPreMergeHelp" href="javascript:void(0);">\n                        <i class="fa fa-question-circle c-black"></i>\n                    </a>\n                </legend>\n                <div>\n                    <label>\n                        <input class="input-opt-preMerge" type="checkbox" name=\'medicalDocuments\' value=\'1\' rv-checked=\'model:medicalDocuments\'>\n                        Non-Medical Documents\n                    </label>\n                    <a class="control-tooltip fs-medium" data-help-id="letterTemplateInputPreMergeNonMedicalHelp" href="javascript:void(0);">\n                        <i class="fa fa-question-circle c-black"></i>\n                    </a>\n                </div>\n                <div>\n                    <label>\n                        <input class="input-opt-preMerge" type="checkbox" name=\'contactList\' value=\'1\' rv-checked=\'model:contactList\'>\n                        Contact List\n                    </label>\n                    <a class="control-tooltip fs-medium" data-help-id="letterTemplateInputPreMergeContactHelp" href="javascript:void(0);">\n                        <i class="fa fa-question-circle c-black"></i>\n                    </a>\n                </div>\n                <div>\n                    <label>\n                        <input class="input-opt-preMerge" type="checkbox" name=\'ccList\' value=\'1\' rv-checked=\'model:ccList\'>\n                        CC List\n                    </label>\n                    <a class="control-tooltip fs-medium" data-help-id="letterTemplateInputPreMergeCCListHelp" href="javascript:void(0);">\n                        <i class="fa fa-question-circle c-black"></i>\n                    </a>\n                </div>\n                <div>\n                    <label>\n                        <input class="input-opt-preMerge" type="checkbox" name=\'medicalJointDefense\' value=\'1\' rv-checked=\'model:medicalJointDefense\'>\n                        Medical: Joint/Defense\n                    </label>\n                    <a class="control-tooltip fs-medium" data-help-id="letterTemplateInputPreMergeJointDefenseHelp" href="javascript:void(0);">\n                        <i class="fa fa-question-circle c-black"></i>\n                    </a>\n                </div>\n                <div>\n                    <label>\n                        <input class="input-opt-preMerge" type="checkbox" name=\'medicalAmePqmeQme\' value=\'1\' rv-checked=\'model:medicalAmePqmeQme\'>\n                        Medical: AME/PQME/QME\n                    </label>\n                    <a class="control-tooltip fs-medium" data-help-id="letterTemplateInputPreMergeAmePqmeQmeHelp" href="javascript:void(0);">\n                        <i class="fa fa-question-circle c-black"></i>\n                    </a>\n                </div>\n                <div>\n                    <label>\n                        <input class="input-opt-preMerge" type="checkbox" name=\'medicalPreviousAppointmentDate\' value=\'1\' rv-checked=\'model:medicalPreviousAppointmentDate\'>\n                        Medical: Previous Appointment Date\n                    </label>\n                    <a class="control-tooltip fs-medium" data-help-id="letterTemplateInputPreMergePreviousAppointmentDateHelp" href="javascript:void(0);">\n                        <i class="fa fa-question-circle c-black"></i>\n                    </a>\n                </div>\n                <div>\n                    <label>\n                        <input class="input-opt-preMerge" type="checkbox" name=\'medicalTransportation\' value=\'1\' rv-checked=\'model:medicalTransportation\'>\n                        Medical: Transportation\n                    </label>\n                    <a class="control-tooltip fs-medium" data-help-id="letterTemplateInputPreMergeMedicalTransportationHelp" href="javascript:void(0);">\n                        <i class="fa fa-question-circle c-black"></i>\n                    </a>\n                </div>\n                <div>\n                    <label>\n                        <input class="input-opt-preMerge" type="checkbox" name=\'medicalDoctor\' value=\'1\' rv-checked=\'model:medicalDoctor\'>\n                        Medical: Doctor/Facility\n                    </label>\n                    <a class="control-tooltip fs-medium" data-help-id="letterTemplateInputPreMergeDoctorOrFacilityHelp" href="javascript:void(0);">\n                        <i class="fa fa-question-circle c-black"></i>\n                    </a>\n                </div>\n                <div>\n                    <label>\n                        <input class="input-opt-preMerge" type="checkbox" name=\'objectionNonMpm\' value=\'1\' rv-checked=\'model:objectionNonMpm\'>\n                        Objection To Non-MPN\n                    </label>\n                    <a class="control-tooltip fs-medium" data-help-id="letterTemplateInputPreMergeDoctorOrFacilityHelp" href="javascript:void(0);">\n                        <i class="fa fa-question-circle c-black"></i>\n                    </a>\n                </div>\n                <div>\n                    <label>\n                        <input class="input-opt-preMerge" type="checkbox" name=\'mpmTransfer\' value=\'1\' rv-checked=\'model:mpmTransfer\'>\n                        MPN Transfer\n                    </label>\n                    <a class="control-tooltip fs-medium" data-help-id="letterTemplateInputPreMergeDoctorOrFacilityHelp" href="javascript:void(0);">\n                        <i class="fa fa-question-circle c-black"></i>\n                    </a>\n                </div>\n                <div>\n                    <label>\n                        <input class="input-opt-preMerge" type="checkbox" name=\'eFile\' value=\'1\' rv-checked=\'model:eFile\'>\n                        e-File\n                    </label>\n                    <a class="control-tooltip fs-medium" data-help-id="letterTemplateInputPreMergeDoctorOrFacilityHelp" href="javascript:void(0);">\n                        <i class="fa fa-question-circle c-black"></i>\n                    </a>\n                </div>\n                <div>\n                    <label>\n                        <input class="input-opt-preMerge" type="checkbox" name=\'venuesList\' value=\'1\' rv-checked=\'model:venuesList\'>\n                        All venues\n                    </label>\n                    <a class="control-tooltip fs-medium" data-help-id="letterTemplateInputPreMergeDoctorOrFacilityHelp" href="javascript:void(0);">\n                        <i class="fa fa-question-circle c-black"></i>\n                    </a>\n                </div>\n            </fieldset>\n            <div class=\'clearfix m-bottom-20\'></div>\n            <button class="btn-casefriend btn-lg btn-save">Save Letter</button>\n            <button rv-if="model:letterTemplateID" class="btn-casefriend-delete btn-lg btn-danger btn-delete ">Delete</button>\n            <button class="btn-casefriend btn-lg btn-createPdf">Create PDF</button>\n        </form>\n    </div>\n</div>\n'},this.App.Templates.settingsMilestonesSettings=function(a){{var b="";_.escape}return b+='<div data-permission="39">\n    <div class="container">\n        <div class="box-shadow m-top-20">\n            <div class="b-green-casefriend p-15">\n                <div>\n                    <span class="font-size-20 c-white">{moduleName < collection.module} Milestones </span>\n                    <a href="javascript:void(0);" class="new-milestone font-size-15">\n                        <i class="fa fa-plus"></i>\n                        Create new\n                    </a>\n                    <span class="milestone-summary font-size-16 pull-right p-top-5 c-white">Total milestones (<span id="total-milestones"></span>)</span>\n                </div>\n\n            </div>\n\n            <div rv-if=\'collection.length\'>\n                <table class="table table-columns">\n                    <thead class="b-blue-light c-white font-size-17">\n                    <tr>\n                        <th></th>\n                        <th>Name</th>\n                        <th>Start</th>\n                        <th>Days</th>\n                        <th>Cal/Bus</th>\n                        <th>Description</th>\n                        <th>Delete</th>\n                    </tr>\n                    </thead>\n                </table>\n                <ul class="list-unstyled wrapper-milestones"></ul>\n                <div class="actions p-15">\n                    <button class="btn-casefriend btn-lg" rv-if=\'collection.length\'>Save Changes</button>\n                </div>\n            </div>\n\n            <p rv-unless=\'collection.length\' class="bg-info m-15 p-15 display-block"><i class="fa fa-info-circle"></i> <strong>There are associated milestones.</strong></p>\n\n            <p class="p-15">\n                <em>File Milestones are updated every night. If you would like your changes to take effect in the File Milestones list right away, you can do a <a class="btn-update-milestones" href="javascript:void(0);">Manual Update</a> now.</em>\n            </p>\n        </div>\n        <div class="clearfix"></div>\n    </div>\n</div>\n'},this.App.Templates.settingsMilestonesSettingsRow=function(a){{var b="";_.escape}return b+='<div class="mask" data-permission="39"></div>\n<form onsubmit="javascript: return false;" data-permission="39">\n    <table class="table">\n        <tbody>\n        <tr>\n            <td class="control-draggable">\n                <div class="text-center control-draggable p-top-5">\n                    <i class="fa fa-arrows"></i>\n                </div>\n            </td>\n            <td>\n                <input type="text" class="form-control" maxlength="40" required name="name" rv-value=\'model:name\'/>\n            </td>\n            <td>\n                <select class="form-control select-open-date" name="start" required rv-value=\'model:start\'>\n                    <option value="0">Open Date</option>\n                    <option rv-each-milestone="milestones" rv-value=\'milestone.id\'>{milestone.name}</option>\n                </select>\n            </td>\n            <td>\n                <input class="form-control" type="text" name="days" maxlength="11" required rv-value=\'model:days\'/>\n            </td>\n            <td>\n                <select class="form-control" name="calendarDays" required rv-value=\'model:calendarDays\'>\n                    <option value="0">Business</option>\n                    <option value="1">Calendar</option>\n                </select>\n            </td>\n            <td>\n                <input class="form-control" type="text" maxlength="200" name="description" required rv-value=\'model:description\'>\n            </td>\n            <td>\n                <a href="javascript:void(0);" rv-data-id=\'model:id\' rv-data-model=\'model.cid\' class="btn-delete text-center display-block m-top-5">\n                        <span class="fa-stack">\n                            <i class="fa fa-times"></i>\n                        </span>\n                </a>\n            </td>\n        </tr>\n        </tbody>\n    </table>\n</form>\n'},this.App.Templates.settingsMySettingsMySettings=function(a){{var b="";_.escape}return b+='<div class="container m-top-10">\n    <div class="row">\n        <div class="col-lg-12 col-md-12 col-ms-12 font-bold">\n            <div class="border-bottom-blue-new-casefriend-lg">\n                <span class="c-blue-link-soft font-size-22 p-left-15">My Settings</span>\n            </div>\n        </div>\n    </div>\n\n    <div class="clearfix m-top-20"></div>\n    <div class="col-lg-3 col-md-3 col-ms-3 p-left-0 client-rep-settings">\n        <div class="list-group client-rep-settings-options c-grey-dark font-bold">\n            <a href="javascript:void(0);" class="list-group-item active" data-optiontab="personal_info" data-permission="5">Personal Info</a>\n            <a href="javascript:void(0);" class="list-group-item" data-optiontab="signature" data-permission="15">signature</a>\n            <a href="javascript:void(0);" class="list-group-item" data-optiontab="other-settings" data-permission="5">Other Settings</a>\n        </div>\n    </div>\n    <div class="col-lg-9 col-md-9 col-ms-9 p-right-0 user-settings-panel">\n        <div class="panel panel-default">\n            <div class="panel-body" id="user-settings-body"></div>\n        </div>\n    </div>\n</div>'},this.App.Templates.settingsMySettingsOtherSettings=function(a){{var b="";_.escape}return b+='<div class=\'row\'>\n    <div class=\'col-md-10 p-top-15\'>\n        <div class="panel panel-default">\n            <div class="panel-heading">Alerts</div>\n            <div class="panel-body">\n                <div class="form-horizontal">\n                    <div class="form-group">\n                        <label class="col-sm-3">Allow Pop Alerts:</label>\n                        <div class="col-sm-9">\n                            <input type="checkbox" id="popAlertUser" class="cursor-pointer" rv-checked="getPopAlertCheck">\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="panel panel-default">\n            <div class="panel-heading">Additional Settings</div>\n            <div class="panel-body">\n                <div class="form-horizontal" rv-each-model="settingsCol.models">\n                    <div class="form-group">\n                        <label class="col-sm-3">{model:label}:</label>\n                        <div class="col-sm-9 user-settings">\n                            <input rv-type="model:type" rv-data-key="model:key" rv-class="model:additionalClass" rv-checked="model:value" >\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class=\'col-md-2 p-top-15\'>\n        <div class="form-group">\n            <button id=\'save-settings\' class="btn btn-success btn-lg">Save</button>\n        </div>\n    </div>\n</div>'},this.App.Templates.settingsMySettingsPersonalInfo=function(a){{var b="";_.escape}return b+='<div class=\'row\'>\n    <form id="user-settings-form">\n        <div class=\'col-md-10\'>\n            <div class="form-horizontal p-top-15">\n                <div class="form-group">\n                    <label class="col-sm-3 p-top-5"><i class="fa fa-asterisk c-red font-size-10 p-right-5"></i>First</label>\n                    <div class="col-sm-9">\n                        <input type="text" class="form-control" name=\'first\' rv-value=\'model:first\' placeholder="First" required>\n                    </div>\n                </div>\n                <div class="form-group">\n                    <label class="col-sm-3 p-top-5">Middle</label>\n                    <div class="col-sm-9">\n                        <input type="text" class="form-control" name=\'middle\' rv-value=\'model:middle\' placeholder="Middle">\n                    </div>\n                </div>\n                <div class="form-group">\n                    <label class="col-sm-3 p-top-5"><i class="fa fa-asterisk c-red font-size-10 p-right-5"></i>Last</label>\n                    <div class="col-sm-9">\n                        <input type="text" class="form-control" name=\'last\' rv-value=\'model:last\' placeholder="Last" required>\n                    </div>\n                </div>\n                <div class="form-group">\n                    <label for="login" class="col-sm-3 p-top-5"><i class="fa fa-asterisk c-red font-size-10 p-right-5"></i>Email:</label>\n                    <div class="col-sm-9">\n                        <input type="email" class="form-control" name="email" placeholder="Email" rv-value="model:email" required maxlength="80" size="20">\n                    </div>\n                </div>\n                <div class="form-group">\n                    <label class="col-sm-3 p-top-5"><i class="fa fa-asterisk c-red font-size-10 p-right-5"></i>Phone:</label>\n                    <div class="col-sm-9">\n                        <input type="text" class="form-control" name=\'phone\' rv-value=\'model:phone\' placeholder="Phone" required>\n                    </div>\n                </div>\n                <!-- Optionals -->\n                <div class="form-group">\n                    <label class="col-sm-3 p-top-5">Cell:</label>\n                    <div class="col-sm-9">\n                        <input type="text" class="form-control" name=\'cell\' rv-value=\'model:cell\' placeholder="cell">\n                    </div>\n                </div>\n                <div class="form-group">\n                    <label class="col-sm-3 p-top-5">Fax:</label>\n                    <div class="col-sm-9">\n                        <input type="text" class="form-control" name=\'fax\' rv-value=\'model:fax\' placeholder="Fax">\n                    </div>\n                </div>\n                <div class="form-group">\n                    <label class="col-sm-3 p-top-5">Address:</label>\n                    <div class="col-sm-9">\n                        <input type="text" class="form-control" name=\'address1\' rv-value=\'model:address1\' placeholder="Address">\n                    </div>\n                </div>\n                <div class="form-group">\n                    <label class="col-sm-3 p-top-5">Address 2:</label>\n                    <div class="col-sm-9">\n                        <input type="text" class="form-control" name=\'address2\' rv-value=\'model:address2\' placeholder="Address 2">\n                    </div>\n                </div>\n                <div class="form-group">\n                    <label class="col-sm-3 p-top-5">City:</label>\n                    <div class="col-sm-9">\n                        <input type="text" class="form-control" name=\'city\' rv-value=\'model:city\' placeholder="City">\n                    </div>\n                </div>\n                <div class="form-group">\n                    <label class="col-sm-3 p-top-5">State:</label>\n                    <div class="col-sm-9">\n                        <select class=\'state-helper form-control\' rv-value="model:state" name=\'state\'></select>\n                    </div>\n                </div>\n                <div class="form-group">\n                    <label class="col-sm-3 p-top-5">Zip Code:</label>\n                    <div class="col-sm-9">\n                        <input type="text" class="form-control" name=\'zip\' rv-value=\'model:zip\' placeholder="Zip Code">\n                    </div>\n                </div>\n                <div class="form-group">\n                    <label class="col-sm-3 p-top-5">Country:</label>\n                    <div class="col-sm-9">\n                        <input type="text" class="form-control" name=\'country\' rv-value=\'model:country\' placeholder="Country">\n                    </div>\n                </div>\n\n            </div>\n        </div>\n        <div class=\'col-md-2 p-top-15\'>\n            <div class="form-group">\n                <button id=\'save-personal-info\' class="btn btn-success btn-lg">Save</button>\n            </div>\n        </div>\n    </form>\n</div>';

},this.App.Templates.settingsSnippetsIndex=function(a){{var b="";_.escape}return b+='<div class="container" data-permission="49">\n    <div class="m-top-15 m-bottom-15 b-grey-tabs box-shadow">\n        <div class=\'b-green-casefriend height-80 p-bottom-5\'>\n            <div class="form-group col-sm-3 p-top-45">\n                <a id=\'newSnippet\' class=\'font-size-16 cursor-pointer\'>\n                    <i class="fa fa-plus fa-lg"></i>\n                    Create Snippet\n                </a>\n            </div>\n            <div class="col-sm-4 display-inline-block p-right-10 p-top-25">\n                <select class="form-control" id="snippetModule" name="snippetModule">\n                    <option selected value="-1">Show All Snippets Modules</option>\n                    <option rv-each-row="colModules.models" rv-value="row:moduleID">{row:moduleName}</option>\n                </select>\n            </div>\n            <div class="col-sm-4 display-inline-block p-right-10 p-top-25">\n                <select class="form-control" id="snippetCategory" name="snippetCategory">\n                    <option value="-1">Show All Snippets Categories</option>\n                    <option rv-each-row="colSnippetsCategorie.models" rv-value="row:snippet_category">{row:snippet_category}</option>\n                </select>\n            </div>\n        </div>\n        <div id="snippets-container" class="p-top-10">\n            <table class=\'table file-events-table\'>\n                <thead id=\'snippets-heads\'>\n                <tr>\n                    <th class=" snippets-sortable cursor-pointer font-bold min-width-100" data-sort=\'snippet_category\'>Category <i class="fa fa-chevron-up"></i></th>\n                    <th class=" snippets-sortable cursor-pointer font-bold min-width-100" data-sort=\'snippet_name\'>Name</th>\n                    <th class=" snippets-sortable cursor-pointer font-bold min-width-115" data-sort=\'snippet_text\'>Text</th>\n                </tr>\n                </thead>\n                <tbody>\n                <tr rv-each-row="collection.models">\n                    <td class=\'snippet-row cursor-pointer\' rv-data-id=\'row:id\'>{row:snippet_category}</td>\n                    <td class=\'snippet-row cursor-pointer\' rv-data-id=\'row:id\'>{row:snippet_name}</td>\n                    <td class=\'snippet-row cursor-pointer\' rv-data-id=\'row:id\'>{row:snippet_text}</td>\n                </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>\n'},this.App.Templates.settingsSnippetsSnippetForm=function(a){{var b="";_.escape}return b+='<div class="modal-header" data-permission="49">\n    <h4 class="modal-title" rv-if=\'model.isNew\' id="modalCase">Create New Snippet</h4>\n    <h4 class="modal-title" rv-unless=\'model.isNew\' id="modalCase">Edit Existing Snippet</h4>\n</div>\n<div class="modal-body" data-permission="49">\n    <form id="snippets-form">\n        <div class="p-top-15">\n            <div class="form-horizontal">\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Module:</label>\n                    <div class="col-sm-9">\n                        <select name="moduleID" class="form-control p-right-30" id="moduleID" rv-value="model:moduleID" required>\n                            <option value="0" selected>Select Module</option>\n                            <option rv-each-row="options.colModules.models" rv-value="row:moduleID">{row:moduleName}</option>\n                        </select>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Category:</label>\n                    <div class="col-sm-9">\n                        <input type="text" class="typeahead form-control p-right-30 search-files snippet_category_typeahead" name="snippet_category" rv-value="model:snippet_category" required>\n                        <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="snippet_category"><i class="fa fa-chevron-down"></i></a>\n                        <input type=\'hidden\' name="id" rv-value="model:id"/>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Snippet Name:</label>\n                    <div class="col-sm-9">\n                        <input type="text" class="form-control" name="snippet_name" rv-value="model:snippet_name" required>\n                    </div>\n                </div>\n                <div class="m-bottom-15 col-sm-9 col-sm-offset-2 p-3 snippet-tabs">\n                    <ul class="nav nav-tabs nav-justified snippet-head-tabs" role="tablist">\n                        <li role="presentation" class="active"><a href="#companies" aria-controls="companies" role="tab" data-toggle="tab">Companies</a></li>\n                        <li role="presentation" id="tabMacros"><a href="#macros" aria-controls="macros" role="tab" data-toggle="tab">Macros</a></li>\n                    </ul>\n\n                    <div class="tab-content macros-head-p snippet-body-tabs">\n                        <div role="tabpanel" class="tab-pane active" id="companies">\n                            <div class="form-group m-bottom-5">\n                                <label class="col-sm-3 control-label">Make available to:</label>\n                                <div class="col-sm-8 m-top-7">\n                                    <input type="radio" class="radio-companies" id="all" name="useWith" value="all">\n                                    <label class="font-normal" for="all">All</label>\n                                    <input class="m-left-10 radio-companies" id="exclusive" type="radio" name="useWith" value="exclusive">\n                                    <label class="font-normal" for="exclusive"> Exclusive to the following</label>\n                                </div>\n                                <div class="panel panel-default m-18 m-top-40">\n                                    <div class="panel-body companies-body">\n                                        <span>TPA:</span>\n                                        <hr class="hr-white m-top-0"/>\n                                        <ul class="m-bottom-10">\n                                            <li class="client-list" rv-each-row="colTpa.models">\n                                                <input type="checkbox" class="clients-checks" rv-value="row:clientID">\n                                                <label class="font-normal">{row:clientName}</label>\n                                            </li>\n                                        </ul>\n\n                                        <span>Insurer:</span>\n                                        <hr class="hr-white m-top-0"/>\n                                        <ul>\n                                            <li class="client-list" rv-each-row="colInsurer.models">\n                                                <input type="checkbox" class="clients-checks" rv-value="row:clientID">\n                                                <label class="font-normal">{row:clientName}</label>\n                                            </li>\n                                        </ul>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div role="tabpanel" class="tab-pane macros" id="macros"><p class="c-red t-align-center font-bold">Select First the Module</p></div>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Text:</label>\n                    <div class="col-sm-9">\n                        <textarea type="text" rows="5" class="form-control" name="snippet_text" rv-value="model:snippet_text" required></textarea>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 control-label">Hourly</label>\n                    <div class="col-sm-2">\n                        <input class="form-control width-35 p-right-10" type="checkbox" name="hourly" rv-checked="model:hourly">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-2 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Snippet Type:</label>\n                    <div class="col-sm-5">\n                        <select name="snippetType" rv-value="model:snippetType" class="form-control" required>\n                            <option selected="selected" value="billing">Billing</option>\n                            <option value="other">Other</option>\n                        </select>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5" rv-if="model:hourly">\n                    <label class="col-sm-2 control-label"><i class="fa fa-asterisk c-red font-size-10" id="ac-rq"></i>Litigation Code:</label>\n                    <div class="col-sm-5">\n                        <select name="litigationCode" rv-value="model:litigationCode" class="form-control" required>\n                            <option selected="selected" value="">Select...</option>\n                            <option rv-value="row:litigationCode" rv-each-row="colLitigationCodes.models">{row:litigationCode} -- {row:codeDescription}</option>\n                        </select>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5" rv-if="model:hourly | showIfFirstChar model:litigationCode">\n                    <label class="col-sm-2 control-label"><i class="fa fa-asterisk c-red font-size-10" id="ac-rq"></i> Activity Code:</label>\n                    <div class="col-sm-5 description-exhibit">\n                        <select name="activityCode" rv-value="model:activityCode" class="form-control" rv-required="model:hourly | showIfFirstChar model:litigationCode">\n                            <option selected="selected" value="">Select...</option>\n                            <option rv-value="row:litigationCode" rv-each-row="colActivationCodes.models">{row:litigationCode} -- {row:codeDescription}</option>\n                        </select>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5" rv-unless="model:hourly">\n                    <label class="col-sm-2 control-label"><i class="fa fa-asterisk c-red font-size-10" id="ac-rq"></i> Expense Code:</label>\n                    <div class="col-sm-5">\n                        <select name="expenseCode" rv-value="model:expenseCode" class="form-control" required>\n                            <option selected="selected" value="">Select...</option>\n                            <option rv-value="row:litigationCode" rv-each-row="colExpenseCodes.models">{row:litigationCode} -- {row:codeDescription}</option>\n                        </select>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </form>\n</div>\n<div class="modal-footer" data-permission="49">\n    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n    <button type="button" class="btn btn-primary" id=\'save-snippet\'>Save changes</button>\n    <button type="button" rv-unless="model.isNew" class="btn btn-danger" id=\'delete-snippet\' data-permission="51">Delete Snippet</button>\n</div>\n'},this.App.Templates.settingsWordLettersIndex=function(a){{var b="";_.escape}return b+='<div data-permission="42">\n    <div class="container">\n        <div class="box-shadow m-top-20">\n            <div class="b-green-casefriend p-15">\n                <a href="#word_letters/new" class="font-size-16">\n                    <i class="fa fa-file-word-o" aria-hidden="true"></i>\n                    Create Letter template\n                </a>\n                <span class="letter-summary font-size-16 pull-right">Total Letter Templates ({collection.length})</span>\n            </div>\n\n            <div>\n                <table class="table table-letters bgc-white">\n                    <thead class="b-blue-new-casefriend c-white font-size-17">\n                    <tr>\n                        <th class="edit-column">Edit</th>\n                        <th>Name</th>\n                        <th>Module</th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    <tr rv-each-model=\'collection.models\'>\n                        <td>\n                            <a href="javascript:void(0);" class="btnEditLetter" rv-data-id=\'model:letterTemplateID\'><i class="fa fa-pencil"></i></a>\n                        </td>\n                        <td>{model:name}</td>\n                        <td>{model:moduleDescription}</td>\n                    </tr>\n                    <tr rv-unless=\'collection.length\'>\n                        <td colspan="3">\n                            <strong>No data to display</strong>\n                        </td>\n                    </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n        <div class="clearfix"></div>\n    </div>\n</div>'},this.App.Templates.settingsWordLettersLetterForm=function(a){{var b="";_.escape}return b+='<div class=\'container m-top-20\' data-permission="42">\n    <div class="p-15 b-blue-new-casefriend m-top-15">\n        <strong rv-if=\'model.isNew\'>New Letter</strong>\n        <strong rv-unless=\'model.isNew\'>Edit Letter</strong>\n    </div>\n    <div class="tab-content box-shadow">\n        <form id="fileupload" class="form-horizontal" enctype="multipart/form-data" onsubmit="javascript: return false;">\n            <div class="form-group col-sm-5">\n                <label class="control-label">Letter Name:</label>\n                <input type="text" class="form-control" name="name" rv-value=\'model:name\' required>\n            </div>\n            <div class="form-group col-sm-6 pull-right form-group">\n                <label class="control-label">Module</label>\n                <select name="moduleID" id="moduleID" class="form-control" rv-value="model:moduleID" required>\n                    <option rv-each-module="colModules.models" rv-value="module:moduleID">{module:moduleDescription}</option>\n                </select>\n            </div>\n\n            <div class=\'clearfix m-bottom-15\'></div>\n\n            <ul class="list-inline">\n                <li>\n                    <label><input type="radio" name="isPrivate" value="0" rv-checked=\'model:isPrivate\'> Public</label>\n                </li>\n                <li>\n                    <label><input type="radio" name="isPrivate" value="1" rv-checked=\'model:isPrivate\'> Private</label>\n                    <a class="control-tooltip fs-medium" data-help-id="letterTemplateInputIsPrivateHelp"\n                       href="javascript:void(0);">\n                        <i class="fa fa-question-circle c-black"></i>\n                    </a>\n                </li>\n            </ul>\n\n            <div class="container-document box-shadow">\n                <div class="toolbar">\n                    <a href="javascript:;" class="btn-macros">Macros</a>\n                </div>\n                <div class="wrapper">\n                    <i class="fa fa-cloud-upload icon-upload" aria-hidden="true"></i>\n                    <div class="text-message fileinput-button m-bottom-15">\n                        <a href="javascript:;">\n                            Choose a document\n                            <input type="file" name="file" accept=".doc,.docx">\n                        </a> or drag it here.\n                    </div>\n                    <div class="info-letter-template hidden">\n                        <img src="images/word.png" width="24" class="p-0 v-align-middle"> <span class="name_lt"></span> <div class="size_lt"></div>\n                        <a href="javascript:;" class="c-red m-top-15 btn-cancel-upload"><i class="fa fa-ban" aria-hidden="true"></i> Cancel</a>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\'clearfix m-top-20\'></div>\n\n            <div class=\'clearfix m-top-20\'></div>\n            <div class="row">\n                <div class="col-sm-5">\n                    <label class="control-label"></i> All Event Type ({colEventTypesAll.length}):</label>\n\n                    <select name=\'eventTypesAll\' class="form-control select-multiple" multiple>\n                        <option rv-each-model=\'colEventTypesAll.models\' rv-value=\'model:eventTypeID\'>\n                            {model:eventTypeName}\n                        </option>\n                    </select>\n                </div>\n\n                <div class="col-sm-1">\n                    <div class="text-center m-top-100">\n                        <div class="m-top-5 m-bottom-5">\n                            <a class="btn btn-moveLeft btn-default" data-collection-left="colEventTypesAll"\n                               data-select-left="eventTypesAll" data-collection-right="colEventTypesSelected"\n                               data-select-right="eventTypesSelected" href="javascript:void(0);"><i\n                                        class="fa fa-arrow-left"></i></a>\n                        </div>\n                        <div>\n                            <a class="btn btn-moveRight btn-default" data-collection-left="colEventTypesAll"\n                               data-select-left="eventTypesAll" data-collection-right="colEventTypesSelected"\n                               data-select-right="eventTypesSelected" href="javascript:void(0);"><i\n                                        class="fa fa-arrow-right"></i></a>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="col-sm-6">\n                    <label class="control-label"></i> Event type selected for this template\n                        ({colEventTypesSelected.length}):</label>\n                    <a class="control-tooltip fs-medium" data-help-id="letterTemplateInputEventTypeSelectedHelp"\n                       href="javascript:void(0);">\n                        <i class="fa fa-question-circle c-black"></i>\n                    </a>\n                    <select name=\'eventTypesSelected\' class="form-control select-multiple" multiple>\n                        <option rv-each-model=\'colEventTypesSelected.models\' rv-value=\'model:eventTypeID\'>\n                            {model:eventTypeName}\n                        </option>\n                    </select>\n                </div>\n            </div>\n\n            <div class=\'clearfix m-top-20\'></div>\n\n            <div>\n                <label><input type="checkbox" name=\'isClientSpecific\' value=\'1\' rv-checked=\'model:isClientSpecific\'>\n                    Client Specific</label>\n\n            </div>\n\n            <div class="row">\n                <div class="col-sm-5">\n                    <label class="control-label"></i> All Clients ({colClientsAll.length}):</label>\n                    <select rv-enabled=\'model:isClientSpecific\' name=\'clientsAll\' class="form-control select-multiple"\n                            multiple>\n                        <option rv-each-model=\'colClientsAll.models\' rv-value=\'model:clientID\'>{model:clientName}\n                        </option>\n                    </select>\n                </div>\n\n                <div class="col-sm-1">\n                    <div class="text-center m-top-100">\n                        <div class="m-top-5 m-bottom-5">\n                            <a rv-enabled=\'model:isClientSpecific\' class="btn btn-moveLeft btn-default"\n                               data-collection-left="colClientsAll" data-select-left="clientsAll"\n                               data-collection-right="colClientsSelected" data-select-right="clientsSelected"\n                               href="javascript:void(0);"><i class="fa fa-arrow-left"></i></a>\n                        </div>\n                        <div>\n                            <a rv-enabled=\'model:isClientSpecific\' class="btn btn-moveRight btn-default"\n                               data-collection-left="colClientsAll" data-select-left="clientsAll"\n                               data-collection-right="colClientsSelected" data-select-right="clientsSelected"\n                               href="javascript:void(0);"><i class="fa fa-arrow-right"></i></a>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="col-sm-6">\n                    <label class="control-label"></i> Clients selected for this template\n                        ({colClientsSelected.length}):</label>\n                    <a class="control-tooltip fs-medium" data-help-id="letterTemplateInputClientSelectedHelp"\n                       href="javascript:void(0);">\n                        <i class="fa fa-question-circle c-black"></i>\n                    </a>\n                    <select rv-enabled=\'model:isClientSpecific\' name=\'clientsSelected\'\n                            class="form-control select-multiple" multiple>\n                        <option rv-each-model=\'colClientsSelected.models\' rv-value=\'model:clientID\'>{model:clientName}\n                        </option>\n                    </select>\n                </div>\n            </div>\n\n            <div class=\'clearfix m-top-20 m-bottom-20\'></div>\n            <div class="display-inline-flex">\n                <div>\n                    <label>\n                        <input type="checkbox" name=\'isPleading\' value=\'1\' rv-checked=\'model:isPleading\'>\n                        Is Pleading?\n                    </label>\n                    <a class="control-tooltip fs-medium" data-help-id="letterTemplateInputAllowEditHelp" href="javascript:void(0);">\n                        <i class="fa fa-question-circle c-black"></i>\n                    </a>\n                </div>\n                <div class="m-left-20">\n                    <label>\n                        <input type="checkbox" name=\'allowEdit\' value=\'1\' rv-checked=\'model:allowEdit\'>\n                        Allow Edit\n                    </label>\n                    <a class="control-tooltip fs-medium" data-help-id="letterTemplateInputAllowEditHelp" href="javascript:void(0);">\n                        <i class="fa fa-question-circle c-black"></i>\n                    </a>\n                </div>\n            </div>\n\n            <div class=\'clearfix m-top-20 m-bottom-20\'></div>\n\n            <fieldset>\n                <legend>\n                    Pre Merge Options\n                    <a class="control-tooltip fs-medium" data-help-id="letterTemplateInputPreMergeHelp" href="javascript:void(0);">\n                        <i class="fa fa-question-circle c-black"></i>\n                    </a>\n                </legend>\n                <div>\n                    <label>\n                        <input class="input-opt-preMerge" type="checkbox" name=\'medicalDocuments\' value=\'1\' rv-checked=\'model:medicalDocuments\'>\n                        Non-Medical Documents\n                    </label>\n                    <a class="control-tooltip fs-medium" data-help-id="letterTemplateInputPreMergeNonMedicalHelp" href="javascript:void(0);">\n                        <i class="fa fa-question-circle c-black"></i>\n                    </a>\n                </div>\n                <div>\n                    <label>\n                        <input class="input-opt-preMerge" type="checkbox" name=\'contactList\' value=\'1\' rv-checked=\'model:contactList\'>\n                        Contact List\n                    </label>\n                    <a class="control-tooltip fs-medium" data-help-id="letterTemplateInputPreMergeContactHelp" href="javascript:void(0);">\n                        <i class="fa fa-question-circle c-black"></i>\n                    </a>\n                </div>\n                <div>\n                    <label>\n                        <input class="input-opt-preMerge" type="checkbox" name=\'ccList\' value=\'1\' rv-checked=\'model:ccList\'>\n                        CC List\n                    </label>\n                    <a class="control-tooltip fs-medium" data-help-id="letterTemplateInputPreMergeCCListHelp" href="javascript:void(0);">\n                        <i class="fa fa-question-circle c-black"></i>\n                    </a>\n                </div>\n                <div>\n                    <label>\n                        <input class="input-opt-preMerge" type="checkbox" name=\'medicalJointDefense\' value=\'1\' rv-checked=\'model:medicalJointDefense\'>\n                        Medical: Joint/Defense\n                    </label>\n                    <a class="control-tooltip fs-medium" data-help-id="letterTemplateInputPreMergeJointDefenseHelp" href="javascript:void(0);">\n                        <i class="fa fa-question-circle c-black"></i>\n                    </a>\n                </div>\n                <div>\n                    <label>\n                        <input class="input-opt-preMerge" type="checkbox" name=\'medicalAmePqmeQme\' value=\'1\' rv-checked=\'model:medicalAmePqmeQme\'>\n                        Medical: AME/PQME/QME\n                    </label>\n                    <a class="control-tooltip fs-medium" data-help-id="letterTemplateInputPreMergeAmePqmeQmeHelp" href="javascript:void(0);">\n                        <i class="fa fa-question-circle c-black"></i>\n                    </a>\n                </div>\n                <div>\n                    <label>\n                        <input class="input-opt-preMerge" type="checkbox" name=\'medicalPreviousAppointmentDate\' value=\'1\' rv-checked=\'model:medicalPreviousAppointmentDate\'>\n                        Medical: Previous Appointment Date\n                    </label>\n                    <a class="control-tooltip fs-medium" data-help-id="letterTemplateInputPreMergePreviousAppointmentDateHelp" href="javascript:void(0);">\n                        <i class="fa fa-question-circle c-black"></i>\n                    </a>\n                </div>\n                <div>\n                    <label>\n                        <input class="input-opt-preMerge" type="checkbox" name=\'medicalTransportation\' value=\'1\' rv-checked=\'model:medicalTransportation\'>\n                        Medical: Transportation\n                    </label>\n                    <a class="control-tooltip fs-medium" data-help-id="letterTemplateInputPreMergeMedicalTransportationHelp" href="javascript:void(0);">\n                        <i class="fa fa-question-circle c-black"></i>\n                    </a>\n                </div>\n                <div>\n                    <label>\n                        <input class="input-opt-preMerge" type="checkbox" name=\'medicalDoctor\' value=\'1\' rv-checked=\'model:medicalDoctor\'>\n                        Medical: Doctor/Facility\n                    </label>\n                    <a class="control-tooltip fs-medium" data-help-id="letterTemplateInputPreMergeDoctorOrFacilityHelp" href="javascript:void(0);">\n                        <i class="fa fa-question-circle c-black"></i>\n                    </a>\n                </div>\n                <div>\n                    <label>\n                        <input class="input-opt-preMerge" type="checkbox" name=\'objectionNonMpm\' value=\'1\' rv-checked=\'model:objectionNonMpm\'>\n                        Objection To Non-MPN\n                    </label>\n                    <a class="control-tooltip fs-medium" data-help-id="letterTemplateInputPreMergeDoctorOrFacilityHelp" href="javascript:void(0);">\n                        <i class="fa fa-question-circle c-black"></i>\n                    </a>\n                </div>\n                <div>\n                    <label>\n                        <input class="input-opt-preMerge" type="checkbox" name=\'mpmTransfer\' value=\'1\' rv-checked=\'model:mpmTransfer\'>\n                        MPN Transfer\n                    </label>\n                    <a class="control-tooltip fs-medium" data-help-id="letterTemplateInputPreMergeDoctorOrFacilityHelp" href="javascript:void(0);">\n                        <i class="fa fa-question-circle c-black"></i>\n                    </a>\n                </div>\n                <div>\n                    <label>\n                        <input class="input-opt-preMerge" type="checkbox" name=\'eFile\' value=\'1\' rv-checked=\'model:eFile\'>\n                        e-File\n                    </label>\n                    <a class="control-tooltip fs-medium" data-help-id="letterTemplateInputPreMergeDoctorOrFacilityHelp" href="javascript:void(0);">\n                        <i class="fa fa-question-circle c-black"></i>\n                    </a>\n                </div>\n                <div>\n                    <label>\n                        <input class="input-opt-preMerge" type="checkbox" name=\'venuesList\' value=\'1\' rv-checked=\'model:venuesList\'>\n                        All venues\n                    </label>\n                    <a class="control-tooltip fs-medium" data-help-id="letterTemplateInputPreMergeDoctorOrFacilityHelp" href="javascript:void(0);">\n                        <i class="fa fa-question-circle c-black"></i>\n                    </a>\n                </div>\n            </fieldset>\n\n            <div class="col-lg-4 fileupload-progress fade">\n                <!-- The global progress bar -->\n                <div class="progress progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100">\n                    <div class="progress-bar progress-bar-success" style="width:0%;"></div>\n                </div>\n                <!-- The extended global progress state -->\n                <div class="progress-extended">&nbsp;</div>\n            </div>\n\n            <div class=\'clearfix m-bottom-20\'></div>\n            <button class="btn-casefriend btn-lg btn-save">Save</button>\n            <button rv-if="model:letterTemplateID" class="btn-casefriend btn-lg btn-downloadDocument">Download Document</button>\n            <button rv-if="model:letterTemplateID" class="btn-casefriend-delete btn-lg btn-delete">Delete</button>\n        </form>\n    </div>\n</div>'},this.App.Templates.settingsWordLettersMacrosForm=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <h4 class="modal-title">\n        Macros\n    </h4>\n</div>\n<div class="modal-body">\n    <p class="bg-info m-top-15 p-15 non-data-macros"><i class="fa fa-info-circle"></i> <strong>No Macros to display</strong></p>\n\n    <div class="container-macros-tab snippet-tabs hidden">\n        <ul class="box-shadow nav nav-tabs nav-justified snippet-head-tabs" role="tablist" id="tabMacros">\n            <li class="template-li hidden" role="presentation">\n                <a class="tabName truncate-text" href="#" role="tab" data-toggle="tab" aria-controls="#" aria-expanded="true" id="#">Panel 1</a>\n            </li>\n        </ul>\n\n        <div class="tab-content macros-content-p container-tab-pane snippet-body-tabs">\n            <div role="tabpanel" class="template-tab-pane tab-pane hidden">\n                <table class="template-table-tab-pane m-bottom-0 hidden cf-table table table-striped table-hover">\n                    <thead>\n                    <tr>\n                        <th colspan="3" class="col-macro-group">\n                            Macro Group\n                        </th>\n                    </tr>\n                    <tr>\n                        <th class="width-20"></th>\n                        <th>\n                            <strong>Macros</strong>\n                        </th>\n                        <th>\n                            <strong>Description</strong>\n                        </th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    <tr class="template-tr hidden row-macro">\n                        <td class="action">\n                            <a href="javascript:;" class="btn-copy" title="Copy Macro" data-toggle="tooltip"><i class="fa fa-clipboard" aria-hidden="true"></i></a>\n                        </td>\n                        <td class="col-macro">\n                            <span class="macro-value"></span>\n                        </td>\n                        <td class="col-description">\n                            Description\n                        </td>\n                    </tr>\n                    </tbody>\n                </table>\n                <div class="clearfix"></div>\n            </div>\n        </div>\n    </div>\n</div>\n<div class="modal-footer">\n    <button type="button" class="tst-documentBrowser-close-btn btn btn-default pull-right btn-closeModal" data-dismiss="modal">Close</button>\n</div>';

},this.App.Templates.sharedAlertView=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <h1 class="">{options.title}</h1>\n</div>\n<div class="modal-body">\n    <form class="form-horizontal">\n        <div class="form-group m-bottom-5 p-left-10 p-right-10">\n            <h1 class="t-align-left">{options.msg}</h1>\n        </div>\n    </form>\n</div>\n<div class="modal-footer">\n    <span class="c-red msg-form pull-left"></span>\n    <button type="button" class="btn btn-default" rv-unless="options.hideCancel" id="cancel-action">Cancel</button>\n    <button id="ok-action" type="button" class="btn btn-primary">OK</button>\n</div>'},this.App.Templates.toolsClientEditorClientForm=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <a class="close" data-dismiss="modal">×</a>\n    <h1 class="modal-title font-bold font-size-17" rv-if="model.isNew">Create New Client</h1>\n    <h1 class="modal-title font-bold font-size-17" rv-unless="model.isNew">Edit Existing Client</h1>\n</div>\n<div class="modal-body">\n    <form id="client-form">\n        <div class="p-top-15">\n            <div class="form-horizontal">\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Client Name:</label>\n                    <div class="col-sm-8">\n                        <input type="text" name="clientName" rv-value="model:clientName" class=\'form-control\' required>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Client Name Short:</label>\n                    <div class="col-sm-8">\n                        <input type="text" name="clientNameShort" rv-value="model:clientNameShort" class=\'form-control\' required>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Client Type:</label>\n                    <div class="col-sm-8">\n                        <select class="form-control" name="clientTypeID" rv-value="model:clientTypeID"   required>\n                            <option rv-each-row="clientTypesCol.models" rv-value="row:clientTypeID">{row:description}</option>\n                        </select>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Client Company Flag:</label>\n                    <div class="col-sm-8">\n                        <select class="form-control" name="clientCompanyFlag" rv-value="model:clientCompanyFlag"   required>\n                            <option  rv-value="2">Client Only</option>\n                            <option  rv-value="3">Client and Company</option>\n                        </select>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"> Office Phone:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="officePhone" rv-value="model:officePhone">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Toll Free:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="tollFreePhone" rv-value="model:tollFreePhone">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Fax #:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="faxNumber" rv-value="model:faxNumber">\n                    </div>\n                </div>\n\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Billing Format:</label>\n                    <div class="col-sm-8">\n                        <select class="form-control" name="billingFormat" rv-value="model:billingFormat" required>\n                            <option value="PDF">PDF</option>\n                            <option value="LEDES1998B">LEDES1998B</option>\n                            <option value="LitigationAdvisor">Litigation Advisor</option>\n                        </select>\n                    </div>\n                </div>\n\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Minimum Billing Amount:</label>\n                    <div class="col-sm-8">\n                        <input type="number" class="form-control" name="minBillingAmt" rv-value="model:minBillingAmt" number="true">\n                    </div>\n                </div>\n\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Minimum Billing Days:</label>\n                    <div class="col-sm-8">\n                        <input type="number" class="form-control" name="minBillingDays" rv-value="model:minBillingDays" required number="true">\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Invoice Description:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="invoice_description" rv-value="model:invoice_description" required>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Litigation Advisor Header:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="lit_advisor_header" rv-value="model:lit_advisor_header">\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Require Matter ID:</label>\n                    <div class="col-sm-8">\n                        <input type="checkbox" class="form-control" name="requireMatterID" value="requireMatterID"  rv-checked="model:requireMatterID < :requireMatterID">\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">LEDES Processor:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="LEDESProcessor" rv-value="model:LEDESProcessor">\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Client Notes:</label>\n                    <div class="col-sm-8">\n                        <textarea class="form-control" rows="5" name="clientNotes" rv-value="model:clientNotes"></textarea>\n                    </div>\n                </div>\n\n                <hr class="hr-white"/>\n\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Client Group:</label>\n                    <div class="col-sm-7">\n                        <input type="text" class="form-control search-files typeahead client-group-typeahead p-right-30" name="groupName" rv-value="model:groupName" required>\n                        <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="groupName"><i class="fa fa-chevron-down"></i></a>\n                    </div>\n                    <div class="input-group-btn">\n                        <a class="btn btn-default client_group_form_edit" href="javascript:void(0);"  data-permission="103"><i class="fa fa-pencil"></i></a>\n                        <a class="btn btn-default client_group_form_new" href="javascript:void(0);" data-permission="103"><i class="fa fa-plus"></i></a>\n                        <a class="btn btn-default control-tooltip" href="javascript:void(0);"><i class="fa c-black p-left-5 fa-question-circle"></i></a>\n                    </div>\n                </div>\n\n                <hr class="hr-white"/>\n\n\n                <div class="form-group m-bottom-5">\n                    <h3 class="font-bold sub-header-forms p-bottom-10 col-sm-5 col-sm-offset-3">Physical\n                    </h3>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Address</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="physicalAddress" rv-value="model:physicalAddress" required>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> City:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="physicalCity" rv-value="model:physicalCity" required>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> State:</label>\n                    <div class="col-sm-8">\n                        <select class=\'form-control state-helper\' rv-value="model:physicalState" name=\'physicalState\' required></select>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Zip:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="physicalZip" rv-value="model:physicalZip" required>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <h3 class="font-bold sub-header-forms p-bottom-10 col-sm-5 col-sm-offset-3">Mailing\n                        <a class=" btn btn-info copy-button-size" id="copy-address-mailing" href="javascript:void(0);"><i class="fa fa-files-o"></i> Copy Physical Address</a>\n                    </h3>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Address:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="mailingAddress" rv-value="model:mailingAddress">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">City:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="mailingCity" rv-value="model:mailingCity">\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">State:</label>\n                    <div class="col-sm-8">\n                        <select class=\'form-control state-helper\' rv-value="model:mailingState" name=\'mailingState\'></select>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label">Zip:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="mailingZip" rv-value="model:mailingZip">\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <h3 class="font-bold sub-header-forms p-bottom-10 col-sm-5 col-sm-offset-3">Billing\n                        <a class="btn btn-info copy-button-size" id="copy-address-billing" href="javascript:void(0);"><i class="fa fa-files-o"></i> Copy Physical Address</a>\n                    </h3>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Address:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="billingAddress" rv-value="model:billingAddress" required>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> City:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="billingCity" rv-value="model:billingCity" required>\n                    </div>\n                </div>\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> State:</label>\n                    <div class="col-sm-8">\n                        <select class=\'form-control state-helper\' rv-value="model:billingState" name=\'billingState\' required></select>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Zip:</label>\n                    <div class="col-sm-8">\n                        <input type="text" class="form-control" name="billingZip" rv-value="model:billingZip" required>\n                    </div>\n                </div>\n\n\n                <hr rv-unless="model.isNew" class="hr-white"/>\n\n\n                <div class="form-group m-bottom-5">\n                    <div class="col-sm-8 col-sm-offset-3">\n                        <a class="btn btn-default time-keeper-edit" href="javascript:void(0);"  data-permission="103" rv-unless="model.isNew"><i class="fa fa-pencil p-right-5"></i> Edit Timekeeper Rates</a>\n                    </div>\n                </div>\n\n\n            </div>\n        </div>\n    </form>\n</div>\n<div class="modal-footer">\n    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n    <button type="button" class="btn btn-primary" id=\'save-client\'>Save Changes</button>\n</div>'},this.App.Templates.toolsClientEditorClientGroupForm=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <a class="close" data-dismiss="modal">×</a>\n    <h1 class="modal-title font-bold font-size-17" rv-if="model.isNew">Create New Client Group</h1>\n    <h1 class="modal-title font-bold font-size-17" rv-unless="model.isNew">Edit Existing Client Group</h1>\n</div>\n<div class="modal-body">\n    <form id="client-group-form">\n        <div class="p-top-15">\n            <div class="form-horizontal">\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-4 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> Client Group Name:</label>\n                    <div class="col-sm-6">\n                        <input type="text" name="groupName" rv-value="model:groupName" class=\'form-control\' required>\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-4 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> TK hours per day Alert:</label>\n                    <div class="col-sm-6">\n                        <input type="number" name="tkHoursPerDayAlert" rv-value="model:tkHoursPerDayAlert" class=\'form-control\' required number="true">\n                    </div>\n                </div>\n\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-4 control-label"><i class="fa fa-asterisk c-red font-size-10"></i> TK hours per day Max:</label>\n                    <div class="col-sm-6">\n                        <input type="number" name="tkHoursPerDayMax" rv-value="model:tkHoursPerDayMax" class=\'form-control\' required number="true">\n                    </div>\n                </div>\n            </div>\n        </div>\n    </form>\n</div>\n<div class="modal-footer">\n    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n    <button type="button" class="btn btn-primary" id=\'save-client-group\'>Save Changes</button>\n</div>'},this.App.Templates.toolsClientEditorIndex=function(a){{var b="";_.escape}return b+='<div class="container m-top-20" data-permission="80">\n    <div class="b-grey-tabs box-shadow">\n        <div class=\'b-green-casefriend p-top-10 p-bottom-5\'>\n            <div class="form-group col-sm-3 col-xs-12 p-top-10">\n                <a id=\'new-client\' class=\'font-size-16 cursor-pointer\'>\n                    <i class="fa fa-plus fa-lg"></i>\n                    Create Client\n                </a>\n            </div>\n            <!--<div class="col-sm-6 col-xs-12 t-align-center">-->\n            <!--<span class="">-->\n            <!--<i class="fa fa-angle-double-left fa-lg sequential-counter c-blue-link cursor-pointer display-none p-right-5" id=\'load-files-first\'></i>-->\n            <!--</span>-->\n            <!--<span class="">-->\n            <!--<i class="fa fa-chevron-left sequential-counter c-blue-link cursor-pointer display-none p-right-5" id=\'load-files-prev\'></i>-->\n            <!--</span>-->\n            <!--<span class=\'display-inline-block p-left-10 p-right-10\'>-->\n            <!--<label class=\'p-bottom-6 font-size-17\'>Showing Doctors from <span id=\'from-offset\'>0</span> to <span id="to-offset">{options.paginationConstant}</span> (Total {totalRows})</label>-->\n            <!--<select class="form-control" id="offset" data-selectorname="fileType" name="offset">-->\n            <!--<option rv-data-min="-1">Show All Doctors</option>-->\n            <!--<option rv-each-row="PagesNumbers.models" rv-data-position="row:position" rv-data-min="row:min" rv-data-max="row:max">{row:min} - {row:max}</option>-->\n            <!--</select>-->\n            <!--</span>-->\n            <!--<span class="">-->\n            <!--<i class="fa fa-chevron-right sequential-counter c-blue-link cursor-pointer p-left-5" id=\'load-files-next\'></i>-->\n            <!--</span>-->\n            <!--<span class="">-->\n            <!--<i class="fa fa-angle-double-right fa-lg sequential-counter c-blue-link cursor-pointer p-left-5" id=\'load-files-last\'></i>-->\n            <!--</span>-->\n            <!--</div>-->\n            <!--<div class="form-group col-sm-3 col-xs-12 p-top-45 t-align-right font-size-16">-->\n            <!--<a class=\'display-none cursor-pointer\' id="filter-btn">-->\n            <!--<i class="fa fa-arrow-down"></i>-->\n            <!--Show Filters-->\n            <!--</a>-->\n            <!--<a class=\'cursor-pointer\' id="filter-btn-close">-->\n            <!--<i class="fa fa-arrow-up"></i>-->\n            <!--Hide Filters-->\n            <!--</a>-->\n            <!--</div>-->\n            <!--<div class="col-xs-12 p-0">-->\n            <!--<div id=\'file-filters\' class="b-green-casefriend min-height-75 p-bottom-15">-->\n            <!--<div class="form-group col-sm-6 col-md-4 col-lg-4">-->\n            <!--<label class="control-label c-gray">Search by Doctor:</label><br>-->\n            <!--<div class="col-sm-12 p-left-0">-->\n            <!--<input type="text" class="typeahead form-control p-right-30 search-files doctor_typeahead" name="doctor">-->\n            <!--<a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="doctor"><i class="fa fa-chevron-down"></i></a>-->\n            <!--</div>-->\n            <!--</div>-->\n            <!--<div class="form-group col-sm-6 col-md-4 col-lg-4">-->\n            <!--<label class="control-label c-gray">Search by Facility:</label><br>-->\n            <!--<div class="col-sm-12 p-left-0">-->\n            <!--<input type="text" class="typeahead form-control p-right-30 search-files doctor_facility_typeahead" name="doctorFacility">-->\n            <!--<a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="doctorFacility"><i class="fa fa-chevron-down"></i></a>-->\n            <!--</div>-->\n            <!--</div>-->\n            <!--<div class="form-group col-sm-6 col-md-4 col-lg-4">-->\n            <!--<label class="control-label c-gray">Search by Physical City:</label><br>-->\n            <!--<div class="col-sm-12 p-left-0">-->\n            <!--<input type="text" class="typeahead form-control p-right-30 search-files doctor_physical_city_typeahead" name="doctorPhysicalCity">-->\n            <!--<a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="doctorPhysicalCity"><i class="fa fa-chevron-down"></i></a>-->\n            <!--</div>-->\n            <!--</div>-->\n            <!--<div class="form-group col-sm-6 col-md-4 col-lg-4">-->\n            <!--<label class="control-label c-gray">Search by Speciality:</label><br>-->\n            <!--<div class="col-sm-12 p-left-0">-->\n            <!--<input type="text" class="typeahead form-control p-right-30 search-files doctor_specialty_typeahead" name="doctorSpecialty">-->\n            <!--<a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="doctorSpecialty"><i class="fa fa-chevron-down"></i></a>-->\n            <!--</div>-->\n            <!--</div>-->\n            <!--<div class="form-group col-sm-6 col-md-4 col-lg-4">-->\n            <!--<label class="control-label c-gray">Search by Subspeciality:</label><br>-->\n            <!--<div class="col-sm-12 p-left-0">-->\n            <!--<input type="text" class="typeahead form-control p-right-30 search-files doctor_subspecialty_typeahead" name="doctorSubspecialty">-->\n            <!--<a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="doctorSubspecialty"><i class="fa fa-chevron-down"></i></a>-->\n            <!--</div>-->\n            <!--</div>-->\n            <!--<div class="form-group col-sm-6 col-md-4 col-lg-4">-->\n            <!--<label class="control-label c-gray">Search by Rating:</label><br>-->\n            <!--<div class="col-sm-12 p-left-0">-->\n            <!--<select class="form-control p-right-30" id="doctorRating" data-selectorname="doctorRating" name="doctorRating">-->\n            <!--<option value="-1">Rating...</option>-->\n            <!--<option value="0">0</option>-->\n            <!--<option value="1">1</option>-->\n            <!--<option value="2">2</option>-->\n            <!--<option value="3">3</option>-->\n            <!--<option value="4">4</option>-->\n            <!--<option value="5">5</option>-->\n            <!--</select>-->\n            <!--</div>-->\n            <!--</div>-->\n            <!--</div>-->\n            <!--</div>-->\n            <div class="clearfix"></div>\n        </div>\n        <div class="p-top-10">\n            <table class=\'table table-hover\'>\n                <thead>\n                <tr>\n                    <th class="doctors-sortable cursor-pointer font-bold min-width-100" >Client Name <i class="fa fa-chevron-up"></i></th>\n                    <th class="font-bold min-width-100">Short Name</th>\n                    <th class="font-bold min-width-100">Client Type</th>\n                    <th class="doctors-sortable cursor-pointer font-bold min-width-115" >Client Group</th>\n                    <th class="font-bold min-width-115" data-sort=\'\'>Physical Address</th>\n                    <th class="font-bold min-width-115" data-sort=\'\'>Billing Format</th>\n                </tr>\n                </thead>\n                <tbody>\n                    <tr rv-each-row="collection.models">\n                        <td class="cursor-pointer editClient" rv-data-client-id="row:clientID">{row:clientName}</td>\n                        <td class="cursor-pointer editClient" rv-data-client-id="row:clientID">{row:clientNameShort}</td>\n                        <td class="cursor-pointer editClient" rv-data-client-id="row:clientID">{row:clientType}</td>\n                        <td class="cursor-pointer editClient" rv-data-client-id="row:clientID">{row:groupName}</td>\n                        <td class="cursor-pointer editClient" rv-data-client-id="row:clientID">{row:address}</td>\n                        <td class="cursor-pointer editClient" rv-data-client-id="row:clientID">{row:billingFormat}</td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>\n'},this.App.Templates.toolsClientEditorTimekeeperRatesForm=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <a class="close" data-dismiss="modal">×</a>\n    <h1 class="modal-title font-bold font-size-17">Edit Time Keeper Rates for: {options.clientName}</h1>\n</div>\n<div class="modal-body">\n        <div class="row">\n            <div class="form-group col-sm-3 col-xs-12 p-top-10">\n                <a id=\'new-tk\' class=\'font-size-16 cursor-pointer\'>\n                    <i class="fa fa-plus fa-lg"></i>\n                    Add New\n                </a>\n\n            </div>\n        </div>\n        <div class="">\n            <table class="table table-hover table-tk-editing m-bottom-0 p-relative b-grey-light">\n                <thead class=\'b-blue-light c-white font-size-16\'>\n                <tr id="">\n                    <th class=\'width-30\'> Classification</th>\n                    <th class=\'width-200\'> Classification Description</th>\n                    <th class=\'width-200\'> TK Type</th>\n                    <th class=\'width-150\'> Rate Type</th>\n                    <th class=\'width-100\'> TK Rate</th>\n                    <th class=\'width-75\'> Module</th>\n                    <th class=\'width-20\'>Save</th>\n                    <th class=\'width-20\'>Delete</th>\n                </tr>\n                </thead>\n                <tbody class=\'\'>\n                <tr rv-each-row="tkCollection.models" rv-data-tkRateID="row:tkRateID">\n                    <td class=\'\'><input type="text" rv-data-tkRateID="row:tkRateID" class="form-control " rv-value="row:classification" name="classification" /></td>\n                    <td class=\'\'><input type="text" rv-data-tkRateID="row:tkRateID" class="form-control " rv-value="row:classificationDescription" name="classificationDescription"/></td>\n                    <td class=\'\'><input type="text" rv-data-tkRateID="row:tkRateID" class="form-control " rv-value="row:tkType" name="tkType"/></td>\n\n                    <td class=\'\'><select class="form-control" name="rateType" rv-value="row:rateType">\n                            <option value="0"> Non Hourly</option>\n                            <option value="1"> Hourly</option>\n                            <option value="2"> Flat Fee</option>\n                        </select></td>\n                    <td class=\'\'><input rv-data-tkRateID="row:tkRateID"\n                                        class="form-control "\n                                        rv-value="row:tkRate"\n                                        name="tkRate" type=number step=0.01 number="true"/></td>\n                    <td class=\'\'>\n                        <select class="form-control" name="module_type_id" rv-value="row:module_type_id">\n                            <option class="text-uppercase" rv-each-module="colModules.models" rv-value="module:moduleID">{module:moduleName}</option>\n                        </select></td>\n                    <td>\n                        <button rv-data-tkRateID="row:tkRateID" rv-data-cid="row.cid" class="btn btn-success saveTk"><span class="fa fa-save"></span></button>\n                    </td>\n                    <td>\n                        <button rv-data-tkRateID="row:tkRateID" rv-data-cid="row.cid" class="btn btn-danger delete-tk"><span class="fa fa-close"></span></button>\n                    </td>\n                </tr>\n                </tbody>\n            </table>\n            <div class=\'row c-red m-top-10\'>\n                <em class="form-group col-sm-12  t-align-left font-size-13">NOTE: When two different rates have the same classification, any user having that classification will be able to bill for both rates. </em>\n            </div>\n            <table class="m-top-10 table table-hover m-bottom-0 p-relative b-grey-light" id="user-timekeeper-table">\n                <thead class=\'b-blue-light c-white font-size-16\'>\n                <tr id="">\n                    <th>Time Keeper Name</th>\n                    <th rv-each-unq="uniqueClassifications">\n                        <span class="p-left-20 p-right-5">{unq}</span> <input type="checkbox" class="header-check" rv-data-unqclassparent="unq" />\n                    </th>\n                    <th class=\'width-20\'>Save</th>\n                </tr>\n                </thead>\n                <tbody id="users-tk-table-body">\n\n                </tbody>\n            </table>\n            <div class="row">\n                <div class="form-group col-sm-12 col-xs-12 p-top-10 t-align-right">\n                    <button  class="btn btn-success saveAllUsersTK"> Save All Users</button>\n                </div>\n            </div>\n\n\n        </div>\n</div>\n<div class="modal-footer">\n    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n    <!--<button type="button" class="btn btn-primary" id=\'save-client-group\'>Save Changes</button>-->\n</div>'},this.App.Templates.toolsContactCenterDoctorsIndex=function(a){{var b="";_.escape}return b+='<div class="container m-top-20" data-permission="80">\n    <div class="b-grey-tabs box-shadow">\n        <div class=\'b-green-casefriend p-top-10 p-bottom-5\'>\n            <div class="form-group col-sm-3 col-xs-12 p-top-45">\n                <a id=\'new-doctor\' class=\'font-size-16 cursor-pointer\'>\n                    <i class="fa fa-plus fa-lg"></i>\n                    Create new Doctor\n                </a>\n            </div>\n            <div class="col-sm-6 col-xs-12 t-align-center">\n				<span class="">\n		       		<i class="fa fa-angle-double-left fa-lg sequential-counter c-blue-link cursor-pointer display-none p-right-5" id=\'load-files-first\'></i>\n		     	</span>\n                <span class="">\n		       		<i class="fa fa-chevron-left sequential-counter c-blue-link cursor-pointer display-none p-right-5" id=\'load-files-prev\'></i>\n		     	</span>\n                <span class=\'display-inline-block p-left-10 p-right-10\'>\n		     		<label class=\'p-bottom-6 font-size-17\'>Showing Doctors from <span id=\'from-offset\'>0</span> to <span id="to-offset">{options.paginationConstant}</span> (Total {totalRows})</label>\n		     		<select class="form-control" id="offset" data-selectorname="fileType" name="offset">\n						<option rv-data-min="-1">Show All Doctors</option>\n						<option rv-each-row="PagesNumbers.models" rv-data-position="row:position" rv-data-min="row:min" rv-data-max="row:max">{row:min} - {row:max}</option>\n					</select>\n		     	</span>\n                <span class="">\n			        <i class="fa fa-chevron-right sequential-counter c-blue-link cursor-pointer p-left-5" id=\'load-files-next\'></i>\n			    </span>\n                <span class="">\n			        <i class="fa fa-angle-double-right fa-lg sequential-counter c-blue-link cursor-pointer p-left-5" id=\'load-files-last\'></i>\n			    </span>\n            </div>\n            <div class="form-group col-sm-3 col-xs-12 p-top-45 t-align-right font-size-16">\n                <a class=\'display-none cursor-pointer\' id="filter-btn">\n                    <i class="fa fa-arrow-down"></i>\n                    Show Filters\n                </a>\n                <a class=\'cursor-pointer\' id="filter-btn-close">\n                    <i class="fa fa-arrow-up"></i>\n                    Hide Filters\n                </a>\n            </div>\n            <div class="col-xs-12 p-0">\n                <div id=\'file-filters\' class="b-green-casefriend min-height-75 p-bottom-15">\n                    <div class="form-group col-sm-6 col-md-4 col-lg-4">\n                        <label class="control-label c-gray">Search by Doctor:</label><br>\n                        <div class="col-sm-12 p-left-0">\n                            <input type="text" class="typeahead form-control p-right-30 search-files doctor_typeahead" name="doctor" placeholder="Search by Doctor">\n                            <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="doctor"><i class="fa fa-chevron-down"></i></a>\n                        </div>\n                    </div>\n                    <div class="form-group col-sm-6 col-md-4 col-lg-4">\n                        <label class="control-label c-gray">Search by Facility:</label><br>\n                        <div class="col-sm-12 p-left-0">\n                            <input type="text" class="typeahead form-control p-right-30 search-files doctor_facility_typeahead" name="doctorFacility" placeholder="Search by Facility">\n                            <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="doctorFacility"><i class="fa fa-chevron-down"></i></a>\n                        </div>\n                    </div>\n                    <div class="form-group col-sm-6 col-md-4 col-lg-4">\n                        <label class="control-label c-gray">Search by Physical City:</label><br>\n                        <div class="col-sm-12 p-left-0">\n                            <input type="text" class="typeahead form-control p-right-30 search-files doctor_physical_city_typeahead" name="doctorPhysicalCity" placeholder="Search by Physical City">\n                            <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="doctorPhysicalCity"><i class="fa fa-chevron-down"></i></a>\n                        </div>\n                    </div>\n                    <div class="form-group col-sm-6 col-md-4 col-lg-4">\n                        <label class="control-label c-gray">Search by Speciality:</label><br>\n                        <div class="col-sm-12 p-left-0">\n                            <input type="text" class="typeahead form-control p-right-30 search-files doctor_specialty_typeahead" name="doctorSpecialty" placeholder="Search by Speciality">\n                            <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="doctorSpecialty"><i class="fa fa-chevron-down"></i></a>\n                        </div>\n                    </div>\n                    <div class="form-group col-sm-6 col-md-4 col-lg-4">\n                        <label class="control-label c-gray">Search by Subspeciality:</label><br>\n                        <div class="col-sm-12 p-left-0">\n                            <input type="text" class="typeahead form-control p-right-30 search-files doctor_subspecialty_typeahead" name="doctorSubspecialty" placeholder="Search by Subspeciality">\n                            <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="doctorSubspecialty"><i class="fa fa-chevron-down"></i></a>\n                        </div>\n                    </div>\n                    <div class="form-group col-sm-6 col-md-4 col-lg-4">\n                        <label class="control-label c-gray">Search by Rating:</label><br>\n                        <div class="col-sm-12 p-left-0">\n                            <select class="form-control p-right-30" id="doctorRating" data-selectorname="doctorRating" name="doctorRating">\n                                <option value="-1">Rating...</option>\n                                <option value="0">0</option>\n                                <option value="1">1</option>\n                                <option value="2">2</option>\n                                <option value="3">3</option>\n                                <option value="4">4</option>\n                                <option value="5">5</option>\n                            </select>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="clearfix"></div>\n        </div>\n        <div id="doctors-container" class="p-top-10">\n            <table class=\'table file-events-table\'>\n                <thead id=\'doctors-heads\'>\n                <tr>\n                    <th class="doctors-sortable cursor-pointer font-bold min-width-100" data-sort=\'doctorLastName\'>Name <i class="fa fa-chevron-up"></i></th>\n                    <th class="font-bold min-width-100">Facilities</th>\n                    <th class="doctors-sortable cursor-pointer font-bold min-width-115" data-sort=\'doctorSpecialty\'>Speciality</th>\n                    <th class="font-bold min-width-115" data-sort=\'\'>SubSpeciality</th>\n                    <th class="doctors-sortable cursor-pointer font-bold min-width-100" data-sort=\'physicalCity\'>Physical city</th>\n                    <th class="doctors-sortable cursor-pointer font-bold min-width-115" data-sort=\'doctorRating\'>Rating</th>\n                </tr>\n                </thead>\n                <tbody id="doctors-body-table"></tbody>\n            </table>\n        </div>\n    </div>\n</div>\n';

},this.App.Templates.toolsContactCenterDoctorsSubspecialtiesForm=function(a){{var b="";_.escape}return b+='<div class="modal-header">\n    <a class="close" data-dismiss="modal">×</a>\n    <h1 class="modal-title font-bold font-size-17" rv-if="model.isNew">Create New Subspecialty</h1>\n    <h1 class="modal-title font-bold font-size-17" rv-unless="model.isNew">Edit Existing Subspecialty</h1>\n</div>\n<div class="modal-body">\n    <form id="from-subspecialty">\n        <div class="panel-employer p-top-15">\n            <div class="form-horizontal">\n                <div class="form-group m-bottom-5">\n                    <label class="col-sm-3 control-label"><i class="fa fa-asterisk c-red font-size-10"></i>Subspecialty Name:</label>\n                    <div class="col-sm-8">\n                        <input type="text" name="subSpecialtyName" rv-value="model:subSpecialtyName" class=\'form-control\' required>\n                        <input type=\'hidden\' name="subSpecialtyID" rv-value="model:subSpecialtyID"/>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </form>\n</div>\n<div class="modal-footer">\n    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n    <button type="button" class="btn btn-primary" id=\'save-subspecialty\'>Save changes</button>\n</div>'},this.App.Templates.usersAccess=function(a){{var b="";_.escape}return b+='<div class=\'row\' data-permission="7">\n    <div id=\'access-tree\' class=\'col-sm-12\'>\n        <div description="Select All" class="select-all">\n            <div class="col-sm-2">\n                <input type="checkbox" value="1" name="select_all"> Select All\n            </div>\n            <div class="col-sm-3">\n                <select class="form-control" name="acl-can-edit-all">\n                    <option value="1">Can edit</option>\n                    <option value="0">Can view</option>\n                </select>\n            </div>\n        </div>\n        <ul class="nav nav-tabs" role="tablist"></ul>\n        <div class="tab-content"></div>\n    </div>\n    <div class=\'col-sm-4\'>\n        <button id=\'save-acl\' class="btn btn-danger col-md-2 btn-lg">Save</button>\n    </div>\n</div>\n'},this.App.Templates.usersAssignClientManager=function(a){{var b="";_.escape}return b+='<div class="modal fade" id="assign-client-manager" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-permission="6">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <h4 class="modal-title" id="myModalLabel">All Client Rep\'s</h4>\n            </div>\n            <div class="modal-body">\n                <div class="p-relative">\n                    <input class="typeahead client_manager_typeahead search form-control" type="text" name="search">\n                    <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="search"><i class="fa fa-chevron-down"></i></a>\n                </div>\n                <table class=\'table\'>\n                    <thead>\n                    <tr>\n                        <td>Assign</td>\n                        <td>Client Rep ID</td>\n                        <td>Name & Email</td>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    <tr id=\'da-manager-list\' rv-each-model="collection.models">\n                        <td><input type="checkbox" rv-id="model:id" name=\'clientRep\' checked/></td>\n                        <td><span>{model:id}</span></td>\n                        <td><span class="p-left-10">{model:typeaheadResult}</span></td>\n                    </tr>\n                    </tbody>\n                </table>\n\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n                <button type="button" class="btn btn-primary" id=\'save-assign-manager\' data-dismiss="modal">Save changes</button>\n            </div>\n        </div>\n    </div>\n</div>'},this.App.Templates.usersAssignCompany=function(a){{var b="";_.escape}return b+='<div class="modal fade" id="assign-company" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-permission="6">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <h4 class="modal-title" rv-if="needClients" id="myModalLabel">All Clients</h4>\n                <h4 class="modal-title" rv-unless="needClients" id="myModalLabel">All Firm Locations</h4>\n            </div>\n            <div class="modal-body">\n\n                <div class="p-relative">\n                    <input class="typeahead assignFirmLocation search form-control" type="text" name="search">\n                    <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="search"><i class="fa fa-chevron-down"></i></a>\n                </div>\n\n                <table class=\'table\'>\n                    <thead>\n                    <tr>\n                        <td>Assign</td>\n                        <td rv-if="needClients">Client ID</td>\n                        <td rv-unless="needClients">Firm Location ID</td>\n                        <td>Name</td>\n                        <td rv-if="needClients">Primary Company</td>\n                        <td rv-unless="needClients">Primary Location</td>\n                    </tr>\n                    </thead>\n                    <tbody rv-if="needClients">\n                    <tr class=\'companies-list\' rv-each-model="collection.models">\n                        <td rv-unless="options.assignClient"><input type="checkbox" rv-id="model:clientID" name=\'companies\' checked/></td>\n                        <td rv-if="options.assignClient"><input type="checkbox" rv-id="model:clientID" name=\'companies\' checked class=\'clients-adj\'/></td>\n                        <td><span>{model:clientID}</span></td>\n                        <td><span class="p-left-10">{model:clientName} ({model:clientNameShort})</span></td>\n                        <td><input type="radio" name=\'primaryDA\' rv-value=\'model:clientID\'/></td>\n                    </tr>\n                    </tbody>\n                    <tbody rv-unless="needClients">\n                    <tr class=\'companies-list\' rv-each-model="collection.models">\n                        <td><input type="checkbox" rv-id="model:ua_firm_location_id" name=\'companies\' checked/></td>\n                        <td><span>{model:ua_firm_location_id}</span></td>\n                        <td><span class="p-left-10">{model:ufl_firm_name}</span></td>\n                        <td><input type="radio" name="primaryLocation" rv-value="model:ua_firm_location_id"></td>\n                    </tr>\n                    </tbody>\n                </table>\n\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n                <button type="button" class="btn btn-primary" id=\'add-assign-clients\' rv-if="options.assignClient">Add Clients</button>\n                <button type="button" class="btn btn-primary" id=\'save-assign-companies\' rv-unless="options.assignClient">Save changes</button>\n            </div>\n        </div>\n    </div>\n</div>\n'},this.App.Templates.usersAssignDaManager=function(a){{var b="";_.escape}return b+='<div class="modal fade" id="assign-da-manager" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-permission="6">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <h4 class="modal-title" id="myModalLabel">All Employees</h4>\n            </div>\n            <div class="modal-body">\n                <div class="p-relative">\n                    <input class="typeahead typeaheadEmployees search form-control" type="text" name="search">\n                    <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="search"><i class="fa fa-chevron-down"></i></a>\n                </div>\n                <table class=\'table\'>\n                    <thead>\n                    <tr>\n                        <td>Assign</td>\n                        <td>Employee ID</td>\n                        <td>Name</td>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    <tr id=\'da-manager-list\' rv-each-model="collection.models">\n                        <td><input type="checkbox" rv-id="model:id" name=\'companies\' checked/></td>\n                        <td><span>{model:id}</span></td>\n                        <td><span class="p-left-10">{model:typeaheadResult}</span></td>\n                    </tr>\n                    </tbody>\n                </table>\n\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n                <button type="button" class="btn btn-primary" id=\'save-assign-da-manager\'>Save changes</button>\n            </div>\n        </div>\n    </div>\n</div>'},this.App.Templates.usersClientManagerSubordinates=function(a){{var b="";_.escape}return b+='<div class=\'p-10\' data-permission="6">\n    <div id=\'assign-client-manager-container\'></div>\n    <div>\n        <button rv-disabled="assignBtnBlocked < assignBtnBlocked" type="button" id="assignSubordinatesToClientManager" class="btn btn-success"><span class="glyphicon glyphicon-plus p-right-10"></span>Assign Adjusters</button>\n        <a rv-if="assignBtnBlocked < assignBtnBlocked" class="btn btn-default btn-undoAll" href="javascript:;" title="Undo any changes on primary managers before to save">\n            <i class="fa fa-undo"></i> Undo All\n        </a>\n    </div>\n    <div class="m-top-10">\n        <table id="list_employee_assigned" class="cf-table table table-striped table-hover">\n            <colgroup>\n                <col width="100">\n                <col width="600">\n                <col width="240">\n            </colgroup>\n            <thead>\n            <tr>\n                <th colspan="4">List of Adjusters Assigned</th>\n            </tr>\n            <tr>\n                <th width="120">Adjuster ID</th>\n                <th>Adjuster</th>\n                <th>Primary Manager</th>\n                <th>Action</th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr rv-each-model="collection.models">\n                <td>\n                    {model:id}\n                </td>\n                <td>\n                    {model:typeaheadResult}\n                </td>\n                <td class="content-primary-manager">\n                    <span class="label font-size-12 label-primary" rv-if="model:primary_manager_id">{model:primary_manager}</span>\n                    <span class="label font-size-12 control-label label-default" rv-unless="model:primary_manager_id">No primary manager</span>\n                    <select name="selectPrimaryManager" class="form-control display-none"></select>\n                </td>\n                <td>\n                    <a title="Edit Primary Manager" href="javascript:void(0);" rv-data-daid="model:id" class="btn btn-default btn-editManager text-center">\n                        <i class="fa fa-edit"></i>\n                    </a>\n                    <div class="control-row display-none">\n                        <a title="Undo" href="javascript:void(0);" rv-data-daid="model:id" class="btn btn-default btn-undo btn-cancel text-center">\n                            <i class="fa fa-undo"></i>\n                        </a>\n                        <a title="Save Changes" href="javascript:void(0);" rv-data-daid="model:id" class="btn btn-primary btn-saveManager text-center">\n                            <i class="fa fa-save c-white"></i>\n                        </a>\n                    </div>\n\n\n                </td>\n            </tr>\n            <tr rv-unless="collection.length">\n                <td colspan="4" class="font-bold">NONE</td>\n            </tr>\n            </tbody>\n        </table>\n    </div>\n</div>\n\n<div class="custom-loader display-none">\n    <i class="fa font-size-12 font-bold fa-spinner fa-pulse fa-4x"></i>\n</div>'},this.App.Templates.usersClientRepFiles=function(a){{var b="";_.escape}return b+='<div rv-if="options.clientRepFiles">\n    <div class="form-horizontal">\n        <div class="form-group m-bottom-5" rv-if="colWCFiles.length < .length">\n            <label class="col-lg-2 font-size-15 control-label c-grey-medium">WC Files:</label>\n        </div>\n\n        <div class="form-group m-bottom-5" rv-if="colWCFiles.length < .length">\n            <div rv-each-files="colWCFiles.models" class="col-lg-offset-1 col-lg-5 p-top-7">\n                <span class="file-icon">{files:fileStatus}</span>\n                <a class="gotoFile" role="button" rv-data-id="files:fileNumber"><i class="fa fa-search fa-lg"></i></a>\n                <a class="goto-file-new-tab" rv-href="files.fileEditUrl < :fileNumber" target="_blank"><i class="fa fa-search-plus fa-lg"></i></a>\n                <a class="gotoFile" role="button" rv-data-id="files:fileNumber">\n                    <span>{files:fileTitle}</span>\n                </a>\n            </div>\n        </div>\n\n        <div class="form-group m-bottom-5" rv-if="colSubroFiles.length < .length">\n            <label class="col-lg-2 font-size-15 control-label c-grey-medium">Subro Files:</label>\n        </div>\n\n        <div class="form-group m-bottom-5" rv-if="colSubroFiles.length < .length">\n            <div rv-each-files="colSubroFiles.models" class="col-lg-offset-1 col-lg-5 p-top-7">\n                <span class="file-icon">{files:fileStatus}</span>\n                <a class="gotoFile" role="button" rv-data-id="files:subroFileNumber"><i class="fa fa-search fa-lg"></i></a>\n                <a class="goto-file-new-tab" rv-href="files.fileEditUrl < :subroFileNumber" target="_blank"><i class="fa fa-search-plus fa-lg"></i></a>\n                <a class="gotoFile" role="button" rv-data-id="files:subroFileNumber">\n                    <span>{files:fileTitle}</span>\n                </a>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div rv-unless="options.clientRepFiles">\n    <strong>No files associated.</strong>\n</div>'},this.App.Templates.usersCompany=function(a){{var b="";_.escape}return b+='<div class=\'p-10\'>\n    <div id=\'assign-company-container\'></div>\n    <div id=\'create-company-container\'></div>\n    <div class=\'p-10\'>\n        <button type="button" rv-if="model.isClientRep < :isClientRep" id=\'assignCompany\' class="btn btn-success"><span class="glyphicon glyphicon-plus p-right-10"></span>Assign Client Company</button>\n\n        <button type="button" rv-unless="model.isClientRep < :isClientRep" id=\'assignCompany\' class="btn btn-success"><span class="glyphicon glyphicon-plus p-right-10"></span>Assign Firm Locations</button>\n\n        <button type="button" rv-unless="model.isClientRep < :isClientRep" id=\'createCompany\' class="btn btn-success m-left-30"><span class="glyphicon glyphicon-plus p-right-10"></span>Create New Firm Location</button>\n    </div>\n    <div rv-unless="model.isClientRep < :isClientRep">\n        <div class=\'p-10\'>User Firm Locations</div>\n        <div rv-each-model="collection.models">\n            <form rv-company-id=\'model:ua_firm_location_id\'>\n                <div class=\'col-md-12\'>\n                    <span class=\'fa fa-pencil p-10 cursor-pointer\' rv-on-click=\'showInfo\'></span>\n                    <span class=\'p-10\'>{model:ufl_firm_name} (Address: {model:physicalAddress}, City: {model:physicalCity}, State: {model:physicalState}) <span rv-if="model:isPrimaryLocation"><i class="fa fa-check-circle"></i> <em class="c-red">Primary Location</em></span>\n                    </span>\n\n                    <div class="form-horizontal p-top-15 display-none">\n                        <hr>\n                        <h2 class=\'font-bold font-size-17 p-bottom-10\'> Required</h2>\n                        <div class="form-group">\n                            <label class=\'col-sm-3 p-top-5\'><i class="fa fa-asterisk c-red font-size-10"></i> Firm Name:</label>\n                            <div class="col-sm-9">\n                                <input type="text" name="ufl_firm_name" rv-value="model:ufl_firm_name" class=\'form-control\' required/>\n                                <input type=\'hidden\' name="ua_firm_location_id" rv-value="model:ua_firm_location_id"/>\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <label class=\'col-sm-3 p-top-5 p-right-2\'><i class="fa fa-asterisk c-red font-size-10"></i> EAMS/UAN Name:</label>\n                            <div class="col-sm-9">\n                                <input type="text" name="EAMSname" rv-value="model:EAMSname" class=\'form-control\' required/>\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <label class=\'col-sm-3 p-top-5\'><i class="fa fa-asterisk c-red font-size-10"></i> EAMS/UAN #:</label>\n                            <div class="col-sm-9">\n                                <input type="text" name="EAMSno" rv-value="model:EAMSno" class=\'form-control\' required/>\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <label class=\'col-sm-3 p-top-5\'><i class="fa fa-asterisk c-red font-size-10"></i> Office Phone:</label>\n                            <div class="col-sm-9">\n                                <input type="text" name="officePhone" rv-value="model:officePhone" class=\'form-control\' required/>\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <label class=\'col-sm-3 p-top-5\'><i class="fa fa-asterisk c-red font-size-10"></i> Fax:</label>\n                            <div class="col-sm-9">\n                                <input type="text" name="faxNumber" rv-value="model:faxNumber" class=\'form-control\' required/>\n                            </div>\n                        </div>\n                        <div class="form-group m-bottom-5">\n                            <h3 class="font-bold sub-header-forms-users p-bottom-10 col-sm-3 col-sm-offset-3">Mailing</h3>\n                        </div>\n                        <div class="form-group">\n                            <label class=\'col-sm-3 p-top-5\'><i class="fa fa-asterisk c-red font-size-10"></i> Address:</label>\n                            <div class="col-sm-9">\n                                <input type="text" name="mailingAddress" rv-value="model:mailingAddress" class=\'form-control\' required/>\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <label class=\'col-sm-3 p-top-5\'><i class="fa fa-asterisk c-red font-size-10"></i> City:</label>\n                            <div class="col-sm-9">\n                                <input type="text" name="mailingCity" rv-value="model:mailingCity" class=\'form-control\' required/>\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <label class=\'col-sm-3 p-top-5\'><i class="fa fa-asterisk c-red font-size-10"></i> State:</label>\n                            <div class="col-sm-9">\n                                <select class=\'form-control state-helper\' rv-value="model:mailingState" name=\'mailingState\' required></select>\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <label class=\'col-sm-3 p-top-5\'><i class="fa fa-asterisk c-red font-size-10"></i> Zip:</label>\n                            <div class="col-sm-9">\n                                <input type="text" name="mailingZip" rv-value="model:mailingZip" class=\'form-control\' required/>\n                            </div>\n                        </div>\n                        <hr>\n                        <h2 class=\'font-bold font-size-17 p-bottom-10\'> Optional</h2>\n                        <div class="form-group">\n                            <label class=\'col-sm-3 p-top-5\'>Toll Free Phone:</label>\n                            <div class="col-sm-9">\n                                <input type="text" name="tollFreePhone" rv-value="model:tollFreePhone" class=\'form-control\'/>\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <label class=\'col-sm-3 p-top-5\'></i> Firm Notes:</label>\n                            <div class="col-sm-9">\n                                <input type="text" name="firmNotes" rv-value="model:firmNotes" class=\'form-control\'/>\n                            </div>\n                        </div>\n                        <div class="form-group m-bottom-5">\n                            <h3 class="font-bold sub-header-forms-users p-bottom-10 col-sm-5 col-sm-offset-3">Physical\n                                <a class="btn btn-info copy-button-size" id="copy-to-address" rv-data-model=\'model.cid\' href="javascript:void(0);"><i class="fa fa-files-o"></i> Copy Mailing Address</a>\n                            </h3>\n                        </div>\n                        <div class="form-group">\n                            <label class=\'col-sm-3 p-top-5\'>Address:</label>\n                            <div class="col-sm-9">\n                                <input type="text" name="physicalAddress" rv-value="model:physicalAddress" class=\'form-control\'/>\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <label class=\'col-sm-3 p-top-5\'>City:</label>\n                            <div class="col-sm-9">\n                                <input type="text" name="physicalCity" rv-value="model:physicalCity" class=\'form-control\'/>\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <label class=\'col-sm-3 p-top-5\'>State:</label>\n                            <div class="col-sm-9">\n                                <select class=\'form-control state-helper\' rv-value="model:physicalState" name=\'physicalState\'></select>\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <label class=\'col-sm-3 p-top-5\'>Zip:</label>\n                            <div class="col-sm-9">\n                                <input type="text" name="physicalZip" rv-value="model:physicalZip" class=\'form-control\'/>\n                            </div>\n                        </div>\n                        <div class="col-md-12 t-align-c">\n                            <button class="m-10 btn btn-danger btn-lg save-location" rv-company-id="model:ua_firm_location_id">Save</button>\n                        </div>\n                        <div class="col-md-12 t-align-c status">\n                        </div>\n                    </div>\n                </div>\n            </form>\n        </div>\n    </div>\n    <div rv-if="model.isClientRep < :isClientRep">\n        <div class=\'p-10\'>Client Companies for this Client Rep</div>\n        <div rv-each-model="collection.models">\n            <form rv-company-id=\'model:clientID\'>\n                <div class=\'col-md-10\'>\n                    <i class=\'fa fa-circle p-10\'></i>\n                    <span class=\'p-10\'>\n                      {model:clientName} ({model:clientNameShort}) - Address: {model:physicalAddress}, City: {model:physicalCity}, State: {model:physicalState}\n                      <span rv-if="model:isPrimaryLocation"><i class="fa fa-check-circle"></i> <em class="c-red">Primary Company</em></span>\n                    </span>\n                </div>\n            </form>\n        </div>\n    </div>\n</div>\n'},this.App.Templates.usersCreateCompany=function(a){{var b="";_.escape}return b+='<div class="modal fade" id="create-company" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-permission="6">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <a class="close" data-dismiss="modal">×</a>\n                <h1 class="modal-title font-bold font-size-17" id="myModalLabel">Create New Firm Location</h1>\n            </div>\n            <div class="modal-body">\n                <form>\n                    <div class=\'col-md-12\'>\n                        <div class="form-horizontal p-top-15">\n                            <h2 class=\'font-bold font-size-17 p-bottom-10\'> Required</h2>\n                            <div class="form-group">\n                                <label class=\'col-sm-3 p-top-5\'><i class="fa fa-asterisk c-red font-size-10"></i> Firm Name:</label>\n                                <div class="col-sm-9">\n                                    <input type="text" name="ufl_firm_name" rv-value="model:ufl_firm_name" class=\'form-control\' required/>\n                                    <input type=\'hidden\' name="ua_firm_location_id" rv-value="model:ua_firm_location_id"/>\n                                </div>\n                            </div>\n                            <div class="form-group">\n                                <label class=\'col-sm-3 p-top-5 p-right-2\'><i class="fa fa-asterisk c-red font-size-10"></i> EAMS/UAN Name:</label>\n                                <div class="col-sm-9">\n                                    <input type="text" name="EAMSname" rv-value="model:EAMSname" class=\'form-control\' required/>\n                                </div>\n                            </div>\n                            <div class="form-group">\n                                <label class=\'col-sm-3 p-top-5\'><i class="fa fa-asterisk c-red font-size-10"></i> EAMS/UAN #:</label>\n                                <div class="col-sm-9">\n                                    <input type="text" name="EAMSno" rv-value="model:EAMSno" class=\'form-control\' required/>\n                                </div>\n                            </div>\n                            <div class="form-group">\n                                <label class=\'col-sm-3 p-top-5\'><i class="fa fa-asterisk c-red font-size-10"></i> Office Phone:</label>\n                                <div class="col-sm-9">\n                                    <input type="text" name="officePhone" rv-value="model:officePhone" class=\'form-control\' required/>\n                                </div>\n                            </div>\n                            <div class="form-group">\n                                <label class=\'col-sm-3 p-top-5\'><i class="fa fa-asterisk c-red font-size-10"></i> Fax:</label>\n                                <div class="col-sm-9">\n                                    <input type="text" name="faxNumber" rv-value="model:faxNumber" class=\'form-control\' required/>\n                                </div>\n                            </div>\n                            <div class="form-group m-bottom-5">\n                                <h3 class="font-bold sub-header-forms-users p-bottom-10 col-sm-3 col-sm-offset-3">Mailing</h3>\n                            </div>\n                            <div class="form-group">\n                                <label class=\'col-sm-3 p-top-5\'><i class="fa fa-asterisk c-red font-size-10"></i> Address:</label>\n                                <div class="col-sm-9">\n                                    <input type="text" name="mailingAddress" rv-value="model:mailingAddress" class=\'form-control\' required/>\n                                </div>\n                            </div>\n                            <div class="form-group">\n                                <label class=\'col-sm-3 p-top-5\'><i class="fa fa-asterisk c-red font-size-10"></i> City:</label>\n                                <div class="col-sm-9">\n                                    <input type="text" name="mailingCity" rv-value="model:mailingCity" class=\'form-control\' required/>\n                                </div>\n                            </div>\n                            <div class="form-group">\n                                <label class=\'col-sm-3 p-top-5\'><i class="fa fa-asterisk c-red font-size-10"></i> State:</label>\n                                <div class="col-sm-9">\n                                    <select class=\'form-control state-helper\' rv-value="model:mailingState" name=\'mailingState\' required></select>\n                                </div>\n                            </div>\n                            <div class="form-group">\n                                <label class=\'col-sm-3 p-top-5\'><i class="fa fa-asterisk c-red font-size-10"></i> Zip:</label>\n                                <div class="col-sm-9">\n                                    <input type="text" name="mailingZip" rv-value="model:mailingZip" class=\'form-control\' required/>\n                                </div>\n                            </div>\n                            <hr>\n                            <h2 class=\'font-bold font-size-17 p-bottom-10\'> Optional</h2>\n                            <div class="form-group">\n                                <label class=\'col-sm-3 p-top-5\'>Toll Free Phone:</label>\n                                <div class="col-sm-9">\n                                    <input type="text" name="tollFreePhone" rv-value="model:tollFreePhone" class=\'form-control\'/>\n                                </div>\n                            </div>\n                            <div class="form-group">\n                                <label class=\'col-sm-3 p-top-5\'></i> Firm Notes:</label>\n                                <div class="col-sm-9">\n                                    <input type="text" name="firmNotes" rv-value="model:firmNotes" class=\'form-control\'/>\n                                </div>\n                            </div>\n                            <div class="form-group m-bottom-5">\n                                <h3 class="font-bold sub-header-forms-users p-bottom-10 col-sm-5 col-sm-offset-3">Physical\n                                    <a class="btn btn-info copy-button-size" id="copy-to-address-creation" href="javascript:void(0);"><i class="fa fa-files-o"></i> Copy Mailing Address</a>\n                                </h3>\n                            </div>\n                            <div class="form-group">\n                                <label class=\'col-sm-3 p-top-5\'>Address:</label>\n                                <div class="col-sm-9">\n                                    <input type="text" name="physicalAddress" rv-value="model:physicalAddress" class=\'form-control\'/>\n                                </div>\n                            </div>\n                            <div class="form-group">\n                                <label class=\'col-sm-3 p-top-5\'>City:</label>\n                                <div class="col-sm-9">\n                                    <input type="text" name="physicalCity" rv-value="model:physicalCity" class=\'form-control\'/>\n                                </div>\n                            </div>\n                            <div class="form-group">\n                                <label class=\'col-sm-3 p-top-5\'>State:</label>\n                                <div class="col-sm-9">\n                                    <select class=\'form-control state-helper\' rv-value="model:physicalState" name=\'physicalState\'></select>\n                                </div>\n                            </div>\n                            <div class="form-group">\n                                <label class=\'col-sm-3 p-top-5\'>Zip:</label>\n                                <div class="col-sm-9">\n                                    <input type="text" name="physicalZip" rv-value="model:physicalZip" class=\'form-control\'/>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </form>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n                <button type="button" class="btn btn-primary" id=\'save-create-company\'>Save changes</button>\n                <div class="col-md-12 t-align-c m-top-10 status"></div>\n            </div>\n        </div>\n    </div>\n';

},this.App.Templates.usersDaManager=function(a){{var b="";_.escape}return b+='<div class=\'p-10\' data-permission="6">\n    <div id=\'assign-da-manager-container\'></div>\n    <div>\n        <button rv-disabled="assignBtnBlocked < assignBtnBlocked" type="button" id="assignDaToManager" class="btn btn-success">Assign / UnAssign Employee</button>\n        <a rv-if="assignBtnBlocked < assignBtnBlocked" class="btn btn-default btn-undoAll" href="javascript:;" title="Undo any changes on primary managers before to save">\n            <i class="fa fa-undo"></i> Undo All\n        </a>\n    </div>\n    <div class="m-top-10">\n        <table id="list_employee_assigned" class="cf-table table table-striped table-hover">\n            <colgroup>\n                <col width="100">\n                <col width="500">\n                <col width="340">\n            </colgroup>\n            <thead>\n            <tr>\n                <th colspan="4">List of Employees Assigned</th>\n            </tr>\n            <tr>\n                <th width="120">Employee ID</th>\n                <th>Employee</th>\n                <th>Primary Manager</th>\n                <th>Action</th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr rv-each-model="collection.models">\n                <td>\n                    {model:id}\n                </td>\n                <td>\n                    {model:first} {model:last}\n                </td>\n                <td class="content-primary-manager">\n                    <span class="label font-size-12 label-primary" rv-if="model:primary_manager_id">{model:primary_manager}</span>\n                    <span class="label font-size-12 control-label label-default" rv-unless="model:primary_manager_id">No primary manager</span>\n                    <select name="selectPrimaryManager" class="form-control display-none"></select>\n                </td>\n                <td>\n                    <a title="Edit Primary Manager" href="javascript:void(0);" rv-data-daid="model:id" class="btn btn-default btn-editManager text-center">\n                        <i class="fa fa-edit"></i>\n                    </a>\n                    <div class="control-row display-none">\n                        <a title="Undo" href="javascript:void(0);" rv-data-daid="model:id" class="btn btn-default btn-undo btn-cancel text-center">\n                            <i class="fa fa-undo"></i>\n                        </a>\n                        <a title="Save Changes" href="javascript:void(0);" rv-data-daid="model:id" class="btn btn-primary btn-saveManager text-center">\n                            <i class="fa fa-save c-white"></i>\n                        </a>\n                    </div>\n\n\n                </td>\n            </tr>\n            <tr rv-unless="collection.length">\n                <td colspan="4" class="font-bold">NONE</td>\n            </tr>\n            </tbody>\n        </table>\n    </div>\n</div>\n\n<div class="custom-loader display-none">\n    <i class="fa font-size-12 font-bold fa-spinner fa-pulse fa-4x"></i>\n</div>'},this.App.Templates.usersEditUser=function(a){{var b="";_.escape,Array.prototype.join}return b+='<div id=\'assign-clients-container\' data-permission="6"></div>\n<div class=\'user-top-summary box-shadow b-grey-light\' data-permission="6">\n    <div class=\'container \'>\n        <div class=\'row b-grey-light\'>\n            <div class=\'col-md-6\'>\n                <div class=\'font-size-45 t-align-c c-green-casefriend font-style-oblique p-top-20\'>User Details</div>\n            </div>\n            <div class=\'col-md-6\'>\n                <div class="font-size-20">\n                    <span class=\'font-bold\'>Full Name:</span> {model:first} {model:middle} {model:last}\n                </div>\n                <div class="font-size-20">\n                    <span class=\'font-bold\'>User Id:</span> {model:id}\n                </div>\n                <div class="font-size-20">\n                    <span class=\'font-bold\'>Email:</span> {model:email}\n                </div>\n                <div class="font-size-20" rv-unless="model.isNew">\n                    <span class=\'font-bold\'>User Type:</span>\n                    <span>{model.getUserType < :getUserType}</span>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div class=\'container m-top-40\' data-permission="6">\n    <ul class="box-shadow nav nav-tabs" role="tablist">\n        <li role="presentation" class="active">\n            <a id=\'user-edit\' href="#panel-user-content" role="tab" data-toggle="tab" aria-controls="panel-user-content" aria-expanded="true">\n                <span>User</span>\n            </a>\n        </li>\n        ',this.model.isNew()||(b+='\n        <li role="presentation">\n            <a id=\'user-company\' href="#panel-user-company" role="tab" data-toggle="tab" aria-controls="panel-user-company" aria-expanded="false">\n                <span rv-if="model.isClientRep < :isClientRep">Client Companies</span>\n                <span rv-unless="model.isClientRep < :isClientRep">Firm Locations</span>\n            </a>\n        </li>\n\n        <li role="presentation" data-permission="15" rv-unless="model.isClientRep < :isClientRep">\n            <a id=\'user-timekeeper-classification\' href="#panel-timekeeper-classification" role="tab" data-toggle="tab" aria-expanded="false">\n                <span>Timekeeper</span>\n            </a>\n        </li>\n        <li role="presentation" rv-if="model.isManager < :manager">\n            <a id=\'user-daManager\' href="#panel-user-da-manager" role="tab" data-toggle="tab" aria-controls="panel-user-da-manager" aria-expanded="false">\n                <span>Assign Employee</span>\n            </a>\n        </li>\n        <li role="presentation" data-permission="7" rv-unless="model.isClientRep < :isClientRep">\n            <a id=\'user-access\' href="#panel-user-access" role="tab" data-toggle="tab" aria-controls="panel-user-access" aria-expanded="false">\n                <span>Access</span>\n            </a>\n        </li>\n        <li role="presentation" data-permission="15" rv-unless="model.isClientRep < :isClientRep">\n            <a id=\'user-signature\' href="#panel-user-signature" role="tab" data-toggle="tab" aria-controls="panel-user-signature" aria-expanded="false">\n                <span>Signature </span>\n            </a>\n        </li>\n        <li role="presentation" rv-if="model.isClientRep < :isClientRep">\n            <a id=\'user-adjuster-list\' href="#panel-user-adjuster-list" role="tab" data-toggle="tab" aria-controls="panel-user-adjuster-list" aria-expanded="false">\n                <span>Files</span>\n            </a>\n        </li>\n        <li role="presentation" rv-if="model.isClientManager < :is_client_manager">\n            <a id=\'user-adjuster-subordinates\' href="#panel-user-adjuster-subordinates" role="tab" data-toggle="tab" aria-controls="panel-user-adjuster-subordinates" aria-expanded="false">\n                <span>Assign Subordinates</span>\n            </a>\n        </li>\n        <li role="presentation" data-permission="15" rv-unless="model.isClientRep < :isClientRep">\n            <a id=\'user-reset-password\' href="#panel-user-reset-password" role="tab" data-toggle="tab" aria-controls="panel-user-reset-password" aria-expanded="false">\n                <span>Reset Password</span>\n            </a>\n        </li>\n        '),b+='\n    </ul>\n    <div class="tab-content box-shadow">\n        <div id=\'panel-user-content\' class=\'tab-pane active fade in\' role="tabpanel">\n            <form id=\'user-edit-form\'>\n                <div class="form-group">\n                    <input name=\'first\' type="hidden" rv-value="model:first" rv-if="model:UCL">\n                    <input name=\'middle\' type="hidden" rv-value="model:middle" rv-if="model:UCL">\n                    <input name=\'last\' type="hidden" rv-value="model:last" rv-if="model:UCL">\n                    <input name=\'email\' type="hidden" rv-value="model:email" rv-if="model:UCL">\n                </div>\n                <div class=\'col-md-8\'>\n                    <div class="form-horizontal p-top-15">\n                        <div class="form-group">\n                            <label class=\'col-sm-2 p-top-5\'>User Id:</label>\n\n                            <div class="col-sm-10">\n                                <div class="p-top-5">{model:id}</div>\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <label class=\'col-sm-2 p-top-5\'>User is Archived:</label>\n\n                            <div class="col-sm-10">\n                                <div class="p-top-5">{model.getFormattedArchived < :archived}</div>\n                            </div>\n                        </div>\n                        <HR>\n                        <h2 class=\'font-bold font-size-17 p-bottom-10\'> Required</h2>\n\n                        <div class="form-group">\n                            <label class=\'col-sm-2 p-top-5\'><i class="fa fa-asterisk c-red font-size-10"></i> First Name:</label>\n\n                            <div class="col-sm-10">\n                                <div class="p-top-5">{model:first}</div>\n                                <input class=\'form-control\' name=\'first\' type="text" rv-value="model:first" rv-unless="model:UCL" required>\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <label class=\'col-sm-2 p-top-5\'>Middle Name:</label>\n\n                            <div class="col-sm-10">\n                                <div class="p-top-5">{model:middle}</div>\n                                <input class=\'form-control\' name=\'middle\' type="text" rv-value="model:middle" placeholder="Middle name is optional" rv-unless="model:UCL">\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <label class=\'col-sm-2 p-top-5\'><i class="fa fa-asterisk c-red font-size-10"></i> Last Name:</label>\n\n                            <div class="col-sm-10">\n                                <div class="p-top-5">{model:last}</div>\n                                <input class=\'form-control\' name=\'last\' type="text" rv-value="model:last" rv-unless="model:UCL" required>\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <label class=\'col-sm-2 p-top-5\'><i class="fa fa-asterisk c-red font-size-10"></i> Email:</label>\n\n                            <div class="col-sm-10">\n                                <div class="p-top-5">{model:email}</div>\n                                <input class=\'form-control\' name=\'email\' type="email" rv-value="model:email" rv-unless="model:UCL" required maxlength="80" size="20">\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <label class=\'col-sm-2 p-top-5 p-right-2\'><i class="fa fa-asterisk c-red font-size-10"></i> Work Phone:</label>\n\n                            <div class="col-sm-10">\n                                <div class="p-top-5">{model:phone}</div>\n                                <input class=\'form-control\' name=\'phone\' type="text" rv-value="model:phone" rv-unless="model:UCL" required>\n                            </div>\n                        </div>\n\n                        <hr>\n                        <h2 class=\'font-bold font-size-17 p-bottom-10\'> Optional</h2>\n\n                        <div class="form-group">\n                            <label class=\'col-sm-2 p-top-5\'>Ext:</label>\n\n                            <div class="col-sm-10">\n                                <div class="p-top-5">{model:phoneExtension}</div>\n                                <input class=\'form-control\' name=\'phoneExtension\' type="text" rv-value="model:phoneExtension">\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <label class=\'col-sm-2 p-top-5\'>Cell:</label>\n\n                            <div class="col-sm-10">\n                                <div class="p-top-5">{model:cell}</div>\n                                <input class=\'form-control\' name=\'cell\' type="text" rv-value="model:cell">\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <label class=\'col-sm-2 p-top-5\'>Fax:</label>\n\n                            <div class="col-sm-10">\n                                <div class="p-top-5">{model:fax}</div>\n                                <input class=\'form-control\' name=\'fax\' type="text" rv-value="model:fax">\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <label class=\'col-sm-2 p-top-5\'>Address 1:</label>\n\n                            <div class="col-sm-10">\n                                <div class="p-top-5">{model:address1}</div>\n                                <input class=\'form-control\' name=\'address1\' type="text" rv-value="model:address1">\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <label class=\'col-sm-2 p-top-5\'>Address 2:</label>\n\n                            <div class="col-sm-10">\n                                <div class="p-top-5">{model:address2}</div>\n                                <input class=\'form-control\' name=\'address2\' type="text" rv-value="model:address2">\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <label class=\'col-sm-2 p-top-5\'>Country:</label>\n\n                            <div class="col-sm-10">\n                                <div class="p-top-5">{model:country}</div>\n                                <input class=\'form-control\' name=\'country\' type="text" rv-value="model:country">\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <label class=\'col-sm-2 p-top-5\'>City:</label>\n\n                            <div class="col-sm-10">\n                                <div class="p-top-5">{model:city}</div>\n                                <input class=\'form-control\' name=\'city\' type="text" rv-value="model:city">\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <label class=\'col-sm-2 p-top-5\'>State:</label>\n\n                            <div class="col-sm-10">\n                                <div class="p-top-5">{model:stateName}</div>\n                                <select class=\'form-control state-helper\' rv-value="model:state" name=\'state\'></select>\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <label class=\'col-sm-2 p-top-5\'>Zip:</label>\n\n                            <div class="col-sm-10">\n                                <div class="p-top-5">{model:zip}</div>\n                                <input class=\'form-control\' name=\'zip\' type="text" rv-value="model:zip" zipcodeUS="true">\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <label class=\'col-sm-2 p-top-5\'>Employee:</label>\n                            <div class="col-sm-1" id="user-type-employee">\n                                <input class=\'form-control\' name=\'userType\' type="radio">\n                            </div>\n                            <div class="col-sm-3 display-inline-flex">\n                                <div class="p-top-5">{model.getFormattedIsEmployee < :getUserType}</div>\n                                <i class="fa fa-pencil btn p-top-5" id="edit-employee"></i>\n                            </div>\n\n                            <div id="is-manager" rv-unless="model.isClientRep < :isClientRep">\n                                <label class=\'col-sm-2 p-top-5\'>Is Manager:</label>\n\n                                <div class="col-sm-1">\n                                    <div class="p-top-5">{model.getFormattedManager < :manager}</div>\n                                </div>\n                            </div>\n\n                            <div id="isClientManagerLabel" rv-if="model.isClientRep < :isClientRep">\n                                <label class=\'col-sm-3 p-top-5\'>Is Client Manager:</label>\n                                <div class="col-sm-1">\n                                    <div class="p-top-5" id="isClientManagerLabelValue">{model.getFormattedClientManager < :is_client_manager}</div>\n                                </div>\n                            </div>\n\n\n                        </div>\n                        <div class="form-group" id="employee-type">\n                            <div class="employee-type-head">Select Employee Type</div>\n                            <div class="panel panel-default">\n                                <div class="panel-body">\n                                    <!-- DA -->\n                                    <label class=\'col-sm-2\'>Defense Attorney:</label>\n\n                                    <div class="col-sm-1">\n                                        <input class=\'form-control\' name=\'employeeR\' type="radio" value="isDA" id="employee-da">\n                                    </div>\n                                    <!-- Hearing Rep -->\n                                    <label class=\'col-sm-2 p-top-10\'>Hearing Rep:</label>\n\n                                    <div class="col-sm-1">\n                                        <input class=\'form-control\' name=\'employeeR\' type="radio" value="isHearingRep" id="employee-hr">\n                                    </div>\n\n                                    <!-- Regular Employee -->\n                                    <label class=\'col-sm-2\'>Regular Employee:</label>\n\n                                    <div class="col-sm-1">\n                                        <input class=\'form-control\' name=\'employeeR\' type="radio" id="regular-employee">\n                                    </div>\n                                    <div class="col-sm-3 display-inline-flex manager-separator">\n                                        <label class=\'display-inline-block-i p-top-10\'>Manager: </label>\n\n                                        <input class=\'form-control width-50-p\' id=\'DAManagerCheck\' name=\'DAManager\' type="checkbox" value="manager" rv-checked="model.isManager < :manager">\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <label class=\'col-sm-2 p-top-5\'>Client Rep:</label>\n\n                            <div class="col-sm-1">\n                                <div class="p-top-5">{model.getFormattedIsClientRep < :isClientRep}</div>\n                                <input class=\'form-control\' name=\'userType\' type="radio" value="isClientRep">\n                            </div>\n                            <div class="col-sm-3">\n                                <button type="button" id="assign-clients" class="btn btn-success m-left-30 assign-clients"><span class="glyphicon glyphicon-plus p-right-10"></span>Add Clients</button>\n                            </div>\n                            <div id="is-client-manager">\n                                <div class="col-sm-6 display-inline-flex">\n                                    <label class="display-inline-block-i p-top-10 p-right-10" style="display: none;">Client Manager: </label>\n\n                                    <input class="form-control width-50-p" id="client-manager-check" name="is_client_manager" type="checkbox" style="display: block;">\n                                </div>\n                            </div>\n                        </div>\n                        <div class="form-group assign-clients-list" id="assign-clients-list">\n                            <div class="employee-type-head">List of Clients</div>\n                            <div class="panel panel-default">\n                                <div class="panel-body">\n                                    <div rv-each-model="companiesCollection.models">\n                                        <form rv-company-id=\'model:clientID\'>\n                                            <div class=\'col-md-12\'>\n                                                <i class="fa fa-circle fa-2"></i>\n                                                <span class=\'p-10\'>\n                                                        {model:clientName}, City: {model:mailingCity}, Address: {model:mailingAddress}\n                                                        <span rv-if="model:isPrimaryLocation"><i class="fa fa-check-circle"></i> <em class="c-red">Primary Company</em></span>\n                                                    </span>\n                                            </div>\n                                        </form>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class=\'col-md-4\'>\n                    <div data-permission="6">\n                        <button rv-if="model:id" id=\'edit-user\' class="m-10 btn btn-warning btn-lg">Edit</button>\n                    </div>\n                    <div data-permission="11">\n                        <button rv-unless="model:id" id=\'edit-user\' class="m-10 btn btn-warning btn-lg">Create</button>\n                    </div>\n                    <div data-permission="6">\n                        <button id=\'save-user\' class="m-10 display-none btn btn-danger btn-lg">Save</button>\n                    </div>\n                    <div>\n                        <button id=\'cancel-user\' class="m-10 display-none btn btn-default btn-lg">Cancel</button>\n                    </div>\n                    <div data-permission="16" rv-unless="model:archived < :archived">\n                        <button rv-if="model:id" id=\'archive-user\' data-action="archive" class="m-10 btn btn-info btn-lg">Archive</button>\n                    </div>\n                    <div data-permission="16" rv-if="model:archived < :archived">\n                        <button rv-if="model:id" id=\'unarchive-user\' data-action="unarchive" class="m-10 btn btn-success btn-lg">Unarchive</button>\n                    </div>\n                    <div data-permission="16" rv-hide="model.isClientRep < :isClientRep">\n                        <button rv-if="model:id" rv-hide="model.isActivated < :activated" id=\'activate-user\' class="m-10 btn btn-success btn-lg">Activate</button>\n                    </div>\n                </div>\n            </form>\n        </div>\n        <div role="tabpanel" class="tab-pane fade" id="panel-user-company"></div>\n        <div role="tabpanel" class="tab-pane fade" id="panel-user-da-manager"></div>\n        <div role="tabpanel" class="tab-pane fade" id="panel-user-access"></div>\n        <div role="tabpanel" class="tab-pane fade" id="panel-user-signature"></div>\n        <div role="tabpanel" class="tab-pane fade" id="panel-user-adjuster-list"></div>\n        <div role="tabpanel" class="tab-pane fade" id="panel-user-adjuster-subordinates"></div>\n        <div role="tabpanel" class="tab-pane fade" id="panel-user-reset-password"></div>\n        <div role="tabpanel" class="tab-pane fade" id="panel-timekeeper-classification"></div>\n    </div>\n</div>\n'},this.App.Templates.usersPasswordInstructions=function(a){{var b="";_.escape}return b+='<p>Password must contain:</p>\n<ul class="list-unstyled">\n    <li><span class="fa fa-check"></span> 6 - 25 characters long</li>\n    <li><span class="fa fa-check"></span> Numbers from 0 - 9</li>\n    <li><span class="fa fa-check"></span> One capital letter</li>\n</ul>\n'},this.App.Templates.usersResetPassword=function(a){{var b="";_.escape}return b+='<div class="row">\n    <div class="col-md-4 col-md-offset-4">\n        <form id="reset-user-password" novalidate>\n            <input type="hidden" name="email" rv-value="model:email">\n            <div class="form-group">\n                <label for="new_password">New Password</label>\n                <div class="input-group">\n                    <input type="password" class="form-control" name="password" rv-value="model:new_password"\n                           id="password" size="30" aria-describedby="password-guide" tabindex="1" required>\n                    <a tabindex="0" class="input-group-addon cursor-pointer" id="password-guide"\n                       title="Password instructions" role="button" data-toggle="popover" data-container="body"\n                       data-html="true" data-trigger="focus">?</a>\n                    <div aria-describedby="#password"></div>\n                </div>\n            </div>\n            <div class="form-group">\n                <label for="password_confirmation">Confirm Password</label>\n                <input type="password" class="form-control" name="password_confirmation"\n                       rv-value="model:confirm_new_password" id="password_confirmation" size="30" tabindex="2" required>\n            </div>\n            <div class="form-group">\n                <button type="submit" class="btn btn-lg btn-info" id="reset-user-password-submit" tabindex="3">Reset Password</button>\n            </div>\n        </form>\n    </div>\n</div>\n'},this.App.Templates.usersSignature=function(a){{var b="";_.escape}return b+='<div class="row" data-permission="15">\n    <div class="col-md-9">\n        <div class="fs-medium ">\n            <div class="p-bottom-10">Current signature in file: <span id="none">None</span></div>\n            <div id="signature-img"></div>\n            <a class="m-top-10 display-block btn-delete-signature hidden" href="javascript:void(0);"><i class="fa fa-trash-o"></i> Delete signature</a>\n        </div>\n    </div>\n    <div class="col-md-3">\n        <form class="form-horizontal form-upload" method="POST" enctype="multipart/form-data">\n            <div class="row fileupload-buttonbar">\n                <div class="col-lg-8">\n                    <!-- The fileinput-button span is used to style the file input field as button -->\n                    <span class="btn btn-success fileinput-button">\n                        <i class="glyphicon glyphicon-plus"></i>\n                        <span>Select Signature</span>\n                        <input type="file" name="files[]" multiple="">\n                    </span>\n                    <!-- The global file processing state -->\n                    <span class="fileupload-process"></span>\n                </div>\n                <!-- The global progress state -->\n                <div class="col-lg-4 fileupload-progress fade">\n                    <!-- The global progress bar -->\n                    <div class="progress progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100">\n                        <div class="progress-bar progress-bar-success" style="width:0%;"></div>\n                    </div>\n                    <!-- The extended global progress state -->\n                    <div class="progress-extended">&nbsp;</div>\n                </div>\n            </div>\n            <div class="documents">\n            </div>\n        </form>\n    </div>\n</div>\n'},this.App.Templates.usersSubmenu=function(a){{var b="";_.escape}return b+="<div class=\"container\" data-permission=\"3\">\n    <div class=\"row\">\n        <div class='user-block p-relative col-md-4 p-top-30'>\n            <div class=\"divider-right\"></div>\n            <div>first: <span>{model:first}</span></div>\n            <div>last: <span>{model:last}</span></div>\n            <div>email: <span>{model:email}</span></div>\n        </div>\n        <div class='p-relative user-block col-md-4 '>\n            <div class=\"divider-right\"></div>\n            <div class='icons-container'>\n                <img class=\"m-top-40 img-rounded\" src=\"/images/user_add.png\" alt=\"User Add\">\n                <img class=\"m-top-40 m-left-10 img-rounded\" src=\"/images/user_edit.png\" alt=\"User Edit\">\n                <img class=\"m-top-40 m-left-10 img-rounded\" src=\"/images/user_archive.png\" alt=\"User Archive\">\n            </div>\n        </div>\n        <div class=' user-collection user-block col-md-4 p-top-30 p-left-40'>\n            <table>\n                <tbody>\n                <tr>\n                    <td class='t-align-right'>total users:</td>\n                    <td class='p-left-30 c-green-lime'>{collection.length}</td>\n                </tr>\n                <tr>\n                    <td class='t-align-right'>users:</td>\n                    <td class='p-left-30 c-blue-light'>xx</td>\n                </tr>\n                <tr>\n                    <td class='t-align-right'>attorneys:</td>\n                    <td class='p-left-30 c-blue-light'>xx</td>\n                </tr>\n                <tr>\n                    <td class='t-align-right'>clients:</td>\n                    <td class='p-left-30 c-blue-light'>xx</td>\n                </tr>\n                <tr>\n                    <td class='t-align-right'>employers:</td>\n                    <td class='p-left-30 c-blue-light'>xx</td>\n                </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>"},this.App.Templates.usersTimekeeperClassification=function(a){{var b="";_.escape}return b+='<div class="row">\n    <div class="col-sm-6">\n        <div class="form-group">\n            <label class="font-size-15 control-label" for="LEEDStimekeeperID">LEEDS Timekeeper ID</label>\n            <div class="row">\n                <div class="col-md-5">\n                    <input type="text" class="form-control" maxlength="3" id="LEEDStimekeeperID" rv-value="model:tk_info.LEEDStimekeeperID">\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="col-sm-6">\n        <div class="form-group">\n            <label class="font-size-15 control-label" for="litAdvisorTimekeeperID">Lit Advisor Timekeeper ID</label>\n            <div class="row">\n                <div class="col-md-5">\n                    <input type="text" class="form-control" maxlength="3" id="litAdvisorTimekeeperID" rv-value="model:tk_info.litAdvisorTimekeeperID">\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div class="row">\n    <div class="col-sm-6">\n        <div class="form-group">\n            <label class="font-size-15 control-label">Client:</label>\n            <div class="row">\n                <div class="col-sm-12">\n                    <input type="text" class="typeahead form-control search-files client_typeahead" name="clientName" rv-value="options.fileModel:clientNameTypeahead" required>\n                    <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="clientName"><i class="fa fa-chevron-down"></i></a>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="col-sm-6">\n        <div class="form-group" rv-if="classificationCol.length">\n            <label class="font-size-15 control-label">Add Classification:</label>\n            <div class="row">\n                <div class="col-sm-12">\n                    <select class="form-control" name="classification" required>\n                        <option>Select a value</option>\n                        <option rv-each-row="classificationCol.models" rv-value="row:classification" rv-data-classification-description="row:classificationDescription" rv-data-client-id="row:clientID" rv-data-client-name="row:clientName">\n                            {row:classification}\n                        </option>\n                    </select>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div class="row" rv-if="userClassificationCol.length">\n    <div class="col-sm-12">\n        <table class="table bgc-white table-hover p-20">\n            <tr class="font-size-16 font-bold b-grey c-white" style="pointer-events:none;">\n                <th>Classification</th>\n                <th>Client</th>\n                <th>Delete</th>\n            </tr>\n            <tr rv-each-row="userClassificationCol.models">\n                <td>{row:classification}</td>\n                <td>{row:clientName}</td>\n                <td class=\'deleteClassification cursor-pointer\' rv-data-classification="row:classification" rv-data-client-id="row:clientID"><i class="fa fa-times" aria-hidden="true"></i></td>\n            </tr>\n        </table>\n    </div>\n</div>\n<div class="row">\n    <div class=\'col-sm-4\'>\n        <button id=\'save-classifications\' class="btn btn-success col-sm-2 btn-lg">Save</button>\n    </div>\n\n</div>\n';

},this.App.Templates.usersUsers=function(a){{var b="";_.escape}return b+='<div class="container" data-permission="3">\n    <div class="m-top-15 m-bottom-15 m-left-10">\n        <div class=\'row p-bottom-10 height-75\'>\n            <div class=\'col-md-2\'>\n                <button data-permission="11" id=\'add-new\' class=\'add-new btn btn-lg\'>\n                    <span class=\'glyphicon glyphicon-plus\'></span>\n                    <span>New User</span>\n                </button>\n            </div>\n            <div class=\'col-md-6\' id=\'typeahead\'>\n                <input class="typeahead user_typeahead form-control" type="text" name="user" value="">\n                <a href="javascript:void(0);" class="icon-typeahead-down" data-input-name="user"><i class="fa fa-chevron-down"></i></a>\n            </div>\n            <div class=\'col-md-2 col-md-offset-2 p-top-10 t-align-r font-size-17\'>\n                <div rv-if="collection.length"><span class=\'font-bold\'>Total Users:</span><span> {collection.length}</span></div>\n                <div rv-unless="collection.length"><span class=\'font-bold\'>Total Users:</span><span> ...</span></div>\n            </div>\n        </div>\n        <div class="row box-shadow">\n            <table class="table table-hover m-bottom-0">\n                <thead class=\'b-blue-new-casefriend c-white font-size-17\'>\n                <tr>\n                    <th class=\'user-sortBy cursor-pointer\' data-sortBy=\'first\'>First</th>\n                    <th class=\'user-sortBy cursor-pointer\' data-sortBy=\'last\'>Last</th>\n                    <th class=\'user-sortBy cursor-pointer\' data-sortBy=\'email\'>Email</th>\n                    <th class=\'cursor-pointer t-align-c\' data-permission="104">Archived</th>\n                </tr>\n                </thead>\n                <tbody class=\'b-grey-light\'>\n                <tr rv-each-model="collection.models">\n                    <td rv-data-id="model:user_id" class=\'user-id cursor-pointer c-blue-link\'>{model:first}</td>\n                    <td rv-data-id="model:user_id" class=\'user-id cursor-pointer\'>{model:last}</td>\n                    <td rv-data-id="model:user_id" class=\'user-id cursor-pointer\'>{model:email}</td>\n                    <td rv-data-id="model:user_id" class="user-id cursor-pointer t-align-c" data-permission="104"><span class="fa" rv-class-fa-check="model:archived"></span></td>\n                </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>\n'},this.App.Templates.viewerPreviewForm=function(a){{var b="";_.escape}return b+='<div class="viewer-header">\n    <a class="pull-right c-white"><i class="fa fa-times-circle-o" aria-hidden="true"></i></a>\n</div>\n<div class="viewer-underlay"></div>\n<div class="viewer-frame">\n    <div class="viewer-frame-preview-wrapper">\n        <div class="viewer-frame-preview">\n            <iframe class="viewer-frame-preview-iframe" src=""></iframe>\n        </div>\n    </div>\n</div>\n<div class="viewer-overlay"></div>'},App.Models.Access=App.Helpers.Model.extend({url:function(){return"/api/access_controller/edit_privileges"}}),App.Models.AddressMaster=App.Helpers.Model.extend({idAttribute:"addressMasterID",defaults:{typeCategory:"others",oldAddress:0,doNotUse:0,primaryLocation:1},url:function(){return this.isNew()?"/api/address_master_controller/get_addresses":"/api/address_master_controller/get_addresses/"+this.get("addressMasterID")}}),App.Models.AddressSet=App.Helpers.Model.extend({idAttribute:"addressSetID",url:"/api/address_sets_controller/get_sets"}),App.Models.Alert=App.Helpers.Model.extend({idAttribute:"alert_id",url:function(){return this.isNew()?"/api/alerts_controller/alert":"/api/alerts_controller/alert/"+this.get("alert_id")}}),App.Models.AvailableModule=App.Helpers.Model.extend({idAttribute:"moduleID",sync:function(a,b,c){return c=c||{},"read"===a.toLowerCase()?c.url="/api/admin_app/module_controller_master/get_module_by_firm/"+this.id:("create"===a.toLowerCase()||"update"===a.toLowerCase()||"delete"===a.toLowerCase())&&(c.url=null),Backbone.sync.apply(this,arguments)}}),App.Models.Billing=App.Helpers.Model.extend({idAttribute:"billingID",url:function(){return this.isNew()?"/api/billing_controller/billing/":"/api/billing_controller/billing/"+this.get("billingID")},getUrl:function(){return"/api/billing_controller/billing/"+this.get("billingID")}}),App.Models.BodyPart=App.Helpers.Model.extend({idAttribute:"bodyPartID",sync:function(a,b,c){return"delete"===a.toLowerCase()?c.url="/api/body_parts_controller/remove_body_part/"+this.get("bodyPartID"):c.url="/api/body_parts_controller/create_or_edit",Backbone.sync.apply(this,arguments)},defaults:{bpAdmitted:0,documents:[]}}),App.Models.CalendarEvent=App.Helpers.Model.extend({idAttribute:"alert_id",url:function(){return this.isNew()?"/api/calendar_controller/alert":"/api/calendar_controller/alert/"+this.get("alert_id")}}),App.Models.Case=App.Helpers.Model.extend({idAttribute:"caseID",sync:function(a,b,c){return c=c||{},"read"===a.toLowerCase()?c.url="/api/wc_cases_controller/get_case/"+this.get("caseID"):("create"===a.toLowerCase()||"update"===a.toLowerCase())&&(c.url="/api/wc_cases_controller/create_or_edit"),Backbone.sync.apply(this,arguments)},defaults:{leadCase:0},leyendAdjProgress:[{label:"",className:"adjPgWhite"},{label:"In Progress",className:"adjPgYellow"},{label:"Complete",className:"adjPgGreen"}],getDOIandEndCT:function(){var a=[],b=this.get("DOI"),c=this.get("DOIendCT");return b&&a.push(b),c&&a.push(c+" CT"),a.join(", ")},getClassNameBySetUp:function(){return this._getClassNameByAdjProgress(this.get("adjPgSetUp"))},getClassNameByDiscovery:function(){return this._getClassNameByAdjProgress(this.get("adjPgDiscovery"))},getClassNameByTreatment:function(){return this._getClassNameByAdjProgress(this.get("adjPgTreatment"))},getClassNameByHearingTrial:function(){return this._getClassNameByAdjProgress(this.get("adjPgHearingsTrial"))},getClassNameByWCClosed:function(){return this._getClassNameByAdjProgress(this.get("adjPgWCClosed"))},getClassNameByLiens:function(){return this._getClassNameByAdjProgress(this.get("adjPgLiens"))},getClassNameByFileClosed:function(){return this._getClassNameByAdjProgress(this.get("adjPgFileClosed"))},_getClassNameByAdjProgress:function(a){var b=_.findWhere(this.leyendAdjProgress,{label:a||""});return b.className}}),App.Models.ChangePassword=App.Helpers.Model.extend({defaults:{email:"",new_password:"",confirm_new_password:""},url:"api/authentication_controller_master/reset_password"}),App.Models.Client=App.Helpers.Model.extend({idAttribute:"clientID",url:function(){return this.isNew()?"/api/clients_controller/client/":"/api/clients_controller/client/"+this.get("clientID")},defaults:{invoice_description:"For Services Rendered"}}),App.Models.ClientGroup=App.Helpers.Model.extend({idAttribute:"clientGroupsID",url:function(){return this.isNew()?"/api/clients_controller/client_group/":"/api/clients_controller/client_group/"+this.get("clientGroupsID")}}),App.Models.ClientRep=App.Helpers.Model.extend({defaults:{isClientRep:1},fullClientRep:function(){return this.get("first")&&this.get("last")?""!==this.get("middle")?this.get("last")+", "+this.get("first")+" "+this.get("middle"):this.get("last")+", "+this.get("first"):""},sync:function(a,b,c){c=c||{};var d=this.get(this.has("fileNumber")?"fileNumber":"subroFileNumber");return"read"===a.toLowerCase()?c.url="/api/user_controller/get_clientRep/"+this.id+"/"+d:"create"===a.toLowerCase()?c.url="/api/user_controller/user":"update"===a.toLowerCase()&&(c.url="/api/user_controller/user/"+this.id),Backbone.sync.apply(this,arguments)}}),App.Models.ClientRepClient=App.Helpers.Model.extend({url:function(){return"/api/clients_controller/add_client_rep_to_client"}}),App.Models.ClientRepMasterUser=App.Helpers.Model.extend({getFormattedArchived:function(){return this.isNew()?"":1===this.get("archived")?"Yes":"No"},getFormattedIsClientRep:function(){return this.isNew()?"":1===this.get("isClientRep")?"Yes":"No"},url:function(){return!_.isUndefined(this.get("changePassword"))&&this.get("changePassword")?"/api/authentication_controller_master/change_master_password":"/api/authentication_controller_master/editClientRepInfo"},fullName:function(){return this.get("first")&&this.get("last")?""!==this.get("middle")?this.get("first")+" "+this.get("middle")+" "+this.get("last"):this.get("first")+" "+this.get("last"):""},isClienRep:function(){return 1===this.get("isClientRep")},isActivated:function(){return 1===this.get("activated")}}),App.Models.ClientRepToClient=App.Helpers.Model.extend({url:function(){return"/api/user_controller/client_rep_to_manager"}}),App.Models.ClientType=App.Helpers.Model.extend({idAttribute:"clientTypeID"}),App.Models.CoDefendant=App.Helpers.Model.extend({idAttribute:"codefendantID",urlRoot:function(){return"/api/codefendants_controller/create_or_edit"}}),App.Models.Company=App.Helpers.Model.extend({url:function(){return _.isUndefined(this.get("companyID"))?"/api/companies_controller/create_or_edit_company":"/api/companies_controller/create_or_edit_company/"+this.get("companyID")},defaults:{primaryCompany:0},isPrimaryCompany:function(){return 1===this.get("primaryCompany")}}),App.Models.CurrentBilling=App.Helpers.Model.extend({idAttribute:"fileNumber",totalBillFormated:function(){return"$"+this.get("billingTotal").toFixed(2)}}),App.Models.Defendant=App.Helpers.Model.extend({idAttribute:"defendantID",urlRoot:function(){return"/api/defendants_controller/create_or_edit"}}),App.Models.DefenseAttorney=App.Helpers.Model.extend({idAttribute:"uAttId",isPrimaryDA:function(){return 1===this.get("primaryDA")},fullName:function(){return this.get("first")&&this.get("last")?""!==this.get("middle")?this.get("first")+" "+this.get("middle")+" "+this.get("last"):this.get("first")+" "+this.get("last"):""}}),App.Models.DoctorFacilities=App.Helpers.Model.extend({idAttribute:"facilityID",sync:function(a,b,c){return c=c||{},"read"!==a.toLowerCase()||_.isUndefined(this.get("doctorID"))?"read"===a.toLowerCase()?c.url="/api/Doctor_facilities_controller/get_doctor_facility/"+this.get("facilityID"):("create"===a.toLowerCase()||"update"===a.toLowerCase())&&(c.url="/api/Doctor_facilities_controller/create_or_edit"):c.url="/api/Doctor_facilities_controller/get_facility_by_doctor/"+this.get("doctorID"),Backbone.sync.apply(this,arguments)}}),App.Models.DoctorSubspecialty=App.Helpers.Model.extend({idAttribute:"subSpecialtyID",sync:function(a,b,c){return c=c||{},"read"===a.toLowerCase()?c.url="/api/doctor_subspecialty_controller/get_doctor_subspecialty/"+this.get("subSpecialtyID"):("create"===a.toLowerCase()||"update"===a.toLowerCase())&&(c.url="/api/doctor_subspecialty_controller/create_or_edit"),Backbone.sync.apply(this,arguments)}}),App.Models.Doctors=App.Helpers.Model.extend({idAttribute:"doctorID",sync:function(a,b,c){return c=c||{},"read"===a.toLowerCase()?c.url="/api/doctors_controller/get_doctor/"+this.get("doctorID"):("create"===a.toLowerCase()||"update"===a.toLowerCase())&&(c.url="/api/doctors_controller/create_or_edit"),Backbone.sync.apply(this,arguments)}}),App.Models.Document=App.Helpers.Model.extend({idAttribute:"documentID",defaults:{removed:0},url:function(){return this.isNew()?void 0:"/api/documents_controller/edit_document/"+this.get("documentID")},getDocumentTitleOrNone:function(){return _.isEmpty(this.get("documentTitle"))?"No title":this.get("documentTitle")},_getUrl:function(a){return a=a||"documents_controller","/api/"+a+"/get_document/"+this.get("documentID")+"/"+App.Helpers.replaceSpecialCharaters(this.get("documentName"))},getUrl:function(){return this._getUrl()},getUrlClientRepFile:function(){var a=$.param({fileNumber:this.get("fileNumber"),firm_id:this.get("firm_id")});return this._getUrl("client_rep_files_controller_master")+"?"+a},getFlags:function(){var a={communicationLetter:"Letter",communicationEmail:"Email",communicationInjuryAccepted:"Injury Accepted",communicationInjuryDenied:"Injury Denied",communicationInjuryDelayed:"Injury Delayed",communicationClaimNotice:"Claim Notice",communicationAALetter:"AA Leter",communicationEDDLetter:"EDD Letter",communicationCoDefLetter:"Co-Def letter",communicationObjection:"Objection",communicationStatusReport:"Status Report",communicationDemand:"Demand",communicationOffer:"Offer",hearingROA:"ROA",hearingMOH:"MOH",hearingCnR:"C&R",hearingStip:"Stip",hearingTakeNothing:"Take Nothing",hearingDismissal:"Dismissal",hearingNOH:"NOH",hearingPTCS5pager:"PTCS (5 pager)",hearingDOR:"DOR",hearingAnswer:"Answer",hearingApplication:"Application",hearingPetition:"Petition",hearingRecon:"Recon",hearingExhibit:"Exhibit",hearingLC:"LC",hearingMSC:"MSC",hearingSC:"SC",hearingEH:"EH",hearingPC:"PC",hearingLienTrial:"Lien Trial",hearingRatingMSC:"Rating MSC",depoTranscript:"Transcript",depoNotice:"Depo Notice",depoSummary:"Depo Summary",depoCondTranscript:"Cond Transcript",depoContinued:"Continued",depoReport:"Depo Report",medicalIndex:"Medical",medicalPDMMIReport:"PD MMI report",medicalTDReport:"TD report",medicalPnS:"P&S report",medicalPR2:"PR2",medicalRating:"Rating",medicalRadiology:"Radiology",medicalAppointment:"Appointment",subpoenaOrder:"Sub-Order",subpoenaReceive:"Sub-Receive",subpoenaNoRecords:"Sub-No Records",subpoenaSummary:"Sub-Records",lienDemand:"Lien Demand",lienOffer:"Lien Offer",lienSettle:"Lien Settle",lienStip:"Lien Stip",lienStatusReport:"Lien Status Report",lienAuthority:"Lien Authority",lienBill:"Lien Bill",lienOMFS:"Lien OMFS",lienObjection:"Lien Objection",civilPleadingAnswer:"Answer",civilPleadingPetition:"Petition",civilPleadingComplaint:"Complaint",civilPleadingCrossComplaint:"Cross Complaint",civilPleadingIntervention:"Intervention",civilPleadingSubrogation:"Subrogation",civilDiscoveryInterrogatories:"Interrogatories",civilDiscoveryRFAdim:"RFAdim",civilDiscoveryROPOD:"ROPOD",uncategorizedOther:"Uncategorized"},b=[],c=this;return _.each(a,function(a,d){1===c.get(d)&&b.push(a)}),b.join(", ")}}),App.Models.Document2=App.Helpers.Model.extend({idAttribute:"documentID",defaults:{removed:0},url:function(){return this.isNew()?void 0:"/api/documents_controller/edit_document/"+this.get("documentID")},getDocumentTitleOrNone:function(){return _.isEmpty(this.get("documentTitle"))?"No title":this.get("documentTitle")},_getUrl:function(a){return a=a||"documents_controller","/api/"+a+"/get_document/"+this.get("documentID")+"/"+App.Helpers.replaceSpecialCharaters(this.get("documentName"))},getUrl:function(){return this._getUrl()},getUrlClientRepFile:function(){var a=$.param({fileNumber:this.get("fileNumber"),firm_id:this.get("firm_id")});return this._getUrl("client_rep_files_controller_master")+"?"+a},getFlags:function(){var a={communicationLetter:"Letter",communicationEmail:"Email",communicationInjuryAccepted:"Injury Accepted",communicationInjuryDenied:"Injury Denied",communicationInjuryDelayed:"Injury Delayed",communicationClaimNotice:"Claim Notice",communicationAALetter:"AA Leter",communicationEDDLetter:"EDD Letter",communicationCoDefLetter:"Co-Def letter",communicationObjection:"Objection",communicationStatusReport:"Status Report",communicationDemand:"Demand",communicationOffer:"Offer",hearingROA:"ROA",hearingMOH:"MOH",hearingCnR:"C&R",hearingStip:"Stip",hearingTakeNothing:"Take Nothing",hearingDismissal:"Dismissal",hearingNOH:"NOH",hearingPTCS5pager:"PTCS (5 pager)",hearingDOR:"DOR",hearingAnswer:"Answer",hearingApplication:"Application",hearingPetition:"Petition",hearingRecon:"Recon",hearingExhibit:"Exhibit",hearingLC:"LC",hearingMSC:"MSC",hearingSC:"SC",hearingEH:"EH",hearingPC:"PC",hearingLienTrial:"Lien Trial",hearingRatingMSC:"Rating MSC",depoTranscript:"Transcript",depoNotice:"Depo Notice",depoSummary:"Depo Summary",depoCondTranscript:"Cond Transcript",depoContinued:"Continued",depoReport:"Depo Report",medicalIndex:"Medical",medicalPDMMIReport:"PD MMI report",medicalTDReport:"TD report",medicalPnS:"P&S report",medicalPR2:"PR2",medicalRating:"Rating",medicalRadiology:"Radiology",medicalAppointment:"Appointment",subpoenaOrder:"Sub-Order",subpoenaReceive:"Sub-Receive",subpoenaNoRecords:"Sub-No Records",subpoenaSummary:"Sub-Records",lienDemand:"Lien Demand",lienOffer:"Lien Offer",lienSettle:"Lien Settle",lienStip:"Lien Stip",lienStatusReport:"Lien Status Report",lienAuthority:"Lien Authority",lienBill:"Lien Bill",lienOMFS:"Lien OMFS",lienObjection:"Lien Objection",civilPleadingAnswer:"Answer",civilPleadingPetition:"Petition",civilPleadingComplaint:"Complaint",civilPleadingCrossComplaint:"Cross Complaint",civilPleadingIntervention:"Intervention",civilPleadingSubrogation:"Subrogation",civilDiscoveryInterrogatories:"Interrogatories",civilDiscoveryRFAdim:"RFAdim",civilDiscoveryROPOD:"ROPOD",uncategorizedOther:"Uncategorized"},b=[],c=this;return _.each(a,function(a,d){1===c.get(d)&&b.push(a)}),b.join(", ")}}),App.Models.EditHelp=App.Helpers.Model.extend({idAttribute:"helpID",url:function(){return"api/help_edit_controller/get_help/"+this.id}}),App.Models.employeeToFirmLocation=App.Helpers.Model.extend({url:function(){return"/api/u_firm_location_controller/add_employee_to_firm_location"}}),App.Models.Event=App.Helpers.Model.extend({idAttribute:"eventID",defaults:{eventTypeParams:{changed:!1}},sync:function(a,b,c){return c=c||{},"read"===a.toLowerCase()?c.url="/api/file_events_controller/event/"+this.get("eventID"):"create"===a.toLowerCase()||"update"===a.toLowerCase()?c.url="/api/file_events_controller/event":"delete"===a.toLowerCase()&&(c.url="/api/file_events_controller/remove_event/"+this.get("eventID")),Backbone.sync.apply(this,arguments)},hasCategory:function(){return _.isUndefined(this.get("etcID"))?!1:!0},unread:function(){return 1===this.get("read")?!1:!0}}),App.Models.EventCategory=App.Helpers.Model.extend({idAttribute:"etcID",sync:function(a,b,c){return c=c||{},"read"===a.toLowerCase()?c.url="/api/event_categories_controller/get_event_category/"+this.get("eventTypeID"):("create"===a.toLowerCase()||"update"===a.toLowerCase())&&(c.url="/api/event_categories_controller/create_or_edit"),Backbone.sync.apply(this,arguments)}}),App.Models.EventType=App.Helpers.Model.extend({idAttribute:"eventTypeID",sync:function(a,b,c){return c=c||{},"read"===a.toLowerCase()?c.url="/api/event_types_controller/get_event_type/"+this.get("eventTypeID"):"create"===a.toLowerCase()||"update"===a.toLowerCase()?c.url="/api/event_types_controller/create_or_edit":"delete"===a.toLowerCase()&&(c.url="/api/event_types_controller/remove_eventType/"+this.get("eventTypeID")),Backbone.sync.apply(this,arguments)}}),App.Models.File=App.Helpers.Model.extend({idAttribute:"fileNumber",defaults:{module:App.Const.wcFileModule},initialize:function(){this.listenTo(this,"sync",this.fetched)},fetched:function(){this.set("fetched",!0)},url:function(){return _.isUndefined(this.id)?"/api/files_controller/get_file":"/api/files_controller/get_file/"+this.id},fullTempClientRepName:function(){var a=this.get("tempClientRep")||{};return _.isEmpty(a)?void 0:""!==a.clientRepMiddleName?a.clientRepFirstName+" "+a.clientRepMiddleName+" "+a.clientRepLastName:a.clientRepFirstName+" "+a.clientRepLastName},fileHasLoaded:function(){return!_.isUndefined(this.get("fileTitle"))&&!_.isUndefined(this.get("fileNumber"))&&!_.isUndefined(this.get("openDate"))},isWC:function(){return"WC"===this.get("fileStatus")},isLien:function(){return"WC-Lien"===this.get("fileStatus")},isFileOpened:function(){return this.isWC()?0===this.get("wcIsFileClosed"):this.isLien()?0===this.get("lienIsFileClosed"):!1},isFileClosed:function(){return!_.isUndefined(this.get("fileStatus"))&&this.get("fileStatus").toLowerCase().includes("closed")>0},isFileLienOpened:function(){return 0===this.get("lienIsFileClosed")},isTPAType:function(){var a=parseInt(this.get("clientTypeID"),10);return 3===a},hasTempClientRep:function(){var a=this.get("tempClientRepID");return!_.isUndefined(a)&&0!==a},isInsurerType:function(){var a=parseInt(this.get("clientTypeID"),10);return 2===a},getVenueLeadCase:function(){var a=this.get("cases")||{},b="";if(!_.isEmpty(a)){var c=_.find(a,{leadCase:1});b=_.isUndefined(c)?_.first(a).venueAbbrev:c.venueAbbrev}return b?"("+b+")":""},getDbiCaseList:function(){var a=this.get("cases")||{},b="";if(!_.isEmpty(a)){var c=_.find(a,{leadCase:1});b=_.isUndefined(c)?_.first(a).ADJid:c.ADJid}return a.length>1?"Show More.":b},_relativePathUrlFile:function(){return App.Helpers.getFileURL(this.get("fileNumber"))},fileEditUrl:function(){return this._relativePathUrlFile()},fileEventsUrl:function(){return this._relativePathUrlFile()+"/events"},fileBillingUrl:function(){return this._relativePathUrlFile()+"/billings"},fileNewEventUrl:function(){return this._relativePathUrlFile()+"/events/new"},fileByFirmUrl:function(){return"#client_rep/firm/"+this.get("firm_id")+"/file/"+this.get("fileNumber")},getDbiDOIList:function(){var a=this.get("cases")||{},b=[],c={};if(!_.isEmpty(a)){var d=_.find(a,{leadCase:1});c=_.isUndefined(d)?_.first(a):d,b.push(c.DOI),c.DOIendCT&&b.push(c.DOIendCT+" CT")}return b.join(", ")},getClientBillingFormat:function(){return this.get("tpaClient")?this.get("tpaClient").billingFormat:this.get("insurerClient")?this.get("insurerClient").billingFormat:void 0},getClientName:function(){return this.get("tpaClient")?this.get("tpaClient").clientName+" ("+this.get("tpaClient").clientNameShort+")":this.get("insurerClient")?this.get("insurerClient").clientName+" ("+this.get("insurerClient").clientNameShort+")":void 0},getClientID:function(){return this.get("tpaClient")?this.get("tpaClient").clientID:this.get("insurerClient")?this.get("insurerClient").clientID:void 0},getDaysInLitigation:function(){if(this.get("openDate")){var a=moment(this.get("openDate")),b=moment();return b.diff(a,"days")}return 0},getDaysInMitigation:function(){if(this.get("liensStartDate")){var a=moment(this.get("liensStartDate")),b=moment();return b.diff(a,"days")}return 0},getFileNumber:function(){return this.get("fileNumber")?this.get("fileNumber"):!1}}),App.Models.FileDefenseAttorneys=App.Helpers.Model.extend({url:function(){return"/api/files_controller/file_defense_attorneys"}}),App.Models.FileSubro=App.Helpers.Model.extend({idAttribute:"subroFileNumber",defaults:{fileStatusID:1,clientTypeID:"",module:App.Const.subroFileModule},initialize:function(){this.listenTo(this,"sync",this.fetched)},fetched:function(){this.set("fetched",!0)},url:function(){return _.isUndefined(this.id)?"/api/files_controller/get_file":"/api/files_controller/get_file/"+this.id},fullTempAdjusterName:function(){var a=this.get("tempClientRep")||{};return _.isEmpty(a)?void 0:""!==a.clientRepMiddleName?a.clientRepFirstName+" "+a.clientRepMiddleName+" "+a.clientRepLastName:a.clientRepFirstName+" "+a.clientRepLastName},fileHasLoaded:function(){return!_.isUndefined(this.get("subroInternalFileName"))&&!_.isUndefined(this.get("subroFileNumber"))},isTPAType:function(){var a=parseInt(this.get("TPAid"),10);return a>0},isFileOpened:function(){var a=_.isNull(this.get("subroOpenDate"))||this.get("subroIsFileClosed"),b=_.isNull(this.get("lienOpenDate"))||this.get("lienIsFileClosed"),c=_.isNull(this.get("interventionOpenDate"))||this.get("interventionIsFileClosed");return a&&b&&c?!1:!0},hasTempClientRep:function(){var a=this.get("tempClientRepID");return!_.isUndefined(a)&&0!==a},isInsurerType:function(){var a=parseInt(this.get("insurerID"),10);return a>0},getVenueLeadCase:function(){var a=this.get("cases")||{},b="";if(!_.isEmpty(a)){var c=_.find(a,{leadCase:1});b=_.isUndefined(c)?_.first(a).venueAbbrev:c.venueAbbrev}return b?"("+b+")":""},getDbiCaseList:function(){var a=this.get("cases")||{},b="";if(!_.isEmpty(a)){var c=_.find(a,{leadCase:1});b=_.isUndefined(c)?_.first(a).ADJid:c.ADJid}return a.length>1?"Show More.":b},_relativePathUrlFile:function(){return App.Helpers.getFileURL(this.get("subroFileNumber"),2)},fileEditUrl:function(){return this._relativePathUrlFile()},fileEventsUrl:function(){return this._relativePathUrlFile()+"/events"},fileBillingUrl:function(){return this._relativePathUrlFile()+"/billings"},fileNewEventUrl:function(){return this._relativePathUrlFile()+"/events/new"},fileByFirmUrl:function(){return"#adjuster/firm/"+this.get("firm_id")+"/file/"+this.get("fileNumber")},getDbiDOIList:function(){var a=this.get("cases")||{},b=[],c={};if(!_.isEmpty(a)){var d=_.find(a,{leadCase:1});c=_.isUndefined(d)?_.first(a):d,b.push(c.DOI),c.DOIendCT&&b.push(c.DOIendCT+" CT")}return b.join(", ")},getClientBillingFormat:function(){return this.get("client")?this.get("client").billingFormat:void 0},getClientName:function(){return this.get("client").clientName+" ("+this.get("client").clientNameShort+")"},getClientID:function(){return this.get("client")?this.get("client").clientID:void 0},getDaysInLitigation:function(){if(this.get("openDate")){var a=moment(this.get("openDate")),b=moment();return b.diff(a,"days")}return 0},getDaysInMitigation:function(){if(this.get("liensStartDate")){var a=moment(this.get("liensStartDate")),b=moment();return b.diff(a,"days")}return 0},getFileNumber:function(){return this.get("subroFileNumber")?this.get("subroFileNumber"):!1}}),App.Models.FileType=App.Helpers.Model.extend({idAttribute:"fileTypeID",defaults:{fileType:""}}),App.Models.Firm=App.Helpers.Model.extend({idAttribute:"firmID",url:function(){return _.isUndefined(this.get("firmID"))?"/api/firms_controller/get_firm":"/api/firms_controller/get_firm/"+this.get("firmID")},getCountFiles:function(){return this.get("files").length||0}}),App.Models.FirmLocation=App.Helpers.Model.extend({url:function(){return _.isUndefined(this.get("ua_firm_location_id"))?"/api/u_firm_location_controller/create_or_edit_firm_location":"/api/u_firm_location_controller/create_or_edit_firm_location/"+this.get("ua_firm_location_id")}}),App.Models.ForgotPassword=App.Helpers.Model.extend({url:"api/authentication_controller_master/forgot_password"}),App.Models.Hotword=App.Helpers.Model.extend({idAttribute:"hotwordID",sync:function(a,b,c){return c=c||{},"read"===a.toLowerCase()?(c.url="/api/hotwords_controller/get/",_.isUndefined(this.id)||(c.url+=this.id)):"create"===a.toLowerCase()?c.url="/api/hotwords_controller/create":"update"===a.toLowerCase()?c.url="/api/hotwords_controller/update":"delete"===a.toLowerCase()&&(c.url="/api/hotwords_controller/remove/"+this.id),Backbone.sync.apply(this,arguments)}}),App.Models.Lawyer=App.Helpers.Model.extend({idAttribute:"lawyerID",fullAppAttorney:function(){return this.get("lawyerFirstName")||this.get("lawyerLastName")?""!==this.get("lawyerMiddleName")?this.get("lawyerLastName")+", "+this.get("lawyerFirstName")+" "+this.get("lawyerMiddleName"):this.get("lawyerLastName")+", "+this.get("lawyerFirstName"):""},url:function(){return _.isUndefined(this.get("lawyerID"))?"/api/lawyer_controller/get_lawyer":"/api/lawyer_controller/get_lawyer/"+this.get("lawyerID")}}),App.Models.lawyerFirm=App.Helpers.Model.extend({url:function(){return"/api/firms_controller/edit_lawyer_firms"}}),App.Models.Letter=App.Helpers.Model.extend({idAttribute:"letterTemplateID",defaults:{isPrivate:0,medicalDocuments:0,contactList:0,ccList:0,medicalJointDefense:0,medicalAmePqmeQme:0,moduleID:1,templateType:"html"},url:function(){return this.isNew()?"/api/letters_controller/letter":"/api/letters_controller/letter/"+this.get("letterTemplateID")},parse:function(a){return a&&a.letter?a.letter:a},removeClassEditable:function(a){if(_.has(this.attribute),a){var b=$("<div>"+this.get(a)+"</div>");return b.find(".control-letter").each(function(){$(this).removeClass("editWarning editable")}),b.html()}return""}}),App.Models.Login=App.Helpers.Model.extend({url:"api/authentication_controller_master/login",isLogin:function(){var a=this.get("id"),b=localStorage.getItem("currentSessionData");if(_.isNull(b))sessionStorage.clear();else{var c=JSON.parse(b);for(var d in c)c[d]!==sessionStorage.getItem(d)&&sessionStorage.setItem(d,c[d])}if(_.isUndefined(a)||_.isNull(a)){if(App.loginModel.storage()){var e=new App.Collections.Access;if(!_.isUndefined(sessionStorage.getItem("loginId"))&&!_.isNull(sessionStorage.getItem("loginId")))return App.loginModel.set("id",sessionStorage.getItem("loginId")),App.loginModel.set("email",sessionStorage.getItem("email")),App.loginModel.set("first",sessionStorage.getItem("first")),App.loginModel.set("middle",sessionStorage.getItem("middle")),App.loginModel.set("last",sessionStorage.getItem("last")),App.loginModel.set("phone",sessionStorage.getItem("phone")),App.loginModel.set("isDA",parseInt(sessionStorage.getItem("isDA"),10)),App.loginModel.set("isHearingRep",parseInt(sessionStorage.getItem("isHearingRep"),10)),App.loginModel.set("isClientRep",parseInt(sessionStorage.getItem("isClientRep"),10)),App.loginModel.set("popAlerts",parseInt(sessionStorage.getItem("popAlerts"),10)),App.loginModel.set("firm",sessionStorage.getItem("firm")),"undefined"!==sessionStorage.getItem("settings")&&App.loginModel.set("settings",JSON.parse(sessionStorage.getItem("settings"))),e.add(JSON.parse(sessionStorage.getItem("acl"))),App.loginModel.set("acl",e),!0}return!1}return!0},logout:function(){$.post("api/authentication_controller_master/logout",{},function(){App.loginModel.storage()&&(sessionStorage.removeItem("loginId"),sessionStorage.removeItem("email"),sessionStorage.removeItem("first"),sessionStorage.removeItem("middle"),sessionStorage.removeItem("last"),sessionStorage.removeItem("phone"),sessionStorage.removeItem("acl"),sessionStorage.removeItem("isDA"),sessionStorage.removeItem("isClientRep"),sessionStorage.removeItem("isHearingRep"),sessionStorage.removeItem("popAlerts"),sessionStorage.removeItem("firm"),"undefined"!==sessionStorage.getItem("settings")&&sessionStorage.removeItem("settings")),$.removeCookie("ci_session"),$.removeCookie("cf_csrf_cookie"),App.loginModel.clear(),localStorage.removeItem("currentSessionData"),localStorage.clear(),window.location=window.location.origin+"/#sessions/login",window.location.reload(),clearInterval(App.AlertAjax),App.AlertAjax=void 0})},storage:function(){return Storage&&sessionStorage?!0:!1},getFullNameWithEmail:function(){var a=this.get("last");return _.isEmpty(this.get("first"))||(a+=(_.isEmpty(a)?"":", ")+this.get("first")),_.isEmpty(this.get("middle"))||(a+=(_.isEmpty(a)?"":" ")+this.get("middle")),_.isEmpty(this.get("email"))||(a+=(_.isEmpty(a)?"":" ")+this.get("email")),a},hasAccess:function(a){return!_.isUndefined(this._findAccessGroup(a))},canEdit:function(a){var b=this._findAccessGroup(a);return!_.isUndefined(b)&&1===b.get("can_edit")},_findAccessGroup:function(a){a=parseInt(a,10);var b;return App.loginModel.get("acl")instanceof Backbone.Collection&&(b=_.find(App.loginModel.get("acl").models,function(b){return b.get("access_group_id")===a})),b},updateSessionData:function(a){a.email!==sessionStorage.getItem("email")&&(sessionStorage.setItem("email",a.email),this.set("email",a.email)),a.first!==sessionStorage.getItem("first")&&(sessionStorage.setItem("first",a.first),this.set("first",a.first)),a.middle!==sessionStorage.getItem("middle")&&(sessionStorage.setItem("middle",a.middle),this.set("middle",a.middle)),a.last!==sessionStorage.getItem("last")&&(sessionStorage.setItem("last",a.last),this.set("last",a.last)),a.phone!==sessionStorage.getItem("phone")&&(sessionStorage.setItem("phone",a.phone),this.set("phone",a.phone));var b=JSON.stringify(sessionStorage);localStorage.setItem("currentSessionData",b)},getSettingValue:function(a){if(this.get("settings")){var b=_.find(this.get("settings"),function(b){return b.key===a});return b.value}return 1},updatePopAlerts:function(a){if(a!==sessionStorage.getItem("popAlerts")){sessionStorage.setItem("popAlerts",a),this.set("popAlerts",a);var b=JSON.stringify(sessionStorage);localStorage.setItem("currentSessionData",b)}},updateSettings:function(a){if(a!==sessionStorage.getItem("settings")){this.set("settings",a),sessionStorage.setItem("settings",JSON.stringify(a));var b=JSON.stringify(sessionStorage);localStorage.setItem("currentSessionData",b)}}}),App.Models.MedicalBodyPart=App.Helpers.Model.extend({
idAttribute:"medicalID",sync:function(a,b,c){return c=c||{},"delete"===a.toLowerCase()&&(c.url="/api/body_parts_controller/remove_medical_body_part/"+this.get("medicalID")+"/"+this.get("bodyPartID")),Backbone.sync.apply(this,arguments)}}),App.Models.Milestone=App.Helpers.Model.extend({defaults:{calendarDays:0,days:"",description:"",displayOrder:"",msColor:"",name:"",selected:"",start:0},url:function(){return this.isNew()?"/api/milestones_controller/milestones":"/api/milestones_controller/milestones/"+this.get("id")}}),App.Models.Module=App.Helpers.Model.extend({url:function(){return _.isUndefined(this.id)?"/api/modules_controller/module":"/api/modules_controller/module/"+this.id}}),App.Models.Module=App.Helpers.Model.extend({url:function(){return _.isUndefined(this.id)?"/api/modules_controller/module":"/api/modules_controller/module/"+this.id}}),App.Models.Pace=App.Helpers.Model.extend({url:function(){return"/api/pace_table_controller/get_pace_table_report"}}),App.Models.PastBilling=App.Helpers.Model.extend({idAttribute:"invoiceNumber",getDueAmount:function(){var a=0===this.get("billingAdjustment")||_.isNull(this.get("billingAdjustment"))||parseFloat(this.get("billingAdjustment")),b=0===this.get("billingTotal")||_.isNull(this.get("billingTotal"))||parseFloat(this.get("billingTotal"));if(a&&b){if(_.isNull(this.get("billingTotal")))return 0;var c=this.get("billingAdjustment")?this.get("billingAdjustment"):0;return _.isNull(this.get("billingPaid"))||""===this.get("billingPaid")?(parseFloat(this.get("billingTotal"))+parseFloat(c)).toFixed(2):(parseFloat(this.get("billingTotal"))+parseFloat(c)-parseFloat(this.get("billingPaid"))).toFixed(2)}},getCutPercentage:function(){var a=this.get("billingAdjustment")?this.get("billingAdjustment"):0,b=0===this.get("billingAdjustment")||_.isNull(this.get("billingAdjustment"))||parseFloat(this.get("billingAdjustment")),c=0===this.get("billingTotal")||_.isNull(this.get("billingTotal"))||parseFloat(this.get("billingTotal"));return b&&c?_.isNull(this.get("billingTotal"))?0:(parseFloat(a)/parseFloat(this.get("billingTotal"))*100).toFixed(2):void 0},getBillingTotalWithDecimalCents:function(){return _.isNull(this.get("billingTotal"))?0:this.get("billingTotal").toFixed(2)},getBillingAdjustmentWithDecimalCents:function(){return _.isNull(this.get("billingAdjustment"))?"":0===this.get("billingAdjustment")?0:parseFloat(this.get("billingAdjustment"),10).toFixed(2)},getBillingPaidWithDecimalCents:function(){return _.isNull(this.get("billingPaid"))?0:this.get("billingPaid").toFixed(2)},url:function(){return _.isUndefined(this.get("invoiceNumber"))?"/api/billing_invoices_controller/invoiceEditOrGet":"/api/billing_invoices_controller/invoiceEditOrGet/"+this.get("invoiceNumber")}}),App.Models.Payee=App.Helpers.Model.extend({idAttribute:"payeeID",sync:function(a,b,c){return c=c||{},"read"===a.toLowerCase()?c.url="/api/payees_controller/get_payee/"+this.get("payeeID"):("create"===a.toLowerCase()||"update"===a.toLowerCase())&&(c.url="/api/payees_controller/create_or_edit"),Backbone.sync.apply(this,arguments)}}),App.Models.RegisterUser=App.Helpers.Model.extend({url:function(){return"/api/authentication_controller_master/register_client_rep"}}),App.Models.Snippet=App.Helpers.Model.extend({idAttribute:"id",sync:function(a,b,c){return c=c||{},"read"===a.toLowerCase()?c.url="/api/snippets_controller/get_snippet/"+this.get("id"):"create"===a.toLowerCase()||"update"===a.toLowerCase()?c.url="/api/snippets_controller/create_or_edit":"delete"===a.toLowerCase()&&(c.url="/api/snippets_controller/delete_snippet/"+this.get("id")),Backbone.sync.apply(this,arguments)}}),App.Models.State=App.Helpers.Model.extend({idAttribute:"stateID",className:"State",defaults:{state_name:"",state_prefix:""}}),App.Models.SubroDiscoveryExtension=App.Helpers.Model.extend({idAttribute:"extensionID",sync:function(a,b,c){return c=c||{},"read"===a.toLowerCase()?c.url="/api/subro_discovery_extensions_controller/get_subro_discovery_extension/"+this.get("extensionID"):"create"===a.toLowerCase()||"update"===a.toLowerCase()?c.url="/api/subro_discovery_extensions_controller/create_or_edit":"delete"===a.toLowerCase()&&(c.url="/api/subro_discovery_extensions_controller/remove_subro_discovery_extension/"+this.get("extensionID")),Backbone.sync.apply(this,arguments)}}),App.Models.SubroDiscoveryResponse=App.Helpers.Model.extend({idAttribute:"responseID",sync:function(a,b,c){return c=c||{},"read"===a.toLowerCase()?c.url="/api/subro_discovery_responses_controller/get_subro_discovery_response/"+this.get("responseID"):"create"===a.toLowerCase()||"update"===a.toLowerCase()?c.url="/api/subro_discovery_responses_controller/create_or_edit":"delete"===a.toLowerCase()&&(c.url="/api/subro_discovery_responses_controller/remove_subro_discovery_response/"+this.get("responseID")),Backbone.sync.apply(this,arguments)}}),App.Models.TimekeeperRate=App.Helpers.Model.extend({idAttribute:"tkRateID",url:function(){return this.isNew()?"api/time_keeper_rates_controller/time_keeper_rate":"api/time_keeper_rates_controller/time_keeper_rate/"+this.get("tkRateID")}}),App.Models.uAttyFirmEmail=App.Helpers.Model.extend({}),App.Models.UAttyToManager=App.Helpers.Model.extend({url:function(){return"/api/user_controller/da_to_manager"}}),App.Models.User=App.Helpers.Model.extend({defaults:{activated:0},getFormattedArchived:function(){return this.isNew()?"":1===this.get("archived")?"Yes":"No"},getFormattedIsDA:function(){return this.isNew()?"":1===this.get("isDA")?"Yes":"No"},getFormattedIsClientRep:function(){return this.isNew()?"":1===this.get("isClientRep")?"Yes":"No"},getFormattedIsHearingRep:function(){return this.isNew()?"":1===this.get("isHearingRep")?"Yes":"No"},getFormattedManager:function(){return this.isNew()?"":1===this.get("manager")?"Yes":"No"},getFormattedClientManager:function(){return this.isNew()?"":1===this.get("is_client_manager")?"Yes":"No"},getFormattedIsEmployee:function(){var a="";return this.isNew()?a:1===this.get("isDA")?"Deffense Attorney":1===this.get("isClientRep")?"No":1===this.get("isHearingRep")?"Hearing Rep":"Regular Employee"},url:function(){return _.isUndefined(this.id)?"/api/user_controller/user":"/api/user_controller/user/"+this.id},fullName:function(){return this.get("first")&&this.get("last")?""!==this.get("middle")?this.get("first")+" "+this.get("middle")+" "+this.get("last"):this.get("first")+" "+this.get("last"):""},isClientRep:function(){return 1===this.get("isClientRep")},isManager:function(){return 1===this.get("manager")},isClientManager:function(){return 1===this.get("is_client_manager")},isHearingRep:function(){return 1===this.get("isHearingRep")},isDA:function(){return 1===this.get("isDA")},isActivated:function(){return 1===this.get("activated")},getUserType:function(){return 1===this.get("isDA")?"Deffense Attorney":1===this.get("isClientRep")?"Client Rep":1===this.get("isHearingRep")?"Hearing Rep":"Regular Employee"}}),App.Models.UserTKClassification=App.Helpers.Model.extend({idAttribute:["clientID","classification"]}),App.Models.Venue=App.Helpers.Model.extend({idAttribute:"venueID",sync:function(a,b,c){return c=c||{},"read"===a.toLowerCase()?c.url="/api/venues_controller/get_venue/"+this.get("venueID"):("create"===a.toLowerCase()||"update"===a.toLowerCase())&&(c.url="/api/venues_controller/create_or_edit"),Backbone.sync.apply(this,arguments)}}),App.Models.Lien2LienRep=App.Helpers.Model.extend({url:function(){return"/api/wc_lien_reps_controller/associate_lien_rep_to_lien"}}),App.Models.wcLienBill=App.Helpers.Model.extend({idAttribute:"lienBillID",sync:function(a,b,c){return c=c||{},"read"===a.toLowerCase()?c.url="/api/wc_lien_bills_controller/get_lien_bills/"+this.get("lienBillID"):"create"===a.toLowerCase()||"update"===a.toLowerCase()?c.url="/api/wc_lien_bills_controller/create_or_edit":"delete"===a.toLowerCase()&&(c.url="/api/wc_lien_bills_controller/remove_lien_bill/"+this.get("lienBillID")),Backbone.sync.apply(this,arguments)}}),App.Models.wcLienClaimant=App.Helpers.Model.extend({idAttribute:"ClaimantID",sync:function(a,b,c){return c=c||{},"read"===a.toLowerCase()?c.url="/api/wc_lien_claimant_controller/get_lien_claimant/"+this.get("ClaimantID"):("create"===a.toLowerCase()||"update"===a.toLowerCase())&&(c.url="/api/wc_lien_claimant_controller/create_or_edit"),Backbone.sync.apply(this,arguments)}}),App.Models.wcLienDemand=App.Helpers.Model.extend({idAttribute:"lienDemandID",sync:function(a,b,c){return c=c||{},"read"===a.toLowerCase()?c.url="/api/wc_lien_demands_controller/get_lien_demand/"+this.get("lienDemandID"):"create"===a.toLowerCase()||"update"===a.toLowerCase()?c.url="/api/wc_lien_demands_controller/create_or_edit":"delete"===a.toLowerCase()&&(c.url="/api/wc_lien_demands_controller/remove_lien_demand/"+this.get("lienDemandID")),Backbone.sync.apply(this,arguments)}}),App.Models.wcLienIndex=App.Helpers.Model.extend({}),App.Models.wcLienObjection=App.Helpers.Model.extend({idAttribute:"objectionID",sync:function(a,b,c){return c=c||{},"read"===a.toLowerCase()?c.url="/api/wc_lien_objections_controller/get_lien_objections/"+this.get("objectionID"):"create"===a.toLowerCase()||"update"===a.toLowerCase()?c.url="/api/wc_lien_objections_controller/create_or_edit":"delete"===a.toLowerCase()&&(c.url="/api/wc_lien_objections_controller/remove_lien_objection/"+this.get("objectionID")),Backbone.sync.apply(this,arguments)}}),App.Models.wcLienOffer=App.Helpers.Model.extend({idAttribute:"lienOfferID",sync:function(a,b,c){return c=c||{},"read"===a.toLowerCase()?c.url="/api/wc_lien_offers_controller/get_lien_offers/"+this.get("lienOfferID"):"create"===a.toLowerCase()||"update"===a.toLowerCase()?c.url="/api/wc_lien_offers_controller/create_or_edit":"delete"===a.toLowerCase()&&(c.url="/api/wc_lien_offers_controller/remove_lien_offer/"+this.get("lienOfferID")),Backbone.sync.apply(this,arguments)}}),App.Models.wcLienRep=App.Helpers.Model.extend({idAttribute:"lienRepID",sync:function(a,b,c){return c=c||{},"read"===a.toLowerCase()?c.url="/api/wc_lien_reps_controller/get_lien_rep/"+this.get("lienRepID"):"create"===a.toLowerCase()||"update"===a.toLowerCase()?c.url="/api/wc_lien_reps_controller/create_or_edit":"delete"===a.toLowerCase()&&(c.url="/api/wc_lien_reps_controller/remove_associate_lien_rep_to_lien/"+this.get("lienID")+"/"+this.get("lienRepID")),Backbone.sync.apply(this,arguments)}}),App.Models.WordLetter=App.Helpers.Model.extend({idAttribute:"letterTemplateID",defaults:{isPrivate:0,medicalDocuments:0,contactList:0,ccList:0,medicalJointDefense:0,medicalAmePqmeQme:0,wordLetterTemplate:1,moduleID:1,templateType:"word"},url:function(){return this.isNew()?"/api/letters_word_controller/letter":"/api/letters_word_controller/letter/"+this.get("letterTemplateID")},parse:function(a){return a&&a.letter?a.letter:a}}),App.Collections.Access=App.Helpers.Collection.extend({url:function(){return _.isUndefined(this.hierarchical)?"/api/access_controller/get_acl_tree":"/api/access_controller/get_acl_tree/1"}}),App.Collections.AddressMaster=App.Helpers.Collection.extend({model:App.Models.AddressMaster,sortOrder:"asc",sortBy:"typeCategory"}),App.Collections.AddressSets=App.Helpers.Collection.extend({model:App.Models.AddressSet}),App.Collections.Alerts=App.Helpers.Collection.extend({url:function(){var a=this.alertFilter?this.alertFilter:"";return"/api/alerts_controller/getAlertsByUser/"+a},model:App.Models.Alert}),App.Collections.AvailableModules=App.Helpers.Collection.extend({model:App.Models.AvailableModule,url:function(){return"/api/modules_controller_master/get_all_modules/"}}),App.Collections.BillingSnippets=App.Helpers.Collection.extend({url:function(){return"/api/snippets_controller/get_billing_snippets"+(this.moduleID?"/"+this.moduleID:"")}}),App.Collections.Billings=App.Helpers.Collection.extend({model:App.Models.Billing}),App.Collections.BodyParts=App.Helpers.Collection.extend({model:App.Models.BodyPart}),App.Collections.CalendarEvents=App.Helpers.Collection.extend({url:function(){var a=this.alertFilter?this.alertFilter:"";return"/api/calendar_controller/getCalendarAlertsByUser/"+a},model:App.Models.CalendarEvent}),App.Collections.WCCases=App.Helpers.Collection.extend({className:"Cases",model:App.Models.Case,sortByLeadCase:function(){this.sortBy="leadCase",this.sortOrder="desc",this.sort()}}),App.Collections.ClientTypes=App.Helpers.Collection.extend({model:App.Models.ClientType,url:function(){return"/api/clients_controller/getClientTypes"}}),App.Collections.Clients=App.Helpers.Collection.extend({model:App.Models.Client,url:function(){return"/api/clients_controller/getAllClients"},sortOrder:"asc",sortBy:"clientName"}),App.Collections.CoDefendants=App.Helpers.Collection.extend({model:App.Models.CoDefendant,sortOrder:"asc",sortBy:"codefendantName"}),App.Collections.Companies=App.Helpers.Collection.extend({url:function(){return"/api/companies_controller/getAllCompanies"},model:App.Models.Company,sortOrder:"asc",sortBy:"companyName"}),App.Collections.CurrentBilling=App.Helpers.Collection.extend({url:function(){return"/api/billing_controller/get_current_billing/"},model:App.Models.CurrentBilling}),App.Collections.UAttyFirmEmails=App.Helpers.Collection.extend({model:App.Models.uAttyFirmEmail,sortOrder:"asc",sortBy:"label"}),App.Collections.DailyBilling=App.Helpers.Collection.extend({url:function(){return"/api/billing_controller/get_daily_billing/"}}),App.Collections.Defendants=App.Helpers.Collection.extend({model:App.Models.Defendant,sortOrder:"asc",sortBy:"defendantName"}),App.Collections.DefenseAttorneys=App.Helpers.Collection.extend({model:App.Models.DefenseAttorney,getPrimaryDA:function(){var a=this.where({primaryDA:1}),b=a[0].attributes;return b.fullName=a[0].fullName(),b}}),App.Collections.Doctors=App.Helpers.Collection.extend({url:function(){return"/api/doctors_controller/get_doctors/"},model:App.Models.Doctors}),App.Collections.Documents=App.Helpers.Collection.extend({model:App.Models.Document,sortOrder:"ASC",sortBy:"documentID"}),App.Collections.Documents2=App.Helpers.Collection.extend({model:App.Models.Document2,sortOrder:"ASC",sortBy:"documentID"}),App.Collections.EditHelps=App.Helpers.Collection.extend({url:"/api/help_edit_controller/get_helps",model:App.Models.EditHelp}),App.Collections.EventReasons=App.Helpers.Collection.extend({url:function(){return"/api/event_reasons_controller/get_event_reasons/"+this.moduleID}}),App.Collections.EventTypeCategories=App.Helpers.Collection.extend({model:App.Models.EventCategory,url:function(){return this.moduleID?"/api/file_events_controller/get_event_type_categories/"+this.moduleID:"/api/file_events_controller/get_event_type_categories"}}),App.Collections.EventTypes=App.Helpers.Collection.extend({model:App.Models.EventType}),App.Collections.FileEvents=App.Helpers.Collection.extend({url:function(){return"/api/file_events_controller/get_events/"},model:App.Models.Event}),App.Collections.FileTypes=App.Helpers.Collection.extend({initialize:function(){this.module=App.Const.wcFileModule},url:function(){return this.fileIsNew?"/api/files_controller/get_fileTypes/fileIsNew":"/api/files_controller/get_fileTypes/"+this.module},model:App.Models.FileType}),App.Collections.Files=App.Helpers.Collection.extend({url:"/api/files_controller/get_files",model:App.Models.File,milestones:[],columnMilestones:[],initialize:function(){this.listenTo(this,"add",this.loadMilestones)},loadMilestones:function(a){var b={},c=a.get("ms");c&&this.columnMilestones.length>0?(b={},_.each(this.columnMilestones,function(a){var d=_.find(_.values(c),{milestoneID:a.id}),e=a.name.toLowerCase();d?b[e]={msColor:_.isEmpty(d.msColor)?"":"unselected"===d.msColor?"disabled-color":d.msColor,msValue:_.isEmpty(d.msColor)?"":d.msValue}:b[e]={msColor:"disabled-color",msValue:""}}),_.extend(a.attributes,b)):(_.each(this.columnMilestones,function(a){var c=a.name.toLowerCase();b[c]={msColor:"disabled-color",msValue:""}}),_.extend(a.attributes,b))}}),App.Collections.FilesSubro=App.Helpers.Collection.extend({url:"/api/files_controller/get_files",model:App.Models.FileSubro,milestones:[],columnMilestones:[],initialize:function(){this.listenTo(this,"add",this.loadMilestones)},loadMilestones:function(a){var b={},c=a.get("ms");c&&this.columnMilestones.length>0?(b={},_.each(this.columnMilestones,function(a){var d=_.find(_.values(c),{milestoneID:a.id}),e=a.name.toLowerCase();d?b[e]={msColor:_.isEmpty(d.msColor)?"":"unselected"===d.msColor?"disabled-color":d.msColor,msValue:_.isEmpty(d.msColor)?"":d.msValue}:b[e]={msColor:"disabled-color",msValue:""}}),_.extend(a.attributes,b)):(_.each(this.columnMilestones,function(a){var c=a.name.toLowerCase();b[c]={msColor:"disabled-color",msValue:""}}),_.extend(a.attributes,b))}}),App.Collections.Firms=App.Helpers.Collection.extend({model:App.Models.Firm}),App.Collections.Hotwords=App.Helpers.Collection.extend({model:App.Models.Hotword,url:function(){return"/api/hotwords_controller/get"},sortBy:"word",sortOrder:"asc"}),App.Collections.Lawyers=App.Helpers.Collection.extend({model:App.Models.Lawyer}),App.Collections.Letters=App.Helpers.Collection.extend({url:function(){return"/api/letters_controller/get_letters"},model:App.Models.Letter,sortOrder:"asc",sortBy:"name"}),App.Collections.LienBills=App.Helpers.Collection.extend({model:App.Models.wcLienBill}),App.Collections.LienDemands=App.Helpers.Collection.extend({model:App.Models.wcLienDemand}),App.Collections.liendObjections=App.Helpers.Collection.extend({model:App.Models.wcLienObjection}),App.Collections.LienOffers=App.Helpers.Collection.extend({model:App.Models.wcLienOffer}),App.Collections.LienRes=App.Helpers.Collection.extend({model:App.Models.wcLienRep}),App.Collections.LiensIndex=App.Helpers.Collection.extend({model:App.Models.wcLienIndex,totalBillAmount:0,totalSettledAmount:0,sortOrder:"asc",sortBy:"claimantName",parse:function(a){return this.totalBillAmount=a.totalBillAmount||0,this.totalSettledAmount=a.totalSettledAmount||0,a.all_lien_events||[]}}),App.Collections.Macros=App.Helpers.Collection.extend({model:App.Models.Milestone,initialize:function(){this.moduleID=App.Const.wcFileModule},url:function(){return"/api/macros_controller/get_macros/"+this.moduleID}}),App.Collections.Managers=App.Helpers.Collection.extend({url:"/api/manager_controller/get_manager_users"}),App.Collections.MedicalsBodyParts=App.Helpers.Collection.extend({model:App.Models.MedicalBodyPart}),App.Collections.Milestones=App.Helpers.Collection.extend({model:App.Models.Milestone,initialize:function(){this.module=App.Const.wcFileModule},url:function(){return"/api/milestones_controller/get_milestones/"+this.module},sortOrder:"asc",sortBy:"displayOrder"}),App.Collections.Modules=App.Helpers.Collection.extend({model:App.Models.Module,url:function(){return"/api/modules_controller/module"}}),App.Collections.MonthlyBilling=App.Helpers.Collection.extend({url:function(){return"/api/accounting_controller/get_monthly_billing/"}}),App.Collections.PaceGraph=App.Helpers.Collection.extend({url:function(){return"/api/accounting_controller/get_billing_pace_graph/"}}),App.Collections.Paces=App.Helpers.Collection.extend({model:App.Models.Pace}),App.Collections.PastBilling=App.Helpers.Collection.extend({url:function(){return"/api/billing_invoices_controller/get_past_billing/"},model:App.Models.PastBilling}),App.Collections.ReviewedBillsHistory=App.Helpers.Collection.extend({url:function(){return"/api/reviewed_billing_history_controller/get_current_history"},sortBy:"dateTime",sortOrder:"asc"}),App.Collections.Snippets=App.Helpers.Collection.extend({url:function(){return this.category?"/api/snippets_controller/get_all_snippets/"+(this.moduleID?this.moduleID+"/":!1)+this.category:"/api/snippets_controller/get_all_snippets"+(this.moduleID?"/"+this.moduleID:"")}}),App.Collections.States=App.Helpers.Collection.extend({model:App.Models.State}),App.Collections.SubroDiscoveryExtensions=App.Helpers.Collection.extend({model:App.Models.SubroDiscoveryExtension}),App.Collections.SubroDiscoveryResponses=App.Helpers.Collection.extend({model:App.Models.SubroDiscoveryResponse}),App.Collections.TimeKeeperRates=App.Helpers.Collection.extend({url:"/api/time_keeper_rates_controller/get_timeKeeperRates"}),App.Collections.TimeKeeperRatesPerClient=App.Helpers.Collection.extend({model:App.Models.TimekeeperRate}),App.Collections.UserCompanies=App.Helpers.Collection.extend({model:App.Models.Company}),App.Collections.UserTKClassifications=App.Helpers.Collection.extend({model:App.Models.UserTKClassification}),App.Collections.Users=App.Helpers.Collection.extend({url:"/api/user_controller/get_users",model:App.Models.User,sortOrder:"asc",sortBy:"first"}),App.Collections.Venues=App.Helpers.Collection.extend({model:App.Models.Venue,sortOrder:"asc",sortBy:"venueName"}),App.Collections.WordLetters=App.Helpers.Collection.extend({wordLetterTemplate:0,url:function(){return"/api/letters_word_controller/get_letters"},model:App.Models.WordLetter,sortOrder:"asc",sortBy:"name"}),_.isUndefined(App.Views.Accounting)&&(App.Views.Accounting={}),_.isUndefined(App.Views.Accounting.BillingOverview)&&(App.Views.Accounting.BillingOverview={}),App.Views.Accounting.BillingOverview.Index=App.Helpers.View.extend({template:App.Templates.accountingBillingOverviewIndex,className:"index",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{'change [name="year"]':"fetchYear"},afterRender:function(){var a=moment().year(),b=this.$el;b.find('[name="year"]').val(a),this.getData()},fetchYear:function(a){var b=$(a.currentTarget),c=b.val();_.isNaN(c)?this.getData():this.getData(c)},_renderTables:function(a){for(var b,c,d,e="",f=this.$el,g=0,h=0,i=0,j=12;j>=1;j--){var k=a[j];if(k&&(b=k.reduce(function(a,b){return a+b.billingTotal},0),c=k.reduce(function(a,b){return a+b.adjustmentTotal},0),d=k.reduce(function(a,b){return a+(b.billingTotal- -1*b.adjustmentTotal-b.paidTotal)},0),g+=b,h+=d,i+=c),k){var l=moment(_.last(k).endDate).format("MMMM");e+='<div class="row m-top-20 b-blue-light"><div class="font-size-18 height-30 p-top-10 font-bold c-grey-dark"><div class="col-sm-4">'+l+'</div><div class="col-sm-4">Total Billed $'+App.Helpers.CurrencyFormat(b)+'</div><div class="col-sm-4">Total Owed $'+App.Helpers.CurrencyFormat(d)+"</div></div>",e+='<table class="table table-hover m-bottom-0" >',e+='	<thead class="b-blue-new-casefriend c-grey-dark font-size-17" id="">',e+='		<tr id="past_billing_header">',e+='			<th class="sortable">DATE</i></th>',e+='			<th class="sortable">BILLED</th>',e+='			<th class="sortable">DEDUCT</th>',e+='			<th class="sortable">NET</th>',e+='			<th class="sortable width-80">PAID</th>',e+='			<th class="sortable">OWED</th>',e+="		</tr>",e+="	</thead>",e+='	<tbody class="b-grey-light font-size-15 c-grey-dark">',_.each(k,function(a){e+='<tr class="real-serif-font">',e+='	<td class="">'+a.endDate+"</td>",e+='	<td class="">$'+App.Helpers.CurrencyFormat(a.billingTotal)+"</td>",e+='	<td class="">$'+App.Helpers.CurrencyFormat(a.adjustmentTotal)+"</td>";var b=(a.billingTotal- -1*a.adjustmentTotal).toFixed(2),c=App.Helpers.CurrencyFormat(a.paidTotal);e+='	<td class="">$'+App.Helpers.CurrencyFormat(b)+"</td>",e+=c?'	<td class="">$'+c+"</td>":'	<td class=""></td>';var d=App.Helpers.CurrencyFormat(b-a.paidTotal);e+='	<td class="">$'+d+"</td>",e+="</tr>"}),e+="	</tbody>",e+="</table></div>"}}var m='<div class="row m-top-20 b-blue-light"><div class="font-size-18 height-30 p-top-10 font-bold c-grey-dark"><div class="col-sm-3">Year Stats:</div><div class="col-sm-3">Total Billed $'+App.Helpers.CurrencyFormat(g)+'</div><div class="col-sm-3">Total Owed $'+App.Helpers.CurrencyFormat(h)+'</div><div class="col-sm-3">Total Deduction $'+App.Helpers.CurrencyFormat(i)+"</div></div>";f.find("#global-sums-container").html(m),f.find("#table-container").html(e)},getData:function(a){var b=this;$.ajax({url:"/api/accounting_controller/get_billing_overview",data:{year:a},success:function(a){b.$el.find("#unInvoicedTotal").html("$"+App.Helpers.CurrencyFormat(a.unInvoicedTotal)),b._renderTables(a.billingOverviewData),b.removeLoader()}}),b.showLoader()}}),_.isUndefined(App.Views.Accounting)&&(App.Views.Accounting={}),App.Views.Accounting.BillingPace=App.Helpers.View.extend({template:App.Templates.accountingBillingPace,className:"AccountingBillingPace",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.page=this.options.page},events:{'change [name="month"]':"_fetchData",'change [name="year"]':"_fetchData","mouseover .hover-parent":"showHoverPop","mouseout .hover-parent":"hideHoverPop"},showHoverPop:function(a){var b=$(a.currentTarget);this._hidePopOver();var c=0;b.find("td.b-blue-graph-bar").addClass("border-bottom-solid-black border-top-solid-black").fadeIn(c),b.find("td.b-blue-graph-bar:first").addClass("border-left-solid-black").fadeIn(c),b.find(".final-bar").addClass("border-right-solid-black").fadeIn(c),b.find(".final-bar").addClass("border-bottom-solid-black border-top-solid-black").fadeIn(c),b.find(".hover-pop").show(c)},_hidePopOver:function(){var a=this.$el.find("#pace-table");a.find(".hover-pop").hide(),a.find("td.b-blue-graph-bar").removeClass("border-bottom-solid-black border-top-solid-black"),a.find(".final-bar").removeClass("border-bottom-solid-black border-top-solid-black"),a.find(".final-bar").removeClass("border-right-solid-black"),a.find("td.b-blue-graph-bar").removeClass("border-left-solid-black")},hideHoverPop:function(){this._hidePopOver()},afterRender:function(){var a=moment().month()+1,b=moment().year(),c=this.$el;c.find('[name="month"]').val(a),c.find('[name="year"]').val(b),this._fetchData()},_fetchData:function(){var a=this,b=this.$el,c=b.find('[name="month"]').val(),d=$("#month-select").find(":selected").text(),e=b.find('[name="year"]').val(),f=a.page;b.find("#month-label").html(d),b.find("#year-label").html(e),this.showLoader(),this.collection.sortBy="user",this.collection.fetch({data:{year:e,month:c,page:f},success:function(b){a.removeLoader(),a.paintTable(b)}})},_padDateNumbers:function(a){return 10>a?"0"+a:a},paintTable:function(a){var b=this.$el;if(0===a.models.length)return void b.find("#pace-table").html('<tr class="font-size-16"><td class="t-align-c font-style-italic font-size--15">No results available</td><tr/>');var c=parseInt(b.find('[name="month"]').val(),10),d=parseInt(b.find('[name="year"]').val(),10);b.find("#pace-table").empty();var e,f=moment(d+"-"+this._padDateNumbers(c)+"-01").daysInMonth(),g='<tr class="font-size-16"><th width="240"></th>',h=moment(d+"-"+this._padDateNumbers(c)+"-01"),i=moment(h.format()),j=moment().date(),k=180,l=0,m=0,n=!1,o=!1,p=a.groupBy("ufl_firm_name"),q=30,r=5,s=0;_.each(p,function(a){_.each(a,function(a){a.get("hours")>s&&(s=a.get("hours"))})}),c===moment().month()+1&&d===moment().year()&&(o=!0);for(var t=1;f>=t;t++)if(0===i.weekday()||6===i.weekday()?g+='<th width="'+q+'" class="c-red p-relative t-align-right">'+t:(l+=1,n===!1&&m++,g+=t===j&&o?'<th width="'+q+'" class="p-relative t-align-right c-warning-boostrap ">'+t:'<th width="'+q+'" class="p-relative t-align-right ">'+t),t===j&&(n=!0,o&&(g+='<span class="p-absolute top-25 c-green-casefriend width-75 left--20 height-10 font-size-18" id="bar-target"></span><span class="p-absolute b-green-casefriend top-50 width-6 right--2 height-10 box-shadow z-index-1001" id="today-line"></span>')),g+="</th>",i=i.add(1,"days"),t===f&&s>180)for(var u=0;r>u;u++)g+='<th width="'+q+'" class="p-relative c-white t-align-right">'+u+"</th>";e=k/l,g+="</tr><tr></tr><tr></tr>";var v=0,w=0;if(_.each(p,function(a,b){v++,g+='<tr class="font-bold font-size-16"><td>'+b+"</td></tr>",_.each(a,function(a){var b=moment(h.format()),c=Math.floor(a.get("hours")/e);c=c>f+r?f+r-1:c;var d=a.get("hours")/e;g+='<tr class="hover-parent"><td class="border-top-solid-white border-bottom-solid-white user-name" nowrap>'+a.get("user")+"</td>",w++;var i;if(0===c)i=Math.round(q*(d%1)),g+='<td class="p-relative"><span class="display-none hover-pop"><span class=" p-2 p-absolute top--40 z-index-1002  left-0 width-150 height-30 b-hover-bar border-solid-black font-size-20 t-align-center">'+a.get("hours")+' hours</span><span class=" p-absolute arrow-down left-1 top--10 c-black z-index-1001"></span></span><span class="b-blue-graph-bar  final-bar p-absolute top-0" style="width:'+i+'px; height:100%;"></span></td>';else for(var j=0;c>j;j++)j===c-1?(f>c&&(0===b.weekday()||6===b.weekday())&&(g+='<td width="30" class="b-blue-graph-bar"></td>',g+='<td width="30" class="b-blue-graph-bar"></td>'),g+='<td width="30" class="b-blue-graph-bar p-relative"><span class="display-none hover-pop"><span class=" p-2 p-absolute top--40 z-index-1002  left-0 width-150 height-30 b-hover-bar border-solid-black font-size-20 t-align-center">'+a.get("hours")+' hours</span><span class=" p-absolute arrow-down left-1 top--10 c-black z-index-1002"></span></span>',i=30,a.get("hours")>=240?g+='<span class="p-absolute top-3 c-black width-75 z-index-1001 font-bold"><i class="fa fa-arrow-up p-left-5" aria-hidden="true"></i>240+</span></td>':(g+="</td>",i=Math.round(q*(d%1))),f>c&&(b.weekday()+1===0||b.weekday()+1===6)&&(g+='<td width="30" class="b-blue-graph-bar"></td>',g+='<td width="30" class="b-blue-graph-bar"></td>'),g+='<td class="p-relative"><span class="b-blue-graph-bar final-bar p-absolute top-0" style="width:'+i+'px; height:100%;"></span></td>'):((0===b.weekday()||6===b.weekday())&&f+4>c&&c++,g+='<td width="30" class="b-blue-graph-bar"></td>'),b=b.add(1,"days");g+="</tr><tr></tr>"})}),b.find("#pace-table").html(g),o){var x=document.getElementById("pace-table"),y=x.offsetHeight-50;b.find("#today-line").css("height",y+"px");var z=Math.round(e*m);b.find("#bar-target").html(z+" hrs")}}}),_.isUndefined(App.Views.Accounting)&&(App.Views.Accounting={}),App.Views.Accounting.ClientGroupBreak=App.Helpers.View.extend({template:App.Templates.accountingClientGroupBreak,className:"clientGroupBreak",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.filters={},this.collection=new App.Helpers.Collection,this.fetchData()},events:{"click .billingRow":"goToBill"},goToBill:function(a){var b=$(a.currentTarget),c=b.data("billingid"),d=b.data("eventid"),e=b.data("filenumber"),f="#files/edit/"+e+"/events/edit/"+d+"/billing/edit/"+c;window.open(f,"_blank")},afterRender:function(){this.showLoader()},fetchData:function(){var a=this;this.filters.clientGroupID=this.options.clientGroupID,this.filters.timekeeperID=this.options.timekeeperID,this.filters.billingDate=this.options.billingDate,$.get("/api/accounting_controller/get_client_group_breakdown_per_day_exceeded/",this.filters,function(b){a.collection.reset(),a.collection.add(b),a.removeLoader()})}}),_.isUndefined(App.Views.Accounting)&&(App.Views.Accounting={}),App.Views.Accounting.ComplianceReport=App.Helpers.View.extend({template:App.Templates.accountingComplianceReport,className:"complianceReport",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.filters={}},events:{"click .icon-typeahead-down":"showAllEntities","change .da_attorney":"resetDAFilter",'change [name="month"]':"getData",'change [name="year"]':"getData",'change [name="timePeriod"]':"getData"},afterRender:function(){var a=this.$el;App.Helpers.initTypeahead({view:this,elemClass:".typeahead.da_attorney",urlBuild:{url:"api/typeahead_controller/search_defense_attorney_include_archived"},processFunction:$.proxy(this.processDATypeahead,this)}),a.find('[name="year"]').val(moment().year())},showAllEntities:function(a){App.Helpers.showAllEntities(a,this.$el)},resetDAFilter:function(a){var b=$(a.currentTarget);_.isEmpty(b.val())&&(this.filters.uAttID=void 0)},processDATypeahead:function(a){this.filters.uAttID=a.user_id,this.getData()},_renderData:function(a,b,c,d){var e=this.$el,f=["PlaceHolder","January","February","March","April","&nbsp;&nbsp;May&nbsp;&nbsp;"," June "," July ","August","September","October","November","December"];d=parseInt(d,10),e.find("#search-info").show(),e.find("#notes-text").show(),this.duration=b,this.startDate=a.startMonth+", "+c,this.endDate=a.endMonth+", "+a.endYear,
this.manager=a.attysInfo.managerFirstName?a.attysInfo.managerFirstName+" "+a.attysInfo.managerLastName:"None";var g=Math.round(_.max(a.billingHours)),h='<table class="table table-hover m-bottom-0 font-size-13 t-align-center p-30">',i="<thead><tr>";i+='<td class="t-align-left font-size-16 font-bold">Category</td>';var j="<tbody>",k='<tr class="c-grey"><td style="height:'+g+'px" class="p-relative t-align-left"></td>',l='<tr><td class="t-align-left font-bold " style="padding-top:20px;">Billing Hours:</td>',m='<tr><td class="t-align-left font-bold">File count:</td>',n='<tr><td class="t-align-left font-bold">WC Closed:</td>',o='<tr><td class="t-align-left font-bold">No Client Communication</td>',p='<tr><td class="t-align-left font-bold">Plan of Actions:</td>',q='<tr class="b-grey-light"><td class="t-align-left font-bold">Signed OACR:</td>',r='<tr class="b-grey-light"><td class="t-align-left font-bold">Signed S&As:</td>',s='<tr class="b-grey-light"><td class="t-align-left font-bold">Take Nothings:</td>',t='<tr class="b-grey-light"><td class="t-align-left font-bold">Dismissals:</td>',u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0;D=3>=b?"100px":b>3&&9>=b?"60px":"30px";for(var E=1;b>=E;E++){var F=(d+v++)%13;0===F&&(F++,v++),i+='<td class="font-size-16 font-bold">'+f[F]+"</td>";var G=Math.round(parseFloat(a.billingHours[E])-parseFloat(a.billingHours[u])),H=Math.round(parseFloat(a.totalFiles[E])-parseFloat(a.totalFiles[u])),I=Math.round(a.billingHours[E]),J=Math.round(a.totalFiles[E]);w+=I,x+=J;var K="#8DC665";G>0?G='<span class="c-green">+'+G+"</span>":(K="red",G='<span class="c-red">'+G+"</span>"),H=H>0?'<span class="c-green">+'+H+"</span>":'<span class="c-red">'+H+"</span>",y+=a.cicClosed[E],z+=a.signCR[E],A+=a.signSA[E],B+=a.takeNothing[E],C+=a.dismiss[E],k+='<td class="p-relative"><span style="height:'+I+"px;background-color: "+K+";width: "+D+';" class="hand-made-graph">'+I+"</span></td>",l+='<td style="padding-top:20px;">'+I+" |"+G+"</td>",m+="<td>"+J+" |"+H+"</td>",n+="<td>"+a.cicClosed[E]+"</td>",o+="<td>"+a.noClComm[E]+" |"+a.totalFiles[E]+"</td>",p+="<td>"+a.PoAEdits[E]+" |"+a.totalFiles[E]+"</td>",q+="<td>"+a.signCR[E]+"</td>",r+="<td>"+a.signSA[E]+"</td>",s+="<td>"+a.takeNothing[E]+"</td>",t+="<td>"+a.dismiss[E]+"</td>",u++}w=Math.round(w/b),x=Math.round(x/b),k+='<td class="p-relative"><span style="height:'+w+"px;background-color:skyblue;width: "+D+';" class="hand-made-graph">'+w+"</span></td>",j+=k+l+'<td style="padding-top:20px;color:white;background-color:#ccc;">*'+w+"</td></tr>"+m+'<td style="font-weight:bold;color:white;background-color:#ccc;">*'+x+"</td></tr>"+n+'<td style="font-weight:bold;color:white;background-color:#ccc;">'+y+"</td></tr>"+o+"</tr>"+p+"</tr>"+q+'<td style="font-weight:bold;color:white;background-color:#ccc;">'+z+"</td></tr>"+r+'<td style="font-weight:bold;color:white;background-color:#ccc;">'+A+"</td></tr>"+s+'<td style="font-weight:bold;color:white;background-color:#ccc;">'+B+"</td></tr>"+t+'<td style="font-weight:bold;color:white;background-color:#ccc;">'+C+"</td></tr></tbody>",i+='<td class="font-size-16 font-bold">Totals</td></tr></thead>',h+=i+j+"</table>",e.find("#compliance-table").html(h)},_resetData:function(){var a=this.$el;a.find("#search-info").hide(),a.find("#notes-text").hide(),this.startDate=void 0,this.endDate=void 0,this.duration=void 0,this.manager=void 0},getData:function(){var a=this,b=this.$el;if(!_.isUndefined(this.filters.uAttID)){this.filters.startMonth=b.find('[name="month"]').val(),this.filters.startYear=b.find('[name="year"]').val();var c=b.find('[name="timePeriod"]').val(),d=new moment(this.filters.startYear,this.filters.startMonth);d=d.add(c,"months"),this.filters.endingMonth=d.get("month"),this.filters.endingYear=d.get("year"),this.filters.length=c,this._resetData(),$.ajax({url:"/api/accounting_controller/get_compliance_report",data:a.filters,success:function(b){a._renderData(b,c,a.filters.startYear,a.filters.startMonth),a.removeLoader()}}),b.find("#compliance-table").html(""),a.showLoader()}}}),_.isUndefined(App.Views.Accounting)&&(App.Views.Accounting={}),App.Views.Accounting.ComplianceReportManagers=App.Helpers.View.extend({template:App.Templates.accountingComplianceReportManagers,className:"AccountingComplianceReportManagers",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.filters={},setTimeout(function(){google.load("visualization","1",{callback:function(){},packages:["corechart"]})},0)},events:{"click .icon-typeahead-down":"showAllEntities","change .da_attorney":"resetDAFilter",'change [name="month"]':"getData",'change [name="year"]':"getData",'change [name="timePeriod"]':"getData"},afterRender:function(){var a=this.$el;App.Helpers.initTypeahead({view:this,elemClass:".typeahead.da_attorney",urlBuild:{url:"api/typeahead_controller/search_defense_attorney_under_manager_include_archived"},processFunction:$.proxy(this.processDATypeahead,this)}),a.find('[name="year"]').val(moment().year())},showAllEntities:function(a){App.Helpers.showAllEntities(a,this.$el)},resetDAFilter:function(a){var b=$(a.currentTarget);_.isEmpty(b.val())&&(this.filters.uAttID=void 0)},processDATypeahead:function(a){this.filters.uAttID=a.user_id,this.getData()},showDaysBreakdown:function(a,b){var c=new App.Views.Accounting.MonthlyBillingManagers.DaysModal({dateClicked:a,userID:b}),d=new App.Helpers.Modal({view:c,sizeModal:"modal-lg"});d.show()},_renderData:function(a,b,c,d){var e=this.$el,f=["PlaceHolder","January","February","March","April","&nbsp;&nbsp;May&nbsp;&nbsp;"," June "," July ","August","September","October","November","December"];d=parseInt(d,10),e.find("#search-info").show(),e.find("#notes-text").show(),this.duration=b,this.startDate=a.startMonth+", "+c,this.endDate=a.endMonth+", "+a.endYear,this.manager=a.attysInfo.managerFirstName?a.attysInfo.managerFirstName+" "+a.attysInfo.managerLastName:"None";var g=Math.round(_.max(a.billingHours)),h='<table class="table table-hover m-bottom-0 font-size-13 t-align-center p-30">',i="<thead><tr>";i+='<td class="t-align-left font-size-16 font-bold">Category</td>';var j="<tbody>",k='<tr class="c-grey"><td style="height:'+g+'px" class="p-relative t-align-left"></td>',l='<tr><td class="t-align-left font-bold " style="padding-top:20px;">Billing Hours:</td>',m='<tr><td class="t-align-left font-bold">File count:</td>',n='<tr><td class="t-align-left font-bold">WC Closed:</td>',o='<tr><td class="t-align-left font-bold">No Client Communication</td>',p='<tr><td class="t-align-left font-bold">Plan of Actions:</td>',q='<tr class="b-grey-light"><td class="t-align-left font-bold">Signed OACR:</td>',r='<tr class="b-grey-light"><td class="t-align-left font-bold">Signed S&As:</td>',s='<tr class="b-grey-light"><td class="t-align-left font-bold">Take Nothings:</td>',t='<tr class="b-grey-light"><td class="t-align-left font-bold">Dismissals:</td>',u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0;D=3>=b?"100px":b>3&&9>=b?"60px":"30px";for(var E=1;b>=E;E++){var F=(d+v++)%13;0===F&&(F++,v++),i+='<td class="font-size-16 font-bold">'+f[F]+"</td>";var G=Math.round(parseFloat(a.billingHours[E])-parseFloat(a.billingHours[u])),H=Math.round(parseFloat(a.totalFiles[E])-parseFloat(a.totalFiles[u])),I=Math.round(a.billingHours[E]),J=Math.round(a.totalFiles[E]);w+=I,x+=J;var K="#8DC665";G>0?G='<span class="c-green">+'+G+"</span>":(K="red",G='<span class="c-red">'+G+"</span>"),H=H>0?'<span class="c-green">+'+H+"</span>":'<span class="c-red">'+H+"</span>",y+=a.cicClosed[E],z+=a.signCR[E],A+=a.signSA[E],B+=a.takeNothing[E],C+=a.dismiss[E],k+='<td class="p-relative"><span style="height:'+I+"px;background-color: "+K+";width: "+D+';" class="hand-made-graph">'+I+"</span></td>",l+='<td style="padding-top:20px;">'+I+" |"+G+"</td>",m+="<td>"+J+" |"+H+"</td>",n+="<td>"+a.cicClosed[E]+"</td>",o+="<td>"+a.noClComm[E]+" |"+a.totalFiles[E]+"</td>",p+="<td>"+a.PoAEdits[E]+" |"+a.totalFiles[E]+"</td>",q+="<td>"+a.signCR[E]+"</td>",r+="<td>"+a.signSA[E]+"</td>",s+="<td>"+a.takeNothing[E]+"</td>",t+="<td>"+a.dismiss[E]+"</td>",u++}w=Math.round(w/b),x=Math.round(x/b),k+='<td class="p-relative"><span style="height:'+w+"px;background-color:skyblue;width: "+D+';" class="hand-made-graph">'+w+"</span></td>",j+=l+'<td style="padding-top:20px;color:white;background-color:#ccc;">*'+w+"</td></tr>"+m+'<td style="font-weight:bold;color:white;background-color:#ccc;">*'+x+"</td></tr>"+n+'<td style="font-weight:bold;color:white;background-color:#ccc;">'+y+"</td></tr>"+o+"</tr>"+p+"</tr>"+q+'<td style="font-weight:bold;color:white;background-color:#ccc;">'+z+"</td></tr>"+r+'<td style="font-weight:bold;color:white;background-color:#ccc;">'+A+"</td></tr>"+s+'<td style="font-weight:bold;color:white;background-color:#ccc;">'+B+"</td></tr>"+t+'<td style="font-weight:bold;color:white;background-color:#ccc;">'+C+"</td></tr></tbody>",i+='<td class="font-size-16 font-bold">Totals</td></tr></thead>',h+=i+j+"</table>",e.find("#compliance-table").html(h)},_resetData:function(){var a=this.$el;a.find("#search-info").hide(),a.find("#notes-text").hide(),this.startDate=void 0,this.endDate=void 0,this.duration=void 0,this.manager=void 0},getData:function(){var a=this,b=this.$el;if(!_.isUndefined(this.filters.uAttID)){this.filters.startMonth=b.find('[name="month"]').val(),this.filters.startYear=b.find('[name="year"]').val();var c=b.find('[name="timePeriod"]').val(),d=new moment(this.filters.startYear,this.filters.startMonth);d=d.add(c,"months"),this.filters.endingMonth=d.get("month"),this.filters.endingYear=d.get("year"),this.filters.length=c,this._resetData(),$.ajax({url:"/api/accounting_controller/get_compliance_report_managers",data:a.filters,success:function(b){a._renderData(b,c,a.filters.startYear,a.filters.startMonth),a.renderCharts(b.billingHours),a.removeLoader()}}),b.find("#compliance-table").html(""),a.showLoader()}},_renderComboChart:function(a,b,c,d,e){function f(){var a=l.getSelection()[0];if(a){var b=i[a.row+1][0];h.showDaysBreakdown(b,h.filters.uAttID)}}var g,h=this,i=e?this._getDataForTotalBilling(a):this._getDataForTotalHours(a),j=google.visualization.arrayToDataTable(i),k={title:c,titleTextStyle:{fontSize:"20"},height:400,vAxis:{title:d,titleTextStyle:{fontSize:"18"}},hAxis:{title:"Months",titleTextStyle:{fontSize:"18"}},seriesType:"bars",series:{1:{type:"line"},2:{type:"line",color:"green"}},legend:{textStyle:{fontSize:"16"}},tooltip:{textStyle:{fontSize:"20"}}};g=new google.visualization.NumberFormat(e?{pattern:"$#,###.00"}:{pattern:"#,###.00"}),g.format(j,1),g.format(j,2);var l=new google.visualization.ComboChart(document.getElementById(b));l.draw(j,k),google.visualization.events.addListener(l,"select",f)},renderCharts:function(a){this._renderComboChart(a,"totalHoursChartComplianceManagers","Monthly billing hours","Total Hours")},_getAverageTotalHours:function(a){var b=0,c=0;return _.each(a,function(a){b++,c+=a}),parseFloat((c/b).toFixed(2))},_getDataForTotalHours:function(a){var b=this.$el;a.shift();var c=[],d=this._getAverageTotalHours(a),e=b.find('[name="year"]').val(),f=b.find('[name="month"]').val(),g=moment(e+"-"+f+"-01");return c.push(["Month","Hours Total","Average","Goal"]),_.each(a,function(a){var b=parseInt(g.month(),10)+1;c.push([g.year()+"/"+b,a,d,180]),g=g.add(1,"month")}),c}}),_.isUndefined(App.Views.Accounting)&&(App.Views.Accounting={}),App.Views.Accounting.ExceededHours=App.Helpers.View.extend({template:App.Templates.accountingExceededHours,className:"exceededHours",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.collection=new App.Helpers.Collection,this.fetchData(3)},events:{'change [name="timePeriod"]':"changeTimePeriod","click .gotoGroupBreakdown":"gotoGroupBreakdown"},gotoGroupBreakdown:function(a){var b=$(a.currentTarget),c=new App.Views.Accounting.ClientGroupBreak({timekeeperID:b.data("timekeeperid"),clientGroupID:b.data("clientgroupid"),billingDate:b.data("billingdate"),clientGroupName:b.data("groupname")}),d=new App.Helpers.Modal({view:c,sizeModal:"modal-lg"});d.show()},afterRender:function(){this.showLoader()},changeTimePeriod:function(a){a.preventDefault(),a.stopPropagation();var b=this.$el.find("select#timePeriod option:selected").val();this.fetchData(b)},fetchData:function(a){var b=this,c={};c.timePeriod=a,this.showLoader(),$.get("/api/accounting_controller/get_exceeded_hours/",c,function(a){b.collection.reset(a),b.collection.sortBy="billingDate",b.collection.sortOrder="desc",b.collection.sort(),b.removeLoader()})}}),_.isUndefined(App.Views.Accounting)&&(App.Views.Accounting={}),_.isUndefined(App.Views.Accounting.MonthlyBilling)&&(App.Views.Accounting.MonthlyBilling={}),App.Views.Accounting.MonthlyBilling.ClientDetails=App.Helpers.View.extend({template:App.Templates.accountingMonthlyBillingClientDetails,className:"clientDetails",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.filters={},this.collection=new App.Helpers.Collection,this.fetchData()},events:{"click .billingRow":"goToBill"},goToBill:function(a){var b=$(a.currentTarget),c=b.data("billingid"),d=b.data("eventid"),e=b.data("filenumber"),f=b.data("module-id"),g=App.Helpers.getFileURL(e,f,d,c);window.open(g,"_blank")},afterRender:function(){this.showLoader()},fetchData:function(){var a=this;this.filters.clientID=this.options.clientID,this.filters.timekeeperID=this.options.timekeeperID,this.filters.userID=this.options.userID,this.filters.date=this.options.date,this.filters.isManager=this.options.isManager,$.get("/api/accounting_controller/get_client_details_per_date/",this.filters,function(b){a.collection.reset(),a.collection.add(b),a.removeLoader()})}}),_.isUndefined(App.Views.Accounting)&&(App.Views.Accounting={}),_.isUndefined(App.Views.Accounting.MonthlyBilling)&&(App.Views.Accounting.MonthlyBilling={}),App.Views.Accounting.MonthlyBilling.DaysModal=App.Helpers.View.extend({template:App.Templates.accountingMonthlyBillingDaysModal,className:"daysModal",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this,c=this.options.dateClicked.split("/"),d=c[0],e=c[1],f=["PlaceHolder","January","February","March","April","May","June","July","August","September","October","November","December"];this.prettyDate=d+", "+f[e];var g=function(){b.fetchData()};this.filters={},setTimeout(function(){google.load("visualization","1",{callback:g,packages:["corechart"]})},0)},events:{},afterRender:function(){this.showLoader()},_renderComboChart:function(a,b,c,d,e){function f(){var a=l.getSelection()[0];if(a){var b=i[a.row+1][0];h.showHoursBreakdown(b,h.filters.year,h.filters.timekeeperID,h.filters.userID)}}var g,h=this,i=e?this._getDataForTotalBilling(a):this._getDataForTotalHours(a),j=google.visualization.arrayToDataTable(i),k={title:c,titleTextStyle:{fontSize:"20"},height:400,vAxis:{title:d,titleTextStyle:{fontSize:"18"}},hAxis:{title:"Days",titleTextStyle:{fontSize:"18"}},seriesType:"bars",series:{1:{type:"line"}},legend:{textStyle:{fontSize:"16"}},tooltip:{textStyle:{fontSize:"20"}}};g=new google.visualization.NumberFormat(e?{pattern:"$#,###.00"}:{pattern:"#,###.00"}),g.format(j,1),g.format(j,2);var l=new google.visualization.ComboChart(document.getElementById(b));l.draw(j,k),google.visualization.events.addListener(l,"select",f)},showHoursBreakdown:function(a,b,c,d){var e=new App.Views.Accounting.MonthlyBilling.HoursModal({monthAndDay:a,year:b,timekeeperID:c,userID:d}),f=new App.Helpers.Modal({view:e,sizeModal:"modal-lg"});f.show()},_getAverageTotalBilling:function(a){var b=0,c=0;return _.each(a,function(a){b++,c+=a.billingTotal}),parseFloat((c/b).toFixed(2))},_getAverageTotalHours:function(a){var b=0,c=0;return _.each(a,function(a){b++,c+=a.totalHours}),parseFloat((c/b).toFixed(2))},_getDataForTotalBilling:function(a){var b=[],c=this._getAverageTotalBilling(a);return b.push(["Day","Billing Total","Average"]),_.each(a,function(a){b.push([a.month+"/"+a.day,a.billingTotal,c])}),b},_getDataForTotalHours:function(a){var b=[],c=this._getAverageTotalHours(a);return b.push(["Day","Hours Total","Average"]),_.each(a,function(a){b.push([a.month+"/"+a.day,a.totalHours,c])}),b},fetchData:function(){var a=this,b=this.options.dateClicked.split("/");this.filters.year=b[0],this.filters.month=b[1],this.filters.timekeeperID=this.options.timekeeperID,this.filters.userID=this.options.userID,$.get("/api/accounting_controller/get_daily_billing_per_month/",this.filters,function(b){b?a.renderCharts(b):a.$el.find(".chart-container-day").html("No Data"),a.removeLoader()})},renderCharts:function(a){this._renderComboChart(a,"totalDayBreakout","Billing amount days breakdown","$ Total Bills",!0),this._renderComboChart(a,"totalDayBreakoutHours","Hours amount days breakdown","Total Hours")}}),_.isUndefined(App.Views.Accounting)&&(App.Views.Accounting={}),_.isUndefined(App.Views.Accounting.MonthlyBilling)&&(App.Views.Accounting.MonthlyBilling={}),App.Views.Accounting.MonthlyBilling.HoursModal=App.Helpers.View.extend({template:App.Templates.accountingMonthlyBillingHoursModal,className:"hoursModal",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.filters={};var b=this.options.monthAndDay.split("/"),c=this.options.year,d=b[0],e=b[1],f=["PlaceHolder","January","February","March","April","May","June","July","August","September","October","November","December"];this.prettyDate=c+", "+f[d]+" "+e,this.fetchData(),this.collection=new App.Helpers.Collection},events:{"click .clientName":"showClientDetail"},showClientDetail:function(a){var b=$(a.currentTarget),c=b.data("clientid"),d=b.data("clientname"),e=new App.Views.Accounting.MonthlyBilling.ClientDetails({clientName:d,date:this.filters.specificDay,clientID:c,timekeeperID:this.filters.timekeeperID,userID:this.filters.userID,isManager:this.filters.isManager}),f=new App.Helpers.Modal({view:e});f.show()},afterRender:function(){this.showLoader()},fetchData:function(){var a=this,b=this.options.monthAndDay.split("/"),c=this.options.year,d=b[0],e=b[1];this.filters.timekeeperID=this.options.timekeeperID,this.filters.userID=this.options.userID,this.filters.specificDay=c+"-"+d+"-"+e,this.filters.isManager=this.options.isManager,$.get("/api/accounting_controller/get_hourly_billing_per_day/",this.filters,function(b){a.collection.reset(),a.collection.add(b),a.removeLoader()})}}),_.isUndefined(App.Views.Accounting)&&(App.Views.Accounting={}),_.isUndefined(App.Views.Accounting.MonthlyBilling)&&(App.Views.Accounting.MonthlyBilling={}),App.Views.Accounting.MonthlyBilling.Index=App.Helpers.View.extend({template:App.Templates.accountingMonthlyBillingIndex,className:"index-monthly-billing",_modelUrl:"/api/accounting_controller/get_monthly_billing/",_typeAheadUrl:"api/typeahead_controller/search_users_not_client_rep_include_archived",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.filters={},b.lock=!1;var c=function(){b.fetchData()};setTimeout(function(){google.load("visualization","1",{callback:c,packages:["corechart"]})},0)},events:{"click .icon-typeahead-down":"showAllEntities",'change [name="timekeeper"]':"changeTimeKeeper",'change [name="user"]':"changeUser",'change [name="startDate"]':"changeDateRange",'change [name="endDate"]':"changeDateRange"},afterRender:function(){this.showLoader(),App.Helpers.initTypeahead({view:this,elemClass:".typeahead.user",urlBuild:{url:this._typeAheadUrl},processFunction:$.proxy(this.processUserTypeahead,this)}),App.Helpers.initTypeahead({view:this,elemClass:".typeahead.timekeeper",urlBuild:{url:"api/typeahead_controller/search_timekeepers_include_archived"},processFunction:$.proxy(this.processTimeKeeperTypeahead,this)})},fetchData:function(){var a=this,b={startDate:moment().subtract(6,"months").format("YYYY-MM-DD"),endDate:moment().format("YYYY-MM-DD")},c=$.extend(b,a.filters),d=moment(c.startDate).isBefore(moment(c.endDate));if(d)a.lock||(a.showLoader(),a.lock=!0,$.get(a._modelUrl,c,function(b){if(a.removeLoader(),b){var d=a._fillEmptyDatesForMonths(c,b);a.renderCharts(d),setTimeout(function(){a.lock=!1},500)}else a.$el.find(".chart-container").html("No Data"),setTimeout(function(){a.lock=!1},500)}).done(function(){a.$el.find('[name="startDate"]').datepicker("update",c.startDate),a.$el.find('[name="endDate"]').datepicker("update",c.endDate)}));else{var e="End date should be after Start date.<br>Please select different dates",f=new App.Helpers.Toast({message:e,classType:"danger",fadeOut:5e3});f.render()}},_fillEmptyDatesForMonths:function(a,b){b=b||[];for(var c=moment(a.startDate),d=moment(a.endDate),e=d.diff(c,"months"),f=0;e>=f;f++){var g=c.format("YYYY-MM"),h=_.find(b,function(a){return a.month===parseInt(c.format("MM"))});if(_.isUndefined(h)){var i={startDate:g,endDate:g,month:c.format("MM"),totalHours:0,year:c.format("YYYY")};b.push(i)}c=c.add(1,"months")}var j=_.sortBy(b,"startDate");return j},changeDateRange:function(){var a=this.$el,b=a.find('[name="startDate"]').val(),c=a.find('[name="endDate"]').val(),d=!1;this.filters.startDate===b||_.isEmpty(b)||(this.filters.startDate=b,d=!0),this.filters.endDate===c||_.isEmpty(c)||(this.filters.endDate=c,d=!0),d&&this.fetchData()},changeUser:function(a){_.isEmpty($(a.currentTarget).val())&&(this.filters.userID=void 0,this.fetchData())},changeTimeKeeper:function(a){_.isEmpty($(a.currentTarget).val())&&(this.filters.timekeeperID=void 0,this.fetchData())},processTimeKeeperTypeahead:function(a){a.user_id&&(this.filters.timekeeperID=a.user_id,this.filters.userID=void 0,this.$el.find('[name="user"]').typeahead("val",""),this.fetchData())},processUserTypeahead:function(a){a.user_id&&(this.filters.userID=a.user_id,this.filters.timekeeperID=void 0,this.$el.find('[name="timekeeper"]').typeahead("val",""),this.fetchData())},_getAverageTotalBilling:function(a){var b=0,c=0;return _.each(a,function(a){b++,c+=a.billingTotal}),parseFloat((c/b).toFixed(2))},_getAverageTotalHours:function(a){var b=0,c=0;return _.each(a,function(a){b++,c+=a.totalHours}),parseFloat((c/b).toFixed(2))},_getDataForTotalBilling:function(a){var b=[],c=this._getAverageTotalBilling(a);return b.push(["Month","Billing Total","Average"]),_.each(a,function(a){b.push([a.year+"/"+a.month,a.billingTotal,c])}),b},_getDataForTotalHours:function(a){var b=[],c=this._getAverageTotalHours(a);return b.push(["Month","Hours Total","Average","Goal"]),_.each(a,function(a){b.push([a.year+"/"+a.month,a.totalHours,c,180])}),b},_getDataForPieChartBilling:function(a){var b=[],c={};return b.push(["Year","Total Billing"]),_.each(a,function(a){a.year in c?c[a.year]+=a.billingTotal:c[a.year]=a.billingTotal}),_.each(c,function(a,c){b.push([c,a])}),b},_getDataForPieChartBillingPerMonths:function(a){var b=[],c={},d=["PlaceHolder","January","February","March","April","May","June","July","August","September","October","November","December"];return b.push(["Month","Total Billing"]),_.each(a,function(a){a.month in c?c[a.month]+=a.billingTotal:c[a.month]=a.billingTotal}),_.each(c,function(a,c){b.push([d[c],a])}),b},_getDataForPieChartHoursPerMonths:function(a){var b=[],c={},d=["PlaceHolder","January","February","March","April","May","June","July","August","September","October","November","December"];return b.push(["Month","Total Billing"]),_.each(a,function(a){a.month in c?c[a.month]+=a.totalHours:c[a.month]=a.totalHours}),_.each(c,function(a,c){b.push([d[c],a])}),b},_getDataForPieChartHours:function(a){var b=[],c={};return b.push(["Year","Total Billing"]),_.each(a,function(a){a.year in c?c[a.year]+=a.totalHours:c[a.year]=a.totalHours}),_.each(c,function(a,c){b.push([c,a])}),b},showDaysBreakdown:function(a,b,c){var d=new App.Views.Accounting.MonthlyBilling.DaysModal({dateClicked:a,timekeeperID:b,userID:c}),e=new App.Helpers.Modal({view:d,sizeModal:"modal-lg"});e.show()},_renderComboChart:function(a,b,c,d,e){function f(){var a=l.getSelection()[0];if(a){var b=h[a.row+1][0];g.showDaysBreakdown(b,g.filters.timekeeperID,g.filters.userID)}}var g=this,h=e?this._getDataForTotalBilling(a):this._getDataForTotalHours(a),i=google.visualization.arrayToDataTable(h),j={title:c,titleTextStyle:{fontSize:"20"},height:400,vAxis:{title:d,titleTextStyle:{fontSize:"18"}},hAxis:{title:"Months",titleTextStyle:{fontSize:"18"}},seriesType:"bars",series:{1:{type:"line"}},legend:{textStyle:{fontSize:"16"}},tooltip:{textStyle:{fontSize:"20"}}};4===h[0].length&&(j.series[2]={type:"line",color:"green"});var k;k=new google.visualization.NumberFormat(e?{pattern:"$#,###.00"}:{pattern:"#,###.00"}),k.format(i,1),k.format(i,2);var l=new google.visualization.ComboChart(document.getElementById(b));l.draw(i,j),google.visualization.events.addListener(l,"select",f)},_renderPieChart:function(a,b,c,d,e){var f,g=google.visualization.arrayToDataTable(e),h={title:c,titleTextStyle:{fontSize:"18"},height:400,is3D:!0,chartArea:{left:50,width:"100%",height:"80%"}};f=new google.visualization.NumberFormat(d?{pattern:"$#,###.00"}:{pattern:"#,###.00"}),f.format(g,1);var i=new google.visualization.PieChart(document.getElementById(b));i.draw(g,h)},renderCharts:function(a){this._renderComboChart(a,"totalBillingChart","Monthly billing amount per year and month","$ Total Bills",!0),this._renderComboChart(a,"totalHoursChart","Monthly billing hours per year and month","Total Hours"),this._renderPieChart(a,"totalBillingPieChart","Per Year Billing Overview",!0,this._getDataForPieChartBilling(a)),this._renderPieChart(a,"totalHourPieChart","Per Year Hours Overview",!1,this._getDataForPieChartHours(a)),this._renderPieChart(a,"totalBillingPieChartPerMonth","Per Month Billing Overview",!0,this._getDataForPieChartBillingPerMonths(a)),this._renderPieChart(a,"totalHourPieChartPerMonth","Per Month Hours Overview",!1,this._getDataForPieChartHoursPerMonths(a))}}),_.isUndefined(App.Views.Accounting)&&(App.Views.Accounting={}),_.isUndefined(App.Views.Accounting.MonthlyBillingManagers)&&(App.Views.Accounting.MonthlyBillingManagers={}),App.Views.Accounting.MonthlyBillingManagers.DaysModal=App.Helpers.View.extend({template:App.Templates.accountingMonthlyBillingManagersDaysModal,className:"AccountingMonthlyBillingManagersDaysModal",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this,c=this.options.dateClicked.split("/"),d=c[0],e=c[1],f=["PlaceHolder","January","February","March","April","May","June","July","August","September","October","November","December"];this.prettyDate=d+", "+f[e];var g=function(){b.fetchData()};this.filters={},setTimeout(function(){google.load("visualization","1",{callback:g,packages:["corechart"]})},0)},events:{},afterRender:function(){this.showLoader()},_renderComboChart:function(a,b,c,d,e){function f(){var a=l.getSelection()[0];if(a){var b=i[a.row+1][0];h.showHoursBreakdown(b,h.filters.year,h.filters.timekeeperID,h.filters.userID)}}var g,h=this,i=e?this._getDataForTotalBilling(a):this._getDataForTotalHours(a),j=google.visualization.arrayToDataTable(i),k={title:c,titleTextStyle:{fontSize:"20"},height:400,vAxis:{title:d,titleTextStyle:{fontSize:"18"}},hAxis:{title:"Days",titleTextStyle:{fontSize:"18"}},seriesType:"bars",series:{1:{type:"line"}},legend:{textStyle:{fontSize:"16"}},tooltip:{textStyle:{fontSize:"20"}}};g=new google.visualization.NumberFormat(e?{pattern:"$#,###.00"}:{pattern:"#,###.00"}),g.format(j,1),g.format(j,2);var l=new google.visualization.ComboChart(document.getElementById(b));l.draw(j,k),google.visualization.events.addListener(l,"select",f)},showHoursBreakdown:function(a,b,c,d){var e=_.isUndefined(d)?1:0,f=new App.Views.Accounting.MonthlyBilling.HoursModal({monthAndDay:a,year:b,timekeeperID:c,userID:d,isManager:e}),g=new App.Helpers.Modal({view:f,sizeModal:"modal-lg"});g.show()},_getAverageTotalHours:function(a){var b=0,c=0;return _.each(a,function(a){b++,c+=a.totalHours}),parseFloat((c/b).toFixed(2))},_getDataForTotalHours:function(a){var b=[],c=this._getAverageTotalHours(a);return b.push(["Day","Hours Total","Average"]),_.each(a,function(a){b.push([a.month+"/"+a.day,a.totalHours,c])}),b},fetchData:function(){var a=this,b=this.options.dateClicked.split("/");this.filters.year=b[0],this.filters.month=b[1],this.filters.timekeeperID=this.options.timekeeperID,this.filters.userID=this.options.userID,$.get("/api/accounting_controller/get_daily_billing_per_month_managers/",this.filters,function(b){b?a.renderCharts(b):a.$el.find(".chart-container-day").html("No Data"),a.removeLoader()})},renderCharts:function(a){this._renderComboChart(a,"totalDayBreakoutHours","Hours amount days breakdown","Total Hours")}}),_.isUndefined(App.Views.Accounting)&&(App.Views.Accounting={}),_.isUndefined(App.Views.Accounting.MonthlyBillingManagers)&&(App.Views.Accounting.MonthlyBillingManagers={}),App.Views.Accounting.MonthlyBillingManagers.Index=App.Views.Accounting.MonthlyBilling.Index.extend({template:App.Templates.accountingMonthlyBillingManagersIndex,className:"AccountingMonthlyBillingManagersIndex",_modelUrl:"/api/accounting_controller/get_monthly_billing_managers/",_typeAheadUrl:"api/typeahead_controller/search_users_under_manager_including_archived",processUserTypeahead:function(a){a.user_id&&(this.filters.userID=a.user_id,this.fetchData())},showDaysBreakdown:function(a,b){var c=new App.Views.Accounting.MonthlyBillingManagers.DaysModal({dateClicked:a,userID:b}),d=new App.Helpers.Modal({view:c,sizeModal:"modal-lg"});d.show()},_renderComboChart:function(a,b,c,d){function e(){var a=k.getSelection()[0];if(a){var b=g[a.row+1][0];f.showDaysBreakdown(b,f.filters.userID)}}var f=this,g=this._getDataForTotalHours(a),h=google.visualization.arrayToDataTable(g),i={title:c,titleTextStyle:{fontSize:"20"},height:400,vAxis:{title:d,titleTextStyle:{fontSize:"18"}},hAxis:{title:"Months",titleTextStyle:{fontSize:"18"}},seriesType:"bars",series:{1:{type:"line"},2:{type:"line",color:"green"}},legend:{textStyle:{fontSize:"16"}},tooltip:{textStyle:{fontSize:"20"}}},j=new google.visualization.NumberFormat({pattern:"#,###.00"});j.format(h,1),j.format(h,2);var k=new google.visualization.ComboChart(document.getElementById(b));k.draw(h,i),google.visualization.events.addListener(k,"select",e)},renderCharts:function(a){this._renderComboChart(a,"totalHoursChart","Monthly billing hours per year and month","Total Hours")}}),_.isUndefined(App.Views.Accounting)&&(App.Views.Accounting={}),_.isUndefined(App.Views.Accounting.Pace)&&(App.Views.Accounting.Pace={}),App.Views.Accounting.Pace.Index=App.Helpers.View.extend({template:App.Templates.accountingPaceIndex,className:"AccountingPaceIndex",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=App.Helpers.Collection.extend();this.group_of_attorneys=new b},events:{"changeDate #paceDatePicker":"loadData"},afterRender:function(){var a=this,b=this.$el,c=b.find("#paceDatePicker");c.val(a.options.date),c.trigger("changeDate"),a.showLoader()},loadData:function(a){var b=this,c=$(a.currentTarget),d=c.val(),e=this.options.page;b.showLoader(),b.group_of_attorneys.reset([]),a.stopPropagation(),c.find("tbody").html(""),$.get("/api/pace_table_controller/get_pace_table_report",{date:d,page:e}).done(function(a){var c=_.values(a)||[],d=[],e=[];_.each(c,function(a){var b=a.office_id,c=a.office,e=_.findWhere(d,{id:b});!_.isUndefined(e)||_.isNull(b)||_.isNull(c)||d.push({id:b,name:c})}),d=_.sortBy(d,"name"),_.each(d,function(a){var b,d=[],f=_.where(c,{office_id:a.id});f.length&&(_.each(f,function(a){var b=_.findWhere(d,{attorney_id:a.attorney_id});_.isUndefined(b)&&d.push(a)}),b=_.sortBy(d,"attorney_name"),a.attorneys=_.uniq(b),a["class"]="bgc-grey-medium",e.push(a))}),e=_.sortBy(e,"name"),_.each(e,function(a){a["class"]="bgc-grey-medium"}),b.group_of_attorneys.reset(e)}).always(function(){b.removeLoader()})}}),_.isUndefined(App.Views.Base)&&(App.Views.Base={}),App.Views.Base.Footer=App.Helpers.View.extend({template:App.Templates.baseFooter,className:"footer",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},afterRender:function(){var a=this.$el;a.find(".copyRdate").html(moment().year())}}),_.isUndefined(App.Views.Base)&&(App.Views.Base={}),App.Views.Base.Header=App.Helpers.View.extend({
template:App.Templates.baseHeader,className:"header",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.listenTo(this.model,"all",this.handlerHeader),this.userInfo=new App.Helpers.Model},events:{"click #toggle-billing-portal":"showBillingPortal"},showBillingPortal:function(a){var b=$(a.currentTarget),c=this.$el;if(b.find(".glyphicon-triangle-bottom").length){this.$el.find("#billing-portal").show();var d=new App.Views.BillingPortal.Index({model:App.loginModel,slowMotionRender:!0});App.Helpers.htmlView(d,"#billing-portal"),b.find(".glyphicon").removeClass("glyphicon-triangle-bottom"),b.find(".glyphicon").addClass("glyphicon-triangle-top"),c.find(".profile-options-container").addClass("profile-billing-open")}else this.$el.find("#billing-portal").slideUp("slow"),b.find(".glyphicon").removeClass("glyphicon-triangle-top"),b.find(".glyphicon").addClass("glyphicon-triangle-bottom"),c.find(".profile-options-container").removeClass("profile-billing-open")},handlerHeader:function(){var a=this.$el;this.model.get("isClientRep")&&a.find(".my-billing").hide(),App.loginModel.get("first")&&(this.userInfo.set("name",App.loginModel.get("first")+" "+App.loginModel.get("last")),1===App.loginModel.get("isClientRep")||1===App.loginModel.get("isDA")||1===App.loginModel.get("isHearingRep")?this.userInfo.set("icon","fa fa-user"):this.userInfo.set("icon","fa fa-user"),this.userInfo.set("firm",App.loginModel.get("firm")?"- "+App.loginModel.get("firm"):""))}}),_.isUndefined(App.Views.Base)&&(App.Views.Base={}),App.Views.Base.LandingPage=App.Helpers.View.extend({template:App.Templates.baseLandingPage,className:"BaseLandingPage",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.modules=this.options.modules,this.firmModules=new App.Collections.Modules,this.listenTo(this.modules,"sync",function(a,c){b.modules.reset(c),b.firmModules.fetch({success:function(a,c){var d=_.findWhere(c,{moduleID:App.Const.wcFileModule});_.isUndefined(d)||b.modules.set({active:1,moduleDescription:"WC-Lien",moduleID:1.1,setStatus:"wc-lien",moduleName:"wc-ln"},{merge:!0,remove:!1}),b.modules.set(a.toJSON(),{merge:!0,remove:!1}),b.modules.sortBy="moduleID",b.modules.sortOrder="asc",b.modules.sort(),b.modules.reset(b.modules.toJSON())}})}),this.listenTo(this.firmModules,"sync")},events:{},getClass:function(){var a=this.module.get("active")?"active":"off";return"btn-mod btn-"+this.module.get("moduleName")+" "+a},getFilesIndexURL:function(){var a=this.module.get("moduleID"),b="#files";return this.module.get("setStatus")?this.module.get("active")?b+"?fileStatus="+this.module.get("setStatus")+"&landing_page=1":"javascript:;":this.module.get("active")?b+"?module="+a+"&fileStatus=active&landing_page=1":"javascript:;"}}),_.isUndefined(App.Views.Base)&&(App.Views.Base={}),App.Views.Base.Layout=App.Helpers.View.extend({template:App.Templates.baseLayout,className:"layout",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{}}),_.isUndefined(App.Views.Billing)&&(App.Views.Billing={}),_.isUndefined(App.Views.Billing.BatchHistory)&&(App.Views.Billing.BatchHistory={}),App.Views.Billing.BatchHistory.Index=App.Helpers.View.extend({template:App.Templates.billingBatchHistoryIndex,className:"BillingBatchHistoryIndex",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.lock=!1,this.collection=new Uit.Collection},events:{"click .icon-typeahead-down":"showAllEntities","click .download-batch":"downloadBatch",'change [name="batchDate"]':"batchDate","change .batchName":"resetBatchNameTypeahead"},afterRender:function(){App.Helpers.initTypeahead({view:this,elemClass:".typeahead.batchName",urlBuild:{url:"api/typeahead_controller/search_batchName"},processFunction:$.proxy(this.processBatchNameTypeahead,this)}),this._fetch()},resetBatchNameTypeahead:function(){var a=this.$el;""===a.find(".typeahead.batchName").typeahead("val")&&this._fetch()},processBatchNameTypeahead:function(a){var b=a.id;this._fetch(!1,b)},_fetch:function(){var a=arguments.length<=0||void 0===arguments[0]?!1:arguments[0],b=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],c=this,d={};a&&(d.invoiceDate=a),b&&(d.batchName=b),this.lock===!1&&(this.lock=!0,this.showLoader(),$.get("api/billing_invoices_controller/get_batch_history",d,function(a){a.Success&&"No records"===a.Success?c.collection.reset():c.collection.reset(a)}).always(function(){c.lock=!1,c.removeLoader()}))},batchDate:function(){var a=this.$el,b=a.find('[name="batchDate"]').val();this._fetch(b)},downloadBatch:function(a){var b=$(a.currentTarget),c=b.data("batch-name"),d=new App.Helpers.Toast({message:"The server is creating the zip, your download should begin soon...",classType:"success",fadeOut:5e3});d.render();var e=$('<form action="api/billing_invoices_controller/regenerate_batch" method="post"></form>'),f=$('<input type="hidden" name="batchName"" value="'+c+'" />'),g=$('<input type="hidden" name="'+$.cookie("token_name")+'" value="'+$.cookie("cf_csrf_cookie")+'" />');e.append(f),e.append(g),$("body").append(e),e.submit(),e.remove()}}),_.isUndefined(App.Views.Billing)&&(App.Views.Billing={}),_.isUndefined(App.Views.Billing.BillsHistory)&&(App.Views.Billing.BillsHistory={}),App.Views.Billing.BillsHistory.Index=App.Helpers.View.extend({template:App.Templates.billingBillsHistoryIndex,className:"BillingBillsHistoryIndex",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{"click .goToBill":"goToBill"},goToBill:function(a){var b=$(a.currentTarget),c=b.data("billing-id"),d=b.data("event-id"),e=b.data("file-number"),f=b.data("module-id"),g=App.Helpers.getFileURL(e,f,d,c);window.open(g,"_blank")}}),_.isUndefined(App.Views.Billing)&&(App.Views.Billing={}),_.isUndefined(App.Views.Billing.CurrentBilling)&&(App.Views.Billing.CurrentBilling={}),App.Views.Billing.CurrentBilling.Index=App.Helpers.View.extend({template:App.Templates.billingCurrentBillingIndex,className:"index-current-billing",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.filters={},this.lock=!1,this.listenTo(this.collection,"sync",function(){b.collection.sortBy="fileTitle",b.collection.sort(),b.removeLoader()}),this.colModules=new App.Collections.Modules,this.colModules.fetch(),this.filters.moduleID=0,this.$el.find("[name=calculateDate]").val("No Date")},events:{"click .icon-typeahead-down":"showAllEntities","click .sortable":"sortFileBills","click .select-all-check":"toggleAllCheckboxes","click .bill-check":"toggleSingleCheck",'change [name="cutDay"]':"changeCutDay",'change [name="calculateDate"]':"_getCalculatedDays",'change [name="minBillingDays"]':"changeMinBillingDays",'change [name="minBillingAmt"]':"changeMinBillingAmt",'change [name="moduleID"]':"changeModuleID","click .invoice-btn":"createInvoices"},_getCalculatedDate:function(){var a=this.$el,b=moment(a.find('[name="cutDay"]').val()),c=a.find('[name="minBillingDays"]').val();a.find("[name=calculateDate]").val(b.subtract(c,"d").format("YYYY-MM-DD"))},_getCalculatedDays:function(){var a=this.$el,b=moment(a.find('[name="cutDay"]').val()),c=a.find('[name="calculateDate"]').val(),d=moment(b).diff(c,"days");if(d>0)a.find("[name=minBillingDays]").val(d),this.filters.minBillingDays=d,this.getData();else{a.find('[name="calculateDate"]').val(c);var e=new App.Helpers.Toast({message:"Error: the selected Date should be before than the Cut Date",classType:"danger",fadeOut:5e3});e.render()}},afterRender:function(){App.Helpers.initTypeahead({view:this,elemClass:".typeahead.clientName",urlBuild:{url:"api/typeahead_controller/search_clients"},processFunction:$.proxy(this.processClientTypeahead,this)})},sortFileBills:function(a){var b,c=$(a.currentTarget),d=this.$el,e=this.collection.clone(),f=d.find(".bill-check:checkbox:checked").map(function(){return d.find(this).data("file-number")}).get();b=c.find(".fa-chevron-down").length?"asc":"desc",d.find("#current-invoice-heads .fa").remove(),c.append("asc"===b?'<i class="p-left-5 fa fa-chevron-up"></i>':'<i class="p-left-5 fa fa-chevron-down"></i>'),this.collection.reset(e.models),this.collection.sortBy=c.data("sort"),this.collection.sortOrder=b,this.collection.sort(),f.length>0&&_.each(f,function(a){d.find('.bill-check[data-file-number="'+a+'"]').prop("checked",!0)})},_resetChecks:function(){this.$el.find("#checked-bills-length").html("0"),this.$el.find("#checked-bills-btn").attr("disabled","disabled"),this.$el.find(".select-all-check").prop("checked",!1),this.checkedBills=[],this.filters.checkedBills=[]},createInvoices:function(){var a=this.filters;a.checkedBills=_.uniq(this.checkedBills);var b="This will mark the current selection of "+a.checkedBills.length+" bills as invoiced and save a .zip file containing one file for each invoice. Continue?",c=new App.Views.Shared.AlertView({processFunction:"processCreateInvoices",viewClass:".index-current-billing",params:{params:a},msg:b,title:"Create Invoice"}),d=new App.Helpers.Modal({view:c});d.show()},processCreateInvoices:function(a){var b=this,c=new App.Helpers.Toast({message:"The server is creating the invoice, your download should begin soon...",classType:"success",fadeOut:5e3});c.render(),b.totalSumAllBills="Recalculating...";var d=$('<form action="api/billing_invoices_controller/billing_invoices" method="post"></form>'),e=$('<input type="hidden" name="params" />'),f=$('<input type="hidden" name="'+$.cookie("token_name")+'" value="'+$.cookie("cf_csrf_cookie")+'" />');e.val(JSON.stringify(a.params)),d.append(e),d.append(f),$("body").append(d),d.submit(),d.remove(),this.collection.remove(a.params.checkedBills);var g=this.collection.models;this.collection.reset(g),this._resetChecks(),setTimeout(function(){b.totalSumAllBills=_.reduce(b.collection.models,function(a,b){return parseFloat(a)+parseFloat(b.get("billingTotal"))},0).toFixed(2),b.totalSumAllBills=App.Helpers.CurrencyFormat(b.totalSumAllBills)},100)},changeCutDay:function(a){a.preventDefault(),a.stopPropagation();var b=$(a.currentTarget);this.filters.cutDay=b.val(),this.getData(),this._getCalculatedDate()},changeMinBillingDays:function(a){a.preventDefault(),a.stopPropagation();var b=$(a.currentTarget);this.filters.minBillingDays=b.val(),this.getData(),this._getCalculatedDate()},changeModuleID:function(a){a.preventDefault(),a.stopPropagation();var b=$(a.currentTarget);this.filters.moduleID=b.val(),this.getData()},changeMinBillingAmt:function(a){a.preventDefault(),a.stopPropagation();var b=$(a.currentTarget);this.filters.minBillingAmt=b.val(),this.getData()},toggleSingleCheck:function(a){var b=$(a.currentTarget);this._handleCheckbox(b)},isUnreviewed:function(){return 0===this.model.get("reviewed")?!0:!1},_handleCheckbox:function(a){var b=this.$el;a.is(":checked")?this.checkedBills.push(a.data("file-number")):(b.find(".select-all-check").prop("checked",!1),this.checkedBills=_.without(this.checkedBills,a.data("file-number")));var c=_.uniq(this.checkedBills).length;c>0?(b.find("#checked-bills-btn").removeAttr("disabled"),b.find("#total-selected").show(),b.find("#total-selected").html("Total Selected: $"+this._calculateTotalChecked())):(b.find("#checked-bills-btn").attr("disabled","disabled"),b.find("#total-selected").hide()),b.find("#checked-bills-length").html(c)},_calculateTotalChecked:function(){var a=this.$el,b=this,c=0;return _.each(a.find(".bill-check:checked"),function(d){var e=b.collection.findWhere({fileNumber:a.find(d).data("file-number")});c+=e.get("billingTotal")}),App.Helpers.CurrencyFormat(c)},toggleAllCheckboxes:function(a){var b=$(a.currentTarget),c=this.$el,d=this;_.each(c.find(".bill-check"),function(a){var c=$(a).data("file-number");d.collection.findWhere({fileNumber:c}).get("reviewed")&&($(a).prop("checked",b.is(":checked")),d._handleCheckbox($(a)))})},_disableFilters:function(){var a=this.$el;a.find('[name="clientName"]').attr("disabled","disabled"),a.find('[name="cutDay"]').attr("disabled","disabled"),a.find('[name="minBillingAmt"]').attr("disabled","disabled"),a.find('[name="minBillingDays"]').attr("disabled","disabled")},_enableFilters:function(){var a=this.$el;a.find('[name="clientName"]').removeAttr("disabled"),a.find('[name="cutDay"]').removeAttr("disabled"),a.find('[name="minBillingAmt"]').removeAttr("disabled"),a.find('[name="minBillingDays"]').removeAttr("disabled")},getData:function(){var a=this,b=this.$el;this.filters&&this.filters.clientID&&this.filters.cutDay&&(this.collection.reset(),this.showLoader(),this.lock===!1&&(this.lock=!0,this._disableFilters(),this.collection.fetch({success:function(c,d,e){if(204===e.xhr.status){var f="No files to bill with current parameters.",g=new App.Helpers.Toast({message:f,classType:"warning",fadeOut:5e3});g.render(),a.totalSumAllBills=App.Helpers.CurrencyFormat(0),b.find("#total-selected").hide()}else a.checkedBills=[],a.totalSumAllBills=_.reduce(a.collection.models,function(a,b){return parseFloat(a)+parseFloat(b.get("billingTotal"))},0).toFixed(2),a.totalSumAllBills=App.Helpers.CurrencyFormat(a.totalSumAllBills),a.$el.find(".totalSummAllBills").show(),a._resetChecks();a.lock=!1,a._enableFilters(),a.removeLoader()},error:function(b,c){if(!_.isUndefined(c.responseJSON)){var d=c.responseJSON.Error,e=new App.Helpers.Toast({message:d,classType:"danger",fadeOut:5e3});e.render(),a.removeLoader()}a.lock=!1,a._enableFilters()},data:$.param(a.filters)})))},processClientTypeahead:function(a){this.filters.clientID=a.clientID,this.filters.minBillingAmt=a.minBillingAmt||0,this.minBillingAmt=a.minBillingAmt||0,this.filters.minBillingDays=a.minBillingDays||0,this.minBillingDays=a.minBillingDays||0,this.getData()}}),_.isUndefined(App.Views.Billing)&&(App.Views.Billing={}),_.isUndefined(App.Views.Billing.DailyBilling)&&(App.Views.Billing.DailyBilling={}),App.Views.Billing.DailyBilling.Index=App.Helpers.View.extend({template:App.Templates.billingDailyBillingIndex,className:"BillingDailyBillingIndex",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.fetchLock=!0,this.cutDate=moment().subtract(1,"day"),this.listenTo(this.options.clientCol,"sync",function(a,c){b.options.clientCol.reset(c),b._fetchCurrentBillingAndUnlock()}),this.colModules=new App.Collections.Modules,this.colModules.fetch()},events:{"click .bill-check":"recalculateBatch","click .bill-batch":"billSelectedChecks",'change [name="cutDay"]':"changeCutDate","click .link-view-bill":"redirectToFile",'change [name="moduleID"]':"_fetchCurrentBillingAndUnlock"},_fetchCurrentBillingAndUnlock:function(){this.showLoader(),this._getCurrentBillingForClients(),this.removeLoader()},afterRender:function(){var a=this.$el;a.find('[name="cutDay"]').datepicker("setDate",this.cutDate.format("YYYY-MM-DD"))},changeCutDate:function(){var a=this.$el;if(!this.fetchLock){this.fetchLock=!0;var b=a.find('[name="cutDay"]').val();this.cutDate=moment(b),this._fetchCurrentBillingAndUnlock()}},billSelectedChecks:function(a){var b=$(a.currentTarget),c=b.data("client-id"),d=this.$el,e=d.find('input[data-client-id="'+c+'"]:checked'),f=b.data("min-days"),g=b.data("min-amt"),h=[],i={};_.each(e,function(a){var b=$(a).data("file-number");h.push(b)}),i.checkedBills=h,i.clientID=c,i.minBillingDays=f,i.cutDay=this.cutDate.format("YYYY-MM-DD"),i.minBillingAmt=g;var j=new App.Helpers.Toast({message:"The server is creating the invoice, your download should begin soon...",classType:"success",fadeOut:5e3});j.render();var k=$('<form action="api/billing_invoices_controller/billing_invoices" method="post"></form>'),l=$('<input type="hidden" name="params" />'),m=$('<input type="hidden" name="'+$.cookie("token_name")+'" value="'+$.cookie("cf_csrf_cookie")+'" />');l.val(JSON.stringify(i)),k.append(l),k.append(m),$("body").append(k),k.submit(),k.remove(),e.parent().parent().remove()},recalculateBatch:function(a){var b=$(a.currentTarget),c=b.data("client-id"),d=this.$el,e=d.find('input[data-client-id="'+c+'"]:checked');if(e.length){d.find("#clientID-"+c+" .bill-batch").removeAttr("disabled");var f=0;_.each(e,function(a){f+=parseFloat($(a).data("billing-total-file"))}),d.find("#clientID-"+c+" .client-total").html("$"+App.Helpers.CurrencyFormat(f))}else d.find("#clientID-"+c+" .bill-batch").attr("disabled","disabled"),d.find("#clientID-"+c+" .client-total").html("")},_getCurrentBillingForClients:function(){var a=this,b=1,c=this.$el;this._paintBlocks(this.options.clientCol.models),_.each(this.options.clientCol.models,function(d){var e={};e.clientID=d.get("clientID"),e.minBillingAmt=d.get("minBillingAmt")||0,e.minBillingDays=parseInt(d.get("minBillingDays"),10),e.cutDay=a.cutDate.format("YYYY-MM-DD"),e.moduleID=c.find('[name="moduleID"]').val(),$.get("/api/billing_controller/get_daily_billing/",e,function(c){a.fetchLock=!1,a._fillFilesPerClient(e.clientID,c,e.minBillingDays,e.minBillingAmt),b+=1,b===a.options.clientCol.length&&(a.removeLoader(),a.checkStoragePosition())})})},_oneBlockHtml:function(a){var b='<tr id="clientID-'+a.get("clientID")+'" class="display-none"><td class=" font-bold font-size-16 v-align-middle">'+a.get("clientName")+" ("+a.get("clientNameShort")+')</td><td class="v-align-middle font-size-16 font-bold">'+a.get("minBillingDays")+' days</td><td class=""></td><td class=""><button data-min-days="'+a.get("minBillingDays")+'" data-min-amt="'+a.get("minBillingAmt")+'"  data-client-id="'+a.get("clientID")+'" type="button" class="btn btn-info bill-batch" disabled>Bill Batch</button></td><td class="client-total v-align-middle font-size-16 font-bold"></td></tr>';return b},_singleFileRowHtml:function(a,b,c){var d="",e=!1;return a.get("fileStatusOpenOrClose")?(d+='<tr class=""><td class="v-align-middle"><i class="fa fa-file p-right-5 " aria-hidden="true"></i>'+a.get("fileTitle")+":"+a.get("fileNumber")+" "+a.get("moduleName")+"</td>",a.get("maturityDays")>=0?d+=a.get("maturityDays")>=9999999?'<td class="v-align-middle"><i class="fa fa-arrow-up" aria-hidden="true"></i> $'+App.Helpers.CurrencyFormat(c)+"</td>":'<td class="v-align-middle">'+a.get("maturityDays")+"</td>":(e=!0,d+='<td class="c-red v-align-middle">'+a.get("maturityDays")+"</td>")):d+='<tr class="bgc-grey-medium"><td class="v-align-middle"><i class="fa fa-file-excel-o p-right-5" aria-hidden="true"></i>'+a.get("fileTitle")+":"+a.get("fileNumber")+" "+a.get("moduleName")+'</td><td class="v-align-middle">closed</td>',a.get("reviewed")?(d+='<td class=""><a href="javascript:void(0);" class="link-view-bill" data-filenumber="'+a.get("fileNumber")+'"><button type="button" class="btn btn-success btn-sm">Reviewed</button></a></td>',d+=e?'<td class="t-align-center v-align-middle"></td>':'<td class="t-align-center v-align-middle"><input data-billing-total-file="'+a.get("billingTotal")+'" data-file-number="'+a.get("fileNumber")+'" data-client-id="'+b+'"  class="bill-check" type="checkbox" /></td>'):d+='<td class="v-align-middle"><a class="link-view-bill" href="javascript:void(0);" data-filenumber="'+a.get("fileNumber")+'" data-module-id="'+a.get("moduleID")+'"><button type="button" class="btn btn-warning btn-sm">View Bills</button></a></td><td class="t-align-center v-align-middle"></td>',d+='<td class="v-align-middle">$'+App.Helpers.CurrencyFormat(a.get("billingTotal"))+"</td></tr>"},_fillFilesPerClient:function(a,b,c,d){var e="",f=this,g=this.$el,h=new Uit.Collection;h.add(b),_.each(h.models,function(a){var b=moment(a.get("lastInvoicedDate")),e=moment(a.get("openDate")),g=f.cutDate.diff(e,"days"),h=f.cutDate.diff(b,"days"),i=Math.abs(g>h?h:g),j=i>c?i-c:-1*(c-i);a.get("fileStatusOpenOrClose")?d&&a.get("billingTotal")>=d?a.set("maturityDays",9999999):a.set("maturityDays",j):a.set("maturityDays",-.1)}),h.sortBy="maturityDays",h.sortOrder="desc",h.sort(),_.each(h.models,function(b){e+=f._singleFileRowHtml(b,a,d)}),e&&(g.find("#clientID-"+a).removeClass("display-none"),g.find("#clientID-"+a).after(e))},_paintBlocks:function(a){var b=this,c=this.$el,d="";c.find("#daily-billing-table tr:gt(0)").remove(),_.each(a,function(a){d+=b._oneBlockHtml(a)}),c.find("#daily-billing-table").append(d)},redirectToFile:function(a){var b=this.$el.find(a.currentTarget),c=b.data("filenumber"),d=b.data("module-id"),e=App.Helpers.getFileURL(c,d)+"/billings";localStorage.setItem("billing-fileNumber",c),this.handlerScrollTop(c),window.open(e,"_blank")},handlerScrollTop:function(a){var b=this.$el,c=b.find('a[data-filenumber="'+a+'"]');b.find("tr").removeClass("highlightDaily"),c.parent("td").parent("tr").addClass("highlightDaily"),c.length&&$("body,html").animate({scrollTop:c.offset().top-18},600)},checkStoragePosition:function(){var a=this.$el,b=localStorage.getItem("billing-fileNumber"),c=a.find('a[data-filenumber="'+b+'"]');b&&c&&!_.isUndefined(a)&&this.handlerScrollTop(b)}}),_.isUndefined(App.Views.Billing)&&(App.Views.Billing={}),_.isUndefined(App.Views.Billing.PastBilling)&&(App.Views.Billing.PastBilling={}),App.Views.Billing.PastBilling.Index=App.Helpers.View.extend({template:App.Templates.billingPastBillingIndex,className:"pastBillingIndex",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.filters={},this.filters.paginationConstant=100,this.filters.paginationOffset=0,this.filters.orderBy="fileTitle",this.filters.sortOrder="asc",this.filters.moduleID=0,this.colModules=new App.Collections.Modules,this.colModules.fetch()},events:{"click .icon-typeahead-down":"showAllEntities",'change [name="startDate"]':"processDates",'change [name="endDate"]':"processDates",'change [name="paidOrUnpaid"]':"processPaidOrUnpaid","change .clientName":"resetClientTypeahead","change .invoice_typeahead":"resetInvoiceNumberTypeahead","click .sequential-counter":"paginateInvoices","change #paginationSelector":"paginationSelector","change .editInvoice":"editInvoice","click .editInvoice":"preEditInvoice","click .clickNote":"preEditInvoice","click .generateInvoice":"generateInvoice","click .sortable":"sortBy","click .notes-text":"showNote",'blur textarea[name="paymentNote"]':"hideNote","click tr":"placeHandIcon",'change [name="moduleID"]':"changeModuleID"},changeModuleID:function(a){a.preventDefault(),a.stopPropagation();var b=$(a.currentTarget);this.filters.moduleID=b.val(),this._getData()},showNote:function(a){var b=$(a.currentTarget);b.closest("tr").addClass("shadow-row-billing"),b.closest("td").find("textarea").focus()},hideNote:function(a){var b=$(a.currentTarget);b.closest("tr").removeClass("shadow-row-billing")},placeHandIcon:function(a){var b=$(a.currentTarget);this.$el.find(".fa-hand-o-right").remove(),b.find("td:first").prepend('<i class="fa fa-hand-o-right p-right-5 fa-lg"></i>')},afterRender:function(){var a=this,b=this.$el;this._getData(),App.Helpers.initTypeahead({view:this,elemClass:".typeahead.clientName",urlBuild:{url:"api/typeahead_controller/search_clients"},processFunction:$.proxy(this.processClientTypeahead,this)}),App.Helpers.initTypeahead({view:this,elemClass:".typeahead.invoice_typeahead",urlBuild:{url:"api/typeahead_controller/search_invoice"},processFunction:$.proxy(this.processInvoiceTypeahead,this)}),$(".pastBillingIndex").click(function(){if(a.lastCLickedInvoiceRow){var c=b.find('tr[data-invoicenumber="'+a.lastCLickedInvoiceRow+'"]'),d=c.find('[name="paidDate"]').val(),e=c.find('[name="checkNo"]').val(),f=c.find('[name="billingPaid"]').val();""===d||""===e||""===f||"0.00"===f?c.addClass("bg-danger"):c.removeClass("bg-danger"),a.lastCLickedInvoiceRow=void 0}}),$.get("/api/billing_invoices_controller/getInvalidPayments",{},function(a){if(a.length>0){var b=new App.Collections.PastBilling;b.reset(a);var c=new App.Views.Billing.PastBilling.InvalidPayments({collection:b}),d=new App.Helpers.Modal({view:c,sizeModal:"modal-lg"});d.show()}})},sortBy:function(a){var b=$(a.currentTarget),c=b.data("sort"),d="asc",e=this.$el;b.find(".fa-chevron-down").length?(b.find(".fa").removeClass("fa-chevron-down"),b.find(".fa").addClass("fa-chevron-up"),d="DESC"):b.find(".fa-chevron-up").length?(b.find(".fa").removeClass("fa-chevron-up"),b.find(".fa").addClass("fa-chevron-down"),d="asc"):(e.find("#past_billing_header .fa").remove(),b.append('<i class="fa fa-chevron-down"></i>'),d="asc"),this.filters.orderBy=c,this.filters.sortOrder=d,this._getData(!0)},generateInvoice:function(a){var b=$(a.currentTarget),c=b.data("filenumber"),d=b.data("invoicenumber"),e=b.data("filetitle"),f=b.data("clientid"),g=new App.Views.Billing.PastBilling.InvoiceModal({invoiceNumber:d,billingFormat:null,fileTitle:e,clientID:f,fileNumber:c}),h=new App.Helpers.Modal({view:g});h.show()},preEditInvoice:function(a){var b=$(a.currentTarget),c=b.data("invoicenumber"),d=this.collection.get(c),e=this;this.showLoader(),b.prop("disabled",!0),d.fetch({success:function(a){b.prop("disabled",!1),b.focus(),e.collection.add(a),e.removeLoader()},error:function(){var a=new App.Helpers.Toast({message:"Error getting invoice",classType:"danger",fadeOut:5e3});a.render(),e.removeLoader()}})},editInvoice:function(a){var b=$(a.currentTarget),c=b.data("invoicenumber"),d=this.collection.get(c),e=b.attr("name"),f=this;if("billingAdjustment"===e||"billingPaid"===e){if("billingPaid"===e){var g=b.val();d.set("billingPaid",g.replace(",",""))}if("billingAdjustment"===e){var h=b.val();d.set("billingAdjustment",h.replace(",",""))}d.set("reCalculateTotalStats",!0),d.set("reCalculateTotalStats",!0),d.set("clientID",this.filters.clientID),d.set("paidOrUnpaid",this.filters.paidOrUnpaid),d.set("filterStartDate",this.filters.startDate),d.set("filterEndDate",this.filters.endDate)}else d.set("reCalculateTotalStats",!1);if("paidDate"===e||"checkNo"===e||"billingPaid"===e){var i,j=b.parents("tr").find('[name="billingAdjustment"]').val();if(_.isEmpty(j)||d.set("billingAdjustment",j),"paiDate"===e)i=""!==b.val()?b.val():null;else{var k=b.parents("tr").find('[name="paidDate"]').val();i=_.isEmpty(k)?null:k}d.set("paidDate",i),this.lastCLickedInvoiceRow=c,"paidDate"===e&&(_.isNull(d.get("checkNo"))||_.isNull(d.get("billingPaid"))||"0.00"===d.get("billingPaid"))&&b.closest("tr").addClass("bg-danger")}this.showLoader(),d.set("targetAttrName",e),d.save({},{success:function(a,b){b.newCalculations&&f._fillTotalCalculationValues(b.newCalculations);var c=new App.Helpers.Toast({message:"Saved Successfully",classType:"success",fadeOut:3e3});c.render(),f.removeLoader()},error:function(a,b){var c="";_.each(b.responseJSON,function(a){c+="- "+a+"<br/>"});var d=new App.Helpers.Toast({message:c,classType:"danger",fadeOut:5e3});d.render(),f.removeLoader()}})},paginationSelector:function(a){var b=$(a.currentTarget);this.filters.paginationOffset=parseInt(b.val(),10),this.paginationUpperOffset=this.filters.paginationOffset+this.filters.paginationConstant,this._getData(!0)},paginateInvoices:function(a){var b=$(a.currentTarget),c=this.$el;if("load-next"===b.attr("id")){var d=this.filters.paginationOffset+this.filters.paginationConstant;if(d>this.allInvoicesCount)return;this.filters.paginationOffset=d}else if("load-last"===b.attr("id")){var e=this.allInvoicesCount-this.allInvoicesCount%this.filters.paginationConstant;if(e+this.filters.paginationOffset>this.allInvoicesCount)return;this.filters.paginationOffset=e}else if("load-prev"===b.attr("id")){var f=this.filters.paginationOffset-this.filters.paginationConstant;if(0>f)return;this.filters.paginationOffset=f}else if("load-first"===b.attr("id")){if(0===this.filters.paginationOffset)return;this.filters.paginationOffset=0}c.find('#paginationSelector option[value="'+this.filters.paginationOffset+'"]').prop("selected",!0),this._getData(!0)},processPaidOrUnpaid:function(){var a=this.$el,b=a.find('[name="paidOrUnpaid"]').val();this.filters.paidOrUnpaid=b,this._getData()},processDates:function(){var a=this.$el,b=a.find('[name="startDate"]').val(),c=a.find('[name="endDate"]').val();b&&c&&c>b?(this.filters.startDate=b,this.filters.endDate=c,this._getData()):_.isEmpty(b)&&_.isEmpty(c)&&(delete this.filters.startDate,delete this.filters.endDate,this._getData())},getDueAmount:function(){return this.row.getDueAmount()},getCutPercentage:function(){return this.row.getCutPercentage()},getBillingPaidWithDecimalCents:function(){return this.row.getBillingPaidWithDecimalCents()},getBillingTotalWithDecimalCents:function(){return this.row.getBillingTotalWithDecimalCents()},getBillingAdjustmentWithDecimalCents:function(){return this.row.getBillingAdjustmentWithDecimalCents()},getBillingAdjustmentCurrencyFormat:function(){return App.Helpers.CurrencyFormat(this.row.getBillingAdjustmentWithDecimalCents(),!0)},getBillingPaidWithCurrencyFormat:function(){return App.Helpers.CurrencyFormat(this.row.getBillingPaidWithDecimalCents())},_fillTotalCalculationValues:function(a){var b=this.$el;_.isUndefined(b)||(a.allBillingTotal&&b.find("#allBillingTotal").html(App.Helpers.CurrencyFormat(a.allBillingTotal)),a.allBillingAdjustments&&b.find("#allBillingAdjustments").html(App.Helpers.CurrencyFormat(a.allBillingAdjustments)),a.allBillingPaid&&b.find("#allBillingPaid").html(App.Helpers.CurrencyFormat(a.allBillingPaid)),a.allInvoicesCount&&(this.allInvoicesCount=a.allInvoicesCount,b.find("#allInvoicesCount").html(App.Helpers.IntegerWithCommas(a.allInvoicesCount))),a.allAverageCutPercent&&b.find("#allAverageCutPercent").html(parseFloat(a.allAverageCutPercent).toFixed(2)))},_getData:function(a){var b=this,c=this.$el;this.showLoader(),a!==!0&&(this.filters.paginationOffset=0,this.paginationUpperOffset=this.filters.paginationConstant),this.paginationUpperOffset=this.filters.paginationConstant+this.filters.paginationOffset,this.collection.fetch({success:function(a,d){b.collection.reset(d),b.collection.sortBy=b.filters.orderBy,b.collection.sortOrder=b.filters.sortOrder,b.collection.sort(),b.removeLoader(),setTimeout(function(){c.find(".paginationDatepicker").datepicker({autoclose:!0,format:"yyyy-mm-dd",todayHighlight:!0,forceParse:!1}),App.Helpers.addMask(".paginationDatepicker","9999-99-99")},0)},error:function(){b.removeLoader(),b.collection.reset()},data:$.param(b.filters)}),a!==!0&&(c.find("#allBillingTotal").html("0"),c.find("#allBillingAdjustments").html("0"),c.find("#allBillingPaid").html("0"),c.find("#allInvoicesCount").html("0"),c.find("#allAverageCutPercent").html("0"),this.allInvoicesCount=0,$.get("/api/billing_invoices_controller/get_past_billing_total_calculations/",this.filters,function(a){b._fillTotalCalculationValues(a);for(var d="",e=b.filters.paginationOffset;e<b.allInvoicesCount;e+=b.filters.paginationConstant){var f=e+b.filters.paginationConstant;d+='<option value="'+e+'">'+e+" - "+f+"</option>"}c.find("#paginationSelector").html(d),b.collection.sortBy=b.filters.orderBy,b.collection.sortOrder=b.filters.sortOrder,b.collection.sort()}))},processClientTypeahead:function(a){this.filters.clientID=a.clientID,this.filters.billingFormat=a.billingFormat,this._getData()},resetClientTypeahead:function(){var a=this.$el;""===a.find(".typeahead.clientName").typeahead("val")&&(delete this.filters.clientID,this._getData())},processInvoiceTypeahead:function(a){this.filters.invoiceNumber=a.invoiceNumber,this._getData()},resetInvoiceNumberTypeahead:function(){var a=this.$el;""===a.find(".typeahead.invoice_typeahead").typeahead("val")&&(delete this.filters.invoiceNumber,this._getData())}}),_.isUndefined(App.Views.Billing)&&(App.Views.Billing={}),_.isUndefined(App.Views.Billing.PastBilling)&&(App.Views.Billing.PastBilling={}),App.Views.Billing.PastBilling.InvalidPayments=App.Helpers.View.extend({template:App.Templates.billingPastBillingInvalidPayments,className:"BillingPastBillingInvalidPayments",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{"click .preload":"preEditInvoice","change .preload":"saveInvoice","click .saveInvoice":"saveInvoice"},afterRender:function(){var a=this;setTimeout(function(){a.$el.find(".datepickerinvpay").datepicker({autoclose:!0,format:"yyyy-mm-dd",forceParse:!1})},0)},preEditInvoice:function(a){var b=$(a.currentTarget),c=b.data("invoicenumber"),d=this.collection.get(c),e=this;this.showLoader(),d.fetch({success:function(a){e.collection.add(a),e.removeLoader()},error:function(){
var a=new App.Helpers.Toast({message:"Error getting invoice",classType:"danger",fadeOut:5e3});a.render(),e.removeLoader()}})},saveInvoice:function(a){var b=$(a.currentTarget),c=b.data("invoicenumber"),d=this.collection.get(c),e=this,f=b.attr("name"),g=this.$el,h=b.closest("tr").find('[name="paidDate"]').val();h&&""!==h&&d.set("paidDate",h),this.showLoader(),d.set("targetAttrName",f),d.save({},{success:function(a){var b=new App.Helpers.Toast({message:"Saved Successfully",classType:"success",fadeOut:3e3});if(b.render(),e.removeLoader(),a.get("paidDate")&&a.get("checkNo")&&a.get("billingPaid")){e.collection.remove(d),e.collection.reset(e.collection.models),setTimeout(function(){g.find(".datepickerinvpay").datepicker({autoclose:!0,format:"yyyy-mm-dd",forceParse:!1})},0);var c=new App.Helpers.Toast({message:"Payment corrected and removed from list.",classType:"success",fadeOut:3e3});c.render(),0===e.collection.models.length&&g.find(".btn-close").click()}},error:function(a,b){var c="";_.each(b.responseJSON,function(a){c+="- "+a+"<br/>"});var d=new App.Helpers.Toast({message:c,classType:"danger",fadeOut:5e3});d.render(),e.removeLoader()}})}}),_.isUndefined(App.Views.Billing)&&(App.Views.Billing={}),_.isUndefined(App.Views.Billing.PastBilling)&&(App.Views.Billing.PastBilling={}),App.Views.Billing.PastBilling.InvoiceModal=App.Helpers.View.extend({template:App.Templates.billingPastBillingInvoiceModal,className:"invoiceModal",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{"click .btnGenerate":"generateInvoice","click .btnGenerateView":"generateInvoiceModal"},afterRender:function(){var a=this.$el;a.find('[name="invoice-format"] option[value="'+this.options.billingFormat+'"]').prop("selected",!0)},generateInvoice:function(){var a=$('<form action="api/billing_invoices_controller/generateInvoice" method="post"></form>'),b=$('<input type="hidden" name="invoiceNumber" />'),c=$('<input type="hidden" name="billingFormat" />'),d=$('<input type="hidden" name="fileNumber" />'),e=$('<input type="hidden" name="clientID" />'),f=$('<input type="hidden" name="'+$.cookie("token_name")+'" value="'+$.cookie("cf_csrf_cookie")+'" />');b.val(this.options.invoiceNumber),c.val(this.$el.find('[name="invoice-format"]').val()),e.val(this.options.clientID),d.val(this.options.fileNumber),a.append(b),a.append(c),a.append(e),a.append(d),a.append(f),$("body").append(a),a.submit(),a.remove()},generateInvoiceModal:function(){var a=this,b={clientID:a.options.clientID,fileTitle:a.options.fileTitle,fileNumber:a.options.fileNumber,invoiceNumber:a.options.invoiceNumber,billingFormat:a.$el.find('[name="invoice-format"]').val(),viewType:1,modal:1},c=new App.Views.Billing.PastBilling.Modals.Invoice(b),d={view:c,sizeModal:"modal-lg"},e=new App.Helpers.Modal(d);e.show()}}),_.isUndefined(App.Views.Billing)&&(App.Views.Billing={}),_.isUndefined(App.Views.Billing.PastBilling)&&(App.Views.Billing.PastBilling={}),_.isUndefined(App.Views.Billing.PastBilling.Modals)&&(App.Views.Billing.PastBilling.Modals={}),App.Views.Billing.PastBilling.Modals.Invoice=App.Helpers.View.extend({template:App.Templates.billingPastBillingModalsInvoice,className:"BillingPastBillingModalsInvoice",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{"click .btnFullScreen":"generateInvoiceView"},afterRender:function(){var a={invoiceNumber:this.options.invoiceNumber,billingFormat:this.options.billingFormat,viewType:this.options.viewType,fileNumber:this.options.fileNumber,clientID:this.options.clientID,modal:1},b="api/billing_invoices_controller/generateInvoice?"+$.param(a);$.get(b,function(b){var c="PDF"===a.billingFormat?b:rivets.formatters.linebreaksbr(b);$("#modal-file-view-invoice-view").html(c),$(".modal-lg").css({width:"90%"})})},generateInvoiceView:function(){var a=$('<form action="api/billing_invoices_controller/generateInvoice" target="_blank" method="get"></form>'),b=$('<input type="hidden" name="invoiceNumber" />'),c=$('<input type="hidden" name="billingFormat" />'),d=$('<input type="hidden" name="fileNumber" />'),e=$('<input type="hidden" name="clientID" />'),f=$('<input type="hidden" name="viewType" value="1" />');b.val(this.options.invoiceNumber),c.val(this.options.billingFormat),e.val(this.options.clientID),d.val(this.options.fileNumber),a.append(b),a.append(c),a.append(f),a.append(e),a.append(d),$("body").append(a),a.submit(),a.remove()}}),_.isUndefined(App.Views.Billing)&&(App.Views.Billing={}),_.isUndefined(App.Views.Billing.Shared)&&(App.Views.Billing.Shared={}),App.Views.Billing.Shared.NewBill=App.Helpers.View.extend({template:App.Templates.billingSharedNewBill,className:"BillingSharedNewBill",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.linkModel=new App.Helpers.Model,this.linkModel.set("newTabText","Create bill in new tab"),this.linkModel.set("sameTabText","Create bill in same tab"),this.eventCategoryCol=new App.Collections.EventTypeCategories},events:{"click #new-tab-bill-creation":"new_tab_bill_creation","click #same-tab-bill-creation":"same_tab_bill_creation","click #eventType-selected":"eventType_selected","click #eventID-selected":"eventID_selected","change #new-event-category":"setEventCategoryID","click .icon-typeahead-down":"showAllEntities"},afterRender:function(){var a=this;App.Helpers.initTypeahead({view:this,elemClass:".typeahead.files_typeahead",urlBuild:{url:"api/typeahead_controller/search_files_without_filters",resource:function(){var b=a.linkModel.get("eventID");return b?b:""}},processFunction:$.proxy(this.processFilesTypeahead,this)}),App.Helpers.initTypeahead({view:this,elemClass:".typeahead.events_typeahead",urlBuild:{url:"api/typeahead_controller/search_events",resource:function(){var b=a.linkModel.get("fileNumber");return b?b:""}},processFunction:$.proxy(this.processEventsTypeahead,this)}),App.Helpers.initTypeahead({view:this,elemClass:".typeahead.events_type_typeahead",urlBuild:{url:"api/typeahead_controller/search_eventTypes",resource:function(){var b=a.linkModel.get("eventTypeCategoryID");return b?b:""}},processFunction:$.proxy(this.processEventsTypeTypeahead,this)})},eventType_selected:function(){this.$el.find("#eventID-selected").addClass("set-disabled"),this.$el.find("#eventType-selected").removeClass("set-disabled")},eventID_selected:function(){this.$el.find("#eventType-selected").addClass("set-disabled"),this.$el.find("#eventID-selected").removeClass("set-disabled")},processFilesTypeahead:function(a){this.$el.find(".files_typeahead").typeahead("val",a.typeaheadResult),this.linkModel.set("fileNumber",a.fileNumber),this.linkModel.set("fileStatus",a.fileStatus),this.linkModel.set("fileTitle",a.fileTitle),this.linkModel.set("moduleID",a.moduleID),this.clearEventInfo(),this.eventCategoryCol.reset(),this.eventCategoryCol.moduleID=a.moduleID,this.eventCategoryCol.fetch(),this._enableGoToCreateBill()},processEventsTypeahead:function(a){this.$el.find(".events_typeahead").typeahead("val",a.typeaheadResult),this.linkModel.set("eventID",a.eventID),this.linkModel.set("eventTitle",a.eventTitle),this.linkModel.set("shortNote",a.shortNote),this.linkModel.set("newTabText","Create bill in new tab"),this.linkModel.set("sameTabText","Create bill in same tab"),this.clearEventInfo("existing"),this._enableGoToCreateBill()},processEventsTypeTypeahead:function(a){this.$el.find(".events_type_typeahead").typeahead("val",a.typeaheadResult),this.linkModel.set("eventTypeID",a.eventTypeID),this.linkModel.set("eventTypeName",a.eventTypeName),this.linkModel.set("childTable",a.childTable),this.linkModel.set("eventTypeResult",a.typeaheadResult),this.linkModel.set("defaultRead",a.defaultRead),this.linkModel.set("newTabText","Create new event in new tab"),this.linkModel.set("sameTabText","Create new event in same tab"),this.clearEventInfo("new"),this._enableGoToCreateBill()},setEventCategoryID:function(){var a=this.$el.find("#new-event-category option:selected").val(),b=this.$el.find("#new-event-category option:selected").text();"-1"!==a?(this.linkModel.set("eventTypeCategoryID",a),this.linkModel.set("eventTypeCategoryName",b),this.clearEventInfo("new")):(this.linkModel.set("eventTypeCategoryID",void 0),this.linkModel.set("eventTypeCategoryName",void 0)),this.$el.find(".events_type_typeahead").typeahead("val",""),this.linkModel.set("eventTypeID",void 0),this.linkModel.set("eventTypeName",void 0),this.linkModel.set("childTable",void 0),this.linkModel.set("eventTypeResult",void 0),this.linkModel.set("defaultRead",void 0),this._enableGoToCreateBill()},new_tab_bill_creation:function(a){if(a.preventDefault(),a.stopPropagation(),this.linkModel.get("fileNumber")&&(this.linkModel.get("eventID")||this.linkModel.get("eventTypeID"))){var b=void 0,c=void 0;if(1===this.linkModel.get("moduleID")?b="files":2===this.linkModel.get("moduleID")&&(b="subro_files"),this.linkModel.get("eventTypeID")&&this.linkModel.get("eventTypeCategoryID")){var d={eventTypeID:this.linkModel.get("eventTypeID"),eventTypeahead:this.linkModel.get("eventTypeResult"),eventChildTable:this.linkModel.get("childTable"),eventTypeName:this.linkModel.get("eventTypeName"),eventCategoryID:this.linkModel.get("eventTypeCategoryID"),defaultRead:this.linkModel.get("defaultRead")};localStorage.setItem("setDefaultEventType",JSON.stringify(d)),c="#"+b+"/edit/"+this.linkModel.get("fileNumber")+"/events/new"}else c="#"+b+"/edit/"+this.linkModel.get("fileNumber")+"/events/edit/"+this.linkModel.get("eventID")+"/billing/new";this.elementModal.modal("hide"),window.open(c)}},same_tab_bill_creation:function(a){if(a.preventDefault(),a.stopPropagation(),this.linkModel.get("fileNumber")&&(this.linkModel.get("eventID")||this.linkModel.get("eventTypeID"))){var b=void 0,c=void 0;if(1===this.linkModel.get("moduleID")?b="files":2===this.linkModel.get("moduleID")&&(b="subro_files"),this.linkModel.get("eventTypeID")&&this.linkModel.get("eventTypeCategoryID")){var d={eventTypeID:this.linkModel.get("eventTypeID"),eventTypeahead:this.linkModel.get("eventTypeResult"),eventChildTable:this.linkModel.get("childTable"),eventTypeName:this.linkModel.get("eventTypeName"),eventCategoryID:this.linkModel.get("eventTypeCategoryID"),defaultRead:this.linkModel.get("defaultRead")};localStorage.setItem("setDefaultEventType",JSON.stringify(d)),c="#"+b+"/edit/"+this.linkModel.get("fileNumber")+"/events/new"}else c="#"+b+"/edit/"+this.linkModel.get("fileNumber")+"/events/edit/"+this.linkModel.get("eventID")+"/billing/new";this.elementModal.modal("hide"),Backbone.history.navigate(c,{trigger:!0})}},isFileOpened:function(){return this.linkModel.get("fileStatus")&&!this.linkModel.get("fileStatus").toLowerCase().includes("closed")?!0:!1},setEventTitle:function(){if(this.linkModel.get("eventTitle")||this.linkModel.get("shortNote")){var a=this.linkModel.get("shortNote")?"- "+this.linkModel.get("shortNote"):"",b=this.linkModel.get("eventTitle")?this.linkModel.get("eventTitle"):"";return"Event: "+b+" "+a}if(this.linkModel.get("eventTypeID")){var c=this.linkModel.get("eventTypeCategoryName"),d=this.linkModel.get("eventTypeName");return"New Event - Category: "+c+" - EventType: "+d}return""},clearEventInfo:function(){var a=arguments.length<=0||void 0===arguments[0]?!1:arguments[0],b=this.$el;a&&"existing"===a||(b.find(".events_typeahead").typeahead("val",""),this.linkModel.set("eventID",void 0),this.linkModel.set("eventTitle",void 0),this.linkModel.set("shortNote",void 0)),a&&"new"===a||(this.linkModel.set("eventTypeCategoryID",void 0),this.linkModel.set("eventTypeCategoryName",void 0),b.find("#new-event-category").val("-1"),b.find(".events_type_typeahead").typeahead("val",""),this.linkModel.set("eventTypeID",void 0),this.linkModel.set("eventTypeName",void 0),this.linkModel.set("childTable",void 0),this.linkModel.set("eventTypeResult",void 0),this.linkModel.set("defaultRead",void 0))},_enableGoToCreateBill:function(){var a=this.$el;this.linkModel.get("fileNumber")&&(this.linkModel.get("eventID")||this.linkModel.get("eventTypeID"))?a.find(".redirect-bill-creation").prop("disabled",!1):a.find(".redirect-bill-creation").prop("disabled",!0)}}),_.isUndefined(App.Views.BillingPortal)&&(App.Views.BillingPortal={}),App.Views.BillingPortal.ClientModal=App.Helpers.View.extend({template:App.Templates.billingPortalClientModal,className:"clientModal",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.filters={},this.collection=new App.Helpers.Collection,this.fetchData()},events:{"click .billingRow":"goToBill"},goToBill:function(a){var b=$(a.currentTarget),c=b.data("billingid"),d=b.data("eventid"),e=b.data("filenumber"),f="#files/edit/"+e+"/events/edit/"+d+"/billing/edit/"+c;window.open(f,"_blank")},afterRender:function(){this.showLoader()},fetchData:function(){var a=this;this.filters.clientGroupName=this.options.clientGroupName,this.filters.isTimekeeper=this.options.isTimekeeper,this.filters.specificDay=this.options.specificDay,$.get("/api/billing_portal_controller/get_client_group_breakdown_per_day/",this.filters,function(b){a.collection.reset(),a.collection.add(b),a.removeLoader()})}}),_.isUndefined(App.Views.BillingPortal)&&(App.Views.BillingPortal={}),App.Views.BillingPortal.Index=App.Helpers.View.extend({template:App.Templates.billingPortalIndex,className:"billingPortalIndex",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.dailyFilters={},this.clientFilters={},this.generalFilters={},this.monthlyFilters={},this.generalFilters.isTimekeeper=0,this.generalFilters.view="daily";var c=moment().add(4,"days").format("YYYY-MM-DD"),d=moment().subtract(4,"days").format("YYYY-MM-DD");this.dailyFilters.endDate=c,this.dailyFilters.startDate=d;var e=moment().add(4,"months"),f=moment().subtract(4,"months");this.monthlyFilters.endMonth=e.year()+"-"+(e.month()+1)+"-01",this.monthlyFilters.startMonth=f.year()+"-"+(f.month()+1)+"-01",this.clientFilters.specificDay=moment().format("YYYY-MM-DD");var g=function(){b._getDailyRequest(),b._getClientRequest()};setTimeout(function(){google.load("visualization","1",{callback:g,packages:["corechart"]})},0)},events:{'change [name="billing-portal-view"]':"toggleView",'change [name="billed-as"]':"billedAs","click .move-days-back":"moveDaysBack","click .move-days-forward":"moveDaysForward","click .move-months-back":"moveMonthsBack","click .move-months-forward":"moveMonthsForward","click #refresh-billing-portal":"refreshBillingPortal"},refreshBillingPortal:function(){"daily"===this.generalFilters.view?(this._getDailyRequest(),this._getClientRequest()):"monthly"===this.generalFilters.view&&this._getMonthlyRequest()},moveDaysForward:function(){var a=moment(this.dailyFilters.endDate).add(1,"days").format("YYYY-MM-DD"),b=moment(this.dailyFilters.startDate).add(1,"days").format("YYYY-MM-DD");this.dailyFilters.endDate=a,this.dailyFilters.startDate=b,this._getDailyRequest()},moveDaysBack:function(){var a=moment(this.dailyFilters.endDate).subtract(1,"days").format("YYYY-MM-DD"),b=moment(this.dailyFilters.startDate).subtract(1,"days").format("YYYY-MM-DD");this.dailyFilters.endDate=a,this.dailyFilters.startDate=b,this._getDailyRequest()},moveMonthsForward:function(){var a=moment(this.monthlyFilters.endMonth).add(1,"month").format("YYYY-MM-DD"),b=moment(this.monthlyFilters.startMonth).add(1,"month").format("YYYY-MM-DD");this.monthlyFilters.endMonth=a,this.monthlyFilters.startMonth=b,this._getMonthlyRequest()},moveMonthsBack:function(){var a=moment(this.monthlyFilters.endMonth).subtract(1,"month").format("YYYY-MM-DD"),b=moment(this.monthlyFilters.startMonth).subtract(1,"month").format("YYYY-MM-DD");this.monthlyFilters.endMonth=a,this.monthlyFilters.startMonth=b,this._getMonthlyRequest()},billedAs:function(a){var b=$(a.currentTarget);"timekeeper"===b.val()?this.generalFilters.isTimekeeper=1:this.generalFilters.isTimekeeper=0,"daily"===this.generalFilters.view?(this._getDailyRequest(),this._getClientRequest()):this._getMonthlyRequest()},toggleView:function(a){var b=$(a.currentTarget);"monthly"===b.val()?(this.generalFilters.view="monthly",this._getMonthlyRequest()):(this.generalFilters.view="daily",this._getDailyRequest())},_getClientRequest:function(){var a=this;this.clientFilters.isTimekeeper=this.generalFilters.isTimekeeper,$.get("/api/billing_portal_controller/get_daily_billing_per_client/",this.clientFilters,function(b){a.removeLoader(),b?a._renderClientBarChart(b,"billing-portal-client-chart","Date: "+a.clientFilters.specificDay,"Clients",!1):a.$el.find("#billing-portal-client-chart").html(' <div class=" font-size-22 p-top-50 p-left-100 c-white" ><div>No Data for day: <i class="font-bold">'+a.clientFilters.specificDay+'</i><BR/>Please choose another day, by clicking a specific bar in the chart to the left.<BR/><i class="fa fa-arrow-left"></i></div></div>')})},_getMonthlyRequest:function(){var a=this;a.monthlyFilters.isTimekeeper=a.generalFilters.isTimekeeper,this.showLoader(),$.get("/api/billing_portal_controller/get_monthly_billing/",a.monthlyFilters,function(b){a.removeLoader();var c=a._fillEmptyDatesForMonths(b);a.$el.find(".months-view").show(),a.$el.find(".days-view").hide();var d="Total Hours per Month ";d+=0===a.generalFilters.isTimekeeper?"as User":"as Timekeeper",a._renderComboChart(c,"billing-portal-monthly-chart",d,"Hours",!1)})},_getDailyRequest:function(){var a=this;this.dailyFilters.isTimekeeper=this.generalFilters.isTimekeeper,this.showLoader(),$.get("/api/billing_portal_controller/get_daily_billing/",this.dailyFilters,function(b){a.removeLoader();var c=a._fillEmptyDates(b);a.$el.find(".months-view").hide(),a.$el.find(".days-view").show();var d="Total Hours per Day ";d+=0===a.generalFilters.isTimekeeper?"as User":"as Timekeeper",a._renderComboChart(c,"billing-portal-day-chart",d,"Hours",!1)})},_fillEmptyDatesForMonths:function(a){a=a||[];for(var b=moment(this.monthlyFilters.startMonth),c=moment(this.monthlyFilters.endMonth),d=c.diff(b,"months"),e=0;d>=e;e++){var f=b.format("YYYY-MM"),g=_.find(a,function(a){return a.billingDate===f});if(_.isUndefined(g)){var h={billingDate:f,totalHours:0};a.push(h)}b=b.add(1,"months")}var i=_.sortBy(a,"billingDate");return i},_fillEmptyDates:function(a){a=a||[];for(var b=moment(this.dailyFilters.startDate),c=moment(this.dailyFilters.endDate),d=c.diff(b,"days"),e=0;d>=e;e++){var f=b.format("YYYY-MM-DD"),g=_.find(a,function(a){return a.billingDate===f});if(_.isUndefined(g)){var h={billingDate:f,totalHours:0};a.push(h)}b=b.add(1,"days")}var i=_.sortBy(a,"billingDate");return i},_getDataForClientHours:function(a){var b=[];return b.push(["Client Name","Good Hours","Warning Hours","Above Limit",{role:"annotation"}]),_.each(a,function(a){if(a.totalHours<=a.tkHoursPerDayAlert)b.push([a.groupName,parseFloat(a.totalHours.toFixed(2)),0,0,""]);else{var c,d=a.tkHoursPerDayAlert;if(a.totalHours>a.tkHoursPerDayMax){var e=a.totalHours-a.tkHoursPerDayMax;c=a.totalHours-(e+a.tkHoursPerDayAlert),b.push([a.groupName,parseFloat(d.toFixed(2)),parseFloat(c.toFixed(2)),parseFloat(e.toFixed(2)),parseFloat(a.totalHours.toFixed(2))])}else c=a.totalHours-d,b.push([a.groupName,parseFloat(d.toFixed(2)),parseFloat(c.toFixed(2)),0,parseFloat(a.totalHours.toFixed(2))])}}),b},_getDataForTotalHours:function(a){var b=[],c=this._getAverageTotalHours(a);return b.push(["Day","Hours Total","Average"]),_.each(a,function(a){b.push([a.billingDate,a.totalHours,c])}),b},_getAverageTotalHours:function(a){var b=0,c=0;return _.each(a,function(a){b++,c+=a.totalHours}),parseFloat((c/b).toFixed(2))},openClientModal:function(a){var b=new App.Views.BillingPortal.ClientModal({clientGroupName:a,specificDay:this.clientFilters.specificDay,isTimekeeper:this.generalFilters.isTimekeeper}),c=new App.Helpers.Modal({view:b,sizeModal:"modal-lg"});c.show()},_renderClientBarChart:function(a,b,c,d){function e(){var a=j.getSelection()[0];if(a){var b=g[a.row+1][0];f.openClientModal(b)}}var f=this,g=this._getDataForClientHours(a),h=google.visualization.arrayToDataTable(g),i={height:300,title:c,titleTextStyle:{fontSize:"16"},vAxis:{title:d,titleTextStyle:{fontSize:"16"}},hAxis:{title:"Hours",titleTextStyle:{fontSize:"16"}},legend:{position:"top",maxLines:2},bar:{groupWidth:"75%"},isStacked:!0,allowHtml:!0,series:{0:{color:"#3366cc"},1:{color:"orange"},2:{color:"red"}}},j=new google.visualization.BarChart(document.getElementById(b));j.draw(h,i),google.visualization.events.addListener(j,"select",e)},_renderComboChart:function(a,b,c,d){function e(){var a=l.getSelection()[0];if(a){var b=h[a.row+1][0];g.clientFilters.specificDay=b,g._getClientRequest()}}var f=this.$el,g=this,h=this._getDataForTotalHours(a),i=google.visualization.arrayToDataTable(h),j={title:c,titleTextStyle:{fontSize:"18"},height:300,vAxis:{title:d,titleTextStyle:{fontSize:"16"}},hAxis:{title:"Day",titleTextStyle:{fontSize:"12"}},seriesType:"bars",series:{1:{type:"line"}},tooltip:{textStyle:{fontSize:"20"}},legend:{position:"none"},allowHtml:!0},k=new google.visualization.NumberFormat({pattern:"#,###.00"});k.format(i,1);var l=new google.visualization.ComboChart(document.getElementById(b));l.draw(i,j);var m=moment().format("YYYY-MM-DD"),n=f.find("#billing-portal-day-chart").find('text:contains("'+m+'")');n.attr("fill","red"),"billing-portal-monthly-chart"!==b&&google.visualization.events.addListener(l,"select",e)}}),_.isUndefined(App.Views.ClientRep)&&(App.Views.ClientRep={}),_.isUndefined(App.Views.ClientRep.Dashboard)&&(App.Views.ClientRep.Dashboard={}),App.Views.ClientRep.Dashboard.MainMenu=App.Helpers.View.extend({template:App.Templates.clientRepDashboardMainMenu,className:"ClientRepDashboardMainMenu",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.model=App.loginModel},events:{"click .link-menu":"setMenuActive"},setMenuActive:function(a){var b=this.$el,c=b.find(a.currentTarget);b.find("a.link-menu").closest("li").removeClass("active"),c.closest("li").addClass("active")},removeAllSelected:function(){var a=this.$el;a.find("#menu-parent li.active").removeClass("active")},onClose:function(){$("body").css({"font-size":"","line-height":"","font-family":"",color:""})},afterRender:function(){$("body").css({"font-size":16,"line-height":1.8,"font-family":"'Open Sans', sans-serif",color:"#494949"})}}),_.isUndefined(App.Views.ClientRep)&&(App.Views.ClientRep={}),_.isUndefined(App.Views.ClientRep.Files)&&(App.Views.ClientRep.Files={}),_.isUndefined(App.Views.ClientRep.Files.General)&&(App.Views.ClientRep.Files.General={}),App.Views.ClientRep.Files.General.EventShow=App.Helpers.View.extend({template:App.Templates.clientRepFilesGeneralEventShow,className:"ClientRepFilesGeneralEventShow",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.model=new App.Helpers.Model,this.colDocuments=new App.Collections.Documents},afterRender:function(){this.options.fileModel.has("fetched")?this.fetch():this.listenToOnce(this.options.fileModel,"sync",this.fetch())},fetch:function(){var a=this;this.showLoader(),this.model.fetch({url:"/api/Client_rep_files_controller_master/get_file_event",data:{fileNumber:this.options.fileNumber,firm_id:this.options.firm_id,eventID:this.options.eventID},success:function(b){_.map(b.get("documents"),function(b){_.extend(b,{fileNumber:a.options.fileNumber,firm_id:a.options.firm_id})}),a.colDocuments.reset(b.get("documents")),b.get("childTable")&&a._renderChildView()},complete:function(){a.removeLoader()}})},_renderChildView:function(){var a,b=this.$el;_.extend(this.options,{avoidFetch:!0,model:this.model}),"wc_medical"===this.model.get("childTable")&&(a=new App.Views.ClientRep.Files.Medical.EventShow(this.options)),"liens"===this.model.get("childTable")&&(a=new App.Views.ClientRep.Files.Liens.EventShow(this.options)),"wc_subpoenas"===this.model.get("childTable")&&(a=new App.Views.ClientRep.Files.Subpoenas.EventShow(this.options)),"wc_depos"===this.model.get("childTable")&&(a=new App.Views.ClientRep.Files.WcDepos.EventShow(this.options)),"hearings"===this.model.get("childTable")&&(a=new App.Views.ClientRep.Files.WcHearings.EventShow(this.options)),a&&(a.render(),b.find(".content-childView").html(a.$el.find(".content-details").html()))}}),_.isUndefined(App.Views.ClientRep)&&(App.Views.ClientRep={}),_.isUndefined(App.Views.ClientRep.Files)&&(App.Views.ClientRep.Files={}),_.isUndefined(App.Views.ClientRep.Files.General)&&(App.Views.ClientRep.Files.General={}),App.Views.ClientRep.Files.General.Index=App.Helpers.View.extend({template:App.Templates.clientRepFilesGeneralIndex,className:"ClientRepFilesGeneralIndex",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.collection=new App.Helpers.Collection,this.colEventTypes=new App.Helpers.Collection,this.model.has("fetched")?this._renderEvents():this.listenToOnce(this.model,"change:fetched",this._renderEvents)},events:{"change select":"filterByEventType","click .eventShow":"eventShow","click .showPlanOfAction":"showPlanOfAction"},_renderEvents:function(){_.has(this.model.get("events"),"general")&&(this.data=this.model.get("events").general,this.prepopulateData(),this.prepareDataForEventType())},prepopulateData:function(a){a=a||this.data.event_list,this.collection.sortBy="eventDate",this.collection.sortOrder="desc",this.collection.sort(),this.collection.reset([]),this.collection.reset(a)},prepareDataForEventType:function(){var a=_.map(this.data.event_list,function(a){return{eventTypeID:a.eventTypeID,eventTypeName:a.eventTypeName}}),b=_.uniq(_.pluck(a,"eventTypeName")),c=_.uniq(_.pluck(a,"eventTypeID"));a=_.map(b,function(a,b){return{eventTypeID:c[b],eventTypeName:a}}),this.colEventTypes.sortBy="eventTypeName",this.colEventTypes.sortOrder="asc",this.colEventTypes.sort(),this.colEventTypes.reset(a)},filterByEventType:function(a){var b=$(a.currentTarget),c=Number(b.val());if(c){var d=_.filter(this.data.event_list,function(a){return a.eventTypeID===c});this.prepopulateData(d)}else this.prepopulateData()},eventShow:function(a){var b=$(a.currentTarget),c=b.data("event-id");Backbone.history.navigate(this.model.fileByFirmUrl()+"/general/"+c,{trigger:!0})},showPlanOfAction:function(a){var b=$(a.currentTarget),c=this.$el;"show detail"===b.text()?(c.find(".contentPlanOfAction").show(),b.text("hide")):(c.find(".contentPlanOfAction").hide(),b.text("show detail"))}}),_.isUndefined(App.Views.ClientRep)&&(App.Views.ClientRep={}),_.isUndefined(App.Views.ClientRep.Files)&&(App.Views.ClientRep.Files={}),App.Views.ClientRep.Files.Index=App.Helpers.View.extend({template:App.Templates.clientRepFilesIndex,className:"ClientRepFilesIndex",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.globalData={}},events:{"click .collapse-rows":"collapseRows","click .collapse-subordinate":"collapseFirstLevelFiles","click .collapse-subordinate-of-subordinate":"collapseSecondLevelFiles","keyup .search-input":"searchByFileTitle"},afterRender:function(){this.fetchData()},fetchData:function(){var a=this;this.showLoader(),$.get("/api/client_rep_files_controller_master/get_files").done(function(b){a.globalData=b,a._renderObj(b)}).always(function(){a.removeLoader()})},_renderObj:function(a){var b=this.$el,c=this,d='<table class="table table-hover m-bottom-0">';b.find("#client-table-container table").remove(),_.each(a,function(a){d+='<colgroup><col class="width-10"></colgroup><thead><tr><th class="b-blue-new-casefriend c-white font-size-14"><a href="javascript:void(0);" class="c-white collapse-rows"><i class="fa fa-minus-square" aria-hidden="true"></i></a></th><th class="b-blue-new-casefriend c-white font-size-14">'+a.name+'</th></tr><tr><th colspan="2" class="font-bold">My Files ('+a.files.length+")</th></tr></thead><tbody>",_.each(a.files,function(b){b&&(d+='<tr><td colspan="2" class="p-i-left-20"><i class="fa fa-file-o p-right-10 c-blue-link" aria-hidden="true"></i><a href="'+c._getUrlFileByFirm(a.firm_id,b.fileNumber)+'">'+b.fileTitle+"</a></td></tr>")}),_.each(a.secondManagers,function(b){d+='<tr><td colspan="2"  data-parent-sub-id="'+b.user_id+'"  class="p-i-left-50 font-bold collapse-subordinate cursor-pointer"><i class="fa fa-folder-open p-right-5" aria-hidden="true"></i>'+b.first+" "+b.last+" ("+b.files.length+") </td></tr>",_.each(b.files,function(e){e&&(d+='<tr data-user-id="'+b.user_id+'"><td colspan="2" class="p-i-left-100"><i class="fa fa-file p-right-10" aria-hidden="true"></i><a href="'+c._getUrlFileByFirm(a.firm_id,e.fileNumber)+'">'+e.fileTitle+"</a></td></tr>")}),_.each(b.subordinates,function(e){d+='<tr data-user-id="'+b.user_id+'"><td colspan="2" data-parent-sub-of-sub-id="'+e.user_id+'" class="p-i-left-150 font-bold collapse-subordinate-of-subordinate cursor-pointer"><i class="fa fa-folder-open-o p-right-5" aria-hidden="true"></i>'+e.first+" "+e.last+" ("+e.files.length+") </td></tr>",_.each(e.files,function(f){f&&(d+='<tr data-user-id="'+b.user_id+'" data-user-id-sub-of-sub="'+e.user_id+'"><td colspan="2" class="p-i-left-200"><i class="fa fa-file-o p-right-10" aria-hidden="true"></i><a href="'+c._getUrlFileByFirm(a.firm_id,f.fileNumber)+'">'+f.fileTitle+"</a></td></tr>")})})}),_.each(a.subordinates,function(b){d+='<tr><td colspan="2" data-parent-sub-id="'+b.user_id+'" class="p-i-left-50 font-bold cursor-pointer collapse-subordinate"><i class="fa fa-folder-open p-right-5" aria-hidden="true"></i>'+b.first+" "+b.last+" ("+b.files.length+") </td></tr>",_.each(b.files,function(e){e&&(d+='<tr data-user-id="'+b.user_id+'"><td colspan="2" class="p-i-left-100"><i class="fa fa-file  p-right-10" aria-hidden="true"></i><a href="'+c._getUrlFileByFirm(a.firm_id,e.fileNumber)+'">'+e.fileTitle+"</a></td></tr>")})}),d+="</table>"}),b.find("#client-table-container").html(d)},_inputLike:function(a,b){return _.each(a,function(c,d){if(c){var e=c.fileTitle.toLowerCase().indexOf(b.toLowerCase())>=0?!0:!1;e||(a[d]=null)}}),a},searchByFileTitle:function(a){var b=$(a.currentTarget),c=b.val(),d=JSON.parse(JSON.stringify(this.globalData)),e=this;_.each(d,function(a){a.files=e._inputLike(a.files,c),_.each(a.secondManagers,function(a){a.files=e._inputLike(a.files,c),_.each(a.subordinates,function(a){a.files=e._inputLike(a.files,c)})}),_.each(a.subordinates,function(a){a.files=e._inputLike(a.files,c)})}),this._renderObj(d)},collapseSecondLevelFiles:function(a){var b=$(a.currentTarget);b.find("i").hasClass("fa-folder-open-o")?b.find("i").removeClass("fa-folder-open-o").addClass("fa-folder-o"):b.find("i").removeClass("fa-folder-o").addClass("fa-folder-open-o"),b.closest("table").find('[data-user-id-sub-of-sub="'+b.data("parent-sub-of-sub-id")+'"]').toggle("slow")},collapseFirstLevelFiles:function(a){var b=$(a.currentTarget);b.find("i").hasClass("fa-folder-open")?b.find("i").removeClass("fa-folder-open").addClass("fa-folder"):b.find("i").removeClass("fa-folder").addClass("fa-folder-open"),b.closest("table").find('[data-user-id="'+b.data("parent-sub-id")+'"]').toggle("slow")},collapseRows:function(a){var b=$(a.currentTarget);b.find("i").hasClass("fa-plus-square")?b.find("i").removeClass("fa-plus-square").addClass("fa-minus-square"):b.find("i").addClass("fa-plus-square").removeClass("fa-minus-square"),b.closest("table").find("thead tr:last-child").toggle("slow"),b.closest("table").find("tbody").toggle("slow")},_getUrlFileByFirm:function(a,b){return"#client_rep/firm/"+a+"/file/"+b}}),_.isUndefined(App.Views.ClientRep)&&(App.Views.ClientRep={}),_.isUndefined(App.Views.ClientRep.Files)&&(App.Views.ClientRep.Files={}),_.isUndefined(App.Views.ClientRep.Files.Liens)&&(App.Views.ClientRep.Files.Liens={}),App.Views.ClientRep.Files.Liens.EventShow=App.Helpers.View.extend({template:App.Templates.clientRepFilesLiensEventShow,className:"ClientRepFilesLiensEventShow",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.model=this.options.model||new App.Helpers.Model,this.colDocuments=new App.Collections.Documents},afterRender:function(){this.options.avoidFetch?this._prepareData():this.options.fileModel.has("fetched")?this.fetch():this.listenToOnce(this.options.fileModel,"sync",this.fetch())},fetch:function(){var a=this;

this.showLoader(),this.model.fetch({url:"/api/Client_rep_files_controller_master/get_file_event",data:{fileNumber:this.options.fileNumber,firm_id:this.options.firm_id,eventID:this.options.eventID},success:function(){a._prepareData()},complete:function(){a.removeLoader()}})},_prepareData:function(){var a=this;this.model.get("childData")&&(_.map(this.model.get("childData").lienBills,function(b){if(b.OMFSdocumentID||b.billDocumentID){var c=new App.Models.Document({fileNumber:a.options.fileNumber,firm_id:a.options.firm_id});b.OMFSdocumentID&&(c.set("documentID",b.OMFSdocumentID),c.set("documentName",b.OMFSdocumentName),c.set("documentTitle",b.OMFSdocumentTitle),b.getUrlDocumentOMFS=c.getUrlClientRepFile()),b.billDocumentID&&(c.set("documentID",b.billDocumentID),c.set("documentName",b.billDocumentName),c.set("documentTitle",b.billDocumentTitle),b.getUrlDocumentBill=c.getUrlClientRepFile())}}),_.map(this.model.get("childData").lienObjections,function(b){if(b.documentID){var c=new App.Models.Document({fileNumber:a.options.fileNumber,firm_id:a.options.firm_id,documentID:b.documentID});b.getUrlClientRepFile=c.getUrlClientRepFile()}})),_.map(this.model.get("documents"),function(b){_.extend(b,{fileNumber:a.options.fileNumber,firm_id:a.options.firm_id})}),this.colDocuments.reset(this.model.get("documents"))}}),_.isUndefined(App.Views.ClientRep)&&(App.Views.ClientRep={}),_.isUndefined(App.Views.ClientRep.Files)&&(App.Views.ClientRep.Files={}),_.isUndefined(App.Views.ClientRep.Files.Liens)&&(App.Views.ClientRep.Files.Liens={}),App.Views.ClientRep.Files.Liens.Index=App.Helpers.View.extend({template:App.Templates.clientRepFilesLiensIndex,className:"ClientRepFilesLiensIndex",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.collection=new App.Helpers.Collection,this.model.has("fetched")?this._renderEvents():this.listenToOnce(this.model,"change:fetched",this._renderEvents)},events:{"click .eventShow":"eventShow"},_renderEvents:function(){_.has(this.model.get("events"),"lien")&&(this.data=this.model.get("events").lien,this.data.event_list=this.data.event_list||[],this.data.dashboard=this.data.dashboard||[],this.prepopulateData())},prepopulateData:function(){this.collection.sortBy="eventDate",this.collection.sortOrder="desc",this.collection.sort(),this.collection.reset([]),this.collection.reset(this.data.event_list)},eventShow:function(a){var b=$(a.currentTarget),c=b.data("event-id");Backbone.history.navigate(this.model.fileByFirmUrl()+"/liens/"+c,{trigger:!0})}}),_.isUndefined(App.Views.ClientRep)&&(App.Views.ClientRep={}),_.isUndefined(App.Views.ClientRep.Files)&&(App.Views.ClientRep.Files={}),_.isUndefined(App.Views.ClientRep.Files.Medical)&&(App.Views.ClientRep.Files.Medical={}),App.Views.ClientRep.Files.Medical.EventShow=App.Helpers.View.extend({template:App.Templates.clientRepFilesMedicalEventShow,className:"ClientRepFilesMedicalEventShow",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.model=this.options.model||new App.Helpers.Model,this.colDocuments=new App.Collections.Documents},afterRender:function(){this.options.avoidFetch?this._prepareData():this.options.fileModel.has("fetched")?this.fetch():this.listenToOnce(this.options.fileModel,"sync",this.fetch())},fetch:function(){var a=this;this.showLoader(),this.model.fetch({url:"/api/Client_rep_files_controller_master/get_file_event",data:{fileNumber:this.options.fileNumber,firm_id:this.options.firm_id,eventID:this.options.eventID},success:function(){a._prepareData()},complete:function(){a.removeLoader()}})},_prepareData:function(){var a=this;_.map(this.model.get("documents"),function(b){_.extend(b,{fileNumber:a.options.fileNumber,firm_id:a.options.firm_id})}),this.colDocuments.reset(this.model.get("documents"))}}),_.isUndefined(App.Views.ClientRep)&&(App.Views.ClientRep={}),_.isUndefined(App.Views.ClientRep.Files)&&(App.Views.ClientRep.Files={}),_.isUndefined(App.Views.ClientRep.Files.Medical)&&(App.Views.ClientRep.Files.Medical={}),App.Views.ClientRep.Files.Medical.Index=App.Helpers.View.extend({template:App.Templates.clientRepFilesMedicalIndex,className:"ClientRepFilesMedicalIndex",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.collection=new App.Helpers.Collection,this.colBodyParts=new App.Helpers.Collection,this.model.has("fetched")?this._renderEvents():this.listenToOnce(this.model,"change:fetched",this._renderEvents)},events:{"change select":"filterByImportantEvent","click .eventShow":"eventShow"},_renderEvents:function(){if(_.has(this.model.get("events"),"medical")){this.data=this.model.get("events").medical,this.data.event_list=this.data.event_list||[],this.data.dashboard=this.data.dashboard||[],this.prepopulateData();var a=[];_.each(this.data.dashboard,function(b){a=_.union(a,b.body_parts)}),this.colBodyParts.reset(a)}else this.data.event_list=[]},setDoctorFacilityName:function(){var a=this.model.get("doctorName")?this.model.get("doctorName"):"",b=this.model.get("facilityName")?this.model.get("facilityName"):"";return a+(this.model.get("doctorName")&&this.model.get("facilityName")?" - ":"")+b},prepopulateData:function(a){a=a||this.data.event_list,this.collection.sortBy="eventDate",this.collection.sortOrder="desc",this.collection.sort(),this.collection.reset([]),this.collection.reset(a)},filterByImportantEvent:function(a){var b=$(a.currentTarget),c=b.val();if(c){var d=_.where(this.data.event_list,{important:1});this.prepopulateData(d)}else this.prepopulateData()},eventShow:function(a){var b=$(a.currentTarget),c=b.data("event-id");Backbone.history.navigate(this.model.fileByFirmUrl()+"/medical/"+c,{trigger:!0})}}),_.isUndefined(App.Views.ClientRep)&&(App.Views.ClientRep={}),_.isUndefined(App.Views.ClientRep.Files)&&(App.Views.ClientRep.Files={}),_.isUndefined(App.Views.ClientRep.Files.Overview)&&(App.Views.ClientRep.Files.Overview={}),App.Views.ClientRep.Files.Overview.Show=App.Helpers.View.extend({template:App.Templates.clientRepFilesOverviewShow,className:"ClientRepFilesOverviewShow",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.colAdjProgress=new App.Collections.WCCases,this.model.has("fetched")?this._renderFileProgress():this.listenToOnce(this.model,"change:fetched",this._renderFileProgress)},events:{},afterRender:function(){this._renderFileProgress()},_renderFileProgress:function(){var a=this.model.get("adjProgress")||[];this.colAdjProgress.reset(a)},getMailtoDA:function(){return"mailto:"+this.model.get("DAemail")+"?Subject="+this.model.get("fileTitle")},getClassNameBySetUp:function(){return this.model.getClassNameBySetUp()},getClassNameByDiscovery:function(){return this.model.getClassNameByDiscovery()},getClassNameByTreatment:function(){return this.model.getClassNameByTreatment()},getClassNameByHearingTrial:function(){return this.model.getClassNameByHearingTrial()},getClassNameByWCClosed:function(){return this.model.getClassNameByWCClosed()},getClassNameByLiens:function(){return this.model.getClassNameByLiens()},getClassNameByFileClosed:function(){return this.model.getClassNameByFileClosed()}}),_.isUndefined(App.Views.ClientRep)&&(App.Views.ClientRep={}),_.isUndefined(App.Views.ClientRep.Files)&&(App.Views.ClientRep.Files={}),App.Views.ClientRep.Files.Show=App.Helpers.View.extend({template:App.Templates.clientRepFilesShow,className:"ClientRepFilesShow",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.options.triggerShowTab=this.options.triggerShowTab||!1,this.model=new App.Models.File({fileNumber:this.options.fileNumber,firm_id:this.options.firm_id})},events:{"click .tab-navigation a":"navigation"},afterRender:function(){var a=["overview","case_info","timeline","general","medical","liens","subpoenas","depos","hearings"];this.options.eventTypeName&&_.contains(a,this.options.eventTypeName)?this.options.triggerShowTab?this.showTab(this.options.eventTypeName):this._handlerSelectionTab(this.options.eventTypeName):this.showTab("overview"),this.fetch()},navigation:function(a){var b=$(a.currentTarget);this.showTab(b.data("option-tab"))},showTab:function(a){a=a;var b,c={model:this.model,fileNumber:this.options.fileNumber,firm_id:this.options.firm_id};"overview"===a&&(b=new App.Views.ClientRep.Files.Overview.Show(c)),"case_info"===a&&(b=new App.Views.ClientRep.Files.WcCaseInfo.Show(c)),"timeline"===a&&(b=new App.Views.ClientRep.Files.Timeline.Index(c)),"general"===a&&(b=new App.Views.ClientRep.Files.General.Index(c)),"medical"===a&&(b=new App.Views.ClientRep.Files.Medical.Index(c)),"liens"===a&&(b=new App.Views.ClientRep.Files.Liens.Index(c)),"subpoenas"===a&&(b=new App.Views.ClientRep.Files.Subpoenas.Index(c)),"depos"===a&&(b=new App.Views.ClientRep.Files.WcDepos.Index(c)),"hearings"===a&&(b=new App.Views.ClientRep.Files.WcHearings.Index(c)),this._handlerSelectionTab(a),Backbone.history.navigate(this.model.fileByFirmUrl()+"/"+a),App.Helpers.htmlView(b,".content-tab")},_handlerSelectionTab:function(a){var b=this.$el;b.find(".tab-navigation li.active").removeClass("active"),b.find('.tab-navigation a[data-option-tab="'+a+'"]').parent().addClass("active")},fetch:function(){var a=this;this.showLoader(),this.model.fetch({url:"/api/Client_rep_files_controller_master/get_file",data:{fileNumber:this.options.fileNumber,firm_id:this.options.firm_id},success:function(a){a.set("codefendants",a.get("codefendants").length?a.get("codefendants"):0),a.get("bodyParts")&&a.set("bodyParts",a.get("bodyParts").length?a.get("bodyParts"):0)},complete:function(){a.removeLoader()}})},getMailtoDA:function(){return"mailto:"+this.model.get("DAemail")+"?Subject="+this.model.get("fileTitle")}}),_.isUndefined(App.Views.ClientRep)&&(App.Views.ClientRep={}),_.isUndefined(App.Views.ClientRep.Files)&&(App.Views.ClientRep.Files={}),_.isUndefined(App.Views.ClientRep.Files.Subpoenas)&&(App.Views.ClientRep.Files.Subpoenas={}),App.Views.ClientRep.Files.Subpoenas.EventShow=App.Helpers.View.extend({template:App.Templates.clientRepFilesSubpoenasEventShow,className:"ClientRepFilesSubpoenasEventShow",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.model=this.options.model||new App.Helpers.Model,this.colDocuments=new App.Collections.Documents},afterRender:function(){this.options.avoidFetch?this._prepareData():this.options.fileModel.has("fetched")?this.fetch():this.listenToOnce(this.options.fileModel,"sync",this.fetch())},fetch:function(){var a=this;this.showLoader(),this.model.fetch({url:"/api/Client_rep_files_controller_master/get_file_event",data:{fileNumber:this.options.fileNumber,firm_id:this.options.firm_id,eventID:this.options.eventID},success:function(){a._prepareData()},complete:function(){a.removeLoader()}})},_prepareData:function(){var a=this;_.map(this.model.get("documents"),function(b){_.extend(b,{fileNumber:a.options.fileNumber,firm_id:a.options.firm_id})}),this.colDocuments.reset(this.model.get("documents"))}}),_.isUndefined(App.Views.ClientRep)&&(App.Views.ClientRep={}),_.isUndefined(App.Views.ClientRep.Files)&&(App.Views.ClientRep.Files={}),_.isUndefined(App.Views.ClientRep.Files.Subpoenas)&&(App.Views.ClientRep.Files.Subpoenas={}),App.Views.ClientRep.Files.Subpoenas.Index=App.Helpers.View.extend({template:App.Templates.clientRepFilesSubpoenasIndex,className:"ClientRepFilesSubpoenasIndex",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.collection=new App.Helpers.Collection,this.model.has("fetched")?this._renderEvents():this.listenToOnce(this.model,"change:fetched",this._renderEvents)},events:{"click .eventShow":"eventShow","click .showPlanOfAction":"showPlanOfAction"},_renderEvents:function(){_.has(this.model.get("events"),"subpoena")&&(this.data=this.model.get("events").subpoena,this.data.event_list=this.data.event_list||[],this.data.dashboard=this.data.dashboard||[],this.prepopulateData())},prepopulateData:function(){this.collection.sortBy="dateOrdered",this.collection.sortOrder="desc",this.collection.sort(),this.collection.reset([]),this.collection.reset(this.data.event_list)},eventShow:function(a){var b=$(a.currentTarget),c=b.data("event-id");Backbone.history.navigate(this.model.fileByFirmUrl()+"/subpoenas/"+c,{trigger:!0})},showPlanOfAction:function(a){var b=$(a.currentTarget),c=this.$el;"show detail"===b.text()?(c.find(".contentPlanOfAction").show(),b.text("hide")):(c.find(".contentPlanOfAction").hide(),b.text("show detail"))}}),_.isUndefined(App.Views.ClientRep)&&(App.Views.ClientRep={}),_.isUndefined(App.Views.ClientRep.Files)&&(App.Views.ClientRep.Files={}),_.isUndefined(App.Views.ClientRep.Files.Timeline)&&(App.Views.ClientRep.Files.Timeline={}),App.Views.ClientRep.Files.Timeline.EventShow=App.Helpers.View.extend({template:App.Templates.clientRepFilesTimelineEventShow,className:"ClientRepFilesTimelineEventShow",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.model=new App.Helpers.Model,this.colDocuments=new App.Collections.Documents},afterRender:function(){this.options.fileModel.has("fetched")?this.fetch():this.listenToOnce(this.options.fileModel,"sync",this.fetch())},fetch:function(){var a=this;this.showLoader(),this.model.fetch({url:"/api/Client_rep_files_controller_master/get_file_event",data:{fileNumber:this.options.fileNumber,firm_id:this.options.firm_id,eventID:this.options.eventID},success:function(b){_.map(b.get("documents"),function(b){_.extend(b,{fileNumber:a.options.fileNumber,firm_id:a.options.firm_id})}),a.colDocuments.reset(b.get("documents")),b.get("childTable")&&a._renderChildView()},complete:function(){a.removeLoader()}})},_renderChildView:function(){var a,b=this.$el;_.extend(this.options,{avoidFetch:!0,model:this.model}),"wc_medical"===this.model.get("childTable")&&(a=new App.Views.ClientRep.Files.Medical.EventShow(this.options)),"liens"===this.model.get("childTable")&&(a=new App.Views.ClientRep.Files.Liens.EventShow(this.options)),"wc_subpoenas"===this.model.get("childTable")&&(a=new App.Views.ClientRep.Files.Subpoenas.EventShow(this.options)),"wc_depos"===this.model.get("childTable")&&(a=new App.Views.ClientRep.Files.WcDepos.EventShow(this.options)),"wc_hearings"===this.model.get("childTable")&&(a=new App.Views.ClientRep.Files.WcHearings.EventShow(this.options)),a&&(a.render(),b.find(".content-childView").html(a.$el.find(".content-details").html()))}}),_.isUndefined(App.Views.ClientRep)&&(App.Views.ClientRep={}),_.isUndefined(App.Views.ClientRep.Files)&&(App.Views.ClientRep.Files={}),_.isUndefined(App.Views.ClientRep.Files.Timeline)&&(App.Views.ClientRep.Files.Timeline={}),App.Views.ClientRep.Files.Timeline.Index=App.Helpers.View.extend({template:App.Templates.clientRepFilesTimelineIndex,className:"ClientRepFilesTimelineIndex",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.collection=new App.Helpers.Collection,this.colEventTypes=new App.Helpers.Collection,this.model.has("fetched")?this._renderEvents():this.listenToOnce(this.model,"change:fetched",this._renderEvents)},events:{"change select":"filterByEventType","click .eventShow":"eventShow","click .showPlanOfAction":"showPlanOfAction"},_renderEvents:function(){_.has(this.model.get("events"),"timeline")&&(this.data=this.model.get("events").timeline,this.prepopulateData(),this.prepareDataForEventType())},prepopulateData:function(a){a=a||this.data.event_list,this.collection.sortBy="eventDate",this.collection.sortOrder="desc",this.collection.sort(),this.collection.reset([]),this.collection.reset(a)},prepareDataForEventType:function(){var a=_.map(this.data.event_list,function(a){return{eventTypeID:a.eventTypeID,eventTypeName:a.eventTypeName}}),b=_.uniq(_.pluck(a,"eventTypeName")),c=_.uniq(_.pluck(a,"eventTypeID"));a=_.map(b,function(a,b){return{eventTypeID:c[b],eventTypeName:a}}),this.colEventTypes.sortBy="eventTypeName",this.colEventTypes.sortOrder="asc",this.colEventTypes.sort(),this.colEventTypes.reset(a)},filterByEventType:function(a){var b=$(a.currentTarget),c=Number(b.val());if(c){var d=_.filter(this.data.event_list,function(a){return a.eventTypeID===c});this.prepopulateData(d)}else this.prepopulateData()},eventShow:function(a){var b=$(a.currentTarget),c=b.data("event-id");Backbone.history.navigate(this.model.fileByFirmUrl()+"/timeline/"+c,{trigger:!0})},showPlanOfAction:function(a){var b=$(a.currentTarget),c=this.$el;"show detail"===b.text()?(c.find(".contentPlanOfAction").show(),b.text("hide")):(c.find(".contentPlanOfAction").hide(),b.text("show detail"))}}),_.isUndefined(App.Views.ClientRep)&&(App.Views.ClientRep={}),_.isUndefined(App.Views.ClientRep.Files)&&(App.Views.ClientRep.Files={}),_.isUndefined(App.Views.ClientRep.Files.WcCaseInfo)&&(App.Views.ClientRep.Files.WcCaseInfo={}),App.Views.ClientRep.Files.WcCaseInfo.Show=App.Helpers.View.extend({template:App.Templates.clientRepFilesWcCaseInfoShow,className:"ClientRepFilesWcCaseInfoShow",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{"click .showPlanOfAction":"showPlanOfAction"},getInjuries:function(){var a=this.model.get("bodyParts");return a=_.map(a,function(a){return a.bodyPart}),a.join(", ")},showPlanOfAction:function(a){var b=$(a.currentTarget),c=this.$el;"show detail"===b.text()?(c.find(".contentPlanOfAction").show(),b.text("hide")):(c.find(".contentPlanOfAction").hide(),b.text("show detail"))}}),_.isUndefined(App.Views.ClientRep)&&(App.Views.ClientRep={}),_.isUndefined(App.Views.ClientRep.Files)&&(App.Views.ClientRep.Files={}),_.isUndefined(App.Views.ClientRep.Files.WcDepos)&&(App.Views.ClientRep.Files.WcDepos={}),App.Views.ClientRep.Files.WcDepos.EventShow=App.Helpers.View.extend({template:App.Templates.clientRepFilesWcDeposEventShow,className:"ClientRepFilesWcDeposEventShow",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.model=this.options.model||new App.Helpers.Model,this.colDocuments=new App.Collections.Documents},afterRender:function(){this.options.avoidFetch?this._prepareData():this.options.fileModel.has("fetched")?this.fetch():this.listenToOnce(this.options.fileModel,"sync",this.fetch())},fetch:function(){var a=this;this.showLoader(),this.model.fetch({url:"/api/Client_rep_files_controller_master/get_file_event",data:{fileNumber:this.options.fileNumber,firm_id:this.options.firm_id,eventID:this.options.eventID},success:function(){a._prepareData()},complete:function(){a.removeLoader()}})},_prepareData:function(){var a=this;_.map(this.model.get("documents"),function(b){_.extend(b,{fileNumber:a.options.fileNumber,firm_id:a.options.firm_id})}),this.colDocuments.reset(this.model.get("documents"))}}),_.isUndefined(App.Views.ClientRep)&&(App.Views.ClientRep={}),_.isUndefined(App.Views.ClientRep.Files)&&(App.Views.ClientRep.Files={}),_.isUndefined(App.Views.ClientRep.Files.WcDepos)&&(App.Views.ClientRep.Files.WcDepos={}),App.Views.ClientRep.Files.WcDepos.Index=App.Helpers.View.extend({template:App.Templates.clientRepFilesWcDeposIndex,className:"ClientRepFilesWcDeposIndex",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.collection=new App.Helpers.Collection,this.model.has("fetched")?this._renderEvents():this.listenToOnce(this.model,"change:fetched",this._renderEvents)},events:{"click .eventShow":"eventShow","click .showPlanOfAction":"showPlanOfAction"},_renderEvents:function(){_.has(this.model.get("events"),"depo")&&(this.data=this.model.get("events").depo,this.data.event_list=this.data.event_list||[],this.data.dashboard=this.data.dashboard||[],this.prepopulateData())},prepopulateData:function(){this.collection.sortBy="depoDate",this.collection.sortOrder="desc",this.collection.sort(),this.collection.reset([]),this.collection.reset(this.data.event_list)},eventShow:function(a){var b=$(a.currentTarget),c=b.data("event-id");Backbone.history.navigate(this.model.fileByFirmUrl()+"/depos/"+c,{trigger:!0})},showPlanOfAction:function(a){var b=$(a.currentTarget),c=this.$el;"show detail"===b.text()?(c.find(".contentPlanOfAction").show(),b.text("hide")):(c.find(".contentPlanOfAction").hide(),b.text("show detail"))}}),_.isUndefined(App.Views.ClientRep)&&(App.Views.ClientRep={}),_.isUndefined(App.Views.ClientRep.Files)&&(App.Views.ClientRep.Files={}),_.isUndefined(App.Views.ClientRep.Files.WcHearings)&&(App.Views.ClientRep.Files.WcHearings={}),App.Views.ClientRep.Files.WcHearings.EventShow=App.Helpers.View.extend({template:App.Templates.clientRepFilesWcHearingsEventShow,className:"ClientRepFilesWcHearingsEventShow",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.model=this.options.model||new App.Helpers.Model,this.colDocuments=new App.Collections.Documents},afterRender:function(){this.options.avoidFetch?this._prepareData():this.options.fileModel.has("fetched")?this.fetch():this.listenToOnce(this.options.fileModel,"sync",this.fetch())},fetch:function(){var a=this;this.showLoader(),this.model.fetch({url:"/api/Client_rep_files_controller_master/get_file_event",data:{fileNumber:this.options.fileNumber,firm_id:this.options.firm_id,eventID:this.options.eventID},success:function(){a._prepareData()},complete:function(){a.removeLoader()}})},_prepareData:function(){var a=this;_.map(this.model.get("documents"),function(b){_.extend(b,{fileNumber:a.options.fileNumber,firm_id:a.options.firm_id})}),this.colDocuments.reset(this.model.get("documents"))}}),_.isUndefined(App.Views.ClientRep)&&(App.Views.ClientRep={}),_.isUndefined(App.Views.ClientRep.Files)&&(App.Views.ClientRep.Files={}),_.isUndefined(App.Views.ClientRep.Files.WcHearings)&&(App.Views.ClientRep.Files.WcHearings={}),App.Views.ClientRep.Files.WcHearings.Index=App.Helpers.View.extend({template:App.Templates.clientRepFilesWcHearingsIndex,className:"ClientRepFilesWcHearingsIndex",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.collection=new App.Helpers.Collection,this.model.has("fetched")?this._renderEvents():this.listenToOnce(this.model,"change:fetched",this._renderEvents)},events:{"click .eventShow":"eventShow","click .showPlanOfAction":"showPlanOfAction"},_renderEvents:function(){_.has(this.model.get("events"),"hearing")&&(this.data=this.model.get("events").hearing,this.data.event_list=this.data.event_list||[],this.data.dashboard=this.data.dashboard||[],this.prepopulateData())},prepopulateData:function(){this.collection.sortBy="hearingDate",this.collection.sortOrder="desc",this.collection.sort(),this.collection.reset([]),this.collection.reset(this.data.event_list)},eventShow:function(a){var b=$(a.currentTarget),c=b.data("event-id");Backbone.history.navigate(this.model.fileByFirmUrl()+"/hearings/"+c,{trigger:!0})},showPlanOfAction:function(a){var b=$(a.currentTarget),c=this.$el;"show detail"===b.text()?(c.find(".contentPlanOfAction").show(),b.text("hide")):(c.find(".contentPlanOfAction").hide(),b.text("show detail"))}}),_.isUndefined(App.Views.ClientRep)&&(App.Views.ClientRep={}),_.isUndefined(App.Views.ClientRep.Settings)&&(App.Views.ClientRep.Settings={}),App.Views.ClientRep.Settings.ClientRepSettings=App.Helpers.View.extend({template:App.Templates.clientRepSettingsClientRepSettings,className:"ClientRepSettingsClientRepSettings",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{"click .client-rep-settings-options a":"navigation"},afterRender:function(){this.showTab()},navigation:function(a){var b=$(a.currentTarget);b.closest("div").find("a.active").removeClass("active"),b.addClass("active"),this.showTab(b.data("optiontab"))},showTab:function(a){a=a||"personal_info";var b;"personal_info"===a&&(b=new App.Views.ClientRep.Settings.PersonalInfo({model:this.model})),"security"===a&&(b=new App.Views.ClientRep.Settings.Security({model:this.model})),App.Helpers.htmlView(b,"#client-rep-settings-body")}}),_.isUndefined(App.Views.ClientRep)&&(App.Views.ClientRep={}),_.isUndefined(App.Views.ClientRep.Settings)&&(App.Views.ClientRep.Settings={}),App.Views.ClientRep.Settings.PersonalInfo=App.Helpers.View.extend({template:App.Templates.clientRepSettingsPersonalInfo,className:"ClientRepSettingsPersonalInfo",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.previousEmail=this.model.get("email")},events:{"click #save":"save"},afterRender:function(){App.Helpers.addMask('[name="phone"]',"(999) 999-9999")},cancelEmailChange:function(){this.model.set("email",this.previousEmail)},updateEmailLocally:function(){this.previousEmail=this.model.get("email"),this.save()},save:function(a){_.isUndefined(a)||(a.preventDefault(),a.stopPropagation());var b,c=this;if(this.$el.find("#client-rep-user-settings-form").valid()){if(this.previousEmail!==this.model.get("email")){var d="This will update your email on all firms files your email is involved in. It will also log you out and you will have to validate your new email, to log back in. ",e=new App.Views.Shared.AlertView({processFunction:"updateEmailLocally",cancelFunction:"cancelEmailChange",viewClass:".ClientRepSettingsPersonalInfo",msg:d,title:"Are you sure you want to change your email?"}),f=new App.Helpers.Modal({view:e});return void f.show()}this.model.set("phone",this.$el.find('[name="phone"]').val()),this.model.save({},{success:function(a,d){c.model.clear(),c.model.set(d),App.loginModel.updateSessionData(d),b=new App.Helpers.Toast({message:"Personal Info saved Successfully.",classType:"success",fadeOut:5e3}),b.render()}})}}}),_.isUndefined(App.Views.ClientRep)&&(App.Views.ClientRep={}),_.isUndefined(App.Views.ClientRep.Settings)&&(App.Views.ClientRep.Settings={}),App.Views.ClientRep.Settings.Security=App.Helpers.View.extend({template:App.Templates.clientRepSettingsSecurity,className:"ClientRepSettingsSecurity",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{"click #save-password":"savePassword"},afterRender:function(){var a=this.$el;a.find('[data-toggle="popover"]').popover({content:function(){var a=new App.Views.Users.PasswordInstructions;return a.render().el},title:"Password instruction"}).on("hidden.bs.popover",function(){App.Helpers.cleanView(a.find(".UsersPasswordInstructions").data("view"))})},savePassword:function(a){a.stopPropagation(),a.preventDefault();var b,c=this;this.$el.find("#client-rep-user-scurity").valid()&&(this.model.set("changePassword",!0),this.model.save({},{success:function(){c.$el.find("input[name=current_password]").focus(),c.model.set("current_password",""),c.model.set("password",""),c.model.set("password_confirmation",""),c.model.unset("changePassword"),b=new App.Helpers.Toast({message:"Password Changed Successfully.",classType:"success",fadeOut:5e3}),b.render()},error:function(a,d){c.model.unset("changePassword"),b=new App.Helpers.Toast({message:d.responseJSON.error,classType:"danger",fadeOut:5e3}),b.render()}}))}}),_.isUndefined(App.Views.ClientRep)&&(App.Views.ClientRep={}),_.isUndefined(App.Views.ClientRep.UploadFile)&&(App.Views.ClientRep.UploadFile={}),App.Views.ClientRep.UploadFile.Index=App.Helpers.View.extend({template:App.Templates.clientRepUploadFileIndex,className:"ClientRepUploadFileIndex",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.collection=new App.Collections.Firms,this.countDocumentToUpload=0,this.countDocumentUploaded=0,this.documentsSelected=[]},events:{"click .fileupdate-cancel":"disabledButton","change #filesSelect":"changeFileSelect","click .btn-submit":"submitFile"},submitFile:function(a){a.preventDefault(),a.stopPropagation(),this.$el.find("[type=submit]").click()},afterRender:function(){this._initializeFileUpload(),this.getFiles()},changeFileSelect:function(){var a=this.$el;"Select an File"===a.find("#filesSelect option:selected").val()?(a.find(".btn-submit").prop("disabled",!0),a.find("#new-file").hide()):"New File"===a.find("#filesSelect option:selected").val()?(a.find(".btn-submit").prop("disabled",!1),a.find("#new-file").show()):a.find(".btn-submit").prop("disabled",!1)},getFiles:function(){if(App.Helpers.CurrentFirms)this.collection.reset(App.Helpers.CurrentFirms.toJSON());else{var a=this;this.showLoader(),$.get("/api/client_rep_files_controller_master/get_files").done(function(b){var c=_.values(b)||[];_.each(c,function(a){var b=_.map(a.files,function(b){return b.firm_id=a.firm_id,b});a.files=new App.Collections.Files(b)}),a.collection.reset(c)}).always(function(){a.removeLoader()})}},_initializeFileUpload:function(){var a=this.$el,b=this,c=1e8,d=function(){var a=$(".template-upload-base.hidden").clone();return a.removeClass("hidden"),a};a.find(".form-upload").fileupload({url:"/api/documents_controller/document_client_rep_upload",filesContainer:a.find(".documents"),uploadTemplateId:null,dataType:"json",downloadTemplateId:null,maxFileSize:c,uploadTemplate:function(e){a.find(".fileupdate-cancel").removeAttr("disabled");var f=$();return $.each(e.files,function(g,h){var i=d();i.find("[name=documentTitle]").val(h.name),i.find(".size").text(e.formatFileSize(h.size)),h.size>c?(i.addClass("invalid-form"),i.find("fieldset").remove(),i.addClass("panel-danger"),i.removeClass("panel-default"),i.find(".description-documentTitle > input").attr("disabled","disabled"),i.find(".description-note").closest(".form-group").remove()):(h.error?i.find(".error").text(".."+h.error):h.size&&c>h.size&&(b.countDocumentToUpload++,b.options.oneDocument&&a.find(".add-files").attr("disabled","disabled")),_.isUndefined(b.options.defaultChecked)||_.each(b.options.defaultChecked,function(a){i.find("[name="+a+"]").prop("checked",!0)})),f=f.add(i)}),f},downloadTemplate:function(a){var b=$(),c=_.first(a.files),e=d();if(c.error)e.addClass("panel-danger"),e.find(".error").html("Error uploading the document.");else{var f=$("<a>");e.addClass("panel-success"),f.attr("href","/api/documents_controller/get_document/"+c.documentID+"/"+App.Helpers.replaceSpecialCharaters(c.documentName)),f.attr("target","_blank"),f.text(c.documentTitle),e.find(".description-documentTitle").html(f),e.find(".description-note").html(c.note),e.find(".panel-footer").remove(),e.find(".panel-pg").remove(),b=b.add(e)}return b}}),a.find(".form-upload").bind("fileuploadsend",function(a,b){return b.total>c?!1:void 0}),a.find(".form-upload").bind("fileuploadsubmit",function(b,c){var d=$(b.currentTarget),e=[],f=$.cookie("token_name"),g=$.cookie("cf_csrf_cookie"),h=c.context.find(".form-group [name=note]").val();e.push("New File"===d.find(".form-group [name=filesNumber] option:selected").val()?{name:"firmID",value:d.find(".form-group [name=firmNumber] option:selected").val()}:{name:"firmID",value:d.find(".form-group [name=filesNumber] option:selected").data("firmid")}),e.push({name:f,value:g}),e.push({name:"note",value:h}),a.find(this).fileupload("option",{formData:e})}),a.find(".form-upload").bind("fileuploadcompleted",function(a,c){b.countDocumentUploaded++,_.has(c.result,"document")&&b.documentsSelected.push(c.result.document),b.countDocumentToUpload===b.countDocumentUploaded&&(b._sendEmailClientRep(),b.disabledButton())}),a.find(".form-upload").bind("fileuploadfail",function(a,b){var c=new App.Helpers.Toast({message:"Error Uploading this files",classType:"danger",fadeOut:5e3});if(c.render(),b.jqXHR&&b.jqXHR.responseJSON){var d=b.jqXHR.responseJSON.error||"";if(d)return b.files.file=b.jqXHR.responseJSON.file,b.context.find(".error").html(d),b.context.removeClass("panel-default"),b.context.addClass("panel-danger"),!1;this.$el.find(".fileupdate-cancel").trigger("click")}})},disabledButton:function(){var a=this.$el;a.find(".fileupdate-cancel").prop("disabled",!0),a.find("#filesSelect option:first").prop("selected",!0).change(),a.find(".fileinput-button").prop("disabled",!1),a.find("input[type=file]").prop("disabled",!1),a.find(".documents").empty(),a.find("#uplodaFile")[0].reset(),this.countDocumentToUpload=0,this.countDocumentUploaded=0},_sendEmailClientRep:function(){var a=new App.Helpers.Model,b=this.$el,c={documents:this.documentsSelected,note:b.find(".form-group [name=notes]").val()},d=this;"New File"===b.find(".form-group [name=filesNumber] option:selected").val()?(c.filetitle=b.find(".form-group [name=newFileName]").val(),
c.firmID=b.find(".form-group [name=firmNumber] option:selected").val()):(c.filetitle=b.find(".form-group [name=filesNumber] option:selected").text(),c.fileNumber=b.find(".form-group [name=filesNumber] option:selected").val(),c.firmID=b.find(".form-group [name=filesNumber] option:selected").data("firmid")),this.showLoader(),a.fetch({type:"POST",url:"/api/documents_controller/send_document_client_rep",data:JSON.stringify(c),success:function(){d.documentsSelected=[];var a=new App.Helpers.Toast({message:"Documents assigned successfully.",classType:"success",fadeOut:5e3});a.render()},complete:function(){d.removeLoader()}})}}),_.isUndefined(App.Views.Dashboard)&&(App.Views.Dashboard={}),App.Views.Dashboard.CalendarEventForm=App.Helpers.View.extend({template:App.Templates.dashboardCalendarEventForm,className:"DashboardCalendarEventForm",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.colUsers=new Uit.Collection;var b=this,c=this.$el;this.model.isNew()||this.colUsers.add(this.model.get("colUsers")),this.listenTo(this.model,"sync",function(){b.colUsers.add(b.model.get("colUsers")),this.model.get("fileNumber")&&c.find(".files_typeahead").typeahead("val",b.model.get("fileTitle")),this.model.get("eventID")&&c.find(".events_typeahead").typeahead("val",b.model.get("eventID")+": "+b.model.get("eventTitle"))}),this.colModules=new App.Collections.Modules,this.colModules.fetch()},events:{"click .icon-typeahead-down":"showAllEntities","click #save-alert":"saveCalendarEvent","click .close-alert-form":"setProperUrl","click #delete-alert":"deleteCalendarEvent",'change [name="files"]':"changeFile",'change [name="event"]':"changeEvent"},changeFile:function(a){var b=$(a.currentTarget),c=this.$el;""===b.val()&&(c.find(".files_typeahead").typeahead("val",""),this.model.set("fileNumber",null))},changeEvent:function(a){var b=$(a.currentTarget),c=this.$el;""===b.val()&&(c.find(".events_typeahead").typeahead("val",""),this.model.set("eventID",null))},deleteCalendarEvent:function(a){a.preventDefault(),a.stopPropagation();var b=$(a.currentTarget),c=this,d=b.data("alert-id"),e=new App.Models.CalendarEvent({alert_id:d}),f="";e.destroy({success:function(){f=new App.Helpers.Toast({message:"Calendar Reminder Deleted.",classType:"warning",fadeOut:3e3}),f.render();var a=c.options.alertCollection.where({alert_id:d})[0];a.destroy(),c.options.alertCollection.reset(c.options.alertCollection.models),$(".main-menu").data("view")._initCalendar(),c.$el.find(".close-alert-form").click()},error:function(){f=new App.Helpers.Toast({message:"Calendar Reminder Deletion failed.",classType:"danger",fadeOut:3e3}),f.render()}})},setProperUrl:function(){var a=Backbone.history.getFragment(),b=a.split("/alerts/");Backbone.history.navigate(b[0])},showAllEntities:function(a){App.Helpers.showAllEntities(a,this.$el)},afterRender:function(){var a=this;if(App.Helpers.initTypeahead({view:this,elemClass:".typeahead.user-Typeahead",urlBuild:{url:"api/typeahead_controller/search_users_not_client_reps"},processFunction:$.proxy(this.processUserTypeahead,this)}),App.Helpers.initTypeahead({view:this,elemClass:".typeahead.files_typeahead",urlBuild:{url:"api/typeahead_controller/search_files_without_filters",resource:function(){var b=a.model.get("eventID");return b?b:""}},processFunction:$.proxy(this.processFilesTypeahead,this)}),App.Helpers.initTypeahead({view:this,elemClass:".typeahead.events_typeahead",urlBuild:{url:"api/typeahead_controller/search_events",resource:function(){var b=a.model.get("fileNumber");return b?b:""}},processFunction:$.proxy(this.processEventsTypeahead,this)}),this.model.isNew()){var b=new App.Models.User({typeaheadResult:App.loginModel.get("last")+", "+App.loginModel.get("first")+" "+App.loginModel.get("middle")+" "+App.loginModel.get("email"),user_id:App.loginModel.get("id")});this.colUsers.add(b)}},processFilesTypeahead:function(a){this.$el.find(".files_typeahead").typeahead("val",a.typeaheadResult),this.model.set("fileNumber",a.fileNumber),this.model.set("moduleID",a.moduleID)},processEventsTypeahead:function(a){this.$el.find(".events_typeahead").typeahead("val",a.typeaheadResult),this.model.set("eventID",a.eventID)},processUserTypeahead:function(a){0===this.colUsers.where({user_id:a.user_id}).length&&(this.colUsers.add(a),this.$el.find('[name="userTypeahead"]').typeahead("val",""))},_addToCollection:function(a,b,c){var d=this;if(d.model.set("colUsers",null),d.model.set("colUsers",c),a)d.options.alertCollection.add(d.model);else{var e=d.options.alertCollection.findWhere({alert_id:b.get("alert_id")});e.clear(),e.set(b.attributes)}d.elementModal.modal("hide");var f=new App.Helpers.Toast({message:"Calendar Reminder Saved",classType:"success",fadeOut:5e3});f.render(),d.options.alertCollection.reset(d.options.alertCollection.models),$(".main-menu").data("view")._initCalendar()},saveCalendarEvent:function(){var a=this,b=this.$el,c=this.model.isNew();if(b.find("#alert-form").valid()){var d=[],e=[];if(_.each(b.find(".user-checkbox:checked"),function(a){a=$(a);var b={};b.user_id=a.data("user-id"),b.typeaheadResult=a.data("typeaheadresult"),d.push(b.user_id),e.push(b)}),d.length<=0){var f=new App.Helpers.Toast({message:"You must choose at least one user or more that will receive alerts",classType:"danger",fadeOut:3e3});return void f.render()}if(this.model.get("notificationQuantity")&&this.model.get("notificationUnit")&&(!this.model.get("time")||""===this.model.get("time"))){var g=new App.Helpers.Toast({message:"You must choose a time to set a reminder. ",classType:"danger",fadeOut:3e3});return void g.render()}this.model.set("userArr",d),this.model.save({},{success:function(b){a._addToCollection(c,b,e)}})}}}),_.isUndefined(App.Views.Dashboard)&&(App.Views.Dashboard={}),App.Views.Dashboard.GoogleAuthForm=App.Helpers.View.extend({template:App.Templates.dashboardGoogleAuthForm,className:"DashboardGoogleAuthForm",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{},_initCalGoogle:function(){var a="770411577463-rgem3cfcalqmc7fi3c32js3t3d3gpqvu.apps.googleusercontent.com",b=["https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"],c="https://www.googleapis.com/auth/calendar.readonly",d=document.getElementById("authorize-button"),e=document.getElementById("signout-button"),f=function(a){var b=document.getElementById("content"),c=document.createTextNode(a+"\n");b.appendChild(c)},g=function(){gapi.client.calendar.events.list({calendarId:"primary",timeMin:(new Date).toISOString(),showDeleted:!1,singleEvents:!0,maxResults:10,orderBy:"startTime"}).then(function(a){var b=a.result.items;if(f("Upcoming events:"),b.length>0)for(var c=0;c<b.length;c++){var d=b[c],e=d.start.dateTime;e||(e=d.start.date),f(d.summary+" ("+e+")")}else f("No upcoming events found.")})},h=function(a){a?(d.style.display="none",e.style.display="block",g()):(d.style.display="block",e.style.display="none")},i=function(){gapi.auth2.getAuthInstance().signIn()},j=function(){gapi.auth2.getAuthInstance().signOut()},k=function(){gapi.client.init({discoveryDocs:b,clientId:a,scope:c}).then(function(){gapi.auth2.getAuthInstance().isSignedIn.listen(h),h(gapi.auth2.getAuthInstance().isSignedIn.get()),d.onclick=i,e.onclick=j})};gapi.load("client:auth2",k)},afterRender:function(){var a=this;$.getScript("https://apis.google.com/js/api.js",function(b,c,d){console.log(b),console.log(c),console.log(d.status),console.log("Load was performed."),a._initCalGoogle()})}}),_.isUndefined(App.Views.Dashboard)&&(App.Views.Dashboard={}),App.Views.Dashboard.Mainmenu=App.Helpers.View.extend({template:App.Templates.dashboardMainMenu,className:"main-menu",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this.$el;this.colModules=new App.Collections.Modules,this.colAlerts=new App.Collections.Alerts,this.colModules.fetch(),this.colCalendarEvents=new App.Collections.CalendarEvents,Backbone.history.on("all",function(){var a=Backbone.history.fragment.split("/")[0];"users"===a?b.find("#typeahead .typeahead").removeAttr("disabled"):"files"===a?b.find("#typeahead .typeahead").removeAttr("disabled"):b.find("#typeahead .typeahead").attr("disabled","disabled")})},events:{'click a.link-menu:not([href="javascript:void(0);"])':"mainMenu","click #alert-menu":"alertMenu","click .alert-detail":"redirectAlert","click #popAlert":"updatePopAlert","click .alert-filer":"alertFilter","click #new-bill":"newBill","click .dismiss-alert":"dismissAlert","click .snooze-alert-option":"snoozeAlert","click .close-alerts-menu":"closeAlertMenu","click #cal-icon-container":"openCalendar","click #close-calendar":"closeCalendar","click #cal-movable":"lockCalendar","click .fa-window-maximize":"changeCalendarSize","click .fa-expand":"changeCalendarSize","click .fa-calendar-plus-o":"createCalendarEvent"},createCalendarEvent:function(a){var b="";b=a?new App.Models.CalendarEvent({date:a}):new App.Models.CalendarEvent;var c=new App.Views.Dashboard.CalendarEventForm({model:b,alertCollection:this.colCalendarEvents}),d=new App.Helpers.Modal({view:c});d.show()},editCalendarEvent:function(a){var b=new App.Models.CalendarEvent({alert_id:a}),c=new App.Views.Dashboard.CalendarEventForm({model:b,alertCollection:this.colCalendarEvents}),d=new App.Helpers.Modal({view:c});d.show(),b.fetch()},editByDrag:function(a){var b=moment(a.start).format("YYYY-MM-DD"),c=moment(a.end).format("YYYY-MM-DD"),d=moment(a.start).format("HH:mm:ss"),e=moment(a.end).format("HH:mm:ss");"Invalid date"===b&&(b=null),"Invalid date"===c&&(c=null),"Invalid date"===d&&(d=null),"Invalid date"===e&&(e=null),$.post("api/calendar_controller/calendarEditTimeDrag",JSON.stringify({alert_id:a.id,date:b,end_date:c,time:d,end_time:e}),function(){var a=new App.Helpers.Toast({message:"Calendar Reminder Updated",classType:"success",fadeOut:5e3});a.render()})},changeCalendarSize:function(a){a.preventDefault(),a.stopPropagation();var b=this.$el,c=$(a.currentTarget);c.hasClass("cal-size-max")?(b.find("#calendar-modal-container").css("width","80%"),this._initCalendar(500)):c.hasClass("cal-size-medium")?(b.find("#calendar-modal-container").css("width","65%"),this._initCalendar(350)):c.hasClass("cal-size-small")?(b.find("#calendar-modal-container").css("width","30%"),this._initCalendar(150),b.find("#calendar-modal-container").height(b.find("#calendar").height()+70)):c.hasClass("cal-size-100-perc")&&(b.find("#calendar-modal-container").css("width","99%"),this._initCalendar(800)),b.find("#calendar-modal-container").css("top","-75px"),b.find("#calendar-modal-container").css("left","20px")},_initCalendar:function(a){var b=(arguments.length<=1||void 0===arguments[1]?!1:arguments[1],arguments.length<=2||void 0===arguments[2]?!1:arguments[2]);a?this.lastContentHeight=a:a=this.lastContentHeight;var c=this.$el,d=this;c.find("#calendar").fullCalendar("destroy");var e=[];b=b?b:moment().format("YYYY-MM-DD"),_.each(this.colCalendarEvents.models,function(a){var b={};b.id=a.get("alert_id"),b.title=a.get("description"),a.get("time")?b.start=a.get("date")+"T"+moment(a.get("time"),["h:mm A"]).format("HH:mm"):a.get("end_time")?b.start=a.get("date")+"T"+moment(a.get("end_time"),["h:mm A"]).format("HH:mm"):b.start=a.get("date"),a.get("end_time")?a.get("end_date")?b.end=a.get("end_date")+"T"+moment(a.get("end_time"),["h:mm A"]).format("HH:mm"):b.end=a.get("date")+"T"+moment(a.get("end_time"),["h:mm A"]).format("HH:mm"):a.get("end_date")?b.end=a.get("end_date"):b.end=null,b.allDay=!1,e.push(b)}),c.find("#calendar").fullCalendar({header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay,listWeek"},dayClick:function(a){var b=moment(a).format("YYYY-MM-DD");d.createCalendarEvent(b)},handleWindowResize:!0,navLinks:!0,editable:!0,eventLimit:!1,displayEventTime:!0,height:"parent",contentHeight:a,defaultDate:b,events:e,eventClick:function(a){d.editCalendarEvent(a.id)},eventDrop:function(a){d.editByDrag(a)},eventResize:function(a){d.editByDrag(a)}}),c.find("#calendar-modal-container").height(c.find("#calendar").height()+40)},openCalendar:function(){var a=arguments.length<=0||void 0===arguments[0]?!1:arguments[0],b=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],c=this.$el,d=this;c.find("#calendar-modal-container").show(),c.find("#cal-icon-container").hide(),this.colCalendarEvents.reset(),this.colCalendarEvents.fetch({success:function(){d.colCalendarEvents.sortBy="date",d.colCalendarEvents.sortOrder="asc",d.colCalendarEvents.sort()},complete:function(){c.find("#calendar-modal-container").css("width","80%"),d._initCalendar(500,a,b)}})},closeCalendar:function(a){a.preventDefault(),a.stopPropagation();var b=this.$el;b.find("#calendar").fullCalendar("destroy"),b.find("#calendar-modal-container").hide(),b.find("#cal-icon-container").show()},lockCalendar:function(a){a.preventDefault(),a.stopPropagation();var b=this.$el,c=$(a.currentTarget),d=b.find("#calendar-modal-container").offset().top;c.hasClass("fa-arrows")?(c.removeClass("fa-arrows"),c.addClass("fa-lock"),b.find("#calendar-modal-container").removeClass("cursor-move"),b.find("#calendar-modal-container").draggable("destroy"),b.find("#calendar-modal-container").removeClass("p-absolute"),b.find("#calendar-modal-container").addClass("p-fixed"),10>d&&(d=10),b.find("#calendar-modal-container").css("top",d)):(c.addClass("fa-arrows"),c.removeClass("fa-lock"),b.find("#calendar-modal-container").css("z-index","1000").draggable({cancel:"#calendar"}),b.find("#calendar-modal-container").addClass("cursor-move"),b.find("#calendar-modal-container").removeClass("p-fixed"),b.find("#calendar-modal-container").addClass("p-absolute"),b.find("#calendar-modal-container").css("top",d))},alertMenu:function(){var a=this.$el;a.find(".right-sidebar").hasClass("open-right-bar")||(this.colAlerts.reset(),this.colAlerts.fetch(),this.colAlerts.sortBy="date",this.colAlerts.sortOrder="asc",this.colAlerts.sort(),$("#content").one("click",function(){a.find(".right-sidebar").hasClass("open-right-bar")&&(a.find(".right-sidebar").toggleClass("open-right-bar"),a.find(".right-menu-option").toggleClass("open-right-bar"),$(".profile-options-container").removeClass("profile-alert-menu-open"))})),a.find(".right-sidebar").toggleClass("open-right-bar"),a.find(".right-menu-option").toggleClass("open-right-bar"),a.find(".right-sidebar").hasClass("open-right-bar")?$(".profile-options-container").addClass("profile-alert-menu-open"):$(".profile-options-container").removeClass("profile-alert-menu-open"),a.find("#popAlert").prop("checked",App.loginModel.get("popAlerts"))},closeAlertMenu:function(){var a=this.$el;a.find(".right-sidebar").removeClass("open-right-bar"),a.find(".right-menu-option").removeClass("open-right-bar"),$(".profile-options-container").removeClass("profile-alert-menu-open")},alertFilter:function(a){var b=this.$el,c=b.find(a.currentTarget);this.colAlerts.reset(),c.data("filter")&&"all"!==c.data("filter")&&(this.colAlerts.alertFilter=c.data("filter")),this.colAlerts.fetch(),this.colAlerts.alertFilter=void 0},updatePopAlert:function(){var a=this.$el.find("#popAlert").is(":checked")?1:0;$.post("/api/alerts_controller/popAlert/",JSON.stringify({popAlert:a}),function(){App.loginModel.updatePopAlerts(a),$("#popAlertUser").length&&$("#popAlertUser").prop("checked",a);var b=new App.Helpers.Toast({message:"Alert Option updated",classType:"success",fadeOut:5e3});b.render()})},redirect:function(a){var b=Backbone.history.fragment.split("/")[0],c="";"users"===b?c="#users/edit/":"files"===b&&(c="#files/edit/"),Backbone.history.navigate(c+a.id,{trigger:!0})},redirectAlert:function(a){var b=this.$el,c=b.find(a.currentTarget),d="#files/edit/"+c.data("filenumber")+"/events/edit/"+c.data("eventid")+"/alerts/"+c.data("alert_id");b.find(".right-sidebar").removeClass("open-right-bar"),b.find(".right-menu-option").removeClass("open-right-bar"),Backbone.history.navigate(d,{trigger:!0})},newBill:function(){var a=new App.Views.Billing.Shared.NewBill({}),b=new App.Helpers.Modal({view:a});b.show()},displayKey:function(a){return a.first?a.first+" "+a.last+" "+a.email:a.fileTitle?a.fileTitle+" "+a.id:void 0},startTypeahead:function(){var a=this.$el,b=this,c=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("value"),queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:"/api/typeahead_controller/",replace:function(a,b){var c=Backbone.history.fragment.split("/")[0];return"users"===c?a+="search_users":"files"===c&&(a+="search_files"),a+"?search="+b}},limit:App.Const.limitTypeahead,rateLimitWait:100});c.initialize();var d=a.find("#typeahead .typeahead").typeahead({highlight:!0},{name:"name",displayKey:b.displayKey,nameKey:"last",source:c.ttAdapter(),dynamic:!0,minLength:3,delay:500});d.off("typeahead:selected typeahead:autocompleted"),d.on("typeahead:selected typeahead:autocompleted",function(c,d){_.isUndefined(d)||(a.find("#typeahead .typeahead").typeahead("val",""),a.find(".tt-dropdown-menu").css("display","none"),b.redirect(d))}),d.keypress(function(b){if(13===b.which){var c=a.find(".tt-suggestion").data("ttDatum");d.trigger("typeahead:selected",[c])}})},menu:{1:"files",3:"users",5:"settings",14:"tools"},removeAllSelected:function(){var a=this.$el;a.find("#menu-parent li.active").removeClass("active")},mainMenu:function(a){var b=$(a.currentTarget);this.removeAllSelected(),this._handlerSelectionMenu(b)},afterRender:function(){var a=this.$el;this.removeAllSelected();var b=Backbone.history.fragment;if(b){var c=a.find('[href="#'+b+'"]');this._handlerSelectionMenu(c)}this.startTypeahead(),$(".right-stat-bar").niceScroll({cursorcolor:"#74cede",cursorborder:"0px solid #fff",cursorborderradius:"0px",cursorwidth:"3px"}),a.find("#calendar-modal-container").css("z-index","1000").draggable({cancel:"#calendar"})},onClose:function(){var a=this.$el;a.find("#calendar-modal-container").draggable("destroy")},_handlerSelectionMenu:function(a){a.closest("li").addClass("active"),1===a.closest("ul.sub-menu").length&&(a.closest("ul.sub-menu").closest("li").addClass("active"),1===a.closest("ul.sub-menu").closest("li").closest("ul.sub-menu").closest("li").length&&a.closest("ul.sub-menu").closest("li").closest("ul.sub-menu").closest("li").addClass("active"))},setUrl:function(){return"#settings/milestones/module/"+this.module.get("moduleID")},getPopAlertCheck:function(){return App.loginModel.get("popAlerts")?!0:!1},dismissAlert:function(a){a.preventDefault(),a.stopPropagation();var b=this.$el.find(a.currentTarget),c=b.data("alert_id"),d=this;$.post("api/alerts_controller/markAlertAsDone",JSON.stringify({alert_id:c}),function(){var a=d.colAlerts.clone(),b=d.colAlerts.get({id:c});b.destroy(),d.colAlerts.reset(),d.colAlerts.add(a.toJSON()),d.colAlerts.sortBy="date",d.colAlerts.sortOrder="asc",d.colAlerts.sort(),0===d.colAlerts.length&&d.$el.find("#alert-menu").removeClass("toggle-right-box-red")})},snoozeAlert:function(a){var b=this.$el.find(a.currentTarget),c=b.data("time"),d={alert_id:b.data("alert_id"),snoozeMinutes:c};$.post("api/alerts_controller/snooze",JSON.stringify(d),function(){var a=new App.Helpers.Toast({message:"Alert snoozed for "+c+" minutes",classType:"success",fadeOut:5e3});a.render()})},checkSnooze:function(){return this.alert.get("snooze_date")?!0:!1}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),App.Views.Files.CalendarPanel=App.Helpers.View.extend({template:App.Templates.filesCalendarPanel,className:"FilesCalendarPanel",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.colAlerts=new App.Collections.Alerts;var c={};c.fileNumber=this.options.fileModel.get(this.options.fileModel.get("fileNumber")?"fileNumber":"subroFileNumber"),this.fileNumber=c.fileNumber,$.get("/api/calendar_controller/get_file_calendar_events",c,function(a){b.colAlerts.reset(a)})},events:{"click #new-file-alert":"createNewFileCalendar","click .alert-row":"editCalendarEvent"},createNewFileCalendar:function(){var a=new App.Models.CalendarEvent({fileNumber:this.fileNumber,fileTitle:"alalala"}),b=new App.Views.Files.FileCalendarForm({model:a,alertCollection:this.colAlerts}),c=new App.Helpers.Modal({view:b});c.show()},editCalendarEvent:function(a){a.preventDefault(),a.stopPropagation();var b=$(a.currentTarget),c=b.data("alert-id"),d=this.colAlerts.where({alert_id:c})[0],e=new App.Models.CalendarEvent({eventID:d.get("eventID"),alert_id:d.get("alert_id"),moduleID:d.get("moduleID"),fileNumber:d.get("fileNumber"),date:d.get("date"),end_date:d.get("end_date"),time:d.get("time"),end_time:d.get("end_time"),description:d.get("description"),notificationQuantity:d.get("notificationQuantity"),notificationUnit:d.get("notificationUnit"),colUsers:d.get("colUsers")}),f=new App.Views.Files.FileCalendarForm({model:e,alertCollection:this.colAlerts}),g=new App.Helpers.Modal({view:f});g.show()}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),App.Views.Files.Dashboard=App.Helpers.View.extend({template:App.Templates.filesDashboard,className:"files-dashboard",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.listenTo(this.model,"sync",function(){_.isUndefined(b.model.get("clientRep"))||(b.clientRepInfo=b.model.get("clientRep"),b.clientRepInfo.email=s.trim(b.clientRepInfo.email),b.clientRepInfo.fullName=b.getFullName(b.clientRepInfo.last,b.clientRepInfo.first,b.clientRepInfo.middle),b.$el.find("#client-rep-email-link").popover(s.isBlank(this.clientRepInfo.phone)?"destroy":{trigger:"hover"})),_.isUndefined(b.model.get("AA"))||(b.AAInfo=b.model.get("AA"),b.AAInfo.fullName=b.getFullName(b.AAInfo.lawyerLastName,b.AAInfo.lawyerFirstName,b.AAInfo.lawyerMiddleName),b.$el.find("#aa-lawyerEmail-link").popover(s.isBlank(this.AAInfo.lawyerOfficePhone)?"destroy":{trigger:"hover"})),_.isUndefined(b.model.get("defenseAttorneys"))||b.getPrimaryDAInfo(b.model.get("defenseAttorneys")),b.uFirmEmailsCollection.reset(b.model.get("firmEmails")||[])}),this.listenTo(this.model,"request update",function(){b.showLoader()}),this.listenTo(this.model,"sync error",function(){var a=this.$el,c=_.isUndefined(this.model.get("tpaClient"))?_.isUndefined(this.model.get("insurerClient"))?null:this.model.get("insurerClient"):this.model.get("tpaClient"),d=_.isNull(c)?"":c.clientName+": ";d+=_.isNull(c)||_.isUndefined(this.model.get("tpaClient"))?_.isNull(c)||_.isUndefined(this.model.get("insurerClient"))?"":"Insurer":"TPA",d+=_.isNull(c)?"":" ("+c.clientNameShort+")",b.setTitle(),a.find("#dashboard-clientName").html(d),b.model.get("previousWCFileOpens")&&b.model.get("previousWCFileOpens").length>0&&(this.model.set("openDate",_.chain(b.model.get("previousWCFileOpens")).sortBy(function(a){return a.previousOpenDate}).last().value().previousOpenDate),this.model.set("wcStatus",_.chain(b.model.get("previousWCFileOpens")).sortBy(function(a){return a.eventTypeName}).last().value().previousOpenDate)),b.model.get("previousLienFileOpens")&&b.model.get("previousLienFileOpens").length>0&&(this.model.set("openLienDate",_.chain(b.model.get("previousLienFileOpens")).sortBy(function(a){return a.previousOpenDate}).last().value().previousOpenDate),this.model.set("lienStatus",_.chain(b.model.get("previousLienFileOpens")).sortBy(function(a){return a.eventTypeName}).last().value().previousOpenDate)),b.removeLoader()}),this.deposCollection=new App.Helpers.Collection,this.hearingsCollection=new App.Helpers.Collection,this.casesCollection=new App.Helpers.Collection,this.uFirmEmailsCollection=new App.Collections.UAttyFirmEmails},setTitle:function(){var a=_.isUndefined(this.model.get("fileTitle"))?"":" | "+this.model.get("fileTitle");$(document).prop("title","CaseFriend"+a)},events:{"click .mailtoWithSubject":"mailtoWithSubject","click .menu-item":"changeMenu","click .menu-dashboard":"changeDashboardContent","click .link-info":"_handlerScrollTop","click .docHover":"showDocsHover","click .display-dashboard":"toggleDashboard","click .close-documentHover":"hideHearingDocsHover","click .liensIndexAll":"liensIndexAll","click .btn-document-browser":"goToDocumentBrowser"},getMailto:function(){var a=this.model.get("claimNumber")?" "+this.model.get("claimNumber"):"",b=this.model.get("applicantLastName")+", "+this.model.get("applicantFirstName")+a;return"mailto:"+this.row.get("email")+"?Subject="+b},hideHearingDocsHover:function(){var a=this.$el;a.find(".hoverParentContainer").remove()},getUrlLienIndexAll:function(){return this.model.fileEventsUrl()+"/liens_index_all"},getUrlEventGeneral:function(a){return this.model.fileEventsUrl()+"/event_category/"+a},liensIndexAll:function(a){var b=$(a.currentTarget),c=this.$el;c.find(".dashboard-contents").hide(),this.getLienStats(),c.find("#dashboard-liens").fadeIn(100);var d=b.attr("href");Backbone.history.getFragment()!==b.attr("href").slice(1)&&(Backbone.history.navigate(d),Backbone.history.loadUrl(d)),c.find(".dashboard-titles").removeClass("active"),b.closest(".dashboard-titles").addClass("active")},showDocsHover:function(a){var b,c=this.$el,d=$(a.currentTarget),e=parseInt(d.attr("eventID"),10),f=d.attr("data-collection-type");b="wc_hearings"===f?this.hearingsCollection.where({eventID:e})[0]:this.deposCollection.where({eventID:e})[0];var g=b.get("documents");if(c.find(".hoverParentContainer").remove(),g){var h='<div class="width-400 hoverParentContainer p-absolute top-0 right-0 bgc-white p-10 border-gray round-bordered"> <i class="fa fa-times f-right cursor-pointer close-documentHover"></i>';_.each(g,function(a){var b=new App.Models.Document(a);h+='<div class="cursor-pointer" data-doc-id="'+b.get("documentID")+'" data-doc-name="'+b.get("documentName")+'" data-doc-title="'+b.get("documentTitle")+'"><a href="'+b.getUrl()+'" target="_blank">'+b.getDocumentTitleOrNone()+"</a></div>"}),h+="</div>",d.parent().append(h)}},_handlerScrollTop:function(){var a=this.$el;a.find("#header-files-dashboard-sticky-sticky-wrapper").hasClass("is-sticky")&&$("html,body").scrollTop(331)},toggleDashboard:function(a){a.preventDefault(),a.stopPropagation();var b=$(a.currentTarget),c=this.$el;b.find("i.fa-angle-double-up").is(":visible")?(c.find(".dashboard-container").slideUp("fast"),b.find("i.fa-angle-double-up").hide(),b.find("i.fa-angle-double-down").show(),c.find("#complete-dashboard").addClass("p-bottom-i-0"),c.find("#complete-dashboard").removeClass("min-height-186"),c.find("#complete-dashboard").addClass("min-height-74")):(c.find(".dashboard-container").slideDown("fast",function(){c.find("#complete-dashboard").addClass("min-height-186"),c.find("#complete-dashboard").removeClass("min-height-74")}),b.find("i.fa-angle-double-up").show(),b.find("i.fa-angle-double-down").hide(),c.find("#complete-dashboard").removeClass("p-bottom-i-0")),this.rememberUserSettings()},afterRender:function(){var a=this,b=this.$el;b.find('[data-toggle="popover"]').popover({trigger:"manual",animation:!1,html:!0,content:function(){return a.renderPopoverContent(this)}}).on("mouseenter",function(a){var b=$(a.currentTarget);setTimeout(function(){b.popover("show"),b.siblings(".popover").on("mouseleave",function(){b.popover("hide")})},400)}).on("mouseleave",function(a){var b=$(a.currentTarget);setTimeout(function(){$(".popover").on("mouseleave",function(){b.popover("hide")}),$(".popover:hover").length||b.popover("hide")},400)}),b.find("#header-files-dashboard-sticky").sticky({topSpacing:0}),b.find('[data-toggle="dropdown"]').dropdown(),this.useUserSettings(),b.find("[data-submenu]").submenupicker()},changeMenu:function(a){var b=$(a.currentTarget),c=this.$el,d="";b.hasClass("dashboard-info-all")&&(c.find(".dashboard-contents").hide(),this.model.isNew()?Backbone.history.navigate("#files/new/step2",{trigger:!0}):Backbone.history.navigate(this.model.fileEditUrl(),{trigger:!0}),c.find("#dashboard-info").fadeIn(100)),b.hasClass("dashboard-info")&&c.find("#dashboard-info").fadeIn(100),b.hasClass("dashboard-medical-all")&&(d=this.getUrlEventGeneral(5),d!==Backbone.history.getFragment()?Backbone.history.navigate(d,{trigger:!0}):this.getMedicalsStats()),b.hasClass("dashboard-hearing-all")&&(d=this.getUrlEventGeneral(3),d!==Backbone.history.getFragment()?Backbone.history.navigate(d,{trigger:!0}):this.getHearingStats()),b.hasClass("dashboard-deposition-all")&&(d=this.getUrlEventGeneral(4),d!==Backbone.history.getFragment()?Backbone.history.navigate(d,{trigger:!0}):this.getDepoStats()),b.hasClass("dashboard-subpoena-all")&&(d=this.getUrlEventGeneral(2),d!==Backbone.history.getFragment()?Backbone.history.navigate(d,{trigger:!0}):this.getSubpoenaStats()),b.hasClass("dashboard-liens-all")&&(d=this.getUrlEventGeneral(6),d!==Backbone.history.getFragment()?Backbone.history.navigate(d,{trigger:!0}):this.getLienStats()),b.hasClass("dashboard-timeline-all")&&this.getTimeline(),b.hasClass("dashboard-all-billing-all")&&this.getAllBilling(),c.find(".dashboard-titles").removeClass("active"),b.closest(".dashboard-titles").addClass("active")},changeDashboardContent:function(a){var b=$(a.currentTarget),c=this.$el;c.find(".dashboard-container").is(":hidden")&&c.find(".dashboard-container").slideDown(),c.find("i.fa-angle-double-up").show(),c.find("i.fa-angle-double-down").hide(),c.find(".dashboard-contents").hide(),b.hasClass("dashboard-info")&&c.find("#dashboard-info").fadeIn(100),b.hasClass("dashboard-info")&&c.find("#dashboard-info").fadeIn(100),b.hasClass("dashboard-medical")&&this.getMedicalsStats(),b.hasClass("dashboard-hearing")&&this.getHearingStats(),b.hasClass("dashboard-deposition")&&this.getDepoStats(),b.hasClass("dashboard-subpoena")&&this.getSubpoenaStats(),b.hasClass("dashboard-liens")&&this.getLienStats(),b.hasClass("dashboard-timeline")&&c.find("#dashboard-info").fadeIn(100),b.hasClass("dashboard-all-billing")&&c.find("#dashboard-info").fadeIn(100)},getMedicalsStats:function(){var a={},b=this,c=this.$el;a.fileNumber=this.model.get("fileNumber"),this.showLoader(),c.find(".dashboard-contents").hide(),$.get("/api/file_events_controller/wc_medicals_stats_per_file",a,function(a){b.casesCollection.reset(a.cases);var d='<ul class="list-unstyled m-8">';_.each(a.otherInfo,function(a){d+='<li class="p-3">'+a+"</li>"}),c.find("#otherInfo").html(d),c.find(".body-part-labels .0").attr("class","delayed-color"),c.find(".body-part-labels .1").attr("class","accepted-color"),c.find(".body-part-labels .2").attr("class","denied-color"),b.removeLoader()}),c.find("#dashboard-medical").fadeIn(100)},getLienStats:function(){var a={},b=this,c=this.$el;a.fileNumber=this.model.get("fileNumber"),this.showLoader(),c.find(".dashboard-contents").hide(),$.get("/api/file_events_controller/wc_liens_stats_per_file",a,function(a){a&&(a.exposure=a.exposure?a.exposure:0,a.settledAmount=a.settledAmount?a.settledAmount:0,b.lienExposure="$",b.lienExposure+=a.exposure?a.exposure.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):0,b.lienSettledAmount="$",b.lienSettledAmount+=a.settledAmount?a.settledAmount.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):0,b.lienCurrentAmount+="$",b.lienCurrentAmount=a.currentAmount?a.currentAmount.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):0,b.lienSavingAmount+="$",b.lienSavingAmount=a.savingAmount?a.savingAmount.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):0,b.lienTotal=a.total,b.lienOfRecord=a.ofRecord,b.lienOther=a.other,b.lienDismissed=a.dismissed,b.lienSettled=a.settled),b.removeLoader()}),c.find("#dashboard-liens").fadeIn(100)},getTimeline:function(){Backbone.history.navigate(this.model.fileEventsUrl(),{trigger:!0}),this.$el.find(".dashboard-contents").hide(),this.$el.find("#dashboard-info").fadeIn(100)},getAllBilling:function(){Backbone.history.navigate(this.model.fileBillingUrl(),{trigger:!0}),this.$el.find(".dashboard-contents").hide(),this.$el.find("#dashboard-info").fadeIn(100)},getSubpoenaStats:function(){var a={},b=this,c=this.$el;a.fileNumber=this.model.get("fileNumber"),this.showLoader(),c.find(".dashboard-contents").hide(),$.get("/api/file_events_controller/wc_subpoenas_stats_per_file",a,function(a){b.subpoenaNoRecords=a.noRecords,b.subpoenaReceived=a.received,b.subpoenaOrdered=a.ordered,b.subpoenaPending=a.ordered-a.received-a.noRecords,
b.removeLoader()}),c.find("#dashboard-subpoena").fadeIn(100)},getHearingStats:function(){var a={},b=this,c=this.$el;a.fileNumber=this.model.get("fileNumber"),this.showLoader(),c.find(".dashboard-contents").hide(),$.get("/api/file_events_controller/wc_hearings_stats_per_file",a,function(a){b.hearingsCollection.reset(a),b.removeLoader()}),c.find("#dashboard-hearing").fadeIn(100)},getDepoStats:function(){var a={},b=this,c=this.$el;a.fileNumber=this.model.get("fileNumber"),this.showLoader(),c.find(".dashboard-contents").hide(),$.get("/api/file_events_controller/wc_depos_stats_per_file",a,function(a){b.deposCollection.reset(a),b.removeLoader()}),c.find("#dashboard-deposition").fadeIn(100)},mailtoWithSubject:function(a){a.preventDefault(),a.stopPropagation();var b=$(a.currentTarget),c=this.model.get("claimNumber")?" "+this.model.get("claimNumber"):"",d="?Subject="+this.model.get("applicantLastName")+", "+this.model.get("applicantFirstName")+c;document.location.href="mailto:"+b.attr("href")+d},getFullName:function(a,b,c){return a+", "+b+" "+(c?c:"")},getPrimaryDAInfo:function(a){var b=_.findWhere(a,{primaryDA:1}),c=this.$el;return b.fullName=this.getFullName(b.last,b.first,b.middle),this.DAInfo=b,c.find("#da-email-link").popover(s.isBlank(this.DAInfo.phone)?"destroy":{trigger:"hover"}),b},renderPopoverContent:function(a){var b=a.getAttribute("id"),c=$("#"+b),d="",e=c.data("attributes"),f=c.data("column"),g="inline"===f?f:this.model.get(f);if(_.isUndefined(g)||!_.isUndefined(g)&&0===g.length)return"No data found";switch(f){case"cases":_.each(g,function(a){var b=[];_.each(e.split(","),function(c){var d=a[c];"DOIendCT"===c&&d?(d+=" CT",b.push(d)):"venueAbbrev"===c&&d?(d="("+d+")",b.push(d)):d&&b.push(d)}),d+="<li>"+b.join(", ")+"</li>"});break;case"previousWCFileOpens":_.each(g,function(a){var b=a.previousOpenDate,c=a.eventTypeName;d+="<li>"+b+", "+c+"</li>"});break;case"previousLienFileOpens":_.each(g,function(a){var b=a.previousOpenDate,c=a.eventTypeName;d+="<li>"+b+", "+c+"</li>"});break;case"inline":var h=c.data("user");switch(h){case"clientRepInfo":d+=this.clientRepInfo.phone,d+=this.clientRepInfo.phoneExtension>0?" Ext: "+this.clientRepInfo.phoneExtension:"";break;case"AAInfo":d+=this.AAInfo.lawyerOfficePhone,d+=this.AAInfo.lawyerPhoneExtension>0?" Ext: "+this.AAInfo.lawyerPhoneExtension:"";break;case"DAInfo":d+=this.DAInfo.phone,d+=this.DAInfo.phoneExtension>0?" Ext: "+this.DAInfo.phoneExtension:""}}return'<ul class="list-unstyled">'+d+"</ul>"},rememberUserSettings:function(){var a=this.$el.find("i.fa-angle-double-down").is(":visible")?"down":"up";localStorage.setItem("dashboardArrow",a)},useUserSettings:function(){var a=localStorage.getItem("dashboardArrow");if(a){var b=this.$el;"down"===a&&(b.find(".dashboard-container").hide(),b.find("#complete-dashboard").addClass("p-bottom-i-0"),b.find("#complete-dashboard").removeClass("min-height-186"),b.find("#complete-dashboard").addClass("min-height-74"),b.find("i.fa-angle-double-up").hide(),b.find("i.fa-angle-double-down").show())}},goToDocumentBrowser:function(){var a=new App.Views.Files.Documents.DocumentBrowser({viewOnly:!0,fileModel:this.model,parentClassName:this.className,collection:new App.Collections.Documents2}),b=new App.Helpers.Modal({view:a,sizeModal:"modal-lg",parentClassName:this.className});b.show()},printLienCurrentStatus:function(){return this.model.get("currentLienFileStatus")?this.model.get("currentLienFileStatus").status.replace("Lien-",""):"Open"},printWCCurrentStatus:function(){return this.model.get("currentWCFileStatus")?this.model.get("currentWCFileStatus").status.replace("WC-",""):"Open"},getCurrentStatus:function(){return this.model.get("currentFileStatus")?this.model.get("currentFileStatus").status:"WC"},isFileOpened:function(){var a=!this.model.get("lienIsFileClosed")&&_.isNull(this.model.get("lienOpenDate"))||this.model.get("lienIsFileClosed"),b=!this.model.get("wcIsFileClosed")&&_.isNull(this.model.get("wcOpenDate"))||this.model.get("wcIsFileClosed");return a&&b?!1:!0}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),App.Views.Files.DashboardSubro=App.Helpers.View.extend({template:App.Templates.filesDashboardSubro,className:"FilesDashboardSubro",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this,c=this.$el;this.listenTo(this.model,"sync error",function(){var a=b.model.get("client"),d=a.clientName+": "+a.clientTypeName+" ("+a.clientNameShort+")";c.find("#dashboard-clientName").html(d),_.isUndefined(b.model.get("clientRep"))||(b.clientRepInfo=b.model.get("clientRep"),b.clientRepInfo.email=s.trim(b.clientRepInfo.email),b.clientRepInfo.fullName=b.getFullName(b.clientRepInfo.last,b.clientRepInfo.first,b.clientRepInfo.middle),b.$el.find("#client-rep-email-link").popover(s.isBlank(this.clientRepInfo.phone)?"destroy":{trigger:"hover"})),b.model.get("workerCompID")?(b.workerComp=b.model.get("workerComp"),b.workerComp.fullName=b.getFullName(b.workerComp.lawyerLastName,b.workerComp.lawyerFirstName,b.workerComp.lawyerMiddleName),b.$el.find("#wkr-lawyerEmail-link").popover(s.isBlank(b.workerComp.lawyerOfficePhone)?"destroy":{trigger:"hover"})):b.workerComp={},b.model.get("previousSubroFileOpens")&&b.model.get("previousSubroFileOpens").length>0&&(b.model.set("subroOpenDate",_.chain(b.model.get("previousSubroFileOpens")).sortBy(function(a){return a.previousOpenDate}).last().value().previousOpenDate),b.model.set("subroStatus",_.chain(b.model.get("previousSubroFileOpens")).sortBy(function(a){return a.eventTypeName}).last().value().previousOpenDate)),b.model.get("previousLienFileOpens")&&b.model.get("previousLienFileOpens").length>0&&(b.model.set("openLienDate",_.chain(b.model.get("previousLienFileOpens")).sortBy(function(a){return a.previousOpenDate}).last().value().previousOpenDate),b.model.set("lienStatus",_.chain(b.model.get("previousLienFileOpens")).sortBy(function(a){return a.eventTypeName}).last().value().previousOpenDate)),b.model.get("previousInterventionFileOpens")&&b.model.get("previousInterventionFileOpens").length>0&&(b.model.set("interventionOpenDate",_.chain(b.model.get("previousInterventionFileOpens")).sortBy(function(a){return a.previousOpenDate}).last().value().previousOpenDate),b.model.set("interventionStatus",_.chain(b.model.get("previousInterventionFileOpens")).sortBy(function(a){return a.eventTypeName}).last().value().previousOpenDate)),_.isUndefined(b.model.get("subroAttorneys"))||b.getPrimarySAInfo(b.model.get("subroAttorneys")),b.setTitle()}),this.listenTo(this.model,"change:client",function(){var a=b.model.get("client"),d=a.clientName+": "+a.clientTypeName+" ("+a.clientNameShort+")";c.find("#dashboard-clientName").html(d)})},events:{"click .menu-item":"changeMenu","click .menu-dashboard":"changeDashboardContent","click .display-dashboard":"toggleDashboard"},changeMenu:function(a){var b=$(a.currentTarget),c=this.$el;b.hasClass("dashboard-info-all")&&(c.find(".dashboard-contents").hide(),this.model.isNew()?Backbone.history.navigate("#files/new/step2",{trigger:!0}):Backbone.history.navigate(this.model.fileEditUrl(),{trigger:!0}),c.find("#dashboard-info").fadeIn(100)),b.hasClass("dashboard-info")&&c.find("#dashboard-info").fadeIn(100),b.hasClass("dashboard-timeline-all")&&this.getTimeline(),b.hasClass("dashboard-all-billing-all")&&this.getAllBilling(),c.find(".dashboard-titles").removeClass("active"),b.closest(".dashboard-titles").addClass("active")},getTimeline:function(){Backbone.history.navigate(this.model.fileEventsUrl(),{trigger:!0}),this.$el&&(this.$el.find(".dashboard-contents").hide(),this.$el.find("#dashboard-info").fadeIn(100))},getAllBilling:function(){Backbone.history.navigate(this.model.fileBillingUrl(),{trigger:!0}),this.$el&&(this.$el.find(".dashboard-contents").hide(),this.$el.find("#dashboard-info").fadeIn(100))},changeDashboardContent:function(a){var b=$(a.currentTarget),c=this.$el;c.find(".dashboard-container").is(":hidden")&&c.find(".dashboard-container").slideDown(),c.find("i.fa-angle-double-up").show(),c.find("i.fa-angle-double-down").hide(),c.find(".dashboard-contents").hide(),b.hasClass("dashboard-info")&&c.find("#dashboard-info").fadeIn(100),b.hasClass("dashboard-timeline")&&c.find("#dashboard-info").fadeIn(100)},isFileOpened:function(){var a=!this.model.get("subroIsFileClosed")&&_.isNull(this.model.get("subroOpenDate"))||this.model.get("subroIsFileClosed"),b=!this.model.get("lienIsFileClosed")&&_.isNull(this.model.get("lienOpenDate"))||this.model.get("lienIsFileClosed"),c=!this.model.get("interventionIsFileClosed")&&_.isNull(this.model.get("interventionOpenDate"))||this.model.get("interventionIsFileClosed");return a&&b&&c?!1:!0},toggleDashboard:function(a){a.preventDefault(),a.stopPropagation();var b=$(a.currentTarget),c=this.$el;b.find("i.fa-angle-double-up").is(":visible")?(c.find(".dashboard-container").slideUp("fast"),b.find("i.fa-angle-double-up").hide(),b.find("i.fa-angle-double-down").show(),c.find("#complete-dashboard").addClass("p-bottom-i-0"),c.find("#complete-dashboard").removeClass("min-height-186"),c.find("#complete-dashboard").addClass("min-height-74")):(c.find(".dashboard-container").slideDown("fast",function(){c.find("#complete-dashboard").addClass("min-height-186"),c.find("#complete-dashboard").removeClass("min-height-74")}),b.find("i.fa-angle-double-up").show(),b.find("i.fa-angle-double-down").hide(),c.find("#complete-dashboard").removeClass("p-bottom-i-0")),this.rememberUserSettings()},rememberUserSettings:function(){var a=this.$el.find("i.fa-angle-double-down").is(":visible")?"down":"up";localStorage.setItem("dashboardArrow",a)},useUserSettings:function(){var a=localStorage.getItem("dashboardArrow");if(a){var b=this.$el;"down"===a&&(b.find(".dashboard-container").hide(),b.find("#complete-dashboard").addClass("p-bottom-i-0"),b.find("#complete-dashboard").removeClass("min-height-186"),b.find("#complete-dashboard").addClass("min-height-74"),b.find("i.fa-angle-double-up").hide(),b.find("i.fa-angle-double-down").show())}},afterRender:function(){var a=this,b=this.$el;b.find('[data-toggle="popover"]').popover({trigger:"manual",animation:!1,html:!0,content:function(){return a.renderPopoverContent(this)}}).on("mouseenter",function(a){var b=$(a.currentTarget);setTimeout(function(){b.popover("show"),b.siblings(".popover").on("mouseleave",function(){b.popover("hide")})},400)}).on("mouseleave",function(a){var b=$(a.currentTarget);setTimeout(function(){$(".popover").on("mouseleave",function(){b.popover("hide")}),$(".popover:hover").length||b.popover("hide")},400)}),b.find("#header-files-dashboard-sticky").sticky({topSpacing:0}),b.find('[data-toggle="dropdown"]').dropdown(),this.useUserSettings(),b.find("[data-submenu]").submenupicker()},printSubroCurrentStatus:function(){return this.model.get("currentSubroFileStatus")?this.model.get("currentSubroFileStatus").status.replace("Subro-",""):"Open"},printLienCurrentStatus:function(){return this.model.get("currentLienFileStatus")?this.model.get("currentLienFileStatus").status.replace("Lien-",""):"Open"},printInterventionCurrentStatus:function(){return this.model.get("currentInterventionFileStatus")?this.model.get("currentInterventionFileStatus").status.replace("Intervention-",""):"Open"},setTitle:function(){var a=_.isUndefined(this.model.get("subroInternalFileName"))?"":" | "+this.model.get("subroInternalFileName");$(document).prop("title","CaseFriend"+a)},getFullName:function(a,b,c){return a+", "+b+" "+(c?c:"")},getPrimarySAInfo:function(a){var b=_.findWhere(a,{primaryDA:1}),c=this.$el;return b.fullName=this.getFullName(b.last,b.first,b.middle),this.SAInfo=b,c.find("#sa-email-link").popover(s.isBlank(this.SAInfo.phone)?"destroy":{trigger:"hover"}),b},renderPopoverContent:function(a){var b=a.getAttribute("id"),c=$("#"+b),d="",e=c.data("column"),f="inline"===e?e:this.model.get(e);if(_.isUndefined(f)||!_.isUndefined(f)&&0===f.length)return"No data found";switch(e){case"previousSubroFileOpens":case"previousInterventionFileOpens":case"previousLienFileOpens":_.each(f,function(a){var b=a.previousOpenDate,c=a.eventTypeName;d+="<li>"+b+", "+c+"</li>"});break;case"inline":var g=c.data("user");switch(g){case"clientRepInfo":d+=this.clientRepInfo.phone,d+=this.clientRepInfo.phoneExtension>0?" Ext: "+this.clientRepInfo.phoneExtension:"";break;case"SAInfo":d+=this.SAInfo.phone,d+=this.SAInfo.phoneExtension>0?" Ext: "+this.SAInfo.phoneExtension:"";break;case"workerComp":d+=this.workerComp.lawyerOfficePhone,d+=this.workerComp.lawyerPhoneExtension>0?" Ext: "+this.workerComp.lawyerPhoneExtension:""}}return'<ul class="list-unstyled">'+d+"</ul>"}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.Documents)&&(App.Views.Files.Documents={}),App.Views.Files.Documents.AssignDocuments=App.Helpers.View.extend({template:App.Templates.filesDocumentsAssignDocuments,className:"assignDocuments",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.filterFileNumber=this.options.fileModel.getFileNumber(),this.oneDocument=this.options.oneDocument||!1,this.options.designation="",this.options.categoryDesignation="",this.options.condition="or"},events:{"change [name=inputSearch]":"inputSearch","click .inputCheckboxFilter":"handlerFilterDocuments","click [type=checkbox][name=select]":"handlerCheckDocument","click .editDocument":"editDocument","click .selectAll":"selectAll","click .icon-typeahead-down":"showAllEntities",'change [name="designation"]':"handlerFilterDocuments","click .btn-remove-designation":"removeDesignations","change [name=category_designation]":"designationsByCategory","change [name=condition]":"handlerFilterDocuments","click .show-all-designations":"showAllDesignations","click .btn-close-all-designations":"hideAllDesignations","click .btn-apply-filter-designations":"applyFilterDesignations"},removeDesignations:function(){this.options.condition="or",this.options.categoryDesignation="",this.$el.find("[name=category_designation]").val(""),this.$el.find("[name=designation]").val(null).trigger("change")},getDocumentUrl:function(){return this.row.getUrl()},afterRender:function(){var a=this.$el;a.find("[name=category_designation]").append("<option></option>"),_.each(this.options.fileModel.get("designations"),function(b,c){var d=$("<option></option>"),e=$("<optgroup></optgroup>");e.attr("label",c),d.val(c),d.text(c),_.each(b,function(a,b){var c=$("<option></option>");c.val(b),c.text(a),e.append(c)}),a.find("[name=designation]").append(e),a.find("[name=category_designation]").append(d)}),App.Helpers.initSelect2(a.find("[name=designation]"),{allowClear:!0,placeholder:"Select designation(s)"}),a.find("ul.select2-results").css("min-height",$(window).height()-250),this._renderDesignations()},processSelectFileTypeahead:function(a){this.filterFileNumber=a.fileNumber,this.handlerFilterDocuments()},processUnmatchedSelectFileTypeahead:function(){},_initTypeahead:function(){var a=this.$el,b=this,c=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("value"),queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{cache:!1,url:"api/typeahead_controller/search_files",searchAll:!1,replace:function(a,b){return b=this.searchAll?"*.*":b,this.searchAll=!1,a+"?search="+b}},limit:App.Const.limitTypeahead,rateLimitWait:100}),d=function(a){return a.fileTitle};c.initialize(),a.find(".typeahead.file_title").data("filter-id",0);var e=a.find(".typeahead.file_title").typeahead({minLength:0,highlight:!0},{name:"name",displayKey:d,nameKey:"last",source:c.ttAdapter(),dynamic:!0,minLength:3,delay:500});a.find(".typeahead.file_title").data("engine",c),e.on("typeahead:selected typeahead:autocompleted",function(c,d){_.isUndefined(d)||(a.find(".tt-dropdown-menu").css("display","none"),b.filterFileNumber=d.fileNumber,b.handlerFilterDocuments())}),e.focusout(function(a){var c=$(a.currentTarget);""===c.val()&&(b.filterFileNumber=0,b.options.colDocuments.reset([]),b.handlerFilterDocuments())})},selectAll:function(a){var b=$(a.currentTarget).is(":checked"),c=this.$el,d=this;c.find("[type=checkbox][name=select]").each(function(){var a=$(this),c=a.data("document-id"),e=d.options.colDocuments.get(c);e.set("selected",b),a.prop("checked",b)}),this.handlerActions()},editDocument:function(a){var b=$(a.currentTarget),c=b.data("document-id"),d=new App.Models.Document2({documentID:c}),e=new App.Views.Files.Documents.Form({model:d,collection:this.options.colDocuments,fileModel:this.options.fileModel});new App.Helpers.Modal({view:e,sizeModal:"modal-lg",parentClassName:this.options.parentClassName}).show(),d.fetch()},handlerCheckDocument:function(a){var b=$(a.currentTarget),c=b.data("document-id"),d=this.options.colDocuments.findWhere({documentID:c}),e=b.is(":checked");d.set("selected",e),this.handlerActions()},handlerActions:function(){var a=this.options.colDocuments.where({selected:!0}),b=$(".documentBrowser").data("view").$el,c=this.$el;a.length>0?(this.oneDocument&&1===a.length?b.find(".btn-selectDocuments").removeAttr("disabled"):this.oneDocument&&a.length>1?b.find(".btn-selectDocuments").attr("disabled","disabled"):b.find(".btn-selectDocuments").removeAttr("disabled"),a.length>1?b.find(".btn-download").attr("disabled","disabled"):b.find(".btn-download").removeAttr("disabled"),b.find(".btn-download-zip").removeAttr("disabled"),b.find(".btn-combine-actions").removeAttr("disabled"),b.find(".btn-deleteDocuments").removeAttr("disabled")):(b.find(".btn-selectDocuments").attr("disabled","disabled"),b.find(".btn-download").attr("disabled","disabled"),b.find(".btn-download-zip").attr("disabled","disabled"),b.find(".btn-combine-actions").attr("disabled","disabled"),b.find(".btn-deleteDocuments").attr("disabled","disabled")),c.find(".selectAll").prop("checked",this.options.colDocuments.length>0&&this.options.colDocuments.where({selected:!0}).length===this.options.colDocuments.length)},getFilters:function(){var a=this.$el,b={search:a.find("[name=inputSearch]").val().trim(),designations:"",condition:this.options.condition},c=[];return a.find("[name=designation] :selected").each(function(){c.push($(this).val())}),b.designations=c.join("|"),b},handlerFilterDocuments:function(){var a={filters:this.getFilters()},b=this,c=this.$el;if(0!==this.filterFileNumber)return""===a.filters.designations&&""!==c.find("[name=category_designation]:selected").val()&&c.find("[name=category_designation]").val(""),this.options.colDocuments.reset(),this.options.colDocuments.fetch({url:"/api/documents_controller/get_manage_documents?fileNumber="+this.filterFileNumber,type:"POST",data:JSON.stringify(a),complete:function(){b.options.colDocuments.each(function(a){b.collection.get(a.get("documentID"))?a.set("blocked",1):a.set("blocked",0)}),b.options.colDocuments.sortOrder="DESC",b.options.colDocuments.sortBy="blocked",b.options.colDocuments.sort(),b.handlerActions()}}),a.filters},inputSearch:function(){var a=this.$el.find("[name=inputSearch]").val().trim();this.$el.find("[name=inputSearch]").val(a),this.handlerFilterDocuments()},showAllEntities:function(a){App.Helpers.showAllEntities(a,this.$el)},onClose:function(){this.$el.find("[name=designation]").select2("destroy")},getDesignations:function(){return App.Helpers.getDesignations(this.options.fileModel.get("designations"),this.row.get("designations")).join(", ")},designationsByCategory:function(a){var b,c=$(a.currentTarget).val(),d=this.options.fileModel.get("designations"),e=this.$el;c&&d?(b=d[c],this.options.condition="or",e.find("[name=designation]").val(_.keys(b)).trigger("change")):this.removeDesignations()},_renderDesignations:function(){this.$el.find(".container-designations").html(new App.Views.Files.Documents.Designations({designations:this.options.fileModel.get("designations")}).render().$el.html())},showAllDesignations:function(){var a=this.$el;a.find(".designation-input").each(function(){$(this).prop("checked",!1)}),a.find("[name=designation] :selected").each(function(){var b=$(this).val();a.find('[data-designation-id="'+b+'"]').prop("checked",!0)}),a.find(".filter-designations").show(),a.find(".wrapper-assign-documents").hide(),this.handlerShowOrHideActions("hide")},handlerShowOrHideActions:function(a){var b=$(".documentBrowser").data("view").$el;"hide"===a?(b.find(".actions").addClass("v-hidden"),b.find(".btn-closeModal").addClass("v-hidden"),b.find(".tab-upload").addClass("v-hidden")):(b.find(".actions").removeClass("v-hidden"),b.find(".btn-closeModal").removeClass("v-hidden"),b.find(".tab-upload").removeClass("v-hidden"))},hideAllDesignations:function(){var a=this.$el;a.find(".filter-designations").hide(),a.find(".wrapper-assign-documents").show(),this.handlerShowOrHideActions("show")},applyFilterDesignations:function(){var a=this.$el,b=[];a.find(".designation-input:checked").each(function(){var a=$(this).attr("data-designation-id");b.push(a)}),this.hideAllDesignations(),b.length?a.find("[name=designation]").val(b).trigger("change"):(a.find("[name=designation]").val(null).trigger("change"),this.removeDesignations()),this.handlerShowOrHideActions("show")}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.Documents)&&(App.Views.Files.Documents={}),App.Views.Files.Documents.Designations=App.Helpers.View.extend({template:App.Templates.filesDocumentsDesignations,className:"FilesDocumentsDesignations",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},afterRender:function(){var a,b=this.$el,c=0,d=0,e=!0,f=_.size(this.options.designations);_.each(_.values(this.options.designations),function(a){f+=_.size(a)}),c=Math.round((f+4)/4),_.each(this.options.designations,function(f,g){e&&(a=b.find(".template-designation").clone().removeClass("hidden template-designation"),b.find(".wrapper-designations").append(a),e=!1);var h=a.find(".item-template-title.hidden").clone().removeClass("hidden");h.addClass("font-bold font-size-16 p-bottom-5"),h.html(g),a.find("ul").append(h),d++,d===c&&(a=b.find(".template-designation").clone().removeClass("hidden template-designation"),b.find(".wrapper-designations").append(a),d=0),_.each(_.sortBy(_.values(f)),function(e){var g=_.object(_.values(f),_.keys(f)),h=g[e],i=a.find(".item-template.hidden").clone().removeClass("hidden"),j=e.toLocaleLowerCase().replace(/[^a-zA-Z0-9]/g,"_");i.find("span").text(e),i.find("input").attr("data-designation-id",h),i.find("input").attr("id",h+"_"+j),i.find("input").addClass("dd_"+h),a.find("ul").append(i),d++,d===c&&(a=b.find(".template-designation").clone().removeClass("hidden template-designation"),b.find(".wrapper-designations").append(a),d=0)})})}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.Documents)&&(App.Views.Files.Documents={}),App.Views.Files.Documents.DocumentBrowser=App.Helpers.View.extend({template:App.Templates.filesDocumentsDocumentBrowser,className:"documentBrowser",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.colDocuments=new App.Collections.Documents2,this.options.fileModel?(this.canUploadDocuments=!0,this.canSelectDocuments=!0):(this.canUploadDocuments=!1,this.canSelectDocuments=!1),this.listenTo(this.colDocuments,"request",function(){this.showLoader(".modal-body")}),this.listenTo(this.colDocuments,"sync error",function(){this.removeLoader(".modal-body")}),this.tabAssignDocumentsClicked=!1},events:{"click .btn-expand":"expandModal","click .tabManage":"tabManage","click .btn-selectDocuments":"selectDocuments","click .btn-deleteDocuments":"handlerDeleteDocuments","click .btn-combine":"combineDocuments"},afterRender:function(){var a=this.$el,b=a.closest(".modal-dialog").width(),c=a.closest(".modal-dialog").css("margin-top"),d=a.closest(".modal-dialog").css("height");a.closest(".modal-dialog").data("base-width",b),a.closest(".modal-dialog").data("base-height",d),a.closest(".modal-dialog").data("base-margin-top",c),this.loadTabs(),this.options.viewOnly&&(this._showDocuments(),a.find(".tst-existingDocument-tab").click(),a.find(".tst-documentBrowser-selectDocument-btn").hide(),a.find(".tst-documentBrower-delete-btn").hide(),a.find(".nav-tabs").hide()),a.closest(".modal-dialog").find(".fileTitle").html(this.options.fileModel.get("fileTitle"))},_showDocuments:function(){var a=this.$el,b=$(".assignDocuments").data("view");this.tabAssignDocumentsClicked===!1&&(b.handlerFilterDocuments(),this.tabAssignDocumentsClicked=!0),a.find(".actions").show()},tabManage:function(a){var b=$(a.currentTarget),c=this.$el;"#tabDocuments"===b.attr("href")?this._showDocuments():c.find(".actions").hide()},loadTabs:function(){var a=new App.Views.Files.Documents.AssignDocuments({colDocuments:this.colDocuments,collection:this.collection,parentClassName:this.options.parentClassName,fileModel:this.options.fileModel,oneDocument:this.options.oneDocument||!1});App.Helpers.htmlView(a,"#tabDocuments");var b=new App.Views.Files.Documents.UploadDocuments({eventID:this.options.eventID,fileModel:this.options.fileModel,defaultChecked:this.options.defaultChecked,oneDocument:this.options.oneDocument||!1});App.Helpers.htmlView(b,"#tabUpload")},_updateModelAndCollection:function(a,b){var c=b.get(a.get("documentID"));c?c.set("removed",0):b.add(a)},selectDocuments:function(){var a=this.colDocuments.where({selected:!0}),b=this;_.each(a,function(a){b._updateModelAndCollection(a,b.collection)})},handlerDeleteDocuments:function(){var a=_.where(this.colDocuments.toJSON(),{selected:!0}),b=_.map(a,function(a){return a.documentID}),c=JSON.stringify({documentIDs:b}),d=this;this.showLoader(".modal-body"),$.post("api/file_events_controller/get_events_by_documents?fileNumber="+this.options.fileModel.getFileNumber(),c).done(function(a){var c,e,f="";if(a.length>0){var g=_.map(a,function(a){return s.isBlank(a.eventTitle)?"No event title":a.eventTitle});f="The "+(b.length>1?"documents":"document")+" selected has relationship with the following "+(g.length>1?"events":"event")+":\n\n"+g.join(", ")+"\n\nAre you sure to delete "+(b.length>1?"these documents":"this document")+"?",c=new App.Views.Shared.AlertView({processFunction:"processHandlerDeleteDocuments",viewClass:".documentBrowser",params:{documentIDs:b},msg:f,title:"Delete Documents"}),e=new App.Helpers.Modal({view:c,parentClassName:d.options.parentClassName}),e.show()}else f="Are you sure to delete "+(b.length>1?"these documents":"this document")+"?",c=new App.Views.Shared.AlertView({processFunction:"processHandlerDeleteDocuments",viewClass:".documentBrowser",params:{documentIDs:b},msg:f,title:"Delete Documents"}),e=new App.Helpers.Modal({view:c,parentClassName:d.options.parentClassName}),e.show()}).always(function(){d.removeLoader(".modal-body")})},processHandlerDeleteDocuments:function(a){this._deleteDocument(a.documentIDs)},onClose:function(){var a=this.$el;a.find(".assignDocuments").data("view").onClose(),a.closest(".modal.in").draggable({handle:".modal-header"})},_deleteDocument:function(a){var b=JSON.stringify({documentIDs:a}),c=this;this.showLoader(".modal-body"),$.post("api/documents_controller/delete_documents",b).done(function(){var b,c,d,e=$(".assignDocuments").data("view");e.handlerFilterDocuments(),_.each(a,function(a){var e=$(".eventForm").data("view");e&&(b=e.colEventToDocuments,c=b.get(a),c&&b.remove(c),d=e.colBodyParts,d.each(function(b){var c=b.get("documents"),d=new App.Collections.Documents(c),e=d.get(a);e&&(d.remove(e),b.set("documents",d.toJSON()))}));var f=$(".eventWcCaseBodyPart").data("view");f&&(b=f.options.colDocuments,c=b.get(a),c&&b.remove(c));var g=$(".casesForm").data("view");g&&(d=g.colBodyParts,d.each(function(b){var c=b.get("documents"),d=new App.Collections.Documents(c),e=d.get(a);e&&(d.remove(e),b.set("documents",d.toJSON()))}));var h=$(".cases_panel").data("view");h&&h.loadCases()})}).always(function(){c.removeLoader(".modal-body")})},expandModal:function(a){var b=$(a.currentTarget),c=this.$el,d=c.closest(".modal-dialog").data("base-width"),e=c.closest(".modal-dialog").data("base-margin-top"),f=$(window).height(),g=$(".assignDocuments").data("view");b.hasClass("expand")?(c.closest(".modal-dialog").css("margin-top",e),b.removeClass("expand"),g.$el.find(".panel-documents").css({height:300})):(d=$(document).width()-20,c.closest(".modal-dialog").css("margin-top",5),b.addClass("expand"),g.$el.find(".panel-documents").css({height:Math.floor(f)-410}),c.closest(".modal.in").css({top:0,right:0,bottom:0,left:0})),c.closest(".modal-dialog").css("width",d)},combineDocuments:function(a){a.preventDefault(),a.stopPropagation();var b=$(a.currentTarget),c=_.map(_.where(this.colDocuments.toJSON(),{selected:!0}),"documentID"),d=this.options.fileModel.getFileNumber(),e=$('<form action="api/documents_controller/getDocuments" method="post"></form>'),f=$('<input type="hidden" name="where" />'),g=$('<input type="hidden" name="return"/>'),h=$('<input type="hidden" name="viewOrDL"/>'),i=$('<input type="hidden" name="'+$.cookie("token_name")+'" value="'+$.cookie("cf_csrf_cookie")+'" />'),j=[];c.length&&j.push('"documentID" in ('+c.join(",")+")"),j.push('"fileNumber" = '+d),f.val(j.join(" and ")),g.val(b.data("return")),h.val(b.data("view-or-dl")),e.append(f),e.append(g),e.append(h),e.append(i),"view"===b.data("view-or-dl")&&e.attr("target","_blank"),$("body").append(e),e.submit(),e.remove()}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.Documents)&&(App.Views.Files.Documents={}),App.Views.Files.Documents.Form=App.Helpers.View.extend({template:App.Templates.filesDocumentsForm,className:"form",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.listenTo(this.model,"request",function(){this.showLoader(".modal-body")}),this.listenTo(this.model,"sync",this.checkDesignations),this.listenTo(this.model,"sync error",function(){this.removeLoader(".modal-body")})},events:{"click .btnSave":"saveForm"},saveForm:function(){var a=this,b=this.$el,c=b.find("[type=checkbox]:checked").length,d=[];if(0===c){var e=new App.Helpers.Toast({message:"You must to select at least one designation checkbox.",classType:"danger",fadeOut:5e3});return void e.render()}b.find("[type=checkbox]:checked").each(function(){$(this).is(":checked")&&d.push($(this).attr("data-designation-id"))}),this.model.set("designations",d.join("|")),this.model.save({},{success:function(b){var c,d,e;c=a.collection.get(b.get("documentID")),c.set(b.toJSON());var f=$(".assignDocuments").data("view");f&&(d=f.options.colDocuments,c=d.get(b.get("documentID")),c&&c.set(b.toJSON()));var g=$(".eventForm").data("view");g&&(d=g.colEventToDocuments,c=d.get(b.get("documentID")),c&&c.set(b.toJSON()),e=g.colBodyParts,e.each(function(a){var c=a.get("documents"),d=new App.Collections.Documents(c),e=d.get(b.get("documentID"));e&&(e.set(b.toJSON()),a.set("documents",d.toJSON()))}));var h=$(".eventWcCaseBodyPart").data("view");h&&(d=h.options.colDocuments,c=d.get(b.get("documentID")),c&&c.set(b.toJSON()));var i=$(".casesForm").data("view");i&&(e=i.colBodyParts,e.each(function(a){var c=a.get("documents"),d=new App.Collections.Documents(c),e=d.get(b.get("documentID"));e&&(e.set(b.toJSON()),a.set("documents",d.toJSON()))}));var j=$(".cases_panel").data("view");j&&j.loadCases()},complete:function(){a.elementModal.modal("hide")}})},afterRender:function(){var a=this.$el;a.closest(".modal-dialog").addClass("width-1200"),this.renderDesignations()},renderDesignations:function(){var a=this.$el;a.closest(".modal-dialog").addClass("width-1200"),a.find(".container-designations").html(new App.Views.Files.Documents.Designations({designations:this.options.fileModel.get("designations")}).render().$el.html())},checkDesignations:function(){var a=this.$el;this.model.get("designations")&&_.each(this.model.get("designations").toString().split("|"),function(b){a.find('[type="checkbox"][data-designation-id='+b+"]").prop("checked",!0)})}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.Documents)&&(App.Views.Files.Documents={}),App.Views.Files.Documents.UploadDocuments=App.Helpers.View.extend({template:App.Templates.filesDocumentsUploadDocuments,className:"uploadDocuments",
initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.countDocumentToUpload=0,this.countDocumentUploaded=0,this.documentsSelected=[]},events:{"click .fileupdate-cancel":"disabledButton","click .btn-addFile":"addFile","click .btn-cancel":"cancelFile","click .btn-submit":"submitFile"},addFile:function(){this.$el.find("input.add-files").click()},cancelFile:function(){this.$el.find(".fileupdate-cancel").click()},submitFile:function(a){a.preventDefault(),a.stopPropagation();var b=this.$el,c=!0;if(b.find(".template-upload:not(.invalid-form)").each(function(){$(this).find("input[type=checkbox]").is(":checked")||(c=!1)}),c)this.$el.find("[type=submit]").click();else{var d=new App.Helpers.Toast({message:"You must choose at least one designation per document.",classType:"danger",fadeOut:5e3});d.render()}},afterRender:function(){this.options.fileModel&&(this.filterFileNumber=this.options.fileModel.getFileNumber()),this.options.oneDocument&&this.$el.find("input.add-files").attr("multiple",!1),this._initializeFileUpload()},_initializeFileUpload:function(){var a=this.$el,b=this,c=2e9,d=function(){var a=App.Templates.filesDocumentsForm(),c=$("<div>"+a+"</div>"),d=$('<div class="form-horizontal">');return c.find(".document-link").remove(),c.removeClass("modal-content").addClass("template-upload-base template-upload panel panel-default"),c.find(".modal-body").addClass("panel-body").removeClass("modal-body"),d.html(c.find(".form-horizontal").html()),c.find(".form-horizontal").remove(),c.find(".panel-body").html(d.get(0)),c.find(".modal-header").empty(),c.find(".modal-header").addClass("panel-heading").removeClass("modal-header"),c.find(".panel-heading").text("Document Information"),c.find(".modal-footer").addClass("display-none"),c.find(".btn-primary").removeClass("btnSave").addClass("start"),c.find(".btn-close").addClass("cancel"),c.find(".container-designations").html(new App.Views.Files.Documents.Designations({designations:b.options.fileModel.get("designations")}).render().$el.html()),c};a.find(".formUploadDocuments").fileupload({url:"/api/documents_controller/document_upload",filesContainer:a.find(".documents"),uploadTemplateId:null,dataType:"json",downloadTemplateId:null,maxFileSize:c,uploadTemplate:function(e){a.find(".fileupdate-cancel").removeAttr("disabled");var f=$();return $.each(e.files,function(g,h){var i=d();i.find("[name=documentTitle]").val(h.name),i.find(".size").text(e.formatFileSize(h.size)),h.size>c?(i.addClass("invalid-form"),i.find("fieldset").remove(),i.addClass("panel-danger"),i.removeClass("panel-default"),i.find(".description-documentTitle > input").attr("disabled","disabled"),i.find(".description-note").closest(".form-group").remove()):(h.error?i.find(".error").text(".."+h.error):h.size&&c>h.size&&(b.countDocumentToUpload++,b.options.oneDocument&&a.find(".add-files").attr("disabled","disabled")),_.isUndefined(b.options.defaultChecked)||_.each(b.options.defaultChecked,function(a){i.find('.designation-input[data-designation-id="'+a+'"]').prop("checked",!0)})),f=f.add(i)}),f},downloadTemplate:function(a){var b=$(),c=_.first(a.files),e=d();if(c.error)e.addClass("panel-danger"),e.find(".error").html("Error uploading the document.");else{var f=$("<a>");e.addClass("panel-success"),f.attr("href","/api/documents_controller/get_document/"+c.documentID+"/"+App.Helpers.replaceSpecialCharaters(c.documentName)),f.attr("target","_blank"),f.text(c.documentTitle),e.find(".description-documentTitle").html(f),e.find(".description-note").html(c.note),e.find(".panel-footer").remove(),e.find(".panel-pg").remove(),b=b.add(e)}return b}}),a.find(".formUploadDocuments").bind("fileuploadsend",function(a,b){return b.total>c?!1:void 0}),a.find(".formUploadDocuments").bind("fileuploadsubmit",function(c,d){var e=[],f=d.context,g=$.cookie("token_name"),h=$.cookie("cf_csrf_cookie"),i=d.context.find("[name=documentTitle]").val(),j=d.context.find("[name=note]").val();e.push({name:g,value:h}),e.push({name:"fileNumber",value:b.filterFileNumber}),e.push({name:"eventID",value:b.options.eventID}),e.push({name:"documentTitle",value:i}),e.push({name:"note",value:j});var k=[];f.find("input[type=checkbox]:checked").each(function(){k.push($(this).attr("data-designation-id"))}),e.push({name:"designations",value:k.join("|")}),a.find(this).fileupload("option",{formData:e})}),a.find(".formUploadDocuments").bind("fileuploadcompleted",function(a,c){if(b.countDocumentUploaded++,_.has(c.result,"files")&&b.documentsSelected.push(_.first(c.result.files)),b.countDocumentToUpload===b.countDocumentUploaded){var d=$(".assignDocuments").data("view");_.each(b.documentsSelected,function(a){d.collection.add(a)}),b.$el.find(".documents").empty(),b.disabledButton(),d.handlerFilterDocuments();var e=new App.Helpers.Toast({message:"Documents assigned successfully.",classType:"success",fadeOut:5e3});e.render()}}),a.find(".formUploadDocuments").bind("fileuploadfail",function(a,b){if(b.jqXHR&&b.jqXHR.responseJSON){var c=b.jqXHR.responseJSON.error||"";if(c)return b.files.file=b.jqXHR.responseJSON.file,b.context.find(".error").html(c),b.context.removeClass("panel-default"),b.context.addClass("panel-danger"),!1;this.$el.find(".fileupdate-cancel").trigger("click")}})},startUpload:function(){this.$el.find(".formUploadDocuments .btn-primary.start").trigger("click")},disabledButton:function(){var a=this.$el;a.find(".fileupdate-cancel").attr("disabled","disabled"),a.find(".add-files").attr("disabled",!1),this.countDocumentToUpload=0,this.countDocumentUploaded=0,this.documentsSelected=[]}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),App.Views.Files.EventAlertForm=App.Helpers.View.extend({template:App.Templates.filesEventAlertForm,className:"FilesEventAlertForm",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.colUsers=new Uit.Collection,this.model.isNew()||this.colUsers.add(this.model.get("colUsers"))},events:{"click .icon-typeahead-down":"showAllEntities","click #save-alert":"saveAlert","click .close-alert-form":"setProperUrl","click #delete-alert":"deleteCalendarEvent"},deleteCalendarEvent:function(a){a.preventDefault(),a.stopPropagation();var b=$(a.currentTarget),c=this,d=b.data("alert-id"),e=new App.Models.CalendarEvent({alert_id:d}),f="";e.destroy({success:function(){f=new App.Helpers.Toast({message:"Calendar Reminder Deleted.",classType:"warning",fadeOut:3e3}),f.render();var a=c.options.alertCollection.where({alert_id:d})[0];a.destroy(),c.options.alertCollection.reset(c.options.alertCollection.models),c.$el.find(".close-alert-form").click()},error:function(){f=new App.Helpers.Toast({message:"Calendar Reminder Deletion failed.",classType:"danger",fadeOut:3e3}),f.render()}})},setProperUrl:function(){var a=Backbone.history.getFragment(),b=a.split("/alerts/");Backbone.history.navigate(b[0])},showAllEntities:function(a){App.Helpers.showAllEntities(a,this.$el)},afterRender:function(){if(App.Helpers.initTypeahead({view:this,elemClass:".typeahead.user-Typeahead",urlBuild:{url:"api/typeahead_controller/search_users_not_client_reps"},processFunction:$.proxy(this.processUserTypeahead,this)}),this.model.isNew()){var a=new App.Models.User({typeaheadResult:App.loginModel.get("last")+", "+App.loginModel.get("first")+" "+App.loginModel.get("middle")+" "+App.loginModel.get("email"),user_id:App.loginModel.get("id")});this.colUsers.add(a)}},processUserTypeahead:function(a){0===this.colUsers.where({user_id:a.user_id}).length&&(this.colUsers.add(a),this.$el.find('[name="userTypeahead"]').typeahead("val",""))},_addToCollection:function(a,b,c){var d=this;if(d.model.set("colUsers",null),d.model.set("colUsers",c),a)d.options.alertCollection.add(d.model);else{var e=d.options.alertCollection.findWhere({alert_id:b.get("alert_id")});e.clear(),e.set(b.attributes)}d.elementModal.modal("hide");var f=new App.Helpers.Toast({message:"Calendar Reminder Saved",classType:"success",fadeOut:5e3});f.render(),d.options.alertCollection.reset(d.options.alertCollection.models)},saveAlert:function(){var a=this,b=this.$el,c=this.model.isNew();if(b.find("#alert-form").valid()){var d=[],e=[];if(_.each(b.find(".user-checkbox:checked"),function(a){a=$(a);var b={};b.user_id=a.data("user-id"),b.typeaheadResult=a.data("typeaheadresult"),d.push(b.user_id),e.push(b)}),d.length<=0){var f=new App.Helpers.Toast({message:"You must choose at least one user or more that will receive alerts",classType:"danger",fadeOut:3e3});return void f.render()}if(this.model.get("notificationQuantity")&&this.model.get("notificationUnit")&&(!this.model.get("time")||""===this.model.get("time"))){var g=new App.Helpers.Toast({message:"You must choose a time to set a reminder. ",classType:"danger",fadeOut:3e3});return void g.render()}this.model.set("userArr",d),this.model.get("eventID")?this.model.save({},{success:function(b){a._addToCollection(c,b,e)}}):this._addToCollection(c,this.model,e)}}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.EventCategory)&&(App.Views.Files.EventCategory={}),App.Views.Files.EventCategory.EventGeneral=App.Helpers.View.extend({template:App.Templates.filesEventCategoryEventGeneral,className:"FilesEventCategoryEventGeneral",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.collection=new App.Helpers.Collection,this.createEventLink=a.fileModel.fileEventsUrl()+"/new?category="+this.options.category,"5"===this.options.category?(this.eventCategoryName="Medical",this.eventCategoryIcon="fa fa-heartbeat fa-lg",this.eventCategoryViewElem="dashboard-medical",this.getStats="getMedicalsStats"):"3"===this.options.category?(this.eventCategoryName="Hearing",this.eventCategoryIcon="fa fa-gavel fa-lg",this.eventCategoryViewElem="dashboard-hearing",this.getStats="getHearingStats"):"4"===this.options.category?(this.eventCategoryName="Deposition",this.eventCategoryIcon="fa fa-book fa-lg",this.eventCategoryViewElem="dashboard-deposition",this.getStats="getDepoStats"):"2"===this.options.category?(this.eventCategoryName="Subpoena",this.eventCategoryIcon="fa fa-file-text fa-lg",this.eventCategoryViewElem="dashboard-subpoena",this.getStats="getSubpoenaStats"):"6"===this.options.category&&(this.eventCategoryName="Liens",this.eventCategoryIcon="fa fa-gift fa-lg",this.eventCategoryViewElem="dashboard-liens",this.getStats="getLienStats"),this.createEventText="Create new ","Liens"===this.eventCategoryName?this.createEventText+="Lien":this.createEventText+=this.eventCategoryName},events:{"click .row-model":"eventLink","click .events-sortable":"sortEvents"},eventLink:function(a){var b=$(a.currentTarget);Backbone.history.navigate("files/edit/"+this.options.fileModel.get("fileNumber")+"/events/edit/"+b.data("id"),{trigger:!0})},afterRender:function(){var a=$(".files-dashboard").data("view"),b=a.$el;b.find("#"+this.eventCategoryViewElem).is(":visible")||(b.find("."+this.eventCategoryViewElem+"-all").click(),a[this.getStats]()),this.loadData()},sortEvents:function(a){var b=$(a.currentTarget),c=this.$el,d=b.data("sort"),e=void 0;e=b.find(".fa-chevron-down").length?"asc":"DESC",c.find(".events-sortable .fa").remove(),b.append("asc"===e?'<i class="fa fa-chevron-up"></i>':'<i class="fa fa-chevron-down"></i>'),this.orderCol(d,e)},orderCol:function(a,b){this.collection.sortBy=a,this.collection.sortOrder=b,this.collection.sort()},loadData:function(){var a=arguments.length<=0||void 0===arguments[0]?"eventDate":arguments[0],b=arguments.length<=1||void 0===arguments[1]?"DESC":arguments[1],c=this,d="api/file_events_controller/get_events_pagination?fileNumber="+this.options.fileModel.get("fileNumber")+"&orderBy="+a+"&orderDirection="+b+"&maxRows=0&etcID="+this.options.category+"&eventOffsetIndex=0";this.collection.fetch({url:d,success:function(d,e){c.collection.reset(e[0]),c.orderCol(a,b)}})}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.EventCategory)&&(App.Views.Files.EventCategory={}),App.Views.Files.EventCategory.LiensTableIndex=App.Helpers.View.extend({template:App.Templates.filesEventCategoryLiensTableIndex,className:"liensTableIndex",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.collection=new App.Collections.LiensIndex},events:{"click .row-model":"editEventForm"},editEventForm:function(a){var b=$(a.currentTarget);Backbone.history.navigate("files/edit/"+this.options.fileModel.get("fileNumber")+"/events/edit/"+b.data("id"),{trigger:!0})},afterRender:function(){var a=$(".files-dashboard").data("view"),b=a.$el;b.find(".dashboard-liens").hasClass("active")||b.find(".liensIndexAll").click(),this.loadData()},loadData:function(){this.collection.fetch({url:"api/file_events_controller/get_all_lien_events?fileNumber="+this.options.fileModel.get("fileNumber"),success:function(){}})}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.EventTabs)&&(App.Views.Files.EventTabs={}),App.Views.Files.EventTabs.BillingForm=App.Helpers.View.extend({template:App.Templates.filesEventTabsBillingForm,className:"billingForm",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.colTimeKeeperRates=new App.Collections.TimeKeeperRates,this.colLitigationCodes=new App.Helpers.Collection,this.colExpenseCodes=new App.Helpers.Collection,this.colActivationCodes=new App.Helpers.Collection,this.colSnippets=new App.Collections.BillingSnippets,this.colSnippetsName=new App.Helpers.Collection,this.colExclusiveSnippets=new App.Helpers.Collection,this.colExclusiveSnippetsName=new App.Helpers.Collection,this.hotWords=new App.Collections.Hotwords,this.invalidWords=!1,$.get("api/litigation_codes_controller/getAllLitigationCodes",{},function(a){b.colLitigationCodes.sortBy="litigationCode",b.colLitigationCodes.sortOrder="asc",b.colLitigationCodes.sort(),b.colLitigationCodes.add(a.litigationOnly),b.colExpenseCodes.sortBy="litigationCode",b.colExpenseCodes.sortOrder="asc",b.colExpenseCodes.sort(),b.colExpenseCodes.add(a.expenseOnly),b.colActivationCodes.sortBy="litigationCode",b.colActivationCodes.sortOrder="asc",b.colActivationCodes.sort(),b.colActivationCodes.add(a.activeOnly)}),this.listenTo(this.model,"change:hourly",function(){b.filterSnippetsHourly()}),this.colSnippets.moduleID=this.options.fileModel.get("module"),this.colSnippets.fetch({success:function(){var a=b.colSnippets.toJSON();b.snippetsCategoriesArray=_.chain(a).where({useWith:"all"}).pluck("snippet_category").uniq().sort().value(),$.get("api/snippets_controller/get_exclusive_snippets",{clientID:b.options.fileModel.getClientID()},function(a){a&&(_.each(a,function(a){b.colExclusiveSnippets.add(a)}),b.exclusiveSnippetsCategoriesArray=_.chain(b.colExclusiveSnippets.pluck("snippet_category")).uniq().sort().value())}).done(function(){b.chooseSnippetsByLocalStorageSettings()})}}),this.listenTo(this.model,"request",function(){b.showLoader()}),this.listenTo(this.model,"sync error",function(a){b._getTimekeeperRates(b.model.get("timekeeperID")),b.displayDeleteButton(),b.displayDeleteInvoicedButton(),b.removeLoader(),_.isEmpty(a.get("activityCode"))&&(b.$el.find("#panelActivityCode").hide(),b.$el.find("[name=activityCode]").removeAttr("required")),setTimeout(function(){b.$el.find("#billingDescription").highlightTextarea("highlight"),b.handlerActions()},200)}),this.terms=[],this.hotWords.fetch(),this.listenTo(this.hotWords,"sync",function(a){b.terms=_.map(a.models,function(a){return a.get("word")}),b._initHighlighter(b.terms)})},events:{"click #mark-as-reviewed":"markAsReviewed","click #bill-delete-invoiced-btn":"deleteInvoicedBilling","click #bill-delete-btn":"deleteBilling","click .icon-typeahead-down":"showAllEntities",'change [name="timekeeper-rates"]':"fillRate",'change [name="hourly"]':"filterSnippetsHourly",'change [name="workUnits"]':"_checkHighRateAlert",'change [name="snippet-category-type"]':"loadSnippetName",'change [name="exclusive-snippet-category-type"]':"loadExclusiveSnippetName",'change [name="snippet-name"]':"loadSnippetText",'change [name="exclusive-snippet-name"]':"loadSnippetText","click .btnSave":"saveBill",'change [name="all-or-exlusive"]':"toggleExclusiveSnippets",'change [name="expenseCode"]':"resetLitigationCodes",'change [name="litigationCode"]':"resetLitigationCodes",'change [name="activityCode"]':"resetLitigationCodes"},markAsReviewed:function(){var a,b=this,c=this.model.get("billingID"),d=this.options.fileModel.getFileNumber();this.showLoader(),$.ajax({url:"/api/billing_controller/billing_reviewed/"+c,data:JSON.stringify({fileNumber:d,reviewed:1}),type:"POST",success:function(c){a=new App.Helpers.Toast({message:"Bill Marked as reviewed",classType:"success",fadeOut:3e3}),a.render(),!_.isUndefined(c.reviewed)&&c.reviewed&&b.model.set("reviewed",1)},error:function(){a=new App.Helpers.Toast({message:"Error marking bill as reviewed",classType:"danger",fadeOut:3e3})},complete:function(){b.removeLoader()}})},deleteInvoicedBilling:function(){var a="Are you sure you want to delete this INVOICED bill?",b=new App.Views.Shared.AlertView({processFunction:"processDeleteInvoicedBilling",viewClass:".billingForm",msg:a,title:"Delete INVOICED Bill"}),c=new App.Helpers.Modal({view:b});c.show()},deleteBilling:function(){var a="Are you sure you want to delete this bill?",b=new App.Views.Shared.AlertView({processFunction:"processDeleteBilling",viewClass:".billingForm",msg:a,title:"Delete Bill"}),c=new App.Helpers.Modal({view:b});c.show()},processDeleteInvoicedBilling:function(){var a,b=this,c=this.model.clone();this.model.isNew()||this.model.destroy({success:function(){a=new App.Helpers.Toast({message:"Invoiced Bill Deleted.",classType:"warning",fadeOut:3e3}),a.render(),b.collection.remove(c),b.collection.reset(b.collection.models),b.elementModal.modal("hide")},error:function(){a=new App.Helpers.Toast({message:"Invoiced Bill Deletion failed.",classType:"danger",fadeOut:3e3}),a.render()}})},processDeleteBilling:function(){var a,b=this,c=this.model.clone();this.model.isNew()||this.model.destroy({success:function(){a=new App.Helpers.Toast({message:"Bill Deleted.",classType:"warning",fadeOut:3e3}),a.render(),b.collection.remove(c),b.collection.reset(b.collection.models),b.elementModal.modal("hide")},error:function(){a=new App.Helpers.Toast({message:"Bill Deletion failed.",classType:"danger",fadeOut:3e3}),a.render()}})},displayDeleteInvoicedButton:function(){var a=this.$el;_.isUndefined(this.model.get("invoiceNumber"))||_.isNull(this.model.get("invoiceNumber"))||a.find("#bill-delete-invoiced-btn").show()},displayDeleteButton:function(){var a=this.$el;(_.isUndefined(this.model.get("invoiceNumber"))||_.isNull(this.model.get("invoiceNumber")))&&a.find("#bill-delete-btn").show()},chooseSnippetsByLocalStorageSettings:function(){var a=this.$el;this.model.isNew()&&(this.model.get("hourly")?("exclusive"===localStorage.getItem("all-or-exlusive")||_.isNull(localStorage.getItem("hourly-billing-snippet-category"))||a.find('[name="snippet-category-type"] option[value="'+localStorage.getItem("hourly-billing-snippet-category")+'"]').prop("selected",!0).change(),"exclusive"!==localStorage.getItem("all-or-exlusive")||_.isNull(localStorage.getItem("hourly-billing-exclusive-snippet-category"))||(a.find('[name="snippet-category-type"] option[value="'+localStorage.getItem("hourly-billing-exclusive-snippet-category")+'"]').prop("selected",!0).change(),a.find('[name="all-or-exlusive"][value="exclusive"]').click(),_.isNull(localStorage.getItem("hourly-billing-exclusive-snippet-category"))||parseInt(localStorage.getItem("clientID"))!==parseInt(this.options.fileModel.getClientID())||a.find('[name="exclusive-snippet-category-type"] option[value="'+localStorage.getItem("hourly-billing-exclusive-snippet-category")+'"]').prop("selected",!0).change())):("exclusive"===localStorage.getItem("all-or-exlusive")||_.isNull(localStorage.getItem("non-hourly-billing-snippet-category"))||a.find('[name="snippet-category-type"] option[value="'+localStorage.getItem("non-hourly-billing-snippet-category")+'"]').prop("selected",!0).change(),"exclusive"!==localStorage.getItem("all-or-exlusive")||_.isNull(localStorage.getItem("non-hourly-billing-exclusive-snippet-category"))||(a.find('[name="snippet-category-type"] option[value="'+localStorage.getItem("non-hourly-billing-exclusive-snippet-category")+'"]').prop("selected",!0).change(),a.find('[name="all-or-exlusive"][value="exclusive"]').click(),_.isNull(localStorage.getItem("non-hourly-billing-exclusive-snippet-category"))||parseInt(localStorage.getItem("clientID"))!==parseInt(this.options.fileModel.getClientID())||a.find('[name="exclusive-snippet-category-type"] option[value="'+localStorage.getItem("non-hourly-billing-exclusive-snippet-category")+'"]').prop("selected",!0).change())))},_checkHighRateAlert:function(){if(this.model.get("workUnits")>4.5&&this.model.get("hourly")){var a="This bill has more than 4.5 hours and is a hourly bill . Please confirm this is correct or are you trying to bill for copies?",b=new App.Views.Shared.AlertView({viewClass:".billingForm",msg:a,title:"Warning!",hideCancel:!0}),c=new App.Helpers.Modal({view:b});c.show()}},filterSnippetsHourly:function(){var a=this.colSnippets.toJSON(),b=0,c=this.$el;this.model.get("hourly")&&(b=1,c.find('[name="activityCode"]').attr("required")),this.snippetsCategoriesArray=_.chain(a).where({useWith:"all",hourly:b}).pluck("snippet_category").uniq().sort().value(),this.chooseSnippetsByLocalStorageSettings()},resetLitigationCodes:function(a){var b=$(a.currentTarget);"expenseCode"===b.attr("name")?(this.model.unset("litigationCode",{silent:!0}),this.model.unset("activityCode",{silent:!0})):("litigationCode"===b.attr("name")||"activityCode"===b.attr("name"))&&this.model.unset("expenseCode",{silent:!0})},toggleExclusiveSnippets:function(a){var b=this.$el,c=$(a.currentTarget);b.find("#exclusive-snippets").toggle(),b.find("#all-snippets").toggle(),"exclusive"===c.val()?(localStorage.setItem("all-or-exlusive","exclusive"),localStorage.setItem("clientID",this.options.fileModel.getClientID())):(localStorage.setItem("all-or-exlusive","all"),localStorage.setItem("clientID",""))},fillRate:function(a){var b=this.$el,c=$(a.currentTarget),d=c.find(":selected").data("classification");this.model.set("billingRate",c.val()),this.model.set("classification",d);var e=c.find("option:selected").data("ratetype");0===e?this.model.set("hourly",0):this.model.set("hourly",1),App.loginModel.hasAccess(100)&&b.find('[name="billingRate"]').prop("disabled",!1)},saveBill:function(){var a=this.$el;if(a.find("#billing-form").valid()){if(!s.isBlank(this.model.get("invoiceNumber"))&&!App.loginModel.hasAccess(85)){var b=new App.Helpers.Toast({message:"Cannot edit already invoiced bills.",classType:"danger",fadeOut:5e3});return b.render(),!1}if(parseFloat(this.model.get("workUnits"))*parseFloat(this.model.get("billingRate"))>=300){var c="This bill is greater than $300. Please confirm this is correct.",d=new App.Views.Shared.AlertView({processFunction:"processSaveBill",viewClass:".billingForm",msg:c,title:"Warning"}),e=new App.Helpers.Modal({view:d});e.show()}else this.processSaveBill()}},closeBillingForm:function(){this.$el.find(".btn-close").click()},processSaveBill:function(){var a=this.$el,b=this,c=this.model.isNew();this.model.set("billingDescription",a.find('textarea[name="billingDescription"]').val()),this.model.set("moduleID",this.options.fileModel.get("module")),this.model.save({},{success:function(a){if(c)b.collection.add(b.model);else{var d=b.options.collection.findWhere({billingID:a.get("billingID")});d.clear(),d.set(a.attributes)}b.elementModal.modal("hide");var e=new App.Helpers.Toast({message:"Bill created and added to this event successfully.",classType:"success",fadeOut:5e3});e.render()}})},afterRender:function(){var a=this.$el,b=this.options.fileModel.getClientBillingFormat();if(_.isUndefined(b)||_.isEmpty(b)||"PDF"===b||"pdf"===b?App.Helpers.initTypeahead({view:this,elemClass:".typeahead.timekeeper-Typeahead",urlBuild:{url:"api/typeahead_controller/search_users_not_client_reps"},processFunction:$.proxy(this.processTimekeeperTypeahead,this)}):"LEDES1998B"===b?App.Helpers.initTypeahead({view:this,elemClass:".typeahead.timekeeper-Typeahead",urlBuild:{url:"api/typeahead_controller/search_users_LEDESTimekeeper"},processFunction:$.proxy(this.processTimekeeperTypeahead,this)}):"LitigationAdvisor"===b&&App.Helpers.initTypeahead({view:this,elemClass:".typeahead.timekeeper-Typeahead",urlBuild:{url:"api/typeahead_controller/search_users_LitigationTimekeeper"},processFunction:$.proxy(this.processTimekeeperTypeahead,this)}),App.Helpers.initTypeahead({view:this,elemClass:".typeahead.user-Typeahead",urlBuild:{url:"api/typeahead_controller/search_users_not_client_reps"},processFunction:$.proxy(this.processUserTypeahead,this)}),this.model.isNew()&&a.find(".user-Typeahead").typeahead("val",App.Helpers.TypeaheadFormatter(App.loginModel)),5===this.options.fileModel.get("fileTypeID")&&(a.find('[name="hourly"]').prop("disabled",!0),a.find('[name="workUnits"]').prop("disabled",!0),this.model.isNew()&&(this.model.set("workUnits",1),$.get("api/billing_controller/fileHasBill",{fileNumber:this.options.fileModel.getFileNumber()},function(a){if(a.hasBill){var b="This file already has a flat fee bill, are you sure you want to create another? Please confirm this is correct.",c=new App.Views.Shared.AlertView({cancelFunction:"closeBillingForm",viewClass:".billingForm",msg:b,title:"Warning"}),d=new App.Helpers.Modal({view:c});d.show()}}))),this.model.isNew()){var c=this.$el,d=void 0;1===this.options.fileModel.get("module")?d=_.where(this.options.fileModel.get("defenseAttorneys"),{uAttId:parseInt(App.loginModel.get("id"))}):2===this.options.fileModel.get("module")&&(d=_.where(this.options.fileModel.get("subroAttorneys"),{uAttId:parseInt(App.loginModel.get("id"))})),App.loginModel.get("isDA")&&d.length>0&&(c.find(".timekeeper-Typeahead").typeahead("val",App.Helpers.TypeaheadFormatter(App.loginModel)),this.model.set("timekeeperID",App.loginModel.get("id")),this._getTimekeeperRates(App.loginModel.get("id")))}},loadSnippetText:function(a){var b=$(a.currentTarget),c=this.$el,d=this.colSnippets.get(b.val());d&&(this.setMacro(d.get("snippet_text")),this.model.set("billingDescription",$('[name="billingDescription"]').val()),this.model.get("hourly")?(this.model.set("litigationCode",d.get("litigationCode")),293===d.get("id")?(c.find('[name="activityCode"]').removeAttr("required"),c.find("#panelActivityCode").hide(),this.model.set("activityCode",void 0)):(c.find('[name="activityCode"]').attr("required"),this.model.set("activityCode",d.get("activityCode"))),this.model.set("expenseCode",void 0)):(this.model.set("litigationCode",void 0),this.model.set("activityCode",void 0),this.model.set("expenseCode",d.get("expenseCode"))),this.model.set("snippetID",d.get("id"))),setTimeout(function(){$("#billingDescription").highlightTextarea("highlight")},200)},loadSnippetName:function(a){var b=$(a.currentTarget),c=0;this.model.get("hourly")?(c=1,localStorage.setItem("hourly-billing-snippet-category",b.val())):localStorage.setItem("non-hourly-billing-snippet-category",b.val()),this.colSnippetsName.reset(this.colSnippets.where({snippet_category:b.val(),useWith:"all",hourly:c})),this.colSnippetsName.sortBy="snippet_name",this.colSnippetsName.sortOrder="asc",this.colSnippetsName.sort()},loadExclusiveSnippetName:function(a){var b=$(a.currentTarget),c=0;this.model.get("hourly")?(c=1,localStorage.setItem("hourly-billing-exclusive-snippet-category",b.val())):localStorage.setItem("non-hourly-billing-exclusive-snippet-category",b.val()),this.colExclusiveSnippetsName.reset(this.colExclusiveSnippets.where({snippet_category:b.val(),hourly:c})),this.colExclusiveSnippetsName.sortBy="snippet_name",this.colExclusiveSnippetsName.sortOrder="asc",this.colExclusiveSnippetsName.sort()},setMacro:function(a){var b=this.$el,c=b.find('[name="billingDescription"]'),d=c.prop("selectionStart"),e=c.prop("selectionEnd"),f=c.val(),g="";b.find('[name="snippet-name"] option:selected').removeAttr("selected"),b.find('[name="exclusive-snippet-name"] option:selected').removeAttr("selected");var h={text:a,fileNumber:this.options.fileModel.getFileNumber(),eventID:this.options.model.get("eventID"),moduleID:this.options.fileModel.get("module")};$.post("/api/macros_controller/get_macro_detail/",JSON.stringify(h),function(a){g=f.substr(0,d)+a.text+f.substr(e),c.val(g),c.prop("selectionEnd",d+a.text.length),c.focus()})},showAllEntities:function(a){App.Helpers.showAllEntities(a,this.$el)},_getTimekeeperRates:function(a){var b=this;this.colTimeKeeperRates.reset(),this.colTimeKeeperRates.fetch({data:$.param({moduleID:b.options.fileModel.get("module"),timekeeperID:a,clientID:b.getClientID(),isFlatFee:b.isFlatFee()}),success:function(){b.$el.find('[name="timekeeper-rates"]').prop("disabled",!1)},error:function(){var a=new App.Helpers.Toast({message:"Error getting timekeeper rates. This timekeeper might not have rates assigned",classType:"warning",fadeOut:5e3});a.render()}})},processTimekeeperTypeahead:function(a){a.user_id?(this.model.set("timekeeperID",a.user_id),this._getTimekeeperRates(a.id)):this.model.unset("timekeeperID")},processUserTypeahead:function(a){a.user_id?this.model.set("UserID",a.user_id):this.model.unset("UserID")},_initHighlighter:function(a){var b=this,c=this.$el;c.find("#billingDescription").highlightTextarea({words:a,wordsOnly:!0,caseSensitive:!1,resizable:!1,color:"#74CEDE"}).on("keyup",function(){b.handlerActions()})},handlerActions:function(){var a=this.$el,b=a.find("#billingDescription").data("highlighter").matches;this.invalidWords=b.length?!0:!1,b.length?a.find(".billingActionBtn").attr("disabled",!0):a.find(".billingActionBtn").removeAttr("disabled",!0)},getClientID:function(){var a=this.options.fileModel.get("module");return this.options.fileModel.get(1===a?"wcClientID":2===a?"subroClientID":"wcClientID")},isFlatFee:function(){var a=this.options.fileModel.get("module");if(1===a){var b=this.options.fileModel.get("fileTypeID");return _.findWhere(this.options.fileModel.get("fileTypes"),{fileTypeID:b}).flatfee}if(2===a){var c=this.options.fileModel.get("subroFileTypeID");return _.findWhere(this.options.fileModel.get("fileTypes"),{fileTypeID:c}).flatfee}}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.EventTabs)&&(App.Views.Files.EventTabs={}),App.Views.Files.EventTabs.DoctorFacilitiesForm=App.Helpers.View.extend({template:App.Templates.filesEventTabsDoctorFacilitiesForm,className:"doctorFacilitiesForm",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.listenTo(this.model,"request",function(){b.showLoader(".modal-body")}),this.listenTo(this.model,"sync error",function(){b.removeLoader(".modal-body")})},events:{"click .icon-typeahead-down":"showAllEntities","click #copy-to-address":"copy_to_address","click #save-doctor-facility":"save_doctor_facility"},afterRender:function(){App.Helpers.addMask('[name="officePhone"]',"(999) 999-9999"),App.Helpers.addMask('[name="faxNumber"]',"(999) 999-9999"),App.Helpers.initTypeahead({view:this,elemClass:".typeahead.mailingCounty_typeahead",urlBuild:{url:"api/typeahead_controller/search_county"},processFunction:$.proxy(this.processMilingCountyTypeahead,this)}),App.Helpers.initTypeahead({view:this,elemClass:".typeahead.physicalCounty_typeahead",urlBuild:{url:"api/typeahead_controller/search_county"},processFunction:$.proxy(this.processPhysicalCountyTypeahead,this)})},copy_to_address:function(){this.model.set("physicalAddress",this.model.get("mailingAddress")),this.model.set("physicalCity",this.model.get("mailingCity")),this.model.set("physicalState",this.model.get("mailingState")),this.model.set("physicalCounty",this.model.get("mailingCounty")),this.model.set("physicalZip",this.model.get("mailingZip"))},processMilingCountyTypeahead:function(a){this.model.set("mailingCounty",a.countyName)},processPhysicalCountyTypeahead:function(a){this.model.set("physicalCounty",a.countyName)},showAllEntities:function(a){
App.Helpers.showAllEntities(a,this.$el)},save_doctor_facility:function(){var a=this.$el;if(a.find("#from-doctor-facility").valid())if(this.model.isNew())this.process_save_doctor_facility();else{var b=" If you edit this facility it will affect all files using this facility",c=new App.Views.Shared.AlertView({processFunction:"process_save_doctor_facility",viewClass:".doctorFacilitiesForm",msg:b,title:"Warning"}),d=new App.Helpers.Modal({view:c});d.show()}},process_save_doctor_facility:function(){var a,b=this,c=!1;this.model.isNew()&&(c=!0),this.model.set("officePhone",this.$el.find('[name="officePhone"]').val()),this.model.set("faxNumber",this.$el.find('[name="faxNumber"]').val()),this.model.set("doctorID",_.isUndefined(this.options.doctorTypeaheadID)?0:this.options.doctorTypeaheadID),this.model.save({},{success:function(d){if(b.elementModal.modal("hide"),a=new App.Helpers.Toast({message:"Facility Saved Correctly",classType:"success",fadeOut:5e3}),a.render(),b.options.isDoctorView){var e=$(".doctorsForm").data("view");c?e.facilityCol.add(d):(b.options.currenModel.clear(),b.options.currenModel.set(d.attributes))}else{var f=d.get("facilityName")+", "+d.get("physicalCity"),g=$(".eventWcMedicalFirst").data("view");g.model.set("facilityNameTypeahead",f),g.processDoctorFacilityTypeahead(d.attributes),$(".typeahead.doctor_facility_typeahead").typeahead("val",g.model.get("facilityNameTypeahead"))}},error:function(b,c){a=new App.Helpers.Toast({message:c.responseJSON.error,classType:"danger",fadeOut:5e3}),a.render()}})}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.EventTabs)&&(App.Views.Files.EventTabs={}),App.Views.Files.EventTabs.DoctorsForm=App.Helpers.View.extend({template:App.Templates.filesEventTabsDoctorsForm,className:"doctorsForm",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.facilityCol=new App.Helpers.Collection,this.subspecialtiesCol=new App.Helpers.Collection,this.eventsCol=new App.Helpers.Collection,this.listenTo(this.model,"request",function(){b.showLoader(".modal-body")}),this.listenTo(this.model,"sync error",function(){b.removeLoader(".modal-body")})},events:{"click .icon-typeahead-down":"showAllEntities","click .doctor_facility_form_edit":"editDoctorFacility","click #doctor_facility_form_new":"newDoctorFacility","click .subspecialty_form_edit":"editSubspecialty","click #subspecialty_form_new":"newSubspecialty","click .subspecialty-delete":"deleteRelationSubspecialty","click .facility-delete":"deleteFacility","click #copy-to-address":"copy_to_address","click #save-doctor":"save_doctor","click .gotoEvent":"gotoEvent","click .goto-event-new-tab":"gotoEventNewTab"},copy_to_address:function(){this.model.set("mailingAddress",this.model.get("physicalAddress")),this.model.set("mailingCity",this.model.get("physicalCity")),this.model.set("mailingState",this.model.get("physicalState")),this.model.set("mailingCounty",this.model.get("physicalCounty")),this.model.set("mailingZip",this.model.get("physicalZip"))},gotoEvent:function(a){a.preventDefault(),a.stopPropagation();var b=this.$el,c=b.find(a.currentTarget).data("id"),d=b.find(a.currentTarget).data("filenumber");this.elementModal.modal("hide"),Backbone.history.navigate("#files/edit/"+d+"/events/edit/"+c,{trigger:!0})},gotoEventNewTab:function(a){a.preventDefault(),a.stopPropagation();var b=this.$el,c=b.find(a.currentTarget),d=b.find(a.currentTarget).data("filenumber");window.open("#files/edit/"+d+"/events/edit/"+c.attr("href"))},afterRender:function(){App.Helpers.addMask('[name="doctorDirectPhone"]',"(999) 999-9999"),App.Helpers.addMask('[name="doctorCellPhone"]',"(999) 999-9999"),App.Helpers.addMask('[name="doctorFax"]',"(999) 999-9999"),this.facilityCol.add(this.model.get("facilities")),this.subspecialtiesCol.add(this.model.get("subSpecialties")),this.eventsCol.add(this.model.get("events")),App.Helpers.initTypeahead({view:this,elemClass:".typeahead.facilities_typeahead",urlBuild:{url:"api/typeahead_controller/search_doctor_facilities"},processFunction:$.proxy(this.processClinicTypeahead,this),cleanValueAfterEnter:!0}),App.Helpers.initTypeahead({view:this,elemClass:".typeahead.subspecialty_typeahead",urlBuild:{url:"api/typeahead_controller/search_doctors_subspecialty"},processFunction:$.proxy(this.processSubspecialtyTypeahead,this),cleanValueAfterEnter:!0}),App.Helpers.initTypeahead({view:this,elemClass:".typeahead.mailingCounty_typeahead",urlBuild:{url:"api/typeahead_controller/search_county"},processFunction:$.proxy(this.processMilingCountyTypeahead,this)}),App.Helpers.initTypeahead({view:this,elemClass:".typeahead.physicalCounty_typeahead",urlBuild:{url:"api/typeahead_controller/search_county"},processFunction:$.proxy(this.processPhysicalCountyTypeahead,this)})},processMilingCountyTypeahead:function(){this.model.set("mailingCounty",this.$el.find('[name="mailingCountyTypeahead"]').typeahead("val"))},processPhysicalCountyTypeahead:function(){this.model.set("physicalCounty",this.$el.find('[name="physicalCountyTypeahead"]').typeahead("val"))},processClinicTypeahead:function(a){this.facilityCol.add(a),this.$el.find('[name="facilitiesTypeahead"]').typeahead("val","")},processSubspecialtyTypeahead:function(a){this.subspecialtiesCol.add(a),this.$el.find('[name="subspecialtyTypeahead"]').typeahead("val","")},showAllEntities:function(a){App.Helpers.showAllEntities(a,this.$el)},save_doctor:function(){var a=this.$el;if(a.find("#from-doctor").valid())if(this.model.isNew())this.process_save_doctor();else{var b=" If you edit this doctor it will affect all files using this doctor",c=new App.Views.Shared.AlertView({processFunction:"process_save_doctor",viewClass:".doctorsForm",msg:b,title:"Warning"}),d=new App.Helpers.Modal({view:c});d.show()}},process_save_doctor:function(){var a=this;this.model.set("doctorDirectPhone",this.$el.find('[name="doctorDirectPhone"]').val()),this.model.set("doctorCellPhone",this.$el.find('[name="doctorCellPhone"]').val()),this.model.set("doctorFax",this.$el.find('[name="doctorFax"]').val()),this.model.set("facilityID",this.options.doctorClinicsTypeaheadID),this.model.set("facilitiesIDArr",this.facilityCol.pluck("facilityID")),this.model.set("subspecialtiesIDArr",this.subspecialtiesCol.pluck("subSpecialtyID")),this.model.save({},{success:function(b){a.elementModal.modal("hide");var c=new App.Helpers.Toast({message:"Doctor Saved Correctly",classType:"success",fadeOut:5e3});if(c.render(),_.isUndefined(a.options.modelEvents)){var d=$(".index").data("view");d.getFilteredDoctors(!0)}else{var e=App.Helpers.TypeaheadFormatter(b);a.options.modelEvents.set("doctorID",b.get("doctorID")),a.options.eventsData.doctorTypeaheadID=b.get("doctorID"),$(".typeahead.doctor_typeahead").typeahead("val",e),$(".typeahead.doctor_typeahead").data("datum",{id:b.get("doctorID"),typeaheadResult:e})}}})},newDoctorFacility:function(){var a=new App.Models.DoctorFacilities,b=new App.Views.Files.EventTabs.DoctorFacilitiesForm({model:a,isDoctorView:!0}),c=new App.Helpers.Modal({view:b,sizeModal:"modal-lg"});c.show()},editDoctorFacility:function(a){var b=this,c=$(a.currentTarget),d=c.data("facility"),e=c.data("model"),f=b.facilityCol.get({cid:e});this.doctorFacilityModel=new App.Models.DoctorFacilities({facilityID:d}),this.doctorFacilityModel.fetch({success:function(){var a=new App.Views.Files.EventTabs.DoctorFacilitiesForm({model:b.doctorFacilityModel,doctorClinicsTypeaheadID:d,currenModel:f,isDoctorView:!0}),c=new App.Helpers.Modal({view:a,sizeModal:"modal-lg"});c.show()}})},newSubspecialty:function(){var a=new App.Models.DoctorSubspecialty,b=new App.Views.Tools.ContactCenter.Doctors.SubspecialtiesForm({model:a}),c=new App.Helpers.Modal({view:b});c.show()},editSubspecialty:function(a){var b=this,c=$(a.currentTarget),d=c.data("subspecialty"),e=c.data("model"),f=b.subspecialtiesCol.get({cid:e});this.subspecialtyModel=new App.Models.DoctorSubspecialty({subSpecialtyID:d}),this.subspecialtyModel.fetch({success:function(){var a=new App.Views.Tools.ContactCenter.Doctors.SubspecialtiesForm({model:b.subspecialtyModel,currenModel:f}),c=new App.Helpers.Modal({view:a});c.show()}})},deleteRelationSubspecialty:function(a){var b=$(a.currentTarget),c="Are you sure you want to remove \n\n the Subspacialty Relationship?",d=new App.Views.Shared.AlertView({processFunction:"processDeleteRelationSubspecialty",viewClass:".doctorsForm",params:{elem:b},msg:c,title:"Delete Subspacialty Relationship"}),e=new App.Helpers.Modal({view:d});e.show()},processDeleteRelationSubspecialty:function(a){var b=this,c=a.elem.data("model");b.subspecialtiesCol.remove(c);var d=b.subspecialtiesCol.clone();b.subspecialtiesCol.reset(),b.subspecialtiesCol.add(d.toJSON())},deleteFacility:function(a){var b=$(a.currentTarget),c="Are you sure you want to remove \n\n the Facility Relationship?",d=new App.Views.Shared.AlertView({processFunction:"processDeleteFacility",viewClass:".doctorsForm",params:{elem:b},msg:c,title:"Delete Facility Relationship"}),e=new App.Helpers.Modal({view:d});e.show()},processDeleteFacility:function(a){var b=this,c=a.elem.data("model");b.facilityCol.remove(c);var d=b.facilityCol.clone();b.facilityCol.reset(),b.facilityCol.add(d.toJSON())}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.EventTabs)&&(App.Views.Files.EventTabs={}),App.Views.Files.EventTabs.EventBilling=App.Helpers.View.extend({template:App.Templates.filesEventTabsEventBilling,className:"eventBilling",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{"click .btn-new-bill":"createBill","click .gotoBilling":"editBilling","click .gotoInvoice":"generateInvoice"},generateInvoice:function(a){a.preventDefault(),a.stopPropagation();var b=$(a.currentTarget),c=b.data("invoicenumber"),d=this.options.fileModel.get("fileTitle"),e=this.options.fileModel.getClientBillingFormat(),f=this.options.fileModel.getClientID(),g=this.options.fileModel.get("fileNumber"),h=new App.Views.Billing.PastBilling.InvoiceModal({invoiceNumber:c,billingFormat:e,fileTitle:d,clientID:f,fileNumber:g}),i=new App.Helpers.Modal({view:h});i.show()},editBilling:function(a){var b=this,c=$(a.currentTarget),d=new App.Models.Billing({billingID:c.data("billingid"),fileNumber:this.options.fileModel.get("fileNumber"),eventID:this.model.get("eventID")}),e=new App.Views.Files.EventTabs.BillingForm({model:d,collection:this.options.colBillings,fileModel:this.options.fileModel}),f=new App.Helpers.Modal({view:e,sizeModal:"modal-lg"});f.show(),Backbone.history.navigate("files/edit/"+this.options.fileModel.get("fileNumber")+"/events/edit/"+this.model.get("eventID")+"/billing/edit/"+d.get("billingID"),{silent:!0}),e.elementModal.on("hidden.bs.modal",function(){Backbone.history.navigate("files/edit/"+b.options.fileModel.get("fileNumber")+"/events/edit/"+b.model.get("eventID")+"/billing",{silent:!0})}),d.fetch()},createBill:function(){var a=this,b=new App.Models.Billing({fileNumber:this.options.fileModel.get("fileNumber"),hourly:1,UserID:parseInt(App.loginModel.get("id"),10),eventID:this.model.get("eventID")}),c=new App.Views.Files.EventTabs.BillingForm({model:b,collection:this.options.colBillings,fileModel:this.options.fileModel}),d=new App.Helpers.Modal({view:c,sizeModal:"modal-lg"});Backbone.history.navigate("files/edit/"+this.options.fileModel.get("fileNumber")+"/events/edit/"+this.model.get("eventID")+"/billing/new",{silent:!0}),d.show(),c.elementModal.on("hidden.bs.modal",function(){Backbone.history.navigate("files/edit/"+a.options.fileModel.get("fileNumber")+"/events/edit/"+a.model.get("eventID")+"/billing",{silent:!0})})}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.EventTabs)&&(App.Views.Files.EventTabs={}),App.Views.Files.EventTabs.EventClosureFirst=App.Helpers.View.extend({template:App.Templates.filesEventTabsEventClosureFirst,className:"FilesEventTabsEventClosureFirst",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},afterRender:function(){this.colEventReasons.fetch()}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.EventTabs)&&(App.Views.Files.EventTabs={}),App.Views.Files.EventTabs.EventDocument=App.Helpers.View.extend({template:App.Templates.filesEventTabsEventDocument,className:"eventDocument",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.listenTo(this.options.colEventToDocuments,"add reset",function(){b.applyPermissions()})},events:{"click .btn-documentBrowser":"documentBrowser","click .btnEditDocument":"editDocument","click .btnRemoveDocument":"removeDocument","click .btn-restoreDocumentRemoved":"restoreDocumentRemoved"},getDocumentUrl:function(){return this.row.getUrl()},documentBrowser:function(){if(this.model.isNew()||this.model.get("eventTypeChange")){var a=$(".eventForm").data("view"),b=a.$el;b&&(Uit.SessionFlash.set("defaultTabActive",{tab:"#document-form-tab",className:this.className}),b.find("#save-event").trigger("click"))}else{var c=this.options.model.get(this.options.model.has("eventIDs")?"eventIDs":"eventID"),d=new App.Views.Files.Documents.DocumentBrowser({originModel:this.model,fileModel:this.options.fileModel,eventID:c,collection:this.options.colEventToDocuments,parentViewClassName:this.options.parentViewClassName}),e=new App.Helpers.Modal({view:d,sizeModal:"modal-lg"});e.show()}},isRemoved:function(){return this.row.get("removed")},getDesignations:function(){return App.Helpers.getDesignations(this.options.fileModel.get("designations"),this.row.get("designations")).join(", ")},removeDocument:function(a){var b=$(a.currentTarget),c=b.data("document-id"),d=this.options.colEventToDocuments.get(c),e=$(".eventForm").data("view"),f=e.colBodyParts,g=!1,h="This documents has relationship with injuries.\nAre you sure to remove the document?",i="Are you sure to remove the document?";f.each(function(a){var b=a.get("documents")||[],d=_.findWhere(b,{documentID:c});d&&(g=!0)});var j=new App.Views.Shared.AlertView({processFunction:"processRemoveDocument",viewClass:".eventDocument",params:{documentID:c,hasRelationshipInjuries:g,model:d,colBodyParts:f},msg:g?h:i,title:"Remove Document"}),k=new App.Helpers.Modal({view:j});k.show()},processRemoveDocument:function(a){a.hasRelationshipInjuries?(a.colBodyParts.each(function(b){var c=b.get("documents")||[],d=_.findWhere(c,{documentID:a.documentID});d&&(d.removed=1),b.set("documents",c)}),a.model.set("removed",1)):a.model.set("removed",1);var b=this.options.colEventToDocuments.clone();this.options.colEventToDocuments.reset(b.toJSON())},editDocument:function(a){var b=$(a.currentTarget),c=b.data("document-id"),d=new App.Models.Document2({documentID:c}),e=new App.Views.Files.Documents.Form({model:d,collection:this.options.colEventToDocuments,fileModel:this.options.fileModel}),f=new App.Helpers.Modal({view:e,sizeModal:"modal-lg"});f.show(),d.fetch()}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.EventTabs)&&(App.Views.Files.EventTabs={}),App.Views.Files.EventTabs.EventForm=App.Helpers.View.extend({template:App.Templates.filesEventTabsEventForm,className:"eventForm",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this,c=this.$el;this.colLetters=new App.Collections.Letters,this.colWordLetters=new App.Collections.Letters,this.colExistingEvents=new App.Collections.FileEvents,this.colEventToDocuments=new App.Collections.Documents2,this.colBillings=new App.Collections.Billings,this.colEventTypeCategories=new App.Collections.EventTypeCategories,this.colEventTypeCategories.moduleID=this.options.fileModel.get("module"),this.colMilestones=new App.Collections.Milestones,this.colBodyParts=new App.Collections.BodyParts,this.colMedicalToBodyPartsADj=new App.Collections.BodyParts,this.colMedicalToBodyPartsADj.sortBy="bodyPart",this.loadAAFirm=!1,this.colEventReasons=new App.Collections.EventReasons,this.colEventReasons.moduleID=1,this.listenTo(this.model,"request",function(){b.showLoader()}),this.listenTo(this.model,"sync error",function(){b.removeLoader()}),this.model.isNew()&&this.colMilestones.fetch(),this.listenTo(this.model,"sync",function(){b._checkCorruptedEvent(),b.changeEventCategoryType();var a=b.model.get("eventTypeName"),d=b.model.get("eventTypeDescription");_.isEmpty(d)||_.isNull(d)||(a+=": "+d),c.find(".typeahead.eventTypes-Typeahead").typeahead("val",a),b.colMilestones.reset(b.model.get("milestones")),b._showOtherFields(),b.colEventToDocuments.reset(b.model.get("documents")),b.colBillings.add(b.model.get("billings")),b.colBodyParts.reset(b.model.get("bodyParts")),b.colLetters.reset(b.model.get("letterTemplates")),b.colWordLetters.reset(b.model.get("wordLetterTemplates")),b.applyPermissions(),b.colMedicalToBodyPartsADj.reset(b.model.get("medical2bodyParts")),b.options.fileModel.set("previousFileOpens",b.model.get("previousFileOpens")),b.showCloseEventReasons(b.model.get("childTable"))}),b.category=b.options.category||null},events:{'change [name="category-type"]':"changeEventCategoryType",'change [name="existing-select"]':"_showOtherFields","click .icon-typeahead-down":"showAllEntities","click #save-event":"saveEvent","click #save-event-and-create-new-event":"saveEvent","click .auto-save":"autoSaveEvent","click #add-new-bill":"createNewBill",'click [href="#billing-form-tab"]':"changeBillingUrl","click #show-dependencies":"showDependencies"},_checkCorruptedEvent:function(){if(this.model.get("childTable")&&(0===this.model.get("childID")||_.isUndefined(this.model.get("childID"))||_.isNull(this.model.get("childID")))){var a=new App.Helpers.Toast({message:"Error: This event is corrupted and is missing its extended info. Please contact your admin.",classType:"danger",fadeOut:5e3});a.render(),this.model.set("isCorrupt",1)}},afterRender:function(){var a=Uit.SessionFlash.get("defaultTabActive"),b=this.$el;if(this.colEventTypeCategories.fetch({success:this.setDefaultEventType}),a&&("#event-form-tab3"===a.tab&&"eventWcCaseFirst"===a.className&&(b.find('.nav-tabs a[href="'+a.tab+'"]').tab("show"),this.listenToOnce(this.model,"sync",function(){var a=$(".eventWcCaseFirst").data("view").$el;a&&a.find(".btn-addBodyPart").trigger("click")})),"#event-form-tab4"===a.tab&&"eventWcLienSecond"===a.className&&(b.find('.nav-tabs a[href="'+a.tab+'"]').tab("show"),this.listenToOnce(this.model,"sync",function(){var b=$(".eventWcLienSecond").data("view"),c=b.$el;c&&"#add-lien-rep"===a.option?c.find(a.option).trigger("click"):(b.lienReps.add(a.option),b.saveLien2LienRep(a.option))})),"#event-form-tab5"===a.tab&&"eventWcLienThird"===a.className&&(b.find('.nav-tabs a[href="'+a.tab+'"]').tab("show"),this.listenToOnce(this.model,"sync",function(){var a=$(".eventWcLienThird").data("view").$el;a&&a.find("#add-lien-bill").trigger("click")})),"#event-form-tab6"===a.tab&&"eventWcLienForth"===a.className&&(b.find('.nav-tabs a[href="'+a.tab+'"]').tab("show"),this.listenToOnce(this.model,"sync",function(){var b=$(".eventWcLienForth").data("view").$el;b&&a.option&&b.find(a.option).trigger("click")})),"#event-form-tab7"===a.tab&&"eventWcLienFifth"===a.className&&(b.find('.nav-tabs a[href="'+a.tab+'"]').tab("show"),this.listenToOnce(this.model,"sync",function(){var a=$(".eventWcLienFifth").data("view").$el;a&&a.find("#add-lien-objection").trigger("click")})),"#document-form-tab"===a.tab&&"eventDocument"===a.className&&(b.find('.nav-tabs a[href="'+a.tab+'"]').tab("show"),this.listenToOnce(this.model,"sync",function(){var a=$(".eventDocument").data("view").$el;a&&a.find(".btn-documentBrowser").trigger("click")}))),Uit.SessionFlash.get("addNewBill")&&(b.find('.nav-tabs a[href="#billing-form-tab"]').tab("show"),this.listenToOnce(this.model,"sync",function(){var a=$(".eventBilling").data("view").$el;a&&a.find('a[class="btn btn-default btn-new-bill"]').trigger("click")})),!_.isUndefined(this.category)&&!_.isNull(this.category)){var c=this.$el.find('[name="category-type"]');c.find("[selected]").removeAttr("selected"),this.model.set("etcID",this.category),this.changeEventCategoryType()}},setDefaultEventType:function a(){var a=localStorage.getItem("setDefaultEventType");if(a){a=JSON.parse(a);var b=$(".eventForm").data("view"),c=b.$el;c.find('select[name="category-type"]').val(a.eventCategoryID),c.find('select[name="category-type"]').trigger("change"),c.find(".eventTypes-Typeahead").typeahead("val",a.eventTypeahead),b.changeEventType({datum:{eventTypeName:a.eventTypeName,eventTypeID:a.eventTypeID,childTable:a.eventChildTable,defaultRead:a.defaultRead}}),localStorage.removeItem("setDefaultEventType")}},changeBillingUrl:function(){Backbone.history.navigate("files/edit/"+this.options.fileModel.get("fileNumber")+"/events/edit/"+this.model.get("eventID")+"/billing",{silent:!0})},showCloseEventReasons:function(a){var b=this,c=this.$el;"wc_file_closes"===a&&(c.find("#close-event-reasons").show(),c.find("#existing-events-select").hide(),this.colEventReasons.fetch({success:function(){c.find("#existing-events-select").hide(),b.handlerToFetchAAFirm(),b._showOtherFields()}}))},autoSaveEvent:function(a){a.stopImmediatePropagation(),a.stopPropagation(),a.preventDefault();var b=this.$el,c=b.find(".nav li.active").find("a").attr("href"),d=$(a.currentTarget).attr("href"),e="#billing-form-tab"!==c&&"#letters-tab"!==c,f="#billing-form-tab"===d||"#letters-tab"===d;e&&f?this.saveEvent(a):b.find('.nav-tabs a[href="'+d+'"]').tab("show"),"#letters-tab"===d&&this.showLettersTab()},showErrorTabs:function(){var a=this.$el,b=a.find("label.error"),c=!0;b.length>0&&_.each(b,function(b){var d="#"+a.find(b).closest(".tab-pane").attr("id");c&&(a.find('a[href="'+d+'"]').tab("show"),c=!1),a.find('a[href="'+d+'"]').addClass("error-tab")})},saveEvent:function(a){a.preventDefault(),a.stopPropagation();var b=this.$el,c=$(a.currentTarget),d=this.model.isNew(),e=this,f=b.find("#error-msg");this.model.set("eventTypeParams",this._changeEventTypeParams);var g=!0;if(_.isUndefined(this.model.get("fileNumber"))||_.isUndefined(this.model.get("etcID"))||_.isUndefined(this.model.get("eventTypeID"))){var h=new App.Helpers.Toast({message:"Error: An event must have a fileNumber, eventTypeID, and event category type",classType:"danger",fadeOut:5e3});return void h.render()}if(b.find("#event-general-tab-form").valid()||(g=!1),"wc_subpoenas"===this.model.get("childTable")&&(b.find("#subpoena-form-first").valid()||(g=!1)),"wc_hearings"===this.model.get("childTable")&&(b.find("#hearing-form-first").valid()||(g=!1)),"wc_liens"===this.model.get("childTable")&&(b.find("#lien-form-first").valid()||(g=!1)),"wc_cases"===this.model.get("childTable")&&(b.find("#case-form-first").valid()||(g=!1)),"wc_depos"===this.model.get("childTable")&&(b.find("#depo-form-first").valid()||(g=!1)),"wc_depos"===this.model.get("childTable")&&(b.find("#depo-form-second").valid()||(g=!1)),"wc_depos"===this.model.get("childTable")&&(b.find("#depo-form-third").valid()||(g=!1)),"wc_medical"===this.model.get("childTable")){var i=this.model.get("doctorFacilityID"),j=this.model.get("doctorID"),k=_.isUndefined(i)||_.isNull(i)||0===i,l=_.isUndefined(j)||_.isNull(j)||0===j;(!b.find("#medical-form-first").valid()||k&&l)&&(g=!1)}if(!g)return Uit.SessionFlash.get("defaultTabActive"),this.showErrorTabs(),void f.html("There are errors on some fields.");if(f.html(""),b.find(".nav-tabs li a").removeClass("error-tab"),"CL-COMM"===this.model.get("eventTypeName")&&this.model.isNew()&&"1"===sessionStorage.getItem("isDA")&&(this.model.set("updateLastEvent",!0),this.model.set("currentUser",sessionStorage.getItem("loginId"))),"wc_depos"===this.model.get("childTable")&&(this.model.set("depoPhone",this.$el.find('[name="depoPhone"]').val()),(this.model.get("shortSummary")||this.model.get("longSummary")||this.model.get("conclusions"))&&!this.model.get("signingAttorneyID"))){var m=new App.Helpers.Toast({message:"Error: Signing Attorney can not be blank when there is a short summary, long summary, or conclusions.",classType:"danger",fadeOut:5e3});return void m.render()}if("wc_hearings"===this.model.get("childTable")&&(this.model.get("shortSummary")||this.model.get("longSummary")||this.model.get("conclusions"))&&!this.model.get("signingAttorneyID")){var n=new App.Helpers.Toast({message:"Error: Signing Attorney can not be blank when there is a short summary, long summary, or conclusions.",classType:"danger",fadeOut:5e3});return void n.render()}if("wc_liens"===this.model.get("childTable")){var o=$(".eventWcLienSecond").data("view"),p=$(".eventWcLienFifth").data("view"),q=$(".eventWcLienForth").data("view"),r=$(".eventWcLienThird").data("view");if(!_.isUndefined(o.lienReps)){var s=o.lienReps.pluck("lienRepID");this.model.set("lienReps",s)}this.model.isNew()&&(_.isUndefined(q.liendOffers)||this.model.set("liendOffers",q.liendOffers.toJSON()),_.isUndefined(q.liendDemands)||this.model.set("liendDemands",q.liendDemands.toJSON()),_.isUndefined(p.liendObjections)||this.model.set("lienObjections",p.liendObjections.toJSON()),_.isUndefined(r.liendBills)||this.model.set("liendBills",r.liendBills.toJSON()))}return"wc_medical"===this.model.get("childTable")&&this.model.set("medical2bodyParts",this.colMedicalToBodyPartsADj.toJSON()),this.model.set("milestones",this.colMilestones.toJSON()),this.model.set("bodyParts",this.colBodyParts.toJSON()),this.model.set("documents",this.colEventToDocuments.toJSON()),d&&this.model.set("alertsCol",$(".eventGeneral").data("view").colAlerts.models),c.attr("disabled",!0),this.model.save({},{success:function(){var a="files/edit/"+e.options.fileModel.get("fileNumber")+"/events/edit/"+e.model.get("eventID"),f=new App.Helpers.Toast({message:"Event saved successfully.",classType:"success",fadeOut:5e3});if(f.render(),e.model.unset("eventTypeChange"),"wc_cases"===e.model.get("childTable")){var g=e.model.get("adjProgress")||[];e.options.fileModel.set("adjProgress",g)}if("#billing-form-tab"===c.attr("href")||"#letters-tab"===c.attr("href")){var h=b.find('.nav-tabs a[href="'+c.attr("href")+'"]');h.tab("show");var i="#billing-form-tab"===c.attr("href")?"billing":"letters";a+="/"+i}Uit.SessionFlash.get("trigger_add_bill")&&(d?a+="/new":b.find('a[class="btn btn-default btn-new-bill"]').trigger("click")),_.values(App.Const.eventTypes).indexOf(e.model.get("eventTypeID"))>-1&&Uit.SessionFlash.set("fetch_file",!0),d&&Uit.SessionFlash.set("ignoreCheckRead",!0),"save-event-and-create-new-event"===c.attr("id")?(d&&Backbone.history.navigate(a,{trigger:!0}),Backbone.history.navigate(e.options.fileModel.fileNewEventUrl(),{trigger:!0})):d&&Backbone.history.navigate(a,{trigger:!0}),e._changeEventTypeParams.changed=!1},error:function(a,b){if(_.has(b.responseJSON,"error_code"))if("cannot_delete_documents_in_event_2_documents"===b.responseJSON.error_code)e.colEventToDocuments.each(function(a){a.set("removed",0),e.colBodyParts.each(function(b){var c=b.get("documents")||[],d=_.findWhere(c,{documentID:a.get("documentID")});d&&(d.removed=0)})});else if("cannot_delete_extended_event"===b.responseJSON.error_code){var c=new App.Helpers.Toast({message:"There was an error trying to unlink the extended event.",classType:"danger",fadeOut:5e3});c.render(),window.location.reload()}},complete:function(){c.removeAttr("disabled")}}),!0},showTabDocuments:function(){var a=new App.Views.Files.EventTabs.EventDocument({model:this.model,fileModel:this.options.fileModel,colEventToDocuments:this.colEventToDocuments,parentViewClassName:this.className});App.Helpers.htmlView(a,"#document-form-tab")},_showOtherFields:function(a){var b=this.$el,c=this;if(!_.isUndefined(a)){var d=b.find('[name="existing-select"]').val();if("new"!==d){var e=new App.Models.Event({eventID:d});e.fetch({data:$.param({fileNumber:c.options.fileModel.get("fileNumber")}),success:function(a){var b=a.get("childInfo");b&&(delete b.eventID,c.model.set(b)),c.model.set("childID",a.get("childID")),c._executeOtherTabs()}})}else"new"===d&&(this.defaultAttrForCreateEvent&&(this.model.clear(),this.model.set(this.defaultAttrForCreateEvent)),this.handlerToFetchAAFirm())}this._executeOtherTabs()},_executeOtherTabs:function(){var a=this.$el;this.emptyElement("#event-form-tab"),this.emptyElement("#billing-form-tab"),this.emptyElement("#event-form-tab3"),this.emptyElement("#event-form-tab4"),this.emptyElement("#event-form-tab5"),this.tab3=void 0,this.tab4=void 0,this.tab5=void 0,this.tab6=void 0,this.tab7=void 0,this.tab8=void 0,a.find("#other-fields").show();var b=new App.Views.Files.EventTabs.EventGeneral({model:this.model,colMilestones:this.colMilestones,parentViewClassName:this.className,fileModel:this.options.fileModel});App.Helpers.htmlView(b,"#event-form-tab"),this.showTabDocuments();var c=new App.Views.Files.EventTabs.EventBilling({model:this.model,colBillings:this.colBillings,fileModel:this.options.fileModel,parentViewClassName:this.className});if(App.Helpers.htmlView(c,"#billing-form-tab"),_.isUndefined(this.model.get("childTable"))||""===this.model.get("childTable"))a.find('[href="#event-form-tab3"]').hide(),a.find('[href="#event-form-tab4"]').hide(),a.find('[href="#event-form-tab5"]').hide(),a.find('[href="#event-form-tab6"]').hide(),a.find('[href="#event-form-tab7"]').hide(),a.find('[href="#event-form-tab8"]').hide();else{var d,e,f,g,h,i;if("wc_depos"===this.model.get("childTable"))this.tab3="Details",this.tab4="5710",this.tab5="Summary",_.isUndefined(this.model.get("depoStatus"))&&this.model.set("depoStatus","Scheduled"),d=new App.Views.Files.EventTabs.EventWcDepoFirst({model:this.model,fileModel:this.options.fileModel,parentViewClassName:this.className,loadAAFirm:this.loadAAFirm}),this.loadAAFirm=!1,e=new App.Views.Files.EventTabs.EventWcDepoSecond({model:this.model,fileModel:this.options.fileModel,parentViewClassName:this.className}),f=new App.Views.Files.EventTabs.EventWcDepoThird({model:this.model,fileModel:this.options.fileModel,parentViewClassName:this.className});else if("wc_medical"===this.model.get("childTable"))this.tab3="Details",d=new App.Views.Files.EventTabs.EventWcMedicalFirst({model:this.model,fileModel:this.options.fileModel,colMedicalToBodyPartsADj:this.colMedicalToBodyPartsADj,parentViewClassName:this.className});else if("wc_subpoenas"===this.model.get("childTable"))this.tab3="Details",d=new App.Views.Files.EventTabs.EventWcSubpoenasFirst({model:this.model,parentViewClassName:this.className});else if("wc_hearings"===this.model.get("childTable"))this.tab3="Details",d=new App.Views.Files.EventTabs.EventWcHearingFirst({model:this.model,fileModel:this.options.fileModel,parentViewClassName:this.className});else if("wc_liens"===this.model.get("childTable")){this.tab3="Lien Claimant",this.tab4="Lien Rep",this.tab5="Received Bills",this.tab6="Negotiations",this.tab7="Objections",this.tab8="Settlement";var j=new App.Helpers.Collection;j.add(this.options.fileModel.get("cases")),d=new App.Views.Files.EventTabs.EventWcLienFirst({model:this.model,adjPickerCol:j,parentViewClassName:this.className}),e=new App.Views.Files.EventTabs.EventWcLienSecond({model:this.model,fileModel:this.options.fileModel,parentViewClassName:this.className}),f=new App.Views.Files.EventTabs.EventWcLienThird({model:this.model,fileModel:this.options.fileModel,parentViewClassName:this.className}),g=new App.Views.Files.EventTabs.EventWcLienForth({model:this.model,fileModel:this.options.fileModel,parentViewClassName:this.className}),h=new App.Views.Files.EventTabs.EventWcLienFifth({model:this.model,fileModel:this.options.fileModel,parentViewClassName:this.className}),i=new App.Views.Files.EventTabs.EventWcLienSixth({model:this.model,fileModel:this.options.fileModel,parentViewClassName:this.className})}else"wc_cases"===this.model.get("childTable")&&(this.tab3="Injuries",this.model.isNew()&&this.model.set("leadCase",0),d=new App.Views.Files.EventTabs.EventWcCaseFirst({model:this.model,fileModel:this.options.fileModel,colBodyParts:this.colBodyParts,colEventToDocuments:this.colEventToDocuments,parentViewClassName:this.className}));_.isUndefined(d)?a.find('[href="#event-form-tab3"]').hide():(a.find('[href="#event-form-tab3"]').show(),
App.Helpers.htmlView(d,"#event-form-tab3")),_.isUndefined(e)?a.find('[href="#event-form-tab4"]').hide():(a.find('[href="#event-form-tab4"]').show(),App.Helpers.htmlView(e,"#event-form-tab4")),_.isUndefined(f)?a.find('[href="#event-form-tab5"]').hide():(a.find('[href="#event-form-tab5"]').show(),App.Helpers.htmlView(f,"#event-form-tab5")),_.isUndefined(g)?a.find('[href="#event-form-tab6"]').hide():(a.find('[href="#event-form-tab6"]').show(),App.Helpers.htmlView(g,"#event-form-tab6")),_.isUndefined(h)?a.find('[href="#event-form-tab7"]').hide():(a.find('[href="#event-form-tab7"]').show(),App.Helpers.htmlView(h,"#event-form-tab7")),_.isUndefined(i)?a.find('[href="#event-form-tab8"]').hide():(a.find('[href="#event-form-tab8"]').show(),App.Helpers.htmlView(i,"#event-form-tab8"))}},showLettersTab:function(){var a=new App.Views.Files.Letters.LettersTab({colLetters:this.colLetters,colWordLetters:this.colWordLetters,fileModel:this.options.fileModel,eventModel:this.model,parentViewClassName:this.className});App.Helpers.htmlView(a,"#letters-tab")},processEventTypeahead:function(a){var b=this.$el;if(""!==a.instructions?(b.find("#instructionsText").text(a.instructions),b.find("#eventTypeInstructions").slideDown("fast")):b.find("#eventTypeInstructions").slideUp("fast"),this.model.isNew()||a.childTable===this.model.get("childTable"))this.changeEventType({datum:a});else{var c="You are changing event type of an existing event. This will unlink any extended events associated to this event. ";1===this.model.get("childIsLast")&&(c+="This will also delete the information of the extended event.");var d=new App.Views.Shared.AlertView({processFunction:"changeEventType",cancelFunction:"cancelChangeEventType",viewClass:".eventForm",params:{datum:a},msg:c,title:"Warning"}),e=new App.Helpers.Modal({view:d});e.show()}},_changeEventTypeParams:{changed:!1},changeEventType:function(a){var b=this.$el,c=this;this._changeEventTypeParams.changed=!0,this._changeEventTypeParams.fileNumber=this.options.fileModel.get("fileNumber"),this._changeEventTypeParams.eventID=this.model.get("eventID"),this._changeEventTypeParams.eventTypeID=this.model.get("eventTypeID"),this._changeEventTypeParams.childTable=this.model.get("childTable"),this._changeEventTypeParams.childID=this.model.get("childID");var d=this.model.get("eventTypeID"),e=this.model.get("childTable"),f=["fileNumber","eventID","eventDate","shortNote","shortSummary","milestones","eventTitle","done","longNote","etcID","eventTypeID","childTable","important"];if(b.find('a[href="#event-form-tab"]').tab("show"),!this.model.isNew()){var g="Changed stored temporarily.<br>Hit the Save Event button to save",h=new App.Helpers.Toast({message:g,classType:"warning",fadeOut:8e3});h.render()}this._changeEventTypeParams.childTable&&this._changeEventTypeParams.childID&&(c.model.unset("eventTypeID",{silent:!0}),c.model.unset("childTable",{silent:!0})),_.each(c.model.attributes,function(b,d){-1===_.indexOf(f,d)&&a.datum.childTable!==e&&c.model.unset(d,{silent:!0})}),this.model.set("eventTypeName",a.datum.eventTypeName),this.model.set("eventTypeID",a.datum.eventTypeID),this.model.set("childTable",a.datum.childTable?a.datum.childTable:null),this.model.set("defaultRead",a.datum.defaultRead),this.model.set("oldEventTypeID",d),this.model.set("oldChildTable",e),"wc_file_closes"===String(a.datum.childTable).trim()?c.showCloseEventReasons(String(a.datum.childTable).trim()):""!==String(a.datum.childTable).trim()&&null!==a.datum.childTable&&void 0!==a.datum.childTable?(this.model.isNew()?(b.find("#close-event-reasons").hide(),b.find("#existing-events-select").show()):(this.handlerToFetchAAFirm(),this._showOtherFields()),b.find('[name="existing-select"]').val("-1"),this.colExistingEvents.reset(),this.colExistingEvents.fetch({data:$.param({fileNumber:this.options.fileModel.get("fileNumber"),childTable:a.datum.childTable}),success:function(a,b){var d=[];_.each(b,function(a){if(_.isNull(a.childID)){_.isNull(a.eventTitle)&&(a.eventTitle="Untitled");var c=_.findWhere(d,{eventID:a.eventID});_.isUndefined(c)&&d.push(a)}else{var e=_.where(b,{childID:a.childID}),f=_.where(d,{childID:a.childID}),g={};e=_.sortBy(e,"date"),e.length&&!f.length&&_.each(e,function(b){_.isEmpty(g)?(g.eventID=b.eventID,g.childID=b.childID,g.etcName=b.etcName,g.eventTypeID=b.eventTypeID,g.eventTypeName=b.eventTypeName,g.fileNumber=b.fileNumber,g.milestoneName=b.milestoneName,g.shotNote=b.shotNote,g.eventTitle=_.isNull(b.eventTitle)?"Untitled":b.eventTitle,g.eventDate=b.eventDate):_.isNull(b.eventTitle)||(g.eventTitle+=", "+b.eventTitle);var c=_.findWhere(d,{eventID:a.eventID});_.isUndefined(c)&&d.push(g)})}}),d=_.uniq(d),c._existingEventsTypeahead(d)}})):(b.find("#close-event-reasons").hide(),b.find("#existing-events-select").hide(),this.handlerToFetchAAFirm(),this._showOtherFields()),this.model.isNew()&&(this.defaultAttrForCreateEvent=this.model.toJSON()),this.model.set("eventTypeChange",!0)},_existingEventsTypeahead:function(a){this.$el.find(".existing-events-typeahead").typeahead("val","").typeahead("destroy");var b=this.$el,c=this,d=function(a){return function(b,c){var d=[];0===b.length&&(d=[{eventID:"new",eventTitle:"New",eventDate:null}]),$.each(a,function(a,c){c.eventTitle.toLowerCase().includes(b.toLowerCase())&&d.push(c)}),c(d.length?d:a)}},e=".existing-events-typeahead",f=b.find(e).typeahead({hint:!0,highlight:!0},{name:"existing-select",display:function(a){var b=a.eventTitle;return b+=_.isNull(a.eventDate)?"":" | "+a.eventDate,b+="new"!==a.eventID?" | "+a.eventID:""},source:d(a)});f.on("typeahead:opened",function(){var a='<i class="fa fa-chevron-down"></i>';b.find('[data-input-name="existing-events"]').html(a)}),c._processTypeaheadGeneric(f,e)},handlerToFetchAAFirm:function(){"wc_depos"===this.model.get("childTable")&&this.loadAAFirm===!1&&(this.loadAAFirm=!0)},cancelChangeEventType:function(){location.reload()},_initEventTypeTypeAhead:function(){var a=this;App.Helpers.initTypeahead({view:this,elemClass:".eventTypes-Typeahead",urlBuild:"api/typeahead_controller/search_eventTypes/"+a.model.get("etcID"),processFunction:$.proxy(a.processEventTypeahead,this)})},changeEventCategoryType:function(){var a=this.$el;this._initEventTypeTypeAhead(),a.find(".eventTypes-Typeahead").typeahead("val",""),a.find("#existing-events-select").hide(),a.find("#other-fields").hide(),a.find("#close-event-reasons").hide()},showDependencies:function(){var a=this.colEventTypeCategories.findWhere({etcID:this.model.get("etcID")}),b=new App.Models.Event({fileNumber:this.options.fileModel.getFileNumber(),eventID:this.model.get("eventID")}),c=new App.Views.Files.EventTabs.ShowDependencies({model:b,currentEvent:this.model,categoryName:a.get("etcName"),fileModel:this.options.fileModel}),d=new App.Helpers.Modal({view:c,sizeModal:"modal-lg"});d.show()},_processTypeaheadGeneric:function(a,b){var c=this,d=this.$el;a.off("typeahead:selected typeahead:autocompleted"),a.on("typeahead:selected typeahead:autocompleted typeahead:change",function(a,e){if(!_.isUndefined(e))if(d.find(".tt-dropdown-menu").css("display","none"),d.find(b+".tt-input").data("ttTypeahead").minLength=1,".eventTypes-Typeahead"===b)_.isUndefined(c.processEventTypeahead)||c.processEventTypeahead(e);else if(".existing-events-typeahead"===b){var f=d.find('[name="existing-select"]');f.val(e.eventID),c._showOtherFields(f)}}),a.keypress(function(c){if(13===c.which){var e=d.find(".tt-suggestion").data("ttDatum");if(_.isUndefined(e))return;if(a.trigger("typeahead:selected",[e]),".eventTypes-Typeahead"===b)d.find(b).typeahead("val",App.Helpers.handlerDisplayKey(e)),d.find(b+".tt-input").data("ttTypeahead").minLength=0;else if(".existing-events-typeahead"===b){var f=e.eventTitle;f+=_.isNull(e.eventDate)?"":" | "+e.eventDate,f+="new"!==e.eventID?" | "+e.eventID:"",d.find(b).typeahead("val",f),d.find(b+".tt-input").data("ttTypeahead").minLength=0}}})},createNewBill:function(){var a=this.$el,b=a.find(".nav li.active").find("a").attr("href");"#billing-form-tab"!==b||this.model.isNew()?"#letters-tab"!==b||this.model.isNew()?(Uit.SessionFlash.set("trigger_add_bill",!0),a.find('a[href="#billing-form-tab"]').trigger("click")):(a.find('a[href="#billing-form-tab"]').trigger("click"),a.find('a[class="btn btn-default btn-new-bill"]').trigger("click")):a.find('a[class="btn btn-default btn-new-bill"]').trigger("click")}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.EventTabs)&&(App.Views.Files.EventTabs={}),App.Views.Files.EventTabs.EventGeneral=App.Helpers.View.extend({template:App.Templates.filesEventTabsEventGeneral,className:"eventGeneral",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.colAlerts=new App.Collections.Alerts,this.colAlerts.add(this.model.get("alerts")),this.model.isNew()&&this.model.set("read",this.model.get("defaultRead"))},events:{"click #arrow-milestone":"changeStateFlagMilestones","click #arrow-alerts":"toggleAlertList","click #new-alert":"createNewAlert","click .alert-row":"editAlert"},_alertForm:function(a){var b=new App.Views.Files.EventAlertForm({model:a,alertCollection:this.colAlerts}),c=new App.Helpers.Modal({view:b});c.show()},createNewAlert:function(){var a=new App.Models.Alert({moduleID:this.options.fileModel.get("module"),fileNumber:this.model.get("fileNumber"),eventID:this.model.get("eventID"),notificationUnit:"minutes"});this._alertForm(a),this.$el.find("#alerts-arrow-down").is(":visible")||this.toggleAlertList()},editAlert:function(a){a.preventDefault(),a.stopPropagation();var b=$(a.currentTarget),c=b.data("alert-id"),d=this.colAlerts.where({alert_id:c})[0],e=new App.Models.Alert({eventID:this.model.get("eventID"),alert_id:c,moduleID:this.model.get("moduleID"),fileNumber:this.model.get("fileNumber"),date:d.get("date"),time:d.get("time"),description:d.get("description"),notificationQuantity:d.get("notificationQuantity"),notificationUnit:d.get("notificationUnit"),colUsers:d.get("colUsers")});this._alertForm(e)},toggleAlertList:function(){var a=this.$el;a.find(".alerts-expanded").toggle(),a.find(".alerts-inline").toggle()},changeStateFlagMilestones:function(){var a=this.$el;a.find(".milestones-expanded").toggle(),a.find(".milestones-inline").toggle()}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.EventTabs)&&(App.Views.Files.EventTabs={}),App.Views.Files.EventTabs.EventWcCaseBodyPart=App.Helpers.View.extend({template:App.Templates.filesEventTabsEventWcCaseBodyPart,className:"eventWcCaseBodyPart",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.listenTo(this.model,"request",function(){this.showLoader(".modal-body")}),this.listenTo(this.model,"sync error",function(){this.removeLoader(".modal-body")}),this.bodyPartModel=this.model.clone()},events:{"click #doSaveBodyPart":"doSaveBodyPart","click .btnBrowserDocument":"openBrowserDocument","click .btnEditDocument":"editDocument","click .btnRemoveDocument":"removeDocument","click #delete-body-part":"deleteBodyPart","click .icon-typeahead-down":"showAllEntities"},getDocumentUrl:function(){return this.row.getUrl()},_updateDocumentsByEvent:function(){var a=$(".eventForm").data("view");a&&this.options.colDocuments.each(function(b){var c=a.colEventToDocuments,d=c.get(b.get("documentID"));d?c.set(d,{remove:!1}):c.add(b)})},isRemoved:function(){return this.row.get("removed")},deleteBodyPart:function(a){var b=$(a.currentTarget),c="Are you sure you want to delete this body part?",d=new App.Views.Shared.AlertView({processFunction:"processDeleteBodyPart",viewClass:".eventWcCaseBodyPart",params:{elem:b},msg:c,title:"Delete Body Part"}),e=new App.Helpers.Modal({view:d,parentClassName:this.options.parentClassName});e.show()},processDeleteBodyPart:function(a){var b,c=this,d=a.elem.data("bodypartid"),e=this.options.colBodyParts.get(d);e.destroy({success:function(){var a=c.options.colDocuments.clone();c.options.colDocuments.reset(a.toJSON()),c.elementModal.modal("hide"),b=new App.Helpers.Toast({message:"Body Part Deleted.",classType:"success",fadeOut:5e3}),b.render()}})},removeDocument:function(a){var b=$(a.currentTarget),c=b.data("document-id"),d=new App.Views.Shared.AlertView({processFunction:"processRemoveDocument",viewClass:".eventWcCaseBodyPart",params:{documentID:c},msg:"Are you sure to remove the document?",title:"Remove Document"}),e=new App.Helpers.Modal({view:d,parentClassName:this.options.parentClassName});e.show()},processRemoveDocument:function(a){var b=this.options.colDocuments.clone();this.options.colDocuments.reset(b.toJSON());var c=this.options.colDocuments.get(a.documentID);c.set("removed",1)},doSaveBodyPart:function(){var a=this.$el,b=this;if(a.find(".form-bodypart").valid()){var c=this.options.colBodyParts,d=this.options.fileModel.get("fileNumber")||0,e=_.isUndefined(this.options.modelEventCase)?this.options.modelCase.get("caseID"):this.options.modelEventCase.get("childID"),f=_.isUndefined(this.options.modelEventCase)?this.options.modelCase:this.options.modelEventCase;this.bodyPartModel.set({fileNumber:d,caseID:e,documents:this.options.colDocuments.toJSON(),medical2bodyParts:this.options.colMedicalsByBodyParts.toJSON()}),f.isNew()||this.options.isEventTypeChange?(this.model.clear(),this.model.set(this.bodyPartModel.attributes),c.add(this.model),this._updateDocumentsByEvent(),this.elementModal.modal("hide")):this.bodyPartModel.save({},{success:function(a){b.model.clear(),b.model.set(a.attributes),c.add(b.model),b._updateDocumentsByEvent(),b.elementModal.modal("hide"),b.options.updateBodypartCol&&b.options.modelCase.set("bodyParts",c.toJSON())}})}},openBrowserDocument:function(){var a;a=this.options.modelCase?this.options.modelCase.get(this.options.modelCase.has("eventIDs")?"eventIDs":"eventID"):this.options.modelEventCase.get(this.options.modelEventCase.has("eventIDs")?"eventIDs":"eventID");var b=new App.Views.Files.Documents.DocumentBrowser({originModel:this.model,fileModel:this.options.fileModel,eventID:a,parentClassName:this.options.parentClassName,collection:this.options.colDocuments}),c=new App.Helpers.Modal({view:b,sizeModal:"modal-lg",parentClassName:this.options.parentClassName});c.show()},editDocument:function(a){var b=$(a.currentTarget),c=b.data("document-id"),d=new App.Models.Document({documentID:c}),e=new App.Views.Files.Documents.Form({model:d,collection:this.options.colDocuments,fileModel:this.options.fileModel}),f=new App.Helpers.Modal({view:e,sizeModal:"modal-lg",parentClassName:this.options.parentClassName});f.show(),d.fetch()},afterRender:function(){App.Helpers.initTypeahead({view:this,elemClass:".typeahead.select_Medicals",urlBuild:{url:"api/typeahead_controller/search_medicals",resource:this.options.fileModel.get("fileNumber")},processFunction:$.proxy(this.processFunctionSelectMedical,this)})},processFunctionSelectMedical:function(a){var b=new App.Models.MedicalBodyPart(a);b.set("assigned",1),b.set("isPnSRecord",!1),this.options.colMedicalsByBodyParts.add(b),this.$el.find(".typeahead.select_Medicals").typeahead("val","")},showAllEntities:function(a){App.Helpers.showAllEntities(a,this.$el)},removeMedical:function(){this.options.colMedicalsByBodyParts.remove(this.medical)},getDesignations:function(){return App.Helpers.getDesignations(this.options.fileModel.get("designations"),this.row.get("designations")).join(", ")}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.EventTabs)&&(App.Views.Files.EventTabs={}),App.Views.Files.EventTabs.EventWcCaseFirst=App.Helpers.View.extend({template:App.Templates.filesEventTabsEventWcCaseFirst,className:"eventWcCaseFirst",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.collection=new App.Collections.WCCases(this.options.fileModel.get("cases"))},events:{"click #venue_form_edit":"editVenueForm","click #venue_form_new":"newVenueForm","click .btn-editBodyPart":"doEditBodyPart","click .btn-addBodyPart":"doAddBodyPart","click [name=leadCase]":"checkLeadCase","change [name=selectLeadCases]":"changeSelectLeadCase"},changeSelectLeadCase:function(a){var b=$(a.currentTarget);this.model.set("newLeadCaseID",b.val())},checkLeadCase:function(a){var b=$(a.currentTarget),c=this.$el;c.find(".msg-form").html("You should update the claim number in file"),this.model.unset("newLeadCaseID"),this.collection.length>1&&(1===this.isLeadCase&&b.is(":checked")===!1?(c.find("[name=selectLeadCases]").attr("required","required"),c.find(".panel-select-leadCase").show()):1===this.isLeadCase&&(c.find("[name=selectLeadCases]").removeAttr("required"),c.find(".panel-select-leadCase").hide()))},afterRender:function(){this.venueTypeaheadID=0,App.Helpers.initTypeahead({view:this,elemClass:".typeahead.venue_typeahead",urlBuild:{url:"api/typeahead_controller/search_venues"},processFunction:$.proxy(this.processVenueTypeahead,this),unmatchedProcessFunction:$.proxy(this.processUnmatchedVenueTypeahead,this)}),this.prepopulateData()},processUnmatchedVenueTypeahead:function(){this.options.model.set("venueID",void 0),$(".typeahead.venue_typeahead").typeahead("val",""),this.venueTypeaheadID=void 0},processVenueTypeahead:function(a){this.venueTypeaheadID=a.id,this.options.model.set("venueID",this.venueTypeaheadID)},newVenueForm:function(){var a=new App.Models.Venue,b=new App.Views.Files.FileTabs.Injuries.VenueForm({model:a,modelEvents:this.options.model,eventData:this}),c=new App.Helpers.Modal({view:b});c.show()},editVenueForm:function(){var a=this;_.isUndefined(this.venueTypeaheadID)||(this.venueModel=new App.Models.Venue({venueID:this.venueTypeaheadID}),this.showLoader(),this.venueModel.fetch({success:function(){var b=new App.Views.Files.FileTabs.Injuries.VenueForm({model:a.venueModel,modelEvents:a.options.model,eventData:a}),c=new App.Helpers.Modal({view:b});c.show()},complete:function(){a.removeLoader()}}))},doEditBodyPart:function(a){var b=$(a.currentTarget),c=b.data("id")||b.data("cid"),d=this.options.fileModel,e=this.model,f=this.options.colBodyParts,g=this.options.colBodyParts.get(c),h=new App.Collections.Documents,i=new App.Collections.MedicalsBodyParts;i.sortBy="doctorName",h.reset(g.get("documents")),i.reset(g.get("medical2bodyParts")),this._formBodyPart({colBodyParts:f,modelEventCase:e,colMedicalsByBodyParts:i,fileModel:d,model:g,colDocuments:h,isEventTypeChange:this.model.get("caseID")?!1:!0})},_formBodyPart:function(a){var b=new App.Views.Files.EventTabs.EventWcCaseBodyPart(a),c=new App.Helpers.Modal({view:b,sizeModal:"modal-lg"});c.show()},doAddBodyPart:function(){var a=new App.Models.BodyPart,b=this.options.fileModel,c=this.model,d=this.options.colBodyParts,e=new App.Collections.Documents,f=new App.Collections.MedicalsBodyParts;if(f.sortBy="doctorName",this.model.isNew()){var g=$(".eventForm").data("view"),h=g.$el;h&&(Uit.SessionFlash.set("defaultTabActive",{tab:"#event-form-tab3",className:this.className}),h.find("#save-event").trigger("click"))}else this._formBodyPart({colBodyParts:d,modelEventCase:c,colMedicalsByBodyParts:f,fileModel:b,model:a,colDocuments:e,isEventTypeChange:this.model.get("caseID")?!1:!0})},prepopulateData:function(){var a=this,b=this.$el;if(_.isUndefined(this.options.model.get("venueID")))this.venueModel=new App.Models.Venue;else{var c={venueID:this.options.model.get("venueID"),venueName:this.options.model.get("venueName"),venueAbbrev:this.options.model.get("venueAbbrev"),venueAddress:this.options.model.get("venueAddress"),venueAddress2:this.options.model.get("venueAddress2"),venueCity:this.options.model.get("venueCity"),venueCounty:this.options.model.get("venueCounty"),venueState:this.options.model.get("venueState"),venueZipCode:this.options.model.get("venueZipCode"),venueType:this.options.model.get("venueType"),venuePhone:this.options.model.get("venuePhone")};this.venueModel=new App.Models.Venue(c),this.venueTypeaheadID=c.venueID,$(".typeahead.venue_typeahead").data("datum",c)}this.isLeadCase=this.options.model.get("leadCase"),_.each(this.collection.models,function(c){if(a.options.model.get("caseID")!==c.get("caseID")){var d='<option value="'+c.get("caseID")+'">'+c.get("ADJid")+"</option>";b.find("[name=selectLeadCases]").append(d)}}),0===this.options.colBodyParts.length&&!_.isUndefined(this.model.get("bodyParts"))&&this.model.get("bodyParts").length>0&&this.options.colBodyParts.reset(this.model.get("bodyParts"))}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.EventTabs)&&(App.Views.Files.EventTabs={}),App.Views.Files.EventTabs.EventWcDepoFirst=App.Helpers.View.extend({template:App.Templates.filesEventTabsEventWcDepoFirst,className:"eventWcDepoFirst",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{},afterRender:function(){var a,b=this;this.options.loadAAFirm&&this.options.fileModel.get("AAfirmID")&&(a=new App.Models.Firm({firmID:this.options.fileModel.get("AAfirmID")}),a.fetch({success:function(a){b.model.set("depoLocation",a.get("firmName")),b.model.set("depoAddress",a.get("mailingAddress")),b.model.set("depoCity",a.get("mailingCity")),b.model.set("depoState",a.get("mailingState")),b.model.set("depoZip",a.get("mailingZip")),b.model.set("depoPhone",a.get("officePhone"))}}))}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.EventTabs)&&(App.Views.Files.EventTabs={}),App.Views.Files.EventTabs.EventWcDepoSecond=App.Helpers.View.extend({template:App.Templates.filesEventTabsEventWcDepoSecond,className:"eventWcDepoSecond",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.EventTabs)&&(App.Views.Files.EventTabs={}),App.Views.Files.EventTabs.EventWcDepoThird=App.Helpers.View.extend({template:App.Templates.filesEventTabsEventWcDepoThird,className:"eventWcDepoThird",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{},afterRender:function(){App.Helpers.initTypeahead({view:this,elemClass:".typeahead.signingAttorney_typeahead",urlBuild:{url:"api/typeahead_controller/search_defense_attorney"},processFunction:$.proxy(this.processDATypeahead,this),unmatchedProcessFunction:$.proxy(this.processUnmatchedDATypeahead,this)}),this.prepopulateData()},processUnmatchedDATypeahead:function(){this.options.model.set("signingAttorneyID",void 0),$(".typeahead.signingAttorney_typeahead").typeahead("val",""),this.dATypeaheadID=void 0},processDATypeahead:function(a){this.dATypeaheadID=a.id,this.options.model.set("signingAttorneyID",this.dATypeaheadID)},prepopulateData:function(){var a=this.$el;if(this.model.isNew()){var b=_.find(this.options.fileModel.get("defenseAttorneys"),function(a){return 1===a.primaryDA}),c={id:b.uAttId,first:b.first,last:b.last,middle:b.middle,email:b.email};a.find(".typeahead.signingAttorney_typeahead").data("datum",c);var d=b.last+", "+b.first+" "+b.middle+" "+b.email;$(".typeahead.signingAttorney_typeahead").typeahead("val",d),this.options.model.set("depoSigningAttorneyTypeahead",d),this.options.model.set("signingAttorneyID",b.uAttId),this.dATypeaheadID=b.uAttId}}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.EventTabs)&&(App.Views.Files.EventTabs={}),App.Views.Files.EventTabs.EventWcHearingFirst=App.Helpers.View.extend({template:App.Templates.filesEventTabsEventWcHearingFirst,className:"eventWcHearingFirst",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{"click #venue_form_edit":"editVenueForm","click #venue_form_new":"newVenueForm"},afterRender:function(){var a=this.options.fileModel,b="";b=(a.isWC()||a.isFileClosed())&&_.contains([192,193],this.model.get("eventTypeID"))===!1?"search_venues_only_in_file":"search_venues",App.Helpers.initTypeahead({view:this,elemClass:".typeahead.venue_typeahead",urlBuild:{url:"api/typeahead_controller/"+b,resource:this.model.get("fileNumber")},processFunction:$.proxy(this.processVenueTypeahead,this),unmatchedProcessFunction:$.proxy(this.processUnmatchedVenueTypeahead,this)}),App.Helpers.initTypeahead({view:this,elemClass:".typeahead.signingAttorney_typeahead",urlBuild:{url:"api/typeahead_controller/search_defense_attorney"},processFunction:$.proxy(this.processDATypeahead,this),unmatchedProcessFunction:$.proxy(this.processUnmatchedDATypeahead,this)}),this.prepopulateData()},processUnmatchedVenueTypeahead:function(){this.options.model.set("venueID",void 0),$(".typeahead.venue_typeahead").typeahead("val",""),this.venueTypeaheadID=void 0},processVenueTypeahead:function(a){this.venueTypeaheadID=a.id,this.options.model.set("venueID",this.venueTypeaheadID)},processUnmatchedDATypeahead:function(){this.options.model.set("signingAttorneyID",void 0),$(".typeahead.signingAttorney_typeahead").typeahead("val",""),this.dATypeaheadID=void 0},processDATypeahead:function(a){this.dATypeaheadID=a.id,this.options.model.set("signingAttorneyID",this.dATypeaheadID)},newVenueForm:function(){var a=new App.Models.Venue,b=new App.Views.Files.FileTabs.Injuries.VenueForm({model:a,modelEvents:this.options.model,eventData:this}),c=new App.Helpers.Modal({view:b});c.show()},editVenueForm:function(){var a=this;if(!_.isUndefined(this.venueTypeaheadID)){var b=new App.Models.Venue({venueID:this.venueTypeaheadID});this.showLoader(),b.fetch({success:function(){var c=new App.Views.Files.FileTabs.Injuries.VenueForm({model:b,modelEvents:a.options.model,eventData:a}),d=new App.Helpers.Modal({view:c});d.show()},complete:function(){a.removeLoader()}})}},prepopulateData:function(){var a=this.$el;if(_.isUndefined(this.options.model.get("venueID"))){this.venueModel=new App.Models.Venue;var b=_.find(this.options.fileModel.get("cases"),function(a){return 1===a.leadCase});if(!_.isUndefined(b)){var c=b.venueName+", "+b.venueAbbrev;$(".typeahead.venue_typeahead").data("datum",b),$(".typeahead.venue_typeahead").typeahead("val",c),this.options.model.set("venueNameTypeahead",c),this.options.model.set("venueID",b.venueID),this.venueTypeaheadID=b.venueID}}else{var d={venueID:this.options.model.get("venueID"),venueName:this.options.model.get("venueName"),typeaheadResult:this.options.model.get("venueNameTypeahead")};$(".typeahead.venue_typeahead").data("datum",d),this.venueTypeaheadID=d.venueID}if(this.model.isNew()){var e=_.find(this.options.fileModel.get("defenseAttorneys"),function(a){return 1===a.primaryDA}),f={id:e.uAttId,first:e.first,last:e.last,middle:e.middle,email:e.email};a.find(".typeahead.signingAttorney_typeahead").data("datum",f);var g=e.last+", "+e.first+" "+e.middle+" "+e.email;$(".typeahead.signingAttorney_typeahead").typeahead("val",g),this.options.model.set("hearingSigningAttorneyTypeahead",g),this.options.model.set("signingAttorneyID",e.uAttId),this.dATypeaheadID=e.uAttId}}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.EventTabs)&&(App.Views.Files.EventTabs={}),App.Views.Files.EventTabs.EventWcLienFifth=App.Helpers.View.extend({template:App.Templates.filesEventTabsEventWcLienFifth,className:"eventWcLienFifth",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.liendObjections=new App.Collections.liendObjections,b.model.isNew()||(b.liendObjections.add(b.model.get("liendObjectionsInfo")),b.liendObjections.sortBy="objectionDate",b.liendObjections.sortOrder="DESC",b.liendObjections.sort())},events:{"click #add-lien-objection":"newLienObjection","click .lien-objection-edit":"editLienObjection","click .lien-objection-delete":"deleteLienObjection"},newLienObjection:function(){if(this.model.isNew()||this.model.get("eventTypeChange")){var a=$(".eventForm").data("view"),b=a.$el;b&&(Uit.SessionFlash.set("defaultTabActive",{tab:"#event-form-tab7",className:this.className}),b.find("#save-event").trigger("click"))}else{var c=new App.Models.wcLienObjection,d=new App.Views.Files.Liens.LienObjectionForm({originModel:this.model,collection:this.liendObjections,fileModel:this.options.fileModel,model:c}),e=new App.Helpers.Modal({view:d});e.show()}},editLienObjection:function(a){var b=$(a.currentTarget),c=this.liendObjections.get(b.data("model")),d=new App.Views.Files.Liens.LienObjectionForm({originModel:this.model,collection:this.liendObjections,fileModel:this.options.fileModel,model:c}),e=new App.Helpers.Modal({view:d});e.show()},deleteLienObjection:function(a){var b=$(a.currentTarget),c="Are you sure you want to delete \n\n the Lien Objection "+b.closest("tr").find("td:eq(1)").text()+"?",d=new App.Views.Shared.AlertView({processFunction:"processDeleteLienObjection",viewClass:".eventWcLienFifth",params:{elem:b},msg:c,title:"Delete Lien Objection"}),e=new App.Helpers.Modal({view:d});e.show()},processDeleteLienObjection:function(a){var b=this,c=a.elem.data("model"),d=b.liendObjections.get({cid:c});d.destroy({success:function(){var a=b.liendObjections.clone();b.liendObjections.reset(),b.liendObjections.add(a.toJSON()),b.liendObjections.sortBy="objectionDate",b.liendObjections.sortOrder="DESC",b.liendObjections.sort()}})},getDocumentUrl:function(){var a=new App.Models.Document;return a.set({documentID:this.row.get("documentID"),documentName:this.row.get("documentName")}),a.getUrl()}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.EventTabs)&&(App.Views.Files.EventTabs={}),App.Views.Files.EventTabs.EventWcLienFirst=App.Helpers.View.extend({template:App.Templates.filesEventTabsEventWcLienFirst,className:"eventWcLienFirst",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{"click #lien_claimant_form_edit":"editlienClaimantForm","click #lien_claimant_form_new":"newlienClaimantForm"},afterRender:function(){App.Helpers.addMask('[name="contactOfficePhone"]',"(999) 999-9999"),App.Helpers.addMask('[name="contactCellPhone"]',"(999) 999-9999"),App.Helpers.addMask('[name="claimantFax"]',"(999) 999-9999"),App.Helpers.addMask('[name="claimantOfficePhone"]',"(999) 999-9999"),App.Helpers.addMask('[name="tollFreePhone"]',"(999) 999-9999"),App.Helpers.initTypeahead({view:this,elemClass:".typeahead.lien_claimant_typeahead",urlBuild:{url:"api/typeahead_controller/search_lien_claimant"},processFunction:$.proxy(this.processLienClaimantTypeahead,this),unmatchedProcessFunction:$.proxy(this.processUnmatchedLienClaimantTypeahead,this)}),this.prepopulateData()},processUnmatchedLienClaimantTypeahead:function(){this.options.model.set("lienClaimantID",void 0),this.$el.find(".typeahead.lien_claimant_typeahead").typeahead("val",""),this.LienClaimantTypeaheadID=void 0},processLienClaimantTypeahead:function(a){this.LienClaimantTypeaheadID=a.id,this.lienClaimantModel.clear(),this.lienClaimantModel.set(a),$(".typeahead.payee_typeahead").typeahead("val",a.ClaimantName),this.options.model.set("lienClaimantID",this.LienClaimantTypeaheadID)},newlienClaimantForm:function(){var a=new App.Models.wcLienClaimant,b=new App.Views.Files.EventTabs.LienWcClaimantForm({model:a,modelEvents:this.options.model,eventsData:this}),c=new App.Helpers.Modal({view:b});c.show()},editlienClaimantForm:function(){var a=this;_.isUndefined(this.LienClaimantTypeaheadID)||(this.lienClaimantModel=new App.Models.wcLienClaimant({ClaimantID:this.LienClaimantTypeaheadID}),this.lienClaimantModel.fetch({success:function(){var b=new App.Views.Files.EventTabs.LienWcClaimantForm({model:a.lienClaimantModel,modelEvents:a.options.model,eventsData:a}),c=new App.Helpers.Modal({view:b});c.show()}}))},prepopulateData:function(){var a={};if(_.isUndefined(this.options.model.get("ClaimantID")))this.lienClaimantModel=new App.Models.wcLienClaimant;else{var b={ClaimantID:this.options.model.get("ClaimantID"),ClaimantName:this.options.model.get("ClaimantName"),contactFirstName:this.options.model.get("contactFirstName"),contactMiddleName:this.options.model.get("contactMiddleName"),contactLastName:this.options.model.get("contactLastName"),contactOfficePhone:this.options.model.get("contactOfficePhone"),contactEmail:this.options.model.get("contactEmail"),tollFreePhone:this.options.model.get("tollFreePhone"),claimantFax:this.options.model.get("claimantFax"),
contactCellPhone:this.options.model.get("contactCellPhone"),claimantOfficePhone:this.options.model.get("claimantOfficePhone"),taxID:this.options.model.get("taxID"),physicalAddress:this.options.model.get("physicalAddress"),physicalCity:this.options.model.get("physicalCity"),physicalState:this.options.model.get("physicalState"),physicalZip:this.options.model.get("physicalZip"),mailingAddress:this.options.model.get("mailingAddress"),mailingCity:this.options.model.get("mailingCity"),mailingState:this.options.model.get("mailingState"),mailingZip:this.options.model.get("mailingZip")};this.lienClaimantModel=new App.Models.wcLienClaimant(b),this.LienClaimantTypeaheadID=this.lienClaimantModel.get("ClaimantID"),a=this.lienClaimantModel.toJSON(),$(".typeahead.lien_claimant_typeahead").data("datum",a)}}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.EventTabs)&&(App.Views.Files.EventTabs={}),App.Views.Files.EventTabs.EventWcLienForth=App.Helpers.View.extend({template:App.Templates.filesEventTabsEventWcLienForth,className:"eventWcLienForth",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.liendOffers=new App.Collections.LienOffers,this.liendDemands=new App.Collections.LienDemands,!_.isUndefined(b.model.get("lienOffersInfo"))&&b.model.get("lienOffersInfo").length>0&&(b.liendOffers.add(b.model.get("lienOffersInfo")),b.sortCollections("liendOffers","offerDate","DESC")),!_.isUndefined(b.model.get("lienDemandsInfo"))&&b.model.get("lienDemandsInfo").length>0&&(b.liendDemands.add(b.model.get("lienDemandsInfo")),b.sortCollections("liendDemands","demandDate","DESC"))},events:{"click #add-lien-offer":"newLienOffer","click .lien-offer-edit":"editLienOffer","click .lien-offer-delete":"deleteLienOffer","click #add-lien-demand":"newLienDemand","click .lien-demand-edit":"editLienDemand","click .lien-demand-delete":"deleteLienDemand"},sortCollections:function(a,b,c){this[a].sortBy=b,this[a].sortOrder=c,this[a].sort()},newLienOffer:function(){if(this.model.isNew()||this.model.get("eventTypeChange")){var a=$(".eventForm").data("view"),b=a.$el;b&&(Uit.SessionFlash.set("defaultTabActive",{tab:"#event-form-tab6",className:this.className,option:"#add-lien-offer"}),b.find("#save-event").trigger("click"))}else{var c=new App.Models.wcLienOffer,d=new App.Views.Files.Liens.LienOfferForm({originModel:this.model,collection:this.liendOffers,model:c}),e=new App.Helpers.Modal({view:d});e.show()}},editLienOffer:function(a){var b=$(a.currentTarget),c=this.liendOffers.get(b.data("model")),d=new App.Views.Files.Liens.LienOfferForm({originModel:this.model,collection:this.liendOffers,model:c}),e=new App.Helpers.Modal({view:d});e.show()},deleteLienOffer:function(a){var b=$(a.currentTarget),c="Are you sure you want to delete \n\n the Lien Offer "+b.closest("tr").find("td:eq(1)").text()+"?",d=new App.Views.Shared.AlertView({processFunction:"processDeleteLienOffer",viewClass:".eventWcLienForth",params:{elem:b},msg:c,title:"Delete Lien Offer"}),e=new App.Helpers.Modal({view:d});e.show()},processDeleteLienOffer:function(a){var b=this,c=a.elem.data("model"),d=b.liendOffers.get({cid:c});d.destroy({success:function(){var a=b.liendOffers.clone();b.liendOffers.reset(),b.liendOffers.add(a.toJSON()),b.sortCollections("liendOffers","offerDate","DESC")}})},newLienDemand:function(){if(this.model.isNew()||this.model.get("eventTypeChange")){var a=$(".eventForm").data("view"),b=a.$el;b&&(Uit.SessionFlash.set("defaultTabActive",{tab:"#event-form-tab6",className:this.className,option:"#add-lien-demand"}),b.find("#save-event").trigger("click"))}else{var c=new App.Models.wcLienDemand,d=new App.Views.Files.Liens.LienDemandForm({originModel:this.model,collection:this.liendDemands,model:c}),e=new App.Helpers.Modal({view:d});e.show()}},editLienDemand:function(a){var b=$(a.currentTarget),c=this.liendDemands.get(b.data("model")),d=new App.Views.Files.Liens.LienDemandForm({originModel:this.model,collection:this.liendDemands,model:c}),e=new App.Helpers.Modal({view:d});e.show()},deleteLienDemand:function(a){var b=$(a.currentTarget),c="Are you sure you want to delete \n\n the Lien Demand "+b.closest("tr").find("td:eq(1)").text()+"?",d=new App.Views.Shared.AlertView({processFunction:"processDeleteLienDemand",viewClass:".eventWcLienForth",params:{elem:b},msg:c,title:"Delete Lien Demand"}),e=new App.Helpers.Modal({view:d});e.show()},processDeleteLienDemand:function(a){var b=this,c=a.elem.data("model"),d=b.liendDemands.get({cid:c});d.destroy({success:function(){var a=b.liendDemands.clone();b.liendDemands.reset(),b.liendDemands.add(a.toJSON()),b.sortCollections("liendDemands","demandDate","DESC")}})}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.EventTabs)&&(App.Views.Files.EventTabs={}),App.Views.Files.EventTabs.EventWcLienSecond=App.Helpers.View.extend({template:App.Templates.filesEventTabsEventWcLienSecond,className:"eventWcLienSecond",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.lienReps=new App.Collections.LienRes,!_.isUndefined(b.model.get("lienRepInfo"))&&b.model.get("lienRepInfo").length>0&&(b.lienReps.add(b.model.get("lienRepInfo")),b.lienReps.sortBy="lienRepLastName",b.lienReps.sort())},events:{"click .mailToLien":"mailToLien","click #add-lien-rep":"newLienRep","click .edit-lien-rep":"editLienRep","click .delete-lien-rep":"deleteLienRep"},mailToLien:function(a){a.preventDefault(),a.stopPropagation();var b=$(a.currentTarget);document.location.href="mailto:"+b.attr("href")},afterRender:function(){App.Helpers.initTypeahead({view:this,elemClass:".typeahead.lien_rep_typeahead",urlBuild:{url:"api/typeahead_controller/search_lien_rep"},processFunction:$.proxy(this.processLienRepTypeahead,this),unmatchedProcessFunction:$.proxy(this.processUnmatchedLienRepTypeahead,this)})},newLienRep:function(){if(this.model.isNew()||this.model.get("eventTypeChange")){var a=$(".eventForm").data("view"),b=a.$el;b&&(Uit.SessionFlash.set("defaultTabActive",{tab:"#event-form-tab4",className:this.className,option:"#add-lien-rep"}),b.find("#save-event").trigger("click"))}else{var c=new App.Models.wcLienRep,d=new App.Views.Files.Liens.LienRepForm({originModel:this.model,collection:this.lienReps,lienRepModel:c,newModel:!0,modelEvents:this.options.model}),e=new App.Helpers.Modal({view:d,sizeModal:"modal-lg"});e.show()}},editLienRep:function(a){var b=$(a.currentTarget),c=this.lienReps.get(b.data("model")),d=new App.Views.Files.Liens.LienRepForm({originModel:this.model,collection:this.lienReps,lienRepModel:c,newModel:!1,modelEvents:this.options.model}),e=new App.Helpers.Modal({view:d,sizeModal:"modal-lg"});e.show()},processUnmatchedLienRepTypeahead:function(){$(".typeahead.lien_rep_typeahead").typeahead("val","")},processLienRepTypeahead:function(a){var b=new App.Models.wcLienRep;if(b.set(a),this.model.isNew()||this.model.get("eventTypeChange")){var c=$(".eventForm").data("view"),d=c.$el;d&&(Uit.SessionFlash.set("defaultTabActive",{tab:"#event-form-tab4",className:this.className,option:b}),d.find("#save-event").trigger("click"))}else this._checkLienRep(b)||(this.saveLien2LienRep(b),this.lienReps.add(b));$(".typeahead.lien_rep_typeahead").typeahead("val","")},saveLien2LienRep:function(a){var b=new App.Models.Lien2LienRep;b.set("lienID",this.model.get("childID")),b.set("lienRepID",a.get("lienRepID")),b.save({},{success:function(){var a=new App.Helpers.Toast({message:"Lien Rep Added Correctly",classType:"success",fadeOut:3e3});a.render()}})},deleteLienRep:function(a){var b=$(a.currentTarget),c="Are you sure you want to remove the relation between this Lien and \n\n the Lien Rep "+b.closest("tr").find("td:first").text()+"?",d=new App.Views.Shared.AlertView({processFunction:"processDeleteLienRep",viewClass:".eventWcLienSecond",params:{elem:b},msg:c,title:"Delete Lien Rep"}),e=new App.Helpers.Modal({view:d});e.show()},processDeleteLienRep:function(a){var b=this,c=a.elem.data("model"),d=b.lienReps.get({cid:c});d.set("lienID",this.model.get("lienID")),d.destroy({success:function(){var a=b.lienReps.clone();b.lienReps.reset(),b.lienReps.add(a.toJSON()),b.lienReps.sortBy="lienRepLastName",b.lienReps.sort(),b.model.set("lienRepInfo",b.lienReps.toJSON())}})},_checkLienRep:function(a){return this.lienReps.findWhere({lienRepID:a.get("lienRepID")})?!0:!1}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.EventTabs)&&(App.Views.Files.EventTabs={}),App.Views.Files.EventTabs.EventWcLienSixth=App.Helpers.View.extend({template:App.Templates.filesEventTabsEventWcLienSixth,className:"eventWcLienSixth",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{"click #payee_form_edit":"editPayeeForm","click #payee_form_new":"newPayeeForm"},afterRender:function(){App.Helpers.initTypeahead({view:this,elemClass:".typeahead.payee_typeahead",urlBuild:{url:"api/typeahead_controller/search_payee"},processFunction:$.proxy(this.processPayeeTypeahead,this),unmatchedProcessFunction:$.proxy(this.processUnmatchedPayeeTypeahead,this)}),this.prepopulateData()},processUnmatchedPayeeTypeahead:function(){this.options.model.set("payeeID",void 0),$(".typeahead.payee_typeahead").typeahead("val",""),this.payeeTypeaheadID=void 0},processPayeeTypeahead:function(a){this.payeeTypeaheadID=a.id,this.options.model.set("payeeID",this.payeeTypeaheadID)},newPayeeForm:function(){var a=new App.Models.Payee,b=new App.Views.Files.EventTabs.PayeesForm({model:a,modelEvents:this.options.model,eventsData:this}),c=new App.Helpers.Modal({view:b});c.show()},editPayeeForm:function(){var a=this;_.isUndefined(this.payeeTypeaheadID)||_.isNull(this.payeeTypeaheadID)||(this.payeeModel=new App.Models.Payee({payeeID:this.payeeTypeaheadID}),this.payeeModel.fetch({success:function(){var b=new App.Views.Files.EventTabs.PayeesForm({model:a.payeeModel,modelEvents:a.options.model,eventsData:a}),c=new App.Helpers.Modal({view:b});c.show()}}))},prepopulateData:function(){var a={};if(_.isUndefined(this.options.model.get("payeeID")))this.payeeModel=new App.Models.Payee;else{var b={payeeID:this.options.model.get("payeeID"),payeeName:this.options.model.get("payeeName"),payeeTaxID:this.options.model.get("payeeTaxID"),physicalAddress:this.options.model.get("payeesphysicalAddress"),physicalCity:this.options.model.get("payeesphysicalCity"),physicalState:this.options.model.get("payeesphysicalState"),physicalZip:this.options.model.get("payeesphysicalZip"),mailingAddress:this.options.model.get("payeesmailingAddress"),mailingCity:this.options.model.get("payeesmailingCity"),mailingState:this.options.model.get("payeesmailingState"),mailingZip:this.options.model.get("payeesmailingZip")};this.payeeModel=new App.Models.Payee(b),this.payeeTypeaheadID=this.payeeModel.get("payeeID"),a=this.payeeModel.toJSON(),$(".typeahead.payee_typeahead").data("datum",a)}}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.EventTabs)&&(App.Views.Files.EventTabs={}),App.Views.Files.EventTabs.EventWcLienThird=App.Helpers.View.extend({template:App.Templates.filesEventTabsEventWcLienThird,className:"eventWcLienThird",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.liendBills=new App.Collections.LienBills,!_.isUndefined(b.model.get("lienBillsInfo"))&&b.model.get("lienBillsInfo").length>0&&(b.liendBills.add(b.model.get("lienBillsInfo")),b.liendBills.sortBy="name",b.liendBills.sort(),b.calculateLienBillsTotal())},events:{"click #add-lien-bill":"add_lien_bill","click .lien-bill-edit":"edit_lien_bill","click .lien-bill-delete":"delete_lien_bill"},afterRender:function(){this.calculateLienBillsTotal()},add_lien_bill:function(){if(this.model.isNew()||this.model.get("eventTypeChange")){var a=$(".eventForm").data("view"),b=a.$el;b&&(Uit.SessionFlash.set("defaultTabActive",{tab:"#event-form-tab5",className:this.className}),b.find("#save-event").trigger("click"))}else{var c=new App.Models.wcLienBill,d=new App.Views.Files.Liens.LienBillForm({model:c,collection:this.liendBills,fileModel:this.options.fileModel,originModel:this.model}),e=new App.Helpers.Modal({view:d});e.show()}},edit_lien_bill:function(a){var b=$(a.currentTarget),c=this.liendBills.get(b.data("model")),d=new App.Views.Files.Liens.LienBillForm({originModel:this.model,collection:this.liendBills,fileModel:this.options.fileModel,model:c}),e=new App.Helpers.Modal({view:d});e.show()},calculateLienBillsTotal:function(){var a=this.liendBills.reduce(function(a,b){return parseFloat(a)+parseFloat(_.isUndefined(b.get("amount"))||_.isNull(b.get("amount"))?0:b.get("amount"))},0);a=_.isNaN(a)?0:parseFloat(a).toFixed(2),this.$el.find("#total-lien").html(App.Helpers.CurrencyFormat(parseFloat(a)))},delete_lien_bill:function(a){var b=$(a.currentTarget),c="Are you sure you want to delete \n\n the Lien Bill "+b.closest("tr").find("td:eq(0)").text()+"?",d=new App.Views.Shared.AlertView({processFunction:"process_delete_lien_bill",viewClass:".eventWcLienThird",params:{elem:b},msg:c,title:"Delete Lien Bill"}),e=new App.Helpers.Modal({view:d});e.show()},process_delete_lien_bill:function(a){var b=this,c=a.elem.data("model"),d=b.liendBills.get({cid:c});d.destroy({success:function(){var a=b.liendBills.clone();b.liendBills.reset(),b.liendBills.add(a.toJSON()),b.liendBills.sortBy="name",b.liendBills.sort(),b.calculateLienBillsTotal()}})},_getDocumentUrl:function(a){var b=new App.Models.Document;return b.set({documentID:this.row.get("bill"===a?"billDocumentID":"OMFSdocumentID"),documentName:this.row.get("bill"===a?"billdocumentName":"OMFSdocumentName")}),b.getUrl()},getBillDocumentUrl:function(){return this._getDocumentUrl("bill")},getOMFSDocumentUrl:function(){return this._getDocumentUrl("OMFS")}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.EventTabs)&&(App.Views.Files.EventTabs={}),App.Views.Files.EventTabs.EventWcMedicalFirst=App.Helpers.View.extend({template:App.Templates.filesEventTabsEventWcMedicalFirst,className:"eventWcMedicalFirst",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{"click #doctor_facility_form_edit":"editDoctorFacility","click #doctor_facility_form_new":"newDoctorFacility","click #doctor_form_edit":"editDoctor","click #doctor_form_new":"newDoctor","focusout .doctor_typeahead":"doctorTypeaheadChange","focusout .doctor_facility_typeahead":"doctorFacilityTypeaheadChange"},doctorFacilityTypeaheadChange:function(a){var b=$(a.currentTarget),c=b.val();_.isEmpty(c)&&(this.options.model.set("doctorFacilityID",void 0),this.doctorFacilitiesTypeaheadID=void 0,this.initTypeaheadDoctors("doctor"))},doctorTypeaheadChange:function(a){var b=$(a.currentTarget),c=b.val();_.isEmpty(c)&&(this.options.model.set("doctorID",void 0),this.doctorTypeaheadID=void 0,this.initTypeaheadDoctors("facility"))},afterRender:function(){App.Helpers.initTypeahead({view:this,elemClass:".typeahead.select_bodyParts",urlBuild:{url:"api/typeahead_controller/search_body_parts",resource:this.options.fileModel.get("fileNumber")},processFunction:$.proxy(this.processFunctionSelectBodyParts,this)}),this.prepopulateData(),this.initTypeaheadDoctors("doctor"),this.initTypeaheadDoctors("facility")},processFunctionSelectBodyParts:function(a){a.bodyPartID=a.id;var b=new App.Models.BodyPart(a);b.set("isPnSRecord",!1),this.options.colMedicalToBodyPartsADj.add(b),this.$el.find(".typeahead.select_bodyParts").typeahead("val","")},newDoctorFacility:function(){var a=new App.Models.DoctorFacilities,b=new App.Views.Files.EventTabs.DoctorFacilitiesForm({model:a,doctorFacilitiesTypeaheadID:this.doctorFacilitiesTypeaheadID,doctorTypeaheadID:this.doctorTypeaheadID,isDoctorView:!1}),c=new App.Helpers.Modal({view:b,sizeModal:"modal-lg"});c.show()},editDoctorFacility:function(){var a=this;_.isUndefined(this.doctorFacilitiesTypeaheadID)||(this.doctorFacilityModel=new App.Models.DoctorFacilities({facilityID:this.doctorFacilitiesTypeaheadID}),this.doctorFacilityModel.fetch({success:function(){var b=new App.Views.Files.EventTabs.DoctorFacilitiesForm({model:a.doctorFacilityModel,doctorFacilitiesTypeaheadID:a.doctorFacilitiesTypeaheadID,doctorTypeaheadID:a.doctorTypeaheadID,isDoctorView:!1}),c=new App.Helpers.Modal({view:b,sizeModal:"modal-lg"});c.show()}}))},newDoctor:function(){var a=new App.Models.Doctors,b=new App.Views.Files.EventTabs.DoctorsForm({model:a,modelEvents:this.options.model,doctorFacilitiesTypeaheadID:this.doctorFacilitiesTypeaheadID,eventsData:this}),c=new App.Helpers.Modal({view:b,sizeModal:"modal-lg"});c.show()},editDoctor:function(){var a=this;_.isUndefined(this.doctorTypeaheadID)||(this.doctorModel=new App.Models.Doctors({doctorID:this.doctorTypeaheadID}),this.doctorModel.fetch({success:function(){var b=new App.Views.Files.EventTabs.DoctorsForm({model:a.doctorModel,modelEvents:a.options.model,doctorFacilitiesTypeaheadID:a.doctorFacilitiesTypeaheadID,eventsData:a}),c=new App.Helpers.Modal({view:b,sizeModal:"modal-lg"});c.show()}}))},resetDoctorFacility:function(){var a=$(".eventWcMedicalFirst").data("view"),b=a.$el;a.doctorFacilitiesTypeaheadID=void 0,b.find(".typeahead.doctor_facility_typeahead").typeahead("val","")},resetDoctor:function(){this.doctorTypeaheadID=void 0,this.$el.find(".typeahead.doctor_typeahead").typeahead("val","")},processDoctorFacilityTypeahead:function(a){this.doctorFacilitiesTypeaheadID=a.id,this.options.model.set("doctorFacilityID",a.id),this.initTypeaheadDoctors("doctor")},processDoctorTypeahead:function(a){this.doctorTypeaheadID=a.id,this.options.model.set("doctorID",this.doctorTypeaheadID),this.initTypeaheadDoctors("facility")},initTypeaheadDoctors:function(a){var b="api/typeahead_controller/search_doctor",c=".typeahead",d=void 0;if("doctor"===a){var e=_.isUndefined(this.doctorFacilitiesTypeaheadID)?0:this.doctorFacilitiesTypeaheadID;c+=".doctor_typeahead",d=$.proxy(this.processDoctorTypeahead,this),b+="s/"+e}else if("facility"===a){var f=_.isUndefined(this.doctorTypeaheadID)?0:this.doctorTypeaheadID;c+=".doctor_facility_typeahead",d=$.proxy(this.processDoctorFacilityTypeahead,this),b+="_facilities/"+f}App.Helpers.initTypeahead({view:this,elemClass:c,urlBuild:b,processFunction:d})},prepopulateData:function(){var a=this,b={};if(!_.isUndefined(this.options.model.get("doctorID"))){var c={doctorID:this.options.model.get("doctorID"),doctorFirstName:this.options.model.get("doctorFirstName"),doctorMiddleName:this.options.model.get("doctorMiddleName"),doctorLastName:this.options.model.get("doctorLastName"),doctorEmail:this.options.model.get("doctorEmail"),doctorDirectPhone:this.options.model.get("doctorDirectPhone"),doctorCellPhone:this.options.model.get("doctorCellPhone"),doctorPhoneExtension:this.options.model.get("doctorPhoneExtension"),doctorSpecialty:this.options.model.get("doctorSpecialty"),doctorRating:this.options.model.get("doctorRating"),doctorNotes:this.options.model.get("doctorNotes")};this.doctorModel=new App.Models.Doctors(c),a.doctorTypeaheadID=this.doctorModel.get("doctorID"),b={id:this.options.model.get("doctorID"),first:this.options.model.get("doctorFirstName"),last:this.options.model.get("doctorLastName"),middle:this.options.model.get("doctorMiddleName"),email:this.options.model.get("doctorEmail"),typeaheadResult:App.Helpers.TypeaheadFormatter(this.options.model)};var d=$(".typeahead.doctor_typeahead");d.typeahead("val",b.typeaheadResult),d.data("datum",b);var e={facilityID:this.options.model.get("facilityID"),facilityName:this.options.model.get("facilityName"),officePhone:this.options.model.get("officePhone"),faxNumber:this.options.model.get("faxNumber"),physicalAddress:this.options.model.get("physicalAddress"),physicalCity:this.options.model.get("physicalCity"),physicalState:this.options.model.get("physicalState"),physicalZip:this.options.model.get("physicalZip"),mailingAddress:this.options.model.get("mailingAddress"),mailingCity:this.options.model.get("mailingCity"),mailingState:this.options.model.get("mailingState"),mailingZip:this.options.model.get("mailingZip"),facilityNotes:this.options.model.get("facilityNotes")};this.doctorFacilityModel=new App.Models.DoctorFacilities(e),this.doctorFacilitiesTypeaheadID=this.doctorFacilityModel.get("facilityID"),b={id:this.options.model.get("facilityID"),facilityName:this.options.model.get("facilityName"),typeaheadResult:this.options.model.get("facilityName")};var f=$(".typeahead.doctor_facility_typeahead");f.typeahead("val",b.typeaheadResult),f.data("datum",b),0===this.options.colMedicalToBodyPartsADj.length&&!_.isUndefined(this.model.get("medical2bodyParts"))&&this.model.get("medical2bodyParts").length>0&&this.options.colMedicalToBodyPartsADj.reset(this.model.get("medical2bodyParts"))}},removeBodyPart:function(){this.options.colMedicalToBodyPartsADj.remove(this.bp)}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.EventTabs)&&(App.Views.Files.EventTabs={}),App.Views.Files.EventTabs.EventWcSubpoenasFirst=App.Helpers.View.extend({template:App.Templates.filesEventTabsEventWcSubpoenasFirst,className:"eventWcSubpoenasFirst",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.EventTabs)&&(App.Views.Files.EventTabs={}),App.Views.Files.EventTabs.LienWcClaimantForm=App.Helpers.View.extend({template:App.Templates.filesEventTabsLienWcClaimantForm,className:"lienWcClaimantForm",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.listenTo(this.model,"request",function(){b.showLoader(".modal-body")}),this.listenTo(this.model,"sync error",function(){b.removeLoader(".modal-body")}),this.lienClaimantModel=this.model.clone()},events:{"click #copy-to-address":"copy_to_address","click #save-lien-claimant":"save_lien_claimant"},afterRender:function(){App.Helpers.addMask('[name="contactOfficePhone"]',"(999) 999-9999"),App.Helpers.addMask('[name="contactCellPhone"]',"(999) 999-9999"),App.Helpers.addMask('[name="claimantFax"]',"(999) 999-9999"),App.Helpers.addMask('[name="claimantOfficePhone"]',"(999) 999-9999"),App.Helpers.addMask('[name="tollFreePhone"]',"(999) 999-9999")},copy_to_address:function(){this.lienClaimantModel.set("physicalAddress",this.lienClaimantModel.get("mailingAddress")),this.lienClaimantModel.set("physicalCity",this.lienClaimantModel.get("mailingCity")),this.lienClaimantModel.set("physicalState",this.lienClaimantModel.get("mailingState")),this.lienClaimantModel.set("physicalZip",this.lienClaimantModel.get("mailingZip"))},save_lien_claimant:function(){var a=this.$el;if(a.find("#from-lien-claimant").valid())if(this.lienClaimantModel.isNew())this.process_save_lien_claimant();else{var b=" If you edit this claimant it will affect all files using this claimant",c=new App.Views.Shared.AlertView({processFunction:"process_save_lien_claimant",viewClass:".lienWcClaimantForm",msg:b,title:"Warning"}),d=new App.Helpers.Modal({view:c});d.show()}},process_save_lien_claimant:function(){var a=this;this.lienClaimantModel.set("contactOfficePhone",this.$el.find('[name="contactOfficePhone"]').val()),this.lienClaimantModel.set("contactCellPhone",this.$el.find('[name="contactCellPhone"]').val()),this.lienClaimantModel.set("claimantFax",this.$el.find('[name="claimantFax"]').val()),this.lienClaimantModel.set("claimantOfficePhone",this.$el.find('[name="claimantOfficePhone"]').val()),this.lienClaimantModel.set("tollFreePhone",this.$el.find('[name="tollFreePhone"]').val()),this.lienClaimantModel.save({},{success:function(b,c){var d=new App.Helpers.Toast({message:"Lien claimant Saved Correctly",classType:"success",fadeOut:5e3});d.render();var e=c.ClaimantName,f=$(".eventWcLienFirst").data("view");f.lienClaimantModel.clear(),f.lienClaimantModel.set(c),_.isUndefined(a.options.modelEvents)||(a.options.modelEvents.set("lienClaimantID",c.ClaimantID),a.options.eventsData.LienClaimantTypeaheadID=c.ClaimantID,a.options.modelEvents.set("claimantNameTypeahead",e)),a.elementModal.modal("hide")}})}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),App.Views.Files.EventTabs.PayeesForm=App.Helpers.View.extend({template:App.Templates.filesEventTabsPayeesForm,className:"payeesForm",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.listenTo(this.model,"request",function(){b.showLoader(".modal-body")}),this.listenTo(this.model,"sync error",function(){b.removeLoader(".modal-body")})},events:{"click #copy-to-address":"copy_to_address","click #save-payee":"save_payee"},copy_to_address:function(){this.model.set("physicalAddress",this.model.get("mailingAddress")),this.model.set("physicalCity",this.model.get("mailingCity")),this.model.set("physicalState",this.model.get("mailingState")),this.model.set("physicalZip",this.model.get("mailingZip"))},save_payee:function(){var a=this.$el;if(a.find("#from-payee").valid())if(this.model.isNew())this.process_save_payee();else{var b="If you edit this payee it will affect all files using this payee",c=new App.Views.Shared.AlertView({processFunction:"process_save_payee",viewClass:".payeesForm",msg:b,title:"Warning"}),d=new App.Helpers.Modal({view:c});d.show()}},process_save_payee:function(){var a=this;this.model.save({},{success:function(b){var c=new App.Helpers.Toast({message:"Payee Saved Correctly",classType:"success",fadeOut:5e3});c.render();var d=b.get("payeeName");_.isUndefined(a.options.modelEvents)||(a.options.modelEvents.set("payeeID",b.get("payeeID")),a.options.eventsData.payeeTypeaheadID=b.get("payeeID"),a.options.modelEvents.set("payeeNameTypeahead",d)),a.elementModal.modal("hide")}})}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.EventTabs)&&(App.Views.Files.EventTabs={}),App.Views.Files.EventTabs.ShowDependencies=App.Helpers.View.extend({template:App.Templates.filesEventTabsShowDependencies,className:"FilesEventTabsShowDependencies",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.milestones=new App.Helpers.Collection,this.billings=new App.Collections.Billings,this.documents=new App.Collections.Documents,this.colLienReps=new App.Collections.LienRes,this.colLienBillsInfo=new App.Collections.LienBills,this.colBodyPartsList=new App.Collections.BodyParts,this.colLienOfferInfo=new App.Collections.LienOffers,this.colLienDemandInfo=new App.Collections.LienDemands,this.colLienObjectionInfo=new App.Collections.liendObjections,this.colMedicalBodyPartsList=new App.Collections.MedicalsBodyParts,this.listenTo(this.model,"request",function(){b.showLoader(".modal-body")}),this.listenTo(this.model,"sync error",function(){b.removeLoader(".modal-body")})},events:{"click .bill-delete":"removeBills","click .removeMedicalBodyPart":"removeMedicalBodyPart","click .removeLienOffer":"removeLienOffer","click .removeLienDemand":"removeLienDemand","click .removeLienBill":"removeLienBill","click .removeLienRep":"removeLienRep","click .removeLienObjection":"removeLienObjection","click .removeBodyPart":"removeBodyPart","click .delete-document":"removeDocument","click #delete-event":"removeEvent"},afterRender:function(){var a=this;this.model.fetch({success:function(){a.prepopulateData()}})},removeEvent:function(){var a,b=this;this.model.destroy({success:function(){b.elementModal.modal("hide"),a=new App.Helpers.Toast({message:"Event Deleted",classType:"success",fadeOut:4e3}),a.render(),Object.values(App.Const.eventTypes).indexOf(b.model.get("eventTypeID"))>-1&&Uit.SessionFlash.set("fetch_file",!0),Backbone.history.navigate(b.options.fileModel.fileEventsUrl(),{trigger:!0})},error:function(b,c){a=new App.Helpers.Toast({message:c.responseJSON.error,classType:"danger",fadeOut:4e3}),a.render()}})},removeDocument:function(a){var b=this.$el,c=b.find(a.currentTarget),d=c.data("model"),e=this.documents.get(d);e.url="/api/documents_controller/remove_event_document/"+e.get("documentID")+"/"+this.model.get("eventID"),e.destroy({error:function(){var a=new App.Helpers.Toast({message:"Error Deleting this document",classType:"danger",fadeOut:4e3});a.render()}});var f=this.documents.toJSON(),g=$(".eventDocument").data("view");this.model.set("documents",f),this.options.currentEvent.set("documents",f),g.options.colEventToDocuments.reset(f),this.prepopulateData()},removeBodyPart:function(a){var b=this.$el,c=b.find(a.currentTarget),d=c.data("model"),e=this.colBodyPartsList.get(d);e.destroy({success:function(){c.closest("tr").remove()},error:function(){var a=new App.Helpers.Toast({message:"Error Deleting this Bill",classType:"danger",fadeOut:4e3});a.render()}});var f=this.colBodyPartsList.toJSON(),g=$(".eventWcCaseFirst").data("view");this.model.set("bodyParts",f),this.options.currentEvent.set("bodyParts",f),g.options.colBodyParts.reset(f),this.prepopulateData()},removeBills:function(a){var b=this.$el,c=b.find(a.currentTarget),d=c.data("model"),e=this.billings.get(d);e.destroy({success:function(){c.closest("tr").remove()},error:function(){var a=new App.Helpers.Toast({message:"Error Deleting this Bill",classType:"danger",fadeOut:4e3});a.render()}});var f=this.billings.toJSON(),g=$(".eventBilling").data("view");this.model.set("billings",f),this.options.currentEvent.set("billings",f),g.options.colBillings.reset(f),this.prepopulateData()},removeMedicalBodyPart:function(a){var b=this.$el,c=b.find(a.currentTarget),d=c.data("model"),e=this.colMedicalBodyPartsList.get(d);e.set("medicalID",this.model.get("medicalID")),e.destroy({success:function(){c.closest("tr").remove()},error:function(){var a=new App.Helpers.Toast({message:"Error Deleting this Bill",classType:"danger",fadeOut:4e3});a.render()}});var f=this.colMedicalBodyPartsList.toJSON(),g=$(".eventWcMedicalFirst").data("view");this.model.set("medical2bodyParts",f),this.options.currentEvent.set("medical2bodyParts",f),g.options.colMedicalToBodyPartsADj.reset(f),this.prepopulateData()},removeLienRep:function(a){var b=this.$el,c=b.find(a.currentTarget),d=c.data("model"),e=this.colLienReps.get(d);e.set("lienID",this.model.get("lienID")),e.destroy({success:function(){c.closest("tr").remove()},error:function(){var a=new App.Helpers.Toast({message:"Error Deleting Lien Rep",classType:"danger",fadeOut:4e3});a.render()}});var f=this.colLienReps.toJSON(),g=$(".eventWcLienSecond").data("view");this.model.set("lienRepInfo",f),this.options.currentEvent.set("lienRepInfo",f),g.lienReps.reset(f),g.lienReps.sortBy="lienRepLastName",g.lienReps.sort(),this.prepopulateData()},removeLienOffer:function(a){var b=this.$el,c=b.find(a.currentTarget),d=c.data("model"),e=this.colLienOfferInfo.get(d);e.destroy({success:function(){c.closest("tr").remove()},error:function(){var a=new App.Helpers.Toast({message:"Error Deleting Lien Offer",classType:"danger",fadeOut:4e3});a.render()}});var f=this.colLienOfferInfo.toJSON(),g=$(".eventWcLienForth").data("view");this.model.set("lienOffersInfo",f),this.options.currentEvent.set("lienOffersInfo",f),g.liendOffers.reset(f),g.liendOffers.sortBy="offerDate",g.liendOffers.sort(),this.prepopulateData()},removeLienDemand:function(a){var b=this.$el,c=b.find(a.currentTarget),d=c.data("model"),e=this.colLienDemandInfo.get(d);e.destroy({success:function(){c.closest("tr").remove()},error:function(){var a=new App.Helpers.Toast({message:"Error Deleting Lien Demand",classType:"danger",fadeOut:4e3});a.render()}});var f=this.colLienDemandInfo.toJSON(),g=$(".eventWcLienForth").data("view");this.model.set("lienDemandsInfo",f),this.options.currentEvent.set("lienDemandsInfo",f),g.liendDemands.reset(f),g.liendDemands.sortBy="demandDate",g.liendDemands.sort(),this.prepopulateData()},removeLienBill:function(a){var b=this.$el,c=b.find(a.currentTarget),d=c.data("model"),e=this.colLienBillsInfo.get(d);e.destroy({success:function(){c.closest("tr").remove()},error:function(){var a=new App.Helpers.Toast({message:"Error Deleting Lien Bill",classType:"danger",fadeOut:4e3});a.render()}});var f=this.colLienBillsInfo.toJSON(),g=$(".eventWcLienThird").data("view");this.model.set("lienBillsInfo",f),
this.options.currentEvent.set("lienBillsInfo",f),g.liendBills.reset(f),g.liendBills.sortBy="name",g.liendBills.sort(),this.prepopulateData()},removeLienObjection:function(a){var b=this.$el,c=b.find(a.currentTarget),d=c.data("model"),e=this.colLienObjectionInfo.get(d);e.destroy({success:function(){c.closest("tr").remove()},error:function(){var a=new App.Helpers.Toast({message:"Error Deleting Lien Objection",classType:"danger",fadeOut:4e3});a.render()}});var f=this.colLienObjectionInfo.toJSON(),g=$(".eventWcLienFifth").data("view");this.model.set("liendObjectionsInfo",f),this.options.currentEvent.set("liendObjectionsInfo",f),g.liendObjections.reset(f),g.liendObjections.sortBy="objectionDate",g.liendObjections.sortOrder="DESC",g.liendObjections.sort(),this.prepopulateData()},createHtmlInfo:function(a,b,c){var d="";return d+='<div class="form-group">',d+='<span class="col-sm-2">'+a+":</span>",d+='<div class="col-sm-'+c+' p-left-0">',d+='<span class="c-blue-link font-bold p-left-0" rv-each-row="milestones.models">',d+=b,d+="</span>",d+="</div>",d+="</div>"},createHtmlLists:function(a,b,c,d,e,f,g){var h='<div class="panel panel-casefreind">\n                            <div class="panel-heading" role="tab">\n                                <h4 class="panel-title">\n                                    <a class="accordion-toggle font-bold" role="button" data-toggle="collapse" data-parent="#accordion" href="#'+f+'" aria-expanded="false" aria-controls="'+f+'">\n                                        '+d+" ("+b.length+')\n                                    </a>\n                                </h4>\n                            </div>\n                            <div class="panel-body collapse in" id="'+f+'">\n                                <fieldset>\n                                    <table class="table liens-panels-max-size">\n                                        <thead>\n                                        <tr>\n                                            '+a.map(function(a){return"<th>"+a+"</th>"}).join("\n")+'\n                                            <th class="t-align-right m-right-30">Action</th>\n                                        </tr>\n                                        </thead>\n                                        <tbody>\n                                        '+b.models.map(function(a){return"<tr>\n                                            "+c.map(function(b){return"<td>"+(a.get(b)?a.get(b):"")+"</td>"}).join("\n")+'\n                                            <td class="t-align-right p-right-i-20">\n                                                <a class=\'m-right-5 '+e+"' href=\"javascript:void(0);\" data-model='"+a.cid+"' data-permission=\""+g+'">\n                                                    <i class="c-red fa fa-times"></i>\n                                                </a>\n                                            </td>\n                                        </tr>'}).join("\n")+'\n                                        </tbody>\n                                    </table>\n                                </fieldset>\n                            </div>\n                        </div>\n                        <div class="clearfix"></div>\n        ';return h},showDeletebilling:function(){return _.isUndefined(this.row.get("invoiceNumber"))||_.isNull(this.row.get("invoiceNumber"))?!0:!1},prepopulateData:function(){var a=this.$el,b=!0;if(this.model.get("childTable")){var c="",d="";if("wc_cases"===this.model.get("childTable"))c+=this.createHtmlInfo(" ADJ Case #",this.model.get("ADJid"),10),this.model.get("bodyParts")&&this.model.get("bodyParts").length>0&&(b=!1,this.colBodyPartsList.reset(this.model.get("bodyParts")),d+=this.createHtmlLists(["Body Part"],this.colBodyPartsList,["bodyPart"],"DOI Body Parts","removeBodyPart","bodyPart","82"));else if("wc_depos"===this.model.get("childTable")){c+=this.createHtmlInfo("Depo of",this.model.get("depoOf"),2),c+=this.createHtmlInfo("Depo By",this.model.get("depoBy"),2),c+=this.createHtmlInfo("Depo Status",this.model.get("depoStatus"),2),c+=this.createHtmlInfo("Signing Attorney",this.model.get("depoSigningAttorneyTypeahead"),10);var e=this.model.get("depoAddress")+", "+this.model.get("depoCity")+", "+this.model.get("depoState")+" "+this.model.get("depoZip");c+=this.createHtmlInfo("Address",e,10)}else if("wc_hearings"===this.model.get("childTable"))c+=this.createHtmlInfo("Hearing Date",this.model.get("hearingDate"),10),c+=this.createHtmlInfo("Venue",this.model.get("venueNameTypeahead"),10),c+=this.createHtmlInfo("Signing Attorney",this.model.get("hearingSigningAttorneyTypeahead"),10);else if("wc_liens"===this.model.get("childTable"))c+=this.createHtmlInfo("Claimant Name",this.model.get("claimantNameTypeahead"),10),this.model.get("lienRepInfo")&&this.model.get("lienRepInfo").length>0&&(b=!1,this.colLienReps.reset(this.model.get("lienRepInfo")),d+=this.createHtmlLists(["Lien Rep Name","Email","Company Name"],this.colLienReps,["lienRepFirstName","lienRepEmail","lienRepCompanyName"],"Lien Rep","removeLienRep","LienRep","31")),this.model.get("lienBillsInfo")&&this.model.get("lienBillsInfo").length>0&&(b=!1,this.colLienBillsInfo.reset(this.model.get("lienBillsInfo")),d+=this.createHtmlLists(["Bill Name","Date Recived","Amount","OMFS","Service Notes"],this.colLienBillsInfo,["name","dateReceived","amount","lienOMFS","serviceNotes"],"Lien Bills","removeLienBill","LienBills","31")),this.model.get("lienOffersInfo")&&this.model.get("lienOffersInfo").length>0&&(b=!1,this.colLienOfferInfo.reset(this.model.get("lienOffersInfo")),d+=this.createHtmlLists(["Date","Offer Name","Amount"],this.colLienOfferInfo,["offerDate","offerName","offerAmount"],"Lien Offers","removeLienOffer","LienOffer","31")),this.model.get("lienDemandsInfo")&&this.model.get("lienDemandsInfo").length>0&&(b=!1,this.colLienDemandInfo.reset(this.model.get("lienDemandsInfo")),d+=this.createHtmlLists(["Date","Offer Name","Amount"],this.colLienDemandInfo,["demandDate","demandName","demandAmount"],"Lien Demands","removeLienDemand","LienDemand","31")),this.model.get("liendObjectionsInfo")&&this.model.get("liendObjectionsInfo").length>0&&(b=!1,this.colLienObjectionInfo.reset(this.model.get("liendObjectionsInfo")),d+=this.createHtmlLists(["Date","Note"],this.colLienObjectionInfo,["objectionDate","objectionNote"],"Lien Objection","removeLienObjection","LienObjection","31"));else if("wc_medical"===this.model.get("childTable"))c+=this.createHtmlInfo("Doctor",this.model.get("doctorNameTypeahead"),10),c+=this.createHtmlInfo("Facility",this.model.get("facilityNameTypeahead"),10),this.model.get("medical2bodyParts").length>0&&(b=!1,this.colMedicalBodyPartsList.reset(this.model.get("medical2bodyParts")),d=this.createHtmlLists(["ADJ#","Body Part"],this.colMedicalBodyPartsList,["ADJid","bodyPart"],"Medical Body Parts","removeMedicalBodyPart","medicalBodyPart","31"));else if("wc_subpoenas"===this.model.get("childTable")){c+=this.createHtmlInfo("Doc Repository",this.model.get("subpoenaLocation"),10);var f=this.model.get("subpoenaAddress")+", "+this.model.get("subpoenaCity")+", "+this.model.get("subpoenaState")+" "+this.model.get("subpoenaZip");c+=this.createHtmlInfo("Address",f,10)}a.find("#extended-data").html(c),a.find("#extended-lists").html(d)}this.milestones.add(this.model.get("milestones")),this.billings.reset(this.model.get("billings")),this.billings.length>0&&(b=!1),this.documents.reset(this.model.get("documents")),this.documents.length>0&&(b=!1),b&&App.loginModel.get("acl").findWhere({access_group_id:32})?a.find("#delete-event").show():a.find("#delete-event").hide()}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.FileBilling)&&(App.Views.Files.FileBilling={}),App.Views.Files.FileBilling.Index=App.Helpers.View.extend({template:App.Templates.filesFileBillingIndex,className:"index",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.getData()},events:{"click .generateInvoice":"generateInvoice","click .goToBill td:not(.column-reviewed)":"goToBill","click input[name=reviewed]":"handlerReviewed","click .remove-invoice":"removeInvoice"},afterRender:function(){var a=App.Helpers.getFileDashboard(this.options.fileModel.get("module"));if(a){var b=a.$el;b.find(".dashboard-titles").removeClass("active"),b.find("a.dashboard-all-billing-all").closest(".dashboard-titles").addClass("active")}},persistHandIcon:function(){var a=this.$el;if(!_.isNull(localStorage.getItem("file-all-billings-billingID"))&&!_.isUndefined(a)){var b=localStorage.getItem("file-all-billings-billingID");a.find(".fa-hand-o-right").remove(),a.find('[data-billingid="'+b+'"] td:first').prepend('<i class="fa fa-hand-o-right p-right-5 fa-lg"></i>'),this.handlerScrollTop()}},handlerScrollTop:function(){var a=this.$el,b=a.find(".fa-hand-o-right").closest("tr");b.length&&$("body,html").animate({scrollTop:b.offset().top-54},600)},handlerReviewed:function(a){var b=$(a.currentTarget),c=b.closest("tr"),d=c.data("billingid"),e=this;this.showLoader(),$.ajax({url:"/api/billing_controller/billing_reviewed/"+d,data:JSON.stringify({fileNumber:this.options.fileModel.getFileNumber(),reviewed:b.is(":checked")?1:0}),type:"POST",success:function(a){a.reviewed?c.removeClass("font-bold"):c.addClass("font-bold")},complete:function(){e.removeLoader()}})},goToBill:function(a){var b=$(a.currentTarget).closest("tr"),c=b.data("billingid"),d=b.data("eventid"),e=this.options.fileModel.get("module");this.$el.find(".fa-hand-o-right").remove(),b.find("td:first").prepend('<i class="fa fa-hand-o-right p-right-5 fa-lg"></i>'),localStorage.setItem("file-all-billings-billingID",c);var f=this.options.fileModel.getFileNumber();this.handlerScrollTop();var g=App.Helpers.getFileURL(f,e,d,c);window.open(g,"_blank")},generateInvoice:function(a){var b=$(a.currentTarget);a.preventDefault(),a.stopPropagation();var c=b.data("invoicenumber"),d=this.options.fileModel.get("fileTitle"),e=this.options.fileModel.getClientBillingFormat(),f=this.options.fileModel.getClientID(),g=this.options.fileModel.getFileNumber(),h=new App.Views.Billing.PastBilling.InvoiceModal({invoiceNumber:c,billingFormat:e,fileTitle:d,clientID:f,fileNumber:g}),i=new App.Helpers.Modal({view:h});i.show()},renderBillings:function(a,b,c,d,e,f){var g,h=this.$el,i='<div class="table-container p-top-10 p-bottom-10">',j=0,k="",l="",m=4;e?(i+='<div class="b-grey c-white cursor-pointer font-size-18 font-bold p-left-5 generateInvoice" data-invoicenumber="'+e+'"><span>Invoice Number: '+e+"</span>",i+='<span class="f-right p-right-5">Invoice Date: '+c+" to "+d+"</span></div>"):i+='<div class="b-grey c-white font-size-18 font-bold p-left-5">Not Invoiced</div>',i+='<table class="table b-grey-light table-hover"><thead class="b-grey c-white" id="notInvoicedBillings-heads">',i+="<tr>",i+='   <th class="font-bold notInvoiced-sortable font-bold min-width-115" data-sort="billingDate">Billing Date</th>',i+='   <th class="font-bold notInvoiced-sortable font-bold min-width-100" data-sort="billingDescription">Description</th>',i+='   <th class="font-bold notInvoiced-sortable font-bold min-width-115" data-sort="workUnits">Work Units</th>',i+='   <th class="font-bold notInvoiced-sortable font-bold min-width-130" data-sort="billingRate">Rate</th>',i+='   <th class="font-bold notInvoiced-sortable font-bold min-width-200" data-sort="billingTotal">Total Amount</th>',App.loginModel.hasAccess(84)&&(i+='   <th class=" notInvoiced-sortable font-bold min-width-120 t-align-center">Reviewed</th>'),i+="</tr>",i+="</thead> <tbody>",_.each(b,function(a){if(l=a.reviewed?"":"font-bold",i+='<tr class="goToBill '+l+'" data-billingid="'+a.billingID+'"   data-eventid="'+a.eventID+'">',i+='  <td class="cursor-pointer">'+a.billingDate+"</td>",a.hourly){var b=a.activityCode?"["+a.activityCode+"]":"";i+='  <td class="cursor-pointer">['+a.litigationCode+"]"+b+" "+a.billingDescription+"</td>"}else i+='  <td class="cursor-pointer">['+a.expenseCode+"] "+a.billingDescription+"</td>";i+='  <td class="cursor-pointer">'+a.workUnits+"</td>",i+='  <td class="cursor-pointer">$'+a.billingRate+"</td>",i+='  <td class="cursor-pointer">$'+a.billingTotal.toFixed(2)+"</td>",App.loginModel.hasAccess(84)&&(k=a.reviewed?"checked":"",i+='  <td class="column-reviewed t-align-center v-align-middle"><input class="cursor-pointer" type="checkbox" value="1" '+k+' name="reviewed"></td>'),i+="</tr>",j+=a.billingTotal}),f&&(i+="<tr>",i+='  <td class="cursor-pointer">Not Applicable</td>',i+='  <td class="cursor-pointer">Billing Adjustment Cut</td>',i+='  <td class="cursor-pointer">Not Applicable</td>',i+='  <td class="cursor-pointer">Not Applicable</td>',i+='  <td class="cursor-pointer">$'+f.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+"</td>",i+="</tr>",g=(parseFloat(f)/parseFloat(j)*100).toFixed(2),i+='  <tr class="font-size-18"><td></td><td></td><td></td>',i+="      <td>Cut %</td><td>"+g.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+"%</td>",i+="  </tr>",j+=f),i+="</tbody>",i+="<tfoot>",i+=_.isUndefined(e)?'  <tr class="font-size-18 c-grey">':_.isNull(b[0].checkNo)?'  <tr class="font-size-18 c-red">':'  <tr class="font-size-18 c-green">',e&&App.loginModel.hasAccess(98)&&(i+='<td><button class="btn remove-invoice btn-danger" data-invoice="'+e+'">Remove Invoice</button></td>',m-=1),i+='<td colspan="'+m+'" class="t-align-right">Total Billing after Adjustment: </td><td>'+j.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+"</td>",i+="</tr>",i+="</tfoot>",i+="</tbody>",i+="</tbody>",i+="</table></div>",_.isUndefined(h)||h.find(a).append(i)},getData:function(){var a=this,b=this.$el;$.ajax({url:"/api/billing_controller/get_file_billings",data:{fileNumber:a.options.fileModel.getFileNumber()},success:function(c){var d=[],e={};b.find("#nonInvoicedBillings").html(""),b.find("#invoicedBillings").html(""),_.each(c,function(a){if(_.isNull(a.invoiceNumber))d.push(a);else{var b=a.invoiceNumber;e[b]||(e[b]=[]),e[b].push(a)}}),a.renderBillings("#nonInvoicedBillings",d);var f=[],g=_.size(e);_.each(e,function(a,b){f[g-1]=b,g--});for(var h=0;h<_.size(e);h++){var i=e[f[h]];a.renderBillings("#invoicedBillings",i,i[0].invoiceStartDate,i[0].invoiceEndDate,i[0].invoiceNumber,i[0].billingAdjustment)}a.removeLoader(),a.persistHandIcon()}}),a.showLoader()},removeInvoice:function(a){a.preventDefault(),a.stopPropagation();var b=this.$el.find(a.currentTarget).data("invoice"),c="Are you sure you want to remove this invoice?",d=new App.Views.Shared.AlertView({processFunction:"processRemoveInvoice",viewClass:".index",params:b,msg:c,title:"Remove invoice #: "+b}),e=new App.Helpers.Modal({view:d});e.show()},processRemoveInvoice:function(a){var b=void 0,c=this;$.post("/api/billing_invoices_controller/uninvoice",JSON.stringify({invoiceNumber:a})).done(function(){b=new App.Helpers.Toast({message:"Invoice removed",classType:"warning",fadeOut:5e3}),b.render(),c.getData()}).fail(function(a){var c=a.responseJSON;b=new App.Helpers.Toast({message:c,classType:"danger",fadeOut:5e3}),b.render()})}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),App.Views.Files.FileCalendarForm=App.Helpers.View.extend({template:App.Templates.filesFileCalendarForm,className:"FilesFileCalendarForm",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.colUsers=new Uit.Collection,this.model.isNew()||this.colUsers.add(this.model.get("colUsers")),this.colModules=new App.Collections.Modules,this.colModules.fetch()},events:{"click .icon-typeahead-down":"showAllEntities","click #save-alert":"saveCalendarEvent","click .close-alert-form":"setProperUrl","click #delete-alert":"deleteCalendarEvent"},showAllEntities:function(a){App.Helpers.showAllEntities(a,this.$el)},deleteCalendarEvent:function(a){a.preventDefault(),a.stopPropagation();var b=$(a.currentTarget),c=this,d=b.data("alert-id"),e=new App.Models.CalendarEvent({alert_id:d}),f="";e.destroy({success:function(){f=new App.Helpers.Toast({message:"Calendar Reminder Deleted.",classType:"warning",fadeOut:3e3}),f.render();var a=c.options.alertCollection.where({alert_id:d})[0];a.destroy(),c.options.alertCollection.reset(c.options.alertCollection.models),c.$el.find(".close-alert-form").click()},error:function(){f=new App.Helpers.Toast({message:"Calendar Reminder Deletion failed.",classType:"danger",fadeOut:3e3}),f.render()}})},afterRender:function(){if(App.Helpers.initTypeahead({view:this,elemClass:".typeahead.user-Typeahead",urlBuild:{url:"api/typeahead_controller/search_users_not_client_reps"},processFunction:$.proxy(this.processUserTypeahead,this)}),this.model.isNew()){var a=new App.Models.User({typeaheadResult:App.loginModel.get("last")+", "+App.loginModel.get("first")+" "+App.loginModel.get("middle")+" "+App.loginModel.get("email"),user_id:App.loginModel.get("id")});this.colUsers.add(a)}},processUserTypeahead:function(a){0===this.colUsers.where({user_id:a.user_id}).length&&(this.colUsers.add(a),this.$el.find('[name="userTypeahead"]').typeahead("val",""))},_addToCollection:function(a,b,c){var d=this;if(d.model.set("colUsers",null),d.model.set("colUsers",c),a)d.options.alertCollection.add(d.model);else{var e=d.options.alertCollection.findWhere({alert_id:b.get("alert_id")});e.clear(),e.set(b.attributes)}d.options.alertCollection.reset(d.options.alertCollection.models),d.elementModal.modal("hide");var f=new App.Helpers.Toast({message:"Calendar Reminder Saved",classType:"success",fadeOut:5e3});f.render()},saveCalendarEvent:function(){var a=this,b=this.$el,c=this.model.isNew();if(b.find("#alert-form-file").valid()){var d=[],e=[];if(_.each(b.find(".user-checkbox:checked"),function(a){a=$(a);var b={};b.user_id=a.data("user-id"),b.typeaheadResult=a.data("typeaheadresult"),d.push(b.user_id),e.push(b)}),d.length<=0){var f=new App.Helpers.Toast({message:"You must choose at least one user or more that will receive alerts",classType:"danger",fadeOut:3e3});return void f.render()}if(this.model.get("notificationQuantity")&&this.model.get("notificationUnit")&&(!this.model.get("time")||""===this.model.get("time"))){var g=new App.Helpers.Toast({message:"You must choose a time to set a reminder. ",classType:"danger",fadeOut:3e3});return void g.render()}this.model.set("userArr",d),this.model.save({},{success:function(b){a._addToCollection(c,b,e)}})}}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),App.Views.Files.FileEvents=App.Helpers.View.extend({template:App.Templates.filesFileEvents,className:"fileEvents",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.PagesNumbers=new App.Helpers.Collection,this.filterUrlModel=new App.Helpers.Model(this.options.filterParams),this.currentPosition=0,this.evenTypeIDSerach="0",this.sortBy=this.filterUrlModel.has("orderBy")?this.filterUrlModel.get("orderBy"):"eventDate",this.sortDir=this.filterUrlModel.has("orderDirection")?this.filterUrlModel.get("orderDirection"):"DESC",this.listenTo(this.collection,"sync change",this.prepopulateData)},events:{"click .event-row":"editEventForm","click .events-sortable":"sortEvents","click .icon-typeahead-down":"showAllEntities","click #filter-btn":"filterButton","click #filter-btn-close":"filterButton","change #eventCategory":"getFilteredFileEvents","change #eventOffset":"getFilteredFileEvents","click .sequential-counter":"movePosition"},updateEventTypeIdSearch:function(a){var b=this.$el;b.find(".typeahead.event_typeahead").data("engine").remote.urlBuild.resource=a,b.find(".typeahead.event_type_typeahead").data("engine").remote.urlBuild.resource=a},afterRender:function(){var a=this.$el,b=this,c=".typeahead.event_typeahead",d=App.Helpers.initTypeahead({view:this,elemClass:c,urlBuild:{url:"api/typeahead_controller/search_events/"+this.options.fileModel.id,resource:this.evenTypeIDSerach},processFunction:$.proxy(this.processTypeaheadFilters,this)}),e=".typeahead.event_type_typeahead",f=App.Helpers.initTypeahead({view:this,elemClass:e,urlBuild:{url:"api/typeahead_controller/search_eventTypes",resource:this.evenTypeIDSerach},processFunction:$.proxy(this.processTypeaheadFilters,this)}),g=function(a){var c=$(a.currentTarget),d=c.attr("name");switch(d){case"eventTypeName":_.isUndefined(b.filterUrlModel.get("filtereventTypeText"))||c.val()===b.filterUrlModel.get("filtereventTypeText")||b.resetEventType();break;case"eventTitle":_.isUndefined(b.filterUrlModel.get("filterEventText"))||c.val()===b.filterUrlModel.get("filterEventText")||b.resetEventTitle()}};a.find(c).data("filter-id",0),a.find(e).data("filter-id",0),d.focusout(g),f.focusout(g),a.find("#filter-fileEvents-sticky").sticky({topSpacing:0}),a.find(".file-events-header-table").sticky({topSpacing:138});var h=$(".files-dashboard").data("view"),i=h.$el;i.find(".dashboard-titles").removeClass("active"),i.find("a.dashboard-timeline-all").closest(".dashboard-titles").addClass("active")},resetEventTitle:function(){this.filterEventID=void 0,this.filterUrlModel.unset("filterEventID"),this.filterUrlModel.unset("filterEventText"),this.getFilteredFileEvents(!1)},resetEventType:function(){this.filtereventTypeID=void 0,this.filterUrlModel.unset("filtereventTypeID"),this.filterUrlModel.unset("filtereventTypeText"),this.getFilteredFileEvents(!1)},filterButton:function(){var a=this.$el;a.find("#file-filters").slideToggle("fast"),a.find("#filter-btn").toggle(),a.find("#filter-btn-close").toggle()},_hideForwardButtons:function(){var a=this.$el;a.find("#load-files-next").hide(),a.find("#load-files-last").hide()},_hideBackButtons:function(){var a=this.$el;a.find("#load-files-prev").hide(),a.find("#load-files-first").hide()},_showForwardButtons:function(){var a=this.$el;a.find("#load-files-next").show(),a.find("#load-files-last").show()},_showBackButtons:function(){var a=this.$el;a.find("#load-files-prev").show(),a.find("#load-files-first").show()},sortEvents:function(a){var b=$(a.currentTarget),c=this.$el;this.sortBy=b.data("sort"),b.find(".fa-chevron-down").length||b.find(".fa-eye").length?this.sortDir="asc":this.sortDir="DESC",c.find("#events-heads .fa").remove(),b.append("asc"===this.sortDir?"read"===this.sortBy?'<i class="fa fa-eye-slash" aria-hidden="true"></i>':'<i class="fa fa-chevron-up"></i>':"read"===this.sortBy?'<i class="fa fa-eye" aria-hidden="true"></i>':'<i class="fa fa-chevron-down"></i>'),this.getFilteredFileEvents(!1)},editEventForm:function(a){var b=$(a.currentTarget);Backbone.history.navigate("files/edit/"+this.options.fileModel.get("fileNumber")+"/events/edit/"+b.data("id"),{trigger:!0})},processTypeaheadFilters:function(a){var b=App.Helpers.handlerDisplayKey(a);_.isUndefined(a.eventTypeID)?_.isUndefined(a.eventID)||(this.filterEventID=a.eventID,this.filterUrlModel.set("filterEventID",this.filterEventID),this.filterUrlModel.set("filterEventText",b)):(this.filtereventTypeID=a.eventTypeID,this.filterUrlModel.set("filtereventTypeID",this.filtereventTypeID),this.filterUrlModel.set("filtereventTypeText",b)),this.getFilteredFileEvents(!0)},movePosition:function(a){var b=$(a.currentTarget);switch(b.attr("id")){case"load-files-first":$("#eventOffset option").first().next().prop("selected",!0).change();break;case"load-files-prev":$("#eventOffset option:selected").prev().length>0&&$("#eventOffset option:selected").prev().prop("selected",!0).change();break;case"load-files-next":$("#eventOffset option:selected").next().length>0&&$("#eventOffset option:selected").next().prop("selected",!0).change();break;case"load-files-last":$("#eventOffset option").last().prop("selected",!0).change()}},handlerUrlFilter:function(a){var b=_.first(Backbone.history.fragment.split("?")),c="#"+b,d=this.$el;a.eventOffsetIndex=d.find("#eventOffset").prop("selectedIndex"),this.filterUrlModel.has("filtereventTypeID")&&(a.filtereventTypeID=this.filterUrlModel.get("filtereventTypeID"),a.filtereventTypeText=this.filterUrlModel.get("filtereventTypeText")),this.filterUrlModel.has("filterEventID")&&(a.filterEventID=this.filterUrlModel.get("filterEventID"),a.filterEventText=this.filterUrlModel.get("filterEventText")),this.filterUrlModel.unset("fileNumber"),this.filterUrlModel.unset("orderBy"),this.filterUrlModel.unset("maxRows"),this.filterUrlModel.unset("etcID"),this.filterUrlModel.unset("orderDirection"),this.filterUrlModel.unset("eventOffset"),this.filterUrlModel.set(a),this.filterUrlModel.unset("eventTypeID"),this.filterUrlModel.unset("eventID"),_.size(this.filterUrlModel.toJSON())>0&&(c+="?"+$.param(this.filterUrlModel.toJSON())),Backbone.history.navigate(c,{trigger:!1})},handlerPrepareFilterParams:function(){var a=this.filterUrlModel.toJSON(),b=a,c=this.$el;this.evenTypeIDSerach=_.has(a,"etcID")?a.etcID:"0",this.updateEventTypeIdSearch(this.evenTypeIDSerach),b.filtereventTypeID&&(b.eventTypeID=this.filtereventTypeID=a.filtereventTypeID,c.find(".typeahead.event_type_typeahead").typeahead("val",a.filtereventTypeText),delete b.filtereventTypeID,delete b.filtereventTypeText),b.filterEventID&&(b.eventID=this.filterEventID=a.filterEventID,c.find(".typeahead.event_typeahead").typeahead("val",a.filterEventText),delete b.filterEventID,delete b.filterEventText),c.find(".file-events-table th.events-sortable i").remove();var d=c.find('.file-events-table th[data-sort="'+this.sortBy+'"]');return d.append("asc"===this.sortDir?"read"===this.sortBy?'<i class="fa fa-eye-slash" aria-hidden="true"></i>':'<i class="fa fa-chevron-up"></i>':"read"===this.sortBy?'<i class="fa fa-eye" aria-hidden="true"></i>':'<i class="fa fa-chevron-down"></i>'),b},prepopulateFilters:function(){var a=this.$el;a.find("#eventOffset option:eq("+this.filterUrlModel.get("eventOffsetIndex")+")").length>0&&a.find("#eventOffset").prop("selectedIndex",this.filterUrlModel.get("eventOffsetIndex")),-1!==a.find("#eventOffset option:selected").data("min")?(a.find("#show-offset").show(),a.find("#show-all").hide()):(a.find("#show-offset").hide(),a.find("#show-all").show()),this.calculateShowForwardBackButtons();var b=this.filterUrlModel.has("etcID")?this.filterUrlModel.get("etcID"):"0";a.find("#eventCategory").val(b)},getFilteredFileEvents:function(a){var b=this.$el,c=this,d={fileNumber:this.options.fileModel.id};this.showLoader(),d.orderBy=this.sortBy,d.orderDirection=this.sortDir,-1===b.find("#eventOffset option:selected").data("min")?d.maxRows=0:a!==!0&&"eventCategory"!==$(a.currentTarget).attr("id")?(d.maxRows=this.options.paginationConstant,d.eventOffset=b.find("#eventOffset option:selected").data("min")):(d.eventOffset=this.options.paginationConstant,"eventCategory"===$(a.currentTarget).attr("id")&&(d.maxRows=0,d.eventOffset=0)),"0"!==b.find("#eventCategory option:selected").val()?(d.etcID=b.find("#eventCategory option:selected").val(),this.evenTypeIDSerach=d.etcID):this.evenTypeIDSerach="0",this.updateEventTypeIdSearch(this.evenTypeIDSerach),_.isUndefined(this.filtereventTypeID)||(d.eventTypeID=this.filtereventTypeID),_.isUndefined(this.filterEventID)||(d.eventID=this.filterEventID),this.handlerUrlFilter(d),delete d.filterEventID,delete d.filterEventText,delete d.filtereventTypeID,delete d.filtereventTypeText,$.ajax({url:"/api/file_events_controller/get_events_pagination",data:d,success:function(a){c.totalRows=a[1],c.prepopulateData(),c.collection.reset(),c.collection.add(a[0]),c.collection.sortBy=c.sortBy,c.collection.sortOrder=c.sortDir,c.collection.sort(),c.removeLoader()}})},set_pagination:function(){var a=this,b=this.$el,c=0,d=0,e=Math.ceil(this.totalRows/this.options.paginationConstant);this.prevTotalRows=this.totalRows,this.PagesNumbers.reset(),_.times(e,function(b){d=d+a.options.paginationConstant>a.totalRows?a.totalRows:d+a.options.paginationConstant,a.PagesNumbers.add({position:b,min:c,max:d}),c+=a.options.paginationConstant}),_.isUndefined(b)||b.find("#eventOffset option:eq(0)").prop("selected",!0)},calculateShowForwardBackButtons:function(){var a=this.$el;_.isUndefined(a)||(this.totalRows<this.options.paginationConstant?(this._hideForwardButtons(),this._hideBackButtons()):a.find("#eventOffset option:eq(0)").is(":selected")?(this._hideBackButtons(),this._hideForwardButtons()):a.find("#eventOffset option:eq(1)").is(":selected")?(this._hideBackButtons(),this._showForwardButtons()):a.find("#eventOffset option:last").is(":selected")?(this._hideForwardButtons(),this._showBackButtons()):(this._showBackButtons(),this._showForwardButtons()))},prepopulateData:function(){var a=this.$el;this.collection.sortBy=this.sortBy,this.collection.sortOrder=this.sortDir,this.collection.sort(),this.totalRows!==this.prevTotalRows&&this.set_pagination(),-1!==a.find("#eventOffset option:selected").data("min")?_.isUndefined(a)||(a.find("#show-offset").show(),a.find("#show-all").hide(),a.find("#from-offset").html($("#eventOffset option:selected").data("min")),a.find("#to-offset").html($("#eventOffset option:selected").data("max"))):(a.find("#show-offset").hide(),a.find("#show-all").show()),this.totalRows===!1&&(this.totalRows=0,_.isUndefined(a)||(a.find("#from-offset").html(0),a.find("#to-offset").html(0))),this.calculateShowForwardBackButtons()}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.FileSubroTabs)&&(App.Views.Files.FileSubroTabs={}),_.isUndefined(App.Views.Files.FileSubroTabs.AddressPos)&&(App.Views.Files.FileSubroTabs.AddressPos={}),App.Views.Files.FileSubroTabs.AddressPos.Panel=App.Helpers.View.extend({template:App.Templates.filesFileSubroTabsAddressPosPanel,className:"FilesFileSubroTabsAddressPosPanel",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.FileSubroTabs)&&(App.Views.Files.FileSubroTabs={}),_.isUndefined(App.Views.Files.FileSubroTabs.Client)&&(App.Views.Files.FileSubroTabs.Client={}),App.Views.Files.FileSubroTabs.Client.InsurerForm=App.Helpers.View.extend({template:App.Templates.filesFileSubroTabsClientInsurerForm,className:"FilesFileSubroTabsClientInsurerForm",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.FileSubroTabs)&&(App.Views.Files.FileSubroTabs={}),_.isUndefined(App.Views.Files.FileSubroTabs.Client)&&(App.Views.Files.FileSubroTabs.Client={}),App.Views.Files.FileSubroTabs.Client.Panel=App.Helpers.View.extend({template:App.Templates.filesFileSubroTabsClientPanel,className:"FilesFileSubroTabsClientPanel",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{"click .insurer_form_edit":"editInsurerCompanyForm","click #insurer_form_new":"newInsurerCompanyForm","click .remove_insurer_company":"removeInsurerCompany","click #btn-InsurerCompanies":"updateInsurerCompanies"},afterRender:function(){App.Helpers.initTypeahead({view:this,elemClass:".typeahead.insurer_company_typeahead",urlBuild:{url:"api/typeahead_controller/search_companies"},processFunction:$.proxy(this.processInsurerCompany,this)})},processInsurerCompany:function(a){var b=new App.Models.Company;b.set("id",a.id),b.set("companyName",a.companyName),b.set("officePhone",a.officePhone),this.options.colInsurerCompanies.add(b),this.$el.find(".typeahead.insurer_company_typeahead").typeahead("val","")},updateInsurerCompanies:function(a){a.preventDefault(),a.stopPropagation(),this.options.fileModel.set("insurerCompanies",this.options.colInsurerCompanies.toJSON()),this.options.fileModel.save({},{success:function(){var a=new App.Helpers.Toast({message:"Insurer assigned to this file successfully.",classType:"success",fadeOut:5e3});a.render()},error:function(){var a=new App.Helpers.Toast({message:"Error assigning insurer to this file.",classType:"danger",fadeOut:5e3});a.render()}})},editInsurerCompanyForm:function(a){var b=$(a.currentTarget).data("id"),c=new App.Models.Company({companyID:b,id:b}),d=new App.Views.Files.FileTabs.Client.InsurerCompanyForm({model:c,parentClassName:this.className,fileModel:this.options.fileModel,colInsurerCompanies:this.options.colInsurerCompanies}),e=new App.Helpers.Modal({view:d,sizeModal:"modal-lg"});e.show(),
c.fetch()},newInsurerCompanyForm:function(){var a=new App.Models.Company,b=new App.Views.Files.FileTabs.Client.InsurerCompanyForm({model:a,parentClassName:this.className,fileModel:this.options.fileModel,colInsurerCompanies:this.options.colInsurerCompanies}),c=new App.Helpers.Modal({view:b,sizeModal:"modal-lg"});c.show()},removeInsurerCompany:function(a){var b=Number($(a.currentTarget).data("id")),c=this.options.colInsurerCompanies.toJSON(),d=_.findWhere(c,{id:b});c=_.without(c,d),this.options.colInsurerCompanies.reset(c)},updateCollection:function(a){var b=this.options.colInsurerCompanies.toJSON(),c=_.findWhere(b,{id:a.id});c?(c.companyName=a.companyName,c.officePhone=a.officePhone,_.findWhere(this.options.fileModel.get("insurerCompanies"),{id:c.id})&&(this.options.colInsurerCompanies.original=b,this.options.fileModel.set("insurerCompanies",b))):b.push({id:a.id,companyName:a.companyName,officePhone:a.officePhone}),this.options.colInsurerCompanies.reset(b)}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.FileSubroTabs)&&(App.Views.Files.FileSubroTabs={}),_.isUndefined(App.Views.Files.FileSubroTabs.Client)&&(App.Views.Files.FileSubroTabs.Client={}),App.Views.Files.FileSubroTabs.Client.TpaForm=App.Helpers.View.extend({template:App.Templates.filesFileSubroTabsClientTpaForm,className:"FilesFileSubroTabsClientTpaForm",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{"click .insurer_form_edit":"editInsurerCompanyForm","click #insurer_form_new":"newInsurerCompanyForm","click .remove_insurer_company":"removeInsurerCompany","click #btn-InsurerCompanies":"updateInsurerCompanies"},afterRender:function(){App.Helpers.initTypeahead({view:this,elemClass:".typeahead.insurer_company_typeahead",urlBuild:{url:"api/typeahead_controller/search_companies"},processFunction:$.proxy(this.processInsurerCompany,this)})},processInsurerCompany:function(a){var b=new App.Models.Company;b.set("id",a.id),b.set("companyName",a.companyName),b.set("officePhone",a.officePhone),this.options.colInsurerCompanies.add(b),this.$el.find(".typeahead.insurer_company_typeahead").typeahead("val","")},updateInsurerCompanies:function(a){a.preventDefault(),a.stopPropagation(),this.options.fileModel.set("insurerCompanies",this.options.colInsurerCompanies.toJSON()),this.options.fileModel.set("tpaClient",this.options.modTpaClient.toJSON()),this.options.fileModel.save({},{success:function(){var a=new App.Helpers.Toast({message:"Insurer assigned to this file successfully.",classType:"success",fadeOut:5e3});a.render()},error:function(){var a=new App.Helpers.Toast({message:"Error assigning insurer to this file.",classType:"danger",fadeOut:5e3});a.render()}})},editInsurerCompanyForm:function(a){var b=$(a.currentTarget).data("id"),c=new App.Models.Company({companyID:b,id:b}),d=new App.Views.Files.FileTabs.Client.InsurerCompanyForm({model:c,parentClassName:this.className,fileModel:this.options.fileModel,colInsurerCompanies:this.options.colInsurerCompanies}),e=new App.Helpers.Modal({view:d,sizeModal:"modal-lg"});e.show(),c.fetch()},newInsurerCompanyForm:function(){var a=new App.Models.Company,b=new App.Views.Files.FileTabs.Client.InsurerCompanyForm({model:a,parentClassName:this.className,fileModel:this.options.fileModel,colInsurerCompanies:this.options.colInsurerCompanies}),c=new App.Helpers.Modal({view:b,sizeModal:"modal-lg"});c.show()},removeInsurerCompany:function(a){var b=Number($(a.currentTarget).data("id")),c=this.options.colInsurerCompanies.toJSON(),d=_.findWhere(c,{id:b});c=_.without(c,d),this.options.colInsurerCompanies.reset(c)},updateCollection:function(a){var b=this.options.colInsurerCompanies.toJSON(),c=_.findWhere(b,{id:a.id});c?(c.companyName=a.companyName,c.officePhone=a.officePhone):b.push({id:a.id,companyName:a.companyName,officePhone:a.officePhone}),this.options.colInsurerCompanies.reset(b)}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.FileSubroTabs)&&(App.Views.Files.FileSubroTabs={}),_.isUndefined(App.Views.Files.FileSubroTabs.ClientRep)&&(App.Views.Files.FileSubroTabs.ClientRep={}),App.Views.Files.FileSubroTabs.ClientRep.ClientRepForm=App.Helpers.View.extend({template:App.Templates.filesFileSubroTabsClientRepClientRepForm,className:"FilesFileSubroTabsClientRepClientRepForm",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.listenTo(this.model,"request",function(){b.showLoader(".modal-body")}),this.listenTo(this.model,"sync error",function(){b.removeLoader(".modal-body")})},events:{"click #save-client-rep":"saveClientRep"},afterRender:function(){App.Helpers.addMask('[name="phone"]',"(999) 999-9999"),App.Helpers.addMask('[name="cell"]',"(999) 999-9999"),App.Helpers.addMask('[name="fax"]',"(999) 999-9999")},saveClientRep:function(){if(this.$el.find("form").valid())if(this.model.isNew())this.processSaveClientRep();else{var a=" If you edit this ClientRep/adjuster it will affect all files using this ClientRep/adjuster",b=new App.Views.Shared.AlertView({processFunction:"processSaveClientRep",viewClass:"."+this.className,msg:a,title:"Warning"}),c=new App.Helpers.Modal({view:b});c.show()}},processSaveClientRep:function(){var a=this,b=!1;this.model.isNew()&&(b=!0),this.model.set("phone",this.$el.find('[name="phone"]').val()),this.model.set("cell",this.$el.find('[name="cell"]').val()),this.model.set("fax",this.$el.find('[name="fax"]').val()),this.model.save({},{success:function(c){var d={},e=$(".FilesFileSubroTabsClientRepTempClientRepModal").data("view"),f=$(".FilesFileSubroTabsClientRepPanel").data("view"),g="";if(a.options.isCodefendant)d=c.toJSON(),_.extend(d,{id:c.get("user_id")}),a.options.coModel&&a.options.coModel.set("firmID",c.get("user_id"));else{if(g=c.get("last")+", "+c.get("first")+" "+c.get("middle")+" "+c.get("email"),b||c.get("id")!==a.options.clientRepModelInContext.get("id"))a.options.isTempClientRep?(a.options.fileModel.set("tempClientRepNameTypeahead",g),$(".typeahead.tempClientRep_typeahead").typeahead("val",g),$(".typeahead.tempClientRep_typeahead").data("datum",{typeaheadResult:g}),e.tempClientRepTypeaheadID=c.get("id")):(a.options.fileModel.set("clientRepNameTypeahead",g),$(".typeahead.client_rep_typeahead").typeahead("val",g),$(".typeahead.client_rep_typeahead").data("datum",{typeaheadResult:g}),f.clientRepTypeaheadID=c.get("id"));else if(a.options.isTempClientRep)a.options.fileModel.set("tempClientRepNameTypeahead",g),$(".typeahead.tempClientRep_typeahead").typeahead("val",g),$(".typeahead.tempClientRep_typeahead").data("datum",{typeaheadResult:g}),e.tempClientRepTypeaheadID=c.get("id");else if(a.options.fileModel.set("clientRepNameTypeahead",g),$(".typeahead.client_rep_typeahead").typeahead("val",g),$(".typeahead.client_rep_typeahead").data("datum",{typeaheadResult:g}),f.clientRepTypeaheadID=c.get("id"),a.options.fileModel.get("clientRep")){var h=$(".files-dashboard").data("view");a.options.fileModel.get("clientRep").user_id===c.get("id")&&h&&(a.options.fileModel.set("clientRep",c.toJSON()),h.clientRepInfo=c.toJSON(),h.clientRepInfo.fullName=h.getFullName(h.clientRepInfo.last,h.clientRepInfo.first,h.clientRepInfo.middle),h.$el.find("#client-rep-email-link").popover({trigger:"hover"}))}a.options.clientRepModelInContext.clear(),a.options.clientRepModelInContext.set(c.attributes),a.options.clientRepModelInContext.original=a.options.clientRepModelInContext.toJSON()}var i=new App.Helpers.Toast({message:"ClientRep/Adjuster Saved Correctly",classType:"success",fadeOut:5e3});i.render(),a.elementModal.modal("hide")}})},closeModal:function(){this.elementModal.modal("hide")}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.FileSubroTabs)&&(App.Views.Files.FileSubroTabs={}),_.isUndefined(App.Views.Files.FileSubroTabs.ClientRep)&&(App.Views.Files.FileSubroTabs.ClientRep={}),App.Views.Files.FileSubroTabs.ClientRep.ConfirmDeleteModal=App.Helpers.View.extend({template:App.Templates.filesFileSubroTabsClientRepConfirmDeleteModal,className:"FilesFileSubroTabsClientRepConfirmDeleteModal",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{"click #delete-temp-client-rep":"deleteTempClientRep"},deleteTempClientRep:function(a){a.preventDefault(),a.stopPropagation();var b=this;b.options.fileModel.set("tempClientRepID",0),b.options.fileModel.save({},{success:function(){delete b.options.fileModel.attributes.tempClientRep,b.model.clear(),b.elementModal.modal("hide");var a=new App.Helpers.Toast({message:"Temp Client Rep/Adjuster was removed for this file.",classType:"success",fadeOut:5e3});a.render()},error:function(){var a=new App.Helpers.Toast({message:"Error removing temp Client Rep/Adjuster to this file.",classType:"danger",fadeOut:5e3});a.render()}})}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.FileSubroTabs)&&(App.Views.Files.FileSubroTabs={}),_.isUndefined(App.Views.Files.FileSubroTabs.ClientRep)&&(App.Views.Files.FileSubroTabs.ClientRep={}),App.Views.Files.FileSubroTabs.ClientRep.Panel=App.Helpers.View.extend({template:App.Templates.filesFileSubroTabsClientRepPanel,className:"FilesFileSubroTabsClientRepPanel",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.colWCFiles=new App.Collections.Files,this.colSubroFiles=new App.Collections.FilesSubro,this.listenTo(this.options.fileModel,"sync",function(){this.prepopulateData()});var b=this.$el;this.listenTo(this.options.fileModel,"change:clientRepNameTypeahead",function(a){b&&b.find(".typeahead.client_rep_typeahead").typeahead("val",a.get("clientRepNameTypeahead"))})},events:{"click #delete-tmp-da":"showTmpClientRepDelete","click .tmp-ad-info-down-arrow":"showTmpAdInfo","click #assign-client_rep":"assignClientRep","click #temp-client-rep-btn":"tempClientRepModal","click .tmp-ad-info-up-arrow":"hideTmpAdInfo","click .gotoFile":"gotoFile","click .goto-file-new-tab":"gotoFileNewTab","click #client_rep_form_edit":"editClientRepForm","click #client_rep_form_new":"newClientRepForm"},afterRender:function(){App.Helpers.initTypeahead({view:this,elemClass:".typeahead.client_rep_typeahead",urlBuild:{url:"api/typeahead_controller/search_client_reps",resource:this.clientTypeaheadID},processFunction:$.proxy(this.processClientRepTypeahead,this)}),this.prepopulateData()},_getUrlFile:function(a){var b=this.options.modClientRep.get("clientRepFiles"),c=_.findWhere(b,{fileNumber:a}),d="";return c.moduleID===App.Const.wcFileModule?d=this.colWCFiles.get(a).fileEditUrl():c.moduleID===App.Const.subroFileModule&&(d=this.colSubroFiles.get(a).fileEditUrl()),d},gotoFile:function(a){a.preventDefault(),a.stopPropagation();var b=this._getUrlFile(Number($(a.currentTarget).data("id")));b&&Backbone.history.navigate(b,{trigger:!0})},gotoFileNewTab:function(a){a.preventDefault(),a.stopPropagation();var b=this._getUrlFile(Number($(a.currentTarget).attr("href")));b&&window.open(b)},tempClientRepModal:function(){var a=new App.Views.Files.FileSubroTabs.ClientRep.TempClientRepModal({model:this.options.modTempClientRep,clientID:this.clientTypeaheadID,clientName:this.options.fileModel.get("clientNameTypeahead"),fileModel:this.options.fileModel}),b=new App.Helpers.Modal({view:a,sizeModal:"modal-lg"});b.show()},assignClientRep:function(a){if(a.preventDefault(),a.stopPropagation(),$("#form-client-rep").valid()){this.clientRepTypeaheadID!==this.options.modClientRep.get("id")&&(this.clientRepTypeaheadID=this.options.modClientRep.get("id"));var b=this;if(this.clientRepTypeaheadID){this.options.fileModel.set("clientRepID",this.clientRepTypeaheadID);var c=b.options.modClientRep.toJSON();this.options.fileModel.save({},{success:function(){var a=new App.Helpers.Toast({message:"ClientRep/Adjuster assigned to this file successfully.",classType:"success",fadeOut:5e3});a.render(),b.options.fileModel.set("clientRep",c),b.options.modClientRep.clear({silent:!0}),b.options.modClientRep.set(c)},error:function(){var a=new App.Helpers.Toast({message:"Error assigning client rep/adjuster to this file.",classType:"danger",fadeOut:5e3});a.render()}})}else{var d=new App.Helpers.Toast({message:"Please select an client rep/adjuster in the client rep/adjuster search text field.",classType:"warning",fadeOut:5e3});d.render()}}},newClientRepForm:function(){if(!this.clientTypeaheadID||0===this.clientTypeaheadID){var a=new App.Helpers.Toast({message:"Error: File must have a client chosen to create an client rep/adjuster.",classType:"danger",fadeOut:5e3});return void a.render()}var b=new App.Models.ClientRep({isClientRep:1,clientCompany:[this.clientTypeaheadID]}),c=new App.Views.Files.FileSubroTabs.ClientRep.ClientRepForm({model:b,clientRepModelInContext:this.options.modClientRep,clientRepTypeaheadID:this.clientRepTypeaheadID,fileModel:this.options.fileModel}),d=new App.Helpers.Modal({view:c});d.show()},editClientRepForm:function(){if(!_.isUndefined(this.clientRepTypeaheadID)){var a=new App.Models.User({id:this.clientRepTypeaheadID}),b=new App.Views.Files.FileSubroTabs.ClientRep.ClientRepForm({model:a,clientRepModelInContext:this.options.modClientRep,clientRepTypeaheadID:this.clientRepTypeaheadID,fileModel:this.options.fileModel}),c=new App.Helpers.Modal({view:b});c.show(),a.fetch()}},showTmpClientRepDelete:function(){var a=new App.Views.Files.FileTabs.ClientRep.ConfirmDeletionModal({model:this.options.modTempClientRep,fileModel:this.options.fileModel}),b=new App.Helpers.Modal({view:a});b.show()},showTmpAdInfo:function(){this.$el.find(".tmp-ad-info-container").slideDown("fast"),this.$el.find(".tmp-ad-info-down-arrow").toggle(),this.$el.find(".tmp-ad-info-up-arrow").toggle()},hideTmpAdInfo:function(){this.$el.find(".tmp-ad-info-container").slideUp("fast"),this.$el.find(".tmp-ad-info-down-arrow").toggle(),this.$el.find(".tmp-ad-info-up-arrow").toggle()},processClientRepTypeahead:function(a){var b=this;this.clientRepTypeaheadID=a.id;var c=new App.Models.ClientRep({id:a.id,user_id:a.id,isClientRep:1,fileNumber:b.options.fileModel.get("subroFileNumber")});c.fetch({success:function(a){b.options.modClientRep.clear({silent:!0}),b.options.modClientRep.set(a.attributes),b.options.clientRepFiles.reset(a.get("clientRepFiles")),b.options.clientRepFiles.sortBy="fileTitle",b.options.clientRepFiles.sort()}})},isFileClosed:function(){return this.files.isFileClosed()},prepopulateData:function(){var a=this.$el,b={};if(this.options.fileModel.get("subroClientID")){var c=this.options.fileModel.get("client");this.clientTypeaheadID=c.clientID,b={id:this.clientTypeaheadID,clientName:c.clientName,clientTypeID:c.clientTypeID},this.options.clientTypeaheadName=App.Helpers.handlerDisplayKey(b),a.find(".typeahead.client_typeahead").data("datum",b)}else this.clientTypeaheadID=void 0,this.options.clientTypeaheadName="",a.find(".typeahead.client_rep_typeahead").typeahead("val","");if(b={id:this.options.modClientRep.get("user_id"),first:this.options.modClientRep.get("first"),last:this.options.modClientRep.get("last"),middle:this.options.modClientRep.get("middle"),email:this.options.modClientRep.get("email")},a.find(".typeahead.client_rep_typeahead").data("engine")&&(a.find(".typeahead.client_rep_typeahead").data("engine").remote.urlBuild.resource=this.clientTypeaheadID),this.options.modClientRep.get("user_id")){this.clientRepTypeaheadID=this.options.modClientRep.get("user_id"),a.find(".typeahead.client_rep_typeahead").data("datum",b),this.colWCFiles.reset(_.where(this.options.modClientRep.get("clientRepFiles"),{moduleID:App.Const.wcFileModule}));var d=_.where(this.options.modClientRep.get("clientRepFiles"),{moduleID:App.Const.subroFileModule});_.each(d,function(a){a.subroFileNumber=a.fileNumber}),this.colSubroFiles.reset(d)}this.options.modTempClientRep.get("user_id")&&(this.options.tempClientRepTypeaheadID=this.options.modTempClientRep.get("user_id"),b={id:this.options.modTempClientRep.get("user_id"),first:this.options.modTempClientRep.get("first"),last:this.options.modTempClientRep.get("last"),middle:this.options.modTempClientRep.get("middle"),email:this.options.modTempClientRep.get("email")},a.find(".typeahead.tempClientRep_typeahead").data("datum",b)),this.colWCFiles.sortBy="fileTitle",this.colWCFiles.sort(),this.colSubroFiles.sortBy="fileTitle",this.colSubroFiles.sort()}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.FileSubroTabs)&&(App.Views.Files.FileSubroTabs={}),_.isUndefined(App.Views.Files.FileSubroTabs.ClientRep)&&(App.Views.Files.FileSubroTabs.ClientRep={}),App.Views.Files.FileSubroTabs.ClientRep.TempClientRepModal=App.Helpers.View.extend({template:App.Templates.filesFileSubroTabsClientRepTempClientRepModal,className:"FilesFileSubroTabsClientRepTempClientRepModal",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.options.fileModel.listenTo(this.options.fileModel,"request",function(){b.showLoader(".modal-body")}),this.options.fileModel.listenTo(this.options.fileModel,"sync error",function(){b.removeLoader(".modal-body")})},events:{"click #tempClientRep_form_edit":"editTempClientRepForm","click #tempAClientRep_form_new":"newTempClientRepForm","click #assign-tempClientRep":"assignTempClientRep","click .icon-typeahead-down":"showAllEntities"},afterRender:function(){this.tempClientRepTypeaheadID=this.model.get("id"),App.Helpers.initTypeahead({view:this,elemClass:".typeahead.tempClientRep_typeahead",urlBuild:{url:"api/typeahead_controller/search_client_reps",resource:this.options.clientID},processFunction:$.proxy(this.processTempClientRepTypeahead,this)});var a=this.model.toJSON();this.$el.find(".typeahead.tempClientRep_typeahead").data("datum",a)},assignTempClientRep:function(a){a.preventDefault(),a.stopPropagation();var b=this;if(this.tempClientRepTypeaheadID)this.options.fileModel.set("tempClientRepID",this.model.get("user_id")),this.options.fileModel.save({},{success:function(){var a=new App.Helpers.Toast({message:"Temp Client Rep/Adjuster assigned to this file successfully.",classType:"success",fadeOut:5e3});a.render()},error:function(){var a=new App.Helpers.Toast({message:"Error assigning temp Client Rep/adjuster to this file.",classType:"danger",fadeOut:5e3});a.render()},complete:function(){b.elementModal.modal("hide")}});else{var c=new App.Helpers.Toast({message:"Please select a temp client rep/adjuster in the Client Rep/adjuster search text field.",classType:"warning",fadeOut:5e3});c.render()}},processTempClientRepTypeahead:function(a){var b=this;if(this.options.fileModel.get("clientRepID")!==a.id){this.tempClientRepTypeaheadID=a.id;var c=new App.Models.ClientRep({id:a.id,user_id:a.id,isClientRep:1,fileNumber:this.options.fileModel.getFileNumber()});c.fetch({success:function(a){b.model.clear({silent:!0}),b.model.set(a.attributes)}})}else{var d=new App.Helpers.Toast({message:"Error Temp Client Rep/Adjuster can not be the same as Client rep/adjuster.",classType:"danger",fadeOut:5e3});d.render(),b.$el.find(".typeahead.tempClientRep_typeahead").typeahead("val",""),b.tempClientRepTypeaheadID=void 0}},editTempClientRepForm:function(){if(!_.isUndefined(this.tempClientRepTypeaheadID)){var a=new App.Models.User({id:this.tempClientRepTypeaheadID}),b=new App.Views.Files.FileSubroTabs.ClientRep.ClientRepForm({model:a,clientRepModelInContext:this.model,clientRepTypeaheadID:this.tempClientRepTypeaheadID,isTempClientRep:!0,fileModel:this.options.fileModel}),c=new App.Helpers.Modal({view:b});c.show(),a.fetch()}},newTempClientRepForm:function(){var a=this.$el,b=a.find('[name="tempClientRepName"]').val(),c=new App.Models.ClientRep({isClientRep:1,clientCompany:[this.options.clientID]});if(a.find('[name="tempClientRepName"]').val(""),!_.isEmpty(b)){var d=App.Helpers.splitPersonName(b);c.set({first:d.first,middle:d.middle,last:d.last})}var e=new App.Views.Files.FileSubroTabs.ClientRep.ClientRepForm({model:c,clientRepModelInContext:this.model,tempClientRepTypeaheadID:this.tempClientRepTypeaheadID,isTempClientRep:!0,fileModel:this.options.fileModel}),f=new App.Helpers.Modal({view:e});f.show()},showAllEntities:function(a){App.Helpers.showAllEntities(a,this.$el)}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.FileSubroTabs)&&(App.Views.Files.FileSubroTabs={}),_.isUndefined(App.Views.Files.FileSubroTabs.Defendants)&&(App.Views.Files.FileSubroTabs.Defendants={}),App.Views.Files.FileSubroTabs.Defendants.DefendantForm=App.Helpers.View.extend({template:App.Templates.filesFileSubroTabsDefendantsDefendantForm,className:"FilesFileSubroTabsDefendantsDefendantForm",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.listenTo(this.model,"request",function(){b.showLoader(".modal-body")}),this.listenTo(this.model,"sync error",function(){b.removeLoader(".modal-body")}),this.modelData=this.model.clone()},events:{"click #aaFirm_form_edit":"editFirm","click #aaFirm_form_new":"newFirm","click #aa_form_edit":"editAA","click #aa_form_new":"newAA","click .icon-typeahead-down":"showAllEntities","focusout .aa_typeahead":"AATypeaheadChange","focusout .aaFirm_typeahead":"AAFirmTypeaheadChange"},AATypeaheadChange:function(a){var b=$(a.currentTarget),c=b.val();_.isEmpty(c)&&this.modelData.set("attorneyID",0)},AAFirmTypeaheadChange:function(a){var b=$(a.currentTarget),c=b.val();_.isEmpty(c)&&this.modelData.set("firmID",0)},newAA:function(){var a=new App.Models.Lawyer({applicantAttorney:1});a.set("firmID",this.modelData.get("firmID"));var b=new App.Views.Files.FileTabs.ApplicantAttorney.ApplicantAttorneyForm({model:a,parentClassName:this.className,coModel:this.modelData,modalTitle:"Add New Defendant"}),c=new App.Helpers.Modal({view:b,sizeModal:"modal-lg"});c.show()},editAA:function(){if(this.modelData.get("attorneyID")){var a=new App.Models.Lawyer({lawyerID:this.modelData.get("attorneyID")}),b=new App.Views.Files.FileTabs.ApplicantAttorney.ApplicantAttorneyForm({model:a,parentClassName:this.className,coModel:this.modelData,modalTitle:"Edit Existing Defendant"}),c=new App.Helpers.Modal({view:b,sizeModal:"modal-lg"});c.show(),a.fetch()}},editFirm:function(){if(this.modelData.get("firmID")){var a=new App.Models.Firm({firmID:this.modelData.get("firmID")}),b=new App.Views.Files.FileTabs.ApplicantAttorney.FirmApplicantAttorney({model:a,defendants:this,parentClassName:this.className,modalTitle:"Edit Existing Defendant Firm"}),c=new App.Helpers.Modal({view:b});c.show(),a.fetch()}},newFirm:function(){var a=new App.Models.Firm,b=new App.Views.Files.FileTabs.ApplicantAttorney.FirmApplicantAttorney({model:a,defendants:this,parentClassName:this.className,modalTitle:"Add New Defendant Firm"}),c=new App.Helpers.Modal({view:b});c.show()},afterRender:function(){var a=this.$el,b={};this.initTypeaheadAttorney(".typeahead.aaFirm_typeahead","api/typeahead_controller/search_firms",$.proxy(this.processAttorneyFirm,this),"firm"),this.initTypeaheadAttorney(".typeahead.aa_typeahead","api/typeahead_controller/search_applicant_attorney",$.proxy(this.processApplicantAttorney,this),"attorney"),_.isUndefined(this.modelData.get("firmID"))&&_.isNull(this.modelData.get("firmID"))||(b={id:this.modelData.get("firmID"),firmName:this.modelData.get("firmName")},a.find(".typeahead.aaFirm_typeahead").data("datum",b),b={last:this.modelData.get("lawyerLastName"),first:this.modelData.get("lawyerFirstName"),middle:this.modelData.get("lawyerMiddleName"),email:this.modelData.get("lawyerEmail")},a.find(".typeahead.aa_typeahead").data("datum",b),this.modelData.set("lawyerCompleteName",this.modelData.get("lawyerLastName")+", "+this.modelData.get("lawyerFirstName")+" "+this.modelData.get("lawyerMiddleName")))},resetAttorneyFirm:function(){this.$el.find('[name="aaFirm_typeahead"]').typeahead("val",""),this.modelData.set("firmID",0)},processAttorneyFirm:function(a){this.modelData.set("firmID",a.firmID),this.modelData.set("firmName",a.firmName)},resetAttorney:function(){this.$el.find('[name="appAttorney"]').typeahead("val",""),this.modelData.set("attorneyID",0)},processApplicantAttorney:function(a){this.modelData.set("attorneyID",a.lawyerID),_.isNull(a.firmID)||(this.modelData.set("firmID",a.firmID),this.modelData.set("firmName",a.firmName),this.$el.find(".typeahead.aaFirm_typeahead").typeahead("val",a.firmName)),this.$el.find('[name="appAttorney"]').typeahead("val",a.typeaheadResult)},initTypeaheadAttorney:function(a,b,c,d){var e=this.$el,f=this,g=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("value"),queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{cache:!1,searchAll:!1,url:b,replace:function(a,b){return b=this.searchAll?"*.*":b,this.searchAll=!1,"attorney"===d?a+"/"+(f.modelData.get("firmID")?f.modelData.get("firmID"):0)+"?search="+b:"firm"===d?a+"/"+(f.modelData.get("attorneyID")?f.modelData.get("attorneyID"):0)+"?search="+b:void 0}},limit:App.Const.limitTypeahead,rateLimitWait:100});g.initialize();var h=e.find(a).typeahead({minLength:0,highlight:!0},{name:"name",displayKey:App.Helpers.handlerDisplayKey,nameKey:"last",source:g.ttAdapter(),dynamic:!0,minLength:3,delay:100});e.find(a).data("engine",g),h.off("typeahead:selected typeahead:autocompleted"),h.on("typeahead:selected typeahead:autocompleted typeahead:change",function(b,d){_.isUndefined(d)||(e.find(".tt-dropdown-menu").css("display","none"),e.find(a).data("datum",d),_.isUndefined(c)||c(d))}),h.bind("keydown",function(a){return 27===a.which?(a.preventDefault(),void a.stopPropagation()):void 0}),h.keypress(function(a){if(13===a.which){var b=e.find(".tt-suggestion").data("ttDatum");if(_.isUndefined(b))return;h.trigger("typeahead:selected",[b])}})},doSaveDefendant:function(){var a=this,b=!1;$("form.form-defendat").valid()&&(this.model.isNew()&&(b=!0),this.model.set(this.modelData.toJSON()),this.model.save({},{success:function(c){var d=a.options.fileModel.get("defendants"),e=new App.Helpers.Toast({message:"Defendant Saved Correctly",classType:"success",fadeOut:5e3});if(e.render(),b)d.push(c.attributes);else{var f=_.indexOf(_.pluck(d,"defendantID"),c.get("defendantID"));d[f]=c.attributes}a.collection.add(c);var g=a.collection.toArray();a.collection.reset(g),a.elementModal.modal("hide")}}))},showAllEntities:function(a){App.Helpers.showAllEntities(a,this.$el)}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.FileSubroTabs)&&(App.Views.Files.FileSubroTabs={}),_.isUndefined(App.Views.Files.FileSubroTabs.Defendants)&&(App.Views.Files.FileSubroTabs.Defendants={}),App.Views.Files.FileSubroTabs.Defendants.Panel=App.Helpers.View.extend({template:App.Templates.filesFileSubroTabsDefendantsPanel,className:"FilesFileSubroTabsDefendantsPanel",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},removeDefendant:function(){var a=new App.Views.Shared.AlertView({processFunction:"handlerRemoveDefendant",viewClass:"."+this.className,params:{defendantID:this.row.get("defendantID")},msg:"Are you sure to remove this Defendant?",title:"Remove Defendant"}),b=new App.Helpers.Modal({view:a});b.show()},handlerRemoveDefendant:function(a){var b=this.options.collection.get(a.defendantID),c=this;b.destroy({success:function(a,b){var d=b.msg||"Defendant Deleted Successfully.",e=new App.Helpers.Toast({message:d,classType:"success",fadeOut:5e3});e.render(),c.options.fileModel.set("defendants",c.collection.toJSON())},error:function(a,b){c.options.collection.add(a);var d=_.has(b.responseJSON,"error")?b.responseJSON.error:"Error trying to delete the Defendant.",e=new App.Helpers.Toast({message:d,classType:"danger",fadeOut:5e3});e.render()}},{wait:!0})},doAddDefendant:function(){var a=new App.Models.Defendant,b=this.options.collection;a.set("subroFileNumber",this.options.fileModel.get("subroFileNumber"));var c=new App.Views.Files.FileSubroTabs.Defendants.DefendantForm({model:a,collection:b,fileModel:this.options.fileModel}),d=new App.Helpers.Modal({view:c,sizeModal:"modal-lg"});d.show()},doEditDefendant:function(a){var b=$(a),c=b.data("id"),d=this.options.collection,e=d.get(c),f=new App.Views.Files.FileSubroTabs.Defendants.DefendantForm({model:e,collection:d,fileModel:this.options.fileModel}),g=new App.Helpers.Modal({view:f,sizeModal:"modal-lg"});g.show()}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.FileSubroTabs)&&(App.Views.Files.FileSubroTabs={}),_.isUndefined(App.Views.Files.FileSubroTabs.Employer)&&(App.Views.Files.FileSubroTabs.Employer={}),App.Views.Files.FileSubroTabs.Employer.Panel=App.Helpers.View.extend({template:App.Templates.filesFileSubroTabsEmployerPanel,className:"FilesFileSubroTabsEmployerPanel",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.listenTo(this.options.modEmployer,"change",function(){App.Helpers.getStateName(b.options.modEmployer,["mailingState","billingState","physicalState"])})},events:{"click #employer_form_edit":"editEmployerForm","click #employer_form_new":"mmnewEmployerForm","click #assign-employer":"assignEmployer","focusout .typeahead.employer_typeahead":"changeEmployerTypeahead"},afterRender:function(){App.Helpers.initTypeahead({view:this,elemClass:".typeahead.employer_typeahead",urlBuild:{url:"api/typeahead_controller/search_companies"},processFunction:$.proxy(this.processEmployerTypeahead,this)}),this.prepopulateData()},assignEmployer:function(a){a.preventDefault(),a.stopPropagation();var b=this;this.options.fileModel.set("employerID",this.options.employerTypeaheadID),this.options.fileModel.save({},{success:function(){b.options.fileModel.set("employerCompany",b.options.modEmployer.toJSON());var a=new App.Helpers.Toast({message:"Employer assigned to this file successfully.",classType:"success",fadeOut:5e3});a.render()},error:function(){var a=new App.Helpers.Toast({message:"Error assigning employer to this file.",classType:"danger",fadeOut:5e3});a.render()}})},newEmployerForm:function(){var a=new App.Models.Company,b=new App.Views.Files.FileTabs.Employer.EmployerForm({model:a,employerModelInContext:this.options.modEmployer,file:this.options,fileModel:this.options.fileModel,classNameParent:this.className}),c=new App.Helpers.Modal({view:b,sizeModal:"modal-lg"});c.show()},editEmployerForm:function(){if(!_.isUndefined(this.options.employerTypeaheadID)){var a=new App.Models.Company({companyID:this.options.employerTypeaheadID,id:this.options.employerTypeaheadID}),b=new App.Views.Files.FileTabs.Employer.EmployerForm({model:a,employerModelInContext:this.options.modEmployer,file:this.options,fileModel:this.options.fileModel,classNameParent:this.className}),c=new App.Helpers.Modal({view:b,sizeModal:"modal-lg"});c.show(),a.fetch()}},processEmployerTypeahead:function(a){var b=this;this.options.employerTypeaheadID=a.id;var c=new App.Models.Company(a);c.fetch({success:function(a){b.options.modEmployer.set(a.attributes)}}),this.options.fileModel.set("employerID",a.id)},prepopulateData:function(){this.options.employerTypeaheadID=this.options.modEmployer.get("companyID");var a={id:this.options.modEmployer.get("companyID"),companyName:this.options.modEmployer.get("companyName")};this.$el.find(".typeahead.employer_typeahead").data("datum",a)},changeEmployerTypeahead:function(a){var b=$(a.currentTarget),c=b.val().trim();_.isEmpty(c)&&(this.options.employerTypeaheadID=0,this.options.modEmployer.clear())}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.FileSubroTabs)&&(App.Views.Files.FileSubroTabs={}),_.isUndefined(App.Views.Files.FileSubroTabs.General)&&(App.Views.Files.FileSubroTabs.General={}),App.Views.Files.FileSubroTabs.General.Panel=App.Helpers.View.extend({template:App.Templates.filesFileSubroTabsGeneralPanel,className:"FilesFileSubroTabsGeneralPanel",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.colListLienStatus=new App.Helpers.Collection,this.colListInterventionStatus=new App.Helpers.Collection,this.colListSubroStatus=new App.Helpers.Collection,this.fileIsClosed=!1,this.requireMatterID=0,this.listenTo(this.options.fileModel,"sync",function(){
b.prepopulateData(),b.originalSubroPOA=b.options.fileModel.get("subroPlanOfAction"),b.addEvent=!1})},events:{'change [name="fileType"]':"showHideMilestones","click .oficialFileName-down-arrow":"showOfficialFileName","click .oficialFileName-up-arrow":"hideOfficialFileName","click #file_creation_employer_form_edit":"fileCreationEmployerFormEdit","click #file_creation_employer_form_new":"fileCreationEmployerFormNew",'change [name="newFileInjuredWorkerFirstName"]':"autoGenerateName",'change [name="newFileInjuredWorkerMiddleName"]':"autoGenerateName",'change [name="newFileInjuredWorkerLastName"]':"autoGenerateName","click .save-general":"saveGeneral","click .btn-goBack":"goBackStep1","focusout .typeahead.client_typeahead":"clientTypeaheadChange","focusout .general.client_rep_typeahead":"clientRepTypeaheadChange","click #new_client":"newClient","click #edit_client":"editClient","click .change-file-status":"changeFileStatus","keydown .change-file-status":"keyDownInputChangeFileStatus","keydown .input-file-status":"keyDownInputFileStatus","focus .input-file-status":"focusInputFileStatus","click .popover-history-file-status":"showHistoryFileStatus","focusout .typeahead.new_file_employer_typeahead":"changeNewFileEmployerTypeahead"},showHistoryFileStatus:function(a){var b=$(a.currentTarget);b.trigger("mouseover")},focusInputFileStatus:function(a){var b=$(a.currentTarget);b.trigger("mouseover")},keyDownInputChangeFileStatus:function(a){if(13!==a.keyCode){var b=$(a.currentTarget),c=b.attr("current-popover-id");c&&$("#"+c).popover("hide")}},keyDownInputFileStatus:function(a){return 9===a.keyCode},goBackStep1:function(a){a.preventDefault(),a.stopPropagation(),Backbone.history.navigate("files/new/step1",{trigger:!0})},clientTypeaheadChange:function(a){var b=$(a.currentTarget),c=b.val().trim();_.isEmpty(c)&&this.options.fileModel.set("subroClientID",void 0)},clientRepTypeaheadChange:function(a){var b=$(a.currentTarget),c=b.val().trim();_.isEmpty(c)&&this.options.fileModel.set("clientRepID",void 0)},showOfficialFileName:function(){this.$el.find(".oficialFileName-container").slideDown(),this.$el.find(".oficialFileName-up-arrow").toggle(),this.$el.find(".oficialFileName-down-arrow").toggle()},hideOfficialFileName:function(){this.$el.find(".oficialFileName-container").slideUp(),this.$el.find(".oficialFileName-down-arrow").toggle(),this.$el.find(".oficialFileName-up-arrow").toggle()},afterRender:function(){var a=this;App.Helpers.initTypeahead({view:this,elemClass:".typeahead.client_typeahead",urlBuild:{url:"api/typeahead_controller/search_clients",extraQuery:function(){var b={};return a.options.fileModel.isNew()&&a.options.fileModel.get("clientRepID")&&(b.clientRepID=a.options.fileModel.get("clientRepID")),b.moduleID=a.options.fileModel.get("module"),$.param(b)}},processFunction:$.proxy(this.processClientTypeahead,this)}),App.Helpers.initTypeahead({view:this,elemClass:".typeahead.new_file_employer_typeahead",urlBuild:{url:"api/typeahead_controller/search_companies"},processFunction:$.proxy(this.processNewFileEmployerTypeahead,this)}),App.Helpers.initTypeahead({view:this,elemClass:".typeahead.new_file_da_typeahead",urlBuild:{url:"api/typeahead_controller/search_defense_attorney"},processFunction:$.proxy(this.processNewFileSubroAttorneyTypeahead,this)}),this.options.fileModel.isNew()&&App.Helpers.initTypeahead({view:this,elemClass:".general.client_rep_typeahead",urlBuild:{url:"api/typeahead_controller/search_client_reps",resource:function(){var b=a.options.fileModel.get("subroClientID");return b?b:""}},processFunction:$.proxy(this.processClientRepTypeahead,this)}),this.renderPopoverHistoryFileStatus(),this.renderPopoverFileStatus()},processClientRepTypeahead:function(a){this.options.fileModel.set("clientRepID",a.id)},processClientTypeahead:function(a){if(this.options.fileModel.set("subroClientID",a.id),this.options.fileModel.set("clientNameTypeahead",a.typeaheadResult),this.$el.find(".typeahead.client_typeahead").typeahead("val",a.typeaheadResult),this.options.fileModel.set("clientTypeID",a.clientTypeID),this.requireMatterID=a.requireMatterID?1:0,!this.options.fileModel.isNew()){var b=this;this.options.clientModel.set("clientID",a.id),this.options.clientModel.fetch({success:function(c){a.id===b.options.fileModel.get("client").clientID&&(b.options.fileModel.set("client",c.toJSON()),b.options.fileModel.original.client=c.toJSON(),b.options.fileModel.original.clientNameTypeahead=a.typeaheadResult)}}),this.options.fileModel.set("clientRepID",0),this.options.fileModel.set("adjusterNameTypeahead",""),this.options.fileModel.set("tempClientRepID",0),this.options.modClientRep.clear(),this.options.modTempClientRep.clear(),this.resetClientRepTypeaheadID()}},changeNewFileEmployerTypeahead:function(a){var b=$(a.currentTarget),c=b.val().trim();_.isEmpty(c)&&(this.newFileEmployerID=void 0,this.newFileEmployerName=void 0,this.options.fileModel.unset("employerID"),this.autoGenerateName())},processNewFileEmployerTypeahead:function(a){this.newFileEmployerID=a.id,this.newFileEmployerName=a.companyName,this.options.fileModel.set("employerID",a.id),this.autoGenerateName()},processNewFileSubroAttorneyTypeahead:function(a){this.newFileSubroAttorneyID=a.id,this.options.fileModel.set("subroAttorneyID",a.id)},resetClientRepTypeaheadID:function(){this.options.fileModel.set("clientRepID",void 0),this.$el.find(".typeahead.client_rep_typeahead").typeahead("val","")},saveGeneral:function(a){a.preventDefault(),a.stopPropagation();var b=$(a.currentTarget),c=this.options.fileModel.isNew(),d=this;if(!this.options.fileModel.get("openLienDate")&&!this.options.fileModel.get("interventionOpenDate")&&!this.options.fileModel.get("subroOpenDate")){var e=new App.Helpers.Toast({message:"You have to at least set one open file status",classType:"danger",fadeOut:4e3});return void e.render()}$(".form-general form").valid()&&(b.attr("disabled",!0),b.text("Processing..."),d.options.fileModel.isNew()?c=!0:d.originalSubroPOA!==d.options.fileModel.get("subroPlanOfAction")&&d.options.fileModel.set("oldPlanOfAction",d.originalSubroPOA),0===this.requireMatterID&&this.options.fileModel.set("matter_id",null),this.options.fileModel.set("milestones",this.options.colMilestones.toJSON()),this.addEvent===!1&&this.options.fileModel.get("eventAutoGenerated")?this.options.fileModel.unset("eventAutoGenerated",{silent:!0}):this.addEvent=!1,this.options.fileModel.save({},{success:function(a){var b=new App.Helpers.Toast({message:"File saved successfully.",classType:"success",fadeOut:5e3});b.render(),c&&(d.options.fileModel.unset("eventAutoGenerated"),Backbone.history.navigate("#subro_files/edit/"+a.get("subroFileNumber"),{trigger:!0}))},complete:function(){b.removeAttr("disabled"),b.text("Save File")}}))},autoGenerateName:function(){var a=this.options.fileModel.get("injuredWorkerFirstName")||"",b=this.options.fileModel.get("injuredWorkerLastName")||"",c=this.options.fileModel.get("injuredWorkerMiddleName")?" "+this.options.fileModel.get("injuredWorkerMiddleName"):"",d=this.newFileEmployerName||"",e=b+", "+a+c;d&&(e+=" v "+d),this.options.fileModel.set("subroInternalFileName",e),this.options.fileModel.set("subroOfficialFileName",e)},fileCreationEmployerFormEdit:function(){if(!_.isUndefined(this.newFileEmployerID)){var a=new App.Models.Company({companyID:this.newFileEmployerID,id:this.newFileEmployerID}),b=new App.Views.Files.FileTabs.Employer.EmployerForm({model:a,file:this.options}),c=new App.Helpers.Modal({view:b,sizeModal:"modal-lg"});c.show(),a.fetch(),this.listenTo(a,"sync",function(a){this.newFileEmployerName=a.get("companyName"),this.$el.find('[name="newFileEmployer"]').val(a.get("companyName")),this.autoGenerateName()})}},fileCreationEmployerFormNew:function(){var a=this.$el.find('[name="newFileEmployer"]').val().trim(),b=new App.Models.Company({companyName:a});this.listenToOnce(b,"sync",function(a){this.newFileEmployerName=a.get("companyName"),this.$el.find('[name="newFileEmployer"]').val(a.get("companyName")),this.options.fileModel.set("employerID",a.get("companyID")),this.autoGenerateName()});var c=new App.Views.Files.FileTabs.Employer.EmployerForm({model:b,file:this.options}),d=new App.Helpers.Modal({view:c,sizeModal:"modal-lg"});d.show()},changeStateFlagMilestones:function(){var a=this.$el;a.find(".milestones-expanded").toggle(),a.find(".milestones-inline").toggle()},newClient:function(){var a=new App.Models.Client;this._clientForm(a)},editClient:function(){var a=new App.Models.Client({clientID:this.options.fileModel.get("subroClientID")});this._clientForm(a)},_clientForm:function(a){var b=new App.Views.Tools.ClientEditor.ClientForm({model:a,collection:this.collection,parentClassName:this.className}),c=new App.Helpers.Modal({view:b,sizeModal:"modal-lg"});c.show()},showHideMilestones:function(){var a=this.$el;1===a.find('[name="fileType"] :selected').data("flatfee")||"3"===a.find('[name="fileType"] :selected').val()?a.find("#milestones-container").hide():a.find("#milestones-container").show()},prepopulateData:function(){this.showHideMilestones(),this.requireMatterID=!_.isNull(this.options.fileModel.get("client").requireMatterID)},printLienCurrentStatus:function(){if(this.options.fileModel.get("currentLienFileStatus")){var a={"Lien-Open":"Open","L-Closed":"Closed","L-ReOpen":"Re-Open"}[this.options.fileModel.get("currentLienFileStatus").status];return a?a:this.options.fileModel.get("currentLienFileStatus").status}return"Not Open"},printInterventionCurrentStatus:function(){if(this.options.fileModel.get("currentInterventionFileStatus")){var a={"Intvn-Open":"Open","I-Closed":"Closed","I-ReOpen":"Re-Open"}[this.options.fileModel.get("currentInterventionFileStatus").status];return a?a:this.options.fileModel.get("currentInterventionFileStatus").status}return"Not Open"},printSubroCurrentStatus:function(){if(this.options.fileModel.get("currentSubroFileStatus")){var a={"Subro-Open":"Open","S-Closed":"Closed","S-ReOpen":"Re-Open"}[this.options.fileModel.get("currentSubroFileStatus").status];return a?a:this.options.fileModel.get("currentSubroFileStatus").status}return"Not Open"},changeFileStatus:function(a){a.preventDefault(),a.stopPropagation();var b=void 0,c=$(a.currentTarget).attr("current-popover-id"),d=this.$el.find(a.currentTarget).data("file-type"),e={Lien:"currentLienFileStatus",Intervention:"currentInterventionFileStatus",Subro:"currentSubroFileStatus"}[d],f=this.options.fileModel.get(e)?this.options.fileModel.get(e).status:"";if(this.fileIsClosed&&0!==this.options.fileModel.get("fileStatusID")&&this.options.fileModel.set("openDate",moment().format("YYYY-MM-DD")),c&&($("#"+c).popover("hide"),$('[data-toggle="popover"]').popover("hide")),f.includes("Open")){this.addEvent="subro_file_closes";var g=new App.Helpers.Model,h=new App.Views.Files.GenericEventsModals.ClosureModal({model:g,originalFileStatus:this.originalFileStatus,fileModel:this.options.fileModel,type:"Close",category:d});b=new App.Helpers.Modal({view:h}),b.show()}else if(f.includes("Close")){this.addEvent=!0;var i=new App.Helpers.Model,j=new App.Views.Files.GenericEventsModals.OpenModal({model:i,originalFileStatus:this.originalFileStatus,fileModel:this.options.fileModel,type:"Re-Open",category:d});b=new App.Helpers.Modal({view:j}),b.show()}else{this.addEvent=!0;var k=new App.Helpers.Model,l=new App.Views.Files.GenericEventsModals.OpenModal({model:k,originalFileStatus:this.originalFileStatus,fileModel:this.options.fileModel,type:"Open",category:d});b=new App.Helpers.Modal({view:l}),b.show()}},setStatusList:function(){this.colListSubroStatus.reset(this.options.fileModel.get("previousSubroFileOpens")),this.colListSubroStatus.sortBy="previousOpenDate",this.colListSubroStatus.sortOrder="DESC",this.colListSubroStatus.remove(this.colListSubroStatus.first()),this.colListLienStatus.reset(this.options.fileModel.get("previousLienFileOpens")),this.colListLienStatus.sortBy="previousOpenDate",this.colListLienStatus.sortOrder="DESC",this.colListLienStatus.remove(this.colListLienStatus.first()),this.colListInterventionStatus.reset(this.options.fileModel.get("previousInterventionFileOpens")),this.colListInterventionStatus.sortBy="previousOpenDate",this.colListInterventionStatus.sortOrder="DESC",this.colListInterventionStatus.remove(this.colListInterventionStatus.first())},renderPopoverHistoryFileStatus:function(){var a=this,b=this.$el;b.find(".popover-history-file-status").popover({trigger:"manual",animation:!1,html:!0,content:function(){return a.renderPopoverContentHistoryFileStatus(this)}}).on("mouseenter",function(a){var b=$(a.currentTarget);setTimeout(function(){b.popover("show"),b.siblings(".popover").on("mouseleave",function(){b.popover("hide")})},400)}).on("mouseleave",function(a){var b=$(a.currentTarget);setTimeout(function(){$(".popover").on("mouseleave",function(){b.popover("hide")}),$(".popover:hover").length||b.popover("hide")},400)})},isFileOpened:function(){var a=this.options.fileModel.get("currentSubroFileStatus");return a&&a.status.includes("Open")},isFileLienOpened:function(){var a=this.options.fileModel.get("currentLienFileStatus");return a&&a.status.includes("Open")},isFileInterventionOpened:function(){var a=this.options.fileModel.get("currentInterventionFileStatus");return a&&a.status.includes("Open")},renderPopoverContentHistoryFileStatus:function(a){var b=a.getAttribute("id"),c=$("#"+b),d="",e=c.data("column"),f=this.options.fileModel.get(e),g=new App.Helpers.Collection;return g.reset(f),g.sortBy="previousOpenDate",g.sortOrder="DESC",g.sort(),g.remove(g.first()),0===g.length?"No data found":(g.each(function(a){var b=a.get("previousOpenDate"),c=a.get("eventTypeName");d+="<li>"+c+": "+b+"</li>"}),'<ul id="history'+e+'" class="list-unstyled">'+d+"</ul>")},renderPopoverFileStatus:function(){var a=this.$el,b=this;a.find(".input-file-status").popover({trigger:"manual",animation:!1,html:!0,content:function(){return a.find(".panel-status-flow").html()}}).on("mouseenter",function(a){var c=$(a.currentTarget);setTimeout(function(){c.popover("show");var a=function(a){var c=a.data("file-type"),d="",e={Subro:"currentSubroFileStatus",Lien:"currentLienFileStatus",Intervention:"currentInterventionFileStatus"}[c],f=b.options.fileModel.get(e);d=f&&f.status.includes("Open")?"close":f&&f.status.includes("Closed")?"re-open":"open",a.siblings(".popover").find("button").attr("disabled","disabled"),a.siblings(".popover").find("button").css({opacity:"0.2"}),a.siblings(".popover").find('button[data-action="'+d+'"]').attr("id","btn-file-status"),a.siblings(".popover").find('button[data-action="'+d+'"]').attr("data-file-type",c),a.siblings(".popover").find('button[data-action="'+d+'"]').removeAttr("disabled"),a.siblings(".popover").find('button[data-action="'+d+'"]').removeAttr("style"),a.siblings(".popover").find('button[data-action="'+d+'"]').attr("current-popover-id",a.attr("aria-describedby"))};a(c,b),c.siblings(".popover").on("mouseleave",function(){c.popover("hide")})},400)}).on("mouseleave",function(a){var b=$(a.currentTarget);setTimeout(function(){$(".popover").on("mouseleave",function(){b.popover("hide")}),$(".popover:hover").length||b.popover("hide")},400)})}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.FileSubroTabs)&&(App.Views.Files.FileSubroTabs={}),_.isUndefined(App.Views.Files.FileSubroTabs.InjuredWkr)&&(App.Views.Files.FileSubroTabs.InjuredWkr={}),App.Views.Files.FileSubroTabs.InjuredWkr.Panel=App.Helpers.View.extend({template:App.Templates.filesFileSubroTabsInjuredWkrPanel,className:"FilesFileSubroTabsInjuredWkrPanel",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this.$el;this.listenTo(this.options.fileModel,"change:plaintiffFirmTypeahead change:plaintiffTypeahead change:workerCompFirmTypeahead change:workerCompTypeahead ",function(a){var c=_.first(_.keys(a.changed));"plaintiffFirmTypeahead"===c&&b.find(".typeahead.plaintiffFirmTypeahead").typeahead("val",this.options.fileModel.get("plaintiffFirmTypeahead")),"plaintiffTypeahead"===c&&b.find(".typeahead.plaintiffTypeahead").typeahead("val",this.options.fileModel.get("plaintiffTypeahead")),"workerCompFirmTypeahead"===c&&b.find(".typeahead.workerCompFirmTypeahead").typeahead("val",this.options.fileModel.get("workerCompFirmTypeahead")),"workerCompTypeahead"===c&&b.find(".typeahead.workerCompTypeahead").typeahead("val",this.options.fileModel.get("workerCompTypeahead"))})},events:{"click #newAAfirm_plaintiffAttorney":"newAAFirmForm","click #newAAfirm_workerComp":"newAAFirmForm","click #editAAfirm_plaintiffAttorney":"editAAFirmForm","click #editAAfirm_workerComp":"editAAFirmForm","click #newAA_plaintiffAttorney":"newAAForm","click #newAA_workerComp":"newAAForm","click #editAA_plaintiffAttorney":"editAAForm","click #editAA_workerComp":"editAAForm","click .update-injuredWorker":"updateInjuredWorker","click #copy-to-address":"copy_to_address","focusout .typeahead.plaintiffFirmTypeahead":"changePlaintiffFirmTypeahead","focusout .typeahead.plaintiffTypeahead":"changePlaintiffTypeahead","focusout .typeahead.workerCompFirmTypeahead":"changeWorkerCompFirmTypeahead","focusout .typeahead.workerCompTypeahead":"changeWorkerCompTypeahead"},editAAFirmForm:function(a){var b,c,d=$(a.currentTarget).attr("id");if("editAAfirm_plaintiffAttorney"===d?(b=this.options.fileModel.get("plaintiffFirmID"),c="processPlaintiffFirmTypeahead"):"editAAfirm_workerComp"===d&&(b=this.options.fileModel.get("workerCompFirmID"),c="processWorkerCompFirmTypeahead"),b){var e=new App.Models.Firm({firmID:b}),f=new App.Views.Files.FileTabs.ApplicantAttorney.FirmApplicantAttorney({model:e,file:this,fileModel:this.options.fileModel,parentClassName:this.className,parentActionName:c,modalTitle:"Edit Existing Applicant Attorney Firm"}),g=new App.Helpers.Modal({view:f});g.show(),e.fetch()}},newAAFirmForm:function(a){var b,c=$(a.currentTarget).attr("id");"newAAfirm_plaintiffAttorney"===c?b="processPlaintiffFirmTypeahead":"newAAfirm_workerComp"===c&&(b="processWorkerCompFirmTypeahead");var d=new App.Models.Firm,e=new App.Views.Files.FileTabs.ApplicantAttorney.FirmApplicantAttorney({model:d,file:this,parentClassName:this.className,parentActionName:b,fileModel:this.options.fileModel,modalTitle:"Add New Applicant Attorney Firm"}),f=new App.Helpers.Modal({view:e});f.show()},newAAForm:function(a){var b,c=$(a.currentTarget).attr("id"),d=new App.Models.Lawyer;"newAA_plaintiffAttorney"===c?(d.set("firmID",this.options.fileModel.get("plaintiffFirmID")),b="processPlaintiffTypeahead"):"newAA_workerComp"===c&&(d.set("firmID",this.options.fileModel.get("workerCompFirmID")),b="processWorkerCompTypeahead");var e=new App.Views.Files.FileTabs.ApplicantAttorney.ApplicantAttorneyForm({model:d,file:this,parentClassName:this.className,parentActionName:b,fileModel:this.options.fileModel,modalTitle:"Add New Applicant Attorney"}),f=new App.Helpers.Modal({view:e,sizeModal:"modal-lg"});f.show()},editAAForm:function(a){var b,c,d=$(a.currentTarget).attr("id");if("editAA_plaintiffAttorney"===d?(c=this.options.fileModel.get("plaintiffID"),b="processPlaintiffTypeahead"):"editAA_workerComp"===d&&(c=this.options.fileModel.get("workerCompID"),b="processWorkerCompTypeahead"),!_.isUndefined(c)&&0!==c){var e=new App.Models.Lawyer({lawyerID:c}),f=new App.Views.Files.FileTabs.ApplicantAttorney.ApplicantAttorneyForm({model:e,file:this,parentClassName:this.className,parentActionName:b,fileModel:this.options.fileModel,modalTitle:"Edit Existing Applicant Attorney"}),g=new App.Helpers.Modal({view:f,sizeModal:"modal-lg"});g.show(),e.fetch()}},afterRender:function(){var a=this;App.Helpers.addMask('[name="homePhone"]',"(999) 999-9999"),App.Helpers.addMask('[name="cellPhone"]',"(999) 999-9999"),App.Helpers.addMask('[name="applicantSSN"]',"999-99-9999"),App.Helpers.initTypeahead({view:this,elemClass:".typeahead.plaintiffFirmTypeahead",urlBuild:{url:"api/typeahead_controller/search_firms",resource:function(){return a.options.fileModel.get("plaintiffID")?a.options.fileModel.get("plaintiffID"):""}},processFunction:$.proxy(this.processPlaintiffFirmTypeahead,this)}),App.Helpers.initTypeahead({view:this,elemClass:".typeahead.plaintiffTypeahead",urlBuild:{url:"api/typeahead_controller/search_applicant_attorney",resource:function(){return a.options.fileModel.get("plaintiffFirmID")?a.options.fileModel.get("plaintiffFirmID"):""}},processFunction:$.proxy(this.processPlaintiffTypeahead,this)}),App.Helpers.initTypeahead({view:this,elemClass:".typeahead.workerCompFirmTypeahead",urlBuild:{url:"api/typeahead_controller/search_firms",resource:function(){return a.options.fileModel.get("workerCompID")?a.options.fileModel.get("workerCompID"):""}},processFunction:$.proxy(this.processWorkerCompFirmTypeahead,this)}),App.Helpers.initTypeahead({view:this,elemClass:".typeahead.workerCompTypeahead",urlBuild:{url:"api/typeahead_controller/search_applicant_attorney",resource:function(){return a.options.fileModel.get("workerCompFirmID")?a.options.fileModel.get("workerCompFirmID"):""}},processFunction:$.proxy(this.processWorkerCompTypeahead,this)})},processPlaintiffFirmTypeahead:function(a){this.options.fileModel.set("plaintiffFirmID",a.id),this.options.fileModel.set("plaintiffFirmTypeahead",a.firmName)},changePlaintiffFirmTypeahead:function(a){var b=$(a.currentTarget),c=b.val().trim();_.isEmpty(c)&&this.options.fileModel.set("plaintiffFirmID",0)},processPlaintiffTypeahead:function(a){var b,c=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],d=this;this.options.fileModel.set("plaintiffID",a.id),this.options.fileModel.set("plaintiffTypeahead",a.typeaheadResult),a.firmID&&(this.options.fileModel.set("plaintiffFirmID",a.firmID),this.options.fileModel.set("plaintiffFirmTypeahead",a.firmName)),c&&(b=new App.Models.Lawyer({lawyerID:a.id,first:a.first,last:a.last}),b.fetch({success:function(a){d.options.modPlaintiff.clear({silent:!0}),d.options.modPlaintiff.set(a.attributes)}}))},changePlaintiffTypeahead:function(a){var b=$(a.currentTarget),c=b.val().trim();_.isEmpty(c)&&(this.options.fileModel.set("plaintiffID",0),this.options.modPlaintiff.clear())},processWorkerCompFirmTypeahead:function(a){this.options.fileModel.set("workerCompFirmID",a.id),this.options.fileModel.set("workerCompFirmTypeahead",a.firmName)},changeWorkerCompFirmTypeahead:function(a){var b=$(a.currentTarget),c=b.val().trim();_.isEmpty(c)&&this.options.fileModel.set("workerCompFirmID",0)},processWorkerCompTypeahead:function(a){var b,c=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],d=this;this.options.fileModel.set("workerCompID",a.id),this.options.fileModel.set("workerCompTypeahead",a.typeaheadResult),a.firmID&&(this.options.fileModel.set("workerCompFirmID",a.firmID),this.options.fileModel.set("workerCompFirmTypeahead",a.firmName)),c&&(b=new App.Models.Lawyer({lawyerID:a.id,first:a.first,last:a.last}),b.fetch({success:function(a){d.options.modWorkerComp.clear({silent:!0}),d.options.modWorkerComp.set(a.attributes)}}))},changeWorkerCompTypeahead:function(a){var b=$(a.currentTarget),c=b.val().trim();_.isEmpty(c)&&(this.options.fileModel.set("workerCompID",0),this.options.modWorkerComp.clear())},copy_to_address:function(){this.options.fileModel.set("injuredWorkerPhysicalAddress",this.options.fileModel.get("injuredWorkerMailingAddress")),this.options.fileModel.set("injuredWorkerPhysicalCity",this.options.fileModel.get("injuredWorkerMailingCity")),this.options.fileModel.set("injuredWorkerPhysicalState",this.options.fileModel.get("injuredWorkerMailingState")),this.options.fileModel.set("injuredWorkerPhysicalZip",this.options.fileModel.get("injuredWorkerMailingZip"))},updateInjuredWorker:function(a){a.preventDefault(),a.stopPropagation();var b=this.$el,c=this;if($(".panel-injuredWorker form").valid()){this.options.fileModel.set("injuredWorkerDOB",b.find('[name="injuredWorkerDOB"]').val()),this.options.fileModel.set("injuredWorkerDOH",b.find('[name="injuredWorkerDOH"]').val()),this.options.fileModel.set("injuredWorkerHomePhone",b.find('[name="homePhone"]').val()),this.options.fileModel.set("injuredWorkerCellPhone",b.find('[name="cellPhone"]').val()),this.options.fileModel.set("injuredWorkerSSN",b.find('[name="injuredWorkerSSN"]').val());var d=c.options.modPlaintiff.toJSON(),e=c.options.modWorkerComp.toJSON();this.options.fileModel.set("plaintiff",d?d:void 0),this.options.fileModel.set("workerComp",e?e:void 0),this.options.fileModel.save({},{success:function(){var a=new App.Helpers.Toast({message:"Injured Worker updated successfully.",classType:"success",fadeOut:5e3});a.render()}})}}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.FileSubroTabs)&&(App.Views.Files.FileSubroTabs={}),_.isUndefined(App.Views.Files.FileSubroTabs.SubroAtty)&&(App.Views.Files.FileSubroTabs.SubroAtty={}),App.Views.Files.FileSubroTabs.SubroAtty.Panel=App.Helpers.View.extend({template:App.Templates.filesFileSubroTabsSubroAttyPanel,className:"FilesFileSubroTabsSubroAttyPanel",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.listenTo(this.options.collection,"add",function(){b.setPrimaryDA(),b.orderDATable()})},events:{"click #save-file-DAs":"saveDAsToFile"},afterRender:function(){this.setPrimaryDA(),this.orderDATable(),App.Helpers.initTypeahead({view:this,elemClass:".typeahead.da_typeahead",urlBuild:{url:"api/typeahead_controller/search_defense_attorney"},processFunction:$.proxy(this.processDATypeahead,this),unmatchedProcessFunction:$.proxy(this.processUnmatchedDATypeahead,this),cleanValueAfterEnter:!0})},processDATypeahead:function(a){var b=new App.Models.DefenseAttorney;a.uAttId=a.id,b.set(a),this.options.collection.add(b),this.$el.find('[name="defenseAttorneyName"]').typeahead("val","")},processUnmatchedDATypeahead:function(){this.DAid=void 0,this.$el.find(".typeahead.da_typeahead").typeahead("val","")},saveDAsToFile:function(a){a.preventDefault(),a.stopPropagation();var b=this,c=new App.Models.FileDefenseAttorneys;c.url="/api/files_controller/file_subro_attorneys";var d=this.$el,e=d.find('[name="uAttId"]:checked'),f=[];if(_.each(e,function(a){a=$(a),f.push(a.attr("id"))}),f.length&&_.isUndefined(d.find('[name="primaryDA"]:checked').val())){var g=new App.Helpers.Toast({message:"Error: You must choose a primary DA.",classType:"danger",fadeOut:5e3});return void g.render()}c.set("subroFileNumber",this.options.subroFileNumber),c.set("da_ids",f),c.set("primaryDAid",d.find('[name="primaryDA"]:checked').val()),c.save({},{success:function(a,c){b.options.collection.reset(),b.options.collection.add(c),b.options.collection.original=b.options.collection.toJSON();var d=new App.Helpers.Toast({message:"Subro Attorneys saved correctly.",classType:"success",fadeOut:5e3});d.render(),b.options.fileModel.set("subroAttorneys",b.options.collection.toJSON());var e=$(".FilesDashboardSubro").data("view");e.getPrimarySAInfo(b.options.fileModel.get("subroAttorneys"))},error:function(a,b){g=new App.Helpers.Toast({message:b.responseJSON.error,classType:"danger",fadeOut:5e3}),g.render()}})},orderDATable:function(){var a=this.$el,b=a.find("#da_table tbody");b.find("input:checkbox").attr("disabled",!1);var c=b.find("tr input:radio:checked").parent().parent();c.find("input:checkbox").attr("disabled","disabled"),b.find("tr").sort(function(a,b){return $("td:nth-child(2)",a).text().localeCompare($("td:nth-child(2)",b).text())}).appendTo(b),c.insertBefore(b.find("tr:first"))},setPrimaryDA:function(){var a=this.$el;this.options.collection.each(function(b){1===b.get("primaryDA")&&a.find('[name="primaryDA"][value="'+b.get("uAttId")+'"]').attr("checked","checked")})}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.FileTabs)&&(App.Views.Files.FileTabs={}),_.isUndefined(App.Views.Files.FileTabs.AddressPos)&&(App.Views.Files.FileTabs.AddressPos={}),App.Views.Files.FileTabs.AddressPos.AddressForm=App.Helpers.View.extend({template:App.Templates.filesFileTabsAddressPosAddressForm,className:"addressForm",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.objAddress=this.model.toJSON(),this.listenTo(this.model,"request",function(){this.showLoader(".modal-body")}),this.listenTo(this.model,"sync error",function(){this.removeLoader(".modal-body")})},events:{"click .btnSave":"saveAddress"},afterRender:function(){var a=$(".addressPos").data("view").getGroupTypeCategory();_.contains(a,"Others")||a.push("Others"),this.groupTypeCategory=a},saveAddress:function(){var a=this,b="",c=!0,d=$(".addressPos").data("view");return this.$el.find(".formAddressMaster").valid()?(this.model.isNew()||(c=!1,b=this.model.get("typeCategory")),this.model.set(this.objAddress),void(this.model instanceof App.Models.AddressMaster?(this.model.isNew()&&(this.model.set("typeCategory",this.objAddress.typeCategory),this.model.set("fileNumber",this.options.fileModel.getFileNumber())),this.model.set("moduleID",this.options.fileModel.get("module")),this.model.save({},{success:function(b){a.collection.add(b)},complete:function(){var d=$(".addressPos").data("view"),e=d.getGroupTypeCategory();c===!1&&0===_.where(e,{key:b}).length&&(d.typeCategorySelected="All"),a.collection.sort(),d.groupTypeCategory=d.getGroupTypeCategory(),d.filterTypeCategory(),a.elementModal.modal("hide"),d.checkAddressesMasterUsed()}})):(this.collection.set(this.model,{remove:!1}),a.elementModal.modal("hide"),d.checkAddressesMasterUsed()))):!1}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.FileTabs)&&(App.Views.Files.FileTabs={}),_.isUndefined(App.Views.Files.FileTabs.AddressPos)&&(App.Views.Files.FileTabs.AddressPos={}),App.Views.Files.FileTabs.AddressPos.AddressesMaster=App.Helpers.View.extend({template:App.Templates.filesFileTabsAddressPosAddressesMaster,className:"addressesMaster",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{},editAddressMaster:function(){var a=new App.Views.Files.FileTabs.AddressPos.AddressForm({model:this.model,fileModel:this.options.fileModel,collection:this.options.colAddressMaster});new App.Helpers.Modal({view:a}).show()},removeAddressMaster:function(){var a=new App.Views.Shared.AlertView({processFunction:"processRemoveAddressMaster",viewClass:".addressesMaster",params:{addressModel:this.model},msg:"Are you sure to remove this Address?",title:"Remove addres from master"}),b=new App.Helpers.Modal({view:a});b.show()},processRemoveAddressMaster:function(a){var b=this,c=$(".addressPos").data("view");a.addressModel.destroy({success:function(a,b){var d=b.message||"Address Master deleted successful",e=new App.Helpers.Toast({message:d,classType:"success",fadeOut:5e3});e.render(),c.checkAddressesMasterUsed()},error:function(a,c){var d=c.responseJSON.error||"You do not have permission to delete the master address.",e=new App.Helpers.Toast({message:d,classType:"danger",fadeOut:5e3});e.render(),b.options.colAddressMaster.add(a)},complete:function(){c.removeLoader(".wrapper")}})},selectAddressMaster:function(){var a=this.model.toJSON(),b=new Backbone.Model;a.sortOrder=this.options.colAddresses.length,delete a.addressMasterID,b.set(a),this.options.colAddresses.add(b)},afterRender:function(){this.$el.addClass("container-addresses-"+this.options.typeCategory)}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.FileTabs)&&(App.Views.Files.FileTabs={}),_.isUndefined(App.Views.Files.FileTabs.AddressPos)&&(App.Views.Files.FileTabs.AddressPos={}),App.Views.Files.FileTabs.AddressPos.Panel=App.Helpers.View.extend({template:App.Templates.filesFileTabsAddressPosPanel,className:"addressPos",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.colAddressMaster=new App.Collections.AddressMaster,this.colAddressSets=new App.Collections.AddressSets,this.model=new App.Models.AddressSet,this.colAddresses=new App.Helpers.Collection,this.colAddresses.sortOrder="asc",this.colAddresses.sortBy="sortOrder",this.listenTo(this.colAddresses,"add",function(a){b.addAddressSet(a,!0)}),this.listenTo(this.colAddresses,"sort reset",this.renderAddresses),
this.listenTo(this.colAddresses,"change:typeCategory change:address change:oldAddress change:doNotUse change:note change:primaryLocation",this.renderAddresses),this.listenTo(this.colAddressMaster,"request",function(){this.showLoader(".wrapper")}),this.listenTo(this.colAddressMaster,"sync  error",function(){this.removeLoader(".wrapper"),this.renderAddressesMaster()}),this.setNameSelected="",this.groupTypeCategory=[],this.typeCategorySelected="All",this.addressSetParents=[],this.allowCloneSet=!1},events:{"change .selectSet":"changeSet","click .btn-copySet":"handlerCopySet","click .btn-saveSet":"saveSet","click .btn-removeSet":"removeSet","click .btn-printPost":"printPost","click .btn-printLabels":"printLabels","click .btn-printEnvelope":"printEnvelope","change [name=selectTypeCategory]":"filterTypeCategory"},handlerCopySet:function(){var a=prompt("New Set Name:"),b=this.$el,c=b.find(".selectSet :selected").val(),d=new App.Models.AddressSet,e=this;s.isBlank(a)||d.fetch({url:"/api/address_sets_controller/copy_set",type:"POST",data:JSON.stringify({setNameSelected:c,setNameNew:a,fileNumber:this.options.fileModel.getFileNumber()}),success:function(c,d){var f=d.message,g=e.fetchAddressSets();$.when(g).then(function(){b.find(".selectSet").val(a).trigger("change");var c=new App.Helpers.Toast({message:f,classType:"success",fadeOut:5e3});c.render()})},error:function(a,b){var c,d="";_.has(b.responseJSON,"Error")&&(d=b.responseJSON.Error,c=new App.Helpers.Toast({message:d,classType:"danger",fadeOut:5e3}),c.render())}})},filterTypeCategory:function(){var a=this.$el;"All"===this.typeCategorySelected?a.find(".addressesMaster").removeClass("hidden"):(a.find(".container-addresses-"+this.typeCategorySelected).removeClass("hidden"),a.find(".addressesMaster:not(.container-addresses-"+this.typeCategorySelected+")").addClass("hidden"))},changeSet:function(a){var b=$(a.currentTarget),c=b.val(),d=this.$el,e=d.find(".formAddressSet").data("validator"),f=[];return e&&e.resetForm(),""===c?(this.$el.find(".btn-removeSet").addClass("display-none"),this.model.clear(),this._removeAddresses(),this.colAddresses.reset([]),void(this.allowCloneSet=!1)):(this.allowCloneSet=!0,f=this._getAddresses(c),this.model.set({setName:c,addresses:f}),this.colAddresses.reset(this.model.get("addresses")),this.renderAddresses(),void d.find(".btn-removeSet").removeClass("display-none"))},_getAddresses:function(a){var b=this.colAddressSets.where({setName:a}),c=[];return _.each(b,function(a){c.push(a.toJSON())}),c},saveSet:function(){var a;this.model.set("setNameSelected",this.setNameSelected),this.model.set("addresses",this.colAddresses.toJSON()),this.model.set("fileNumber",this.options.fileModel.getFileNumber()),this.model.set("moduleID",this.options.fileModel.get("module"));var b=this,c=this.$el;if(0===this.colAddresses.length)return a=new App.Helpers.Toast({message:"You need to select an address",classType:"danger",fadeOut:5e3}),a.render(),!1;if(!c.find(".formAddressSet").valid())return!1;var d=this.model.get("setName");return _.isEmpty(this.setNameSelected)&&b.colAddressSets.where({setName:d}).length>0||!_.isEmpty(this.setNameSelected)&&this.setNameSelected!==d&&b.colAddressSets.where({setName:d}).length>0?(a=new App.Helpers.Toast({message:"The set name "+d+" is not available.",classType:"danger",fadeOut:5e3}),a.render(),!1):(this.showLoader(".wrapper"),void this.model.save({},{success:function(a,c){var d=c||[],e=[],f=a.get("setName");b.colAddressSets.reset(d);var g=new App.Helpers.Toast({message:"Addresses stored successfully.",classType:"success",fadeOut:5e3});g.render(),e=b._getAddresses(f),b.colAddresses.reset(e),a.clear(),a.set({setName:f,addresses:e}),b.$el.find(".btn-removeSet").removeClass("display-none"),b.handlerSyncAddressesSet(c),b.setNameSelected=f,b.allowCloneSet=!0},error:function(a,b){var c=b.responseJSON.error||"Error tryting to save the Address Set",d=new App.Helpers.Toast({message:c,classType:"danger",fadeOut:5e3});d.render()},complete:function(){b.removeLoader(".wrapper")}}))},removeSet:function(){var a=new App.Views.Shared.AlertView({processFunction:"processRemoveSet",viewClass:".addressPos",msg:"Are you sure to remove this address set?",title:"Delete Set"}),b=new App.Helpers.Modal({view:a});b.show()},processRemoveSet:function(){var a=this;this.showLoader(".wrapper"),this.model.fetch({type:"DELETE",data:JSON.stringify({setName:this.setNameSelected,fileNumber:this.options.fileModel.getFileNumber()}),success:function(b,c){var d=a.colAddressSets.where({setName:a.setNameSelected}),e=c.message;_.each(d,function(b){a.colAddressSets.remove(b)}),a._removeAddresses(),a.colAddresses.reset([]),a.handlerSyncAddressesSet(a.colAddressSets.toJSON()),a.$el.find(".btn-removeSet").addClass("display-none");var f=new App.Helpers.Toast({message:e,classType:"success",fadeOut:5e3});f.render(),b.clear(),a.setNameSelected="",a.allowCloneSet=!1},complete:function(){a.removeLoader(".wrapper")}},{wait:!0})},afterRender:function(){this.fetchAddressMaster(),this.fetchAddressSets(),this.$el.find(".table-address-set tbody").sortable({handle:".controlMove",placeholder:"ui-state-highlight",update:$.proxy(this.updateOrderAddressesSet,this)})},updateOrderAddressesSet:function(){var a=this;this.$el.find(".table-address-set tbody tr").each(function(b){var c=$(this).data("cid");a.colAddresses.each(function(a){a.cid===c&&a.set("sortOrder",b-1)})}),this.colAddresses.sort()},fetchAddressMaster:function(){this.colAddressMaster.fetch({url:"/api/address_master_controller/get_addresses/?fileNumber="+this.options.fileModel.getFileNumber()})},fetchAddressSets:function(){var a=this,b=this.colAddressSets.fetch({url:"/api/address_sets_controller/get_sets/?fileNumber="+this.options.fileModel.getFileNumber(),success:function(b,c){a.handlerSyncAddressesSet(c)}});return b},handlerSyncAddressesSet:function(a){this.addressSetParents=_.sortBy(_.keys(_.groupBy(a,"setName")))},newAddressMaster:function(){var a=new App.Models.AddressMaster,b=new App.Views.Files.FileTabs.AddressPos.AddressForm({model:a,fileModel:this.options.fileModel,collection:this.colAddressMaster});new App.Helpers.Modal({view:b}).show()},addAddressSet:function(a,b){var c=new App.Views.Files.FileTabs.AddressPos.TrAddressSet({model:a,fileModel:this.options.fileModel,collection:this.colAddresses});App.Helpers.append(c,".table-address-set tbody"),b&&this.checkAddressesMasterUsed()},checkAddressesMasterUsed:function(){var a=this.$el;a.find(".lbl-address-used").removeClass("hidden"),a.find(".lbl-address-used").addClass("hidden"),a.find(".table-address-set tbody tr:not(.col-hidden)").each(function(){var b=$(this).find("td:eq(2) .address").html(),c=$(this).find("td:eq(1) .typeCategory").text();a.find(".container-addresses-"+c+" .table-address tbody tr").each(function(){var a=$(this).find("td:eq(1) .address").html();b===a&&$(this).find(".lbl-address-used").removeClass("hidden")})})},renderAddresses:function(){var a=this;this._removeAddresses(),this.colAddresses.each(function(b){a.addAddressSet(b)}),this.checkAddressesMasterUsed()},_removeAddresses:function(){this.$el.find(".table-address-set tbody tr").each(function(){App.Helpers.cleanView($(this).data("view"))})},getGroupTypeCategory:function(){this.colAddressMaster.sort();var a=_.keys(this.colAddressMaster.groupBy("typeCategory"));return 0===a.length?[]:a},renderAddressesMaster:function(){var a=this;this.$el.find(".container-addresses-master > div").each(function(){App.Helpers.cleanView($(this).data("view"))}),this.groupTypeCategory=this.getGroupTypeCategory(),_.each(this.groupTypeCategory,function(b){var c=a.colAddressMaster.where({typeCategory:b}),d=new App.Collections.AddressMaster;if(d.sortOrder="asc",d.sortBy="address",0!==c.length){d.reset(c);var e=new App.Views.Files.FileTabs.AddressPos.AddressesMaster({typeCategory:b,fileModel:a.options.fileModel,collection:d,colAddressMaster:a.colAddressMaster,colAddresses:a.colAddresses});App.Helpers.append(e,".container-addresses-master")}}),this.filterTypeCategory()},printPost:function(){var a=new App.Views.Files.FileTabs.AddressPos.ProofServiceForm({fileModel:this.options.fileModel,colAddresses:this.colAddresses});new App.Helpers.Modal({view:a}).show()},printLabels:function(){var a=$('<form target="_blank" action="api/letters_controller/labels" method="post"></form>'),b=$('<input type="hidden" name="fileNumber" />'),c=$('<input type="hidden" name="addresses" />'),d=$('<input type="hidden" name="'+$.cookie("token_name")+'" value="'+$.cookie("cf_csrf_cookie")+'" />'),e=[];_.each(this.colAddresses.models,function(a){e.push(App.Helpers.FormatterHtml(a.get("address")))}),c.val(JSON.stringify(e)),b.val(this.options.fileModel.getFileNumber()),a.append(b),a.append(c),a.append(d),$("body").append(a),a.submit()},printEnvelope:function(){var a=$('<form target="_blank" action="api/letters_controller/envelope" method="post"></form>'),b=$('<input type="hidden" name="fileNumber" />'),c=$('<input type="hidden" name="addresses" />'),d=$('<input type="hidden" name="'+$.cookie("token_name")+'" value="'+$.cookie("cf_csrf_cookie")+'" />'),e=[];_.each(this.colAddresses.models,function(a){e.push(App.Helpers.FormatterHtml(a.get("address")))}),c.val(JSON.stringify(e)),b.val(this.options.fileModel.getFileNumber()),a.append(b),a.append(c),a.append(d),$("body").append(a),a.submit()}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.FileTabs)&&(App.Views.Files.FileTabs={}),_.isUndefined(App.Views.Files.FileTabs.AddressPos)&&(App.Views.Files.FileTabs.AddressPos={}),App.Views.Files.FileTabs.AddressPos.ProofServiceForm=App.Helpers.View.extend({template:App.Templates.filesFileTabsAddressPosProofServiceForm,className:"proofServiceForm",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.model=new App.Helpers.Model,this.model.set("eFile",0),this.colUsers=new App.Collections.Users,this.colUsers.sortOrder="asc",this.colUsers.sortBy="fullName"},events:{"click .btnGeneratePDF":"generatePdf"},afterRender:function(){this.colUsers.fetch({url:"api/files_controller/get_users_with_signature"})},generatePdf:function(){if($("#proof-service").valid()){var a=$('<form target="_blank" action="api/letters_controller/pos" method="post"></form>'),b=$('<input type="hidden" name="fileNumber" />'),c=$('<input type="hidden" name="model" />'),d=$('<input type="hidden" name="addresses" />'),e=$('<input type="hidden" name="'+$.cookie("token_name")+'" value="'+$.cookie("cf_csrf_cookie")+'" />'),f=[];_.each(this.options.colAddresses.models,function(a){f.push(App.Helpers.FormatterHtml(a.get("address")))}),d.val(JSON.stringify(f)),b.val(this.options.fileModel.getFileNumber()),c.val(JSON.stringify(this.model.toJSON())),a.append(b),a.append(d),a.append(c),a.append(e),$("body").append(a),a.submit()}}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.FileTabs)&&(App.Views.Files.FileTabs={}),_.isUndefined(App.Views.Files.FileTabs.AddressPos)&&(App.Views.Files.FileTabs.AddressPos={}),App.Views.Files.FileTabs.AddressPos.TrAddressSet=App.Helpers.View.extend({template:App.Templates.filesFileTabsAddressPosTrAddressSet,className:"trAddressSet ui-state-default",tagName:"tr",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{"click .btn-editAddressSet":"editAddressSet","click .btn-removeAddressSet":"removeAddressSet"},editAddressSet:function(a){var b=$(a.currentTarget).closest("tr").data("cid"),c=this.collection.get(b),d=new App.Views.Files.FileTabs.AddressPos.AddressForm({model:c,fileModel:this.options.fileModel,collection:this.collection});new App.Helpers.Modal({view:d}).show()},removeAddressSet:function(a){var b=$(a.currentTarget).closest("tr").data("cid"),c=new App.Views.Shared.AlertView({processFunction:"processRemoveAddressSet",viewClass:".trAddressSet",params:{cid:b},msg:"Are you sure to remove this Address?",title:"Remove address from set"}),d=new App.Helpers.Modal({view:c});d.show()},processRemoveAddressSet:function(a){var b=this.collection.get(a.cid),c=$(".addressPos").data("view");this.collection.remove(b),App.Helpers.cleanView(this),c.updateOrderAddressesSet()},afterRender:function(){var a=this.$el;a.data("cid",this.model.cid),a.find(".address").html(App.Helpers.FormatterHtml(this.model.get("address"))),this.model.get("primaryLocation")||a.find(".label-primary-location").remove(),this.model.get("oldAddress")||a.find(".label-old").remove(),this.model.get("doNotUse")||a.find(".label-do-not-use").remove(),_.isEmpty(this.model.get("note"))?a.find(".label-note").remove():a.find(".label-note").text(this.model.get("note")),a.find(".typeCategory").text(this.model.get("typeCategory"))}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.FileTabs)&&(App.Views.Files.FileTabs={}),_.isUndefined(App.Views.Files.FileTabs.Applicant)&&(App.Views.Files.FileTabs.Applicant={}),App.Views.Files.FileTabs.Applicant.Panel=App.Helpers.View.extend({template:App.Templates.filesFileTabsApplicantPanel,className:"applicant_panel",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{"click .update-applicant":"updateApplicant","click #copy-to-address":"copy_to_address"},afterRender:function(){App.Helpers.addMask('[name="homePhone"]',"(999) 999-9999"),App.Helpers.addMask('[name="cellPhone"]',"(999) 999-9999"),App.Helpers.addMask('[name="applicantSSN"]',"999-99-9999")},copy_to_address:function(){this.options.fileModel.set("applicantPhysicalAddress",this.options.fileModel.get("applicantMailingAddress")),this.options.fileModel.set("applicantPhysicalCity",this.options.fileModel.get("applicantMailingCity")),this.options.fileModel.set("applicantPhysicalState",this.options.fileModel.get("applicantMailingState")),this.options.fileModel.set("applicantPhysicalZip",this.options.fileModel.get("applicantMailingZip"))},updateApplicant:function(a){a.preventDefault(),a.stopPropagation();var b=this.$el;$("#panel-applicant form").valid()&&(this.options.fileModel.set("applicantDOB",b.find('[name="applicantDOB"]').val()),this.options.fileModel.set("applicantDOH",b.find('[name="applicantDOH"]').val()),this.options.fileModel.set("applicantHomePhone",b.find('[name="homePhone"]').val()),this.options.fileModel.set("applicantCellPhone",b.find('[name="cellPhone"]').val()),this.options.fileModel.set("applicantSSN",b.find('[name="applicantSSN"]').val()),this.options.fileModel.save({},{success:function(){var a=new App.Helpers.Toast({message:"Applicant updated successfully.",classType:"success",fadeOut:5e3});a.render()}}))}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.FileTabs)&&(App.Views.Files.FileTabs={}),_.isUndefined(App.Views.Files.FileTabs.ApplicantAttorney)&&(App.Views.Files.FileTabs.ApplicantAttorney={}),App.Views.Files.FileTabs.ApplicantAttorney.ApplicantAttorneyFirms=App.Helpers.View.extend({template:App.Templates.filesFileTabsApplicantAttorneyApplicantAttorneyFirms,className:"applicantAttorneyFirms",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.firmModel=new App.Models.lawyerFirm;var b=this;this.listenTo(this.firmModel,"request",function(){b.showLoader(".modal-body")}),this.listenTo(this.firmModel,"sync error",function(){b.removeLoader(".modal-body")})},events:{"click #save-assign-firms":"saveAssignFirms","click .icon-typeahead-down":"showAllEntities"},saveAssignFirms:function(a){a.preventDefault(),a.stopPropagation();var b=this,c=this.$el;c.find("#error").html("");var d=this.$el.find('[name="firms"]:checked'),e=[];return _.each(d,function(a){a=$(a),e.push(a.attr("id"))}),e.length&&_.isUndefined(this.$el.find('[name="primaryFirm"]:checked').val())?void c.find("#error").html('<div class="alert alert-danger" role="alert">Error: You must choose a primary firm</div>'):(this.firmModel.set("lawyerID",this.options.modAA.get("lawyerID")),this.firmModel.set("firm_ids",e),this.firmModel.set("primaryFirmID",this.$el.find('[name="primaryFirm"]:checked').val()),void this.firmModel.save({},{success:function(a,c){b.elementModal.modal("hide"),b.options.aaCompanies.reset(),b.options.aaCompanies.add(c);var d=b.options.aaCompanies.findWhere({isPrimaryFirm:1}),e=$(".applicant_attorney_panel").data("view");d?(b.options.fileModel.set("applicantAttorneyFirmTypeahead",d.get("firmName")),e.aaFirmTypeaheadID=d.get("firmID"),e.$el.find(".typeahead.aaFirm_typeahead").typeahead("val",d.get("firmName")),e.$el.find(".typeahead.aaFirm_typeahead").data("datum",{firmName:d.get("firmName")})):e.processUnmatchedAAFirmsTypeahead();var f=new App.Helpers.Toast({message:"Firm assignment saved correctly",classType:"success",fadeOut:5e3});f.render()}}))},processAAFirmsTypeahead:function(a){this.$el.find(".typeahead.aa-firm").typeahead("val","");var b=new App.Models.Firm;b.set(a),this.collection.add(b),this._selectPrimaryFirm()},afterRender:function(){App.Helpers.initTypeahead({view:this,elemClass:".typeahead.aa-firm",urlBuild:{url:"api/typeahead_controller/search_firms"},processFunction:$.proxy(this.processAAFirmsTypeahead,this),nameKey:"firmName",cleanValueAfterEnter:!0}),this._selectPrimaryFirm()},_selectPrimaryFirm:function(){var a=this;_.each(this.collection.models,function(b){1===b.get("isPrimaryFirm")&&a.$el.find('[name="primaryFirm"][value="'+b.get("firmID")+'"]').attr("checked","checked")})}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.FileTabs)&&(App.Views.Files.FileTabs={}),_.isUndefined(App.Views.Files.FileTabs.ApplicantAttorney)&&(App.Views.Files.FileTabs.ApplicantAttorney={}),App.Views.Files.FileTabs.ApplicantAttorney.ApplicantAttorneyForm=App.Helpers.View.extend({template:App.Templates.filesFileTabsApplicantAttorneyApplicantAttorneyForm,className:"applicantAttorneyForm",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.collection=new App.Collections.Firms,this.listenTo(this.model,"request",function(){b.showLoader(".modal-body")}),this.listenTo(this.model,"sync error",function(){b.model.isNew()||(b.collection.add(b.model.get("firms")),b._selectPrimaryFirm()),b.removeLoader(".modal-body")})},events:{"click #save-aa":"saveLawyer","click #close-modal-attorney":"closeModal","click #firms-arrow":"showAllEntities","click .edit-firm":"editFirmForm","click #new-firm":"newFirmForm","click .delete-firm":"removeFirm"},showAllEntities:function(a){App.Helpers.showAllEntities(a,this.$el)},afterRender:function(){App.Helpers.addMask('[name="lawyerOfficePhone"]',"(999) 999-9999"),App.Helpers.addMask('[name="lawyerCellPhone"]',"(999) 999-9999"),App.Helpers.addMask('[name="lawyerFax"]',"(999) 999-9999");var a=this;if(this.model.isNew()&&0!==this.model.get("firmID")&&!_.isUndefined(this.model.get("firmID"))&&!_.isNull(this.model.get("firmID"))){var b=new App.Models.Firm({firmID:this.model.get("firmID")});b.fetch({success:function(b){a.collection.add(b)}})}App.Helpers.initTypeahead({view:this,elemClass:".typeahead.firms_typeahead",urlBuild:{url:"api/typeahead_controller/search_firms"},processFunction:$.proxy(this.processAAFirmsTypeahead,this),nameKey:"firmName",cleanValueAfterEnter:!0})},editFirmForm:function(a){var b=$(a.currentTarget),c=b.data("model"),d=this.collection.get({cid:c}),e=new App.Views.Files.FileTabs.ApplicantAttorney.FirmApplicantAttorney({model:d,file:this,fileModel:this.options.fileModel,currentCollection:this.collection,modalTitle:"Edit Existing Applicant Attorney Firm"}),f=new App.Helpers.Modal({view:e});f.show()},newFirmForm:function(){var a=new App.Models.Firm,b=new App.Views.Files.FileTabs.ApplicantAttorney.FirmApplicantAttorney({model:a,file:this,currentCollection:this.collection,fileModel:this.options.fileModel,modalTitle:"Add New Applicant Attorney Firm"}),c=new App.Helpers.Modal({view:b});c.show()},saveLawyer:function(){var a=this.$el;if($("#applicantAttorneyform").valid()){if(this.collection.lenght<=0||_.isUndefined(a.find('[name="primaryFirm"]:checked').val())){var b=new App.Helpers.Toast({message:"Error: You must choose a primary firm",classType:"danger",fadeOut:5e3});return void b.render()}if(this.model.isNew())this.processSaveLawyer();else{var c=" If you edit this applicant attorney it will affect all files using this applicant attorney",d=new App.Views.Shared.AlertView({processFunction:"processSaveLawyer",viewClass:".applicantAttorneyForm",msg:c,title:"Warning"}),e=new App.Helpers.Modal({view:d});e.show()}}},processSaveLawyer:function(){var a=this.$el,b=this;this.model.set("lawyerOfficePhone",a.find('[name="lawyerOfficePhone"]').val()),this.model.set("lawyerOfficePhone",a.find('[name="lawyerOfficePhone"]').val()),this.model.set("lawyerCellPhone",a.find('[name="lawyerCellPhone"]').val()),this.model.set("lawyerFax",a.find('[name="lawyerFax"]').val()),this.model.set("firms",this.collection.pluck("firmID")),this.model.set("primaryFirmID",a.find('[name="primaryFirm"]:checked').val()),this.model.save({},{success:function(a){b.elementModal.modal("hide");var c=new App.Helpers.Toast({message:"Applicant Attorney Saved Correctly",classType:"success",fadeOut:5e3});c.render();var d={typeaheadResult:a.get("lawyerLastName")+", "+a.get("lawyerFirstName")+" "+a.get("lawyerMiddleName")+" "+a.get("lawyerEmail")};if(b.options.isCodefendant)$('[name="co-appAttorney"]').typeahead("val",d.typeaheadResult),$('[name="co-appAttorney"]').data("datum",d),b.options.coModel&&b.options.coModel.set("attorneyID",a.get("lawyerID"));else if(b.options.parentClassName&&"FilesFileSubroTabsDefendantsDefendantForm"===b.options.parentClassName)$('[name="appAttorney"]').typeahead("val",d.typeaheadResult),$('[name="appAttorney"]').data("datum",d),b.options.coModel&&b.options.coModel.set("attorneyID",a.get("lawyerID"));else if(b.options.parentClassName&&"FilesFileSubroTabsInjuredWkrPanel"===b.options.parentClassName){var e=$("."+b.options.parentClassName).data("view");_.extend(d,{id:a.get("lawyerID")}),e[b.options.parentActionName](d,!1)}else if($(".typeahead.aa_typeahead").typeahead("val",d.typeaheadResult),$(".typeahead.aa_typeahead").data("datum",d),b.options.fileModel.set("applicantAttorneyTypeahead",d.typeaheadResult),b.options.modAA.clear(),b.options.modAA.set(a.attributes),b.options.modAA.original=b.options.modAA.toJSON(),b.options.file.aaTypeaheadID=a.get("lawyerID"),b.options.aaCompanies.reset(),b.options.aaCompanies.add(a.get("firms")),b.options.fileModel.get("AA")){var f=$(".files-dashboard").data("view");b.options.fileModel.get("AA").AAid===a.get("id")&&f&&(b.options.fileModel.set("AA",a.toJSON()),f.AAInfo=a.toJSON(),f.AAInfo.fullName=f.getFullName(f.AAInfo.lawyerLastName,f.AAInfo.lawyerFirstName,f.AAInfo.lawyerMiddleName),f.$el.find("#aa-lawyerEmail-link").popover({trigger:"hover"}))}}})},closeModal:function(){this.elementModal.modal("hide")},processAAFirmsTypeahead:function(a){this.$el.find(".typeahead.firms_typeahead").typeahead("val","");var b=new App.Models.Firm;b.set(a),this.collection.add(b),this._selectPrimaryFirm()},_selectPrimaryFirm:function(){var a=this;_.each(this.collection.models,function(b){1===b.get("isPrimaryFirm")&&a.$el.find('[name="primaryFirm"][value="'+b.get("firmID")+'"]').attr("checked","checked")})},removeFirm:function(a){var b=$(a.currentTarget),c="Are you sure you want to remove \n\n the Firm Relationship?",d=new App.Views.Shared.AlertView({processFunction:"processRemoveFirm",viewClass:".applicantAttorneyForm",params:{elem:b},msg:c,title:"Delete Lawyer Firm Relationship"}),e=new App.Helpers.Modal({view:d});e.show()},processRemoveFirm:function(a){var b=a.elem.data("model");this.collection.remove(b);var c=this.collection.clone();this.collection.reset(),this.collection.add(c.toJSON()),this._selectPrimaryFirm()}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.FileTabs)&&(App.Views.Files.FileTabs={}),_.isUndefined(App.Views.Files.FileTabs.ApplicantAttorney)&&(App.Views.Files.FileTabs.ApplicantAttorney={}),App.Views.Files.FileTabs.ApplicantAttorney.FirmApplicantAttorney=App.Helpers.View.extend({template:App.Templates.filesFileTabsApplicantAttorneyFirmApplicantAttorney,className:"firmApplicantAttorney",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.listenTo(this.model,"request",function(){b.showLoader(".modal-body")}),this.listenTo(this.model,"sync error",function(){b.removeLoader(".modal-body")})},events:{"click #save-firm":"saveFirm","click #close-modal":"closeModal","click #copy-to-address":"copy_to_address"},afterRender:function(){App.Helpers.addMask('[name="officePhone"]',"(999) 999-9999"),App.Helpers.addMask('[name="tollFreePhone"]',"(999) 999-9999"),App.Helpers.addMask('[name="faxNumber"]',"(999) 999-9999")},copy_to_address:function(){this.model.set("physicalAddress",this.model.get("mailingAddress")),this.model.set("physicalCity",this.model.get("mailingCity")),this.model.set("physicalState",this.model.get("mailingState")),this.model.set("physicalZip",this.model.get("mailingZip"))},saveFirm:function(){if($("#applicantAttorneyFirmForm").valid())if(this.model.isNew())this.processSaveFirm();else{var a="If you edit this applicant attorney firm it will affect all files using this applicant attorney firm ",b=new App.Views.Shared.AlertView({processFunction:"processSaveFirm",viewClass:".firmApplicantAttorney",msg:a,title:"Warning"}),c=new App.Helpers.Modal({view:b});c.show()}},processSaveFirm:function(){var a,b=this,c=!1;this.model.isNew()&&(c=!0),this.model.set("officePhone",this.$el.find('[name="officePhone"]').val()),this.model.set("tollFreePhone",this.$el.find('[name="tollFreePhone"]').val()),this.model.set("faxNumber",this.$el.find('[name="faxNumber"]').val()),this.model.save({},{success:function(d){var e={id:d.get("firmID"),firmName:d.get("firmName"),typeaheadResult:d.get("firmName")};if(b.options.isCodefendant){if($(".typeahead.co-aaFirm_typeahead").data("datum",e),$(".typeahead.co-aaFirm_typeahead").typeahead("val",d.get("firmName")),b.options.codefendants.modelData){if(b.options.codefendants.modelData.get("firmID")!==d.get("firmID")){var f=$(".codefendantsForm").data("view");f.resetAttorney()}b.options.codefendants.modelData.set("firmID",d.get("firmID")),b.options.codefendants.modelData.set("codefendantFirmNameTypeahead",d.get("firmName"))}}else if(b.options.parentClassName&&"FilesFileSubroTabsDefendantsDefendantForm"===b.options.parentClassName){if($(".typeahead.aaFirm_typeahead").data("datum",e),$(".typeahead.aaFirm_typeahead").typeahead("val",d.get("firmName")),b.options.defendants.modelData){if(b.options.defendants.modelData.get("firmID")!==d.get("firmID")){var g=$("."+b.options.parentClassName).data("view");g.resetAttorney()}b.options.defendants.modelData.set("firmID",d.get("firmID")),b.options.defendants.modelData.set("defendantFirmNameTypeahead",d.get("firmName"))}}else if(b.options.parentClassName&&"FilesFileSubroTabsInjuredWkrPanel"===b.options.parentClassName){var h=$("."+b.options.parentClassName).data("view");h[b.options.parentActionName](e)}else if(_.isUndefined(b.options.currentCollection)){if(c)b.options.aaCompanies.add(d);else{var i=b.options.aaCompanies.get(d.get("firmID"));i.set(d.toJSON())}b.options.fileModel.set("applicantAttorneyFirmTypeahead",d.get("firmName")),b.options.file.processAAFirmsTypeahead(e),$(".typeahead.aaFirm_typeahead").data("datum",e),$(".typeahead.aaFirm_typeahead").typeahead("val",d.get("firmName")),b.options.modAAfirm.clear(),b.options.modAAfirm.set(d.attributes),b.options.modAAfirm.original=b.options.modAAfirm.toJSON()}else b.options.currentCollection.add(d);b.elementModal.modal("hide"),a=new App.Helpers.Toast({message:"Firm Saved Correctly",classType:"success",fadeOut:5e3}),a.render()},error:function(b,c){a=new App.Helpers.Toast({message:c.responseJSON.error,classType:"danger",fadeOut:5e3}),a.render()}})},closeModal:function(){this.elementModal.modal("hide")}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.FileTabs)&&(App.Views.Files.FileTabs={}),_.isUndefined(App.Views.Files.FileTabs.ApplicantAttorney)&&(App.Views.Files.FileTabs.ApplicantAttorney={}),App.Views.Files.FileTabs.ApplicantAttorney.Panel=App.Helpers.View.extend({template:App.Templates.filesFileTabsApplicantAttorneyPanel,className:"applicant_attorney_panel",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.listenToOnce(this.options.fileModel,"sync",this.prepopulateData)},events:{"click #aa_form_edit":"editAAForm","click #aa_form_new":"newAAForm","click #aaFirm_form_edit":"editAAFirmForm","click #aaFirm_form_new":"newAAFirmForm","click #edit-firms-aa":"editAAFirms","click #assign-applicant-attorney":"assignApplicantAttorney","click #app-attorney-arrow":"showAllEntities","focusout .aa_typeahead":"aaTypeaheadChange","focusout .aaFirm_typeahead":"aaFirmTypeaheadChange"},showAllEntities:function(a){App.Helpers.showAllEntities(a,this.$el)},afterRender:function(){this.prepopulateData(),this.initTypeaheadAttorney("firm"),this.initTypeaheadAttorney("attorney")},aaFirmTypeaheadChange:function(a){var b=$(a.currentTarget),c=b.val();_.isEmpty(c)&&(this.initTypeaheadAttorney("attorney"),this.resetAAFirmID())},aaTypeaheadChange:function(a){var b=$(a.currentTarget),c=b.val();_.isEmpty(c)&&(this.initTypeaheadAttorney("firm"),this.resetAATypeaheadID())},editAAFirmForm:function(){if(this.aaFirmTypeaheadID){var a=new App.Models.Firm({firmID:this.aaFirmTypeaheadID}),b=new App.Views.Files.FileTabs.ApplicantAttorney.FirmApplicantAttorney({model:a,file:this,fileModel:this.options.fileModel,aaCompanies:this.options.aaCompanies,modAAfirm:this.options.modAAfirm,modalTitle:"Edit Existing Applicant Attorney Firm"}),c=new App.Helpers.Modal({view:b});c.show(),a.fetch()}},newAAFirmForm:function(){var a=new App.Models.Firm,b=new App.Views.Files.FileTabs.ApplicantAttorney.FirmApplicantAttorney({model:a,file:this,aaCompanies:this.options.aaCompanies,fileModel:this.options.fileModel,modAAfirm:this.options.modAAfirm,modalTitle:"Add New Applicant Attorney Firm"}),c=new App.Helpers.Modal({view:b});c.show()},editAAFirms:function(){var a=new App.Helpers.Collection;a.add(this.options.aaCompanies.models);var b=new App.Views.Files.FileTabs.ApplicantAttorney.ApplicantAttorneyFirms({modAA:this.options.modAA,collection:a,aaCompanies:this.options.aaCompanies,fileModel:this.options.fileModel}),c=new App.Helpers.Modal({view:b});c.show()},editAAForm:function(){if(!_.isUndefined(this.aaTypeaheadID)&&0!==this.aaTypeaheadID){var a=new App.Models.Lawyer({lawyerID:this.aaTypeaheadID}),b=new App.Views.Files.FileTabs.ApplicantAttorney.ApplicantAttorneyForm({model:a,modAA:this.options.modAA,file:this,aaCompanies:this.options.aaCompanies,fileModel:this.options.fileModel,modalTitle:"Edit Existing Applicant Attorney"}),c=new App.Helpers.Modal({view:b,sizeModal:"modal-lg"});c.show(),a.fetch()}},newAAForm:function(){var a=new App.Models.Lawyer;a.set("firmID",this.aaFirmTypeaheadID);var b=new App.Views.Files.FileTabs.ApplicantAttorney.ApplicantAttorneyForm({model:a,modAA:this.options.modAA,file:this,aaCompanies:this.options.aaCompanies,fileModel:this.options.fileModel,modalTitle:"Add New Applicant Attorney"}),c=new App.Helpers.Modal({view:b,sizeModal:"modal-lg"});c.show()},resetAAFirmID:function(){this.aaFirmTypeaheadID=0,this.$el.find(".typeahead.aaFirm_typeahead").typeahead("val",""),this.initTypeaheadAttorney("attorney")},resetAATypeaheadID:function(){var a=this.$el;this.aaTypeaheadID=0,this.options.fileModel.set("AAid",0),this.options.modAA.clear(),this.options.aaCompanies.reset(),a.find(".typeahead.aa_typeahead").typeahead("val",""),this.initTypeaheadAttorney("firm")},processAAFirmsTypeahead:function(a){var b=this.$el,c=this;if(this.aaFirmTypeaheadID!==a.id){this.aaFirmTypeaheadID=a.id,b.find(".typeahead.aaFirm_typeahead").typeahead("val",a.firmName);var d=new App.Models.Firm({firmID:a.id});d.fetch({success:function(a){c.options.modAAfirm.clear({silent:!0}),c.options.modAAfirm.set(a.attributes),c.initTypeaheadAttorney("attorney")}})}},processAATypeahead:function(a){var b=this;if(this.aaTypeaheadID===a.id)return!1;

this.aaTypeaheadID=a.id,_.isNull(a.firmID)||(this.aaFirmTypeaheadID=a.firmID,this.$el.find(".typeahead.aaFirm_typeahead").typeahead("val",a.firmName));var c=new App.Models.Lawyer({lawyerID:a.id,first:a.first,last:a.last});c.fetch({success:function(a){b.options.modAA.clear({silent:!0}),b.options.modAA.set(a.attributes),b.options.aaCompanies.reset(a.get("firms")),b.initTypeaheadAttorney("firm")}})},initTypeaheadAttorney:function(a){var b="api/typeahead_controller/",c=".typeahead",d=void 0;if("firm"===a){var e=this.aaTypeaheadID?this.aaTypeaheadID:0;c+=".aaFirm_typeahead",d=$.proxy(this.processAAFirmsTypeahead,this),b+="search_firms/"+e}else if("attorney"===a){var f=this.aaFirmTypeaheadID?this.aaFirmTypeaheadID:0;c+=".aa_typeahead",d=$.proxy(this.processAATypeahead,this),b+="search_applicant_attorney/"+f}App.Helpers.initTypeahead({view:this,elemClass:c,urlBuild:b,processFunction:d})},assignApplicantAttorney:function(a){if(a.preventDefault(),a.stopPropagation(),$("#form-applicant-attorney").valid()){var b=this;this.options.fileModel.set("AAid",this.aaTypeaheadID),this.options.fileModel.set("AAfirmID",this.aaFirmTypeaheadID),this.options.fileModel.save({},{success:function(a){var c=new App.Helpers.Toast({message:"Applicant Attorney assigned to this file successfully.",classType:"success",fadeOut:5e3});c.render(),b.options.modAA.clear(),0===a.get("AAid")&&a.unset("AA"),_.isUndefined(a.get("AA"))||b.options.modAA.set(a.get("AA")),b.prepopulateData()},error:function(){var a=new App.Helpers.Toast({message:"Error assigning Applicant Attorney to this file.",classType:"danger",fadeOut:5e3});a.render()}})}},prepopulateData:function(){var a=this.$el,b={};this.aaTypeaheadID=this.options.modAA.get("lawyerID"),this.aaFirmTypeaheadID=this.options.fileModel.get("AAfirmID"),b={first:this.options.modAA.get("lawyerFirstName"),last:this.options.modAA.get("lawyerLastName"),middle:this.options.modAA.get("lawyerMiddleName"),email:this.options.modAA.get("lawyerEmail")},a.find(".typeahead.aa_typeahead").data("datum",b)}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.FileTabs)&&(App.Views.Files.FileTabs={}),_.isUndefined(App.Views.Files.FileTabs.Client)&&(App.Views.Files.FileTabs.Client={}),App.Views.Files.FileTabs.Client.InsurerCompanyForm=App.Helpers.View.extend({template:App.Templates.filesFileTabsClientInsurerCompanyForm,className:"FilesFileTabsClientInsurerCompanyForm",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.listenTo(this.model,"request",function(){b.showLoader(".modal-body")}),this.listenTo(this.model,"sync error",function(){b.removeLoader(".modal-body")})},events:{"click #save-insurer-company":"saveInsurerCompany","click #copy-to-address":"copy_to_address","click #copy-to-address-billing":"copy_to_address_billing"},afterRender:function(){App.Helpers.addMask('[name="officePhone"]',"(999) 999-9999"),App.Helpers.addMask('[name="faxNumber"]',"(999) 999-9999"),App.Helpers.addMask('[name="tollFreePhone"]',"(999) 999-9999")},copy_to_address:function(){this.model.set("physicalAddress",this.model.get("mailingAddress")),this.model.set("physicalCity",this.model.get("mailingCity")),this.model.set("physicalState",this.model.get("mailingState")),this.model.set("physicalZip",this.model.get("mailingZip"))},copy_to_address_billing:function(){this.model.set("billingAddress",this.model.get("mailingAddress")),this.model.set("billingCity",this.model.get("mailingCity")),this.model.set("billingState",this.model.get("mailingState")),this.model.set("billingZip",this.model.get("mailingZip"))},saveInsurerCompany:function(){var a=this;if(!this.$el.find("form").valid())return void this.$el.find(".modal").data("bs.modal").adjustBackdrop();if(this.model.isNew())this.processSaveInsurerCompany();else{var b="If you edit this insurer company it will affect all files using this insurer company",c=new App.Views.Shared.AlertView({processFunction:"processSaveInsurerCompany",viewClass:"."+a.className,msg:b,title:"Warning"}),d=new App.Helpers.Modal({view:c});d.show()}},processSaveInsurerCompany:function(){var a,b=this;this.model.set("officePhone",this.$el.find('[name="officePhone"]').val()),this.model.set("faxNumber",this.$el.find('[name="faxNumber"]').val()),this.model.set("tollFreePhone",this.$el.find('[name="tollFreePhone"]').val());var c=this.model.toJSON(),d=this.model.isNew();this.model.save({},{success:function(e){b.elementModal.modal("hide"),a=new App.Helpers.Toast({message:"Insurer Company Created Successfully.",classType:"success",fadeOut:5e3}),a.render(),d&&(c.id=e.get("clientID")),$("."+b.options.parentClassName).data("view").updateCollection(c)},error:function(c,d){if(409===d.status){var e="The name you chose already exists, are you sure you want to create another company with the same name?",f=new App.Views.Shared.AlertView({processFunction:"allowRepeatedName",viewClass:"."+b.className,msg:e,title:"Warning"}),g=new App.Helpers.Modal({view:f});g.show()}else a=new App.Helpers.Toast({message:d.responseJSON.error,classType:"danger",fadeOut:5e3}),a.render()}})},allowRepeatedName:function(){this.model.set("allowRepeatedName",1),this.processSaveInsurerCompany()}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.FileTabs)&&(App.Views.Files.FileTabs={}),_.isUndefined(App.Views.Files.FileTabs.Client)&&(App.Views.Files.FileTabs.Client={}),App.Views.Files.FileTabs.Client.InsurerForm=App.Helpers.View.extend({template:App.Templates.filesFileTabsClientInsurerForm,className:"FilesFileTabsClientInsurerForm",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.FileTabs)&&(App.Views.Files.FileTabs={}),_.isUndefined(App.Views.Files.FileTabs.Client)&&(App.Views.Files.FileTabs.Client={}),App.Views.Files.FileTabs.Client.Panel=App.Helpers.View.extend({template:App.Templates.filesFileTabsClientPanel,className:"FilesFileTabsClientPanel",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{},afterRender:function(){var a="";this.options.fileModel.get("clientTypeID")===App.Const.clientTypes.INSURER?(a=new App.Views.Files.FileTabs.Client.InsurerForm({modInsurerClient:this.options.modInsurerClient}),App.Helpers.htmlView(a,".container-client")):this.options.fileModel.get("clientTypeID")===App.Const.clientTypes.TPA&&(a=new App.Views.Files.FileTabs.Client.TpaForm({colInsurerCompanies:this.options.colInsurerCompanies,modTpaClient:this.options.modTpaClient,fileModel:this.options.fileModel,colCases:this.options.colCases}),App.Helpers.htmlView(a,".container-client"))}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.FileTabs)&&(App.Views.Files.FileTabs={}),_.isUndefined(App.Views.Files.FileTabs.Client)&&(App.Views.Files.FileTabs.Client={}),App.Views.Files.FileTabs.Client.TpaForm=App.Helpers.View.extend({template:App.Templates.filesFileTabsClientTpaForm,className:"FilesFileTabsClientTpaForm",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{"click .insurer_form_edit":"editInsurerCompanyForm","click #insurer_form_new":"newInsurerCompanyForm","click .remove_insurer_company":"removeInsurerCompany","click #btn-InsurerCompanies":"updateInsurerCompanies"},afterRender:function(){App.Helpers.initTypeahead({view:this,elemClass:".typeahead.insurer_company_typeahead",urlBuild:{url:"api/typeahead_controller/search_companies"},processFunction:$.proxy(this.processInsurerCompany,this)})},processInsurerCompany:function(a){var b=new App.Models.Company;b.set("id",a.id),b.set("companyName",a.companyName),b.set("officePhone",a.officePhone),this.options.colInsurerCompanies.add(b),this.$el.find(".typeahead.insurer_company_typeahead").typeahead("val","")},updateInsurerCompanies:function(a){a.preventDefault(),a.stopPropagation(),this.options.fileModel.set("insurerCompanies",this.options.colInsurerCompanies.toJSON()),this.options.fileModel.save({},{success:function(){var a=new App.Helpers.Toast({message:"Insurer assigned to this file successfully.",classType:"success",fadeOut:5e3});a.render()},error:function(){var a=new App.Helpers.Toast({message:"Error assigning insurer to this file.",classType:"danger",fadeOut:5e3});a.render()}})},editInsurerCompanyForm:function(a){var b=$(a.currentTarget).data("id"),c=new App.Models.Company({companyID:b,id:b}),d=new App.Views.Files.FileTabs.Client.InsurerCompanyForm({model:c,parentClassName:this.className,fileModel:this.options.fileModel,colInsurerCompanies:this.options.colInsurerCompanies}),e=new App.Helpers.Modal({view:d,sizeModal:"modal-lg"});e.show(),c.fetch()},newInsurerCompanyForm:function(){var a=new App.Models.Company,b=new App.Views.Files.FileTabs.Client.InsurerCompanyForm({model:a,parentClassName:this.className,fileModel:this.options.fileModel,colInsurerCompanies:this.options.colInsurerCompanies}),c=new App.Helpers.Modal({view:b,sizeModal:"modal-lg"});c.show()},removeInsurerCompany:function(a){var b=Number($(a.currentTarget).data("id")),c=this.options.colInsurerCompanies.toJSON(),d=_.findWhere(c,{id:b});c=_.without(c,d),this.options.colInsurerCompanies.reset(c)},updateCollection:function(a){var b=this.options.colInsurerCompanies.toJSON(),c=_.findWhere(b,{id:a.id});c?(c.companyName=a.companyName,c.officePhone=a.officePhone,_.findWhere(this.options.fileModel.get("insurerCompanies"),{id:c.id})&&(this.options.colInsurerCompanies.original=b,this.options.fileModel.set("insurerCompanies",b))):b.push({id:a.id,companyName:a.companyName,officePhone:a.officePhone}),this.options.colInsurerCompanies.reset(b)}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.FileTabs)&&(App.Views.Files.FileTabs={}),_.isUndefined(App.Views.Files.FileTabs.ClientRep)&&(App.Views.Files.FileTabs.ClientRep={}),App.Views.Files.FileTabs.ClientRep.ClientRepForm=App.Helpers.View.extend({template:App.Templates.filesFileTabsClientRepClientRepForm,className:"clientRepForm",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.listenTo(this.model,"request",function(){b.showLoader(".modal-body")}),this.listenTo(this.model,"sync error",function(){b.removeLoader(".modal-body")})},events:{"click #save-client-rep":"saveClientRep"},afterRender:function(){App.Helpers.addMask('[name="phone"]',"(999) 999-9999"),App.Helpers.addMask('[name="cell"]',"(999) 999-9999"),App.Helpers.addMask('[name="fax"]',"(999) 999-9999")},saveClientRep:function(){if(this.$el.find("form").valid())if(this.model.isNew())this.processSaveClientRep();else{var a=" If you edit this ClientRep/adjuster it will affect all files using this ClientRep/adjuster",b=new App.Views.Shared.AlertView({processFunction:"processSaveClientRep",viewClass:".clientRepForm",msg:a,title:"Warning"}),c=new App.Helpers.Modal({view:b});c.show()}},processSaveClientRep:function(){var a=this,b=!1;this.model.isNew()&&(b=!0),this.model.set("phone",this.$el.find('[name="phone"]').val()),this.model.set("cell",this.$el.find('[name="cell"]').val()),this.model.set("fax",this.$el.find('[name="fax"]').val()),this.model.save({},{success:function(c){var d={},e=$(".tempClientRepModal").data("view"),f=$(".client_rep_panel").data("view"),g="";if(a.options.isCodefendant)d=c.toJSON(),_.extend(d,{id:c.get("user_id")}),a.options.coModel&&a.options.coModel.set("firmID",c.get("user_id"));else{if(g=c.get("last")+", "+c.get("first")+" "+c.get("middle")+" "+c.get("email"),b||c.get("id")!==a.options.clientRepModelInContext.get("id"))a.options.isTempClientRep?(a.options.fileModel.set("tempClientRepNameTypeahead",g),$(".typeahead.tempClientRep_typeahead").typeahead("val",g),$(".typeahead.tempClientRep_typeahead").data("datum",{typeaheadResult:g}),e.tempClientRepTypeaheadID=c.get("id")):(a.options.fileModel.set("clientRepNameTypeahead",g),$(".typeahead.client_rep_typeahead").typeahead("val",g),$(".typeahead.client_rep_typeahead").data("datum",{typeaheadResult:g}),f.clientRepTypeaheadID=c.get("id"));else if(a.options.isTempClientRep)a.options.fileModel.set("tempClientRepNameTypeahead",g),$(".typeahead.tempClientRep_typeahead").typeahead("val",g),$(".typeahead.tempClientRep_typeahead").data("datum",{typeaheadResult:g}),e.tempClientRepTypeaheadID=c.get("id");else if(a.options.fileModel.set("clientRepNameTypeahead",g),$(".typeahead.client_rep_typeahead").typeahead("val",g),$(".typeahead.client_rep_typeahead").data("datum",{typeaheadResult:g}),f.clientRepTypeaheadID=c.get("id"),a.options.fileModel.get("clientRep")){var h=$(".files-dashboard").data("view");a.options.fileModel.get("clientRep").user_id===c.get("id")&&h&&(a.options.fileModel.set("clientRep",c.toJSON()),h.clientRepInfo=c.toJSON(),h.clientRepInfo.fullName=h.getFullName(h.clientRepInfo.last,h.clientRepInfo.first,h.clientRepInfo.middle),h.$el.find("#client-rep-email-link").popover({trigger:"hover"}))}a.options.clientRepModelInContext.clear(),a.options.clientRepModelInContext.set(c.attributes),a.options.clientRepModelInContext.original=a.options.clientRepModelInContext.toJSON()}var i=new App.Helpers.Toast({message:"ClientRep/Adjuster Saved Correctly",classType:"success",fadeOut:5e3});i.render(),a.elementModal.modal("hide")}})},closeModal:function(){this.elementModal.modal("hide")}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.FileTabs)&&(App.Views.Files.FileTabs={}),_.isUndefined(App.Views.Files.FileTabs.ClientRep)&&(App.Views.Files.FileTabs.ClientRep={}),App.Views.Files.FileTabs.ClientRep.ConfirmDeletionModal=App.Helpers.View.extend({template:App.Templates.filesFileTabsClientRepConfirmDeletionModal,className:"deleteTempClientRepModal",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{"click #delete-temp-client-rep":"deleteTempClientRep"},deleteTempClientRep:function(a){a.preventDefault(),a.stopPropagation();var b=this;b.options.fileModel.set("tempClientRepID",0),b.options.fileModel.save({},{success:function(){delete b.options.fileModel.attributes.tempClientRep,b.model.clear(),b.elementModal.modal("hide");var a=new App.Helpers.Toast({message:"Temp Client Rep/Adjuster was removed for this file.",classType:"success",fadeOut:5e3});a.render()},error:function(){var a=new App.Helpers.Toast({message:"Error removing temp Client Rep/Adjuster to this file.",classType:"danger",fadeOut:5e3});a.render()}})}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.FileTabs)&&(App.Views.Files.FileTabs={}),_.isUndefined(App.Views.Files.FileTabs.ClientRep)&&(App.Views.Files.FileTabs.ClientRep={}),App.Views.Files.FileTabs.ClientRep.Panel=App.Helpers.View.extend({template:App.Templates.filesFileTabsClientRepPanel,className:"client_rep_panel",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.colWCFiles=new App.Collections.Files,this.colSubroFiles=new App.Collections.FilesSubro,this.listenTo(this.options.fileModel,"sync",function(){this.prepopulateData()})},events:{"click #delete-tmp-da":"showTmpClientRepDelete","click .tmp-ad-info-down-arrow":"showTmpAdInfo","click #assign-client_rep":"assignClientRep","click #temp-client-rep-btn":"tempClientRepModal","click .tmp-ad-info-up-arrow":"hideTmpAdInfo","click .gotoFile":"gotoFile","click .goto-file-new-tab":"gotoFileNewTab","click #client_rep_form_edit":"editClientRepForm","click #client_rep_form_new":"newClientRepForm"},afterRender:function(){App.Helpers.initTypeahead({view:this,elemClass:".typeahead.client_rep_typeahead",urlBuild:{url:"api/typeahead_controller/search_client_reps",resource:this.clientTypeaheadID},processFunction:$.proxy(this.processClientRepTypeahead,this),unmatchedProcessFunction:$.proxy(this.processUnmatchedClientRepTypeahead,this)}),this.prepopulateData()},_getUrlFile:function(a){var b=this.options.modClientRep.get("clientRepFiles"),c=_.findWhere(b,{fileNumber:a}),d="";return c.moduleID===App.Const.wcFileModule?d=this.colWCFiles.get(a).fileEditUrl():c.moduleID===App.Const.subroFileModule&&(d=this.colSubroFiles.get(a).fileEditUrl()),d},gotoFile:function(a){a.preventDefault(),a.stopPropagation();var b=this._getUrlFile(Number($(a.currentTarget).data("id")));b&&Backbone.history.navigate(b,{trigger:!0})},gotoFileNewTab:function(a){a.preventDefault(),a.stopPropagation();var b=this._getUrlFile(Number($(a.currentTarget).attr("href")));b&&window.open(b)},tempClientRepModal:function(){var a=new App.Views.Files.FileTabs.ClientRep.TempClientRepModal({model:this.options.modTempClientRep,clientID:this.clientTypeaheadID,clientName:this.options.fileModel.get("clientNameTypeahead"),fileModel:this.options.fileModel}),b=new App.Helpers.Modal({view:a,sizeModal:"modal-lg"});b.show()},assignClientRep:function(a){if(a.preventDefault(),a.stopPropagation(),$("#form-client-rep").valid()){this.clientRepTypeaheadID!==this.options.modClientRep.get("id")&&(this.clientRepTypeaheadID=this.options.modClientRep.get("id"));var b=this;if(this.clientRepTypeaheadID)this.options.fileModel.set("clientRepID",this.clientRepTypeaheadID),this.options.fileModel.save({},{success:function(a){var c=new App.Helpers.Toast({message:"ClientRep/Adjuster assigned to this file successfully.",classType:"success",fadeOut:5e3});c.render(),b.options.modClientRep.clear({silent:!0}),b.options.modClientRep.set(a.get("clientRep"))},error:function(){var a=new App.Helpers.Toast({message:"Error assigning client rep/adjuster to this file.",classType:"danger",fadeOut:5e3});a.render()}});else{var c=new App.Helpers.Toast({message:"Please select an client rep/adjuster in the client rep/adjuster search text field.",classType:"warning",fadeOut:5e3});c.render()}}},newClientRepForm:function(){if(!this.clientTypeaheadID||0===this.clientTypeaheadID){var a=new App.Helpers.Toast({message:"Error: File must have a client chosen to create an client rep/adjuster.",classType:"danger",fadeOut:5e3});return void a.render()}var b=new App.Models.ClientRep({isClientRep:1,clientCompany:[this.clientTypeaheadID]}),c=new App.Views.Files.FileTabs.ClientRep.ClientRepForm({model:b,clientRepModelInContext:this.options.modClientRep,clientRepTypeaheadID:this.clientRepTypeaheadID,fileModel:this.options.fileModel}),d=new App.Helpers.Modal({view:c});d.show()},editClientRepForm:function(){if(!_.isUndefined(this.clientRepTypeaheadID)){var a=new App.Models.User({id:this.clientRepTypeaheadID}),b=new App.Views.Files.FileTabs.ClientRep.ClientRepForm({model:a,clientRepModelInContext:this.options.modClientRep,clientRepTypeaheadID:this.clientRepTypeaheadID,fileModel:this.options.fileModel}),c=new App.Helpers.Modal({view:b});c.show(),a.fetch()}},showTmpClientRepDelete:function(){var a=new App.Views.Files.FileTabs.ClientRep.ConfirmDeletionModal({model:this.options.modTempClientRep,fileModel:this.options.fileModel}),b=new App.Helpers.Modal({view:a});b.show()},showTmpAdInfo:function(){this.$el.find(".tmp-ad-info-container").slideDown("fast"),this.$el.find(".tmp-ad-info-down-arrow").toggle(),this.$el.find(".tmp-ad-info-up-arrow").toggle()},hideTmpAdInfo:function(){this.$el.find(".tmp-ad-info-container").slideUp("fast"),this.$el.find(".tmp-ad-info-down-arrow").toggle(),this.$el.find(".tmp-ad-info-up-arrow").toggle()},processUnmatchedClientRepTypeahead:function(){this.clientRepTypeaheadID=void 0,this.$el.find(".client_rep_typeahead").typeahead("val",""),this.options.modClientRep.clear()},processClientRepTypeahead:function(a){var b=this;this.clientRepTypeaheadID=a.id;var c=new App.Models.ClientRep({id:a.id,user_id:a.id,isClientRep:1,fileNumber:b.options.fileModel.get("fileNumber")});c.fetch({success:function(a){b.options.modClientRep.clear({silent:!0}),b.options.modClientRep.set(a.attributes),b.options.clientRepFiles.reset(a.get("clientRepFiles")),b.options.clientRepFiles.sortBy="fileTitle",b.options.clientRepFiles.sort()}})},isFileClosed:function(){return this.files.isFileClosed()},isWC:function(){return this.files.isWC()},isLien:function(){return this.files.isLien()},prepopulateData:function(){var a=this.$el,b={};if(0!==this.options.fileModel.get("wcClientID")){this.clientTypeaheadID=_.isUndefined(this.options.fileModel.get("tpaClient"))?_.isUndefined(this.options.fileModel.get("insurerClient"))?void 0:this.options.fileModel.get("insurerClient").clientID:this.options.fileModel.get("tpaClient").clientID;var c=_.isUndefined(this.options.fileModel.get("tpaClient"))?_.isUndefined(this.options.fileModel.get("insurerClient"))?"":this.options.fileModel.get("insurerClient"):this.options.fileModel.get("tpaClient");b={id:this.clientTypeaheadID,clientName:c.clientName,clientTypeID:c.clientTypeID},this.options.clientTypeaheadName=App.Helpers.handlerDisplayKey(b),a.find(".typeahead.client_typeahead").data("datum",b)}else this.clientTypeaheadID=void 0,this.options.clientTypeaheadName="",a.find(".typeahead.client_rep_typeahead").typeahead("val","");if(b={id:this.options.modClientRep.get("user_id"),first:this.options.modClientRep.get("first"),last:this.options.modClientRep.get("last"),middle:this.options.modClientRep.get("middle"),email:this.options.modClientRep.get("email")},a.find(".typeahead.client_rep_typeahead").data("engine")&&(a.find(".typeahead.client_rep_typeahead").data("engine").remote.urlBuild.resource=this.clientTypeaheadID),this.options.modClientRep.get("user_id")){this.clientRepTypeaheadID=this.options.modClientRep.get("user_id"),a.find(".typeahead.client_rep_typeahead").data("datum",b),this.colWCFiles.reset(_.where(this.options.modClientRep.get("clientRepFiles"),{moduleID:App.Const.wcFileModule}));var d=_.where(this.options.modClientRep.get("clientRepFiles"),{moduleID:App.Const.subroFileModule});_.each(d,function(a){a.subroFileNumber=a.fileNumber}),this.colSubroFiles.reset(d)}this.options.modTempClientRep.get("user_id")&&(this.options.tempClientRepTypeaheadID=this.options.modTempClientRep.get("user_id"),b={id:this.options.modTempClientRep.get("user_id"),first:this.options.modTempClientRep.get("first"),last:this.options.modTempClientRep.get("last"),middle:this.options.modTempClientRep.get("middle"),email:this.options.modTempClientRep.get("email")},a.find(".typeahead.tempClientRep_typeahead").data("datum",b)),this.colWCFiles.sortBy="fileTitle",this.colWCFiles.sort(),this.colSubroFiles.sortBy="fileTitle",this.colSubroFiles.sort()}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.FileTabs)&&(App.Views.Files.FileTabs={}),_.isUndefined(App.Views.Files.FileTabs.ClientRep)&&(App.Views.Files.FileTabs.ClientRep={}),App.Views.Files.FileTabs.ClientRep.TempClientRepModal=App.Helpers.View.extend({template:App.Templates.filesFileTabsClientRepTempClientRepModal,className:"tempClientRepModal",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.options.fileModel.listenTo(this.options.fileModel,"request",function(){b.showLoader(".modal-body")}),this.options.fileModel.listenTo(this.options.fileModel,"sync error",function(){b.removeLoader(".modal-body")})},events:{"click #tempClientRep_form_edit":"editTempClientRepForm","click #tempAClientRep_form_new":"newTempClientRepForm","click #assign-tempClientRep":"assignTempClientRep","click .icon-typeahead-down":"showAllEntities"},afterRender:function(){this.tempClientRepTypeaheadID=this.model.get("id"),App.Helpers.initTypeahead({view:this,elemClass:".typeahead.tempClientRep_typeahead",urlBuild:{url:"api/typeahead_controller/search_client_reps",resource:this.options.clientID},processFunction:$.proxy(this.processTempClientRepTypeahead,this)});var a=this.model.toJSON();this.$el.find(".typeahead.tempClientRep_typeahead").data("datum",a)},assignTempClientRep:function(a){a.preventDefault(),a.stopPropagation();var b=this;if(this.tempClientRepTypeaheadID)this.options.fileModel.set("tempClientRepID",this.model.get("user_id")),this.options.fileModel.save({},{success:function(){var a=new App.Helpers.Toast({message:"Temp Client Rep/Adjuster assigned to this file successfully.",classType:"success",fadeOut:5e3});a.render()},error:function(){var a=new App.Helpers.Toast({message:"Error assigning temp Client Rep/adjuster to this file.",classType:"danger",fadeOut:5e3});a.render()},complete:function(){b.elementModal.modal("hide")}});else{var c=new App.Helpers.Toast({message:"Please select a temp client rep/adjuster in the Client Rep/adjuster search text field.",classType:"warning",fadeOut:5e3});c.render()}},processTempClientRepTypeahead:function(a){var b=this;if(this.options.fileModel.get("clientRepID")!==a.id){this.tempClientRepTypeaheadID=a.id;var c=new App.Models.ClientRep({id:a.id,user_id:a.id,isClientRep:1,fileNumber:this.options.fileModel.get("fileNumber")});c.fetch({success:function(a){b.model.clear({silent:!0}),b.model.set(a.attributes)}})}else{var d=new App.Helpers.Toast({message:"Error Temp Client Rep/Adjuster can not be the same as Client rep/adjuster.",classType:"danger",fadeOut:5e3});d.render(),b.$el.find(".typeahead.tempClientRep_typeahead").typeahead("val",""),b.tempClientRepTypeaheadID=void 0}},editTempClientRepForm:function(){if(!_.isUndefined(this.tempClientRepTypeaheadID)){var a=new App.Models.User({id:this.tempClientRepTypeaheadID}),b=new App.Views.Files.FileTabs.ClientRep.ClientRepForm({model:a,clientRepModelInContext:this.model,clientRepTypeaheadID:this.tempClientRepTypeaheadID,isTempClientRep:!0,fileModel:this.options.fileModel}),c=new App.Helpers.Modal({view:b});c.show(),a.fetch()}},newTempClientRepForm:function(){var a=this.$el,b=a.find('[name="tempClientRepName"]').val(),c=new App.Models.ClientRep({isClientRep:1,clientCompany:[this.options.clientID]});if(a.find('[name="tempClientRepName"]').val(""),!_.isEmpty(b)){var d=App.Helpers.splitPersonName(b);c.set({first:d.first,middle:d.middle,last:d.last})}var e=new App.Views.Files.FileTabs.ClientRep.ClientRepForm({model:c,clientRepModelInContext:this.model,tempClientRepTypeaheadID:this.tempClientRepTypeaheadID,isTempClientRep:!0,fileModel:this.options.fileModel}),f=new App.Helpers.Modal({view:e});f.show()},showAllEntities:function(a){App.Helpers.showAllEntities(a,this.$el)}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.FileTabs)&&(App.Views.Files.FileTabs={}),_.isUndefined(App.Views.Files.FileTabs.CoDefendants)&&(App.Views.Files.FileTabs.CoDefendants={}),App.Views.Files.FileTabs.CoDefendants.CodefendantsForm=App.Helpers.View.extend({template:App.Templates.filesFileTabsCoDefendantsCodefendantsForm,className:"codefendantsForm",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.listenTo(this.model,"request",function(){b.showLoader(".modal-body")}),this.listenTo(this.model,"sync error",function(){b.removeLoader(".modal-body")}),this.fileTitle=a.fileTitle,this.modelData=this.model.clone()},events:{"click #co-aaFirm_form_edit":"editCoFirm","click #co-aaFirm_form_new":"newCoFirm","click #co-aa_form_edit":"editCoAA","click #co-aa_form_new":"newCoAA","click .icon-typeahead-down":"showAllEntities","focusout .co-aa_typeahead":"coAATypeaheadChange","focusout .co-aaFirm_typeahead":"coAAFirmTypeaheadChange"},coAATypeaheadChange:function(a){var b=$(a.currentTarget),c=b.val();_.isEmpty(c)&&(this.modelData.set("attorneyID",0),this.initTypeaheadAttorney("firm"))},coAAFirmTypeaheadChange:function(a){var b=$(a.currentTarget),c=b.val();_.isEmpty(c)&&(this.modelData.set("firmID",0),this.initTypeaheadAttorney("attorney"))},newCoAA:function(){var a=new App.Models.Lawyer({applicantAttorney:1});a.set("firmID",this.modelData.get("firmID"));var b=new App.Views.Files.FileTabs.ApplicantAttorney.ApplicantAttorneyForm({model:a,isCodefendant:!0,coModel:this.modelData,modalTitle:"Add New Co-Defendant"}),c=new App.Helpers.Modal({view:b,sizeModal:"modal-lg"});c.show()},editCoAA:function(){if(this.modelData.get("attorneyID")){var a=new App.Models.Lawyer({lawyerID:this.modelData.get("attorneyID")}),b=new App.Views.Files.FileTabs.ApplicantAttorney.ApplicantAttorneyForm({model:a,isCodefendant:!0,coModel:this.modelData,modalTitle:"Edit Existing Co-Defendant"}),c=new App.Helpers.Modal({view:b,sizeModal:"modal-lg"});c.show(),a.fetch()}},editCoFirm:function(){if(this.modelData.get("firmID")){var a=new App.Models.Firm({firmID:this.modelData.get("firmID")}),b=new App.Views.Files.FileTabs.ApplicantAttorney.FirmApplicantAttorney({model:a,isCodefendant:!0,codefendants:this,modalTitle:"Edit Existing Co-Defendant Firm"}),c=new App.Helpers.Modal({view:b});c.show(),a.fetch()}},newCoFirm:function(){var a=new App.Models.Firm,b=new App.Views.Files.FileTabs.ApplicantAttorney.FirmApplicantAttorney({model:a,isCodefendant:!0,codefendants:this,modalTitle:"Add New Co-Defendant Firm"}),c=new App.Helpers.Modal({view:b});c.show()},afterRender:function(){var a=this.$el,b={};_.isUndefined(this.modelData.get("firmID"))&&_.isNull(this.modelData.get("firmID"))||(b={id:this.modelData.get("firmID"),firmName:this.modelData.get("firmName")},a.find(".typeahead.co-aaFirm_typeahead").data("datum",b),b={last:this.modelData.get("lawyerLastName"),first:this.modelData.get("lawyerFirstName"),middle:this.modelData.get("lawyerMiddleName"),email:this.modelData.get("lawyerEmail")},a.find(".typeahead.co-aa_typeahead").data("datum",b),this.modelData.set("lawyerCompleteName",this.modelData.get("lawyerLastName")+", "+this.modelData.get("lawyerFirstName")+" "+this.modelData.get("lawyerMiddleName"))),this.initTypeaheadAttorney("firm"),this.initTypeaheadAttorney("attorney")},resetAttorneyFirm:function(){this.$el.find('[name="co-aaFirm_typeahead"]').typeahead("val",""),this.modelData.set("firmID",0)},processAttorneyFirm:function(a){this.modelData.set("firmID",a.firmID),this.modelData.set("firmName",a.firmName),this.initTypeaheadAttorney("attorney")},resetAttorney:function(){this.$el.find('[name="co-appAttorney"]').typeahead("val",""),this.modelData.set("attorneyID",0)},processApplicantAttorney:function(a){this.modelData.set("attorneyID",a.lawyerID),this.initTypeaheadAttorney("firm"),_.isNull(a.firmID)||(this.modelData.set("firmID",a.firmID),this.modelData.set("firmName",a.firmName),this.$el.find(".typeahead.co-aaFirm_typeahead").typeahead("val",a.firmName)),this.$el.find('[name="co-appAttorney"]').typeahead("val",a.typeaheadResult)},initTypeaheadAttorney:function(a){var b="api/typeahead_controller/",c=".typeahead",d=void 0;if("firm"===a){var e=this.modelData.get("attorneyID")?this.modelData.get("attorneyID"):0;c+=".co-aaFirm_typeahead",d=$.proxy(this.processAttorneyFirm,this),b+="search_firms/"+e}else if("attorney"===a){var f=this.modelData.get("firmID")?this.modelData.get("firmID"):0;c+=".co-aa_typeahead",d=$.proxy(this.processApplicantAttorney,this),b+="search_applicant_attorney/"+f}App.Helpers.initTypeahead({view:this,elemClass:c,urlBuild:b,processFunction:d})},doSaveCoDefendant:function(){var a=this,b=!1;$("form.form-codefendat").valid()&&(this.model.isNew()&&(b=!0),this.model.set(this.modelData.toJSON()),this.model.save({},{success:function(c){var d=a.options.fileModel.get("codefendants"),e=new App.Helpers.Toast({message:"Co-Defendant Saved Correctly",classType:"success",fadeOut:5e3});if(e.render(),b)d.push(c.attributes);else{var f=_.indexOf(_.pluck(d,"codefendantID"),c.get("codefendantID"));d[f]=c.attributes}a.collection.add(c);var g=a.collection.toArray();a.collection.reset(g),a.elementModal.modal("hide")}}))},showAllEntities:function(a){App.Helpers.showAllEntities(a,this.$el)}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.FileTabs)&&(App.Views.Files.FileTabs={}),_.isUndefined(App.Views.Files.FileTabs.CoDefendants)&&(App.Views.Files.FileTabs.CoDefendants={}),App.Views.Files.FileTabs.CoDefendants.Panel=App.Helpers.View.extend({template:App.Templates.filesFileTabsCoDefendantsPanel,className:"co_defendants_panel",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},removeCoDefendant:function(){var a=new App.Views.Shared.AlertView({processFunction:"handlerRemoveCoDefendant",viewClass:"."+this.className,params:{codefendantID:this.row.get("codefendantID")},msg:"Are you sure to remove this Co-Defendant?",
title:"Remove Co-Defendant"}),b=new App.Helpers.Modal({view:a});b.show()},handlerRemoveCoDefendant:function(a){var b=this.options.collection.get(a.codefendantID),c=this;b.destroy({success:function(a,b){var d=b.msg||"Co-Defendant Deleted Successfully.",e=new App.Helpers.Toast({message:d,classType:"success",fadeOut:5e3});e.render(),c.options.fileModel.set("codefendants",c.collection.toJSON())},error:function(a,b){c.options.collection.add(a);var d=_.has(b.responseJSON,"error")?b.responseJSON.error:"Error trying to delete the Co-Defendant.",e=new App.Helpers.Toast({message:d,classType:"danger",fadeOut:5e3});e.render()}},{wait:!0})},doAddCoDefendant:function(){var a=new App.Models.CoDefendant,b=this.options.fileModel,c=b.get("fileNumber"),d=b.get("fileTitle"),e=this.options.collection;a.set("fileNumber",c);var f=new App.Views.Files.FileTabs.CoDefendants.CodefendantsForm({model:a,collection:e,fileTitle:d,fileModel:this.options.fileModel}),g=new App.Helpers.Modal({view:f,sizeModal:"modal-lg"});g.show()},doEditCoDefendant:function(a){var b=$(a),c=b.data("id"),d=this.options.collection,e=d.get(c),f=this.options.fileModel.get("fileTitle"),g=new App.Views.Files.FileTabs.CoDefendants.CodefendantsForm({model:e,collection:d,fileTitle:f,fileModel:this.options.fileModel}),h=new App.Helpers.Modal({view:g,sizeModal:"modal-lg"});h.show()}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.FileTabs)&&(App.Views.Files.FileTabs={}),_.isUndefined(App.Views.Files.FileTabs.DefenseAttorney)&&(App.Views.Files.FileTabs.DefenseAttorney={}),App.Views.Files.FileTabs.DefenseAttorney.Panel=App.Helpers.View.extend({template:App.Templates.filesFileTabsDefenseAttorneyPanel,className:"defense_attorney_panel",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.listenTo(this.options.collection,"add",function(){b.setPrimaryDA(),b.orderDATable()})},events:{"click #save-file-DAs":"saveDAsToFile"},afterRender:function(){this.setPrimaryDA(),this.orderDATable(),App.Helpers.initTypeahead({view:this,elemClass:".typeahead.da_typeahead",urlBuild:{url:"api/typeahead_controller/search_defense_attorney"},processFunction:$.proxy(this.processDATypeahead,this),unmatchedProcessFunction:$.proxy(this.processUnmatchedDATypeahead,this),cleanValueAfterEnter:!0})},processDATypeahead:function(a){var b=new App.Models.DefenseAttorney;a.uAttId=a.id,b.set(a),this.options.collection.add(b),this.$el.find('[name="defenseAttorneyName"]').typeahead("val","")},processUnmatchedDATypeahead:function(){this.DAid=void 0,this.$el.find(".typeahead.da_typeahead").typeahead("val","")},saveDAsToFile:function(a){a.preventDefault(),a.stopPropagation();var b=this,c=new App.Models.FileDefenseAttorneys,d=this.$el,e=d.find('[name="uAttId"]:checked'),f=[];if(_.each(e,function(a){a=$(a),f.push(a.attr("id"))}),f.length&&_.isUndefined(d.find('[name="primaryDA"]:checked').val())){var g=new App.Helpers.Toast({message:"Error: You must choose a primary DA.",classType:"danger",fadeOut:5e3});return void g.render()}c.set("fileNumber",this.options.fileNumber),c.set("da_ids",f),c.set("primaryDAid",d.find('[name="primaryDA"]:checked').val()),c.save({},{success:function(a,c){b.options.collection.reset(),b.options.collection.add(c),b.options.collection.original=b.options.collection.toJSON();var d=new App.Helpers.Toast({message:"Defense Attorneys saved correctly.",classType:"success",fadeOut:5e3});d.render(),b.options.fileModel.set("defenseAttorneys",b.options.collection.toJSON());var e=$(".files-dashboard").data("view");e.getPrimaryDAInfo(b.options.fileModel.get("defenseAttorneys"))},error:function(a,b){g=new App.Helpers.Toast({message:b.responseJSON.error,classType:"danger",fadeOut:5e3}),g.render()}})},orderDATable:function(){var a=this.$el,b=a.find("#da_table tbody");b.find("input:checkbox").attr("disabled",!1);var c=b.find("tr input:radio:checked").parent().parent();c.find("input:checkbox").attr("disabled","disabled"),b.find("tr").sort(function(a,b){return $("td:nth-child(2)",a).text().localeCompare($("td:nth-child(2)",b).text())}).appendTo(b),c.insertBefore(b.find("tr:first"))},setPrimaryDA:function(){var a=this.$el;this.options.collection.each(function(b){1===b.get("primaryDA")&&a.find('[name="primaryDA"][value="'+b.get("uAttId")+'"]').attr("checked","checked")})}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.FileTabs)&&(App.Views.Files.FileTabs={}),_.isUndefined(App.Views.Files.FileTabs.Employer)&&(App.Views.Files.FileTabs.Employer={}),App.Views.Files.FileTabs.Employer.EmployerForm=App.Helpers.View.extend({template:App.Templates.filesFileTabsEmployerEmployerForm,className:"employerForm",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.classNameParent=a.classNameParent||"general_panel";var b=this;this.listenTo(this.model,"request",function(){b.showLoader(".modal-body")}),this.listenTo(this.model,"sync error",function(){b.removeLoader(".modal-body")})},events:{"click #save-employer":"saveEmployer","click #copy-to-address":"copy_to_address","click #copy-to-address-billing":"copy_to_address_billing"},afterRender:function(){App.Helpers.addMask('[name="officePhone"]',"(999) 999-9999"),App.Helpers.addMask('[name="faxNumber"]',"(999) 999-9999"),App.Helpers.addMask('[name="tollFreePhone"]',"(999) 999-9999")},copy_to_address:function(){this.model.set("physicalAddress",this.model.get("mailingAddress")),this.model.set("physicalCity",this.model.get("mailingCity")),this.model.set("physicalState",this.model.get("mailingState")),this.model.set("physicalZip",this.model.get("mailingZip"))},copy_to_address_billing:function(){this.model.set("billingAddress",this.model.get("mailingAddress")),this.model.set("billingCity",this.model.get("mailingCity")),this.model.set("billingState",this.model.get("mailingState")),this.model.set("billingZip",this.model.get("mailingZip"))},saveEmployer:function(){if(!this.$el.find("form").valid())return void this.$el.find(".modal").data("bs.modal").adjustBackdrop();if(this.model.isNew())this.processSaveEmployer();else{var a=" If you edit this employer it will affect all files using this employer",b=new App.Views.Shared.AlertView({processFunction:"processSaveEmployer",viewClass:".employerForm",msg:a,title:"Warning"}),c=new App.Helpers.Modal({view:b});c.show()}},processSaveEmployer:function(){var a,b=this;this.model.set("companyName",this.$el.find('[name="companyName"]').val()),this.model.set("officePhone",this.$el.find('[name="officePhone"]').val()),this.model.set("faxNumber",this.$el.find('[name="faxNumber"]').val()),this.model.set("tollFreePhone",this.$el.find('[name="tollFreePhone"]').val()),this.model.save({},{success:function(c){if(b.elementModal.modal("hide"),b.options.isCodefendant)$('[name="co-employer"]').typeahead("val",c.get("companyName")),b.options.coModel&&b.options.coModel.set("employerID",c.get("companyID"));else if(_.isUndefined(b.options.isLienRep)){_.isUndefined(b.options.employerModelInContext)||(b.options.employerModelInContext.clear(),b.options.employerModelInContext.set(c.attributes),b.options.employerModelInContext.original=b.options.employerModelInContext.toJSON()),b.options.file.employerTypeaheadID=c.get("companyID"),b.options.fileModel&&b.options.fileModel.set("employerCompanyTypeahead",c.get("companyName"));var d=$("."+b.classNameParent).data("view");d.$el.find(".typeahead.new_file_employer_typeahead").typeahead("val",c.get("companyName")),d.$el.find(".typeahead.new_file_employer_typeahead").data("datum",{typeaheadResult:c.get("companyName")});var e=$("."+b.classNameParent).data("view");e&&(e.$el.find(".typeahead.employer_typeahead").typeahead("val",c.get("companyName")),e.$el.find(".typeahead.employer_typeahead").data("datum",{typeaheadResult:c.get("companyName")}))}else{var f=$(".lienRepForm").data("view");f.companyTypeaheadID=c.get("companyID"),$(".typeahead.company_typeahead").typeahead("val",c.get("companyName")),$(".typeahead.company_typeahead").data("datum",{typeaheadResult:c.get("companyName")})}a=new App.Helpers.Toast({message:"Company Created Successfully.",classType:"success",fadeOut:5e3}),a.render()},error:function(b,c){if(409===c.status){var d="The name you chose already exists, are you sure you want to create another company with the same name?",e=new App.Views.Shared.AlertView({processFunction:"allowRepeatedName",viewClass:".employerForm",msg:d,title:"Warning"}),f=new App.Helpers.Modal({view:e});f.show()}else a=new App.Helpers.Toast({message:c.responseJSON.error,classType:"danger",fadeOut:5e3}),a.render()}})},allowRepeatedName:function(){this.model.set("allowRepeatedName",1),this.processSaveEmployer()}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.FileTabs)&&(App.Views.Files.FileTabs={}),_.isUndefined(App.Views.Files.FileTabs.Employer)&&(App.Views.Files.FileTabs.Employer={}),App.Views.Files.FileTabs.Employer.Panel=App.Helpers.View.extend({template:App.Templates.filesFileTabsEmployerPanel,className:"employer_panel",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.listenTo(this.options.fileModel,"sync",function(){this.prepopulateData()}),this.listenTo(this.options.modEmployer,"change",function(){App.Helpers.getStateName(b.options.modEmployer,["mailingState","billingState","physicalState"])})},events:{"click #employer_form_edit":"editEmployerForm","click #employer_form_new":"newEmployerForm","click #assign-employer":"assignEmployer"},afterRender:function(){App.Helpers.initTypeahead({view:this,elemClass:".typeahead.employer_typeahead",urlBuild:{url:"api/typeahead_controller/search_companies"},processFunction:$.proxy(this.processEmployerTypeahead,this),unmatchedProcessFunction:$.proxy(this.processUnmatchedEmployerTypeahead,this)}),this.prepopulateData()},assignEmployer:function(a){a.preventDefault(),a.stopPropagation(),$("#form-employer").valid()&&(_.isUndefined(this.options.employerTypeaheadID)||(this.options.fileModel.set("employerID",this.options.employerTypeaheadID),this.options.fileModel.save({},{success:function(){var a=new App.Helpers.Toast({message:"Employer assigned to this file successfully.",classType:"success",fadeOut:5e3});a.render()},error:function(){var a=new App.Helpers.Toast({message:"Error assigning employer to this file.",classType:"danger",fadeOut:5e3});a.render()}})))},newEmployerForm:function(){var a=new App.Models.Company,b=new App.Views.Files.FileTabs.Employer.EmployerForm({model:a,employerModelInContext:this.options.modEmployer,file:this.options,fileModel:this.options.fileModel}),c=new App.Helpers.Modal({view:b,sizeModal:"modal-lg"});c.show()},editEmployerForm:function(){if(!_.isUndefined(this.options.employerTypeaheadID)){var a=new App.Models.Company({companyID:this.options.employerTypeaheadID,id:this.options.employerTypeaheadID}),b=new App.Views.Files.FileTabs.Employer.EmployerForm({model:a,employerModelInContext:this.options.modEmployer,file:this.options,fileModel:this.options.fileModel}),c=new App.Helpers.Modal({view:b,sizeModal:"modal-lg"});c.show(),a.fetch()}},processUnmatchedEmployerTypeahead:function(){this.options.fileModel.set("employerID",void 0),this.$el.find(".typeahead.employer_typeahead").typeahead("val",""),this.options.employerTypeaheadID=void 0,this.options.modEmployer.clear()},processEmployerTypeahead:function(a){var b=this;this.options.employerTypeaheadID=a.id;var c=new App.Models.Company(a);c.fetch({success:function(a){b.options.modEmployer.set(a.attributes)}}),this.options.fileModel.set("employerID",a.id)},prepopulateData:function(){this.options.employerTypeaheadID=this.options.modEmployer.get("companyID");var a={id:this.options.modEmployer.get("companyID"),companyName:this.options.modEmployer.get("companyName")};this.$el.find(".typeahead.employer_typeahead").data("datum",a)}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.FileTabs)&&(App.Views.Files.FileTabs={}),_.isUndefined(App.Views.Files.FileTabs.General)&&(App.Views.Files.FileTabs.General={}),App.Views.Files.FileTabs.General.Panel=App.Helpers.View.extend({template:App.Templates.filesFileTabsGeneralPanel,className:"general_panel",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.hasDependencies=0,this.colAdjProgress=new App.Collections.WCCases,this.colListWCStatus=new App.Helpers.Collection,this.colListLienStatus=new App.Helpers.Collection,this.listenTo(this.options.fileModel,"sync",function(){b.originalRecomendation=b.options.fileModel.get("recommendations"),b.prepopulateData(),b.renderAdjProgress(),b.addEvent=!1}),this.fileIsClosed=!1,this.listenToOnce(this.options.colFileTypes,"add",function(){b.options.fileModel.isNew()&&b.options.fileModel.set("fileTypeID",b.setDefaultFileType())})},events:{'change [name="fileType"]':"showHideMilestones","click .save-general":"saveGeneral","click .wcab-down-arrow":"showWCAB","click .wcab-up-arrow":"hideWCAB","click #file_creation_employer_form_edit":"fileCreationEmployerFormEdit","click #file_creation_employer_form_new":"fileCreationEmployerFormNew",'change [name="newFileApplicantFirstName"]':"autoGenerateName",'change [name="newFileApplicantMiddleName"]':"autoGenerateName",'change [name="newFileApplicantLastName"]':"autoGenerateName","click .canedit > .adjProgressContainer .checkbox span":"changeAdjProgressColor","click .delete-file":"deleteFile","click .btn-goBack":"goBackStep1","click .change-file-status":"changeFileStatus","keydown .change-file-status":"keyDownInputChangeFileStatus","keydown .input-file-status":"keyDownInputFileStatus","focus .input-file-status":"focusInputFileStatus","click .popover-history-file-status":"showHistoryFileStatus"},showHistoryFileStatus:function(a){var b=$(a.currentTarget);b.trigger("mouseover")},focusInputFileStatus:function(a){var b=$(a.currentTarget);b.trigger("mouseover")},keyDownInputChangeFileStatus:function(a){if(13!==a.keyCode){var b=$(a.currentTarget),c=b.attr("current-popover-id");c&&$("#"+c).popover("hide")}},keyDownInputFileStatus:function(a){return 9===a.keyCode},afterRender:function(){App.Helpers.initTypeahead({view:this,elemClass:".typeahead.client_typeahead",urlBuild:{url:"api/typeahead_controller/search_clients"},processFunction:$.proxy(this.processClientTypeahead,this)}),App.Helpers.initTypeahead({view:this,elemClass:".typeahead.new_file_employer_typeahead",urlBuild:{url:"api/typeahead_controller/search_companies"},processFunction:$.proxy(this.processNewFileEmployerTypeahead,this)}),App.Helpers.initTypeahead({view:this,elemClass:".typeahead.new_file_da_typeahead",urlBuild:{url:"api/typeahead_controller/search_defense_attorney"},processFunction:$.proxy(this.processNewFileDATypeahead,this)}),this.renderPopoverHistoryFileStatus(),this.renderPopoverFileStatus(),this.renderAdjProgress(),this.checkDelete()},changeFileStatus:function(a){a.preventDefault(),a.stopPropagation();var b=void 0,c=$(a.currentTarget).attr("current-popover-id"),d=this.$el.find(a.currentTarget).data("file-type"),e="WC"===d?"currentWCFileStatus":"currentLienFileStatus",f=this.options.fileModel.get(e)?this.options.fileModel.get(e).status:"";if(this.fileIsClosed&&0!==this.options.fileModel.get("fileStatusID")&&this.options.fileModel.set("openDate",moment().format("YYYY-MM-DD")),c&&($("#"+c).popover("hide"),$('[data-toggle="popover"]').popover("hide")),f.includes("Open")){this.addEvent="wc_file_closes";var g=new App.Helpers.Model,h=new App.Views.Files.GenericEventsModals.ClosureModal({model:g,originalFileStatus:this.originalFileStatus,fileModel:this.options.fileModel,type:"Close",category:d});b=new App.Helpers.Modal({view:h}),b.show()}else if(f.includes("Closed")){this.addEvent=!0;var i=new App.Helpers.Model,j=new App.Views.Files.GenericEventsModals.OpenModal({model:i,originalFileStatus:this.originalFileStatus,fileModel:this.options.fileModel,type:"Re-Open",category:d});b=new App.Helpers.Modal({view:j}),b.show()}else{this.addEvent=!0;var k=new App.Helpers.Model,l=new App.Views.Files.GenericEventsModals.OpenModal({model:k,originalFileStatus:this.originalFileStatus,fileModel:this.options.fileModel,type:"Open",category:d});b=new App.Helpers.Modal({view:l}),b.show()}},changeStateFlagMilestones:function(){var a=this.$el;a.find(".milestones-expanded").toggle(),a.find(".milestones-inline").toggle()},setDefaultFileType:function(){var a=this.options.colFileTypes.find(function(a){return _.findWhere(a,{"default":1})});return 1===a.attributes["default"]?a.attributes.fileTypeID:"-1"},showHideMilestones:function(){var a=this.$el;1===a.find('[name="fileType"] :selected').data("flatfee")||"3"===a.find('[name="fileType"] :selected').val()?a.find("#milestones-container").hide():a.find("#milestones-container").show()},showWCAB:function(){this.$el.find(".wcab-container").slideDown(),this.$el.find(".wcab-up-arrow").toggle(),this.$el.find(".wcab-down-arrow").toggle()},hideWCAB:function(){this.$el.find(".wcab-container").slideUp(),this.$el.find(".wcab-down-arrow").toggle(),this.$el.find(".wcab-up-arrow").toggle()},saveGeneral:function(a){a.preventDefault(),a.stopPropagation();var b=$(a.currentTarget),c=this,d=!1;if(c.options.fileModel.isNew()?d=!0:c.originalRecomendation!==c.options.fileModel.get("recommendations")&&c.options.fileModel.set("oldRecommendations",c.originalRecomendation),!this.options.fileModel.get("openLienDate")&&!this.options.fileModel.get("openDate")){var e=new App.Helpers.Toast({message:"You have to at least set one open file status",classType:"danger",fadeOut:4e3});return void e.render()}$(".form-general form").valid()&&(b.attr("disabled",!0),b.text("Processing..."),0===c.requireMatterID&&c.options.fileModel.set("matter_id",null),c.options.fileModel.set("milestones",c.options.colMilestones.toJSON()),c.addEvent===!1&&c.options.fileModel.get("eventAutoGenerated")?c.options.fileModel.unset("eventAutoGenerated",{silent:!0}):c.addEvent=!1,this.options.fileModel.save({},{success:function(a){var b=new App.Helpers.Toast({message:"File saved successfully.",classType:"success",fadeOut:5e3});b.render(),d&&(c.options.fileModel.unset("eventAutoGenerated"),Backbone.history.navigate("#files/edit/"+a.get("fileNumber"),{trigger:!0}))},error:function(a,b){var c=new App.Helpers.Toast({message:b.responseJSON.error,classType:"danger",fadeOut:5e3});c.render()},complete:function(){b.removeAttr("disabled"),b.text("Save File")}}))},autoGenerateName:function(){var a=this.options.fileModel.get("applicantFirstName")||"",b=this.options.fileModel.get("applicantLastName")||"",c=this.options.fileModel.get("applicantMiddleName")?" "+this.options.fileModel.get("applicantMiddleName"):"",d=this.newFileEmployerName||"",e=b+", "+a+c+" v "+d;this.options.fileModel.set("fileTitle",e),this.options.fileModel.set("WCABname",e)},resetNewFileEmployerID:function(){this.newFileEmployerID=void 0,this.newFileEmployerName=void 0,this.$el.find(".typeahead.new_file_employer_typeahead").typeahead("val","")},resetAdjusterTypeaheadID:function(){this.clientRepTypeaheadID=void 0,this.$el.find(".typeahead.client_rep_typeahead").typeahead("val","")},processNewFileEmployerTypeahead:function(a){this.newFileEmployerID=a.id,this.newFileEmployerName=a.companyName,this.options.fileModel.set("employerID",a.id),this.autoGenerateName()},processNewFileDATypeahead:function(a){this.newFileDAID=a.id,this.options.fileModel.set("DAID",a.id)},processClientTypeahead:function(a){this.clientTypeaheadID=a.id,this.options.fileModel.set("clientNameTypeahead",a.typeaheadResult),a.clientTypeID===App.Const.clientTypes.INSURER?(this.options.modInsurerClient.clear(),this.options.modInsurerClient.set("clientID",a.clientID),this.options.modInsurerClient.fetch(),this.options.fileModel.set("tpaClient",void 0),this.options.modTpaClient.clear()):a.clientTypeID===App.Const.clientTypes.TPA&&(this.options.fileModel.set("insurerClient",void 0),this.options.modTpaClient.clear(),this.options.modTpaClient.set("clientID",a.clientID),this.options.modTpaClient.fetch(),this.options.modInsurerCompany.clear()),this.options.fileModel.set("wcClientID",a.clientID),this.options.fileModel.set("clientTypeID",a.clientTypeID),this.requireMatterID=a.requireMatterID?1:0,this.options.fileModel.set("adjusterID",0),this.options.fileModel.set("adjusterNameTypeahead",""),this.options.fileModel.set("tempClientRepID",0),this.options.modClientRep.clear(),this.resetAdjusterTypeaheadID(),this.options.modTempClientRep.clear()},fileCreationEmployerFormEdit:function(){if(!_.isUndefined(this.newFileEmployerID)){var a=new App.Models.Company({companyID:this.newFileEmployerID,id:this.newFileEmployerID}),b=new App.Views.Files.FileTabs.Employer.EmployerForm({model:a,file:this.options}),c=new App.Helpers.Modal({view:b,sizeModal:"modal-lg"});c.show(),a.fetch(),this.listenTo(a,"sync",function(a){this.newFileEmployerName=a.get("companyName"),this.$el.find('[name="newFileEmployer"]').val(a.get("companyName")),this.autoGenerateName()})}},fileCreationEmployerFormNew:function(){var a=this.$el.find('[name="newFileEmployer"]').val().trim(),b=new App.Models.Company({companyName:a});this.listenToOnce(b,"sync",function(a){this.newFileEmployerName=a.get("companyName"),this.$el.find('[name="newFileEmployer"]').val(a.get("companyName")),this.options.fileModel.set("employerID",a.get("companyID")),this.autoGenerateName()});var c=new App.Views.Files.FileTabs.Employer.EmployerForm({model:b,file:this.options}),d=new App.Helpers.Modal({view:c,sizeModal:"modal-lg"});d.show()},prepopulateData:function(){var a=this.$el;if(this.options.fileModel.get("fileTitle")!==this.options.fileModel.get("WCABname")&&this.showWCAB(),a.find("#fileStatus").val(_.isUndefined(this.options.fileModel.get("fileStatus"))?0:this.options.fileModel.get("fileStatus")),0!==this.options.fileModel.get("wcClientID")){this.options.clientTypeaheadID=_.isUndefined(this.options.fileModel.get("tpaClient"))?_.isUndefined(this.options.fileModel.get("insurerClient"))?void 0:this.options.fileModel.get("insurerClient").clientID:this.options.fileModel.get("tpaClient").clientID;var b=_.isUndefined(this.options.fileModel.get("tpaClient"))?_.isUndefined(this.options.fileModel.get("insurerClient"))?"":this.options.fileModel.get("insurerClient"):this.options.fileModel.get("tpaClient");_.isUndefined(b)||""===b||(this.options.clientTypeaheadID=b.clientID,a.find(".typeahead.client_typeahead").data("datum",b),a.find(".typeahead.client_typeahead").typeahead("val",this.options.fileModel.attributes.clientNameTypeahead),this.requireMatterID=b.requireMatterID)}else this.options.clientTypeaheadID=void 0,this.requireMatterID=0;this.showHideMilestones()},renderAdjProgress:function(){var a=this.options.fileModel.get("adjProgress")||[];this.colAdjProgress.reset(a)},getClassNameBySetUp:function(){return this.model.getClassNameBySetUp()},getClassNameByDiscovery:function(){return this.model.getClassNameByDiscovery()},getClassNameByTreatment:function(){return this.model.getClassNameByTreatment()},getClassNameByHearingTrial:function(){return this.model.getClassNameByHearingTrial()},getClassNameByWCClosed:function(){return this.model.getClassNameByWCClosed()},getClassNameByLiens:function(){return this.model.getClassNameByLiens()},getClassNameByFileClosed:function(){return this.model.getClassNameByFileClosed()},changeAdjProgressColor:function(a){var b=$(a.currentTarget),c=b.data("caseid"),d=this.colAdjProgress.get(c),e=b.data("attribute"),f=_.indexOf(d.leyendAdjProgress,_.findWhere(d.leyendAdjProgress,{className:b.attr("class")})),g=f>=d.leyendAdjProgress.length-1?0:f+1,h=d.leyendAdjProgress[g];d.set(e,h.label),this.options.fileModel.set("adjProgress",this.colAdjProgress.toJSON())},canEditAdjProgress:function(){return App.loginModel.canEdit(90)},checkDelete:function(){var a=this;!this.options.fileModel.isNew()&&App.loginModel.hasAccess(34)&&$.get("api/files_controller/file_has_dependencies/"+this.options.fileModel.get("fileNumber"),{},function(b){a.hasDependencies=b})},deleteFile:function(a){a.preventDefault(),a.stopPropagation();var b="Are you sure you want to delete this file?",c=new App.Views.Shared.AlertView({processFunction:"processDeleteFile",viewClass:".general_panel",msg:b,title:"Delete: "+this.options.fileModel.get("fileTitle")}),d=new App.Helpers.Modal({view:c});d.show()},processDeleteFile:function(){var a=void 0;this.options.fileModel.destroy({url:"api/files_controller/delete_file/"+this.options.fileModel.get("fileNumber"),success:function(){a=new App.Helpers.Toast({message:"File Deleted",classType:"warning",fadeOut:4e3}),a.render(),Backbone.history.navigate("#files",{trigger:!0})},error:function(b,c){a=new App.Helpers.Toast({message:c.responseJSON.error,classType:"danger",fadeOut:4e3}),a.render()}})},goBackStep1:function(a){a.preventDefault(),a.stopPropagation(),Backbone.history.navigate("files/new/step1",{trigger:!0})},printLienCurrentStatus:function(){return this.options.fileModel.get("currentLienFileStatus")?this.options.fileModel.get("currentLienFileStatus").status.replace("Lien-",""):"Not Open"},printWCCurrentStatus:function(){return this.options.fileModel.get("currentWCFileStatus")?this.options.fileModel.get("currentWCFileStatus").status.replace("WC-",""):"Not Open"},isFileOpened:function(){var a=this.options.fileModel.get("currentWCFileStatus");return a&&a.status.includes("Open")},isFileLienOpened:function(){var a=this.options.fileModel.get("currentLienFileStatus");return a&&a.status.includes("Open")},renderPopoverHistoryFileStatus:function(){var a=this,b=this.$el;b.find(".popover-history-file-status").popover({trigger:"manual",animation:!1,html:!0,content:function(){return a.renderPopoverContentHistoryFileStatus(this)}}).on("mouseenter",function(a){var b=$(a.currentTarget);setTimeout(function(){b.popover("show"),b.siblings(".popover").on("mouseleave",function(){b.popover("hide")})},400)}).on("mouseleave",function(a){var b=$(a.currentTarget);setTimeout(function(){$(".popover").on("mouseleave",function(){b.popover("hide")}),$(".popover:hover").length||b.popover("hide")},400)})},renderPopoverContentHistoryFileStatus:function(a){var b=a.getAttribute("id"),c=$("#"+b),d="",e=c.data("column"),f=this.options.fileModel.get(e),g=new App.Helpers.Collection;return g.reset(f),g.sortBy="previousOpenDate",g.sortOrder="DESC",g.sort(),g.remove(g.first()),0===g.length?"No data found":(g.each(function(a){var b=a.get("previousOpenDate"),c=a.get("eventTypeName");d+="<li>"+c+": "+b+"</li>"}),'<ul id="history'+e+'" class="list-unstyled">'+d+"</ul>")},renderPopoverFileStatus:function(){var a=this.$el,b=this;a.find(".input-file-status").popover({trigger:"manual",animation:!1,html:!0,content:function(){return a.find(".panel-status-flow").html()}}).on("mouseenter",function(a){var c=$(a.currentTarget);setTimeout(function(){c.popover("show");var a=function(a){var c=a.data("file-type"),d="",e={WC:"currentWCFileStatus",Lien:"currentLienFileStatus"}[c],f=b.options.fileModel.get(e);d=f&&f.status.includes("Open")?"close":f&&f.status.includes("Closed")?"re-open":"open",a.siblings(".popover").find("button").attr("disabled","disabled"),a.siblings(".popover").find("button").css({opacity:"0.2"}),a.siblings(".popover").find('button[data-action="'+d+'"]').attr("id","btn-file-status"),a.siblings(".popover").find('button[data-action="'+d+'"]').attr("data-file-type",c),a.siblings(".popover").find('button[data-action="'+d+'"]').removeAttr("disabled"),a.siblings(".popover").find('button[data-action="'+d+'"]').removeAttr("style"),a.siblings(".popover").find('button[data-action="'+d+'"]').attr("current-popover-id",a.attr("aria-describedby"))};a(c,b),c.siblings(".popover").on("mouseleave",function(){c.popover("hide")})},400)}).on("mouseleave",function(a){var b=$(a.currentTarget);setTimeout(function(){$(".popover").on("mouseleave",function(){b.popover("hide")}),$(".popover:hover").length||b.popover("hide")},400)})}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.FileTabs)&&(App.Views.Files.FileTabs={}),_.isUndefined(App.Views.Files.FileTabs.Injuries)&&(App.Views.Files.FileTabs.Injuries={}),App.Views.Files.FileTabs.Injuries.VenueForm=App.Helpers.View.extend({template:App.Templates.filesFileTabsInjuriesVenueForm,className:"venueForm",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.listenTo(this.model,"request",function(){b.showLoader(".modal-body")}),this.listenTo(this.model,"sync error",function(){b.removeLoader(".modal-body")}),this.modelCase=a.modelCase,this.colCases=a.colCases,this.module=_.isUndefined(a.modelCase)?_.isUndefined(this.modelEvents)?1:this.modelEvents.get("moduleID"):a.modelCase.get("moduleID")},events:{"click #save-venue":"saveVenue"},saveVenue:function(){var a=this.$el;if(a.find(".form-venue").valid())if(this.model.isNew())this.processSaveVenue();else{var b="If you edit this venue it will affect all files using this venue",c=new App.Views.Shared.AlertView({processFunction:"processSaveVenue",viewClass:".venueForm",msg:b,title:"Warning"}),d=new App.Helpers.Modal({view:c,parentClassName:"cases_panel"});d.show()}},processSaveVenue:function(){var a=this,b=this.model.isNew();this.model.set("moduleID",this.module),this.model.save({},{success:function(c){var d=new App.Helpers.Toast({message:"Venue Saved Correctly",classType:"success",fadeOut:5e3});d.render();var e=c.get("venueName"),f=c.get("venueAbbrev");if(_.isUndefined(a.options.modelEvents)){var g=$(".WcCasesForm").data("view");_.isEmpty(c.get("venueAbbrev"))?a.modelCase.set("venueNameTypeahead",e):(e=c.get("venueName")+", "+c.get("venueAbbrev"),a.modelCase.set("venueNameTypeahead",e)),g.$el.find(".typeahead.venue_typeahead").typeahead("val",e),g.$el.find(".typeahead.venue_typeahead").data("datum",{typeaheadResult:e}),a.modelCase.get("venueID")===c.get("venueID")&&a.modelCase.set({venueName:c.get("venueName"),venueAbbrev:c.get("venueAbbrev")});var h=a.colCases.where({venueID:c.get("venueID")});_.each(h,function(a){a.set({venueAbbrev:f,venueName:c.get("venueName")})}),b&&(g.venueID=c.get("venueID"))}else{a.options.modelEvents.set("venueID",c.get("venueID")),a.options.eventData.venueTypeaheadID=c.get("venueID"),_.isEmpty(c.get("venueAbbrev"))?(e=c.get("venueName"),a.options.modelEvents.set("venueNameTypeahead",e)):(e=c.get("venueName")+", "+c.get("venueAbbrev"),a.options.modelEvents.set("venueNameTypeahead",e));var i=$(".typeahead.venue_typeahead");i.typeahead("val",e),i.data("datum",{typeaheadResult:e})}a.elementModal.modal("hide")},error:function(a,b){var c=new App.Helpers.Toast({message:b.responseJSON.error,classType:"danger",fadeOut:5e3});c.render()}})}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.FileTabs)&&(App.Views.Files.FileTabs={}),_.isUndefined(App.Views.Files.FileTabs.Injuries)&&(App.Views.Files.FileTabs.Injuries={}),App.Views.Files.FileTabs.Injuries.WcCasesForm=App.Helpers.View.extend({template:App.Templates.filesFileTabsInjuriesWcCasesForm,className:"WcCasesForm",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.isLeadCase=0,this.listenTo(this.model,"request",function(){b.showLoader(".modal-body")}),this.listenTo(this.model,"sync error",function(){b.removeLoader(".modal-body"),b.prepopulateData(),b.applyPermissions()}),this.fileModel=a.fileModel,this.colBodyParts=new App.Collections.BodyParts,this.venueID=void 0},events:{"click #venue_form_edit":"editVenueForm","click #venue_form_new":"newVenueForm",'change [name="venue"]':"resetVenueTypeaheadID","click #save-case":"saveCase","click .icon-typeahead-down":"showAllEntities","click .btn-editBodyPart":"editBodyPart","click .btn-addBodyPart":"addBodyPart","click [name=leadCase]":"checkLeadCase"},checkLeadCase:function(a){var b=$(a.currentTarget),c=this.$el;c.find(".msg-form").html("You should update the claim number in file"),this.collection.length>1&&(1===this.isLeadCase&&b.is(":checked")===!1?(c.find("[name=selectLeadCases]").attr("required","required"),c.find(".panel-select-leadCase").show()):1===this.isLeadCase&&(c.find("[name=selectLeadCases]").removeAttr("required"),
c.find(".panel-select-leadCase").hide()))},prepopulateData:function(){var a=this.$el,b=this;this.colBodyParts.reset(this.model.get("bodyParts")),this.isLeadCase=this.model.get("leadCase"),this.venueID=this.model.get("venueID"),a.find(".typeahead.venue_typeahead").typeahead("val",this.model.get("venueNameTypeahead")),this.collection.each(function(c){if(b.model.get("caseID")!==c.get("caseID")){var d='<option value="'+c.get("caseID")+'">'+c.get("ADJid")+"</option>";a.find("[name=selectLeadCases]").append(d)}})},_processSelectedVenue:function(a){this.venueID=a.id},afterRender:function(){App.Helpers.initTypeahead({view:this,elemClass:".typeahead.venue_typeahead",urlBuild:{url:"api/typeahead_controller/search_venues"},processFunction:$.proxy(this._processSelectedVenue,this),nameKey:"venueName"})},saveCase:function(a){a.preventDefault(),a.stopPropagation();var b=this.$el,c=this;if(_.isUndefined(this.venueID)&&b.find(".typeahead.venue_typeahead").typeahead("val",""),!b.find("form.form-cases").valid())return void Uit.SessionFlash.get("closeModal");var d=b.find("[name=venue]").val();this.model.set({venueName:d,venueID:this.venueID}),this.model.isNew()&&this.model.set("bodyParts",this.colBodyParts.toJSON()),b.find(".panel-select-leadCase").is(":visible")&&this.model.set("newLeadCaseID",b.find("[name=selectLeadCases] :selected").val()),this.model.save({},{success:function(a){var d=new App.Helpers.Toast({message:"Case Saved Correctly",classType:"success",fadeOut:5e3});d.render(),$(".wc_cases_panel").data("view").loadCases(),Uit.SessionFlash.get("closeModal")===!1?(Backbone.history.navigate(c.options.fileModel.fileEditUrl()+"/injuries/case/edit/"+a.get("caseID"),{silent:!0}),c.listenToOnce(a,"sync",function(){b.find(".btn-addBodyPart").trigger("click")})):c.elementModal.modal("hide")}})},editBodyPart:function(a){var b=$(a.currentTarget),c=b.data("id")||b.data("cid"),d=this.fileModel,e=this.model,f=this.colBodyParts,g=f.get(c),h=new App.Collections.Documents,i=new App.Collections.MedicalsBodyParts;i.sortBy="doctorName",h.reset(g.get("documents")),i.reset(g.get("medical2bodyParts")),this._formBodyPart({colBodyParts:f,colMedicalsByBodyParts:i,modelCase:e,fileModel:d,parentClassName:"cases_panel",model:g,colDocuments:h}),this.listenToOnce(g,"sync",function(){var a=$(".cases_panel").data("view");a&&a.loadCases()})},addBodyPart:function(){var a=new App.Models.BodyPart,b=this.$el,c=this.fileModel,d=this.model,e=new App.Collections.Documents,f=new App.Collections.MedicalsBodyParts;f.sortBy="doctorName",this.model.isNew()?(Uit.SessionFlash.set("closeModal",!1),b.find("#save-case").trigger("click")):(this._formBodyPart({colBodyParts:this.colBodyParts,colMedicalsByBodyParts:f,modelCase:d,fileModel:c,parentClassName:"cases_panel",model:a,colDocuments:e}),this.listenToOnce(a,"sync",function(){var a=$(".cases_panel").data("view");a&&a.loadCases()}))},_formBodyPart:function(a){var b=new App.Views.Files.EventTabs.EventWcCaseBodyPart(a),c=new App.Helpers.Modal({view:b,sizeModal:"modal-lg",parentClassName:a.parentClassName});c.show()},newVenueForm:function(){var a=new App.Models.Venue,b=new App.Views.Files.FileTabs.Injuries.VenueForm({model:a,modelCase:this.model,colCases:this.collection}),c=new App.Helpers.Modal({view:b,parentClassName:"cases_panel"});c.show()},editVenueForm:function(){if(!_.isUndefined(this.venueID)){var a=new App.Models.Venue({venueID:this.venueID}),b=new App.Views.Files.FileTabs.Injuries.VenueForm({model:a,modelCase:this.model,colCases:this.collection}),c=new App.Helpers.Modal({view:b,parentClassName:"cases_panel"});c.show(),a.fetch()}},resetVenueTypeaheadID:function(){this.venueID=void 0}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.FileTabs)&&(App.Views.Files.FileTabs={}),_.isUndefined(App.Views.Files.FileTabs.Injuries)&&(App.Views.Files.FileTabs.Injuries={}),App.Views.Files.FileTabs.Injuries.WCCasesPanel=App.Helpers.View.extend({template:App.Templates.filesFileTabsInjuriesWcCasesPanel,className:"wc_cases_panel",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.listenTo(this.collection,"request",function(){this.showLoader(".panel-cases")}),this.listenTo(this.collection,"sync error",function(){this.removeLoader(".panel-cases")})},events:{"click .btn-editCase":"editCase","click .btn-newCase":"newCase","click .btn-bodypart-edit":"editBodyPart","click .body-part-delete":"deleteBodyPart"},getDOIandEndCT:function(){return this.model.getDOIandEndCT()},newCase:function(){var a=this.options.fileModel.get("fileNumber"),b=new App.Models.Case({fileNumber:a}),c=this,d=this._formCase({model:b,fileModel:this.options.fileModel,collection:this.collection});Backbone.history.navigate(this.options.fileModel.fileEditUrl()+"/injuries/case/new",{silent:!0}),d.elementModal.on("hidden.bs.modal",function(){Backbone.history.navigate(c.options.fileModel.fileEditUrl()+"/injuries",{trigger:!0})})},editCase:function(a){var b=$(a.currentTarget),c=b.data("id"),d=this,e=new App.Models.Case({caseID:c}),f=this._formCase({model:e,fileModel:this.options.fileModel,collection:this.collection});e.fetch(),Backbone.history.navigate(d.options.fileModel.fileEditUrl()+"/injuries/case/edit/"+c,{silent:!0}),f.elementModal.on("hidden.bs.modal",function(){Backbone.history.navigate(d.options.fileModel.fileEditUrl()+"/injuries",{trigger:!0})})},buildUrlByResource:function(a){var b=this.options.fileModel.fileEditUrl();a&&(b+="/"+a),this.options.defaultTabSelected=a,Backbone.history.navigate(b)},_formCase:function(a){var b=new App.Views.Files.FileTabs.Injuries.WcCasesForm(a),c=new App.Helpers.Modal({view:b,parentClassName:this.className});return c.show(),b},loadCases:function(){var a=this;this.collection.sortBy="leadCase",this.collection.sortOrder="DESC",this.collection.sort(),this.collection.reset([]),this.collection.fetch({url:"api/wc_cases_controller/get_cases/?fileNumber="+this.options.fileModel.get("fileNumber"),success:function(b){var c=[],d=$(".general_panel").data("view");a.options.fileModel.set("cases",b.toJSON()),App.loginModel.hasAccess(90)&&(b.each(function(a){var b;a.get("removeAdjProgress")||(b={caseID:a.get("caseID"),ADJid:a.get("ADJid"),adjPgSetUp:a.get("adjPgSetUp")?a.get("adjPgSetUp"):"",adjPgDiscovery:a.get("adjPgDiscovery")?a.get("adjPgDiscovery"):"",adjPgTreatment:a.get("adjPgTreatment")?a.get("adjPgTreatment"):"",adjPgHearingsTrial:a.get("adjPgHearingsTrial")?a.get("adjPgHearingsTrial"):"",adjPgWCClosed:a.get("adjPgWCClosed")?a.get("adjPgWCClosed"):"",adjPgLiens:a.get("adjPgLiens")?a.get("adjPgLiens"):"",adjPgFileClosed:a.get("adjPgFileClosed")?a.get("adjPgFileClosed"):"",leadCase:a.get("leadCase"),removeAdjProgress:a.get("removeAdjProgress")},c.push(b))}),a.options.fileModel.set("adjProgress",c),a.options.fileModel.original.adjProgress=c,d.renderAdjProgress())}})},deleteBodyPart:function(a){var b=$(a.currentTarget),c="Are you sure you want to delete body part?",d=new App.Views.Shared.AlertView({processFunction:"processDeleteBodyPart",viewClass:".wc_cases_panel",params:{elem:b},msg:c,title:"Delete Body Part"}),e=new App.Helpers.Modal({view:d,parentClassName:this.className});e.show()},processDeleteBodyPart:function(a){var b,c=this,d=a.elem.data("bodypartid"),e=a.elem.data("caseid"),f=this.collection.get(e),g=new App.Collections.BodyParts(f.get("bodyParts")),h=g.get(d);h.destroy({success:function(){b=new App.Helpers.Toast({message:"Body Part Deleted.",classType:"success",fadeOut:5e3}),b.render(),c.loadCases()}})},editBodyPart:function(a){var b=$(a.currentTarget),c=b.data("bodypartid"),d=b.data("caseid"),e=this,f=this.collection.get(d),g=new App.Collections.BodyParts(f.get("bodyParts")),h=g.get(c),i=new App.Collections.Documents,j=new App.Collections.MedicalsBodyParts;j.sortBy="doctorName",i.reset(h.get("documents")),j.reset(h.get("medical2bodyParts"));var k=new App.Views.Files.EventTabs.EventWcCaseBodyPart({colBodyParts:g,colMedicalsByBodyParts:j,modelCase:f,fileModel:this.options.fileModel,model:h,colDocuments:i,updateBodypartCol:!0,parentClassName:this.className});this.listenToOnce(h,"sync",this.loadCases);var l=new App.Helpers.Modal({view:k,sizeModal:"modal-lg",parentClassName:this.className});l.show(),Backbone.history.navigate(this.options.fileModel.fileEditUrl()+"/injuries/bodypart/edit/"+c,{silent:!0}),k.elementModal.on("hidden.bs.modal",function(){Backbone.history.navigate(e.options.fileModel.fileEditUrl()+"/injuries",{trigger:!0})})}});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};_.isUndefined(App.Views.Files)&&(App.Views.Files={}),App.Views.Files.Form=App.Helpers.View.extend({template:App.Templates.filesForm,className:"files-edit",events:{"click .unsaved":"unsavedModal","click .icon-typeahead-down":"showAllEntities"},initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.options.defaultTabSelected=this.options.defaultTabSelected||"general",this.modAA=new App.Models.Lawyer,this.modAAfirm=new App.Models.Firm,this.colDAs=new App.Collections.DefenseAttorneys,this.aaCompanies=new App.Helpers.Collection,this.colCases=new App.Collections.WCCases,this.modEmployer=new App.Models.Company,this.modClientRep=new App.Models.ClientRep,this.modTempClientRep=new App.Models.ClientRep,this.tempClientRepCompanies=new App.Collections.UserCompanies,this.clientRepCompanies=new App.Collections.UserCompanies,this.clientRepFiles=new App.Helpers.Collection,this.tempClientRepFiles=new App.Helpers.Collection,this.colCoDeFendants=new App.Collections.CoDefendants,this.colMilestones=new App.Collections.Milestones,this.modTpaClient=new App.Models.Client,this.colInsurerCompanies=new App.Collections.Companies,this.haschangedTheClient=!1,this.model.isNew()?(this.colFileTypes=this.options.colFileTypes,this.colFileStatus=this.options.colFileStatus,this.listenToOnce(this.options.milestonesList,"sync",function(a){b.colMilestones.reset(a.models),b.$el.find(".milestone").click()})):this.colFileTypes=new App.Collections.FileTypes,this.modInsurerClient=new App.Models.Client,this.modInsurerCompany=new App.Models.Company,this.listenTo(this.colDAs,"add",function(){var a=b.colDAs.getPrimaryDA();this.daEmail=a.email,this.daPhone=a.phone,b.$el.find("#dashboard-da").html(a.fullName)}),this.listenTo(this.modEmployer,"change:mailingState change:billingState change:physicalState",function(){App.Helpers.getStateName(b.modEmployer,["mailingState","billingState","physicalState"])}),this.listenTo(this.modTpaClient,"change:mailingState change:billingState change:physicalState",function(){b.model.isTPAType()&&App.Helpers.getStateName(b.modTpaClient,["mailingState","billingState","physicalState"])}),this.listenTo(this.modInsurerCompany,"change:mailingState change:billingState change:physicalState",function(){b.model.isTPAType()&&App.Helpers.getStateName(b.modInsurerCompany,["mailingState","billingState","physicalState"])}),this.listenTo(this.modInsurerClient,"change:mailingState change:billingState change:physicalState",function(){b.model.isTPAType()||App.Helpers.getStateName(b.modInsurerClient,["mailingState","billingState","physicalState"])}),this.listenTo(this.model,"sync",function(){var a=_.isUndefined(b.model.get("clientRep"))?[]:b.model.get("clientRep").companies,c=_.isUndefined(b.model.get("tempClientRep"))?[]:b.model.get("tempClientRep").companies,d=_.isUndefined(b.model.get("AA"))?[]:b.model.get("AA").firms,e=_.isUndefined(b.model.get("clientRep"))?[]:b.model.get("clientRep").clientRepFiles,f=_.isUndefined(b.model.get("tempClientRep"))?[]:b.model.get("tempClientRep").clientRepFiles,g=_.isUndefined(b.model.get("defenseAttorneys"))?[]:b.model.get("defenseAttorneys");b.colCases.add(b.model.get("cases")),b.modEmployer.set(b.model.get("employerCompany")),b.modClientRep.set(0!==b.model.get("clientRepID")?b.model.get("clientRep"):{}),b.modTpaClient.set(b.model.get("tpaClient")),b.colInsurerCompanies.reset(b.model.get("insurerCompanies")),b.modInsurerClient.set(b.model.get("insurerClient")),b.modInsurerCompany.set(b.model.get("insurerCompany")),b.modTempClientRep.set(0!==b.model.get("clientRepID")?b.model.get("tempClientRep"):{}),b.colDAs.add(g),b.modAA.set(0!==b.model.get("AAid")?b.model.get("AA"):{}),b.modAAfirm.set(0!==b.model.get("AAfirmID")?b.model.get("AAfirm"):{}),b.aaCompanies.add(d),b.clientRepCompanies.add(a),b.tempClientRepCompanies.add(c),b.model.set("hasTempClientRep",b.model.hasTempClientRep()),b.clientRepFiles.reset(e),b.tempClientRepFiles.add(f),b.colCoDeFendants.add(b.model.get("codefendants")),b.colMilestones.reset(b.model.get("milestones")),b.colFileTypes.add(b.model.get("fileTypes")),b.model.original=b.model.toJSON(),b.modEmployer.original=b.modEmployer.toJSON(),b.modClientRep.original=b.modClientRep.toJSON(),b.modTempClientRep.original=b.modTempClientRep.toJSON(),b.modAA.original=b.modAA.toJSON(),b.modAAfirm.original=b.modAAfirm.toJSON(),b.modInsurerCompany.original=b.modInsurerCompany.toJSON(),b.colDAs.original=b.colDAs.toJSON(),b.colInsurerCompanies.original=b.colInsurerCompanies.toJSON()}),this.listenTo(this.model,"request update",function(){b.showLoader()}),this.listenTo(this.model,"sync error",function(){b.removeLoader()})},unsavedModal:function(a){var b=this.$el,c=b.find(".nav li.active").find("a").attr("href"),d=this.choseTabModel(c);this.neededModel=d,this.destinationTab=b.find(a.currentTarget).find("a").attr("href"),this.destinationModel=this.choseTabModel(this.destinationTab);var e=this.model.previousAttributes();""!==this.model.get("applicantDOB")||!_.isNull(e.applicantDOB)&&"0000-00-00"!==e.applicantDOB||(this.model.original.applicantDOB=""),""!==this.model.get("applicantDOH")||!_.isNull(e.applicantDOH)&&"0000-00-00"!==e.applicantDOH||(this.model.original.applicantDOH=""),""!==this.model.get("openDate")||!_.isNull(e.openDate)&&"0000-00-00"!==e.openDate||(this.model.original.openDate=""),""!==this.model.get("claimDOL")||!_.isNull(e.claimDOL)&&"0000-00-00"!==e.claimDOL||(this.model.original.claimDOL="");var f=!0;"#panel-applicant"===c?(this.model.set("applicantDOB",b.find('[name="applicantDOB"]').val()),this.model.set("applicantDOH",b.find('[name="applicantDOH"]').val()),this.model.set("applicantHomePhone",b.find('[name="homePhone"]').val()),this.model.set("applicantCellPhone",b.find('[name="cellPhone"]').val()),this.model.set("applicantSSN",b.find('[name="applicantSSN"]').val()),f=this.checkModel(["applicantFirstName","applicantMiddleName","applicantLastName","applicantDOH","applicantDOB","applicantJobTitle","applicantSSN","applicantHomePhone","applicantCellPhone","applicantEmail","applicantMailingAddress","applicantMailingCity","applicantMailingState","applicantMailingZip","applicantPhysicalAddress","applicantPhysicalCity","applicantPhysicalState","applicantPhysicalZip"])):"#panel-general"===c?f=this.checkModel(["fileTitle","WCABname","clientNameTypeahead","fileTypeID","openDate","claimNumber","claimDOL","recommendations","coverages","adjProgress"]):"#panel-cases"!==c&&"#panel-co-def"!==c&&"#panel-address-pos"!==c&&(f=_.isEqual(this[d.modelName].toJSON(),this[d.modelName].original)),a.stopImmediatePropagation(),a.stopPropagation(),a.preventDefault(),f||"#panel-cases"===c||"#panel-co-def"===c||"#panel-address-pos"===c?this.changeTabAndDisplayView():(this._createGeneralQuestion(),this.modalQuestion.show())},changeTabAndDisplayView:function(){var a=this.$el;this[this.destinationModel.viewRenderMethod](),a.find('.nav-tabs a[href="'+this.destinationTab+'"]').tab("show")},checkModel:function(a){var b=this,c=!0;return _.each(a,function(a){var d=_.isNull(b.model.get(a))?"":b.model.get(a),e=_.isNull(b.model.original[a])?"":b.model.original[a];d!==e&&c&&("applicantSSN"===a?c=b.checkInputsWithMaks(1,a):"applicantHomePhone"===a||"applicantCellPhone"===a?c=b.checkInputsWithMaks(2,a):"object"===_typeof(b.model.get(a))?c=_.isEqual(d,e):("clientNameTypeahead"===a&&(b.haschangedTheClient=!0),c=!1))}),c},checkInputsWithMaks:function(a,b){var c=_.isNull(this.model.get(b))?"":this.model.get(b).toString(),d=_.isNull(this.model.original[b])?"":this.model.original[b].toString();return 1===a?(c=c.replace(/-/g,""),d=d.replace(/-/g,"")):2===a&&(c=c.replace(/[{() }-]/g,""),d=d.replace(/[{() }-]/g,"")),c===d},choseTabModel:function(a){var b={};switch(a){case"#panel-defenseAttorney":b={modelName:"colDAs",saveButton:"#save-file-DAs",viewRenderMethod:"defenseAttorneyPanel"};break;case"#panel-employer":b={modelName:"modEmployer",saveButton:"#assign-employer",viewRenderMethod:"employerPanel"};break;case"#panel-client-rep":b={modelName:"modClientRep",saveButton:"#assign-client_rep",viewRenderMethod:"adjusterPanel"};break;case"#panel-app-attorney":b={modelName:"modAA",saveButton:"#assign-applicant-attorney",viewRenderMethod:"applicantAttorneyPanel"};break;case"#panel-cases":b={viewRenderMethod:"casesPanel"};break;case"#panel-co-def":b={viewRenderMethod:"coDefendantsPanel"};break;case"#panel-client":b={modelName:"colInsurerCompanies",saveButton:"#btn-InsurerCompanies",viewRenderMethod:"clientPanel"};break;case"#panel-address-pos":b={viewRenderMethod:"addressPosPanel"};break;case"#panel-applicant":b={modelName:"model",saveButton:".update-applicant",viewRenderMethod:"applicantPanel"};break;case"#panel-general":b={modelName:"model",saveButton:".save-general",viewRenderMethod:"generalPanel"};break;case"#panel-calendar":b={modelName:"model",viewRenderMethod:"calendarEventsPanel"}}return b},unsavedGoToTab:function(){if(_.contains(["colDAs","colInsurerCompanies"],this.neededModel.modelName))this[this.neededModel.modelName].reset(),this[this.neededModel.modelName].add(this[this.neededModel.modelName].original);else if("model"===this.neededModel.modelName){this.model.set(this.model.original);var a=$(".client_rep_panel").data("view");_.isUndefined(a)||(this.model.set("wcClientID",this.model.original.wcClientID),this.modClientRep.clear(),this.modClientRep.set(this.modClientRep.original),this.modTempClientRep.clear(),this.modTempClientRep.set(this.modTempClientRep.original),a.prepopulateData())}else this[this.neededModel.modelName].clear(),this[this.neededModel.modelName].set(this[this.neededModel.modelName].original);this.viewQuestion.elementModal.modal("hide"),this.changeTabAndDisplayView()},saveAndGoToTab:function(){var a=this.$el,b=this;a.find(this.neededModel.saveButton).trigger("click"),this.viewQuestion.elementModal.modal("hide"),("#assign-insurer"===this.neededModel.saveButton||"#save-file-DAs"===this.neededModel.saveButton||"#btn-InsurerCompanies"===this.neededModel.saveButton||"#assign-applicant-attorney"===this.neededModel.saveButton||$(this.neededModel.saveButton).closest("form").valid())&&("#panel-tpa"===this.destinationTab&&this.haschangedTheClient?(this.destinationTab="#panel-insurer",this.destinationModel.viewRenderMethod="insurerPanel"):"#panel-insurer"===this.destinationTab&&this.haschangedTheClient&&(this.destinationTab="#panel-tpa",this.destinationModel.viewRenderMethod="tpaPanel"),$(document).one("ajaxComplete",function(a,c){200===c.status&&b.changeTabAndDisplayView()}),this.haschangedTheClient=!1)},generalPanel:function(a){var b=new App.Views.Files.FileTabs.General.Panel({fileModel:this.model,colMilestones:this.colMilestones,colFileTypes:this.colFileTypes,colFileStatus:this.colFileStatus,modInsurerClient:this.modInsurerClient,modTpaClient:this.modTpaClient,modInsurerCompany:this.modInsurerCompany,modAA:this.modAA,modAAfirm:this.modAAfirm,modClientRep:this.modClientRep,modTempClientRep:this.modTempClientRep});App.Helpers.htmlView(b,"#panel-general"),this._handlerScrollTop(),!this.model.isNew()&&_.isUndefined(a)&&this.buildUrlByResource()},coDefendantsPanel:function(){var a=new App.Views.Files.FileTabs.CoDefendants.Panel({fileModel:this.model,collection:this.colCoDeFendants});App.Helpers.htmlView(a,"#panel-co-def"),this._handlerScrollTop(),this.buildUrlByResource("co_defendants")},employerPanel:function(){var a=new App.Views.Files.FileTabs.Employer.Panel({fileModel:this.model,modEmployer:this.modEmployer,employerTypeaheadID:this.employerTypeaheadID});App.Helpers.htmlView(a,"#panel-employer"),this._handlerScrollTop(),this.buildUrlByResource("employer")},adjusterPanel:function(){var a=new App.Views.Files.FileTabs.ClientRep.Panel({fileModel:this.model,modTempClientRep:this.modTempClientRep,clientRepFiles:this.clientRepFiles,modClientRep:this.modClientRep,tempClientRepID:this.tempClientRepID,clientRepTypeaheadID:this.clientRepTypeaheadID,clientTypeaheadID:this.clientTypeaheadID,clientTypeaheadName:this.clientTypeaheadName});App.Helpers.htmlView(a,"#panel-client-rep"),this._handlerScrollTop(),this.buildUrlByResource("clientRep")},defenseAttorneyPanel:function(){var a=new App.Views.Files.FileTabs.DefenseAttorney.Panel({fileNumber:this.model.get("fileNumber"),collection:this.colDAs,fileModel:this.model});App.Helpers.htmlView(a,"#panel-defenseAttorney"),this._handlerScrollTop(),this.buildUrlByResource("defense_attorney")},casesPanel:function(){var a=new App.Views.Files.FileTabs.Injuries.WCCasesPanel({fileModel:this.model,collection:this.colCases});App.Helpers.htmlView(a,"#panel-cases"),a.loadCases(),this._handlerScrollTop(),this.buildUrlByResource("injuries")},applicantPanel:function(){var a=new App.Views.Files.FileTabs.Applicant.Panel({fileModel:this.model});App.Helpers.htmlView(a,"#panel-applicant"),this._handlerScrollTop(),this.buildUrlByResource("applicant")},clientPanel:function(){var a=new App.Views.Files.FileTabs.Client.Panel({modInsurerClient:this.modInsurerClient,modTpaClient:this.modTpaClient,colInsurerCompanies:this.colInsurerCompanies,fileModel:this.model,colCases:this.colCases});App.Helpers.htmlView(a,"#panel-client"),this._handlerScrollTop(),this.buildUrlByResource("client")},applicantAttorneyPanel:function(){var a=new App.Views.Files.FileTabs.ApplicantAttorney.Panel({modAA:this.modAA,modAAfirm:this.modAAfirm,aaCompanies:this.aaCompanies,fileModel:this.model});App.Helpers.htmlView(a,"#panel-app-attorney"),this._handlerScrollTop(),this.buildUrlByResource("applicant_attorney")},afterRender:function(){this.generalPanel("DoNotBuildURL"),this.model.trigger("sync"),this.$el.find("#tabFiles").sticky({topSpacing:0}),this._createGeneralQuestion()},_handlerScrollTop:function(){var a=this.$el;a.find("#tabFiles-sticky-wrapper").hasClass("is-sticky")&&$("html,body").scrollTop(331)},resetClientTypeaheadID:function(){this.clientTypeaheadID=void 0,this.clientTypeaheadName=void 0,this.$el.find(".typeahead.client_typeahead").typeahead("val","")},resetAdjusterTypeaheadID:function(){this.clientRepTypeaheadID=void 0,this.$el.find(".typeahead.client_rep_typeahead").typeahead("val","")},resetTempClientRepTypeaheadID:function(){this.tempClientRepTypeaheadID=void 0},addressPosPanel:function(){var a=new App.Views.Files.FileTabs.AddressPos.Panel({fileModel:this.model});App.Helpers.htmlView(a,"#panel-address-pos"),this._handlerScrollTop(),this.buildUrlByResource("address_pos")},calendarEventsPanel:function(){var a=new App.Views.Files.CalendarPanel({fileModel:this.model});App.Helpers.htmlView(a,"#panel-calendar"),this._handlerScrollTop(),this.buildUrlByResource("calendar_panel")},buildUrlByResource:function(a){if(this.options.defaultTabSelected===a)return!1;var b=this.model.fileEditUrl();a&&(b+="/"+a),this.options.defaultTabSelected=a,Backbone.history.navigate(b)},handlerTabSelection:function(){var a,b=this.$el;b.find("#tabFiles li").removeClass("active"),a=b.find('[data-tabname="'+this.options.defaultTabSelected+'"]'),a.closest("li").addClass("active"),this.destinationTab=a.attr("href"),this.destinationModel=this.choseTabModel(this.destinationTab),this.changeTabAndDisplayView(),b.find(this.destinationTab).addClass("in active")},onClose:function(){var a=this.$el;a.find(".tab-content .tab-pane").each(function(){var a=$(this).find("div");if(a){var b=a.data("view");Uit.cleanView(b)}})},_createGeneralQuestion:function(){this.viewQuestion=new App.Views.Files.GenericQuestion({noAnswer:$.proxy(this.unsavedGoToTab,this),yesAnswer:$.proxy(this.saveAndGoToTab,this)}),this.modalQuestion=new App.Helpers.Modal({view:this.viewQuestion})}});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};_.isUndefined(App.Views.Files)&&(App.Views.Files={}),App.Views.Files.FormSubro=App.Helpers.View.extend({template:App.Templates.filesFormSubro,className:"FilesFormSubro",events:{"click .unsaved":"unsavedModal","click .icon-typeahead-down":"showAllEntities"},initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.options.defaultTabSelected=this.options.defaultTabSelected||"general",this.modPlaintiff=new App.Models.Lawyer,this.modWorkerComp=new App.Models.Lawyer,this.colSubroAttorneys=new App.Collections.DefenseAttorneys,this.aaCompanies=new App.Helpers.Collection,this.modEmployer=new App.Models.Company,this.modClientRep=new App.Models.ClientRep,this.modTempClientRep=new App.Models.ClientRep,this.clientRepCompanies=new App.Collections.UserCompanies,this.clientRepFiles=new App.Collections.Files,this.tempClientRepFiles=new App.Collections.Files,this.colDeFendants=new App.Collections.Defendants,this.colMilestones=new App.Collections.Milestones,this.clientModel=new App.Models.Client,this.haschangedTheClient=!1,this.model.isNew()?(this.colFileTypes=this.options.colFileTypes,this.listenToOnce(this.options.milestonesList,"sync",function(a){b.colMilestones.reset(a.models),b.$el.find(".milestone").click()})):this.colFileTypes=new App.Collections.FileTypes,this.colInsurerCompanies=new App.Collections.Companies,this.listenTo(this.colSubroAttorneys,"add",function(){var a=b.colSubroAttorneys.getPrimaryDA();this.daEmail=a.email,this.daPhone=a.phone,b.$el.find("#dashboard-da").html(a.fullName)}),this.listenTo(this.modEmployer,"change:mailingState change:billingState change:physicalState",function(){App.Helpers.getStateName(b.modEmployer,["mailingState","billingState","physicalState"])}),this.listenTo(this.clientModel,"change:mailingState change:billingState change:physicalState",function(){App.Helpers.getStateName(b.clientModel,["mailingState","billingState","physicalState"])}),this.listenTo(this.model,"sync",function(){var a,c=_.isUndefined(b.model.get("adjuster"))?[]:b.model.get("adjuster").companies,d=_.isUndefined(b.model.get("AA"))?[]:b.model.get("AA").firms,e=_.isUndefined(b.model.get("clientRep"))?[]:b.model.get("clientRep").clientRepFiles,f=_.isUndefined(b.model.get("tempClientRep"))?[]:b.model.get("tempClientRep").clientRepFiles,g=_.isUndefined(b.model.get("subroAttorneys"))?[]:b.model.get("subroAttorneys");b.modEmployer.set(b.model.get("employerCompany")),b.modClientRep.set(0!==b.model.get("clientRepID")?b.model.get("clientRep"):{}),b.colInsurerCompanies.reset(b.model.get("insurerCompanies")),b.clientModel.set(b.model.get("client")),b.modTempClientRep.set(0!==b.model.get("tempClientRepID")?b.model.get("tempClientRep"):{}),b.colSubroAttorneys.add(g),b.modPlaintiff.set(0!==b.model.get("plaintiffID")?b.model.get("plaintiff"):{}),b.modWorkerComp.set(0!==b.model.get("workerCompID")?b.model.get("workerComp"):{}),b.aaCompanies.add(d),b.clientRepCompanies.add(c),b.model.set("hasTempClientRep",b.model.hasTempClientRep()),b.clientRepFiles.reset(e),b.tempClientRepFiles.add(f),b.colDeFendants.add(b.model.get("defendants")),b.colFileTypes.add(b.model.get("fileTypes")),a=b.colFileTypes.findWhere({fileTypeID:Number(b.model.get("subroFileTypeID"))}),a&&a.get("flatfee")&&_.each(b.model.get("milestones"),function(a){a.selected=0}),b.colMilestones.reset(b.model.get("milestones")),b.model.original=b.model.toJSON(),b.modEmployer.original=b.modEmployer.toJSON(),b.modClientRep.original=b.modClientRep.toJSON(),b.modTempClientRep.original=b.modTempClientRep.toJSON(),b.colSubroAttorneys.original=b.colSubroAttorneys.toJSON(),b.colInsurerCompanies.original=b.colInsurerCompanies.toJSON()}),this.listenTo(this.model,"request update",function(){b.showLoader()}),this.listenTo(this.model,"sync error",function(){b.removeLoader()})},unsavedModal:function(a){var b=this.$el,c=b.find(".nav li.active").find("a").attr("href"),d=this.choseTabModel(c);this.neededModel=d,this.destinationTab=b.find(a.currentTarget).find("a").attr("href"),this.destinationModel=this.choseTabModel(this.destinationTab);var e=this.model.previousAttributes();""!==this.model.get("injuredWorkerDOB")||!_.isNull(e.injuredWorkerDOB)&&"0000-00-00"!==e.injuredWorkerDOB||(this.model.original.injuredWorkerDOB=""),""!==this.model.get("injuredWorkerDOH")||!_.isNull(e.injuredWorkerDOH)&&"0000-00-00"!==e.injuredWorkerDOH||(this.model.original.injuredWorkerDOH=""),""!==this.model.get("subroClaimDOL")||!_.isNull(e.subroClaimDOL)&&"0000-00-00"!==e.subroClaimDOL||(this.model.original.subroClaimDOL="");var f=!0;"#panel-injured-wkr"===c?(this.model.set("injuredWorkerDOB",b.find('[name="injuredWorkerDOB"]').val()),this.model.set("injuredWorkerDOH",b.find('[name="injuredWorkerDOH"]').val()),this.model.set("injuredWorkerHomePhone",b.find('[name="homePhone"]').val()),this.model.set("injuredWorkerCellPhone",b.find('[name="cellPhone"]').val()),this.model.set("injuredWorkerSSN",b.find('[name="injuredWorkerSSN"]').val()),f=this.checkModel(["injuredWorkerFirstName","injuredWorkerMiddleName","injuredWorkerLastName","injuredWorkerDOH","injuredWorkerDOB","injuredWorkerJobTitle","injuredWorkerSSN","injuredWorkerHomePhone","injuredWorkerCellPhone","injuredWorkerEmail","injuredWorkerMailingAddress","injuredWorkerMailingCity","injuredWorkerMailingState","injuredWorkerMailingZip","injuredWorkerPhysicalAddress","injuredWorkerPhysicalCity","injuredWorkerPhysicalState","injuredWorkerPhysicalZip","plaintiffFirmTypeahead","plaintiffTypeahead","workerCompFirmTypeahead","workerCompTypeahead"])):"#panel-general"===c?f=this.checkModel(["subroInternalFileName","subroOfficialFileName","clientNameTypeahead","subroFileTypeID","subroBillingClaimNum","subroClaimDOL","subroPlanOfAction","subroCoverages"]):"#panel-cases"!==c&&"#panel-def"!==c&&"#panel-address-pos"!==c&&(f=_.isEqual(this[d.modelName].toJSON(),this[d.modelName].original)),a.stopImmediatePropagation(),a.stopPropagation(),a.preventDefault(),f||"#panel-cases"===c||"#panel-def"===c||"#panel-address-pos"===c?this.changeTabAndDisplayView():(this._createGeneralQuestion(),this.modalQuestion.show())},changeTabAndDisplayView:function(){var a=this.$el;this[this.destinationModel.viewRenderMethod](),a.find('.nav-tabs a[href="'+this.destinationTab+'"]').tab("show")},checkModel:function(a){var b=this,c=!0;return _.each(a,function(a){var d=_.isNull(b.model.get(a))?"":b.model.get(a),e=_.isNull(b.model.original[a])?"":b.model.original[a];d!==e&&c&&("injuredWorkerSSN"===a?c=b.checkInputsWithMaks(1,a):"injuredWorkerHomePhone"===a||"injuredWorkerCellPhone"===a?c=b.checkInputsWithMaks(2,a):"object"===_typeof(b.model.get(a))?c=_.isEqual(d,e):("clientNameTypeahead"===a&&(b.haschangedTheClient=!0),c=!1))}),c},checkInputsWithMaks:function(a,b){var c=_.isNull(this.model.get(b))?"":this.model.get(b).toString(),d=_.isNull(this.model.original[b])?"":this.model.original[b].toString();return 1===a?(c=c.replace(/-/g,""),d=d.replace(/-/g,"")):2===a&&(c=c.replace(/[{() }-]/g,""),d=d.replace(/[{() }-]/g,"")),c===d},choseTabModel:function(a){var b={};switch(a){case"#panel-general":b={modelName:"model",saveButton:".save-general",viewRenderMethod:"generalPanel"};break;case"#panel-injured-wkr":b={modelName:"model",saveButton:".save-general",viewRenderMethod:"injuredWkrPanel"};break;case"#panel-client":b={modelName:"colInsurerCompanies",saveButton:"#btn-InsurerCompanies",viewRenderMethod:"clientPanel"};break;case"#panel-client-rep":b={modelName:"modClientRep",saveButton:"#assign-client_rep",viewRenderMethod:"clientRepPanel"};break;case"#panel-employer":b={modelName:"modEmployer",saveButton:"#assign-employer",viewRenderMethod:"employerPanel"};break;case"#panel-subro-atty":b={modelName:"colSubroAttorneys",
saveButton:"#save-file-DAs",viewRenderMethod:"subroAttyPanel"};break;case"#panel-def":b={modelName:"model",saveButton:".save-general",viewRenderMethod:"defendantsPanel"};break;case"#panel-address-pos":b={viewRenderMethod:"addressPosPanel"};break;case"#panel-calendar":b={viewRenderMethod:"calendarEventsPanel"}}return b},unsavedGoToTab:function(){if(_.contains(["colSubroAttorneys","colInsurerCompanies"],this.neededModel.modelName))this[this.neededModel.modelName].reset(),this[this.neededModel.modelName].add(this[this.neededModel.modelName].original);else if("model"===this.neededModel.modelName){this.model.set(this.model.original);var a=$(".adjuster_panel").data("view");_.isUndefined(a)||(this.model.set("TPAid",this.model.original.TPAid),this.model.set("insurerID",this.model.original.insurerID),this.modClientRep.clear(),this.modClientRep.set(this.modClientRep.original),this.modTempClientRep.clear(),this.modTempClientRep.set(this.modTempClientRep.original),a.prepopulateData())}else this[this.neededModel.modelName].clear(),this[this.neededModel.modelName].set(this[this.neededModel.modelName].original);this.viewQuestion.elementModal.modal("hide"),this.changeTabAndDisplayView()},saveAndGoToTab:function(){var a=this.$el,b=this;a.find(this.neededModel.saveButton).trigger("click"),this.viewQuestion.elementModal.modal("hide"),("#assign-insurer"===this.neededModel.saveButton||"#save-file-DAs"===this.neededModel.saveButton||"#btn-InsurerCompanies"===this.neededModel.saveButton||"#assign-applicant-attorney"===this.neededModel.saveButton||$(this.neededModel.saveButton).closest("form").valid())&&($(document).one("ajaxComplete",function(a,c){200===c.status&&b.changeTabAndDisplayView()}),this.haschangedTheClient=!1)},calendarEventsPanel:function(){var a=new App.Views.Files.CalendarPanel({fileModel:this.model});App.Helpers.htmlView(a,"#panel-calendar"),this._handlerScrollTop(),this.buildUrlByResource("calendar_panel")},generalPanel:function(a){var b=new App.Views.Files.FileSubroTabs.General.Panel({fileModel:this.model,colMilestones:this.colMilestones,colFileTypes:this.colFileTypes,clientModel:this.clientModel,modPlaintiff:this.modPlaintiff,modWorkerComp:this.modWorkerComp,modClientRep:this.modClientRep,modTempClientRep:this.modTempClientRep});App.Helpers.htmlView(b,"#panel-general"),this._handlerScrollTop(),!this.model.isNew()&&_.isUndefined(a)&&this.buildUrlByResource()},injuredWkrPanel:function(){var a=new App.Views.Files.FileSubroTabs.InjuredWkr.Panel({fileModel:this.model,modPlaintiff:this.modPlaintiff,modWorkerComp:this.modWorkerComp});App.Helpers.htmlView(a,"#panel-injured-wkr"),this._handlerScrollTop(),this.buildUrlByResource("injured_worker")},clientPanel:function(){var a=new App.Views.Files.FileSubroTabs.Client.Panel({model:this.clientModel,colInsurerCompanies:this.colInsurerCompanies,fileModel:this.model});App.Helpers.htmlView(a,"#panel-client"),this._handlerScrollTop(),this.buildUrlByResource("client")},clientRepPanel:function(){var a=new App.Views.Files.FileSubroTabs.ClientRep.Panel({fileModel:this.model,modTempClientRep:this.modTempClientRep,clientRepFiles:this.clientRepFiles,modClientRep:this.modClientRep,tempAdjusterID:this.tempAdjusterID,adjusterTypeaheadID:this.adjusterTypeaheadID,clientTypeaheadID:this.clientTypeaheadID,clientTypeaheadName:this.clientTypeaheadName});App.Helpers.htmlView(a,"#panel-client-rep"),this._handlerScrollTop(),this.buildUrlByResource("clientRep")},employerPanel:function(){var a=new App.Views.Files.FileSubroTabs.Employer.Panel({fileModel:this.model,modEmployer:this.modEmployer,employerTypeaheadID:this.employerTypeaheadID});App.Helpers.htmlView(a,"#panel-employer"),this._handlerScrollTop(),this.buildUrlByResource("employer")},subroAttyPanel:function(){var a=new App.Views.Files.FileSubroTabs.SubroAtty.Panel({subroFileNumber:this.model.get("subroFileNumber"),collection:this.colSubroAttorneys,fileModel:this.model});App.Helpers.htmlView(a,"#panel-subro-atty"),this._handlerScrollTop(),this.buildUrlByResource("subro_attorney")},defendantsPanel:function(){var a=new App.Views.Files.FileSubroTabs.Defendants.Panel({fileModel:this.model,collection:this.colDeFendants});App.Helpers.htmlView(a,"#panel-def"),this._handlerScrollTop(),this.buildUrlByResource("defendants")},addressPosPanel:function(){var a=new App.Views.Files.FileTabs.AddressPos.Panel({fileModel:this.model});App.Helpers.htmlView(a,"#panel-address-pos"),this._handlerScrollTop(),this.buildUrlByResource("address_pos")},afterRender:function(){this.generalPanel("DoNotBuildURL"),this.model.isNew()||this.model.trigger("sync"),this.$el.find("#tabFiles").sticky({topSpacing:0}),this._createGeneralQuestion()},_handlerScrollTop:function(){var a=this.$el;a.find("#tabFiles-sticky-wrapper").hasClass("is-sticky")&&$("html,body").scrollTop(331)},resetClientTypeaheadID:function(){this.clientTypeaheadID=void 0,this.clientTypeaheadName=void 0,this.$el.find(".typeahead.client_typeahead").typeahead("val","")},resetAdjusterTypeaheadID:function(){this.clientRepTypeaheadID=void 0,this.$el.find(".typeahead.client_rep_typeahead").typeahead("val","")},resetTempAdjusterTypeaheadID:function(){this.tempClientRepTypeaheadID=void 0},showAllEntities:function(a){App.Helpers.showAllEntities(a,this.$el)},buildUrlByResource:function(a){if(this.options.defaultTabSelected===a)return!1;var b=this.model.fileEditUrl();a&&(b+="/"+a),this.options.defaultTabSelected=a,Backbone.history.navigate(b)},handlerTabSelection:function(){var a,b=this.$el;b.find("#tabFiles li").removeClass("active"),a=b.find('[data-tabname="'+this.options.defaultTabSelected+'"]'),a.closest("li").addClass("active"),this.destinationTab=a.attr("href"),this.destinationModel=this.choseTabModel(this.destinationTab),this.changeTabAndDisplayView(),b.find(this.destinationTab).addClass("in active")},onClose:function(){var a=this.$el;a.find(".tab-content .tab-pane").each(function(){var a=$(this).find("div");if(a){var b=a.data("view");Uit.cleanView(b)}})},_createGeneralQuestion:function(){this.viewQuestion=new App.Views.Files.GenericQuestion({noAnswer:$.proxy(this.unsavedGoToTab,this),yesAnswer:$.proxy(this.saveAndGoToTab,this)}),this.modalQuestion=new App.Helpers.Modal({view:this.viewQuestion})}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),App.Views.Files.FormWizardNew=App.Helpers.View.extend({template:App.Templates.filesFormWizardNew,className:"FilesFormWizardNew",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.wizardModel=new App.Helpers.Model({linkToFile:"",module:"1",relatedFileNumber:null,title:""}),this.colModules=new App.Collections.Modules,this.listenTo(this.wizardModel,"change:linkToFile",this.unlinkFile),this.colModules.fetch({success:function(a,b){1===b.length&&(Uit.SessionFlash.set("App.Views.Files.FormWizardNew",{relatedFileNumber:null,module:b[0].moduleID}),Backbone.history.navigate("files/new/step2",{trigger:!0}))}})},events:{"click .icon-typeahead-down":"showAllEntities","click .btn-continue":"btnContinue"},afterRender:function(){App.Helpers.initTypeahead({view:this,elemClass:".typeahead.file_by_module",urlBuild:{url:"api/typeahead_controller/search_files_by_module"},processFunction:$.proxy(this.processFunction,this)})},processFunction:function(a){this.wizardModel.set("relatedFileNumber",a.id),this.wizardModel.set("title",a.typeaheadResult)},showAllEntities:function(a){App.Helpers.showAllEntities(a,this.$el)},linkToFile:function(){return"1"===this.wizardModel.get("linkToFile")},handlerContinue:function(){return""===this.wizardModel.get("linkToFile")||"1"===this.wizardModel.get("linkToFile")&&_.isNull(this.wizardModel.get("relatedFileNumber"))?!0:"0"===this.wizardModel.get("linkToFile")?!1:void 0},unlinkFile:function(){this.wizardModel.set("relatedFileNumber",null),this.wizardModel.set("title",""),this.$el.find(".typeahead.file_by_module").typeahead("val","")},btnContinue:function(a){a.preventDefault(),a.stopPropagation(),Uit.SessionFlash.set("App.Views.Files.FormWizardNew",{relatedFileNumber:this.wizardModel.get("relatedFileNumber"),module:this.wizardModel.get("module")}),Backbone.history.navigate("files/new/step2",{trigger:!0})}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.GenericEventsModals)&&(App.Views.Files.GenericEventsModals={}),App.Views.Files.GenericEventsModals.ClosureModal=App.Helpers.View.extend({template:App.Templates.filesGenericEventsModalsClosureModal,className:"FilesGenericEventsModalsClosureModal",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.colEventReasons=new App.Collections.EventReasons,this.colEventReasons.openOrClosed=0,this.listenTo(this.model,"request",function(){b.showLoader(".modal-body")}),this.listenTo(this.model,"sync error",function(){b.removeLoader(".modal-body")})},events:{"click #save-closure":"saveClosure"},afterRender:function(){this.colEventReasons.moduleID=this.options.fileModel.get("module"),this.colEventReasons.fetch()},getEventType:function(){return this.options.category+"-Closed"},saveClosure:function(){if($("#closure_event").valid()){var a=void 0;1===this.options.fileModel.get("module")?(a=$(".general_panel").data("view"),this.model.set("fileNumber",this.options.fileModel.get("fileNumber")),this.model.set("etcID",7),this.model.set("childTable","wc_file_closes")):2===this.options.fileModel.get("module")&&(a=$(".FilesFileSubroTabsGeneralPanel").data("view"),this.model.set("fileNumber",this.options.fileModel.get("subroFileNumber")),this.model.set("etcID",16),this.model.set("childTable","subro_file_closes")),this.model.set("eventType",this.getEventType()),this.model.set("eventTitle",this.options.category+" Closed auto generated"),this.options.fileModel.set("eventAutoGenerated",this.model.toJSON()),a.$el.find(".save-general").trigger("click"),this.elementModal.modal("hide")}}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.GenericEventsModals)&&(App.Views.Files.GenericEventsModals={}),App.Views.Files.GenericEventsModals.OpenModal=App.Helpers.View.extend({template:App.Templates.filesGenericEventsModalsOpenModal,className:"FilesGenericEventsModalsOpenModal",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.listenTo(this.model,"request",function(){b.showLoader(".modal-body")}),this.listenTo(this.model,"sync error",function(){b.removeLoader(".modal-body")})},events:{"click #save-open":"saveOpen"},afterRender:function(){var a=this;this.elementModal.one("hidden.bs.modal",function(){a.checkEventGenerated()})},checkEventGenerated:function(){_.isUndefined(this.options.fileModel.get("eventAutoGenerated"))&&(1===this.options.fileModel.get("module")?this.options.fileModel.set("wcFileStatusID",this.options.originalFileStatus):this.options.fileModel.set("subroFileStatusID",this.options.originalFileStatus))},getEventType:function(){return"Open"===this.options.type?this.options.category+"-Open":this.options.category+"-Re-Open"},saveOpen:function(){if($("#open_event").valid()){var a={WC:"openDate",Lien:"openLienDate",Intervention:"interventionOpenDate",Subro:"subroOpenDate"}[this.options.category];this.options.fileModel.set(a,this.model.get("eventDate"));var b=void 0;1===this.options.fileModel.get("module")?(b=$(".general_panel").data("view"),this.model.set("fileNumber",this.options.fileModel.get("fileNumber")),this.model.set("etcID",0)):2===this.options.fileModel.get("module")&&(b=$(".FilesFileSubroTabsGeneralPanel").data("view"),this.model.set("subroFileNumber",this.options.fileModel.get("subroFileNumber")),this.model.set("etcID",13)),this.model.set("eventType",this.getEventType()),this.model.set("eventTitle","File "+this.options.category+" "+this.options.type+" auto generated"),this.options.fileModel.set("eventAutoGenerated",this.model.toJSON()),this.options.fileModel.isNew()||b.$el.find(".save-general").trigger("click"),this.elementModal.modal("hide")}}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),App.Views.Files.GenericQuestion=App.Helpers.View.extend({template:App.Templates.filesGenericQuestion,className:"FilesGenericQuestion",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.noAnswer=a.noAnswer,this.yesAnswer=a.yesAnswer},events:{"click .noAnswer":"noAnswer","click .yesAnswer":"yesAnswer"}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),App.Views.Files.Index=App.Helpers.View.extend({template:App.Templates.filesIndex,className:"files",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.filterUrlModel=new App.Helpers.Model,this.colMilestones=new App.Collections.Milestones,this.colModules=new App.Collections.Modules,this.fileStatus=new App.Helpers.Collection,this.wcDefaultMilestoneColumns=[],this.subroDefaultMilestoneColumns=[],this.orderBy=this.options.filterParams.orderBy?this.options.filterParams.orderBy:"name",this.sortDir=this.options.filterParams.sortDir?this.options.filterParams.sortDir:"asc",this.lienOrderBy=this.options.filterParams.lienOrderBy?this.options.filterParams.lienOrderBy:"name",this.lienSortDir=this.options.filterParams.lienSortDir?this.options.filterParams.lienSortDir:"asc",this.subroOrderBy=this.options.filterParams.subroOrderBy?this.options.filterParams.subroOrderBy:"name",this.subroSortDir=this.options.filterParams.subroSortDir?this.options.filterParams.subroSortDir:"asc",this.subroLienOrderBy=this.options.filterParams.subroLienOrderBy?this.options.filterParams.subroLienOrderBy:"name",this.subroLienSortDir=this.options.filterParams.subroLienSortDir?this.options.filterParams.subroLienSortDir:"asc",this.subroInterventionOrderBy=this.options.filterParams.subroInterventionOrderBy?this.options.filterParams.subroInterventionOrderBy:"name",this.subroInterventionSortDir=this.options.filterParams.subroInterventionSortDir?this.options.filterParams.subroInterventionSortDir:"asc",this.offset=this.options.filterParams.filesOffset?parseInt(this.options.filterParams.filesOffset)+1:1,this.view_type=this.options.filterParams.view_type&&_.contains(["default","milestones","summary"],this.options.filterParams.view_type)?this.options.filterParams.view_type:"default",this.paginationConstant=100},events:{'change [name="fileTypes"]':"getFilteredFiles",'change [name="fileStatus"]':"getFilteredFiles",'change [name="module"]':"getFilteredFiles",'change [name="filesOffset"]':"getFilteredFiles","click .sequential-counter":"getFilteredFiles","click .icon-typeahead-down":"showAllEntities","click #filter-btn":"filterButton","click #filter-btn-close":"filterButton","click .file-sortable":"sortLiens","click .file-sortable-liens":"sortLiens","click .file-sortable-subro-liens":"sortLiens","click .file-sortable-subro":"sortLiens","click .file-sortable-subro-intervention":"sortLiens","click [name=view_type]":"changeViewType"},handlerPrepareFilterParams:function(){var a=this.$el,b={DAid:0,fileNumber:0,claimFileNumber:0,AAid:0,clientRepID:0,employerID:0,clientID:0,venueID:0,caseID:0,module:this.options.filterParams.module,fileType:this.options.filterParams.fileType,fileStatus:this.options.filterParams.fileStatus,filesOffset:this.options.filterParams.filesOffset||0,orderBy:this.orderBy,sortDir:this.sortDir,lienOrderBy:this.lienOrderBy,lienSortDir:this.lienSortDir,subroOrderBy:this.subroOrderBy,subroSortDir:this.subroSortDir,subroLienOrderBy:this.subroLienOrderBy,subroLienSortDir:this.subroLienSortDir,subroInterventionOrderBy:this.subroInterventionOrderBy,subroInterventionSortDir:this.subroInterventionSortDir};_.has(this.options.filterParams,"filterFileNumberID")&&(b.fileNumber=this.filterFileNumber=this.options.filterParams.filterFileNumberID,a.find(".typeahead.file_title").typeahead("val",this.options.filterParams.filterFileNumberText),this.filterUrlModel.set("filterFileNumberID",b.fileNumber),this.filterUrlModel.set("filterFileNumberText",this.options.filterParams.filterFileNumberText)),_.has(this.options.filterParams,"fileStatus")&&this.filterUrlModel.set("fileStatus",b.fileStatus),_.has(this.options.filterParams,"module")&&this.filterUrlModel.set("module",b.module),_.has(this.options.filterParams,"filterClaimFileNumberID")&&this.options.filterParams.filterfileClaimNumber&&(b.claimFileNumber=this.filterClaimFileNumber=this.options.filterParams.filterClaimFileNumberID,a.find(".typeahead.claim_number_typeahead").typeahead("val",this.options.filterParams.filterfileClaimNumber),this.filterUrlModel.set("filterClaimFileNumberID",b.claimFileNumber),this.filterUrlModel.set("filterfileClaimNumber",this.options.filterParams.filterfileClaimNumber)),_.has(this.options.filterParams,"filterfileADJid")&&(b.caseID=this.filterCaseID=this.options.filterParams.filterCaseID,a.find(".typeahead.adj_typeahead").typeahead("val",this.options.filterParams.filterfileADJid),this.filterUrlModel.set("filterCaseID",b.CaseID),this.filterUrlModel.set("filterfileADJid",this.options.filterParams.filterfileADJid)),_.has(this.options.filterParams,"filterDaID")&&(b.DAid=this.filterDAID=this.options.filterParams.filterDaID,a.find(".typeahead.da_typeahead").typeahead("val",this.options.filterParams.filterDaText),this.filterUrlModel.set("filterDaID",b.DAid),this.filterUrlModel.set("filterDaText",this.options.filterParams.filterDaText)),_.has(this.options.filterParams,"filterClientRepID")&&(b.clientRepID=this.filterClientRepID=this.options.filterParams.filterClientRepID,a.find(".typeahead.client_rep_typeahead").typeahead("val",this.options.filterParams.filterClientRepText),this.filterUrlModel.set("filterClientRepID",b.DAid),this.filterUrlModel.set("filterClientRepText",this.options.filterParams.filterClientRepText)),_.has(this.options.filterParams,"filterEmployerID")&&(b.employerID=this.filterEmployerID=this.options.filterParams.filterEmployerID,a.find(".typeahead.employer_typeahead").typeahead("val",this.options.filterParams.filterEmployerText),this.filterUrlModel.set("filterEmployerID",b.employerID),this.filterUrlModel.set("filterEmployerText",this.options.filterParams.filterEmployerText)),_.has(this.options.filterParams,"filterLawyerID")&&(b.AAid=this.filterLawyerID=this.options.filterParams.filterLawyerID,a.find(".typeahead.aa_typeahead").typeahead("val",this.options.filterParams.filterLawyerText),this.filterUrlModel.set("filterLawyerID",b.AAid),this.filterUrlModel.set("filterLawyerText",this.options.filterParams.filterLawyerText)),_.has(this.options.filterParams,"filterVenueID")&&(b.venueID=this.filterVenueID=this.options.filterParams.filterVenueID,a.find(".typeahead.venue_typeahead").typeahead("val",this.options.filterParams.filterVenueText),this.filterUrlModel.set("filterVenueID",b.venueID),this.filterUrlModel.set("filterVenueText",this.options.filterParams.filterVenueText)),_.has(this.options.filterParams,"clientID")&&"0"!==this.options.filterParams.clientID&&(b.clientID=this.clientID=this.options.filterParams.clientID,a.find(".typeahead.client_typeahead").typeahead("val",this.options.filterParams.clientText),this.filterUrlModel.set("clientID",b.clientID),this.filterUrlModel.set("clientText",this.options.filterParams.clientText)),a.find("#tableFiles i").remove();var c=a.find('#tableFiles th[data-sort="'+this.orderBy+'"]');c.append("asc"===this.sortDir?'<i class="fa fa-chevron-down"></i>':'<i class="fa fa-chevron-up"></i>'),a.find("#tableFilesLiens i").remove();var d=a.find('#tableFilesLiens th[data-sort="'+this.lienOrderBy+'"]');return d.append("asc"===this.lienSortDir?'<i class="fa fa-chevron-down"></i>':'<i class="fa fa-chevron-up"></i>'),b},handlerPrepopulateFilterSelects:function(){var a=this.$el;_.has(this.options.filterParams,"fileStatus")&&a.find("#fileStatus").val(this.options.filterParams.fileStatus),_.has(this.options.filterParams,"fileType")&&a.find("#fileTypeMS").val(this.options.filterParams.fileType),_.has(this.options.filterParams,"filesOffset")&&a.find("#filesOffset").val(this.options.filterParams.filesOffset),_.has(this.options.filterParams,"module")&&a.find("#module").val(this.options.filterParams.module)},filterButton:function(){var a=this.$el;a.find("#file-filters").slideToggle(),a.find("#filter-btn").toggle(),a.find("#filter-btn-close").toggle()},afterRender:function(){this.showLoader();var a=this.$el;if(this._initTypeahead(".typeahead.file_title","api/typeahead_controller/search_files",this.processTypeaheadFilters),this._initTypeahead(".typeahead.da_typeahead","api/typeahead_controller/search_defense_attorney",this.processTypeaheadFilters),this._initTypeahead(".typeahead.aa_typeahead","api/typeahead_controller/search_applicant_attorney",this.processTypeaheadFilters),this._initTypeahead(".typeahead.venue_typeahead","api/typeahead_controller/search_venues",this.processTypeaheadFilters),this._initTypeahead(".typeahead.client_typeahead","api/typeahead_controller/search_clients",this.processTypeaheadFilters),this._initTypeahead(".typeahead.claim_number_typeahead","api/typeahead_controller/search_claim_number",this.processTypeaheadFilters),this._initTypeahead(".typeahead.adj_typeahead","api/typeahead_controller/search_adj_case_number",this.processTypeaheadFilters),this._initTypeahead(".typeahead.employer_typeahead","api/typeahead_controller/search_companies",this.processTypeaheadFilters),this._initTypeahead(".typeahead.client_rep_typeahead","api/typeahead_controller/search_client_rep_file_filter",this.processTypeaheadFilters),App.loginModel.get("isDA")&&(0===_.size(this.options.filterParams)||_.has(this.options.filterParams,"landing_page"))){var b=App.Helpers.TypeaheadFormatter(App.loginModel),c=App.loginModel.get("id");this.$el.find(".da_typeahead").typeahead("val",b),this.filterDAID=c,this.filterUrlModel.set("filterDaID",c),this.filterUrlModel.set("filterDaText",b),_.has(this.options.filterParams,"landing_page")&&(this.options.filterParams.filterDaID=c,this.options.filterParams.filterDaText=b)}0===App.loginModel.getSettingValue("displayFileFilters")&&(a.find("#file-filters").hide(),a.find("#filter-btn").show(),a.find("#filter-btn-close").hide())},resetFileTitle:function(){var a=this.$el;this.filterFileNumber=0,"all"!==a.find("#fileStatus option:selected").val()&&a.find('#fileStatus option[value="active"]').prop("selected",!0).change(),this.filterUrlModel.unset("filterFileNumberID"),this.filterUrlModel.unset("filterFileNumberText"),this.handlerUrlFilter()},resetClaimNumber:function(){this.filterClaimFileNumber=0,this.filterUrlModel.unset("claimFileNumber"),this.filterUrlModel.unset("filterfileClaimNumber"),this.getFilteredFiles()},resetADJNumber:function(){this.filterCaseID=0,this.filterUrlModel.unset("filterCaseID"),this.filterUrlModel.unset("filterfileADJid"),this.getFilteredFiles()},resetDA:function(){this.filterDAID=0,this.filterUrlModel.unset("filterDaID"),this.filterUrlModel.unset("filterDaText"),this.getFilteredFiles()},resetClientRep:function(){this.filterClientRepID=0,this.filterUrlModel.unset("filterClientRepID"),this.filterUrlModel.unset("filterClientRepText"),this.getFilteredFiles()},resetEmployer:function(){this.filterEmployerID=0,this.filterUrlModel.unset("filterEmployerID"),this.filterUrlModel.unset("filterEmployerText"),this.getFilteredFiles()},resetAA:function(){this.filterLawyerID=0,this.filterUrlModel.unset("filterLawyerID"),this.filterUrlModel.unset("filterLawyerText"),this.getFilteredFiles()},resetClient:function(){this.clientID=0,this.filterUrlModel.unset("clientID"),this.filterUrlModel.unset("clientText"),this.getFilteredFiles()},resetVenue:function(){this.filterVenueID=0,this.filterUrlModel.unset("filterVenueID"),this.filterUrlModel.unset("filterVenueText"),this.getFilteredFiles()},_hideAllButtons:function(){var a=this.$el;a&&(a.find("#load-files-next").hide(),a.find("#load-files-last").hide(),a.find("#load-files-first").hide(),a.find("#load-files-prev").hide())},_hideForwardButtons:function(){var a=this.$el;a&&(a.find("#load-files-next").hide(),a.find("#load-files-last").hide())},_hideBackButtons:function(){var a=this.$el;a&&(a.find("#load-files-prev").hide(),a.find("#load-files-first").hide())},_showForwardButtons:function(){var a=this.$el;a&&(a.find("#load-files-next").show(),a.find("#load-files-last").show())},_showBackButtons:function(){var a=this.$el;a&&(a.find("#load-files-prev").show(),a.find("#load-files-first").show())},sortLiens:function(a){var b=$(_.isUndefined(a)?"":a.currentTarget),c=this,d=this.$el,e={DAid:this.filterDAID||0,fileNumber:this.filterFileNumber||0,claimFileNumber:this.filterClaimFileNumber||0,AAid:this.filterLawyerID||0,clientID:this.clientID||0,clientRepID:this.filterClientRepID||0,caseID:this.filterCaseID||0,venueID:this.filterVenueID||0,employerID:this.filterEmployerID||0,fileType:d.find("#fileTypeMS option:selected").val(),fileStatus:d.find("#fileStatus option:selected").val(),module:d.find("#module option:selected").val(),orderBy:this.orderBy,sortDir:this.sortDir,lienOrderBy:this.lienOrderBy,lienSortDir:this.lienSortDir},f=b.closest("table"),g=d.find(b.hasClass("file-sortable-liens")?"#tableFiles":"#tableFilesLiens");if(this.showLoader(),b.hasClass("file-sortable-liens")||b.hasClass("file-sortable")||b.hasClass("file-sortable-subro")||b.hasClass("file-sortable-subro-liens")||b.hasClass("file-sortable-subro-intervention")){var h="asc";b.find(".fa-chevron-down").length&&(h="DESC"),f.find(".fa").remove(),b.append("asc"===h?'<i class="fa fa-chevron-down"></i>':'<i class="fa fa-chevron-up"></i>'),e.filesOffset=d.find("#filesOffset").val(),b.hasClass("file-sortable-liens")?(this.lienOrderBy=b.data("sort"),this.lienSortDir=h,e.orderBy=this.lienOrderBy,e.sortDir=this.lienSortDir):b.hasClass("file-sortable-subro")?(this.subroOrderBy=b.data("sort"),this.subroSortDir=h,e.orderBy=this.subroOrderBy,e.sortDir=this.subroSortDir):b.hasClass("file-sortable-subro-liens")?(this.orderBy=b.data("sort"),this.subroLienSortDir=h,e.orderBy=this.subroLienOrderBy,e.sortDir=this.subroLienSortDir):b.hasClass("file-sortable-subro-intervention")?(this.subroInterventionOrderBy=b.data("sort"),this.subroInterventionSortDir=h,e.orderBy=this.subroInterventionOrderBy,e.sortDir=this.subroInterventionSortDir):(this.orderBy=b.data("sort"),this.sortDir=h,e.orderBy=this.orderBy,e.sortDir=this.sortDir),this.filterUrlModel.set("orderBy",this.orderBy),this.filterUrlModel.set("sortDir",this.sortDir),this.filterUrlModel.set("lienOrderBy",this.lienOrderBy),this.filterUrlModel.set("lienSortDir",this.lienSortDir),this.filterUrlModel.set("subroOrderBy",this.subroOrderBy),this.filterUrlModel.set("subroSortDir",this.subroSortDir),this.filterUrlModel.set("subroLienOrderBy",this.subroLienOrderBy),this.filterUrlModel.set("subroLienSortDir",this.subroLienSortDir),this.filterUrlModel.set("subroInterventionOrderBy",this.subroInterventionOrderBy),this.filterUrlModel.set("subroInterventionSortDir",this.subroInterventionSortDir),this.offset=parseInt(e.filesOffset,10),e.maxLiensPerpage=this.paginationConstant-g.find("tbody tr").length,e.isLien=b.hasClass("file-sortable-liens")?"1":"0",e.isSubro=b.hasClass("file-sortable-subro")?"1":"0",e.isSubroLien=b.hasClass("file-sortable-subro-liens")?"1":"0",e.isSubroIntervention=b.hasClass("file-sortable-subro-intervention")?"1":"0",this.handlerUrlFilter(),$.get("/api/files_controller/get_files",e,function(a){"1"===e.isLien?(c.options.colLiens.reset(),a.liens=c.avoidZeroOnWarningDays(a.liens),c.options.colLiens.add(a.liens)):"1"===e.isSubro?(c.options.colSubros.reset(),c.colMilestones.reset(a.milestones),c.colModules.reset(a.modules),c.options.colSubros.columnMilestones=c.colMilestones.toJSON(),a.files=c.avoidZeroOnWarningDays(a.subros),c.options.colSubros.add(a.subros)):"1"===e.isSubroLien?(c.options.colSubroLiens.reset(),c.colMilestones.reset(a.milestones),c.colModules.reset(a.modules),c.options.colSubroLiens.columnMilestones=c.colMilestones.toJSON(),a.files=c.avoidZeroOnWarningDays(a.subro_liens),c.options.colSubroLiens.add(a.subro_liens)):"1"===e.isSubroIntervention?(c.options.colSubroIntervention.reset(),c.colMilestones.reset(a.milestones),c.colModules.reset(a.modules),c.options.colSubroIntervention.columnMilestones=c.colMilestones.toJSON(),a.files=c.avoidZeroOnWarningDays(a.subro_interventions),c.options.colSubroIntervention.add(a.subro_interventions)):(c.collection.reset(),c.colMilestones.reset(a.milestones),c.colModules.reset(a.modules),c.collection.columnMilestones=c.colMilestones.toJSON(),a.files=c.avoidZeroOnWarningDays(a.files),c.collection.add(a.files)),c.setListFileStatus(c.colModules),c.hasRecords({wc:a.files.length,wc_liens:a.liens.length,subro:a.subros.length,subro_liens:a.subro_liens.length,subro_intervention:a.subro_interventions.length}),"load-files-last"===b.attr("id")?c.loadData(e.filesOffset-this.paginationConstant):_.isNull(a.totalFiles)?c.loadData():c.loadData(e.filesOffset)}).always(function(){c.removeLoader()})}},handlerUrlFilter:function(){var a=this.$el,b=_.first(Backbone.history.fragment.split("?")),c="#"+b,d=a.find("#fileStatus :selected").val(),e=a.find("#fileTypeMS :selected").val(),f=a.find("#module :selected").val(),g=this.offset||0===this.offset?this.offset:a.find("#filesOffset :selected").val();this.filterUrlModel.set("fileStatus",d),this.filterUrlModel.set("fileType",e),this.filterUrlModel.set("module",f),this.filterUrlModel.set("filesOffset",g),this.filterUrlModel.set("lienOrderBy",this.lienOrderBy),this.filterUrlModel.set("lienSortDir",this.lienSortDir),this.filterUrlModel.set("orderBy",this.orderBy),this.filterUrlModel.set("sortDir",this.sortDir),this.filterUrlModel.set("view_type",this.view_type),_.size(this.filterUrlModel.toJSON())>0&&(c+="?"+App.Helpers.replaceSpecialCharaters($.param(this.filterUrlModel.toJSON()),!1)),Backbone.history.navigate(c)},getFilteredFiles:function(a){var b=$(_.isUndefined(a)?"#filesOffset":a.currentTarget),c=this,d={},e=this.$el;d.DAid=this.filterDAID||0,d.clientRepID=this.filterClientRepID||0,d.employerID=this.filterEmployerID||0,d.fileNumber=this.filterFileNumber||0,d.claimFileNumber=this.filterClaimFileNumber||0,d.AAid=this.filterLawyerID||0,d.clientID=this.clientID||0,d.venueID=this.filterVenueID||0,d.caseID=this.filterCaseID||0,d.fileType=e.find("#fileTypeMS option:selected").val(),d.fileStatus=e.find("#fileStatus option:selected").val(),d.module=e.find("#module option:selected").val();var f=!1;if(b.hasClass("sequential-counter")){if("load-files-prev"===b.attr("id")){if(d.filesOffset=this.offset-this.paginationConstant,this._showForwardButtons(),d.filesOffset<=0&&this._hideBackButtons(),d.filesOffset<0)return void(this.offset=0)}else if("load-files-next"===b.attr("id")){var g=Math.floor(this.totalFiles/this.paginationConstant)*this.paginationConstant;if(d.filesOffset=parseInt(this.offset)+this.paginationConstant,this._showBackButtons(),d.filesOffset>=g&&this._hideForwardButtons(),d.filesOffset>this.totalFiles)return void(this.offset=g)}else if("load-files-first"===b.attr("id"))this._hideBackButtons(),this._showForwardButtons(),d.filesOffset=0;else if("load-files-last"===b.attr("id"))return e.find("#to-offset").html(this.totalFiles),this._showBackButtons(),this._hideForwardButtons(),e.find('[name="filesOffset"] option:last').prop("selected",!0),void e.find('[name="filesOffset"]').trigger("change")}else if(d.filesOffset=e.find("#filesOffset").val(),"allFiles"===d.filesOffset)this._hideAllButtons();else{if(!_.isUndefined(a)&&"change"===a.type){var h=e.find('[name="filesOffset"] :selected');h.hasClass("last-option")&&(f=!0)}var i=$(_.isUndefined(a)?"":a.currentTarget);"fileTypeMS"!==i.attr("id")&&this._hideAllButtons(),d.filesOffset>=this.paginationConstant&&this._showBackButtons(),d.filesOffset<Math.floor(this.totalFiles/this.paginationConstant)*this.paginationConstant&&this._showForwardButtons()}this.newFilterUsed()&&(d.filesOffset=0),this.offset=parseInt(d.filesOffset,10)||0,e.find("#from-offset").html(this.offset+1),e.find("#to-offset").html(f?this.totalFiles:this.offset+this.paginationConstant),this.showLoader(),("fileStatus"===e.find(b).attr("id")||"module"===e.find(b).attr("id")||"fileTypeMS"===e.find(b).attr("id"))&&(d.filesOffset=0,this.offset=0,this.filterUrlModel.set("filesOffset",d.filesOffset)),
d.orderBy=this.orderBy,d.sortDir=this.sortDir,this.filterUrlModel.set("orderBy",this.orderBy),this.filterUrlModel.set("sortDir",this.sortDir),this.handlerUrlFilter(),$.get("/api/files_controller/get_files",d,function(a){c.options.colLiens.reset(),a.liens=c.avoidZeroOnWarningDays(a.liens),c.options.colLiens.add(a.liens),c.colMilestones.reset(a.milestones),c.collection.reset(),a.files=c.avoidZeroOnWarningDays(a.files),c.collection.columnMilestones=c.colMilestones.toJSON(),c.collection.add(a.files),c.totalFiles=a.totalFiles||0,c.options.colSubros.reset(),a.subros=c.avoidZeroOnWarningDays(a.subros),c.options.colSubros.add(a.subros),c.options.colSubroLiens.reset(),a.subro_liens=c.avoidZeroOnWarningDays(a.subro_liens),c.options.colSubroLiens.add(a.subro_liens),c.options.colSubroIntervention.reset(),c.options.colSubroIntervention.add(a.subro_interventions),0===c.options.colFileTypes.length&&(c.options.colFileTypes.set(a.fileTypes),c.options.colFileTypes.sortBy="moduleID",c.options.colFileTypes.sortOrder="ASC",c.options.colFileTypes.sort()),c.setListFileStatus(c.colModules),c.hasRecords({wc:a.files.length,wc_liens:a.liens.length,subro:a.subros.length,subro_liens:a.subro_liens.length,subro_intervention:a.subro_interventions.length}),"load-files-last"===b.attr("id")?c.loadData(d.filesOffset-this.paginationConstant):_.isNull(a.totalFiles)?c.loadData():c.loadData(d.filesOffset)}).always(function(){e.find("#to-offset").html(c.setToOffset(!0)),e.find("#from-offset").html(parseInt(c.offset)+1),c.removeLoader()})},hasRecords:function(a){var b=this.$el;b&&(a.wc+a.wc_liens+a.subro+a.subro_liens+a.subro_intervention===0?b.find("#no-record").show():b.find("#no-record").hide())},newFilterUsed:function(){this.previousFilters=this.previousFilters||{};var a=!1;return this.filterDAID||this.filterFileNumber||this.filterClaimFileNumber||this.filterClientRepID||this.filterEmployerID||this.filterLawyerID||this.clientID||this.filterVenueID||this.filterCaseID?(this.previousFilters.filterDAID!==this.filterDAID&&(this.previousFilters.filterDAID=this.filterDAID,a=!0),this.previousFilters.filterClientRepID!==this.filterClientRepID&&(this.previousFilters.filterClientRepID=this.filterClientRepID,a=!0),this.previousFilters.filterEmployerID!==this.filterEmployerID&&(this.previousFilters.filterEmployerID=this.filterEmployerID,a=!0),this.previousFilters.filterFileNumber!==this.filterFileNumber&&(this.previousFilters.filterFileNumber=this.filterFileNumber,a=!0),this.previousFilters.filterClaimFileNumber!==this.filterClaimFileNumber&&(this.previousFilters.filterClaimFileNumber=this.filterClaimFileNumber,a=!0),this.previousFilters.filterLawyerID!==this.filterLawyerID&&(this.previousFilters.filterLawyerID=this.filterLawyerID,a=!0),this.previousFilters.clientID!==this.clientID&&(this.previousFilters.clientID=this.clientID,a=!0),this.previousFilters.filterCaseID!==this.filterCaseID&&(this.previousFilters.filterCaseID=this.filterCaseID,a=!0),a?!0:!1):void 0},processTypeaheadFilters:function(a){var b=$(".files").data("view"),c=b.$el,d=App.Helpers.handlerDisplayKey(a);_.isUndefined(a.isClientRep)||1!==a.isClientRep?_.isUndefined(a.user_id)?_.isUndefined(a.companyID)?_.isUndefined(a.lawyerID)?_.isUndefined(a.clientID)?_.isUndefined(a.fileClaimNumber)?_.isUndefined(a.ADJid)?!_.isUndefined(a.venueID)&&_.isUndefined(a.fileNumber)?(b.filterVenueID=a.venueID,b.filterUrlModel.set("filterVenueID",a.venueID),b.filterUrlModel.set("filterVenueText",d)):_.isUndefined(a.fileNumber)||(b.filterFileNumber=a.fileNumber,b.filterUrlModel.set("filterFileNumberID",a.fileNumber),b.filterUrlModel.set("filterFileNumberText",d),c.find('#fileStatus option[value="'+a.fileStatus.toLowerCase()+'"]').prop("selected",!0)):(b.filterCaseID=a.caseID,b.filterUrlModel.set("filterCaseID",a.caseID),b.filterUrlModel.set("filterfileADJid",d)):(b.filterClaimFileNumber=a.fileNumber,b.filterUrlModel.set("filterClaimFileNumberID",a.fileNumber),b.filterUrlModel.set("filterfileClaimNumber",d)):(b.clientID=a.clientID,b.filterUrlModel.set("clientID",a.clientID),b.filterUrlModel.set("clientText",d)):(b.filterLawyerID=a.lawyerID,b.filterUrlModel.set("filterLawyerID",a.lawyerID),b.filterUrlModel.set("filterLawyerText",d)):(b.filterEmployerID=a.companyID,b.filterUrlModel.set("filterEmployerID",a.companyID),b.filterUrlModel.set("filterEmployerText",d)):(b.filterDAID=a.user_id,b.filterUrlModel.set("filterDaID",a.user_id),b.filterUrlModel.set("filterDaText",d)):(b.filterClientRepID=a.id,b.filterUrlModel.set("filterClientRepID",a.id),b.filterUrlModel.set("filterClientRepText",d)),b.getFilteredFiles()},_collectTypeaheadIds:function(){this.currentTargetArrow=this.currentTargetArrow||{};var a=$(this.currentTargetArrow.currentTarget).data("input-name"),b=this.$el,c={};return"fileTitle"!==a&&(c.fileNumber=""!==this.filterFileNumber?this.filterFileNumber:void 0),"claimNumber"!==a&&(c.claimFileNumber=""!==this.filterClaimFileNumber?this.filterClaimFileNumber:void 0),"defenseAttorneyName"!==a&&(c.DAid=""!==this.filterDAID?this.filterDAID:void 0),"clientRepName"!==a&&(c.clientRepID=""!==this.filterClientRepID?this.filterClientRepID:void 0),"employerName"!==a&&(c.employerID=""!==this.filterEmployerID?this.filterEmployerID:void 0),"applicantAttorneyName"!==a&&(c.AAid=""!==this.filterLawyerID?this.filterLawyerID:void 0),"client"!==a&&(c.clientID=""!==this.clientID?this.clientID:void 0),"venue"!==a&&(c.venueID=""!==this.filterVenueID?this.filterVenueID:void 0),"adj"!==a&&(c.caseID=""!==this.filterCaseID?this.filterCaseID:void 0),c.insurerID=""!==this.insurerID?this.insurerID:void 0,c.fileTypeID=b.find("#fileTypeMS option:selected").val(),c.fileStatus=b.find("#fileStatus option:selected").val(),c.module=b.find("#module option:selected").val(),this.currentTargetArrow={},c},_initTypeahead:function(a,b,c){var d=this.$el,e=this;d.find(a).data("filter-id",0);var f=App.Helpers.initTypeahead({view:this,elemClass:a,urlBuild:{url:b,extraQuery:function(){return"ids="+JSON.stringify($.proxy(e._collectTypeaheadIds,e)())}},processFunction:c});f.focusout(function(a){var b=$(a.currentTarget),c=b.attr("name");switch(c){case"defenseAttorneyName":_.isUndefined(e.filterUrlModel.get("filterDaText"))||b.val()===e.filterUrlModel.get("filterDaText")||e.resetDA();break;case"applicantAttorneyName":_.isUndefined(e.filterUrlModel.get("filterLawyerText"))||b.val()===e.filterUrlModel.get("filterLawyerText")||e.resetAA();break;case"client":_.isUndefined(e.filterUrlModel.get("clientText"))||b.val()===e.filterUrlModel.get("clientText")||e.resetClient();break;case"venue":_.isUndefined(e.filterUrlModel.get("filterVenueText"))||b.val()===e.filterUrlModel.get("filterVenueText")||e.resetVenue();break;case"fileTitle":_.isUndefined(e.filterUrlModel.get("filterFileNumberText"))||b.val()===e.filterUrlModel.get("filterFileNumberText")||e.resetFileTitle();break;case"claimNumber":_.isUndefined(e.filterUrlModel.get("filterfileClaimNumber"))||b.val()===e.filterUrlModel.get("filterfileClaimNumber")||e.resetClaimNumber();break;case"adj":_.isUndefined(e.filterUrlModel.get("filterfileADJid"))||b.val()===e.filterUrlModel.get("filterfileADJid")||e.resetADJNumber();break;case"clientRepName":_.isUndefined(e.filterUrlModel.get("filterClientRepText"))||b.val()===e.filterUrlModel.get("filterClientRepText")||e.resetClientRep();break;case"employerName":_.isUndefined(e.filterUrlModel.get("filterEmployerText"))||b.val()===e.filterUrlModel.get("filterEmployerText")||e.resetEmployer()}})},onClose:function(){this.collection.reset([])},loadData:function(a){var b=this.$el;(a||0===a)&&(a>=this.paginationConstant?this._showBackButtons():this._hideBackButtons(),a<Math.floor(this.totalFiles/this.paginationConstant)*this.paginationConstant?this._showForwardButtons():this._hideForwardButtons()),a=a||0,this.showAllFiles=!1,"allFiles"===a&&(this.showAllFiles=!0,this.offset=0);for(var c='<option value="allFiles">Show All Files</option>',d=Math.floor(this.totalFiles/this.paginationConstant),e=0;d>e;e++)c+='<option value="'+e*this.paginationConstant+'">'+(e*this.paginationConstant+1)+" - "+(e+1)*this.paginationConstant+"</option>";c+='<option class="last-option" value="'+d*this.paginationConstant+'">'+(d*this.paginationConstant+1)+" - "+this.totalFiles+"</option>",this.totalFiles>this.paginationConstant&&this.totalFiles-this.offset>this.paginationConstant&&this._showForwardButtons(),this.totalFiles<=this.paginationConstant&&this._hideAllButtons(),this.wcDefaultMilestoneColumns=this.colMilestones.where({moduleID:1}).map(function(a){return a.get("name")}),this.subroDefaultMilestoneColumns=this.colMilestones.where({moduleID:2}).map(function(a){return a.get("name")}),this.defaultLiensColumn=this.colMilestones.length,this.defaultLiensColumnMax=this.colMilestones.length+5,b&&(b.find("#cic-files").empty(),b.find("#liens-files").empty(),b.find("#subro-files").empty(),b.find("#subro-liens-files").empty(),b.find("#subro-intervention-files").empty()),0===this.collection.length?this.options.defaultWC=0:(this.collection.sortBy=this.orderBy,this.collection.sortOrder=this.sortDir,this.collection.sort(),this.options.defaultWC=1),this.options.colLiens.length>0?(this.options.colLiens.sortBy=this.lienOrderBy,this.options.colLiens.sortOrder=this.lienSortDir,this.options.colLiens.sort(),this.options.defaultLiens=1):this.options.defaultLiens=0,this.options.colSubros.length>0?(this.options.colSubros.sortBy=this.lienOrderBy,this.options.colSubros.sortOrder=this.lienSortDir,this.options.colSubros.sort(),this.options.defaultSubro=1):this.options.defaultSubro=0,this.options.colSubroLiens.length>0?(this.options.colSubroLiens.sortBy=this.lienOrderBy,this.options.colSubroLiens.sortOrder=this.lienSortDir,this.options.colSubroLiens.sort(),this.options.defaultSubroLiens=1):this.options.defaultSubroLiens=0,this.options.colSubroIntervention.length>0?(this.options.colSubroIntervention.sortBy=this.lienOrderBy,this.options.colSubroIntervention.sortOrder=this.lienSortDir,this.options.colSubroIntervention.sort(),this.options.defaultSubroInterventions=1):this.options.defaultSubroInterventions=0,_.isUndefined(b)||(this.handlerViewType(),b.find("#filesOffset").html(c),b.find("#filesOffset").val(a))},getFilesCollectionHtml:function(){var a,b=this;return this.wcDefaultMilestoneColumns=this.colMilestones.where({moduleID:1}).map(function(a){return a.get("name")}),_.each(this.collection.models,function(c){var d={fileNumber:c.get("fileNumber"),name:c.get("name"),billable:c.get("billable"),venueAbbrev:c.get("venueAbbrev"),client:c.get("client"),DA:c.get("DA"),openDate:c.get("openDate"),lastEventDate:c.get("lastEventDate"),lastEventDateLabel:c.get("lastEventDateLabel"),planDaysLabel:c.get("planDaysLabel"),planDays:c.get("planDays"),isFlatFee:1===c.get("flatfee"),unreadCount:c.get("unreadCount"),isLien:!1,fileType:c.get("fileType"),defaultMilestoneColumnsLength:b.wcDefaultMilestoneColumns.length,milestones:{},moduleID:App.Const.wcFileModule},e=b.colMilestones.where({moduleID:1});_.each(e,function(a){var b=a.get("name").toLowerCase();d.milestones[b]=c.get(b)}),a+=b._filesIndexTrRow(d)}),a},getFilesLiensCollectionHtml:function(){var a,b=this;return _.each(this.options.colLiens.models,function(c){var d={fileNumber:c.get("fileNumber"),name:c.get("name"),venueAbbrev:c.get("venueAbbrev"),billable:c.get("billable"),client:c.get("client"),DA:c.get("DA"),openDate:c.get("openDate"),lastEventDate:c.get("lastEventDate"),lastEventDateLabel:c.get("lastEventDateLabel"),planDays:c.get("planDays"),planDaysLabel:c.get("planDaysLabel"),isFlatFee:!1,unreadCount:c.get("unreadCount"),isLien:!0,fileType:c.get("fileType"),defaultMilestoneColumnsLength:b.wcDefaultMilestoneColumns.length,milestones:{},moduleID:App.Const.wcFileModule};a+=b._filesIndexTrRow(d)}),a},_filesIndexTrRow:function(a){var b=$("<tr><tr>"),c=$("<td></td>"),d=App.Helpers.getFileURL(a.fileNumber,a.moduleID);return c.html('<a href="'+d+'" class="cursor-pointer link-file"  data-id="'+a.fileNumber+'">'+a.name+"</a>"),b.append(c),"milestones"===this.view_type?a.isFlatFee?(c=$('<td class="p-relative" colspan="'+a.defaultMilestoneColumnsLength+'"></td>'),c.html('<div class="flat-fee">'+a.fileType+"</div>"),b.append(c)):a.isLien?(c=$('<td class="p-relative" colspan="'+a.defaultMilestoneColumnsLength+'"></td>'),c.html('<div class="label-lien t-align-center">Not Applicable</div>'),b.append(c)):_.each(a.milestones,function(a){c=$('<td class="p-relative"></td>'),c.html("disabled-color"!==a.msColor?"milestoneColorGreen"===a.msColor?'<span class="'+a.msColor+' ref-milestone"> <i class="fa fa-check"></i></span>':'<span class="'+a.msColor+' ref-milestone">'+a.msValue+"</span>":'<span class="emptyMilestone ref-milestone""></span>'),b.append(c)}):("default"===this.view_type||"summary"===this.view_type)&&(c=$("<td></td>"),_.isNull(a.billable)||c.html('<span class="milestoneColorYellow ref-milestone">'+a.billable+"</span>"),b.append(c),a.isLien||""===a.venueAbbrev||(c=$("<td></td>"),c.html(a.venueAbbrev),b.append(c)),c=$("<td>"+(a.client?a.client:"")+"</td>"),b.append(c),c=$("<td>"+a.DA+"</td>"),b.append(c),"wc-closed"===this.filterUrlModel.get("fileStatus")||_.isNull(a.openDate)?"all"===this.filterUrlModel.get("fileStatus")&&_.isNull(a.openDate)&&(c=$('<td class="min-width-90 t-align-center c-grey-medium">Closed</td>'),b.append(c)):(c=$('<td class="min-width-90">'+a.openDate+"</td>"),b.append(c)),c=$('<td title="Client Communication Due (Days)"></td>'),c.html(this._format_days(a.lastEventDate)),b.append(c),c=$("<td></td>"),c.html(this._format_days(a.planDays)),b.append(c),c=$('<td class="dot"></td>'),c.html(a.unreadCount>0&&a.unreadCount<=9?'<a href="#files/edit/'+a.fileNumber+"/events?eventOffsetIndex=0&fileNumber="+a.fileNumber+'&orderBy=read&orderDirection=asc&maxRows=0"><span>'+a.unreadCount+"</span></a>":a.unreadCount>9?'<a href="#files/edit/'+a.fileNumber+"/events?eventOffsetIndex=0&fileNumber="+a.fileNumber+'&orderBy=read&orderDirection=asc&maxRows=0"><span>9+</span></a>':""),b.append(c),"default"===this.view_type?a.isFlatFee?(c=$('<td class="p-relative" colspan="'+a.defaultMilestoneColumnsLength+'"></td>'),c.html('<div class="flat-fee">'+a.fileType+"</div>"),b.append(c)):a.isLien?(c=$('<td class="p-relative" colspan="'+a.defaultMilestoneColumnsLength+'"></td>'),c.html('<div class="label-lien t-align-center">Not Applicable</div>'),b.append(c)):_.each(a.milestones,function(a){c=$('<td class="p-relative"></td>'),c.html("disabled-color"!==a.msColor?"milestoneColorGreen"===a.msColor?'<span class="'+a.msColor+' ref-milestone"> <i class="fa fa-check"></i></span>':'<span class="'+a.msColor+' ref-milestone">'+a.msValue+"</span>":'<span class="emptyMilestone ref-milestone"></span>'),b.append(c)}):a.isLien?(c=$('<td class="p-relative" colspan="'+a.defaultMilestoneColumnsLength+'"></td>'),c.html('<div class="label-lien t-align-center">Not Applicable</div>'),b.append(c)):(c=$('<td class="p-relative"></td>'),c.html(_.where(_.values(a.milestones),{msColor:"milestoneColorRed"}).length?'<span class="milestoneColorRed ref-milestone"></span>':_.where(_.values(a.milestones),{msColor:"milestoneColorYellow"}).length?'<span class="milestoneColorYellow ref-milestone"></span>':_.where(_.values(a.milestones),{msColor:"milestoneColorGreen"}).length?'<span class="milestoneColorGreen ref-milestone"></span>':'<span class="ref-milestone"></span>'),b.append(c))),"<tr>"+b.html()+"</tr>"},getSubroFilesCollectionHtml:function(){var a=void 0,b=this;return this.subroDefaultMilestoneColumns=this.colMilestones.where({moduleID:2}).map(function(a){return a.get("name")}),_.each(this.options.colSubros.models,function(c){var d={fileNumber:c.get("fileNumber"),name:c.get("name"),billable:c.get("billable"),venueAbbrev:c.get("venueAbbrev"),client:c.get("client"),DA:c.get("DA"),openDate:c.get("openDate"),lastEventDate:c.get("lastEventDate"),lastEventDateLabel:c.get("lastEventDateLabel"),planDaysLabel:c.get("planDaysLabel"),planDays:c.get("planDays"),isFlatFee:1===c.get("flatfee"),unreadCount:c.get("unreadCount"),isLien:!1,fileType:c.get("fileType"),defaultMilestoneColumnsLength:b.subroDefaultMilestoneColumns.length,milestones:{},moduleID:App.Const.subroFileModule},e=b.colMilestones.where({moduleID:2});_.each(e,function(a){var b=a.get("name").toLowerCase();d.milestones[b]=c.get(b)}),a+=b._subroFilesIndexTrRow(d)}),a},getSubroLiensFilesCollectionHtml:function(){var a=void 0,b=this;return this.subroDefaultMilestoneColumns=this.colMilestones.where({moduleID:2}).map(function(a){return a.get("name")}),_.each(this.options.colSubroLiens.models,function(c){var d={fileNumber:c.get("fileNumber"),name:c.get("name"),billable:c.get("billable"),venueAbbrev:c.get("venueAbbrev"),client:c.get("client"),DA:c.get("DA"),openDate:c.get("openDate"),lastEventDate:c.get("lastEventDate"),lastEventDateLabel:c.get("lastEventDateLabel"),planDaysLabel:c.get("planDaysLabel"),planDays:c.get("planDays"),isFlatFee:1===c.get("flatfee"),unreadCount:c.get("unreadCount"),isLien:!1,fileType:c.get("fileType"),defaultMilestoneColumnsLength:b.subroDefaultMilestoneColumns.length,milestones:{}},e=b.colMilestones.where({moduleID:2});_.each(e,function(a){var b=a.get("name").toLowerCase();d.milestones[b]=c.get(b)}),a+=b._subroFilesIndexTrRow(d)}),a},getSubroInterventionsFilesCollectionHtml:function(){var a=void 0,b=this;return this.subroDefaultMilestoneColumns=this.colMilestones.where({moduleID:2}).map(function(a){return a.get("name")}),_.each(this.options.colSubroIntervention.models,function(c){var d={fileNumber:c.get("fileNumber"),name:c.get("name"),billable:c.get("billable"),venueAbbrev:c.get("venueAbbrev"),client:c.get("client"),DA:c.get("DA"),openDate:c.get("openDate"),lastEventDate:c.get("lastEventDate"),lastEventDateLabel:c.get("lastEventDateLabel"),planDaysLabel:c.get("planDaysLabel"),planDays:c.get("planDays"),isFlatFee:1===c.get("flatfee"),unreadCount:c.get("unreadCount"),isLien:!1,fileType:c.get("fileType"),defaultMilestoneColumnsLength:b.subroDefaultMilestoneColumns.length,milestones:{},moduleID:App.Const.subroFileModule},e=b.colMilestones.where({moduleID:2});_.each(e,function(a){var b=a.get("name").toLowerCase();d.milestones[b]=c.get(b)}),a+=b._subroFilesIndexTrRow(d)}),a},_subroFilesIndexTrRow:function(a){var b=$("<tr><tr>"),c=$("<td></td>"),d=App.Helpers.getFileURL(a.fileNumber,a.moduleID);return c.html('<a href="'+d+'" class="cursor-pointer link-file"  data-id="'+a.fileNumber+'">'+a.name+"</a>"),b.append(c),"milestones"===this.view_type?a.isFlatFee?(c=$('<td class="p-relative" colspan="'+a.defaultMilestoneColumnsLength+'"></td>'),c.html('<div class="flat-fee">'+a.fileType+"</div>"),b.append(c)):a.isLien?(c=$('<td class="p-relative" colspan="'+a.defaultMilestoneColumnsLength+'"></td>'),c.html('<div class="label-lien t-align-center">Not Applicable</div>'),b.append(c)):_.each(a.milestones,function(a){c=$('<td class="p-relative"></td>'),c.html("disabled-color"!==a.msColor?"milestoneColorGreen"===a.msColor?'<span class="'+a.msColor+' ref-milestone"> <i class="fa fa-check"></i></span>':'<span class="'+a.msColor+' ref-milestone">'+a.msValue+"</span>":'<span class="emptyMilestone ref-milestone""></span>'),b.append(c)}):("default"===this.view_type||"summary"===this.view_type)&&(c=$("<td></td>"),c=$("<td>"+(a.client?a.client:"")+"</td>"),b.append(c),c=$("<td>"+a.DA+"</td>"),b.append(c),"subro-closed"===this.filterUrlModel.get("fileStatus")||_.isNull(a.openDate)?"all"===this.filterUrlModel.get("fileStatus")&&_.isNull(a.openDate)&&(c=$('<td class="min-width-90 t-align-center c-grey-medium">Closed</td>'),b.append(c)):(c=$('<td class="min-width-90">'+a.openDate+"</td>"),b.append(c)),c=$('<td title="Client Communication Due (Days)"></td>'),c.html(this._format_days(a.lastEventDate)),b.append(c),c=$("<td></td>"),c.html(this._format_days(a.planDays)),b.append(c),c=$('<td class="dot"></td>'),c.html(a.unreadCount>0&&a.unreadCount<=9?'<a href="#subro_files/edit/'+a.fileNumber+"/events?eventOffsetIndex=0&fileNumber="+a.fileNumber+'&orderBy=read&orderDirection=asc&maxRows=0"><span>'+a.unreadCount+"</span></a>":a.unreadCount>9?'<a href="#subro_files/edit/'+a.fileNumber+"/events?eventOffsetIndex=0&fileNumber="+a.fileNumber+'&orderBy=read&orderDirection=asc&maxRows=0"><span>9+</span></a>':""),b.append(c),"default"===this.view_type?a.isFlatFee?(c=$('<td class="p-relative" colspan="'+a.defaultMilestoneColumnsLength+'"></td>'),c.html('<div class="flat-fee">'+a.fileType+"</div>"),b.append(c)):a.isLien?(c=$('<td class="p-relative" colspan="'+a.defaultMilestoneColumnsLength+'"></td>'),c.html('<div class="label-lien t-align-center">Not Applicable</div>'),b.append(c)):_.each(a.milestones,function(a){c=$('<td class="p-relative"></td>'),c.html("disabled-color"!==a.msColor?"milestoneColorGreen"===a.msColor?'<span class="'+a.msColor+' ref-milestone"> <i class="fa fa-check"></i></span>':'<span class="'+a.msColor+' ref-milestone">'+a.msValue+"</span>":'<span class="emptyMilestone ref-milestone"></span>'),b.append(c)}):a.isLien?(c=$('<td class="p-relative" colspan="'+a.defaultMilestoneColumnsLength+'"></td>'),c.html('<div class="label-lien t-align-center">Not Applicable</div>'),b.append(c)):(c=$('<td class="p-relative"></td>'),c.html(_.where(_.values(a.milestones),{msColor:"milestoneColorRed"}).length?'<span class="milestoneColorRed ref-milestone"></span>':_.where(_.values(a.milestones),{msColor:"milestoneColorYellow"}).length?'<span class="milestoneColorYellow ref-milestone"></span>':_.where(_.values(a.milestones),{msColor:"milestoneColorGreen"}).length?'<span class="milestoneColorGreen ref-milestone"></span>':'<span class="ref-milestone"></span>'),b.append(c))),"<tr>"+b.html()+"</tr>"},changeViewType:function(a){var b=$(a.currentTarget);this.view_type=b.val(),this.handlerViewType(!0),this.handlerUrlFilter()},handlerViewType:function(a){a=a||!1;var b=this.$el,c=this,d=function(a,b,c){c=c||!1,"milestones"===b.view_type?(a.find(".column-default").hide(),a.find(".column-summary").hide(),a.find(".column-summary-milestones").hide(),a.find(".column-milestones").show()):"summary"===b.view_type?(a.find(".column-milestones").hide(),a.find(".column-default").hide(),a.find(".column-summary").show(),a.find(".column-summary-milestones").show()):(a.find(".column").show(),a.find(".column-summary-milestones").hide()),a&&(a.find("#cic-files").empty(),a.find("#cic-files").append(b.getFilesCollectionHtml()),a.find("#liens-files").empty(),a.find("#liens-files").append(b.getFilesLiensCollectionHtml()),a.find("#subro-files").empty(),a.find("#subro-files").append(b.getSubroFilesCollectionHtml()),a.find("#subro-liens-files").empty(),a.find("#subro-liens-files").append(b.getSubroLiensFilesCollectionHtml()),a.find("#subro-intervention-files").empty(),a.find("#subro-intervention-files").append(b.getSubroInterventionsFilesCollectionHtml()),c&&b.removeLoader())};a?(this.showLoader(),_.defer(function(){d(b,c,!0)})):d(b,c)},_format_days:function(a){var b="",c=30-parseInt(a);return b=c>0?"<span>"+Math.abs(c)+"</span>":'<span class="c-red">'+Math.abs(c)+"</span>"},avoidZeroOnWarningDays:function(a){return _.each(_.where(a,{billable:0}),function(a){a.billable=null}),a},isFilterClose:function(){return"wc-closed"===this.filterUrlModel.get("fileStatus")},setListFileStatus:function(a){var b=[];if(a.models.length>0&&0===this.fileStatus.models.length){for(var c=0;c<a.models.length;c++)1===a.models[c].get("moduleID")&&(b.push({moduleID:a.models[c].get("moduleID"),status:"wc",displayName:"WC"}),b.push({moduleID:a.models[c].get("moduleID"),status:"wc-lien",displayName:"WC-Lien"}),b.push({moduleID:a.models[c].get("moduleID"),status:"wc-closed",displayName:"WC-Closed"})),2===a.models[c].get("moduleID")&&(b.push({moduleID:a.models[c].get("moduleID"),status:"subro",displayName:"Subro"}),b.push({moduleID:a.models[c].get("moduleID"),status:"subro-lien",displayName:"Subro-Lien"}),b.push({moduleID:a.models[c].get("moduleID"),status:"subro-intervention",displayName:"Subro-Intervention"}),b.push({moduleID:a.models[c].get("moduleID"),status:"subro-closed",displayName:"Subro-Closed"}));this.fileStatus.reset(b),this.fileStatus.sortBy="moduleID",this.fileStatus.sortOrder="asc",this.fileStatus.sort()}},setToOffset:function(){var a=arguments.length<=0||void 0===arguments[0]?!1:arguments[0],b=0===parseInt(this.offset)||a?parseInt(this.offset):parseInt(this.offset)-1,c=parseInt(this.paginationConstant)+b;return this.totalFiles<=c?this.totalFiles:c}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.Letters)&&(App.Views.Files.Letters={}),App.Views.Files.Letters.DocumentsNonMedicalModal=App.Helpers.View.extend({template:App.Templates.filesLettersDocumentsNonMedicalModal,className:"documentsNonMedicalModal",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.collection=new App.Collections.Documents,this.documentsSelected=[],this.listenTo(this.collection,"request",function(){this.showLoader()}),this.listenTo(this.collection,"sync error",function(){this.removeLoader()})},events:{"click .btn-generateReport":"generateReport","change .documents":"handlerDocumentsSelected"},fetchDocuments:function(){this.collection.fetch({url:"api/documents_controller/get_all_non_medical_documents?fileNumber="+this.options.fileModel.get("fileNumber"),error:function(a,b){var c=b.responseJSON.Error||"No documents were found.",d=new App.Helpers.Toast({message:c,classType:"danger",fadeOut:5e3});d.render()}})},afterRender:function(){this.fetchDocuments()},handlerDocumentsSelected:function(){var a=this.$el,b=this;this.documentsSelected=[],a.find(".documents :selected").each(function(){var a=$(this).val();b.documentsSelected.push(a)}),a.find("#countDocumentsSelected").html("("+this.documentsSelected.length+")")},generateReport:function(){if(this.model.get("allowEdit")){var a=$(".lettersTab").data("view"),b=new App.Views.Files.Letters.LetterTemplate({model:this.model,objPreMerge:{documents:this.documentsSelected},fileModel:this.options.fileModel,eventModel:this.options.eventModel});a.showLetterOptions=!1,App.Helpers.htmlView(b,".body"),this.elementModal.modal("hide")}else{var c=$('<form target="_blank" action="api/letters_controller/create_letter_template" method="post"></form>'),d=$('<input type="hidden" name="letterTemplateID" />'),e=$('<input type="hidden" name="htmlBody" />'),f=$('<input type="hidden" name="customSyleCss" />'),g=$('<input type="hidden" name="htmlHeader" />'),h=$('<input type="hidden" name="htmlFooter" />'),i=$('<input type="hidden" name="preMerge" />'),j=$('<input type="hidden" name="prepareData" value="1" />'),k=$('<input type="hidden" name="eventID"/>'),l=$('<input type="hidden" name="moduleID"/>'),m=$('<input type="hidden" name="fileNumber"/>'),n=$('<input type="hidden" name="'+$.cookie("token_name")+'" value="'+$.cookie("cf_csrf_cookie")+'" />'),o={documents:this.documentsSelected};d.val(this.model.get("letterTemplateID")),e.val(this.model.removeClassEditable("content")),g.val(this.model.removeClassEditable("header")),h.val(this.model.removeClassEditable("footer")),i.val(JSON.stringify(o)),m.val(this.options.fileModel.get("fileNumber")),k.val(this.options.eventModel.get("eventID")),l.val(this.options.fileModel.get("module")),f.val(this.model.get("style_css")),c.append(d),c.append(e),c.append(f),c.append(g),c.append(j),c.append(k),c.append(l),c.append(i),c.append(m),c.append(h),c.append(n),$("body").append(c),c.submit()}}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.Letters)&&(App.Views.Files.Letters={}),App.Views.Files.Letters.LetterTemplate=App.Helpers.View.extend({template:App.Templates.filesLettersLetterTemplate,className:"letterTemplate",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.modelTemplate=new App.Helpers.Model,this.listenTo(this.modelTemplate,"request",function(){this.showLoader()}),this.listenTo(this.modelTemplate,"sync",function(a){this.removeLoader(),this.$el.find(".letterTemplateHeader").html(a.get("header")),this.$el.find(".letterTemplateFooter").html(a.get("footer")),this.$el.find(".letterTemplateHTML").html(this._convertSignatureImgPathToHtml(a.get("content")))}),this.listenTo(this.modelTemplate,"error",function(){this.removeLoader()}),this.currentElementSelected={},CKEDITOR.disableAutoInline=!0},events:{"click .btn-createPDF":"createPDF","click .control-letter.editable":"handlerEditable","click .control-letter.editWarning":"handlerEditWarning"},_convertSignatureImgPathToHtml:function(a){var b=$("<div></div>");b.html(a);var c=b.find(".signature-dom");if(c&&c.length>0){this.originalSignatureUrl=c.attr("src");var d=this.originalSignatureUrl.split("/"),e=d[d.length-1].match(/\d+/g)[0];return c.attr("src","/api/user_controller/signature_file_upload/"+e),b.html()}return a},_convertHTMLImgPathToPDF:function(a){var b=a.find(".signature-dom");return b&&b.length>0&&b.attr("src",this.originalSignatureUrl),a},handlerEditable:function(a){var b=$(a.currentTarget);if(!b.attr("id")){var c=$(".editable").index(b),d="editor_"+c;b.attr("id",d),b.attr("contenteditable",!0);var e=CKEDITOR.inline(document.getElementById(b.attr("id")),this.config);e.letterTemplate=!0,e.focus()}},handlerEditWarning:function(a){var b=$(a.currentTarget);if(!b.data("verified")){var c="This normally should not be changed. Continue?",d=new App.Views.Shared.AlertView({processFunction:"processHandlerEditWarning",viewClass:".letterTemplate",params:{element:b},msg:c,title:"Warning"}),e=new App.Helpers.Modal({view:d});e.show()}},processHandlerEditWarning:function(a){var b=$(".editWarning").index(a.element),c="editorwarning_"+b;a.element.attr("id",c),a.element.attr("contenteditable",!0);var d=CKEDITOR.inline(document.getElementById(a.element.attr("id")),this.config);d.letterTemplate=!0,a.element.data("verified",!0),d.focus()},afterRender:function(){this.fetchData(),this.config={toolbar:[{name:"basicstyles",groups:["basicstyles","cleanup"],items:["Bold","Italic","RemoveFormat"]},{name:"paragraph",groups:["list","indent","blocks","align"],items:["BulletedList","-","JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock","FontSize"]},{name:"styles",items:["Font","lineheight"]}],basicEntities:!1,autoParagraph:!1,allowedContent:!0,line_height:"normal;1.0;1.1;1.2;1.25;1.5;2.15;2.5;3",fontSize_sizes:"8/10px;9/12px;10/13px;11/14px;12/16px;13/17px;14/18px;18/24px"}},onClose:function(){for(var a in CKEDITOR.instances)CKEDITOR.instances[a].destroy(!0);$(document).off("mouseup")},fetchData:function(){var a={fileNumber:this.getFileNumber(),eventID:this.options.eventModel.get("eventID"),moduleID:this.options.fileModel.get("module"),letterTemplateID:this.model.get("letterTemplateID")};_.has(this.options),"objPreMerge"&&_.extend(a,{preMerge:this.options.objPreMerge}),this.modelTemplate.fetch({url:"/api/letters_controller/prepare_template",type:"POST",data:JSON.stringify(a)})},removeClassEditable:function(a){a=a||"";var b=$("<div>"+a+"</div>");return b.find(".control-letter").each(function(){$(this).removeClass("editWarning editable")}),b.html()},createPDF:function(){var a=$('<form target="_blank" action="api/letters_controller/create_letter_template/'+this.model.get("nameAbbreviation")+'" method="post"></form>'),b=$('<input type="hidden" name="letterTemplateID" />'),c=$('<input type="hidden" name="htmlBody" />'),d=$('<input type="hidden" name="customSyleCss" />'),e=$('<input type="hidden" name="htmlHeader" />'),f=$('<input type="hidden" name="htmlFooter" />'),g=$('<input type="hidden" name="eventID"/>'),h=$('<input type="hidden" name="moduleID"/>'),i=$('<input type="hidden" name="fileNumber"/>'),j=$('<input type="hidden" name="'+$.cookie("token_name")+'" value="'+$.cookie("cf_csrf_cookie")+'" />'),k=$(this._convertHTMLImgPathToPDF(this.$el.find(".letterTemplateHTML").clone()));b.val(this.model.get("letterTemplateID"));var l=$("<div>"+this.removeClassEditable(k.html())+"</div>");if(l.find("input").each(function(){$(this).removeAttr("checked")}),k.find("input").each(function(){if($(this).is(":checked")){var a=k.find("input").index($(this));l.find("input").eq(a).attr("checked","checked");

}}),c.val(l.html()),e.val(this.removeClassEditable(this.$el.find(".letterTemplateHeader").html())),f.val(this.removeClassEditable(this.$el.find(".letterTemplateFooter").html())),d.val(this.model.get("style_css")),i.val(this.getFileNumber()),g.val(this.options.eventModel.get("eventID")),h.val(this.options.fileModel.get("module")),_.has(this.options),"objPreMerge"){var m=$('<input type="hidden" name="preMerge" />');m.val(JSON.stringify(this.options.objPreMerge)),a.append(m)}a.append(b),a.append(c),a.append(d),a.append(e),a.append(f),a.append(i),a.append(g),a.append(h),a.append(j),$("body").append(a),a.submit()},getFileNumber:function(){var a=this.options.fileModel.get("module");return this.options.fileModel.get(1===a?"fileNumber":2===a?"subroFileNumber":"fileNumber")}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.Letters)&&(App.Views.Files.Letters={}),App.Views.Files.Letters.LettersTab=App.Helpers.View.extend({template:App.Templates.filesLettersLettersTab,className:"lettersTab",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.showLetterOptions=!0,this.model=new App.Models.Letter,this.wordModel=new App.Models.Letter},events:{"change [name=letterTemplate]":"fetchLetterTemplateSelected","change [name=wordLetterTemplate]":"fetchWordLetterTemplateSelected","click .btn-GenerateLetter":"generateLetter","click .btn-GenerateWordLetter":"generateWordLetter","click .btn-showLetters":"showLetters"},fetchLetterTemplateSelected:function(a){this._fetchLetterTemplate(a,this.model,".btn-GenerateLetter")},fetchWordLetterTemplateSelected:function(a){this._fetchLetterTemplate(a,this.wordModel,".btn-GenerateWordLetter")},_fetchLetterTemplate:function(a,b,c){var d=this,e=Math.floor($(a.currentTarget).val()),f=this.$el,g=new App.Models.Letter;e?(this.showLoader(),f.find(c).attr("disabled","disabled"),g.fetch({type:"POST",url:"api/file_events_controller/get_letter_template",data:JSON.stringify({letterTemplateID:e,fileNumber:this.getFileNumber(),moduleID:this.options.fileModel.get("module"),eventID:this.options.eventModel.get("eventID"),eventTypeID:this.options.eventModel.get("eventTypeID")}),success:function(a){b.set(a.toJSON())},complete:function(){d.removeLoader(),f.find(c).removeAttr("disabled")}})):f.find(c).attr("disabled","disabled")},generateLetter:function(){var a=this.$el,b=new App.Views.Files.Letters.LetterTemplate({model:this.model,fileModel:this.options.fileModel,eventModel:this.options.eventModel});if(this.model.get("pre_merge")&&this._showPremergeOptions(this.model)){var c=new App.Views.Files.Letters.PreMerge.FormOptionsModal({letterTemplateModel:this.model,fileModel:this.options.fileModel,eventModel:this.options.eventModel}),d=new App.Helpers.Modal({view:c});d.show()}else if(this.model.get("allowEdit"))this.showLetterOptions=!1,App.Helpers.htmlView(b,".body");else{$("#form_letter_generated").remove();var e=$('<form id="form_letter_generated" target="_blank" action="api/letters_controller/create_letter_template/'+this.model.get("nameAbbreviation")+'" method="post"></form>'),f=$('<input type="hidden" name="letterTemplateID" />'),g=$('<input type="hidden" name="htmlBody" />'),h=$('<input type="hidden" name="customSyleCss" />'),i=$('<input type="hidden" name="htmlHeader" />'),j=$('<input type="hidden" name="htmlFooter" />'),k=$('<input type="hidden" name="prepareData" value="1" />'),l=$('<input type="hidden" name="eventID"/>'),m=$('<input type="hidden" name="moduleID"/>'),n=$('<input type="hidden" name="fileNumber"/>'),o=$('<input type="hidden" name="'+$.cookie("token_name")+'" value="'+$.cookie("cf_csrf_cookie")+'" />');f.val(this.model.get("letterTemplateID")),g.val(this.model.removeClassEditable("content")),i.val(this.model.removeClassEditable("header")),j.val(this.model.removeClassEditable("footer")),n.val(this.getFileNumber()),l.val(this.options.eventModel.get("eventID")),m.val(this.options.fileModel.get("module")),h.val(this.model.get("style_css")),e.append(f),e.append(g),e.append(h),e.append(i),e.append(k),e.append(l),e.append(m),e.append(n),e.append(j),e.append(o),a.append(e),$("body").append(e),e.submit()}},showLetters:function(){this.showLetterOptions=!0;var a=this.$el.find(".body > div").data("view");App.Helpers.cleanView(a)},_showPremergeOptions:function(a){var b=!1,c=["eFile","medicalDocuments","contactList","ccList","medicalJointDefense","medicalAmePqmeQme","medicalPreviousAppointmentDate","medicalTransportation","medicalDoctor","objectionNonMpm","mpmTransfer","venuesList"];return _.each(c,function(c){a.get(c)&&(b="eFile"===c?!1:!0)}),b},getFileNumber:function(){var a=this.options.fileModel.get("module");return this.options.fileModel.get(1===a?"fileNumber":2===a?"subroFileNumber":"fileNumber")},generateWordLetter:function(){if(this.wordModel.get("pre_merge")&&this._showPremergeOptions(this.wordModel)){var a=new App.Views.Files.Letters.PreMerge.FormOptionsModal({letterTemplateModel:this.wordModel,fileModel:this.options.fileModel,eventModel:this.options.eventModel,typeMode:"word"}),b=new App.Helpers.Modal({view:a});b.show()}else{var c=$('<form id="form_letter_generated" target="_blank" action="api/letters_word_controller/create_letter_template/'+this.wordModel.get("nameAbbreviation")+'" method="post"></form>'),d=$('<input type="hidden" name="letterTemplateID" />'),e=$('<input type="hidden" name="prepareData" value="1" />'),f=$('<input type="hidden" name="eventID"/>'),g=$('<input type="hidden" name="moduleID"/>'),h=$('<input type="hidden" name="fileNumber"/>'),i=$('<input type="hidden" name="'+$.cookie("token_name")+'" value="'+$.cookie("cf_csrf_cookie")+'" />');d.val(this.wordModel.get("letterTemplateID")),h.val(this.options.fileModel.getFileNumber()),f.val(this.options.eventModel.get("eventID")),g.val(this.options.fileModel.get("module")),c.append(d),c.append(e),c.append(f),c.append(g),c.append(h),c.append(i),this.$el.append(c),$("body").append(c),c.submit()}}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.Letters)&&(App.Views.Files.Letters={}),_.isUndefined(App.Views.Files.Letters.PreMerge)&&(App.Views.Files.Letters.PreMerge={}),App.Views.Files.Letters.PreMerge.FormOptionsModal=App.Helpers.View.extend({template:App.Templates.filesLettersPreMergeFormOptionsModal,className:"formOptionsModal",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.collection=new App.Collections.Documents,this.colVenuesList=new App.Collections.Venues,this.nonMedicalDocumentsCol=new App.Helpers.Collection,this.contactsCol=new App.Helpers.Collection,this.model=new App.Helpers.Model,this.medicalDocumentsSelected=[],this.medicalCCListSelected=[],this.contactSelected="",this.listenTo(this.model,"request",function(){this.showLoader()}),this.listenTo(this.model,"sync",function(){this.removeLoader(),this.prepareData()}),this.listenTo(this.model,"error",function(){this.removeLoader()})},events:{"click .btn-generateReport":"generateReport","click .btn-generateWordDocument":"generateWordDocument","change .medicalDocuments":"handlerMedicalDocumentsSelected","change #medicalCCList":"handlerMedicalCCList","change #contactList":"handlerContactList","focusout #contactList":"handlerContactList","change #medical-transportation":"handlerMedicalTrasportation"},prepareData:function(){var a=this.$el,b=this.model.get("contacts");b&&_.each(b,function(b,c){var d=$("<option></option>");d.attr("disabled","disabled"),d.text(c),a.find("[name=contactList]").append(d.clone()),a.find("[name=ccList]").append(d.clone());var e=_.keys(b);_.each(_.values(b),function(a,b){_.extend(a,{id:e[b]})}),b=_.map(_.values(b),function(a){return{id:a.id,name:s(a.name).isBlank()?a.company:a.name}}),_.each(_.sortBy(b,"name"),function(b){d=$('<option  value="'+b.id+'"></option>'),d.attr("data-key",c),d.attr("title",b.name),d.text(b.name),a.find("[name=ccList]").append(d.clone()),a.find("[name=contactList]").append(d.clone())})});var c=this.model.get("venuesList")||[];_.each(["File Venues","All Venues"],function(b){var d=_.groupBy(c,"venueType")[b];if(!d)return!1;var e=$("<optgroup></optgroup>");e.attr("label",b),_.each(d,function(a){var b=$("<option></option>");b.attr("value",a.venueID),b.text(a.venueName),e.append(b)}),a.find("[name=venuesList]").append(e)}),this.nonMedicalDocumentsCol.add(this.model.get("non_medical_documents"))},afterRender:function(){this.options.typeMode&&"word"===this.options.typeMode&&(this.$el.find(".btn-generateReport").hide(),this.$el.find(".btn-generateWordDocument").show()),this.fetchPreMergeRegistered()},fetchPreMergeRegistered:function(){var a={fileNumber:this.options.fileModel.get("fileNumber"),moduleID:this.options.fileModel.get("module"),pmArray:{contacts:this.options.letterTemplateModel.get("ccList")||this.options.letterTemplateModel.get("contactList")?1:0,non_medical_documents:this.options.letterTemplateModel.get("medicalDocuments"),bodyParts:0,coDef:0,venuesList:this.options.letterTemplateModel.get("venuesList")?1:0,venuesByHearingFile:this.options.letterTemplateModel.get("venuesByHearingFile")?1:0},eventID:this.options.eventModel.get("eventID"),letterTemplateID:this.options.letterTemplateModel.get("letterTemplateID")};this.model.fetch({url:"/api/pre_merge_controller/get_pre_merge_data",type:"POST",data:JSON.stringify(a)})},_getObjPreMerge:function(){var a=this.$el,b=a.find("[name=medicalJointDefense]").val()||"",c=a.find("[name=medicalAmePqmeQme]").val()||"",d=a.find("[name=medicalPreviousAppointmentDate]").val()||"",e=a.find("[name=medicalTransportation] :selected").val()||"",f=a.find("[name=medicalDoctor][value=1]").is(":checked")||"",g=a.find("[name=miles]").val()||"",h=a.find("[name=mileageRate]").val()||"",i=a.find("[name=parkingFees]").val()||"",j=a.find("[name=transportationService]").val()||"",k=a.find("[name=servicePhone]").val()||"",l=a.find("[name=pickUpTime]").val()||"",m=a.find("[name=AMEOffer]").is(":checked")||"",n=a.find("[name=PTPName]").val()||"",o=a.find("[name=PTPaddress]").val()||"",p=a.find("[name=PTPcityStZip]").val()||"",q=a.find("[name=eFile]").is(":checked")||"",r=a.find("[name=venuesList] :selected").val()||"",s={documents:this.medicalDocumentsSelected,medicalCCList:this.medicalCCListSelected,contact:this.contactSelected,medicalJointDefense:b,medicalAmePqmeQme:c,medicalPreviousAppointmentDate:d,medicalTransportation:e,medicalDoctor:f,miles:g,mileageRate:h,parkingFees:i,transportationService:j,servicePhone:k,pickUpTime:l,AMEOffer:m,PTPName:n,PTPaddress:o,PTPcityStZip:p,eFile:q,venueID:r};return s},generateWordDocument:function(){var a=$('<form id="form_letter_generated" target="_blank" action="api/letters_word_controller/create_letter_template/'+this.options.letterTemplateModel.get("nameAbbreviation")+'" method="post"></form>'),b=$('<input type="hidden" name="letterTemplateID" />'),c=$('<input type="hidden" name="preMerge" />'),d=$('<input type="hidden" name="prepareData" value="1" />'),e=$('<input type="hidden" name="eventID"/>'),f=$('<input type="hidden" name="ModuleID"/>'),g=$('<input type="hidden" name="fileNumber"/>'),h=$('<input type="hidden" name="isPleading"/>'),i=$('<input type="hidden" name="'+$.cookie("token_name")+'" value="'+$.cookie("cf_csrf_cookie")+'" />');b.val(this.options.letterTemplateModel.get("letterTemplateID")),c.val(JSON.stringify(this._getObjPreMerge())),g.val(this.options.fileModel.get("fileNumber")),e.val(this.options.eventModel.get("eventID")),f.val(this.options.fileModel.get("module")),h.val(this.options.letterTemplateModel.get("isPleading")),a.append(b),a.append(d),a.append(e),a.append(f),a.append(c),a.append(g),a.append(h),a.append(i),$("body").append(a),a.submit()},generateReport:function(){if(this.options.letterTemplateModel.get("allowEdit")){var a=$(".lettersTab").data("view"),b=new App.Views.Files.Letters.LetterTemplate({model:this.options.letterTemplateModel,objPreMerge:this._getObjPreMerge(),fileModel:this.options.fileModel,eventModel:this.options.eventModel});a.showLetterOptions=!1,App.Helpers.htmlView(b,".body"),this.elementModal.modal("hide")}else{var c=$('<form target="_blank" action="api/letters_controller/create_letter_template/'+this.options.letterTemplateModel.get("nameAbbreviation")+'" method="post"></form>'),d=$('<input type="hidden" name="letterTemplateID" />'),e=$('<input type="hidden" name="htmlBody" />'),f=$('<input type="hidden" name="customSyleCss" />'),g=$('<input type="hidden" name="htmlHeader" />'),h=$('<input type="hidden" name="htmlFooter" />'),i=$('<input type="hidden" name="preMerge" />'),j=$('<input type="hidden" name="prepareData" value="1" />'),k=$('<input type="hidden" name="eventID"/>'),l=$('<input type="hidden" name="ModuleID"/>'),m=$('<input type="hidden" name="fileNumber"/>'),n=$('<input type="hidden" name="isPleading"/>'),o=$('<input type="hidden" name="'+$.cookie("token_name")+'" value="'+$.cookie("cf_csrf_cookie")+'" />');d.val(this.options.letterTemplateModel.get("letterTemplateID")),e.val(this.options.letterTemplateModel.removeClassEditable("content")),g.val(this.options.letterTemplateModel.removeClassEditable("header")),h.val(this.options.letterTemplateModel.removeClassEditable("footer")),i.val(JSON.stringify(this._getObjPreMerge())),m.val(this.options.fileModel.get("fileNumber")),k.val(this.options.eventModel.get("eventID")),l.val(this.options.fileModel.get("module")),n.val(this.options.letterTemplateModel.get("isPleading")),f.val(this.options.letterTemplateModel.get("style_css")),c.append(d),c.append(e),c.append(f),c.append(g),c.append(j),c.append(k),c.append(l),c.append(i),c.append(m),c.append(n),c.append(h),c.append(o),$("body").append(c),c.submit()}},handlerMedicalDocumentsSelected:function(){var a=this.$el,b=this;this.medicalDocumentsSelected=[],a.find(".medicalDocuments :selected").each(function(){var a=$(this).val();b.medicalDocumentsSelected.push(a)}),a.find("#count_medicalDocumentsSelected").html("("+this.medicalDocumentsSelected.length+")")},handlerMedicalCCList:function(){var a=this.$el,b=this;this.medicalCCListSelected=[],a.find("#medicalCCList :selected").each(function(){var a=$(this).data("key"),c=$(this).val();b.medicalCCListSelected.push(c+":"+a)}),a.find("#count_medicalCCListSelected").html("("+this.medicalCCListSelected.length+")")},handlerContactList:function(){var a=this.$el.find("[name=contactList] :selected"),b=a.data("key"),c=a.val();c?this.contactSelected=c+":"+b:this.contactSelected=""},handlerMedicalTrasportation:function(){var a=this.$el,b=a.find("#medical-transportation option:selected").val();"Calculated Check"===b?(a.find("#calculated-check").show(),a.find("#provide-transportation").hide()):"Provide Transportation"===b?(a.find("#calculated-check").hide(),a.find("#provide-transportation").show()):(a.find("#calculated-check").hide(),a.find("#provide-transportation").hide())}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.Liens)&&(App.Views.Files.Liens={}),App.Views.Files.Liens.LienBillForm=App.Helpers.View.extend({template:App.Templates.filesLiensLienBillForm,className:"lienBillForm",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.lienBillModel=this.model.clone(),this.documentLienBills=new App.Helpers.Collection,this.documentBillModel=new App.Models.Document,this.documentOMFSModel=new App.Models.Document,this.listenTo(this.documentLienBills,"add remove",function(){b.lienBillModel.set("billdocumentTitle",b.documentLienBills.pluck("documentTitle")[0]),b.lienBillModel.set("billDocumentID",b.documentLienBills.pluck("documentID")[0]),b.lienBillModel.set("billdocumentName",b.documentLienBills.pluck("documentName")[0]),b.updateDocumentBillModel(),b.documentLienBills.reset()}),this.documentLienOMFS=new App.Helpers.Collection,this.listenTo(this.documentLienOMFS,"add remove",function(){b.lienBillModel.set("OMFSdocumentTitle",b.documentLienOMFS.pluck("documentTitle")[0]),b.lienBillModel.set("OMFSdocumentID",b.documentLienOMFS.pluck("documentID")[0]),b.lienBillModel.set("OMFSdocumentName",b.documentLienOMFS.pluck("documentName")[0]),b.updateDocumentOMFSModel(),b.documentLienOMFS.reset()})},events:{"click #save-lien-bill":"save_lien_bill","click .btn-add-document":"documentBrowser","click .btn-add-document-omfs":"omfsDocumentBrowser"},updateDocumentBillModel:function(){this.documentBillModel.set({documentID:this.lienBillModel.get("billDocumentID"),documentName:this.lienBillModel.get("billdocumentName"),documentTitle:this.lienBillModel.get("billdocumentTitle")})},updateDocumentOMFSModel:function(){this.documentOMFSModel.set({documentID:this.lienBillModel.get("OMFSdocumentID"),documentName:this.lienBillModel.get("OMFSdocumentName"),documentTitle:this.lienBillModel.get("OMFSdocumentTitle")})},afterRender:function(){this.updateDocumentBillModel(),this.updateDocumentOMFSModel()},documentBrowser:function(){var a=this.options.originModel.isNew()?!1:this.options.originModel.get("eventID"),b=new App.Views.Files.Documents.DocumentBrowser({originModel:this.model,fileModel:this.options.fileModel,eventID:a,collection:this.documentLienBills,oneDocument:!0,defaultChecked:[App.Const.Designations.lienBill]}),c=new App.Helpers.Modal({view:b,sizeModal:"modal-lg"}),d=this;this.listenTo(b.colDocuments,"change",function(a){d.lienBillModel.get("billDocumentID")===a.get("documentID")&&(d.lienBillModel.set("billdocumentTitle",a.get("documentTitle")),d.lienBillModel.set("billdocumentName",a.get("documentName")),d.updateDocumentBillModel(),d.model.set("billdocumentTitle",a.get("documentTitle")),d.model.set("billdocumentName",a.get("documentName")))}),c.show()},omfsDocumentBrowser:function(){var a=this.options.originModel.isNew()?!1:this.options.originModel.get("eventID"),b=new App.Views.Files.Documents.DocumentBrowser({originModel:this.model,fileModel:this.options.fileModel,eventID:a,collection:this.documentLienOMFS,oneDocument:!0,defaultChecked:[App.Const.Designations.lienOMFS]}),c=new App.Helpers.Modal({view:b,sizeModal:"modal-lg"}),d=this;this.listenTo(b.colDocuments,"change",function(a){d.lienBillModel.get("OMFSdocumentID")===a.get("documentID")&&(d.lienBillModel.set("OMFSdocumentTitle",a.get("documentTitle")),d.lienBillModel.set("OMFSdocumentName",a.get("documentName")),this.updateDocumentOMFSModel(),d.model.set("OMFSdocumentTitle",a.get("documentTitle")),d.model.set("OMFSdocumentName",a.get("documentName")))}),c.show()},save_lien_bill:function(){var a=this;if($("#lien-bill-form").valid()){var b=$(".eventWcLienThird").data("view");if(_.isUndefined(this.options.originModel.get("lienID"))){var c=new App.Helpers.Toast({message:"Lien Bill Saved Correctly",classType:"success",fadeOut:3e3});c.render(),a.model.clear(),a.model.set(a.lienBillModel.attributes),a.options.collection.add(a.model);var d=a.options.collection.clone();a.options.collection.reset(d.toJSON()),a.options.collection.sortBy="name",a.options.collection.sort(),b.calculateLienBillsTotal(),a.elementModal.modal("hide")}else this.lienBillModel.set("lienID",this.options.originModel.get("lienID")),this.lienBillModel.set("eventID",this.options.originModel.get("eventID")),this.lienBillModel.save({},{success:function(c){a.model.clear(),a.model.set(c.attributes),a.options.collection.add(a.model);var d=a.options.collection.clone();a.options.collection.reset(d.toJSON()),a.options.collection.sortBy="name",a.options.collection.sort(),b.calculateLienBillsTotal();var e=new App.Helpers.Toast({message:"Lien Demand Saved Correctly",classType:"success",fadeOut:3e3});e.render(),a.elementModal.modal("hide")}})}}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.Liens)&&(App.Views.Files.Liens={}),App.Views.Files.Liens.LienDemandForm=App.Helpers.View.extend({template:App.Templates.filesLiensLienDemandForm,className:"lienDemandForm",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.lienDemandModel=this.model.clone()},events:{"click #save-lien-demand":"save_lien_demand"},save_lien_demand:function(){var a=this;if($("#lien-demand-form").valid())if(_.isUndefined(this.options.originModel.get("lienID"))){var b=new App.Helpers.Toast({message:"Lien Demand Saved Correctly",classType:"success",fadeOut:3e3});b.render(),a.model.clear(),a.model.set(a.lienDemandModel.attributes),a.options.collection.add(a.model);var c=a.options.collection.clone();a.options.collection.reset(c.toJSON()),a.elementModal.modal("hide"),a.options.collection.sortBy="demandDate",a.options.collection.sortOrder="DESC",a.options.collection.sort()}else this.lienDemandModel.set("lienID",this.options.originModel.get("lienID")),this.lienDemandModel.save({},{success:function(b){a.model.clear(),a.model.set(b.attributes),a.options.collection.add(b);var c=new App.Helpers.Toast({message:"Lien Demand Saved Correctly",classType:"success",fadeOut:3e3});c.render();var d=a.options.collection.clone();a.options.collection.reset(d.toJSON()),a.elementModal.modal("hide"),a.options.collection.sortBy="demandDate",a.options.collection.sortOrder="DESC",a.options.collection.sort()}})}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.Liens)&&(App.Views.Files.Liens={}),App.Views.Files.Liens.LienObjectionForm=App.Helpers.View.extend({template:App.Templates.filesLiensLienObjectionForm,className:"lienObjectionForm",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.documentObjection=new App.Helpers.Collection,this.documentVerification=new App.Helpers.Collection,this.documentModel=new App.Models.Document,this.lienObjectionModel=this.model.clone(),this.listenTo(this.documentObjection,"add change remove",function(){b.lienObjectionModel.set("documentTitle",b.documentObjection.pluck("documentTitle")[0]),b.lienObjectionModel.set("documentID",b.documentObjection.pluck("documentID")[0]),this.updateDocumentModel(),b.documentObjection.reset()})},events:{"click #save-lien-objection":"save_lien_objection","click .btn-add-document":"documentBrowser"},afterRender:function(){this.updateDocumentModel()},documentBrowser:function(){var a=this.options.originModel.isNew()?!1:this.options.originModel.get("eventID"),b=new App.Views.Files.Documents.DocumentBrowser({originModel:this.model,fileModel:this.options.fileModel,eventID:a,collection:this.documentObjection,oneDocument:!0,defaultChecked:[App.Const.Designations.lienObjection]}),c=new App.Helpers.Modal({view:b,sizeModal:"modal-lg"}),d=this;this.listenTo(b.colDocuments,"change",function(a){d.lienObjectionModel.get("documentID")===a.get("documentID")&&(d.lienObjectionModel.set("documentTitle",a.get("documentTitle")),d.lienObjectionModel.set("documentName",a.get("documentName")),d.updateDocumentModel(),d.model.set("documentTitle",a.get("documentTitle")),d.model.set("documentName",a.get("documentName")))}),c.show()},save_lien_objection:function(){var a=this;if($("#lien-objection-form").valid())if(_.isUndefined(this.options.originModel.get("lienID"))){var b=new App.Helpers.Toast({message:"Lien Objection Saved Correctly",classType:"success",fadeOut:3e3});b.render(),a.model.clear(),a.model.set(a.lienObjectionModel.attributes),a.options.collection.add(a.model);var c=a.options.collection.clone();a.options.collection.reset(c.toJSON()),a.options.collection.sortBy="objectionDate",a.options.collection.sortOrder="DESC",a.options.collection.sort(),a.elementModal.modal("hide")}else this.lienObjectionModel.set("lienID",this.options.originModel.get("lienID")),this.lienObjectionModel.set("eventID",this.options.originModel.get("eventID")),this.lienObjectionModel.save({},{success:function(b){a.model.clear(),a.model.set(b.attributes),a.options.collection.add(b);var c=a.options.collection.clone();a.options.collection.reset(c.toJSON()),a.options.collection.sortBy="objectionDate",a.options.collection.sortOrder="DESC",a.options.collection.sort();var d=new App.Helpers.Toast({message:"Lien Objection Saved Correctly",classType:"success",fadeOut:3e3});d.render(),a.elementModal.modal("hide")}})},updateDocumentModel:function(){this.documentModel.set({documentID:this.lienObjectionModel.get("documentID"),documentName:this.lienObjectionModel.get("documentName"),documentTitle:this.lienObjectionModel.get("documentTitle")})}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.Liens)&&(App.Views.Files.Liens={}),App.Views.Files.Liens.LienOfferForm=App.Helpers.View.extend({template:App.Templates.filesLiensLienOfferForm,className:"lienOfferForm",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.lienOfferModel=this.model.clone()},events:{"click #save-lien-offer":"save_lien_offer"},save_lien_offer:function(){var a=this;if($("#lien-offer-form").valid())if(_.isUndefined(this.options.originModel.get("lienID"))){var b=new App.Helpers.Toast({message:"Lien Offer Saved Correctly",classType:"success",fadeOut:3e3});b.render(),a.model.clear(),a.model.set(a.lienOfferModel.attributes),a.options.collection.add(a.model);var c=a.options.collection.clone();a.options.collection.reset(c.toJSON()),a.options.collection.sortBy="offerDate",a.options.collection.sortOrder="DESC",a.options.collection.sort(),a.elementModal.modal("hide")}else this.lienOfferModel.set("lienID",this.options.originModel.get("lienID")),this.lienOfferModel.save({},{success:function(b){a.model.clear(),a.model.set(b.attributes),a.options.collection.add(b);var c=a.options.collection.clone();a.options.collection.reset(c.toJSON()),a.options.collection.sortBy="offerDate",a.options.collection.sortOrder="DESC",a.options.collection.sort();var d=new App.Helpers.Toast({message:"Lien Offer Saved Correctly",classType:"success",fadeOut:3e3});d.render(),a.elementModal.modal("hide")}})}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.Liens)&&(App.Views.Files.Liens={}),App.Views.Files.Liens.LienRepForm=App.Helpers.View.extend({template:App.Templates.filesLiensLienRepForm,className:"lienRepForm",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this.options.lienRepModel.clone();this.lienRepModel=b},events:{"click .icon-typeahead-down":"showAllEntities","click #company_form_new":"newCompanyForm","click #company_form_edit":"editCompanyForm","click #save-lien-rep":"save_lien_rep"},showAllEntities:function(a){App.Helpers.showAllEntities(a,this.$el)},afterRender:function(){App.Helpers.initTypeahead({view:this,elemClass:".typeahead.company_typeahead",urlBuild:{url:"api/typeahead_controller/search_companies"},processFunction:$.proxy(this.processCompanyTypeahead,this)}),_.isUndefined(this.lienRepModel.get("lienRepCompanyName"))||($(".typeahead.company_typeahead").typeahead("val",this.lienRepModel.get("lienRepCompanyName")),this.companyTypeaheadID=this.lienRepModel.get("companyID"))},processUnmatchedCompanyTypeahead:function(){var a=$(".lienRepForm").data("view");a.lienRepModel.set("companyID",void 0),$(".typeahead.company_typeahead").typeahead("val",""),a.companyTypeaheadID=void 0},processCompanyTypeahead:function(a){var b=$(".lienRepForm").data("view");b.companyTypeaheadID=a.id},newCompanyForm:function(){var a=new App.Models.Company({companyName:""}),b=new App.Views.Files.FileTabs.Employer.EmployerForm({model:a,companyTypeaheadID:this.companyTypeaheadID,isLienRep:!0}),c=new App.Helpers.Modal({view:b,sizeModal:"modal-lg"});c.show()},editCompanyForm:function(){if(!_.isUndefined(this.companyTypeaheadID)){var a=new App.Models.Company({companyID:this.companyTypeaheadID,id:this.companyTypeaheadID}),b=new App.Views.Files.FileTabs.Employer.EmployerForm({model:a,companyTypeaheadID:this.companyTypeaheadID,isLienRep:!0}),c=new App.Helpers.Modal({view:b,sizeModal:"modal-lg"});c.show(),a.fetch()}},save_lien_rep:function(){if($("#lien-rep-form").valid())if(this.options.newModel)this.process_save_lien_rep();else{var a=" If you edit this lien rep it will affect all files using this lien rep",b=new App.Views.Shared.AlertView({processFunction:"process_save_lien_rep",viewClass:".lienRepForm",msg:a,title:"Warning"}),c=new App.Helpers.Modal({view:b});c.show()}},process_save_lien_rep:function(){var a=this,b=this.$el;this.lienRepModel.set("companyID",this.companyTypeaheadID),this.lienRepModel.set("lienRepOfficePhone",b.find('[name="lienRepOfficePhone"]').val()),this.lienRepModel.set("lienRepCellPhone",b.find('[name="lienRepCellPhone"]').val()),this.lienRepModel.set("lienRepFax",b.find('[name="lienRepFax"]').val()),this.lienRepModel.save({},{success:function(b,c){a.options.lienRepModel.clear(),a.options.lienRepModel.set(c);var d=$(".eventWcLienSecond").data("view");if(!d._checkLienRep(a.options.lienRepModel)){d.saveLien2LienRep(a.options.lienRepModel),a.collection.add(a.options.lienRepModel);var e=a.options.collection.clone();a.options.collection.reset(e.toJSON()),a.collection.sortBy="lienRepLastName",a.collection.sort()}a.elementModal.modal("hide")}})}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.SubroEventTabs)&&(App.Views.Files.SubroEventTabs={}),_.isUndefined(App.Views.Files.SubroEventTabs.Discovery)&&(App.Views.Files.SubroEventTabs.Discovery={}),App.Views.Files.SubroEventTabs.Discovery.ExtensionForm=App.Helpers.View.extend({template:App.Templates.filesSubroEventTabsDiscoveryExtensionForm,className:"FilesSubroEventTabsDiscoveryExtensionForm",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.discoveryExtensionModel=this.model.clone()},events:{"click #save-discovery-extension":"save_discovery_extension"},save_discovery_extension:function(){var a=this;$("#discovery-extension-form").valid()&&(this.discoveryExtensionModel.set("discoveryID",this.options.originModel.get("discoveryID")),this.discoveryExtensionModel.save({},{success:function(b){a.model.clear(),a.model.set(b.attributes),a.options.collection.add(b);var c=a.options.collection.clone();a.options.collection.reset(c.toJSON()),a.options.collection.sortBy="dueDate",a.options.collection.sortOrder="DESC",a.options.collection.sort();var d=new App.Helpers.Toast({message:"Discovery Extension Saved Correctly",classType:"success",fadeOut:3e3});d.render(),a.elementModal.modal("hide")}}))}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.SubroEventTabs)&&(App.Views.Files.SubroEventTabs={}),_.isUndefined(App.Views.Files.SubroEventTabs.Discovery)&&(App.Views.Files.SubroEventTabs.Discovery={}),App.Views.Files.SubroEventTabs.Discovery.ResponseForm=App.Helpers.View.extend({template:App.Templates.filesSubroEventTabsDiscoveryResponseForm,className:"FilesSubroEventTabsDiscoveryResponseForm",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.discoveryResponseModel=this.model.clone()},events:{"click #save-discovery-response":"save_discovery_response"},save_discovery_response:function(){var a=this;$("#discovery-response-form").valid()&&(this.discoveryResponseModel.set("discoveryID",this.options.originModel.get("discoveryID")),this.discoveryResponseModel.save({},{success:function(b){a.model.clear(),a.model.set(b.attributes),a.options.collection.add(b);var c=a.options.collection.clone();a.options.collection.reset(c.toJSON()),a.options.collection.sortBy="posDate",a.options.collection.sortOrder="DESC",a.options.collection.sort();var d=new App.Helpers.Toast({message:"Discovery Response Saved Correctly",classType:"success",fadeOut:3e3});d.render(),a.elementModal.modal("hide")}}))}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.SubroEventTabs)&&(App.Views.Files.SubroEventTabs={}),App.Views.Files.SubroEventTabs.EventBilling=App.Helpers.View.extend({template:App.Templates.filesSubroEventTabsEventBilling,className:"FilesSubroEventTabsEventBilling",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{"click .btn-new-bill":"createBill","click .gotoBilling":"editBilling","click .gotoInvoice":"generateInvoice"},generateInvoice:function(a){a.preventDefault(),a.stopPropagation();var b=$(a.currentTarget),c=b.data("invoicenumber"),d=this.options.fileModel.get("fileTitle"),e=this.options.fileModel.getClientBillingFormat(),f=this.options.fileModel.getClientID(),g=this.options.fileModel.get("subroFileNumber"),h=new App.Views.Billing.PastBilling.InvoiceModal({
invoiceNumber:c,billingFormat:e,fileTitle:d,clientID:f,fileNumber:g}),i=new App.Helpers.Modal({view:h});i.show()},editBilling:function(a){var b=this,c=$(a.currentTarget),d=new App.Models.Billing({billingID:c.data("billingid"),fileNumber:this.options.fileModel.get("subroFileNumber"),eventID:this.model.get("eventID")}),e=new App.Views.Files.EventTabs.BillingForm({model:d,collection:this.options.colBillings,fileModel:this.options.fileModel}),f=new App.Helpers.Modal({view:e,sizeModal:"modal-lg"});f.show(),Backbone.history.navigate("subro_files/edit/"+this.options.fileModel.get("subroFileNumber")+"/events/edit/"+this.model.get("eventID")+"/billing/edit/"+d.get("billingID"),{silent:!0}),e.elementModal.on("hidden.bs.modal",function(){Backbone.history.navigate("subro_files/edit/"+b.options.fileModel.get("subroFileNumber")+"/events/edit/"+b.model.get("eventID")+"/billing",{silent:!0})}),d.fetch()},createBill:function(){var a=this,b=new App.Models.Billing({fileNumber:this.options.fileModel.get("subroFileNumber"),hourly:1,UserID:parseInt(App.loginModel.get("id"),10),eventID:this.model.get("eventID")}),c=new App.Views.Files.EventTabs.BillingForm({model:b,collection:this.options.colBillings,fileModel:this.options.fileModel}),d=new App.Helpers.Modal({view:c,sizeModal:"modal-lg"});Backbone.history.navigate("subro_files/edit/"+this.options.fileModel.get("subroFileNumber")+"/events/edit/"+this.model.get("eventID")+"/billing/new",{silent:!0}),d.show(),c.elementModal.on("hidden.bs.modal",function(){Backbone.history.navigate("subro_files/edit/"+a.options.fileModel.get("subroFileNumber")+"/events/edit/"+a.model.get("eventID")+"/billing",{silent:!0})})}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.SubroEventTabs)&&(App.Views.Files.SubroEventTabs={}),App.Views.Files.SubroEventTabs.EventDocument=App.Helpers.View.extend({template:App.Templates.filesSubroEventTabsEventDocument,className:"FilesSubroEventTabsEventDocument",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.listenTo(this.options.colEventToDocuments,"add reset",function(){b.applyPermissions()})},events:{"click .btn-documentBrowser":"documentBrowser","click .btnEditDocument":"editDocument","click .btnRemoveDocument":"removeDocument","click .btn-restoreDocumentRemoved":"restoreDocumentRemoved"},getDocumentUrl:function(){return this.row.getUrl()},documentBrowser:function(){if(this.model.isNew()||this.model.get("eventTypeChange")){var a=$(".FilesSubroEventTabsEventForm").data("view"),b=a.$el;b&&(Uit.SessionFlash.set("defaultTabActive",{tab:"#document-form-tab",className:this.className}),b.find("#save-event").trigger("click"))}else{var c=this.options.model.get(this.options.model.has("eventIDs")?"eventIDs":"eventID"),d=new App.Views.Files.Documents.DocumentBrowser({originModel:this.model,fileModel:this.options.fileModel,eventID:c,collection:this.options.colEventToDocuments,parentViewClassName:this.options.parentViewClassName}),e=new App.Helpers.Modal({view:d,sizeModal:"modal-lg"});e.show()}},isRemoved:function(){return this.row.get("removed")},getDesignations:function(){return App.Helpers.getDesignations(this.options.fileModel.get("designations"),this.row.get("designations")).join(", ")},removeDocument:function(a){var b=$(a.currentTarget),c=b.data("document-id"),d=this.options.colEventToDocuments.get(c),e=$(".FilesSubroEventTabsEventForm").data("view"),f=e.colBodyParts,g=!1,h="This documents has relationship with injuries.\nAre you sure to remove the document?",i="Are you sure to remove the document?";f.each(function(a){var b=a.get("documents")||[],d=_.findWhere(b,{documentID:c});d&&(g=!0)});var j=new App.Views.Shared.AlertView({processFunction:"processRemoveDocument",viewClass:".eventDocument",params:{documentID:c,hasRelationshipInjuries:g,model:d,colBodyParts:f},msg:g?h:i,title:"Delete Lien Offer"}),k=new App.Helpers.Modal({view:j});k.show()},processRemoveDocument:function(a){a.hasRelationshipInjuries?(a.colBodyParts.each(function(b){var c=b.get("documents")||[],d=_.findWhere(c,{documentID:a.documentID});d&&(d.removed=1),b.set("documents",c)}),a.model.set("removed",1)):a.model.set("removed",1);var b=this.options.colEventToDocuments.clone();this.options.colEventToDocuments.reset(b.toJSON())},editDocument:function(a){var b=$(a.currentTarget),c=b.data("document-id"),d=new App.Models.Document2({documentID:c}),e=new App.Views.Files.Documents.Form({model:d,collection:this.options.colEventToDocuments,fileModel:this.options.fileModel}),f=new App.Helpers.Modal({view:e,sizeModal:"modal-lg"});f.show(),d.fetch()}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.SubroEventTabs)&&(App.Views.Files.SubroEventTabs={}),App.Views.Files.SubroEventTabs.EventForm=App.Helpers.View.extend({template:App.Templates.filesSubroEventTabsEventForm,className:"FilesSubroEventTabsEventForm",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this,c=this.$el;this.colLetters=new App.Collections.Letters,this.colWordLetters=new App.Collections.Letters,this.colExistingEvents=new App.Collections.FileEvents,this.colEventToDocuments=new App.Collections.Documents2,this.colBillings=new App.Collections.Billings,this.colEventTypeCategories=new App.Collections.EventTypeCategories,this.colEventTypeCategories.moduleID=this.options.fileModel.get("module"),this.colMilestones=new App.Collections.Milestones,this.colBodyParts=new App.Collections.BodyParts,this.colMedicalToBodyPartsADj=new App.Collections.BodyParts,this.colMedicalToBodyPartsADj.sortBy="bodyPart",this.loadAAFirm=!1,this.colEventReasons=new App.Collections.EventReasons,this.colEventReasons.moduleID=this.options.fileModel.get("module"),this.listenTo(this.model,"request",function(){b.showLoader()}),this.listenTo(this.model,"sync error",function(){b.removeLoader()}),this.model.isNew()&&(this.colMilestones.module=this.options.fileModel.get("module"),this.colMilestones.fetch()),this.listenTo(this.model,"sync",function(){b._checkCorruptedEvent(),b.changeEventCategoryType();var a=b.model.get("eventTypeName"),d=b.model.get("eventTypeDescription");_.isEmpty(d)||_.isNull(d)||(a+=": "+d),c.find(".typeahead.eventTypes-Typeahead").typeahead("val",a),b.colMilestones.reset(b.model.get("milestones")),b._showOtherFields(),b.colEventToDocuments.reset(b.model.get("documents")),b.colBillings.add(b.model.get("billings")),b.colBodyParts.reset(b.model.get("bodyParts")),b.colLetters.reset(b.model.get("letterTemplates")),b.colWordLetters.reset(b.model.get("wordLetterTemplates")),b.applyPermissions(),b.colMedicalToBodyPartsADj.reset(b.model.get("medical2bodyParts")),b.options.fileModel.set("previousFileOpens",b.model.get("previousFileOpens"))})},events:{'change [name="category-type"]':"changeEventCategoryType",'change [name="existing-select"]':"_showOtherFields","click .icon-typeahead-down":"showAllEntities","click #save-event":"saveEvent","click #save-event-and-create-new-event":"saveEvent","click .auto-save":"autoSaveEvent","click #add-new-bill":"createNewBill",'click [href="#billing-form-tab"]':"changeBillingUrl","click #show-dependencies":"showDependencies"},_checkCorruptedEvent:function(){if(this.model.get("childTable")&&(0===this.model.get("childID")||_.isUndefined(this.model.get("childID"))||_.isNull(this.model.get("childID")))){var a=new App.Helpers.Toast({message:"Error: This event is corrupted and is missing its extended info. Please contact your admin.",classType:"danger",fadeOut:5e3});a.render(),this.model.set("isCorrupt",1)}},afterRender:function(){var a=Uit.SessionFlash.get("defaultTabActive"),b=this.$el;this.colEventTypeCategories.fetch({success:this.setDefaultEventType}),a&&("#document-form-tab"===a.tab&&"eventDocument"===a.className&&(b.find('.nav-tabs a[href="'+a.tab+'"]').tab("show"),this.listenToOnce(this.model,"sync",function(){var a=$(".FilesSubroEventTabsEventDocument").data("view").$el;a&&a.find(".add-discovery-extension").trigger("click")})),"#event-form-tab3"===a.tab&&"FilesSubroEventTabsEventSubroDiscoveryFirst"===a.className&&(b.find('.nav-tabs a[href="'+a.tab+'"]').tab("show"),this.listenToOnce(this.model,"sync",function(){var b=$(".FilesSubroEventTabsEventSubroDiscoveryFirst").data("view"),c=b.$el;c&&"#add-discovery-extension"===a.option&&c.find(a.option).trigger("click")})),"#event-form-tab4"===a.tab&&"FilesSubroEventTabsEventSubroDiscoverySecond"===a.className&&(b.find('.nav-tabs a[href="'+a.tab+'"]').tab("show"),this.listenToOnce(this.model,"sync",function(){var b=$(".FilesSubroEventTabsEventSubroDiscoverySecond").data("view"),c=b.$el;c&&"#add-discovery-response"===a.option&&c.find(a.option).trigger("click")}))),Uit.SessionFlash.get("addNewBill")&&(b.find('.nav-tabs a[href="#billing-form-tab"]').tab("show"),this.listenToOnce(this.model,"sync",function(){var a=$(".FilesSubroEventTabsEventForm").data("view").$el;a&&a.find('a[class="btn btn-default btn-new-bill"]').trigger("click")}))},setDefaultEventType:function b(){var b=localStorage.getItem("setDefaultEventType");if(b){b=JSON.parse(b);var a=$(".FilesSubroEventTabsEventForm").data("view"),c=a.$el;c.find('select[name="category-type"]').val(b.eventCategoryID),c.find('select[name="category-type"]').trigger("change"),c.find(".eventTypes-Typeahead").typeahead("val",b.eventTypeahead),a.changeEventType({datum:{eventTypeName:b.eventTypeName,eventTypeID:b.eventTypeID,childTable:b.eventChildTable,defaultRead:b.defaultRead}}),localStorage.removeItem("setDefaultEventType")}},changeBillingUrl:function(){Backbone.history.navigate("subro_files/edit/"+this.options.fileModel.get("subroFileNumber")+"/events/edit/"+this.model.get("eventID")+"/billing",{silent:!0})},autoSaveEvent:function(a){a.stopImmediatePropagation(),a.stopPropagation(),a.preventDefault();var b=this.$el,c=b.find(".nav li.active").find("a").attr("href"),d=$(a.currentTarget).attr("href"),e="#billing-form-tab"!==c&&"#letters-tab"!==c,f="#billing-form-tab"===d||"#letters-tab"===d;e&&f?this.saveEvent(a):b.find('.nav-tabs a[href="'+d+'"]').tab("show"),"#letters-tab"===d&&this.showLettersTab()},showErrorTabs:function(){var a=this.$el,b=a.find("label.error"),c=!0;b.length>0&&_.each(b,function(b){var d="#"+a.find(b).closest(".tab-pane").attr("id");c&&(a.find('a[href="'+d+'"]').tab("show"),c=!1),a.find('a[href="'+d+'"]').addClass("error-tab")})},saveEvent:function(a){a.preventDefault(),a.stopPropagation();var b=this.$el,c=$(a.currentTarget),d=this.model.isNew(),e=this,f=b.find("#error-msg");this.model.set("eventTypeParams",this._changeEventTypeParams);var g=!0;if(_.isUndefined(this.model.get("fileNumber"))||_.isUndefined(this.model.get("etcID"))||_.isUndefined(this.model.get("eventTypeID"))){var h=new App.Helpers.Toast({message:"Error: An event must have a fileNumber, eventTypeID, and event category type",classType:"danger",fadeOut:5e3});return void h.render()}return b.find("#event-general-tab-form").valid()||(g=!1),g?(f.html(""),b.find(".nav-tabs li a").removeClass("error-tab"),this.model.set("milestones",this.colMilestones.toJSON()),this.model.set("documents",this.colEventToDocuments.toJSON()),c.attr("disabled",!0),this.model.save({},{success:function(){var a="subro_files/edit/"+e.options.fileModel.get("subroFileNumber")+"/events/edit/"+e.model.get("eventID"),f=new App.Helpers.Toast({message:"Event saved successfully.",classType:"success",fadeOut:5e3});if(f.render(),e.model.unset("eventTypeChange"),"#billing-form-tab"===c.attr("href")||"#letters-tab"===c.attr("href")){var g=b.find('.nav-tabs a[href="'+c.attr("href")+'"]');g.tab("show");var h="#billing-form-tab"===c.attr("href")?"billing":"letters";a+="/"+h,Uit.SessionFlash.get("trigger_add_bill")&&(d?a+="/new":b.find('a[class="btn btn-default btn-new-bill"]').trigger("click"))}_.values(App.Const.eventTypes).indexOf(e.model.get("eventTypeID"))>-1&&Uit.SessionFlash.set("fetch_file",!0),d&&Uit.SessionFlash.set("ignoreCheckRead",!0),"save-event-and-create-new-event"===c.attr("id")?(d&&Backbone.history.navigate(a,{trigger:!0}),Backbone.history.navigate(e.options.fileModel.fileNewEventUrl(),{trigger:!0})):d&&Backbone.history.navigate(a,{trigger:!0}),e._changeEventTypeParams.changed=!1},error:function(a,b){if(_.has(b.responseJSON,"error_code"))if("cannot_delete_documents_in_event_2_documents"===b.responseJSON.error_code)e.colEventToDocuments.each(function(a){a.set("removed",0),e.colBodyParts.each(function(b){var c=b.get("documents")||[],d=_.findWhere(c,{documentID:a.get("documentID")});d&&(d.removed=0)})});else if("cannot_delete_extended_event"===b.responseJSON.error_code){var c=new App.Helpers.Toast({message:"There was an error trying to unlink the extended event.",classType:"danger",fadeOut:5e3});c.render(),window.location.reload()}},complete:function(){c.removeAttr("disabled")}}),!0):(Uit.SessionFlash.get("defaultTabActive"),this.showErrorTabs(),void f.html("There are errors on some fields."))},showTabDocuments:function(){var a=new App.Views.Files.SubroEventTabs.EventDocument({model:this.model,fileModel:this.options.fileModel,colEventToDocuments:this.colEventToDocuments,parentViewClassName:this.className});App.Helpers.htmlView(a,"#document-form-tab")},_showOtherFields:function(a){var b=this.$el,c=this;if(!_.isUndefined(a)){var d=b.find('[name="existing-select"]').val();if("new"!==d){var e=new App.Models.Event({eventID:d});e.fetch({data:$.param({fileNumber:c.options.fileModel.get("fileNumber")}),success:function(a){var b=a.get("childInfo");b&&(delete b.eventID,c.model.set(b)),c.model.set("childID",a.get("childID")),c._executeOtherTabs()}})}else"new"===d&&(this.defaultAttrForCreateEvent&&(this.model.clear(),this.model.set(this.defaultAttrForCreateEvent)),this.handlerToFetchAAFirm())}this._executeOtherTabs()},_executeOtherTabs:function(){var a=this.$el;this.emptyElement("#event-form-tab"),this.emptyElement("#billing-form-tab"),this.emptyElement("#event-form-tab3"),this.emptyElement("#event-form-tab4"),this.emptyElement("#event-form-tab5"),this.tab3=void 0,this.tab4=void 0,this.tab5=void 0,this.tab6=void 0,this.tab7=void 0,this.tab8=void 0,a.find("#other-fields").show();var b=new App.Views.Files.SubroEventTabs.EventGeneral({model:this.model,colMilestones:this.colMilestones,fileModel:this.options.fileModel,parentViewClassName:this.className});App.Helpers.htmlView(b,"#event-form-tab"),this.showTabDocuments();var c=new App.Views.Files.SubroEventTabs.EventBilling({model:this.model,colBillings:this.colBillings,fileModel:this.options.fileModel,parentViewClassName:this.className});if(App.Helpers.htmlView(c,"#billing-form-tab"),_.isUndefined(this.model.get("childTable"))||""===this.model.get("childTable"))a.find('[href="#event-form-tab3"]').hide(),a.find('[href="#event-form-tab4"]').hide(),a.find('[href="#event-form-tab5"]').hide(),a.find('[href="#event-form-tab6"]').hide(),a.find('[href="#event-form-tab7"]').hide(),a.find('[href="#event-form-tab8"]').hide();else{var d,e,f,g,h,i;"subro_discovery"===this.model.get("childTable")&&(this.tab3="Extensions",this.tab4="Responses",d=new App.Views.Files.SubroEventTabs.EventSubroDiscoveryFirst({model:this.model,fileModel:this.options.fileModel,parentViewClassName:this.className}),e=new App.Views.Files.SubroEventTabs.EventSubroDiscoverySecond({model:this.model,fileModel:this.options.fileModel,parentViewClassName:this.className})),_.isUndefined(d)?a.find('[href="#event-form-tab3"]').hide():(a.find('[href="#event-form-tab3"]').show(),App.Helpers.htmlView(d,"#event-form-tab3")),_.isUndefined(e)?a.find('[href="#event-form-tab4"]').hide():(a.find('[href="#event-form-tab4"]').show(),App.Helpers.htmlView(e,"#event-form-tab4")),_.isUndefined(f)?a.find('[href="#event-form-tab5"]').hide():(a.find('[href="#event-form-tab5"]').show(),App.Helpers.htmlView(f,"#event-form-tab5")),_.isUndefined(g)?a.find('[href="#event-form-tab6"]').hide():(a.find('[href="#event-form-tab6"]').show(),App.Helpers.htmlView(g,"#event-form-tab6")),_.isUndefined(h)?a.find('[href="#event-form-tab7"]').hide():(a.find('[href="#event-form-tab7"]').show(),App.Helpers.htmlView(h,"#event-form-tab7")),_.isUndefined(i)?a.find('[href="#event-form-tab8"]').hide():(a.find('[href="#event-form-tab8"]').show(),App.Helpers.htmlView(i,"#event-form-tab8"))}},showLettersTab:function(){var a=new App.Views.Files.Letters.LettersTab({colLetters:this.colLetters,colWordLetters:this.colWordLetters,fileModel:this.options.fileModel,eventModel:this.model,parentViewClassName:this.className});App.Helpers.htmlView(a,"#letters-tab")},showAllEntities:function(a){App.Helpers.showAllEntities(a,this.$el)},processEventTypeahead:function(a){var b=this.$el;if(""!==a.instructions?(b.find("#instructionsText").text(a.instructions),b.find("#eventTypeInstructions").slideDown("fast")):b.find("#eventTypeInstructions").slideUp("fast"),this.model.isNew()||a.childTable===this.model.get("childTable"))this.changeEventType({datum:a});else{var c="You are changing event type of an existing event. This will unlink any extended events associated to this event. ";1===this.model.get("childIsLast")&&(c+="This will also delete the information of the extended event.");var d=new App.Views.Shared.AlertView({processFunction:"changeEventType",cancelFunction:"cancelChangeEventType",viewClass:".eventForm",params:{datum:a},msg:c,title:"Warning"}),e=new App.Helpers.Modal({view:d});e.show()}},_changeEventTypeParams:{changed:!1},changeEventType:function(a){var b=this.$el,c=this;this._changeEventTypeParams.changed=!0,this._changeEventTypeParams.fileNumber=this.options.fileModel.get("fileNumber"),this._changeEventTypeParams.eventID=this.model.get("eventID"),this._changeEventTypeParams.eventTypeID=this.model.get("eventTypeID"),this._changeEventTypeParams.childTable=this.model.get("childTable"),this._changeEventTypeParams.childID=this.model.get("childID");var d=this.model.get("eventTypeID"),e=this.model.get("childTable"),f=["fileNumber","eventID","eventDate","shortNote","shortSummary","milestones","eventTitle","done","longNote","etcID","eventTypeID","childTable","important"];if(b.find('a[href="#event-form-tab"]').tab("show"),!this.model.isNew()){var g="Changed stored temporarily.<br>Hit the Save Event button to save",h=new App.Helpers.Toast({message:g,classType:"warning",fadeOut:8e3});h.render()}this._changeEventTypeParams.childTable&&this._changeEventTypeParams.childID&&(c.model.unset("eventTypeID",{silent:!0}),c.model.unset("childTable",{silent:!0})),_.each(c.model.attributes,function(a,b){-1===_.indexOf(f,b)&&c.model.unset(b,{silent:!0})}),this.model.set("eventTypeName",a.datum.eventTypeName),this.model.set("eventTypeID",a.datum.eventTypeID),this.model.set("childTable",a.datum.childTable?a.datum.childTable:null),this.model.set("defaultRead",a.datum.defaultRead),this.model.set("oldEventTypeID",d),this.model.set("oldChildTable",e),"wc_file_closes"===String(a.datum.childTable).trim()?c.showCloseEventReasons(String(a.datum.childTable).trim()):""!==String(a.datum.childTable).trim()&&null!==a.datum.childTable&&void 0!==a.datum.childTable?(this.model.isNew()?(b.find("#close-event-reasons").hide(),b.find("#existing-events-select").show()):(this.handlerToFetchAAFirm(),this._showOtherFields()),b.find('[name="existing-select"]').val("-1"),this.colExistingEvents.reset(),this.colExistingEvents.fetch({data:$.param({fileNumber:c.options.fileModel.get("subroFileNumber"),childTable:a.datum.childTable})})):(b.find("#close-event-reasons").hide(),b.find("#existing-events-select").hide(),this.handlerToFetchAAFirm(),this._showOtherFields()),this.model.isNew()&&(this.defaultAttrForCreateEvent=this.model.toJSON()),this.model.set("eventTypeChange",!0)},handlerToFetchAAFirm:function(){"wc_depos"===this.model.get("childTable")&&this.loadAAFirm===!1&&(this.loadAAFirm=!0)},cancelChangeEventType:function(){location.reload()},_initEventTypeTypeAhead:function(){var a=this.$el,b=".eventTypes-Typeahead",c=this,d=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("value"),queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{cache:!1,searchAll:!1,url:"api/typeahead_controller/search_eventTypes",replace:function(a,b){return b=this.searchAll?"*.*":b,this.searchAll=!1,a+"/"+c.model.get("etcID")+"?search="+b},ajax:{complete:function(c){if(c=c.responseJSON||[],c.length>0){var d=a.find(b+".tt-input"),e=d.attr("placeholder");_.isEmpty(d.typeahead("val"))&&a.find(b+".tt-input ~ .tt-dropdown-menu").is(":visible")&&(d.attr("placeholder",""),d.data("placeholder",e))}_.isUndefined(a.find(b+".tt-input").data("ttTypeahead"))||(a.find(b+".tt-input").data("ttTypeahead").minLength=1)}}},limit:App.Const.limitTypeahead,rateLimitWait:100});d.initialize(),a.find(b).typeahead("destroy");var e=a.find(b).typeahead({minLength:1,highlight:!0},{name:"name",displayKey:"typeaheadResult",nameKey:"last",source:d.ttAdapter(),dynamic:!0,delay:500});a.find(b).data("engine",d),e.off("typeahead:selected typeahead:autocompleted"),e.on("typeahead:selected typeahead:autocompleted typeahead:change",function(d,e){_.isUndefined(e)||(a.find(".tt-dropdown-menu").css("display","none"),a.find(b+".tt-input").data("ttTypeahead").minLength=1,_.isUndefined(c.processEventTypeahead)||c.processEventTypeahead(e))}),e.keypress(function(c){if(13===c.which){var d=a.find(".tt-suggestion").data("ttDatum");if(_.isUndefined(d))return;e.trigger("typeahead:selected",[d]),a.find(b).typeahead("val",App.Helpers.handlerDisplayKey(d)),a.find(b+".tt-input").data("ttTypeahead").minLength=0}})},changeEventCategoryType:function(){var a=this.$el;_.isUndefined(a.find("[name=eventTypes]").data("ttTypeahead"))&&this._initEventTypeTypeAhead(),a.find(".eventTypes-Typeahead").typeahead("val",""),a.find("#existing-events-select").hide(),a.find("#other-fields").hide(),a.find("#close-event-reasons").hide()},showDependencies:function(){var a=this.colEventTypeCategories.findWhere({etcID:this.model.get("etcID")}),b=new App.Models.Event({fileNumber:this.model.get("fileNumber"),eventID:this.model.get("eventID")}),c=new App.Views.Files.SubroEventTabs.ShowDependencies({model:b,currentEvent:this.model,categoryName:a.get("etcName"),fileModel:this.options.fileModel}),d=new App.Helpers.Modal({view:c,sizeModal:"modal-lg"});d.show()},createNewBill:function(){var a=this.$el,b=a.find(".nav li.active").find("a").attr("href");"#billing-form-tab"===b?a.find('a[class="btn btn-default btn-new-bill"]').trigger("click"):"#letters-tab"===b?(a.find('a[href="#billing-form-tab"]').trigger("click"),a.find('a[class="btn btn-default btn-new-bill"]').trigger("click")):(Uit.SessionFlash.set("trigger_add_bill",!0),a.find('a[href="#billing-form-tab"]').trigger("click"))}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.SubroEventTabs)&&(App.Views.Files.SubroEventTabs={}),App.Views.Files.SubroEventTabs.EventGeneral=App.Helpers.View.extend({template:App.Templates.filesSubroEventTabsEventGeneral,className:"FilesSubroEventTabsEventGeneral",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.colAlerts=new App.Collections.Alerts,this.colAlerts.add(this.model.get("alerts")),this.model.isNew()&&this.model.set("read",this.model.get("defaultRead"))},events:{"click #arrow-milestone":"changeStateFlagMilestones","click #arrow-alerts":"toggleAlertList","click #new-alert":"createNewAlert","click .alert-row":"editAlert","click .remove-alert":"removeAlert"},removeAlert:function(a){a.preventDefault(),a.stopPropagation();var b=$(a.currentTarget),c=this,d=b.data("alert-id"),e=new App.Models.Alert({alert_id:d}),f="";e.destroy({success:function(){f=new App.Helpers.Toast({message:"Alert Deleted.",classType:"warning",fadeOut:3e3}),f.render();var a=c.colAlerts.where({alert_id:d})[0];a.destroy(),c.colAlerts.reset(c.colAlerts.models)},error:function(){f=new App.Helpers.Toast({message:"Alert Deletion failed.",classType:"danger",fadeOut:3e3}),f.render()}})},_alertForm:function(a){var b=new App.Views.Files.EventAlertForm({model:a,alertCollection:this.colAlerts}),c=new App.Helpers.Modal({view:b});c.show()},createNewAlert:function(){var a=new App.Models.Alert({moduleID:this.options.fileModel.get("module"),fileNumber:this.model.get("fileNumber"),eventID:this.model.get("eventID"),notificationUnit:"minutes"});this._alertForm(a),this.$el.find("#alerts-arrow-down").is(":visible")||this.toggleAlertList()},editAlert:function(a){a.preventDefault(),a.stopPropagation();var b=$(a.currentTarget),c=b.data("alert-id"),d=this.colAlerts.where({alert_id:c})[0],e=new App.Models.Alert({eventID:this.model.get("eventID"),alert_id:c,moduleID:this.model.get("moduleID"),fileNumber:this.model.get("fileNumber"),date:d.get("date"),time:d.get("time"),description:d.get("description"),notificationQuantity:d.get("notificationQuantity"),notificationUnit:d.get("notificationUnit"),colUsers:d.get("colUsers")});this._alertForm(e)},toggleAlertList:function(){var a=this.$el;a.find(".alerts-expanded").toggle(),a.find(".alerts-inline").toggle()},changeStateFlagMilestones:function(){var a=this.$el;a.find(".milestones-expanded").toggle(),a.find(".milestones-inline").toggle()}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.SubroEventTabs)&&(App.Views.Files.SubroEventTabs={}),App.Views.Files.SubroEventTabs.EventSubroCaseInfoFirst=App.Helpers.View.extend({template:App.Templates.filesSubroEventTabsEventSubroCaseInfoFirst,className:"FilesSubroEventTabsEventSubroCaseInfoFirst",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.SubroEventTabs)&&(App.Views.Files.SubroEventTabs={}),App.Views.Files.SubroEventTabs.EventSubroCorrespondenceFirst=App.Helpers.View.extend({template:App.Templates.filesSubroEventTabsEventSubroCorrespondenceFirst,className:"FilesSubroEventTabsEventSubroCorrespondenceFirst",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.SubroEventTabs)&&(App.Views.Files.SubroEventTabs={}),App.Views.Files.SubroEventTabs.EventSubroCostFirst=App.Helpers.View.extend({template:App.Templates.filesSubroEventTabsEventSubroCostFirst,className:"FilesSubroEventTabsEventSubroCostFirst",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.SubroEventTabs)&&(App.Views.Files.SubroEventTabs={}),App.Views.Files.SubroEventTabs.EventSubroDiscoveryFirst=App.Helpers.View.extend({template:App.Templates.filesSubroEventTabsEventSubroDiscoveryFirst,className:"FilesSubroEventTabsEventSubroDiscoveryFirst",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.discoveryExtensions=new App.Collections.SubroDiscoveryExtensions,!_.isUndefined(b.model.get("discoveryExtensionInfo"))&&b.model.get("discoveryExtensionInfo").length>0&&(b.discoveryExtensions.add(b.model.get("discoveryExtensionInfo")),b.discoveryExtensions.sortBy="dueDate",b.discoveryExtensions.sort())},events:{"click #add-discovery-extension":"add_discovery_extension","click .discovery-extension-edit":"edit_discovery_extension","click .discovery-extension-delete":"delete_discovery_extension"},add_discovery_extension:function(){if(this.model.isNew()||this.model.get("eventTypeChange")){var a=$(".FilesSubroEventTabsEventForm").data("view"),b=a.$el;b&&(Uit.SessionFlash.set("defaultTabActive",{tab:"#event-form-tab3",className:this.className,option:"#add-discovery-extension"}),b.find("#save-event").trigger("click"))}else{var c=new App.Models.SubroDiscoveryExtension,d=new App.Views.Files.SubroEventTabs.Discovery.ExtensionForm({model:c,collection:this.discoveryExtensions,fileModel:this.options.fileModel,originModel:this.model}),e=new App.Helpers.Modal({view:d});e.show()}},edit_discovery_extension:function(a){var b=$(a.currentTarget),c=this.discoveryExtensions.get(b.data("model")),d=new App.Views.Files.SubroEventTabs.Discovery.ExtensionForm({originModel:this.model,collection:this.discoveryExtensions,fileModel:this.options.fileModel,model:c}),e=new App.Helpers.Modal({view:d});e.show()},delete_discovery_extension:function(a){var b=$(a.currentTarget),c="Are you sure you want to delete this Discovery Extension?",d=new App.Views.Shared.AlertView({processFunction:"process_delete_discovery_extension",viewClass:"."+this.className,params:{elem:b},msg:c,title:"Delete Discovery Extension"}),e=new App.Helpers.Modal({view:d});e.show()},process_delete_discovery_extension:function(a){var b=this,c=a.elem.data("model"),d=b.discoveryExtensions.get({cid:c});d.destroy({success:function(){var a=b.discoveryExtensions.clone();b.discoveryExtensions.reset(),b.discoveryExtensions.add(a.toJSON()),b.discoveryExtensions.sortBy="dueDate",b.discoveryExtensions.sort()}})}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.SubroEventTabs)&&(App.Views.Files.SubroEventTabs={}),App.Views.Files.SubroEventTabs.EventSubroDiscoverySecond=App.Helpers.View.extend({template:App.Templates.filesSubroEventTabsEventSubroDiscoverySecond,className:"FilesSubroEventTabsEventSubroDiscoverySecond",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.discoveryResponses=new App.Collections.SubroDiscoveryResponses,!_.isUndefined(b.model.get("discoveryResponseInfo"))&&b.model.get("discoveryResponseInfo").length>0&&(b.discoveryResponses.add(b.model.get("discoveryResponseInfo")),b.discoveryResponses.sortBy="posDate",b.discoveryResponses.sort())},events:{"click #add-discovery-response":"add_discovery_response","click .discovery-response-edit":"edit_discovery_response","click .discovery-response-delete":"delete_discovery_response"},add_discovery_response:function(){if(this.model.isNew()||this.model.get("eventTypeChange")){var a=$(".FilesSubroEventTabsEventForm").data("view"),b=a.$el;b&&(Uit.SessionFlash.set("defaultTabActive",{tab:"#event-form-tab4",className:this.className,option:"#add-discovery-response"}),b.find("#save-event").trigger("click"))}else{var c=new App.Models.SubroDiscoveryResponse,d=new App.Views.Files.SubroEventTabs.Discovery.ResponseForm({model:c,collection:this.discoveryResponses,fileModel:this.options.fileModel,originModel:this.model}),e=new App.Helpers.Modal({view:d});e.show()}},edit_discovery_response:function(a){var b=$(a.currentTarget),c=this.discoveryResponses.get(b.data("model")),d=new App.Views.Files.SubroEventTabs.Discovery.ResponseForm({originModel:this.model,collection:this.discoveryResponses,fileModel:this.options.fileModel,model:c}),e=new App.Helpers.Modal({view:d});e.show()},delete_discovery_response:function(a){var b=$(a.currentTarget),c="Are you sure you want to delete this Discovery Response?",d=new App.Views.Shared.AlertView({processFunction:"process_delete_discovery_response",viewClass:"."+this.className,params:{elem:b},msg:c,title:"Delete Discovery Response"}),e=new App.Helpers.Modal({view:d});e.show()},process_delete_discovery_response:function(a){var b=this,c=a.elem.data("model"),d=b.discoveryResponses.get({cid:c});d.destroy({success:function(){var a=b.discoveryResponses.clone();b.discoveryResponses.reset(),b.discoveryResponses.add(a.toJSON()),b.discoveryResponses.sortBy="posDate",b.discoveryResponses.sort()}})}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.SubroEventTabs)&&(App.Views.Files.SubroEventTabs={}),App.Views.Files.SubroEventTabs.EventSubroEvidenceFirst=App.Helpers.View.extend({template:App.Templates.filesSubroEventTabsEventSubroEvidenceFirst,className:"FilesSubroEventTabsEventSubroEvidenceFirst",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.SubroEventTabs)&&(App.Views.Files.SubroEventTabs={}),App.Views.Files.SubroEventTabs.EventSubroHearingFirst=App.Helpers.View.extend({template:App.Templates.filesSubroEventTabsEventSubroHearingFirst,className:"FilesSubroEventTabsEventSubroHearingFirst",
initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.SubroEventTabs)&&(App.Views.Files.SubroEventTabs={}),App.Views.Files.SubroEventTabs.EventSubroPleadingFirst=App.Helpers.View.extend({template:App.Templates.filesSubroEventTabsEventSubroPleadingFirst,className:"FilesSubroEventTabsEventSubroPleadingFirst",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),_.isUndefined(App.Views.Files.SubroEventTabs)&&(App.Views.Files.SubroEventTabs={}),App.Views.Files.SubroEventTabs.ShowDependencies=App.Helpers.View.extend({template:App.Templates.filesSubroEventTabsShowDependencies,className:"FilesSubroEventTabsShowDependencies",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.milestones=new App.Helpers.Collection,this.billings=new App.Collections.Billings,this.documents=new App.Collections.Documents,this.colDiscoveryExtensionsInfo=new App.Collections.SubroDiscoveryExtensions,this.colDiscoveryResponsesInfo=new App.Collections.SubroDiscoveryResponses,this.listenTo(this.model,"request",function(){b.showLoader(".modal-body")}),this.listenTo(this.model,"sync error",function(){b.removeLoader(".modal-body")})},events:{"click #delete-event":"removeEvent","click .bill-delete":"removeBills","click .delete-document":"removeDocument","click .removeDiscoveryExtensions":"removeDiscoveryExtensions","click .removeDiscoveryResponses":"removeDiscoveryResponses"},afterRender:function(){var a=this;this.model.fetch({success:function(){a.prepopulateData()}})},removeEvent:function(){var a,b=this;this.model.destroy({success:function(){b.elementModal.modal("hide"),a=new App.Helpers.Toast({message:"Event Deleted",classType:"success",fadeOut:4e3}),a.render(),Object.values(App.Const.eventTypes).indexOf(b.model.get("eventTypeID"))>-1&&Uit.SessionFlash.set("fetch_file",!0),Backbone.history.navigate(b.options.fileModel.fileEventsUrl(),{trigger:!0})},error:function(b,c){a=new App.Helpers.Toast({message:c.responseJSON.error,classType:"danger",fadeOut:4e3}),a.render()}})},removeDocument:function(a){var b=this.$el,c=b.find(a.currentTarget),d=c.data("model"),e=this.documents.get(d);e.url="/api/documents_controller/remove_event_document/"+e.get("documentID")+"/"+this.model.get("eventID"),e.destroy({error:function(){var a=new App.Helpers.Toast({message:"Error Deleting this document",classType:"danger",fadeOut:4e3});a.render()}});var f=this.documents.toJSON(),g=$(".FilesSubroEventTabsEventDocument").data("view");this.model.set("documents",f),this.options.currentEvent.set("documents",f),g.options.colEventToDocuments.reset(f),this.prepopulateData()},removeDiscoveryExtensions:function(a){var b=this.$el,c=b.find(a.currentTarget),d=c.data("model"),e=this.colDiscoveryExtensionsInfo.get(d);e.destroy({success:function(){c.closest("tr").remove()},error:function(){var a=new App.Helpers.Toast({message:"Error Deleting Discovery Extension",classType:"danger",fadeOut:4e3});a.render()}});var f=this.colDiscoveryExtensionsInfo.toJSON(),g=$(".FilesSubroEventTabsEventSubroDiscoveryFirst").data("view");this.model.set("discoveryExtensionInfo",f),this.options.currentEvent.set("discoveryExtensionInfo",f),this.colDiscoveryExtensionsInfo.reset(f),g.discoveryExtensions.reset(f),g.discoveryExtensions.sortBy="dueDate",g.discoveryExtensions.sort(),this.prepopulateData()},removeDiscoveryResponses:function(a){var b=this.$el,c=b.find(a.currentTarget),d=c.data("model"),e=this.colDiscoveryResponsesInfo.get(d);e.destroy({success:function(){c.closest("tr").remove()},error:function(){var a=new App.Helpers.Toast({message:"Error Deleting Discovery Response",classType:"danger",fadeOut:4e3});a.render()}});var f=this.colDiscoveryResponsesInfo.toJSON(),g=$(".FilesSubroEventTabsEventSubroDiscoverySecond").data("view");this.model.set("discoveryResponseInfo",f),this.options.currentEvent.set("discoveryResponseInfo",f),g.discoveryResponses.reset(f),g.discoveryResponses.sortBy="posDate",g.discoveryResponses.sort(),this.prepopulateData()},removeBills:function(a){var b=this.$el,c=b.find(a.currentTarget),d=c.data("model"),e=this.billings.get(d);e.destroy({success:function(){c.closest("tr").remove()},error:function(){var a=new App.Helpers.Toast({message:"Error Deleting this Bill",classType:"danger",fadeOut:4e3});a.render()}});var f=this.billings.toJSON(),g=$(".FilesSubroEventTabsEventBilling").data("view");this.model.set("billings",f),this.options.currentEvent.set("billings",f),g.options.colBillings.reset(f),this.prepopulateData()},createHtmlInfo:function(a,b,c){var d="";return d+='<div class="form-group">',d+='<span class="col-sm-2">'+a+":</span>",d+='<div class="col-sm-'+c+' p-left-0">',d+='<span class="c-blue-link font-bold p-left-0" rv-each-row="milestones.models">',d+=b,d+="</span>",d+="</div>",d+="</div>"},createHtmlLists:function(a,b,c,d,e,f,g){var h='<div class="panel panel-casefreind">\n                            <div class="panel-heading" role="tab">\n                                <h4 class="panel-title">\n                                    <a class="accordion-toggle font-bold" role="button" data-toggle="collapse" data-parent="#accordion" href="#'+f+'" aria-expanded="false" aria-controls="'+f+'">\n                                        '+d+" ("+b.length+')\n                                    </a>\n                                </h4>\n                            </div>\n                            <div class="panel-body collapse in" id="'+f+'">\n                                <fieldset>\n                                    <table class="table liens-panels-max-size">\n                                        <thead>\n                                        <tr>\n                                            '+a.map(function(a){return"<th>"+a+"</th>"}).join("\n")+'\n                                            <th class="t-align-right m-right-30">Action</th>\n                                        </tr>\n                                        </thead>\n                                        <tbody>\n                                        '+b.models.map(function(a){return"<tr>\n                                            "+c.map(function(b){return"<td>"+(a.get(b)?a.get(b):"")+"</td>"}).join("\n")+'\n                                            <td class="t-align-right p-right-i-20">\n                                                <a class=\'m-right-5 '+e+"' href=\"javascript:void(0);\" data-model='"+a.cid+"' data-permission=\""+g+'">\n                                                    <i class="c-red fa fa-times"></i>\n                                                </a>\n                                            </td>\n                                        </tr>'}).join("\n")+'\n                                        </tbody>\n                                    </table>\n                                </fieldset>\n                            </div>\n                        </div>\n                        <div class="clearfix"></div>\n        ';return h},showDeletebilling:function(){return _.isUndefined(this.row.get("invoiceNumber"))||_.isNull(this.row.get("invoiceNumber"))?!0:!1},prepopulateData:function(){var a=this.$el,b=!0;if(this.model.get("childTable")){var c="",d="";"subro_discovery"===this.model.get("childTable")&&(this.model.get("discoveryExtensionInfo")&&this.model.get("discoveryExtensionInfo").length>0&&(b=!1,this.colDiscoveryExtensionsInfo.reset(this.model.get("discoveryExtensionInfo")),d+=this.createHtmlLists(["Extension Granted","Due Date","Note"],this.colDiscoveryExtensionsInfo,["extensionGranted","dueDate","note"],"Discovery Extensions","removeDiscoveryExtensions","discoveryExtensions","31")),this.model.get("discoveryResponseInfo")&&this.model.get("discoveryResponseInfo").length>0&&(b=!1,this.colDiscoveryResponsesInfo.reset(this.model.get("discoveryResponseInfo")),d+=this.createHtmlLists(["Adequate Response","POS Date","Note"],this.colDiscoveryResponsesInfo,["adequateResponse","posDate","note"],"Discovery Responses","removeDiscoveryResponses","discoveryResponses","31"))),a.find("#extended-data").html(c),a.find("#extended-lists").html(d)}this.milestones.add(this.model.get("milestones")),this.billings.reset(this.model.get("billings")),this.billings.length>0&&(b=!1),this.documents.reset(this.model.get("documents")),this.documents.length>0&&(b=!1),b&&App.loginModel.get("acl").findWhere({access_group_id:32})?a.find("#delete-event").show():a.find("#delete-event").hide()}}),_.isUndefined(App.Views.Files)&&(App.Views.Files={}),App.Views.Files.SubroFileEvents=App.Helpers.View.extend({template:App.Templates.filesSubroFileEvents,className:"FilesSubroFileEvents",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.PagesNumbers=new App.Helpers.Collection,this.filterUrlModel=new App.Helpers.Model(this.options.filterParams),this.currentPosition=0,this.evenTypeIDSerach="13",this.sortBy=this.filterUrlModel.has("orderBy")?this.filterUrlModel.get("orderBy"):"eventDate",this.sortDir=this.filterUrlModel.has("orderDirection")?this.filterUrlModel.get("orderDirection"):"DESC",this.listenTo(this.collection,"sync change",this.prepopulateData)},events:{"click .event-row":"editEventForm","click .events-sortable":"sortEvents","click .icon-typeahead-down":"showAllEntities","click #filter-btn":"filterButton","click #filter-btn-close":"filterButton","change #eventCategory":"getFilteredFileEvents","change #eventOffset":"getFilteredFileEvents","click .sequential-counter":"movePosition"},updateEventTypeIdSearch:function(a){var b=this.$el;b.find(".typeahead.event_typeahead").data("engine").remote.urlBuild.resource=a,b.find(".typeahead.event_type_typeahead").data("engine").remote.urlBuild.resource=a},afterRender:function(){var a=this.$el,b=this,c=".typeahead.event_typeahead",d=App.Helpers.initTypeahead({view:this,elemClass:c,urlBuild:{url:"api/typeahead_controller/search_events/"+this.options.fileModel.id,resource:this.evenTypeIDSerach},processFunction:$.proxy(this.processTypeaheadFilters,this)}),e=".typeahead.event_type_typeahead",f=App.Helpers.initTypeahead({view:this,elemClass:e,urlBuild:{url:"api/typeahead_controller/search_eventTypes",resource:this.evenTypeIDSerach},processFunction:$.proxy(this.processTypeaheadFilters,this)}),g=function(a){var c=$(a.currentTarget);if(""===c.val()){var d=c.attr("name");"eventTypeName"===d?b.resetEventType():"eventTitle"===d&&b.resetEventTitle()}};a.find(c).data("filter-id",0),a.find(e).data("filter-id",0),d.focusout(g),f.focusout(g),a.find("#filter-fileEvents-sticky").sticky({topSpacing:0}),a.find(".file-events-header-table").sticky({topSpacing:138});var h=$(".FilesDashboardSubro").data("view"),i=h.$el;i.find(".dashboard-titles").removeClass("active"),i.find("a.dashboard-timeline-all").closest(".dashboard-titles").addClass("active")},resetEventTitle:function(){this.filterEventID=void 0,this.filterUrlModel.unset("filterEventID"),this.filterUrlModel.unset("filterEventText"),this.getFilteredFileEvents(!1)},resetEventType:function(){this.filtereventTypeID=void 0,this.filterUrlModel.unset("filtereventTypeID"),this.filterUrlModel.unset("filtereventTypeText"),this.getFilteredFileEvents(!1)},filterButton:function(){var a=this.$el;a.find("#file-filters").slideToggle("fast"),a.find("#filter-btn").toggle(),a.find("#filter-btn-close").toggle()},_hideForwardButtons:function(){var a=this.$el;a.find("#load-files-next").hide(),a.find("#load-files-last").hide()},_hideBackButtons:function(){var a=this.$el;a.find("#load-files-prev").hide(),a.find("#load-files-first").hide()},_showForwardButtons:function(){var a=this.$el;a.find("#load-files-next").show(),a.find("#load-files-last").show()},_showBackButtons:function(){var a=this.$el;a.find("#load-files-prev").show(),a.find("#load-files-first").show()},sortEvents:function(a){var b=$(a.currentTarget),c=this.$el;this.sortBy=b.data("sort"),b.find(".fa-chevron-down").length||b.find(".fa-eye").length?this.sortDir="asc":this.sortDir="DESC",c.find("#events-heads .fa").remove(),b.append("asc"===this.sortDir?"read"===this.sortBy?'<i class="fa fa-eye-slash" aria-hidden="true"></i>':'<i class="fa fa-chevron-up"></i>':"read"===this.sortBy?'<i class="fa fa-eye" aria-hidden="true"></i>':'<i class="fa fa-chevron-down"></i>'),this.getFilteredFileEvents(!1)},editEventForm:function(a){var b=$(a.currentTarget);Backbone.history.navigate("subro_files/edit/"+this.options.fileModel.get("subroFileNumber")+"/events/edit/"+b.data("id"),{trigger:!0})},processTypeaheadFilters:function(a){var b=App.Helpers.handlerDisplayKey(a);_.isUndefined(a.eventTypeID)?_.isUndefined(a.eventID)||(this.filterEventID=a.eventID,this.filterUrlModel.set("filterEventID",this.filterEventID),this.filterUrlModel.set("filterEventText",b)):(this.filtereventTypeID=a.eventTypeID,this.filterUrlModel.set("filtereventTypeID",this.filtereventTypeID),this.filterUrlModel.set("filtereventTypeText",b)),this.getFilteredFileEvents(!0)},movePosition:function(a){var b=$(a.currentTarget);switch(b.attr("id")){case"load-files-first":$("#eventOffset option").first().next().prop("selected",!0).change();break;case"load-files-prev":$("#eventOffset option:selected").prev().length>0&&$("#eventOffset option:selected").prev().prop("selected",!0).change();break;case"load-files-next":$("#eventOffset option:selected").next().length>0&&$("#eventOffset option:selected").next().prop("selected",!0).change();break;case"load-files-last":$("#eventOffset option").last().prop("selected",!0).change()}},handlerUrlFilter:function(a){var b=_.first(Backbone.history.fragment.split("?")),c="#"+b,d=this.$el;a.eventOffsetIndex=d.find("#eventOffset").prop("selectedIndex"),this.filterUrlModel.has("filtereventTypeID")&&(a.filtereventTypeID=this.filterUrlModel.get("filtereventTypeID"),a.filtereventTypeText=this.filterUrlModel.get("filtereventTypeText")),this.filterUrlModel.has("filterEventID")&&(a.filterEventID=this.filterUrlModel.get("filterEventID"),a.filterEventText=this.filterUrlModel.get("filterEventText")),this.filterUrlModel.unset("fileNumber"),this.filterUrlModel.unset("orderBy"),this.filterUrlModel.unset("maxRows"),this.filterUrlModel.unset("etcID"),this.filterUrlModel.unset("orderDirection"),this.filterUrlModel.unset("eventOffset"),this.filterUrlModel.set(a),this.filterUrlModel.unset("eventTypeID"),this.filterUrlModel.unset("eventID"),_.size(this.filterUrlModel.toJSON())>0&&(c+="?"+$.param(this.filterUrlModel.toJSON())),Backbone.history.navigate(c,{trigger:!1})},handlerPrepareFilterParams:function(){var a=this.filterUrlModel.toJSON(),b=a,c=this.$el;this.evenTypeIDSerach=_.has(a,"etcID")?a.etcID:"13",this.updateEventTypeIdSearch(this.evenTypeIDSerach),b.filtereventTypeID&&(b.eventTypeID=this.filtereventTypeID=a.filtereventTypeID,c.find(".typeahead.event_type_typeahead").typeahead("val",a.filtereventTypeText),delete b.filtereventTypeID,delete b.filtereventTypeText),b.filterEventID&&(b.eventID=this.filterEventID=a.filterEventID,c.find(".typeahead.event_typeahead").typeahead("val",a.filterEventText),delete b.filterEventID,delete b.filterEventText),c.find(".file-events-table th.events-sortable i").remove();var d=c.find('.file-events-table th[data-sort="'+this.sortBy+'"]');return d.append("asc"===this.sortDir?"read"===this.sortBy?'<i class="fa fa-eye-slash" aria-hidden="true"></i>':'<i class="fa fa-chevron-up"></i>':"read"===this.sortBy?'<i class="fa fa-eye" aria-hidden="true"></i>':'<i class="fa fa-chevron-down"></i>'),b},prepopulateFilters:function(){var a=this.$el;a.find("#eventOffset option:eq("+this.filterUrlModel.get("eventOffsetIndex")+")").length>0&&a.find("#eventOffset").prop("selectedIndex",this.filterUrlModel.get("eventOffsetIndex")),-1!==a.find("#eventOffset option:selected").data("min")?(a.find("#show-offset").show(),a.find("#show-all").hide()):(a.find("#show-offset").hide(),a.find("#show-all").show()),this.calculateShowForwardBackButtons();var b=this.filterUrlModel.has("etcID")?this.filterUrlModel.get("etcID"):"13";a.find("#eventCategory").val(b)},getFilteredFileEvents:function(a){var b=this.$el,c=this,d={fileNumber:this.options.fileModel.id};this.showLoader(),d.orderBy=this.sortBy,d.orderDirection=this.sortDir,-1===b.find("#eventOffset option:selected").data("min")?d.maxRows=0:a!==!0&&"eventCategory"!==$(a.currentTarget).attr("id")?(d.maxRows=this.options.paginationConstant,d.eventOffset=b.find("#eventOffset option:selected").data("min")):(d.eventOffset=this.options.paginationConstant,"eventCategory"===$(a.currentTarget).attr("id")&&(d.maxRows=0,d.eventOffset=0)),"13"!==b.find("#eventCategory option:selected").val()?(d.etcID=b.find("#eventCategory option:selected").val(),this.evenTypeIDSerach=d.etcID):this.evenTypeIDSerach="13",this.updateEventTypeIdSearch(this.evenTypeIDSerach),_.isUndefined(this.filtereventTypeID)||(d.eventTypeID=this.filtereventTypeID),_.isUndefined(this.filterEventID)||(d.eventID=this.filterEventID),this.handlerUrlFilter(d),delete d.filterEventID,delete d.filterEventText,delete d.filtereventTypeID,delete d.filtereventTypeText,$.ajax({url:"/api/file_events_controller/get_events_pagination",data:d,success:function(a){c.totalRows=a[1],c.prepopulateData(),c.collection.reset(),c.collection.add(a[0]),c.collection.sortBy=c.sortBy,c.collection.sortOrder=c.sortDir,c.collection.sort(),c.removeLoader()}})},showAllEntities:function(a){App.Helpers.showAllEntities(a,this.$el)},set_pagination:function(){var a=this,b=this.$el,c=0,d=0,e=Math.ceil(this.totalRows/this.options.paginationConstant);this.prevTotalRows=this.totalRows,this.PagesNumbers.reset(),_.times(e,function(b){d=d+a.options.paginationConstant>a.totalRows?a.totalRows:d+a.options.paginationConstant,a.PagesNumbers.add({position:b,min:c,max:d}),c+=a.options.paginationConstant}),_.isUndefined(b)||b.find("#eventOffset option:eq(0)").prop("selected",!0)},calculateShowForwardBackButtons:function(){var a=this.$el;_.isUndefined(a)||(this.totalRows<this.options.paginationConstant?(this._hideForwardButtons(),this._hideBackButtons()):a.find("#eventOffset option:eq(0)").is(":selected")?(this._hideBackButtons(),this._hideForwardButtons()):a.find("#eventOffset option:eq(1)").is(":selected")?(this._hideBackButtons(),this._showForwardButtons()):a.find("#eventOffset option:last").is(":selected")?(this._hideForwardButtons(),this._showBackButtons()):(this._showBackButtons(),this._showForwardButtons()))},prepopulateData:function(){var a=this.$el;this.collection.sortBy=this.sortBy,this.collection.sortOrder=this.sortDir,this.collection.sort(),this.totalRows!==this.prevTotalRows&&this.set_pagination(),-1!==a.find("#eventOffset option:selected").data("min")?_.isUndefined(a)||(a.find("#show-offset").show(),a.find("#show-all").hide(),a.find("#from-offset").html($("#eventOffset option:selected").data("min")),a.find("#to-offset").html($("#eventOffset option:selected").data("max"))):(a.find("#show-offset").hide(),a.find("#show-all").show()),this.totalRows===!1&&(this.totalRows=0,_.isUndefined(a)||(a.find("#from-offset").html(0),a.find("#to-offset").html(0))),this.calculateShowForwardBackButtons()}}),_.isUndefined(App.Views.HelpEditor)&&(App.Views.HelpEditor={}),App.Views.HelpEditor.Form=App.Helpers.View.extend({template:App.Templates.helpEditorForm,className:"HelpEditorForm",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{"click #save-help":"saveHelp"},afterRender:function(){var a=this.$el;a.find("textarea").ckeditor()},saveHelp:function(a){a.preventDefault(),a.stopPropagation();var b=this.$el;if(b.find("#help-form").valid()){var c=this.$el.find("textarea").data("ckeditorInstance").getData();this.model.set("helpText",c),this.model.save()}}}),_.isUndefined(App.Views.HelpEditor)&&(App.Views.HelpEditor={}),App.Views.HelpEditor.Index=App.Helpers.View.extend({template:App.Templates.helpEditorIndex,className:"HelpEditorIndex",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{"click .helpRow":"editHelpRecord"},editHelpRecord:function(a){var b=$(a.currentTarget),c=b.attr("data-id"),d=this.collection.get(c),e=new App.Views.HelpEditor.Form({model:d}),f=new App.Helpers.Modal({view:e,sizeModal:"modal-lg"});f.show(),d.fetch()}}),_.isUndefined(App.Views.Macros)&&(App.Views.Macros={}),App.Views.Macros.MacrosForm=App.Helpers.View.extend({template:App.Templates.macrosMacrosForm,className:"macrosForm",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.fnSelectMacro=this.options.fnSelectMacro||function(){}},events:{"click .row-macro":"selectMacro"},selectMacro:function(a){var b=$(a.currentTarget).data("macro");this.fnSelectMacro(b)},afterRender:function(){this.filterMacros()},filterMacros:function(){var a=this;this.showLoader(),$.get("/api/macros_controller/get_macros/"+this.options.moduleID).success(function(b){a.macros=b,a.buildMacroBrowser()}).done(function(){a.removeLoader()})},buildMacroBrowser:function(){var a=this.$el,b=this;a.find(".non-data-macros").addClass("hidden"),a.find(".container-macros-tab").removeClass("hidden"),_.each(_.keys(this.macros),function(c){var d=a.find("#tabMacros .template-li").clone();d.removeClass("template-li hidden"),d.find("a").attr("href","#"+c),d.find("a").attr("aria-controls",c),d.find("a").attr("id",c+"-link"),d.find("a").html(c),a.find("#tabMacros").append(d);var e=a.find(".container-tab-pane .template-tab-pane").clone();e.removeClass("template-tab-pane hidden"),e.attr("id",c),_.each(_.keys(b.macros[c]),function(a){var d=b.macros[c][a],f=e.find(".template-table-tab-pane").clone();f.removeClass("template-table-tab-pane hidden");var g=f.find(".col-macro-group");g.html(a),_.each(_.keys(d),function(a){var b=f.find(".template-tr").clone();b.removeClass("template-tr hidden"),b.attr("data-macro",a),b.find("td:first-child").html(a),b.find("td:last-child").html(d[a]),f.find("tbody").append(b)}),e.append(f)}),a.find(".container-tab-pane").append(e)}),a.find("#tabMacros li:not(#tabMacros li.template-li)").eq(0).addClass("active"),a.find(".tab-pane:not(.template-tab-pane.tab-pane:first-child)").eq(0).addClass("active")}}),_.isUndefined(App.Views.Session)&&(App.Views.Session={}),App.Views.Session.ChangePassword=App.Helpers.View.extend({template:App.Templates.sessionChangePassword,className:"changePassword",events:{"click #change_password":"changePassword"},initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},afterRender:function(){var a=this.$el;a.find(".menu-container").html(App.Templates.sessionPartialLoginContainer()),a.find('[data-toggle="popover"]').popover({content:function(){var a=new App.Views.Users.PasswordInstructions;return a.render().el},title:"Password instruction"}).on("hidden.bs.popover",function(){App.Helpers.cleanView(a.find(".UsersPasswordInstructions").data("view"))})},changePassword:function(a){a.preventDefault(),a.stopPropagation();var b=this,c=this.$el.find("#change_password"),d=c.html();c.addClass("disabled"),c.html("Sending..."),this.model.save({},{success:function(a){var b=new App.Helpers.Toast({message:a.get("msg"),classType:"success"});b.render(),Backbone.history.navigate("session/login",{trigger:!0})},error:function e(a,f){if(""!==f.responseText){var g=f.responseJSON;if(!_.isUndefined(g.error)){var e=g.error,h=new App.Helpers.Toast({message:e});b.$el.find(".messages").html(h.render().el)}}c.removeClass("disabled"),c.html(d)}})}}),_.isUndefined(App.Views.Session)&&(App.Views.Session={}),App.Views.Session.ForgotPassword=App.Helpers.View.extend({className:"forgot_password",template:App.Templates.sessionForgotPassword,initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{"click .btn-forgot-password":"recover"},afterRender:function(){var a=this.$el;a.find(".menu-container").html(App.Templates.sessionPartialLoginContainer())},recover:function(a){a.preventDefault(),a.stopPropagation();var b=this,c=this.$el.find(".btn-forgot-password"),d=c.html(),e=this.$el.find("#login").val().trim();this.model.set("email",e.toLowerCase()),this.showLoader(),c.addClass("disabled"),c.html("Sending..."),this.model.save(null,{beforeSend:function(){b.clearErrors()},success:function(a){var b=new App.Helpers.Toast({message:a.get("msg"),classType:"success"});b.render(),Backbone.history.navigate("session/login",{trigger:!0})},error:function(){b.removeLoader(),c.removeClass("disabled"),c.html(d)}})}}),_.isUndefined(App.Views.Session)&&(App.Views.Session={}),App.Views.Session.Login=App.Helpers.View.extend({className:"login",template:App.Templates.sessionLogin,initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.options.siteKey=App.siteKey,this.options.captcha=!1},events:{"click #login-submit":"submit"},afterRender:function(){var a=this.$el;a.find(".menu-container").html(App.Templates.sessionPartialLoginContainer())},submit:function(a){a.preventDefault(),a.stopPropagation();var b=this,c=this.$el;if($(".form-login form").valid()){this.showLoader();var d=this.serialize();this.options.captcha&&_.extend(d,{gRecaptchaResponse:$(".g-recaptcha-response").val()}),d.submit=c.find("#login-submit").val(),d.email=d.email.toLowerCase(),this.model.save(d,{beforeSend:function(){b.clearErrors()},success:function(a){App.loginModel.storage()&&(App.loginModel.unset("password",{silent:!0}),sessionStorage.setItem("loginId",App.loginModel.get("id")),sessionStorage.setItem("email",App.loginModel.get("email")?App.loginModel.get("email"):""),sessionStorage.setItem("first",App.loginModel.get("first")?App.loginModel.get("first"):""),sessionStorage.setItem("middle",App.loginModel.get("middle")?App.loginModel.get("middle"):""),sessionStorage.setItem("last",App.loginModel.get("last")?App.loginModel.get("last"):""),sessionStorage.setItem("phone",App.loginModel.get("phone")?App.loginModel.get("phone"):""),sessionStorage.setItem("isDA",App.loginModel.get("isDA")),sessionStorage.setItem("isClientRep",App.loginModel.get("isClientRep")),sessionStorage.setItem("isHearingRep",App.loginModel.get("isHearingRep")),sessionStorage.setItem("popAlerts",App.loginModel.get("popAlerts")),sessionStorage.setItem("firm",App.loginModel.get("firm")),App.loginModel.get("settings")&&sessionStorage.setItem("settings",JSON.stringify(App.loginModel.get("settings"))),sessionStorage.setItem("acl",JSON.stringify(App.loginModel.get("acl"))));var b=new App.Collections.Access;b.add(JSON.parse(sessionStorage.getItem("acl"))),App.loginModel.set("acl",b);var c="";if(!a.get("isClientRep")||null!==App.loginModel.get("first")&&null!==App.loginModel.get("last")&&null!==App.loginModel.get("phone"))c=a.get("isClientRep")?"client_rep/files":"landing";else{c="mysettings";var d="Please, fill your required information before continue.",e=new App.Helpers.Toast({message:d,classType:"warning",fadeOut:1e4});e.render()}localStorage.setItem("currentSessionData",JSON.stringify(sessionStorage)),Backbone.history.navigate(c,{trigger:!0})},error:function(a,c){if(b.removeLoader(),""!==c.responseText){var d=c.responseJSON;d&&(d.captcha&&(b.options.captcha=!0,b.render()),d.recatcha&&window.grecaptcha.reset())}}},{wait:!0})}}}),_.isUndefined(App.Views.Session)&&(App.Views.Session={}),App.Views.Session.RegisterUser=App.Helpers.View.extend({className:"register_user",template:App.Templates.sessionRegisterUser,initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.options.siteKey=App.siteKey},events:{"click #register-user":"register","click .btn-back":"btnBack","click .action-resend-email":"resendEmail"},afterRender:function(){var a=this.$el;a.find(".menu-container").html(App.Templates.sessionPartialLoginContainer())},btnBack:function(a){a.preventDefault(),$(".pls-container").parent().remove(),Backbone.history.navigate("session/login",{trigger:!0})},resendEmail:function(a){a.preventDefault();var b=this.$el.find("#email").val(),c=new App.Views.Session.ResendEmail({email:b}),d=new App.Helpers.Modal({view:c,parentClassName:"register_user"});d.show()},register:function(a){a.preventDefault(),a.stopPropagation();var b=this,c=this.serialize();_.extend(c,{gRecaptchaResponse:$(".g-recaptcha-response").val()});var d=this.$el.find(".btn-register"),e=d.html();this.showLoader(),d.addClass("disabled"),d.html("Sending..."),c.email=c.email.toLowerCase(),this.model.save(c,{beforeSend:function(){b.clearErrors()},success:function(){var a="User was created successfully.\n Please check your email.",b=new App.Helpers.Toast({message:a,classType:"success"});b.render(),Backbone.history.navigate("session/login",{trigger:!0})},error:function f(a,c){if(b.removeLoader(),""!==c.responseText){var g=c.responseJSON;if(!_.isUndefined(g.error)){var f=g.error,h=new App.Helpers.Toast({message:f});b.$el.find(".message-captcha").html(h.render().el)}}d.html("Register"),d.removeClass("disabled"),d.html(e),window.grecaptcha.reset()}})}}),_.isUndefined(App.Views.Session)&&(App.Views.Session={}),App.Views.Session.ResendEmail=App.Helpers.View.extend({template:App.Templates.sessionResendEmail,className:"SessionResendEmail",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.email=this.options.email||""},events:{"submit .form-horizontal":"processResendEmail"},processResendEmail:function(a){a.preventDefault();var b=this,c=$(a.currentTarget),d=c.find("#email"),e=c.find(".submit-resend-activation-email"),f=e.text(),g=1e4,h=$.deparam(c.serialize());d.attr("disabled","disabled"),e.text("Sending..."),$.post("/api/authentication_controller_master/resend_email",JSON.stringify(h),{},"json").done(function(a){var c=a.msg||"Email sent successfully",d=a["class"]||"success",e=new App.Helpers.Toast({message:c,classType:d,fadeOut:g});e.render(),b.elementModal.modal("hide"),Backbone.history.navigate("session/login",{trigger:!0})}).fail(function(a){var b=a.responseJSON.msg||"There was an error trying to send the message",c=a.responseJSON["class"]||"danger",d=new App.Helpers.Toast({message:b,classType:c,fadeOut:g});d.render()}).always(function(){d.removeAttr("disabled"),e.text(f)})}}),_.isUndefined(App.Views.Settings)&&(App.Views.Settings={}),App.Views.Settings.EditEventType=App.Helpers.View.extend({template:App.Templates.settingsEditEventType,className:"editEventType",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.listenTo(this.model,"request",function(){b.showLoader()}),this.listenTo(this.model,"sync error",function(){b.removeLoader()})},events:{"click #save-eventType":"saveEventType","click #cancel-eventType":"cancelEventType"},afterRender:function(){},cancelEventType:function(a){a.preventDefault(),a.stopPropagation(),Backbone.history.navigate("eventTypesSettings",{trigger:!0})},saveEventType:function(a){a.preventDefault(),a.stopPropagation();var b=this.$el;b.find(".status").empty();var c=this.serialize();this.model.set(c);var d,e=!1;b.find("#event-type-edit-form").valid()&&(this.model.isNew()&&(e=!0),this.showLoader(),this.model.save({},{success:function(){e?(d=new App.Helpers.Toast({message:"New event type created successfully.",classType:"success",fadeOut:5e3}),d.render(),Backbone.history.navigate("eventTypesSettings",{trigger:!0})):(d=new App.Helpers.Toast({message:"Event Type updated successfully.",classType:"success",fadeOut:5e3}),d.render(),Backbone.history.navigate("eventTypesSettings",{trigger:!0}))},error:function f(a,b){if(401===b.status)d=new App.Helpers.Toast({message:b.responseJSON.error,classType:"warning",fadeOut:5e3}),d.render(),App.loginModel.logout();else{var f=b.responseJSON.msg||"Error while trying to save event type";d=new App.Helpers.Toast({message:f,classType:"warning",fadeOut:5e3}),d.render()}}}))}}),_.isUndefined(App.Views.Settings)&&(App.Views.Settings={}),_.isUndefined(App.Views.Settings.EventTypes)&&(App.Views.Settings.EventTypes={}),App.Views.Settings.EventTypes.EventCategoriesForm=App.Helpers.View.extend({template:App.Templates.settingsEventTypesEventCategoriesForm,className:"SettingsEventTypesEventCategoriesForm",initialize:function(a){
App.Helpers.View.prototype.initialize.apply(this,[a]),this.eventCategoryModel=this.model.clone()},events:{"click #save-eventCategory":"saveEventCategory"},saveEventCategory:function(){if(this.$el.find("form").valid())if(this.eventCategoryModel.isNew())this.processSaveEventCategory();else{var a=" If you edit this Event Category it will affect all Event using this Event Category",b=new App.Views.Shared.AlertView({processFunction:"processSaveEventCategory",viewClass:".SettingsEventTypesEventCategoriesForm",msg:a,title:"Warning"}),c=new App.Helpers.Modal({view:b});c.show()}},processSaveEventCategory:function(){var a=void 0,b=this,c=this.model.isNew();this.model.clear(),this.model.set(this.eventCategoryModel.attributes),this.model.save({},{success:function(d){c&&b.options.collection.add(d);var e=b.options.collection.clone(),f=$(".SettingsEventTypesEventTypesForm").data("view");b.options.collection.reset(e.toJSON()),b.options.collection.sortBy="etcName",b.options.collection.sortOrder="asc",b.options.collection.sort(),f.eventTypeModel.set("default_etc",b.model.get("etcID")),f.eventTypeModel.set("moduleID",b.model.get("moduleID")),f.updateCategories(),f.$el.find("#category").val(b.model.get("etcID")),b.elementModal.modal("hide"),a=new App.Helpers.Toast({message:"Event Category Created Successfully.",classType:"success",fadeOut:5e3}),a.render()},error:function(b,c){a=new App.Helpers.Toast({message:c.responseJSON.error,classType:"danger",fadeOut:5e3}),a.render()}})}}),_.isUndefined(App.Views.Settings)&&(App.Views.Settings={}),_.isUndefined(App.Views.Settings.EventTypes)&&(App.Views.Settings.EventTypes={}),App.Views.Settings.EventTypes.EventTypesForm=App.Helpers.View.extend({template:App.Templates.settingsEventTypesEventTypesForm,className:"SettingsEventTypesEventTypesForm",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.eventTypeModel=this.model.clone(),this.eventTypeModel.isNew()||(this.eventTypeModel.set("old_etc",this.eventTypeModel.get("default_etc")),this._checkIsErasable()),this.eventTypeModel.get("childTable")?this.eventTypeModel.set("hasChildTable",!0):this.eventTypeModel.set("hasChildTable",!1),this.cloneCategoriesCol=this.options.colEventTypesCategories.clone(),this.cloneChildTableCol=this.options.childTableCol.clone()},events:{"click #save-eventType":"saveEventType","change #module":"moduleChange","click #edit-category":"editCategory","click #new-category":"newCategory","click #delete-eventType":"deleteEventType"},afterRender:function(){this.moduleChange(),this.$el.find('[data-toggle="popover"]').popover({container:"body"})},moduleChange:function(){if(this.eventTypeModel.get("moduleID")){var a=this.options.colEventTypesCategories.where({moduleID:parseInt(this.eventTypeModel.get("moduleID"))});this.cloneCategoriesCol.reset(a);var b=this.options.childTableCol.where({moduleID:parseInt(this.eventTypeModel.get("moduleID"))});this.cloneChildTableCol.reset(b)}},editCategory:function(){var a=this.eventTypeModel.get("default_etc"),b=this.cloneCategoriesCol.get({id:a}),c=new App.Views.Settings.EventTypes.EventCategoriesForm({model:b,collection:this.options.colEventTypesCategories,colModules:this.options.colModules}),d=new App.Helpers.Modal({view:c,sizeModal:"modal-lg"});d.show()},newCategory:function(){var a=new App.Models.EventCategory,b=new App.Views.Settings.EventTypes.EventCategoriesForm({model:a,collection:this.options.colEventTypesCategories,colModules:this.options.colModules}),c=new App.Helpers.Modal({view:b,sizeModal:"modal-lg"});c.show()},saveEventType:function(){if(this.$el.find("form").valid())if(this.eventTypeModel.isNew())this.processSaveEventType();else{var a=" If you edit this event type it will affect all events using it.",b=new App.Views.Shared.AlertView({processFunction:"processSaveEventType",viewClass:".SettingsEventTypesEventTypesForm",msg:a,title:"Warning"}),c=new App.Helpers.Modal({view:b});c.show()}},processSaveEventType:function(){var a=void 0,b=this,c=this.model.isNew();this.model.clear(),this.eventTypeModel.set("childTable",this.eventTypeModel.get("hasChildTable")?this.eventTypeModel.get("childTable"):null),this.model.set(this.eventTypeModel.attributes),this.model.save({},{success:function(d){c&&b.options.collection.add(d);var e=b.options.collection.clone();b.options.collection.reset(e.toJSON()),b.options.collection.sortBy="eventTypeName",b.options.collection.sortOrder="asc",b.options.collection.sort(),b.elementModal.modal("hide"),a=new App.Helpers.Toast({message:"Event Type Created Successfully.",classType:"success",fadeOut:5e3}),a.render()},error:function(){a=new App.Helpers.Toast({message:"Error saving this event type",classType:"danger",fadeOut:5e3}),a.render()}})},deleteEventType:function(){var a="Are you sure you want to delete the Event Type ?",b=new App.Views.Shared.AlertView({processFunction:"processDeleteEventType",viewClass:".SettingsEventTypesEventTypesForm",msg:a,title:"Delete Event Type"}),c=new App.Helpers.Modal({view:b});c.show()},processDeleteEventType:function(){var a=this;this.model.destroy({success:function(){var b=a.collection.clone();a.collection.reset(),a.collection.add(b.toJSON()),a.collection.sortBy="eventTypeName",a.collection.sortOrder="asc",a.collection.sort(),a.elementModal.modal("hide")},error:function(a,b){var c=new App.Helpers.Toast({message:b.responseJSON.error,classType:"danger",fadeOut:5e3});c.render()}})},checkCategoryEditable:function(){var a=this.options.colEventTypesCategories.findWhere({etcID:parseInt(this.eventTypeModel.get("default_etc"))});return a?a.get("lockedType"):0},eventTypeLockType:function(){return 1!==this.eventTypeModel.get("lockedType")||this.eventTypeModel.isNew()?!1:!0},_checkIsErasable:function(){var a=this;$.ajax({url:"/api/event_types_controller/is_erasable/"+this.eventTypeModel.get("eventTypeID"),success:function(b){a.eventTypeModel.set("isErasable",b)},error:function(){a.eventTypeModel.set("isErasable",!1)}})},isErasable:function(){return!this.eventTypeModel.isNew()&&1!==parseInt(this.eventTypeModel.get("lockedType"))&&this.eventTypeModel.get("isErasable")?!0:!1}}),_.isUndefined(App.Views.Settings)&&(App.Views.Settings={}),_.isUndefined(App.Views.Settings.EventTypes)&&(App.Views.Settings.EventTypes={}),App.Views.Settings.EventTypes.Index=App.Helpers.View.extend({template:App.Templates.settingsEventTypesIndex,className:"SettingsEventTypesIndex",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.PagesNumbers=new App.Helpers.Collection,this.childTableCol=new App.Helpers.Collection,this.currentPosition=0,this.eventCategoryID=-1,this.sortBy="eventTypeName",this.sortDir="asc",this.listenTo(this.collection,"sync change",this.prepopulateData)},events:{"click #add-new":"newEventType","click .event-type-row":"editEventType","click .events-sortable":"sortEventTypes","click .icon-typeahead-down":"showAllEntities","click #filter-btn":"filterButton","click #filter-btn-close":"filterButton","change #eventCategory":"getFilteredFileEvents","change #eventOffset":"getFilteredFileEvents","change #module":"getFilteredFileEvents","click .sequential-counter":"movePosition"},updateEventTypeIdSearch:function(a){var b=this.$el;b.find(".typeahead.event_type_typeahead").data("engine").remote.urlBuild.resource=a},afterRender:function(){var a=this,b=App.Helpers.initTypeahead({view:this,elemClass:".event_type_typeahead",urlBuild:{url:"api/typeahead_controller/search_eventTypes",resource:this.eventCategoryID},processFunction:$.proxy(this.processTypeaheadFilters,this)}),c=function(b){var c=$(b.currentTarget);if(""===c.val()){var d=c.attr("name");"eventTypeName"===d&&a.resetEventType()}};b.focusout(c)},resetEventType:function(){this.filtereventTypeID=void 0,this.getFilteredFileEvents(!1)},filterButton:function(){var a=this.$el;a.find("#file-filters").slideToggle("fast"),a.find("#filter-btn").toggle(),a.find("#filter-btn-close").toggle()},_hideForwardButtons:function(){var a=this.$el;a.find("#load-files-next").hide(),a.find("#load-files-last").hide()},_hideBackButtons:function(){var a=this.$el;a.find("#load-files-prev").hide(),a.find("#load-files-first").hide()},_showForwardButtons:function(){var a=this.$el;a.find("#load-files-next").show(),a.find("#load-files-last").show()},_showBackButtons:function(){var a=this.$el;a.find("#load-files-prev").show(),a.find("#load-files-first").show()},sortEventTypes:function(a){var b=$(a.currentTarget),c=this.$el,d=b.data("sort").split(".");this.sortBy=d[1],b.find(".fa-chevron-down").length?this.sortDir="asc":this.sortDir="DESC",c.find("#events-heads .fa").remove(),b.append("asc"===this.sortDir?'<i class="fa fa-chevron-up"></i>':'<i class="fa fa-chevron-down"></i>'),this.getFilteredFileEvents(!1)},editEventType:function(a){var b=$(a.currentTarget),c=b.data("id"),d=this.collection.get({id:c}),e=new App.Views.Settings.EventTypes.EventTypesForm({model:d,collection:this.collection,colEventTypesCategories:this.options.colEventTypesCategories,colModules:this.options.colModules,childTableCol:this.childTableCol}),f=new App.Helpers.Modal({view:e,sizeModal:"modal-lg"});f.show()},newEventType:function(){var a=new App.Models.EventType,b=new App.Views.Settings.EventTypes.EventTypesForm({model:a,collection:this.collection,colEventTypesCategories:this.options.colEventTypesCategories,colModules:this.options.colModules,childTableCol:this.childTableCol}),c=new App.Helpers.Modal({view:b,sizeModal:"modal-lg"});c.show()},processTypeaheadFilters:function(a){_.isUndefined(a.eventTypeID)||(this.filtereventTypeID=a.eventTypeID),this.getFilteredFileEvents(!0)},movePosition:function(a){var b=$(a.currentTarget);switch(b.attr("id")){case"load-files-first":$("#eventOffset option").first().next().prop("selected",!0).change();break;case"load-files-prev":$("#eventOffset option:selected").prev().length>0&&$("#eventOffset option:selected").prev().prop("selected",!0).change();break;case"load-files-next":$("#eventOffset option:selected").next().length>0&&$("#eventOffset option:selected").next().prop("selected",!0).change();break;case"load-files-last":$("#eventOffset option").last().prop("selected",!0).change()}},prepopulateFilters:function(){var a=this.$el;a.find("#eventOffset option:eq("+this.filterUrlModel.get("eventOffsetIndex")+")").length>0&&a.find("#eventOffset").prop("selectedIndex",this.filterUrlModel.get("eventOffsetIndex")),-1!==a.find("#eventOffset option:selected").data("min")?(a.find("#show-offset").show(),a.find("#show-all").hide()):(a.find("#show-offset").hide(),a.find("#show-all").show()),this.calculateShowForwardBackButtons();var b="-1";a.find("#eventCategory").val(b)},getFilteredFileEvents:function(a){var b=this.$el,c=this,d={};this.showLoader(),d.orderBy=this.sortBy,d.orderDirection=this.sortDir,-1===b.find("#eventOffset option:selected").data("min")?d.maxRows=0:a!==!0&&"eventCategory"!==$(a.currentTarget).attr("id")?(d.maxRows=this.options.paginationConstant,d.eventOffset=b.find("#eventOffset option:selected").data("min")):(d.eventOffset=this.options.paginationConstant,"eventCategory"===$(a.currentTarget).attr("id")&&(d.maxRows=0,d.eventOffset=0)),"-1"!==b.find("#eventCategory option:selected").val()?(d.etcID=b.find("#eventCategory option:selected").val(),this.eventCategoryID=d.etcID):this.eventCategoryID="-1",this.updateEventTypeIdSearch(this.eventCategoryID),_.isUndefined(this.filtereventTypeID)||(d.eventTypeID=this.filtereventTypeID),"-1"!==b.find("#module option:selected").val()?d.moduleID=b.find("#module option:selected").val():this.eventCategoryID="-1",delete d.filtereventTypeID,delete d.filtereventTypeText,$.ajax({url:"/api/event_types_controller/get_events_types_pagination",data:d,success:function(a){c.totalRows=a[1],c.prepopulateData(),c.collection.reset(),c.collection.add(a[0]),c.collection.sortBy=c.sortBy,c.collection.sortOrder=c.sortDir,c.collection.sort(),c.childTableCol.reset(a[2]),c.childTableCol.sortBy="childTable",c.childTableCol.sort(),c.removeLoader()}})},showAllEntities:function(a){App.Helpers.showAllEntities(a,this.$el)},set_pagination:function(){var a=this,b=this.$el,c=0,d=0,e=Math.ceil(this.totalRows/this.options.paginationConstant);this.prevTotalRows=this.totalRows,this.PagesNumbers.reset(),_.times(e,function(b){d=d+a.options.paginationConstant>a.totalRows?a.totalRows:d+a.options.paginationConstant,a.PagesNumbers.add({position:b,min:c,max:d}),c+=a.options.paginationConstant}),_.isUndefined(b)||b.find("#eventOffset option:eq(0)").prop("selected",!0)},calculateShowForwardBackButtons:function(){var a=this.$el;_.isUndefined(a)||(this.totalRows<this.options.paginationConstant?(this._hideForwardButtons(),this._hideBackButtons()):a.find("#eventOffset option:eq(0)").is(":selected")?(this._hideBackButtons(),this._hideForwardButtons()):a.find("#eventOffset option:eq(1)").is(":selected")?(this._hideBackButtons(),this._showForwardButtons()):a.find("#eventOffset option:last").is(":selected")?(this._hideForwardButtons(),this._showBackButtons()):(this._showBackButtons(),this._showForwardButtons()))},prepopulateData:function(){var a=this.$el;this.totalRows!==this.prevTotalRows&&this.set_pagination(),-1!==a.find("#eventOffset option:selected").data("min")?_.isUndefined(a)||(a.find("#show-offset").show(),a.find("#show-all").hide(),a.find("#from-offset").html($("#eventOffset option:selected").data("min")),a.find("#to-offset").html($("#eventOffset option:selected").data("max"))):(a.find("#show-offset").hide(),a.find("#show-all").show()),this.totalRows===!1&&(this.totalRows=0,_.isUndefined(a)||(a.find("#from-offset").html(0),a.find("#to-offset").html(0))),this.calculateShowForwardBackButtons()}}),_.isUndefined(App.Views.Settings)&&(App.Views.Settings={}),App.Views.Settings.EventTypes=App.Helpers.View.extend({template:App.Templates.settingsEventTypesSettings,className:"eventTypes",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.listenTo(this.collection,"sync error",function(){b.removeLoader()})},afterRender:function(){this.showLoader()},events:{"click .eventTypeID":"goToEventTypeId","click #add-new":"createNewEventType","click .user-sortBy":"sortList"},sortList:function(a){var b=$(a.currentTarget),c=b.data("sortby");this.collection.sortBy===c&&("asc"===this.collection.sortOrder?this.collection.sortOrder="desc":this.collection.sortOrder="asc"),this.collection.sortBy=c,this.collection.sort()},createNewEventType:function(){Backbone.history.navigate("#eventTypesSettings/new",{trigger:!0})},goToEventTypeId:function(a){var b=$(a.currentTarget),c=b.data("id");App.loginModel.hasAccess(6)&&Backbone.history.navigate("#eventTypesSettings/edit/"+c,{trigger:!0})}}),_.isUndefined(App.Views.Settings)&&(App.Views.Settings={}),_.isUndefined(App.Views.Settings.Hotwords)&&(App.Views.Settings.Hotwords={}),App.Views.Settings.Hotwords.Index=App.Helpers.View.extend({template:App.Templates.settingsHotwordsIndex,className:"SettingsHotwordsIndex",initialize:function(a){var b=this;App.Helpers.View.prototype.initialize.apply(this,[a]),this.listenTo(this.collection,"request",function(){b.showLoader()}),this.listenTo(this.collection,"sync",function(){b.removeLoader()}),this.listenTo(this.collection,"sync error",function(){this.removeLoader()})},events:{"keypress .hotword-text":"submitHotWord","click .saveHotWord":"saveHotWords","click .hideNewHotwordForm":"hideNewHotwordForm","click .newHotWord":"newHotWord","click .removeHotWord":"promtRemoveWord"},newHotWord:function(a){a.preventDefault(),this.$el.find("#new-hotword").removeClass("hidden")},hideNewHotwordForm:function(a){a.preventDefault(),this.$el.find("#new-hotword").addClass("hidden")},submitHotWord:function(a){13===a.which&&this.saveHotWords(a)},saveHotWords:function(a){a.preventDefault();var b=this,c=$(a.currentTarget),d=new App.Models.Hotword,e=c.parents("tr"),f=e.find(".hotword-text").val(),g=e.data("hotword-id");if(""===f){var h=new App.Helpers.Toast({message:"You should enter a valid word.",classType:"danger",fadeOut:5e3});return h.render(),!1}b.showLoader(),d.set("word",f),_.isUndefined(g)||d.set("hotwordID",g),d.save({},{success:function(a,c){b.collection.sortBy="hotwordID",b.collection.sort(),b.collection.add(c),b.collection.sortBy="word",b.collection.sort(),b.$el.find("#new-hotword").find(".hotword-text").val("");var d=c.msg||"The word was saved successfully.",e=new App.Helpers.Toast({message:d,classType:"success",fadeOut:5e3});e.render()},error:function(a,b){var c=b.responseJSON.msg||"There was an error trying to save the word.",d=new App.Helpers.Toast({message:c,classType:"danger",fadeOut:5e3});d.render()},complete:function(){b.removeLoader(),b.$el.find("#new-hotword").addClass("hidden")}})},promtRemoveWord:function(a){a.preventDefault();var b=$(a.currentTarget),c=new App.Views.Shared.AlertView({processFunction:"processRemoveHotWord",viewClass:".SettingsHotwordsIndex",params:{el:b},msg:"Are you sure you want to remove this word?",title:"Remove Word"}),d=new App.Helpers.Modal({view:c,parentClassName:this.options.parentClassName});d.show()},processRemoveHotWord:function(a){var b=this,c=a.el,d=c.parents("tr"),e=new App.Models.Hotword,f=d.data("hotword-id");e.set("hotwordID",f),e.destroy({wait:!0,success:function(a,c){var e=c.msg||"The word was removed successfully.",f=new App.Helpers.Toast({message:e,classType:"success",fadeOut:5e3});f.render(),d.addClass("bg-warning").css({position:"absolute",width:"80%",opacity:"0.8"}).animate({left:"-100%"},500,function(){b.collection.remove(a);var c=b.collection.models;b.collection.reset(c)})},done:function(){b.removeLoader()}})}}),_.isUndefined(App.Views.Settings)&&(App.Views.Settings={}),_.isUndefined(App.Views.Settings.Letters)&&(App.Views.Settings.Letters={}),App.Views.Settings.Letters.Index=App.Helpers.View.extend({template:App.Templates.settingsLettersIndex,className:"letters",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.listenTo(this.collection,"request",function(){this.showLoader(".container")}),this.listenTo(this.collection,"sync error",function(){this.removeLoader(".container")})},events:{"click .btnEditLetter":"editLetter","click .btn-downloadPDF":"downloadPDF"},editLetter:function(a){var b=$(a.currentTarget);Backbone.history.navigate("letters/edit/"+b.data("id"),{trigger:!0})},downloadPDF:function(a){var b=$(a.currentTarget),c=$('<form target="_blank" action="api/letters_controller/create_letter_template" method="post"></form>'),d=$('<input type="hidden" name="letterTemplateID" />'),e=$('<input type="hidden" name="htmlBody" />'),f=$('<input type="hidden" name="customSyleCss" />'),g=$('<input type="hidden" name="htmlHeader" />'),h=$('<input type="hidden" name="htmlFooter" />'),i=$('<input type="hidden" name="'+$.cookie("token_name")+'" value="'+$.cookie("cf_csrf_cookie")+'" />'),j=this.collection.get(b.data("id"));d.val(j.get("letterTemplateID")),e.val(j.get("content")),f.val(j.get("style_css")),g.val(j.get("header")),h.val(j.get("footer")),c.append(d),c.append(e),c.append(f),c.append(g),c.append(h),c.append(i),$("body").append(c),c.submit()}}),_.isUndefined(App.Views.Settings)&&(App.Views.Settings={}),_.isUndefined(App.Views.Settings.Letters)&&(App.Views.Settings.Letters={}),App.Views.Settings.Letters.LetterForm=App.Helpers.View.extend({template:App.Templates.settingsLettersLetterForm,className:"letterForm",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.colClientsAll=new App.Collections.Clients,this.colEventTypesAll=new App.Collections.EventTypes,this.colClientsSelected=new App.Collections.Clients,this.colEventTypesSelected=new App.Collections.EventTypes,this.colMacros=new App.Collections.Macros,this.colModules=new App.Collections.Modules,this.colModules.fetch(),this.listenTo(this.model,"request",function(){this.showLoader(".container")}),this.listenTo(this.model,"sync",function(a,b){var c=b.eventTypes||[],d=b.clients||[];this.colEventTypesAll.reset(c),this.colClientsAll.reset(d),this._setMacros(b.letter.moduleID),_.has(b,"letter")&&(this.colClientsSelected.reset(b.letter.clients||[]),this.colEventTypesSelected.reset(b.letter.eventTypes||[])),this.removeLoader(".container"),this.updateAllEditor()}),this.listenTo(this.model,"error",function(){this.removeLoader(".container")}),this.macros=[]},events:{"click .btn-save":"saveLetter","click .btn-delete":"deleteLetter","click .btn-moveLeft":"moveLeft","click .btn-moveRight":"moveRight","click [name=isClientSpecific]":"handlerSelectClients","click .btn-createPdf":"createPdf","click .btnStyleCss":"toggleStyleCss","click .btnHeader":"toggleHeader","click .btnFooter":"toggleFooter","change #moduleID":"setMacros"},toggleStyleCss:function(){this.$el.find(".panel-style").toggle()},toggleHeader:function(){this.$el.find(".panel-header").toggle()},toggleFooter:function(){this.$el.find(".panel-Footer").toggle()},saveLetter:function(){var a=this.$el.find(".containerLetterBody").data("ckeditorInstance").getData(),b=this.$el.find(".containerLetterHeader").data("ckeditorInstance").getData(),c=this.$el.find(".containerLetterFooter").data("ckeditorInstance").getData(),d=this.model.isNew();this.model.set({clients:this.colClientsSelected.toJSON(),eventTypes:this.colEventTypesSelected.toJSON(),content:a,header:b,footer:c}),this.model.save({},{success:function(a){var b;b=new App.Helpers.Toast({message:d?"Letter created successfully!":"Letter updated successfully!",classType:"success",fadeOut:5e3}),d&&Backbone.history.navigate("letters/edit/"+a.get("letterTemplateID"),{trigger:!0}),b.render()}})},updateAllEditor:function(){this.$el.find(".containerLetterBody").data("ckeditorInstance").setData(this.model.get("content")),this.$el.find(".containerLetterHeader").data("ckeditorInstance").setData(this.model.get("header")),this.$el.find(".containerLetterFooter").data("ckeditorInstance").setData(this.model.get("footer"))},beforeRender:function(){this._destroyEditor()},afterRender:function(){this.config={toolbar:[{name:"document",items:["Source"]},{name:"clipboard",items:["Cut","Copy","Paste","PasteText","PasteFromWord","-","Undo","Redo"]},{name:"editing",items:["Find","Replace","-","SelectAll"]},{name:"basicstyles",items:["Bold","Italic","Underline","Strike","-","RemoveFormat"]},{name:"paragraph",items:["NumberedList","BulletedList","-","Outdent","Indent","-","JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"]},{name:"insert",items:["Image","Table","HorizontalRule","PageBreak"]},"/",{name:"styles",items:["Styles","Format","Font","FontSize","lineheight"]},{name:"colors",items:["TextColor","BGColor"]},{name:"macros",items:["btnMacro"]},{name:"tools",items:["ShowBlocks","Maximize"]}],extraPlugins:"macros,lineheight,tableresize",basicEntities:!1,autoParagraph:!1,allowedContent:!0,resize_enabled:!0,extraAllowedContent:"pageheader",stylesSet:"cs_styles_ckeditor",contentsCss:"div{margin: 0px;}p{margin: 0px;}.editable{background-color: #e5ffef;}.editWarning{background-color: #fff9d1;}.centerText{text-align: center;}",line_height:"normal;1.0;1.1;1.2;1.25;1.5;2.15;2.5;3",fontSize_sizes:"8/10px;9/12px;10/13px;11/14px;12/16px;13/17px;14/18px;18/24px",width:816},this._initEditorHeader(),this._initEditorBody(),this._initEditorFooter();var a=this;this.model.isNew()&&(this.showLoader(".container"),$.get("/api/letters_controller/new_letter").done(function(b){var c=b.eventTypes||[],d=b.clients||[];a.colEventTypesAll.reset(c),a.colClientsAll.reset(d),a.removeLoader(".container"),a._setMacros(App.Const.wcFileModule)}).error(function(){a.removeLoader(".container")}),this.model.set("style_css",'<style type="text/css">\n@page {\n	header: html_header;\n	footer: html_footer;\n	margin-top: 2cm;\n	margin-bottom: 2cm;\n}\n</style>'))},updateMacros:function(){var a=this._clearMacros(this.colMacros.toJSON()[0]);this.$el.find(".containerLetterHeader").data("ckeditorInstance").config.macros=a,this.$el.find(".containerLetterBody").data("ckeditorInstance").config.macros=a,this.$el.find(".containerLetterFooter").data("ckeditorInstance").config.macros=a},onClose:function(){this._destroyEditor()},_destroyEditor:function(){for(var a in CKEDITOR.instances)CKEDITOR.instances[a].destroy(!0)},_initEditorHeader:function(){var a=_.clone(this.config),b=this;_.extend(a,{height:120}),this.$el.find(".containerLetterHeader").ckeditor(a),this.$el.find(".containerLetterHeader").data("ckeditorInstance").on("instanceReady",function(a){this.dataProcessor.writer.selfClosingEnd=">";var c=CKEDITOR.dtd;for(var d in CKEDITOR.tools.extend({},c.$nonBodyContent,c.$block,c.$listItem,c.$tableContent))this.dataProcessor.writer.setRules(d,{indent:!0,breakBeforeOpen:!0,breakAfterOpen:!0,breakBeforeClose:!0,breakAfterClose:!0});a.editor.setData(b.model.get("header"))})},_initEditorFooter:function(){var a=_.clone(this.config),b=this;_.extend(a,{height:120}),this.$el.find(".containerLetterFooter").ckeditor(a),this.$el.find(".containerLetterFooter").data("ckeditorInstance").on("instanceReady",function(a){this.dataProcessor.writer.selfClosingEnd=">";var c=CKEDITOR.dtd;for(var d in CKEDITOR.tools.extend({},c.$nonBodyContent,c.$block,c.$listItem,c.$tableContent))this.dataProcessor.writer.setRules(d,{indent:!0,breakBeforeOpen:!0,breakAfterOpen:!0,breakBeforeClose:!0,breakAfterClose:!0});if(b.model.isNew()){var e='<div style="text-align:center">Page {PAGENO}/{nbpg}</div>';a.editor.setData(e)}else a.editor.setData(b.model.get("footer"))})},_initEditorBody:function(){var a=_.clone(this.config),b=this;_.extend(a,{height:500}),this.$el.find(".containerLetterBody").ckeditor(a),this.$el.find(".containerLetterBody").data("ckeditorInstance").on("instanceReady",function(a){this.dataProcessor.writer.selfClosingEnd=">";var c=CKEDITOR.dtd;for(var d in CKEDITOR.tools.extend({},c.$nonBodyContent,c.$block,c.$listItem,c.$tableContent))this.dataProcessor.writer.setRules(d,{indent:!0,breakBeforeOpen:!0,breakAfterOpen:!0,breakBeforeClose:!0,breakAfterClose:!0});a.editor.setData(b.model.get("content"))})},deleteLetter:function(){var a="Are you sure to delete this letter?",b=new App.Views.Shared.AlertView({processFunction:"processDeleteLetter",viewClass:".letterForm",msg:a,title:"Delete Letter"}),c=new App.Helpers.Modal({view:b});c.show()},processDeleteLetter:function(){this.model.destroy({success:function(){var a=new App.Helpers.Toast({message:"Letter deleted successfully!",classType:"success",fadeOut:5e3});a.render(),Backbone.history.navigate("letters",{trigger:!0})}})},_getIDs:function(a){var b=[];return this.$el.find("[name="+a+"] :selected").each(function(){var a=Math.floor($(this).val());b.push(a)}),b},moveLeft:function(a){var b=this.$el,c=$(a.currentTarget),d=c.data("select-right"),e=this[c.data("collection-right")],f=this[c.data("collection-left")],g=[],h=this.$el.find("[name="+d+"] :selected").length;if(0!==h){if(e.length===h){var i=e.toJSON();i=_.union(i,f.toJSON()),f.reset(i),e.reset([])}else{if(g=this._getIDs(d),0===g.length)return;_.each(g,function(a){var b=e.get(a);f.add(b.toJSON()),e.remove(b)})}b.find("[name="+c.data("select-right")+"] :selected").prop("selected",!1),b.find("[name="+c.data("select-left")+"] :selected").prop("selected",!1)}},moveRight:function(a){var b=this.$el,c=$(a.currentTarget),d=c.data("select-left"),e=this[c.data("collection-right")],f=this[c.data("collection-left")],g=[],h=this.$el.find("[name="+d+"] :selected").length;if(0!==h){if(f.length===h){var i=f.toJSON();i=_.union(i,e.toJSON()),e.reset(i),f.reset([])}else{if(g=this._getIDs(d),0===g.length)return;_.each(g,function(a){var b=f.get(a);e.add(b.toJSON()),f.remove(b)})}b.find("[name="+c.data("select-right")+"] :selected").prop("selected",!1),b.find("[name="+c.data("select-left")+"] :selected").prop("selected",!1)}},handlerSelectClients:function(){var a=this.$el;a.find("[name=clientsAll] :selected").prop("selected",!1),a.find("[name=clientsSelected] :selected").prop("selected",!1)},createPdf:function(){var a=$('<form target="_blank" action="api/letters_controller/create_letter_template" method="post"></form>'),b=$('<input type="hidden" name="letterTemplateID" />'),c=$('<input type="hidden" name="htmlBody" />'),d=$('<input type="hidden" name="customSyleCss" />'),e=$('<input type="hidden" name="htmlHeader" />'),f=$('<input type="hidden" name="htmlFooter" />'),g=$('<input type="hidden" name="'+$.cookie("token_name")+'" value="'+$.cookie("cf_csrf_cookie")+'" />');b.val(this.model.get("letterTemplateID")),c.val(this.$el.find(".containerLetterBody").data("ckeditorInstance").getData()),d.val(this.model.get("style_css")),e.val(this.$el.find(".containerLetterHeader").data("ckeditorInstance").getData()),f.val(this.$el.find(".containerLetterFooter").data("ckeditorInstance").getData()),a.append(b),a.append(c),a.append(d),a.append(e),a.append(f),a.append(g),$("body").append(a),a.submit()},_setMacros:function(a){var b=this.$el,c=this;a=Number.isInteger(a)?a:b.find("#moduleID option:selected").val(),this.colMacros.moduleID=a,this.colMacros.fetch({reset:!0,success:function(){c.updateMacros()}})},_clearMacros:function(a){return delete a.calendarDays,delete a.days,delete a.description,delete a.displayOrder,delete a.msColor,delete a.name,delete a.selected,delete a.start,a}}),_.isUndefined(App.Views.Settings)&&(App.Views.Settings={}),App.Views.Settings.MilestonesSettings=App.Helpers.View.extend({template:App.Templates.settingsMilestonesSettings,className:"milestones-settings",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.listenTo(this.collection,"request",function(){this.showLoader()}),this.listenTo(this.collection,"sync error",function(){this.removeLoader(),this.loadMilestones(),this.totalMilestones()}),this.listenTo(this.collection,"change:deleted",function(){this.totalMilestones()})},events:{"click .btn-casefriend":"saveMilestones","click .new-milestone":"newMilestone","click .btn-update-milestones":"updateMilestones"},loadMilestones:function(){var a=this.$el,b=this;this.emptyElement(".wrapper-milestones"),a.find(".wrapper-milestones").empty(),this.collection.sort(),_.each(b.collection.models,function(b){if(_.isUndefined(b.get("deleted"))){var c=new App.Views.Settings.MilestonesSettingsRow({model:b});a.find(".wrapper-milestones").append(c.render().el)}})},saveMilestones:function(){var a=!0,b=this;$(".row-milestone").each(function(){var b=$(this).find("form");b.valid()||(a=!1)}),a&&this.collection.fetch({url:"/api/milestones_controller/updateMilestones/"+b.collection.module,type:"POST",data:JSON.stringify({milestones:this.collection.toJSON()}),success:function(){var a=new App.Helpers.Toast({message:"Milestones updated successfully!",classType:"success",fadeOut:5e3});a.render()},error:function(){var a=new App.Helpers.Toast({message:"Milestones not updated.",classType:"danger",fadeOut:5e3});a.render()}})},handlerOrderMilestones:function(){$(".row-milestone").each(function(a){var b=10*(a+1);$(this).data("view").model.set("displayOrder",b)})},newMilestone:function(){var a=new App.Models.Milestone;this.collection.add(a);var b=new App.Views.Settings.MilestonesSettingsRow({model:a});this.$el.find(".wrapper-milestones").prepend(b.render().el),this.handlerOrderMilestones()},updateMilestones:function(){var a=this,b={moduleID:this.collection.module};this.showLoader(),$.get("/api/file_milestones_controller/updateFilesMilestones",b).done(function(){var a=new App.Helpers.Toast({message:"Milestones updated successfully!",classType:"success",fadeOut:5e3});a.render()}).fail(function(){var a=new App.Helpers.Toast({message:"Milestones not updated.",classType:"danger",fadeOut:5e3});a.render()}).always(function(){a.removeLoader()})},moduleName:function(){return"1"===this.collection.module?"WC":"Subro"},totalMilestones:function(){this.$el.find("#total-milestones").html(this.collection.where({deleted:void 0}).length)}}),_.isUndefined(App.Views.Settings)&&(App.Views.Settings={}),App.Views.Settings.MilestonesSettingsRow=App.Helpers.View.extend({template:App.Templates.settingsMilestonesSettingsRow,className:"row-milestone",tagName:"li",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.listenTo(this.model.collection,"change:name change:deleted",function(){
this._handlerMilestone()}),this._handlerMilestone()},_handlerMilestone:function(){var a=this;this.milestones=this.model.collection.toJSON(),this.milestones=_.filter(this.milestones,function(b){return b.id&&a.model.get("id")!==b.id&&_.isUndefined(b.deleted)?b:null})},events:{"click .btn-delete":"deleteMilestone","click .control-draggable":"resertValidation","mouseover .control-draggable":"beginDragDrop","mouseout .control-draggable":"stopDragDrop"},beginDragDrop:function(){this.$el.attr("draggable",!0)},stopDragDrop:function(){this.$el.attr("draggable",!1)},_handlerDrapAndDrop:function(){var a=this.$el;this.dragging=0,a.off("dragstart"),a.off("dragenter"),a.off("dragover"),a.off("dragleave"),a.off("drop"),a.off("dragend"),a.on("dragstart",$.proxy(this.dragStart,this)),a.on("dragenter",$.proxy(this.dragEnter,this)),a.on("dragover",$.proxy(this.dragOver,this)),a.on("dragleave",$.proxy(this.dragLeave,this)),a.on("drop",$.proxy(this.drop,this)),a.on("dragend",$.proxy(this.dragEnd,this))},dragEnter:function(a){this.dragging++,a.stopPropagation(),a.preventDefault();var b=$(a.currentTarget),c=$(".row-milestone");c.hasClass("droppable-hover")&&c.removeClass("droppable-hover"),b.addClass("droppable-hover")},drapLeave:function(a){var b=$(a.currentTarget);this.dragging--,a.stopPropagation(),a.preventDefault(),0===this.dragging&&b.removeClass("droppable-hover")},dragOver:function(a){a.stopPropagation(),a.preventDefault(),a.originalEvent.dataTransfer.dropEffect="move"},dragStart:function(a){var b=$(a.currentTarget);a.originalEvent.dataTransfer.effectAllowed="move",a.originalEvent.dataTransfer.setData("cid",b.data("cid"))},drop:function(a){var b=$(".milestones-settings").data("view");a.preventDefault();var c=a.originalEvent.dataTransfer.getData("cid"),d=$(a.currentTarget).data("cid"),e=$('[data-cid="'+c+'"]').index(),f=$('[data-cid="'+d+'"]').index();f>e?$('[data-cid="'+c+'"]').insertAfter($('[data-cid="'+d+'"]')):$('[data-cid="'+c+'"]').insertBefore($('[data-cid="'+d+'"]')),b.handlerOrderMilestones()},dragEnd:function(){$(".row-milestone").removeClass("droppable-hover")},afterRender:function(){var a=this.$el;a.attr("data-cid",this.model.cid),a.attr("draggable",!1),this._handlerValidate(),this._handlerDrapAndDrop()},deleteMilestone:function(a){var b=a.currentTarget,c=$(".milestones-settings").data("view"),d=this;if(this.model.isNew())c.collection.remove(this.model),App.Helpers.cleanView(this),c.handlerOrderMilestones();else{var e=c.collection.filter(function(a){return a.get("start")===d.model.get("id")||a.get("start")===d.model.get("id").toString()});if(e.length>0){var f=new App.Helpers.Toast({message:"You cannot delete this milestone.",classType:"danger",fadeOut:5e3});return void f.render()}var g="Really remove this Milestone? This will remove the milestone from ALL existing events.",h=new App.Views.Shared.AlertView({processFunction:"processDeleteMilestone",viewClass:".row-milestone",params:{parentView:c,elem:b},msg:g,title:"Delete Milestone"}),i=new App.Helpers.Modal({view:h});i.show()}},processDeleteMilestone:function(a){var b=a.elem.dataset.model,c=a.parentView.collection.get({cid:b});c.set("deleted",!0),App.Helpers.cleanView($(a.elem).closest(".row-milestone").data("view")),a.parentView.handlerOrderMilestones()},_handlerValidate:function(){this.validate=this.$el.find("form").validate({rules:{days:{digits:!0,minlength:1},calendarDays:{digits:!0,minlength:1}}})}}),_.isUndefined(App.Views.Settings)&&(App.Views.Settings={}),App.Views.Settings.MySettings=App.Helpers.View.extend({template:App.Templates.settingsMySettings,className:"mySettings",initialize:function(a){var b=this;App.Helpers.View.prototype.initialize.apply(this,[a]),this.listenTo(this.model,"sync",function(){b.removeLoader()}),this.listenTo(this.model,"request",function(){b.showLoader(".modal-body")}),this.listenTo(this.model,"sync error",function(){b.removeLoader(".modal-body")})},afterRender:function(){this.showLoader(),App.Helpers.addMask('input[name="phone"]',"(999) 999-9999"),App.Helpers.addMask('input[name="cell"]',"(999) 999-9999"),App.Helpers.addMask('input[name="fax"]',"(999) 999-9999")},events:{"click #save":"saveSettings"},showCompanyInfo:function(a){a.preventDefault(),a.stopPropagation();var b=$(a.currentTarget),c=b.next().next();c.toggle("slow")},saveSettings:function(a){var b;a.preventDefault(),a.stopPropagation(),this.$el.find("#user-settings-form").valid()&&(this.showLoader(),this.model.set("phone",this.$el.find('[name="phone"]').val()),this.model.set("cell",this.$el.find('[name="cell"]').val()),this.model.set("fax",this.$el.find('[name="fax"]').val()),this.model.save({},{success:function(a,c){App.loginModel.updateSessionData(c),b=new App.Helpers.Toast({message:"Your settings where saved correctly!",classType:"success",fadeOut:5e3}),b.render()},error:function(a,c){401===c.status?(b=new App.Helpers.Toast({message:"Not Autorized",classType:"danger",fadeOut:5e3}),b.render(),App.loginModel.logout()):(b=new App.Helpers.toast.Toast({message:"Error while trying to save user settings.",classType:"danger",fadeOut:5e3}),b.render())}}))}}),_.isUndefined(App.Views.Settings)&&(App.Views.Settings={}),_.isUndefined(App.Views.Settings.MySettings)&&(App.Views.Settings.MySettings={}),App.Views.Settings.MySettings.MySettings=App.Helpers.View.extend({template:App.Templates.settingsMySettingsMySettings,className:"SettingsMySettingsMySettings",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.listenTo(this.model,"sync",function(){b.removeLoader()}),this.listenTo(this.model,"request",function(){b.showLoader(".modal-body")}),this.listenTo(this.model,"sync error",function(){b.removeLoader(".modal-body"),b.checkSettings()})},events:{"click #save":"saveSettings","click .client-rep-settings-options a":"navigation"},afterRender:function(){this.showLoader(),this.showTab()},showCompanyInfo:function(a){a.preventDefault(),a.stopPropagation();var b=$(a.currentTarget),c=b.next().next();c.toggle("slow")},saveSettings:function(a){var b;a.preventDefault(),a.stopPropagation(),this.$el.find("#user-settings-form").valid()&&(this.showLoader(),this.model.set("phone",this.$el.find('[name="phone"]').val()),this.model.set("cell",this.$el.find('[name="cell"]').val()),this.model.set("fax",this.$el.find('[name="fax"]').val()),this.model.save({},{success:function(a,c){App.loginModel.updateSessionData(c),b=new App.Helpers.Toast({message:"Your settings where saved correctly!",classType:"success",fadeOut:5e3}),b.render()},error:function(a,c){401===c.status?(b=new App.Helpers.Toast({message:"Not Autorized",classType:"danger",fadeOut:5e3}),b.render(),App.loginModel.logout()):(b=new App.Helpers.toast.Toast({message:"Error while trying to save user settings.",classType:"danger",fadeOut:5e3}),b.render())}}))},navigation:function(a){var b=$(a.currentTarget);b.closest("div").find("a.active").removeClass("active"),b.addClass("active"),this.showTab(b.data("optiontab"))},showTab:function(a){a=a||"personal_info";var b;"personal_info"===a&&(b=new App.Views.Settings.MySettings.PersonalInfo({model:this.model})),"signature"===a&&(b=new App.Views.Users.Signature({model:this.model})),"other-settings"===a&&(b=new App.Views.Settings.MySettings.OtherSettings({model:this.model})),App.Helpers.htmlView(b,"#user-settings-body")},checkSettings:function(){!App.loginModel.get("settings")&&this.model.get("settings")&&App.loginModel.updateSettings(this.model.get("settings"))}}),_.isUndefined(App.Views.Settings)&&(App.Views.Settings={}),_.isUndefined(App.Views.Settings.MySettings)&&(App.Views.Settings.MySettings={}),App.Views.Settings.MySettings.OtherSettings=App.Helpers.View.extend({template:App.Templates.settingsMySettingsOtherSettings,className:"SettingsMySettingsOtherSettings",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.settingsCol=new App.Helpers.Collection,this.settingsCol.add(this.model.get("settings"))},events:{"click #save-settings":"updateUserSettings"},getPopAlertCheck:function(){return App.loginModel.get("popAlerts")?!0:!1},updateUserSettings:function(){var a=this.$el.find("#popAlertUser").is(":checked")?1:0,b=this._setUserSettings();$.post("/api/user_controller/updateSettings/",JSON.stringify({popAlert:a,settings:b}),function(){App.loginModel.updatePopAlerts(a),App.loginModel.updateSettings(b);var c=new App.Helpers.Toast({message:"Settings updated",classType:"success",fadeOut:5e3});c.render()})},_setUserSettings:function(){var a=this.$el,b=a.find(".user-settings");return _.each(b,function(a){var b=$(a.children);if("checkbox"===b.attr("type")){var c=_.find(App.loginModel.get("settings"),function(a){return a.key===b.data("key")});c&&(c.value=b.is(":checked")?1:0)}else if("text"===b.attr("type")){var d=_.find(App.loginModel.get("settings"),function(a){return a.key===b.data("key")});d&&(d.value=b.val())}}),App.loginModel.get("settings")}}),_.isUndefined(App.Views.Settings)&&(App.Views.Settings={}),_.isUndefined(App.Views.Settings.MySettings)&&(App.Views.Settings.MySettings={}),App.Views.Settings.MySettings.PersonalInfo=App.Helpers.View.extend({template:App.Templates.settingsMySettingsPersonalInfo,className:"SettingsMySettingsPersonalInfo",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.previousEmail=this.model.get("email")},events:{"click #save-personal-info":"save"},afterRender:function(){App.Helpers.addMask('input[name="phone"]',"(999) 999-9999"),App.Helpers.addMask('input[name="cell"]',"(999) 999-9999"),App.Helpers.addMask('input[name="fax"]',"(999) 999-9999")},cancelEmailChange:function(){this.model.set("email",this.previousEmail)},updateEmailLocally:function(){this.previousEmail=this.model.get("email"),this.save()},save:function(a){var b;a.preventDefault(),a.stopPropagation(),this.$el.find("#user-settings-form").valid()&&(this.showLoader(),this.model.set("phone",this.$el.find('[name="phone"]').val()),this.model.set("cell",this.$el.find('[name="cell"]').val()),this.model.set("fax",this.$el.find('[name="fax"]').val()),this.model.save({},{success:function(a,c){App.loginModel.updateSessionData(c),b=new App.Helpers.Toast({message:"Your personal info where saved correctly!",classType:"success",fadeOut:5e3}),b.render()},error:function(a,c){401===c.status?(b=new App.Helpers.Toast({message:"Not Autorized",classType:"danger",fadeOut:5e3}),b.render(),App.loginModel.logout()):(b=new App.Helpers.toast.Toast({message:"Error while trying to save your personal info.",classType:"danger",fadeOut:5e3}),b.render())}}))}}),_.isUndefined(App.Views.Settings)&&(App.Views.Settings={}),_.isUndefined(App.Views.Settings.Snippets)&&(App.Views.Settings.Snippets={}),App.Views.Settings.Snippets.Index=App.Helpers.View.extend({template:App.Templates.settingsSnippetsIndex,className:"index",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.sortBy="snippet_category",this.sortDir="asc",this.listenTo(this.collection,"request",function(){b.showLoader()}),this.listenTo(this.collection,"sync change error",function(){b.removeLoader(),b.prepopulateData()}),this.listenToOnce(this.collection,"sync",this.groupSnippetsCategories),this.colSnippetsCategorie=new App.Helpers.Collection,this.colClients=new App.Collections.Clients,this.colModules=new App.Collections.Modules,this.colClients.fetch(),this.colModules.fetch()},events:{"click .snippets-sortable":"sortSnippets","click #newSnippet":"newSnippetForm","click .snippet-row":"editSnippetForm","change #snippetCategory":"findBySnippetCategory","change #snippetModule":"findBySnippetModule"},newSnippetForm:function(){var a=new App.Models.Snippet({snippetType:"billing"}),b=new App.Views.Settings.Snippets.SnippetForm({model:a,colClients:this.colClients,collectionSnippets:this.collection,colModules:this.colModules,colSnippetsCategorie:this.colSnippetsCategorie}),c=new App.Helpers.Modal({view:b,sizeModal:"modal-lg"});c.show()},editSnippetForm:function(a){var b=$(a.currentTarget),c=new App.Models.Snippet({id:b.data("id")}),d=new App.Views.Settings.Snippets.SnippetForm({model:c,colClients:this.colClients,collectionSnippets:this.collection,colModules:this.colModules,colSnippetsCategorie:this.colSnippetsCategorie}),e=new App.Helpers.Modal({view:d,sizeModal:"modal-lg"});e.show(),c.fetch()},sortSnippets:function(a){var b=this.$el,c=b.find(a.currentTarget);this.sortBy=c.data("sort"),c.find(".fa-chevron-down").length?this.sortDir="asc":this.sortDir="DESC",b.find("#snippets-heads .fa").remove(),c.append("asc"===this.sortDir?'<i class="fa fa-chevron-up"></i>':'<i class="fa fa-chevron-down"></i>'),this.collection.sortBy=this.sortBy,this.collection.sortOrder=this.sortDir,this.collection.sort()},findBySnippetCategory:function(a){var b=this.$el,c=b.find(a.currentTarget);this.collection.category=encodeURIComponent(c.find("option:selected").val()),this.collection.moduleID=b.find("#snippetModule").find("option:selected").val(),this.collection.reset(),this.collection.fetch()},findBySnippetModule:function(a){var b=this.$el,c=b.find(a.currentTarget),d=this;this.collection.category=encodeURIComponent("-1"),b.find("#snippetCategory").val("-1"),this.collection.moduleID=c.find("option:selected").val(),this.collection.reset(),this.collection.fetch({success:function(){d.groupSnippetsCategories()},error:function(){d.groupSnippetsCategories()}})},groupSnippetsCategories:function(){var a=_.uniq(this.collection.models,function(a){return a.get("snippet_category")});this.colSnippetsCategorie.reset(),this.colSnippetsCategorie.add(a),this.colSnippetsCategorie.sortBy="snippet_category",this.colSnippetsCategorie.sortOrder="asc",this.colSnippetsCategorie.sort()},prepopulateData:function(){this.collection.sortBy=this.sortBy,this.collection.sortOrder=this.sortDir,this.collection.sort()}}),_.isUndefined(App.Views.Settings)&&(App.Views.Settings={}),_.isUndefined(App.Views.Settings.Snippets)&&(App.Views.Settings.Snippets={}),App.Views.Settings.Snippets.SnippetForm=App.Helpers.View.extend({template:App.Templates.settingsSnippetsSnippetForm,className:"snippetForm",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.colTpa=new App.Helpers.Collection,this.colInsurer=new App.Helpers.Collection,this.colLitigationCodes=new App.Helpers.Collection,this.colExpenseCodes=new App.Helpers.Collection,this.colActivationCodes=new App.Helpers.Collection,this.listenTo(this.model,"request",function(){b.showLoader(".modal-body")}),this.listenTo(this.model,"sync error",function(){b.removeLoader(".modal-body"),b.model.isNew()||(b._macrosTab(),b.setClients(),b.setClientsInfo(),b.setCategoryTypeahead())}),$.get("api/litigation_codes_controller/getAllLitigationCodes",{},function(a){b.colLitigationCodes.sortBy="litigationCode",b.colLitigationCodes.sortOrder="asc",b.colLitigationCodes.sort(),b.colLitigationCodes.add(a.litigationOnly),b.colExpenseCodes.sortBy="litigationCode",b.colExpenseCodes.sortOrder="asc",b.colExpenseCodes.sort(),b.colExpenseCodes.add(a.expenseOnly),b.colActivationCodes.sortBy="litigationCode",b.colActivationCodes.sortOrder="asc",b.colActivationCodes.sort(),b.colActivationCodes.add(a.activeOnly)})},events:{"click .icon-typeahead-down":"showAllEntities","click .radio-companies":"disableLists","click .clients-checks":"moveRadioSelction","click #save-snippet":"saveSnippet","click #delete-snippet":"deleteSnippet","change #moduleID":"_macrosTab"},afterRender:function(){var a=".typeahead.snippet_category_typeahead";App.Helpers.initTypeahead({view:this,elemClass:a,urlBuild:{url:"api/typeahead_controller/search_snippets_category"}}),this.$el.find(a).data("filter-id",0),this.model.isNew()&&(this.setClients(),this._macrosTab())},macrosPanel:function(){var a=this,b=new App.Views.Macros.MacrosForm({moduleID:this.model.get("moduleID"),fnSelectMacro:function(b){a.setMacroToText("{{"+b+"}}")}});App.Helpers.htmlView(b,"#macros")},setCategoryTypeahead:function(){var a=this.model.toJSON();this.$el.find(".typeahead.snippet_category_typeahead").data("datum",a)},setClients:function(){var a=this.options.colClients.toJSON();this.colTpa.add(_.where(a,{clientTypeID:3})),this.colInsurer.add(_.where(a,{clientTypeID:2}))},setClientsInfo:function(){var a=this.$el;a.find("#"+this.model.get("useWith")).attr("checked",!0),this.model.get("client_list").length>0&&_.each(this.model.get("client_list"),function(b){a.find('.clients-checks[value="'+b.clientID+'"]').attr("checked",!0)})},setMacroToText:function(a){var b=$('[name="snippet_text"]'),c=b.prop("selectionStart"),d=b.prop("selectionEnd"),e=b.val(),f=e.substr(0,c)+a+e.substr(d);b.val(f),b.prop("selectionEnd",c+a.length),b.focus()},disableLists:function(){var a=this.$el,b=$(".radio-companies:checked").val();"all"===b?(a.find(".clients-checks").attr("disabled",!0),a.find(".clients-checks").attr("checked",!1)):a.find(".clients-checks").removeAttr("disabled")},moveRadioSelction:function(){var a=this.$el;a.find(".clients-checks:checkbox:checked").length>0&&a.find("#exclusive").attr("checked",!0)},saveSnippet:function(){var a,b=this.$el,c=this,d="update",e=b.find(".radio-companies:checked").val();if(b.find("#snippets-form").valid()){if("exclusive"===e){var f=$(".clients-checks:checkbox:checked").map(function(){return parseInt(this.value)}).get();this.model.set("clients_list",f)}this.model.isNew()&&(d="add"),this.model.set("useWith",e?e:"all"),this.model.set("snippet_category",b.find('input[name="snippet_category"]').val()),this.model.set("snippet_text",b.find('textarea[name="snippet_text"]').val()),this.model.save({},{success:function(b){c.elementModal.modal("hide"),c.reCalculateListOfSnippets(d,b),a=new App.Helpers.Toast({message:"Snippet Created Successfully.",classType:"success",fadeOut:5e3}),a.render()},error:function(){c.elementModal.modal("hide"),a=new App.Helpers.Toast({message:"Erro Creating Snippet.",classType:"danger",fadeOut:5e3}),a.render()}})}},deleteSnippet:function(){var a="Are you sure you want to delete this snippet?",b=new App.Views.Shared.AlertView({processFunction:"processDeleteSnippet",viewClass:".snippetForm",msg:a,title:"Delete Snippet"}),c=new App.Helpers.Modal({view:b});c.show()},processDeleteSnippet:function(){var a,b=this,c=this.model.clone();this.model.isNew()?b.elementModal.modal("hide"):this.model.destroy({success:function(){b.elementModal.modal("hide"),b.reCalculateListOfSnippets("delete",c);var d=b.options.collectionSnippets.clone();b.options.collectionSnippets.reset(d.toJSON()),a=new App.Helpers.Toast({message:"Snippet Deleted.",classType:"warning",fadeOut:3e3}),a.render()}})},reCalculateListOfSnippets:function(a,b){if("add"===a)0===this.options.colSnippetsCategorie.where({snippet_category:b.get("snippet_category")}).length&&this.options.colSnippetsCategorie.add(b),this.options.collectionSnippets.add(b);else if("update"===a){var c=this.options.collectionSnippets.findWhere({id:b.get("id")});c.clear(),c.set(b.attributes)}else"delete"===a&&(1===this.options.collectionSnippets.where({snippet_category:b.get("snippet_category")}).length&&this.options.colSnippetsCategorie.remove(this.options.collectionSnippets.findWhere({snippet_category:b.get("snippet_category")})),this.options.collectionSnippets.remove(this.options.collectionSnippets.findWhere({id:b.get("id")})))},showAllEntities:function(a){App.Helpers.showAllEntities(a,this.$el)},_macrosTab:function(){var a=this.$el;"0"===a.find("#moduleID option:selected").val()&&this.model.unset("moduleID"),this.model.set("moduleID",a.find("#moduleID option:selected").val()),this.model.get("moduleID")?(a.find(".nav li#tabMacros").removeClass("disabled"),a.find(".nav li#tabMacros").removeClass("disabledTab"),this.macrosPanel()):(a.find(".nav li#tabMacros").addClass("disabled"),a.find(".nav li#tabMacros").addClass("disabledTab"))}}),_.isUndefined(App.Views.Settings)&&(App.Views.Settings={}),_.isUndefined(App.Views.Settings.WordLetters)&&(App.Views.Settings.WordLetters={}),App.Views.Settings.WordLetters.Index=App.Helpers.View.extend({template:App.Templates.settingsWordLettersIndex,className:"SettingsWordLettersIndex",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.listenTo(this.collection,"request",function(){this.showLoader(".container")}),this.listenTo(this.collection,"sync error",function(){this.removeLoader(".container")})},events:{"click .btnEditLetter":"editLetter","click .btn-downloadPDF":"downloadPDF"},editLetter:function(a){var b=$(a.currentTarget);Backbone.history.navigate("word_letters/edit/"+b.data("id"),{trigger:!0})},downloadPDF:function(a){var b=$(a.currentTarget),c=$('<form target="_blank" action="api/letters_controller/create_letter_template" method="post"></form>'),d=$('<input type="hidden" name="letterTemplateID" />'),e=$('<input type="hidden" name="htmlBody" />'),f=$('<input type="hidden" name="customSyleCss" />'),g=$('<input type="hidden" name="htmlHeader" />'),h=$('<input type="hidden" name="htmlFooter" />'),i=$('<input type="hidden" name="'+$.cookie("token_name")+'" value="'+$.cookie("cf_csrf_cookie")+'" />'),j=this.collection.get(b.data("id"));d.val(j.get("letterTemplateID")),e.val(j.get("content")),f.val(j.get("style_css")),g.val(j.get("header")),h.val(j.get("footer")),c.append(d),c.append(e),c.append(f),c.append(g),c.append(h),c.append(i),$("body").append(c),c.submit()}}),_.isUndefined(App.Views.Settings)&&(App.Views.Settings={}),_.isUndefined(App.Views.Settings.WordLetters)&&(App.Views.Settings.WordLetters={}),App.Views.Settings.WordLetters.LetterForm=App.Helpers.View.extend({template:App.Templates.settingsWordLettersLetterForm,className:"SettingsWordLettersLetterForm",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.colClientsAll=new App.Collections.Clients,this.colEventTypesAll=new App.Collections.EventTypes,this.colClientsSelected=new App.Collections.Clients,this.colEventTypesSelected=new App.Collections.EventTypes,this.colMacros=new App.Collections.Macros,this.colModules=new App.Collections.Modules,this.listenTo(this.model,"request",function(){this.showLoader(".container")}),this.listenTo(this.model,"sync",function(a,b){var c=b.eventTypes||[],d=b.clients||[],e=b.modules||[];this.colModules.reset(e),this.colEventTypesAll.reset(c),this.colClientsAll.reset(d),_.has(b,"letter")&&(this.colClientsSelected.reset(b.letter.clients||[]),this.colEventTypesSelected.reset(b.letter.eventTypes||[])),this.removeLoader(".container")}),this.listenTo(this.model,"error",function(){this.removeLoader(".container")}),this.macros=[],this.inputFileInput={}},events:{"click .btn-save":"saveLetter","click .btn-delete":"deleteLetter","click .btn-moveLeft":"moveLeft","click .btn-moveRight":"moveRight","click [name=isClientSpecific]":"handlerSelectClients","click .btn-macros":"showMacros","click .btn-cancel-upload":"resetFileUpload","click .btn-downloadDocument":"downloadDocument"},resetFileUpload:function(){var a=this.$el;this.inputFileInput={},a.find(".name_lt").text(""),a.find(".size_lt").text(""),a.find(".info-letter-template").addClass("hidden")},setExtraFields:function(){this.model.set({clients:this.colClientsSelected.toJSON(),eventTypes:this.colEventTypesSelected.toJSON()})},saveLetter:function(a){a.preventDefault(),a.stopPropagation();var b=this.model.isNew();return b&&0===_.size(this.inputFileInput)?(new App.Helpers.Toast({message:"You must to attach a word letter template.",classType:"danger",fadeOut:5e3}).render(),!1):void(_.size(this.inputFileInput)?this.inputFileInput.submit():(this.setExtraFields(),this.model.save({},{success:function(a){var c;c=new App.Helpers.Toast({message:b?"Letter created successfully!":"Letter updated successfully!",classType:"success",fadeOut:5e3}),b&&Backbone.history.navigate("word_letters/edit/"+a.get("letterTemplateID"),{trigger:!0}),c.render()},error:function(a,b){var c,d="Error Updating this files";b&&b.responseJSON&&(d=b.responseJSON.error||d),c=new App.Helpers.Toast({message:d,classType:"danger",fadeOut:5e3}),c.render()}})))},afterRender:function(){var a=this;this.model.isNew()&&(this.showLoader(".container"),$.get("/api/letters_word_controller/new_letter").done(function(b){var c=b.eventTypes||[],d=b.clients||[],e=b.modules||[];a.colEventTypesAll.reset(c),a.colClientsAll.reset(d),a.colModules.reset(e),a.removeLoader(".container")}).error(function(){a.removeLoader(".container")})),this._initializeFileUpload()},_initializeFileUpload:function(){var a=this.$el,b=this,c=this.model.isNew();a.find("#fileupload").fileupload({autoUpload:!1,dataType:"json",acceptFileTypes:/(\.|\/)(docx)$/i,url:"/api/letters_word_controller/upload_letter",drop:function(a,b){return b.files.length>1?(new App.Helpers.Toast({message:"Only one letter template is allowed to be uploaded.",classType:"danger",fadeOut:5e3}).render(),!1):void 0},add:function(c,d){var e=$(this).data("blueimp-fileupload"),f=["application/vnd.openxmlformats-officedocument.wordprocessingml.document"],g=_.first(d.files);return _.contains(f,g.type)?(a.find(".info-letter-template").removeClass("hidden"),a.find(".info-letter-template").find(".name_lt").text(g.name),a.find(".info-letter-template").find(".size_lt").text(e._formatFileSize(g.size)),void(b.inputFileInput=d)):(new App.Helpers.Toast({message:"File type not allowed.",classType:"danger",fadeOut:5e3}).render(),!1)}}),a.find("#fileupload").bind("fileuploadsubmit",function(){var c=[],d=$.cookie("token_name"),e=$.cookie("cf_csrf_cookie"),f={};b.setExtraFields(),c.push({name:d,value:e}),f=b.model.toJSON(),_.each(f,function(a,b){a===!0?a=1:a===!1&&(a=0),"clients"===b&&a&&(a=_.map(a,function(a){return a.clientID}).join("|")),"eventTypes"===b&&a&&(a=_.map(a,function(a){return a.eventTypeID}).join("|")),c.push({name:b,value:a})}),b.showLoader(".container"),a.find(this).fileupload("option",{formData:c})}).bind("fileuploadcompleted",function(d,e){var f=new App.Helpers.Toast({message:c?"Letter created successfully!":"Letter updated successfully!",classType:"success",fadeOut:5e3});b.removeLoader(".container"),c?(a.find("#fileupload").fileupload("option","destroy"),_.defer(function(){Backbone.history.navigate("word_letters/edit/"+e.result.letter.letterTemplateID,{trigger:!0})})):b.resetFileUpload(),f.render()}).bind("fileuploadfail",function(a,c){var d,e="Error Uploading this files";c.jqXHR&&c.jqXHR.responseJSON&&(e=c.jqXHR.responseJSON.error||""),d=new App.Helpers.Toast({message:e,classType:"danger",fadeOut:5e3}),d.render(),b.removeLoader(".container")})},deleteLetter:function(){var a="Are you sure to delete this letter?",b=new App.Views.Shared.AlertView({processFunction:"processDeleteLetter",viewClass:"."+this.className,msg:a,title:"Delete Letter"}),c=new App.Helpers.Modal({view:b});c.show()},processDeleteLetter:function(){this.model.destroy({success:function(){var a=new App.Helpers.Toast({message:"Letter deleted successfully!",classType:"success",fadeOut:5e3});a.render(),Backbone.history.navigate("word_letters",{trigger:!0})}})},_getIDs:function(a){var b=[];return this.$el.find("[name="+a+"] :selected").each(function(){var a=Math.floor($(this).val());b.push(a)}),b},moveLeft:function(a){var b=this.$el,c=$(a.currentTarget),d=c.data("select-right"),e=this[c.data("collection-right")],f=this[c.data("collection-left")],g=[],h=this.$el.find("[name="+d+"] :selected").length;if(0!==h){if(e.length===h){var i=e.toJSON();i=_.union(i,f.toJSON()),f.reset(i),e.reset([])}else{if(g=this._getIDs(d),0===g.length)return;_.each(g,function(a){var b=e.get(a);f.add(b.toJSON()),e.remove(b)})}b.find("[name="+c.data("select-right")+"] :selected").prop("selected",!1),b.find("[name="+c.data("select-left")+"] :selected").prop("selected",!1)}},moveRight:function(a){var b=this.$el,c=$(a.currentTarget),d=c.data("select-left"),e=this[c.data("collection-right")],f=this[c.data("collection-left")],g=[],h=this.$el.find("[name="+d+"] :selected").length;if(0!==h){if(f.length===h){var i=f.toJSON();i=_.union(i,e.toJSON()),e.reset(i),f.reset([])}else{if(g=this._getIDs(d),0===g.length)return;_.each(g,function(a){var b=f.get(a);e.add(b.toJSON()),f.remove(b)})}b.find("[name="+c.data("select-right")+"] :selected").prop("selected",!1),b.find("[name="+c.data("select-left")+"] :selected").prop("selected",!1)}},handlerSelectClients:function(){var a=this.$el;a.find("[name=clientsAll] :selected").prop("selected",!1),a.find("[name=clientsSelected] :selected").prop("selected",!1)},showMacros:function(){var a=this;this.colMacros.moduleID=this.model.get("moduleID"),this.colMacros.fetch({success:function(b){var c=new App.Views.Settings.WordLetters.MacrosForm({colMacros:b}),d=new App.Helpers.Modal({view:c,sizeModal:"modal-lg",parentClassName:a.className});d.show()}})},downloadDocument:function(){var a=$('<form id="form_letter_template" target="_blank" action="/api/letters_word_controller/download_letter_template/'+this.model.get("letterTemplateID")+'" method="post"></form>'),b=$('<input type="hidden" name="letterTemplateID" />'),c=$('<input type="hidden" name="letterTemplateName" />'),d=$('<input type="hidden" name="'+$.cookie("token_name")+'" value="'+$.cookie("cf_csrf_cookie")+'" />');b.val(this.model.get("letterTemplateID")),c.val(this.model.get("name")),a.append(b),a.append(c),a.append(d),this.$el.append(a),$("body").append(a),a.submit()}}),_.isUndefined(App.Views.Settings)&&(App.Views.Settings={}),_.isUndefined(App.Views.Settings.WordLetters)&&(App.Views.Settings.WordLetters={}),App.Views.Settings.WordLetters.MacrosForm=App.Helpers.View.extend({template:App.Templates.settingsWordLettersMacrosForm,className:"SettingsWordLettersMacrosForm",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this.options.colMacros.first();this.macros=b.toJSON()},events:{"click .btn-copy":"copyMacro"},copyMacro:function(a){var b=$(a.currentTarget),c=b.closest("tr").data("macro"),d=b.attr("title");c&&(b.attr("title","copied"),b.tooltip({trigger:"manual",placement:"right"}),c=s.replaceAll(c,"{{","«"),c=s.replaceAll(c,"}}","»"),clipboard.copy({"text/plain":"${"+c+"}"}).then(function(){b.tooltip("show"),setTimeout(function(){b.attr("title",d),b.tooltip("hide")},500)}))},afterRender:function(){this.renderMacros()},renderMacros:function(){var a=this.$el,b=this;a.find(".non-data-macros").addClass("hidden"),a.find(".container-macros-tab").removeClass("hidden"),_.each(_.keys(this.macros),function(c){if(b.macros[c]){var d=a.find("#tabMacros .template-li").clone();d.removeClass("template-li hidden");var e=s.replaceAll(c," ","_");d.find("a").attr("href","#"+e),d.find("a").attr("aria-controls",c),d.find("a").attr("id",c+"-link"),d.find("a").html(c),a.find("#tabMacros").append(d);var f=a.find(".container-tab-pane .template-tab-pane").clone();f.removeClass("template-tab-pane hidden"),f.attr("id",e),_.each(_.keys(b.macros[c]),function(a){var d=b.macros[c][a],e=f.find(".template-table-tab-pane").clone();e.removeClass("template-table-tab-pane hidden");var g=e.find(".col-macro-group");g.html(a),_.each(_.keys(d),function(a){var b=e.find(".template-tr").clone();b.removeClass("template-tr hidden"),b.attr("data-macro",a),b.find("td:eq(0)").find("span").text(a),b.find("td:eq(1)").html(a),b.find("td:last-child").html(d[a]),e.find("tbody").append(b)}),f.append(e)}),a.find(".container-tab-pane").append(f)}}),a.find("#tabMacros li:not(#tabMacros li.template-li)").eq(0).addClass("active"),a.find(".tab-pane:not(.template-tab-pane.tab-pane:first-child)").eq(0).addClass("active")}}),_.isUndefined(App.Views.Shared)&&(App.Views.Shared={}),App.Views.Shared.AlertView=App.Helpers.View.extend({template:App.Templates.sharedAlertView,className:"alertView",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{"click #ok-action":"runAction","click #cancel-action":"cancelAction"},afterRender:function(){var a=this;this.runCancel=!0,this.options.cancelFunction&&this.elementModal.one("hidden.bs.modal",function(){a.runCancel&&a.cancelAction()})},runAction:function(){var a=$(this.options.viewClass).data("view"),b=this.options.params||{};this.options.processFunction&&a[this.options.processFunction](b),this.runCancel=!1,this.elementModal.modal("hide");

},cancelAction:function(){if(this.options.cancelFunction){var a=$(this.options.viewClass).data("view"),b=this.options.cancelParams||{};a[this.options.cancelFunction](b)}this.runCancel=!1,this.elementModal.modal("hide")}}),_.isUndefined(App.Views.Tools)&&(App.Views.Tools={}),_.isUndefined(App.Views.Tools.ClientEditor)&&(App.Views.Tools.ClientEditor={}),App.Views.Tools.ClientEditor.ClientForm=App.Helpers.View.extend({template:App.Templates.toolsClientEditorClientForm,className:"ToolsClientEditorClientForm",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.clientTypesCol=new App.Collections.ClientTypes,this.clientTypesCol.fetch({success:function(){b.model.isNew()?b.options.urlPath&&Backbone.history.navigate(b.options.urlPath+"/new",{trigger:!1}):(b.model.fetch(),b.options.urlPath&&Backbone.history.navigate(b.options.urlPath+"/edit/"+b.model.get("clientID"),{trigger:!1}))}})},events:{"click #save-client":"saveClient","click #copy-address-mailing":"copy_to_addressMailing","click #copy-address-billing":"copy_to_addressBilling","change .client-group-typeahead":"resetClientGroupID","click .icon-typeahead-down":"showAllEntities","click .client_group_form_new":"createNewClientGroupForm","click .client_group_form_edit":"editNewClientGroupForm","click .time-keeper-edit":"editTimekeeperRates"},afterRender:function(){App.Helpers.initTypeahead({view:this,elemClass:".typeahead.client-group-typeahead",urlBuild:{url:"api/typeahead_controller/search_client_groups"},processFunction:$.proxy(this.processClientGroupTypeahead,this)})},editTimekeeperRates:function(){var a=new App.Views.Tools.ClientEditor.TimekeeperRatesForm({clientName:this.model.get("clientName"),clientID:this.model.get("clientID")}),b=new App.Helpers.Modal({view:a,sizeModal:"modal-lg"});b.show()},createNewClientGroupForm:function(){var a=new App.Models.ClientGroup,b=new App.Views.Tools.ClientEditor.ClientGroupForm({model:a,clientModel:this.model}),c=new App.Helpers.Modal({view:b});c.show()},editNewClientGroupForm:function(){if(this.model.get("clientGroupID")){var a=new App.Models.ClientGroup({clientGroupsID:this.model.get("clientGroupID")}),b=new App.Views.Tools.ClientEditor.ClientGroupForm({model:a,clientModel:this.model}),c=new App.Helpers.Modal({view:b});c.show(),a.fetch()}},resetClientGroupID:function(){this.model.unset("clientGroupID")},processClientGroupTypeahead:function(a){this.model.set("clientGroupID",a.id),this.model.set("groupName",a.typeaheadResult)},copy_to_addressMailing:function(){this.model.set("mailingAddress",this.model.get("physicalAddress")),this.model.set("mailingCity",this.model.get("physicalCity")),this.model.set("mailingState",this.model.get("physicalState")),this.model.set("mailingCounty",this.model.get("physicalCounty")),this.model.set("mailingZip",this.model.get("physicalZip"))},copy_to_addressBilling:function(){this.model.set("billingAddress",this.model.get("physicalAddress")),this.model.set("billingCity",this.model.get("physicalCity")),this.model.set("billingState",this.model.get("physicalState")),this.model.set("billingCounty",this.model.get("physicalCounty")),this.model.set("billingZip",this.model.get("physicalZip"))},process_save_client:function(){var a=this,b=this.model.isNew();this.model.save({},{success:function(){var c=a.model.get("physicalAddress")+","+a.model.get("physicalCity")+","+a.model.get("physicalState")+","+a.model.get("physicalZip"),d=a.clientTypesCol.get(a.model.get("clientTypeID")),e=a.model.get("clientName")+": "+d.get("description")+" ("+a.model.get("clientNameShort")+")";if(a.options.parentClassName&&"FilesFileSubroTabsGeneralPanel"===a.options.parentClassName){var f=$("."+a.options.parentClassName).data("view"),g={id:a.model.get("clientID"),typeaheadResult:e};f.processClientTypeahead(g)}else if(a.model.set("address",c),b)a.collection.add(a.model);else{var h=a.collection.get(a.model.get("clientID"));h.clear(),h.set(a.model.attributes)}a.elementModal.modal("hide");var i=new App.Helpers.Toast({message:"Client created successfully.",classType:"success",fadeOut:5e3});i.render()}})},saveClient:function(){var a=this.$el;if(a.find("#client-form").valid())if(this.model.isNew())this.process_save_client();else{var b=" If you edit this client it will affect all files using this client and billing.",c=new App.Views.Shared.AlertView({processFunction:"process_save_client",viewClass:".ToolsClientEditorClientForm",msg:b,title:"Warning"}),d=new App.Helpers.Modal({view:c});d.show()}}}),_.isUndefined(App.Views.Tools)&&(App.Views.Tools={}),_.isUndefined(App.Views.Tools.ClientEditor)&&(App.Views.Tools.ClientEditor={}),App.Views.Tools.ClientEditor.ClientGroupForm=App.Helpers.View.extend({template:App.Templates.toolsClientEditorClientGroupForm,className:"ToolsClientEditorClientGroupForm",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{"click #save-client-group":"saveClientGroup","click #edit-client-group":"saveClientGroup"},process_save_client_group:function(){var a=this;this.model.save({},{success:function(){a.options.clientModel.set("clientGroupID",a.model.get("clientGroupsID")),a.options.clientModel.set("groupName",a.model.get("groupName")),a.elementModal.modal("hide");var b=new App.Helpers.Toast({message:"Client group edited correctly.",classType:"success",fadeOut:5e3});b.render()}})},saveClientGroup:function(){var a=this.$el;if(a.find("#client-group-form").valid())if(this.model.isNew())this.process_save_client_group();else{var b=" If you edit this client group it will affect all clients that belong to this client group.",c=new App.Views.Shared.AlertView({processFunction:"process_save_client_group",viewClass:".ToolsClientEditorClientGroupForm",msg:b,title:"Warning"}),d=new App.Helpers.Modal({view:c});d.show()}}}),_.isUndefined(App.Views.Tools)&&(App.Views.Tools={}),_.isUndefined(App.Views.Tools.ClientEditor)&&(App.Views.Tools.ClientEditor={}),App.Views.Tools.ClientEditor.Index=App.Helpers.View.extend({template:App.Templates.toolsClientEditorIndex,className:"ToolsClientEditorIndex",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.collection.sortBy="clientName",this.collection.sort(),this.collection.fetch({success:function(){b.options.clientID&&b.$el.find('[data-client-id="'+b.options.clientID+'"]').first().click()}})},events:{"click #new-client":"newClient","click .editClient":"editClient"},afterRender:function(){this.options.clickNew===!0&&this.$el.find("#new-client").click()},_clientForm:function(a){var b=new App.Views.Tools.ClientEditor.ClientForm({model:a,collection:this.collection,urlPath:"tools/client_editor"}),c=new App.Helpers.Modal({view:b,sizeModal:"modal-lg"});c.show()},newClient:function(){var a=new App.Models.Client;this._clientForm(a)},editClient:function(a){var b=$(a.currentTarget),c=new App.Models.Client({clientID:b.data("client-id")});this._clientForm(c)}}),_.isUndefined(App.Views.Tools)&&(App.Views.Tools={}),_.isUndefined(App.Views.Tools.ClientEditor)&&(App.Views.Tools.ClientEditor={}),App.Views.Tools.ClientEditor.TimekeeperRatesForm=App.Helpers.View.extend({template:App.Templates.toolsClientEditorTimekeeperRatesForm,className:"ToolsClientEditorTimekeeperRatesForm",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.showLoader(),this.tkCollection=new App.Collections.TimeKeeperRatesPerClient,this.uniqueClassifications=[],this.usersCol=new Uit.Collection,this.usersCol.sortBy="last",this.colModules=new App.Collections.Modules,this.colModules.fetch();var b=this;$.get("api/Time_keeper_rates_controller/get_timeKeeper_classification_per_client/",{clientID:this.options.clientID},function(a){b.tkCollection.reset(a),b._resetUserColumns()}).always(function(){b.removeLoader()}),$.get("api/Time_keeper_rates_controller/get_users_for_tk_editing_per_client/",{clientID:this.options.clientID},function(a){b.usersCol.reset(a),b.usersCol.sort(),b._renderUsers()})},events:{"click .saveTk":"saveTK","click #new-tk":"addNewTK",'change [name="user-tk-checkbox"]':"checkParentHeader","click .saveSingleUserTk":"saveSingleUserTK","click .saveAllUsersTK":"saveAllUsersTK","click .delete-tk":"deleteTK","change .header-check":"headerClicked"},deleteTK:function(a){a.preventDefault(),a.stopPropagation();var b=$(a.currentTarget),c=b.data("cid"),d=this,e=this.tkCollection.get(c);this.tkCollection.remove(e),e.get("tkRateID")&&(this.showLoader(),e.destroy({success:function(){var a=new App.Helpers.Toast({message:"TK Deleted. Remember to save users to update the change.",classType:"warning",fadeOut:3e3});a.render(),d.tkCollection.reset(d.tkCollection.models),d.tkCollection.sort(),d._resetUserColumns(),d.removeLoader()},error:function(){var a=new App.Helpers.Toast({message:"Tk Deletion Failed.",classType:"danger",fadeOut:3e3});a.render(),d.removeLoader()}}))},_initHeaderCheckboxParent:function(){var a=this;_.each(this.uniqueClassifications,function(b){a._processParenCheck(b)})},_processParenCheck:function(a){var b=this.$el,c=b.find('[data-unqclasschild="'+a+'"]'),d=!1,e=!1;_.each(c,function(a){var b=$(a);b.is(":checked")?d=!0:e=!0}),(d===!1&&e===!0||d&&e)&&b.find('[data-unqclassparent="'+a+'"]').prop("checked",!1),d===!0&&e===!1&&b.find('[data-unqclassparent="'+a+'"]').prop("checked",!0)},checkParentHeader:function(a){var b=$(a.currentTarget),c=b.data("unqclasschild");this._processParenCheck(c)},headerClicked:function(a){var b=$(a.currentTarget),c=this.$el,d=b.data("unqclassparent");c.find('[data-unqclasschild="'+d+'"]').prop("checked",!0),b.is(":checked")?c.find('[data-unqclasschild="'+d+'"]').prop("checked",!0):c.find('[data-unqclasschild="'+d+'"]').prop("checked",!1)},saveAllUsersTK:function(){var a=this.$el,b=this,c=a.find("#users-tk-table-body tr"),d={},e=[];_.each(c,function(a){a=$(a);var c=a.find('[name="user-tk-checkbox"]');_.each(c,function(c){if($(c).is(":checked")){var d={};d.classification=$(c).val(),d.clientID=b.options.clientID,d.userID=$(a).data("userid"),e.push(d)}})}),d.classificationsArr=e,d.clientID=b.options.clientID,this.showLoader(),$.post("api/user_controller/edit_all_users_tks_per_client",JSON.stringify(d),function(a){b.usersCol.reset(a),b.usersCol.sort();var c=new App.Helpers.Toast({message:"All users saved successfully.",classType:"success",fadeOut:5e3});c.render(),b.removeLoader()})},saveSingleUserTK:function(a){var b=$(a.currentTarget),c=b.data("userid"),d=b.data("user-cid"),e=b.parent().find('[name="user-tk-checkbox"]'),f=[],g={},h=this;_.each(e,function(a){if($(a).is(":checked")){var b={};b.classification=$(a).val(),b.clientID=h.options.clientID,b.userID=c,f.push(b)}}),g.clientID=this.options.clientID,g.userID=c,g.classificationsArr=f,this.showLoader(),$.post("api/user_controller/edit_user_tk_classifications_per_client",JSON.stringify(g),function(a){var b=h.usersCol.get(d);b.set("tk_classifications",f);var c=new App.Helpers.Toast({message:a.msg,classType:"success",fadeOut:5e3});c.render(),h.removeLoader()})},afterRender:function(){this.showLoader()},_renderUsers:function(){var a=this.$el,b=this,c="";a.find("#users-tk-table-body").children().remove(),_.each(this.usersCol.models,function(a){c+='\n            <tr class="user-tk-row" data-user-cid="'+a.cid+'" data-userid="'+a.get("user_id")+'">            \n            <td>\n              '+a.get("last")+" "+a.get("first")+", "+a.get("email")+"\n            </td>";var d=a.get("tk_classifications");_.each(b.uniqueClassifications,function(a){var b=_.find(d,function(b){return b.classification===a});c+=b?'<td><span class="showColumn v-hidden p-right-10 font-size-12 font-style-italic">'+a+'</span><input type="checkbox" name="user-tk-checkbox"  data-unqclasschild="'+a+'"     value="'+a+'" checked /></td>':'<td><span class="showColumn v-hidden p-right-10 font-size-12 font-style-italic">'+a+'</span><input type="checkbox" name="user-tk-checkbox"  data-unqclasschild="'+a+'"     value="'+a+'" /></td>'}),c+='\n              <td class="saveSingleUserTk" data-user-cid="'+a.cid+'" data-userid="'+a.get("user_id")+'" >\n                 <button class="btn btn-success  font-size-10 p-3 p-left-5 p-right-5"><span class="fa fa-save"></span></button>\n              </td>\n            </tr>            \n'}),a.find("#users-tk-table-body").html(c),this._initHeaderCheckboxParent()},_resetUserColumns:function(){var a=[];_.each(this.tkCollection.models,function(b){a.push(b.get("classification"))}),this.uniqueClassifications=_.uniq(a),this._renderUsers()},addNewTK:function(){var a=new App.Models.TimekeeperRate({module_type_id:1});this.tkCollection.add(a)},_setClassificationChange:function(a){var b=this;_.each(this.tkCollection.models,function(c){var d=!1;if(_.each(b.uniqueClassifications,function(a){c.get("classification")===a&&(d=!0)}),!d){var e=c.get("classification");_.each(b.usersCol.models,function(b){var c=b.get("tk_classifications");_.each(c,function(b){b.classification===a&&(b.classification=e)})})}})},_compareTablesAndEditUsersClassification:function(){var a=this;_.each(this.uniqueClassifications,function(b){var c=a.tkCollection.where({classification:b});0===c.length&&a._setClassificationChange(b)})},saveTK:function(a){a.preventDefault(),a.stopPropagation();var b=$(a.currentTarget),c=b.data("cid"),d=this,e=this.tkCollection.get(c),f=e.get("classification")&&""!==e.get("classification").trim(),g=e.get("classificationDescription")&&""!==e.get("classificationDescription").trim(),h=e.get("tkType")&&""!==e.get("tkType").trim(),i=e.get("tkRate")>=0,j=e.get("tkRateID")?!1:!0;if(e.set("clientID",this.options.clientID),f&&g&&h&&i)this.showLoader(),e.save({},{success:function(){var a=new App.Helpers.Toast({message:"Time keeper saved successfully. Remember to save users also.",classType:"success",fadeOut:5e3});a.render(),j||d._compareTablesAndEditUsersClassification(),d._resetUserColumns(),d.removeLoader()},error:function(){var a=new App.Helpers.Toast({message:"Error saving.",classType:"danger",fadeOut:5e3});a.render(),d.removeLoader()}});else{var k=new App.Helpers.Toast({message:"All fields are required and can not be blank",classType:"warning",fadeOut:5e3});k.render()}}}),_.isUndefined(App.Views.Tools)&&(App.Views.Tools={}),_.isUndefined(App.Views.Tools.ContactCenter)&&(App.Views.Tools.ContactCenter={}),_.isUndefined(App.Views.Tools.ContactCenter.Doctors)&&(App.Views.Tools.ContactCenter.Doctors={}),App.Views.Tools.ContactCenter.Doctors.Index=App.Helpers.View.extend({template:App.Templates.toolsContactCenterDoctorsIndex,className:"index",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.PagesNumbers=new App.Helpers.Collection,this.currentPosition=0,this.evenTypeIDSerach="0",this.sortBy="doctorLastName",this.sortDir="asc",this.listenTo(this.collection,"sync change",this.prepopulateData)},events:{"click .doctor-row":"editDoctor","click #new-doctor":"newDoctor","click .doctors-sortable":"sortDoctors","click .icon-typeahead-down":"showAllEntities","click #filter-btn":"filterButton","click #filter-btn-close":"filterButton","change #doctorRating":"getFilteredDoctors","change #offset":"getFilteredDoctors","click .sequential-counter":"movePosition"},updateDoctorsTypeIdSearch:function(a){var b=this.$el;b.find(".typeahead.doctor_specialty_typeahead").data("engine").remote.urlBuild.resource=a,b.find(".typeahead.doctor_subspecialty_typeahead").data("engine").remote.urlBuild.resource=a,b.find(".typeahead.doctor_physical_city_typeahead").data("engine").remote.urlBuild.resource=a},afterRender:function(){var a=this.$el,b=this,c=[{elemClass:".typeahead.doctor_specialty_typeahead",url:{url:"/api/typeahead_controller/search_doctors_specialty"}},{elemClass:".typeahead.doctor_subspecialty_typeahead",url:{url:"/api/typeahead_controller/search_doctors_subspecialty"}},{elemClass:".typeahead.doctor_physical_city_typeahead",url:{url:"/api/typeahead_controller/search_doctor_physical_city"}},{elemClass:".typeahead.doctor_typeahead",url:{url:"/api/typeahead_controller/search_doctors"}},{elemClass:".typeahead.doctor_facility_typeahead",url:{url:"/api/typeahead_controller/search_doctor_facilities"}}],d=[],e=function(a){var c=$(a.currentTarget),d=c.attr("name");switch(d){case"doctorSpecialty":_.isUndefined(b.filterDoctorSpecialtyText)||c.val()===b.filterDoctorSpecialtyText||b.resetDoctorSpecialty();break;case"doctorSubspecialty":_.isUndefined(b.filterDoctorSubspecialtyText)||c.val()===b.filterDoctorSubspecialtyText||b.resetDoctorSubspecialty();break;case"doctorPhysicalCity":_.isUndefined(b.filterDoctorPhysicalCityText)||c.val()===b.filterDoctorPhysicalCityText||b.resetDoctorPhysicalCity();break;case"doctor":_.isUndefined(b.filterDoctorText)||c.val()===b.filterDoctorText||b.resetDoctor();break;case"doctorFacility":_.isUndefined(b.filterDoctorFacilityText)||c.val()===b.filterDoctorFacilityText||b.resetDoctorFacility()}};$.each(c,function(c,f){d[c]=App.Helpers.initTypeahead({view:b,elemClass:f.elemClass,urlBuild:f.url,processFunction:$.proxy(b.processTypeaheadFilters,b)}),a.find(f.elemClass).data("filter-id",0),d[c].focusout(e)})},resetDoctorSpecialty:function(){this.filterDoctorSpecialty=void 0,this.filterDoctorSpecialtyText=void 0,this.getFilteredDoctors(!1)},resetDoctorSubspecialty:function(){this.filterDoctorSubspecialty=void 0,this.filterDoctorSubspecialtyText=void 0,this.getFilteredDoctors(!1)},resetDoctorPhysicalCity:function(){this.filterDoctorPhysicalCity=void 0,this.filterDoctorPhysicalCityText=void 0,this.getFilteredDoctors(!1)},resetDoctor:function(){this.filterDoctor=void 0,this.filterDoctorText=void 0,this.getFilteredDoctors(!1)},resetDoctorFacility:function(){this.filterDoctorFacility=void 0,this.filterDoctorFacilityText=void 0,this.getFilteredDoctors(!1)},filterButton:function(){var a=this.$el;a.find("#file-filters").slideToggle("fast"),a.find("#filter-btn").toggle(),a.find("#filter-btn-close").toggle()},_hideForwardButtons:function(){var a=this.$el;a.find("#load-files-next").hide(),a.find("#load-files-last").hide()},_hideBackButtons:function(){var a=this.$el;a.find("#load-files-prev").hide(),a.find("#load-files-first").hide()},_showForwardButtons:function(){var a=this.$el;a.find("#load-files-next").show(),a.find("#load-files-last").show()},_showBackButtons:function(){var a=this.$el;a.find("#load-files-prev").show(),a.find("#load-files-first").show()},sortDoctors:function(a){var b=$(a.currentTarget),c=this.$el;this.sortBy=b.data("sort"),b.find(".fa-chevron-down").length?this.sortDir="asc":this.sortDir="DESC",c.find("#doctors-heads .fa").remove(),b.append("asc"===this.sortDir?'<i class="fa fa-chevron-up"></i>':'<i class="fa fa-chevron-down"></i>'),this.getFilteredDoctors(!1)},newDoctor:function(){var a=new App.Models.Doctors,b=new App.Views.Files.EventTabs.DoctorsForm({model:a,doctorFacilitiesTypeaheadID:0}),c=new App.Helpers.Modal({view:b,sizeModal:"modal-lg"});c.show()},editDoctor:function(a){var b=this,c=$(a.currentTarget);this.doctorModel=new App.Models.Doctors({doctorID:c.data("id")}),this.doctorModel.fetch({success:function(){var a=new App.Views.Files.EventTabs.DoctorsForm({model:b.doctorModel,doctorFacilitiesTypeaheadID:0}),c=new App.Helpers.Modal({view:a,sizeModal:"modal-lg"});c.show()}})},processTypeaheadFilters:function(a){console.log(a),_.isUndefined(a.doctorID)?_.isUndefined(a.facilityID)?_.isUndefined(a.doctorSpecialty)?_.isUndefined(a.subSpecialtyID)?_.isUndefined(a.physicalCity)||(this.filterDoctorPhysicalCity=a.physicalCity,this.filterDoctorPhysicalCityText=a.typeaheadResult):(this.filterDoctorSubspecialty=a.subSpecialtyID,this.filterDoctorSubspecialtyText=a.typeaheadResult):(this.filterDoctorSpecialty=a.doctorSpecialty,this.filterDoctorSpecialtyText=a.typeaheadResult):(this.filterDoctorFacility=a.facilityID,this.filterDoctorFacilityText=a.typeaheadResult):(this.filterDoctor=a.doctorID,this.filterDoctorText=a.typeaheadResult),this.getFilteredDoctors(!0)},movePosition:function(a){var b=$(a.currentTarget);switch(b.attr("id")){case"load-files-first":$("#offset option").first().next().prop("selected",!0).change();break;case"load-files-prev":$("#offset option:selected").prev().length>0&&$("#offset option:selected").prev().prop("selected",!0).change();break;case"load-files-next":$("#offset option:selected").next().length>0&&$("#offset option:selected").next().prop("selected",!0).change();break;case"load-files-last":$("#offset option").last().prop("selected",!0).change()}},getFilteredDoctors:function(a){var b=this.$el,c=this,d={};c.showLoader(),d.orderBy=this.sortBy,d.orderDirection=this.sortDir,-1===b.find("#offset option:selected").data("min")?(d.maxRows=0,d.offset=this.totalRows):a!==!0&&"doctorRating"!==$(a.currentTarget).attr("id")?(d.maxRows=this.options.paginationConstant,d.offset=b.find("#offset option:selected").data("min")):d.offset=this.options.paginationConstant,"-1"!==b.find("#doctorRating option:selected").val()&&(d.doctorRating=b.find("#doctorRating option:selected").val()),this.updateDoctorsTypeIdSearch(this.evenTypeIDSerach),_.isUndefined(this.filterDoctorSpecialty)||(d.doctorSpecialty=this.filterDoctorSpecialty),_.isUndefined(this.filterDoctorSubspecialty)||(d.subSpecialtyID=this.filterDoctorSubspecialty),_.isUndefined(this.filterDoctorPhysicalCity)||(d.physicalCity=this.filterDoctorPhysicalCity),_.isUndefined(this.filterDoctor)||(d.doctorID=this.filterDoctor),_.isUndefined(this.filterDoctorFacility)||(d.facilityID=this.filterDoctorFacility),$.ajax({url:"/api/doctors_controller/get_doctors_pagination",data:d,success:function(a){c.totalRows=a[1],c.prepopulateData(),c.collection.reset(),c.collection.add(a[0]),c.collection.sortBy=c.sortBy,c.collection.sortOrder=c.sortDir,c.collection.sort(),c.create_doctor_table(c.collection),c.removeLoader()}})},create_doctor_table:function(a){var b=this.$el,c="";_.each(a.models,function(a){var b=a.get("subSpecialty"),d=a.get("facilities");if(c+="<tr>",c+='   <td class="doctor-row cursor-pointer" data-id="'+a.get("doctorID")+'"><span>'+a.get("doctorLastName")+", "+a.get("doctorFirstName")+" "+a.get("doctorMiddleName")+"</span></td>",_.isUndefined(d))c+='   <td class="doctor-row cursor-pointer" data-id="'+a.get("doctorID")+'"></td>';else if(d.length>1){var e="";_.each(d,function(a){e+="- "+a.facilityName+"<br/>"}),c+='   <td class="doctor-row cursor-pointer c-blue-link multiple-subSpecialties" data-id="'+a.get("doctorID")+'">',c+='       <span data-toggle="popover" title="Subspecialties" data-content="'+e+'" data-html="true"><i class="fa fa-search"></i> Multiple</span>',c+="   </td>"}else 1===d.length&&(c+='   <td class="doctor-row cursor-pointer" data-id="'+a.get("doctorID")+'"><span>'+d[0].facilityName+"</span></td>");if(c+='   <td class="doctor-row cursor-pointer" data-id="'+a.get("doctorID")+'"><span>'+a.get("doctorSpecialty")+"</span></td>",_.isUndefined(b)||_.isUndefined(b.multiple))c+='   <td class="doctor-row cursor-pointer" data-id="'+a.get("doctorID")+'"></td>';else if(1===b.multiple){var f="";_.each(b.subSpecialties,function(a){f+="- "+a.subSpecialtyName+"<br/>"}),c+='   <td class="doctor-row cursor-pointer c-blue-link multiple-subSpecialties" data-id="'+a.get("doctorID")+'">',c+='       <span data-toggle="popover" title="Subspecialties" data-content="'+f+'" data-html="true"><i class="fa fa-search"></i> Multiple</span>',c+="   </td>"}else 0===b.multiple&&(c+='   <td class="doctor-row cursor-pointer" data-id="'+a.get("doctorID")+'"><span>'+b.subSpecialties[0].subSpecialtyName+"</span></td>");c+='   <td class="doctor-row cursor-pointer" data-id="'+a.get("doctorID")+'"><span>'+a.get("physicalCity")+"</span></td>",c+='   <td class="doctor-row cursor-pointer" data-id="'+a.get("doctorID")+'"><span>'+a.get("doctorRating")+"</span></td>",c+="</tr>"}),b.find("#doctors-body-table").html(""!==c?c:'<tr><td class="t-align-center font-bold" colspan="6">No records</td></tr>'),b.find('[data-toggle="popover"]').popover({trigger:"hover"})},set_pagination:function(){var a=this,b=this.$el,c=0,d=0,e=Math.ceil(this.totalRows/this.options.paginationConstant);this.prevTotalRows=this.totalRows,this.PagesNumbers.reset(),_.times(e,function(b){d=d+a.options.paginationConstant>a.totalRows?a.totalRows:d+a.options.paginationConstant,a.PagesNumbers.add({position:b,min:c,max:d}),c+=a.options.paginationConstant}),this.PagesNumbers.sortBy="position",this.PagesNumbers.sortOrder="asc",this.PagesNumbers.sort(),_.isUndefined(b)||b.find("#offset option:selected").next().attr("selected","selected")},calculateShowForwardBackButtons:function(){var a=this.$el;_.isUndefined(a)||(this.totalRows<this.options.paginationConstant?(this._hideForwardButtons(),this._hideBackButtons()):a.find("#offset option:last").is(":selected")?(this._hideForwardButtons(),this._showBackButtons()):a.find("#offset option:eq(1)").is(":selected")?(this._hideBackButtons(),this._showForwardButtons()):-1===a.find("#offset option:selected").data("min")?(this._hideBackButtons(),this._hideForwardButtons(),a.find("#from-offset").html(0),a.find("#to-offset").html(this.totalRows)):(this._showBackButtons(),this._showForwardButtons()))},prepopulateData:function(){var a=this.$el;this.collection.sortBy="doctorLastName",this.collection.sortOrder="asc",this.collection.sort(),this.totalRows!==this.prevTotalRows&&this.set_pagination(),-1!==$("#offset option:selected").data("min")&&(_.isUndefined(a)||(a.find("#from-offset").html($("#offset option:selected").data("min")),a.find("#to-offset").html($("#offset option:selected").data("max")))),this.totalRows===!1&&(this.totalRows=0,_.isUndefined(a)||(a.find("#from-offset").html(0),a.find("#to-offset").html(0))),this.calculateShowForwardBackButtons()}}),_.isUndefined(App.Views.Tools)&&(App.Views.Tools={}),_.isUndefined(App.Views.Tools.ContactCenter)&&(App.Views.Tools.ContactCenter={}),_.isUndefined(App.Views.Tools.ContactCenter.Doctors)&&(App.Views.Tools.ContactCenter.Doctors={}),App.Views.Tools.ContactCenter.Doctors.SubspecialtiesForm=App.Helpers.View.extend({template:App.Templates.toolsContactCenterDoctorsSubspecialtiesForm,className:"subspecialtiesForm",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.listenTo(this.model,"request",function(){b.showLoader(".modal-body")}),this.listenTo(this.model,"sync error",function(){b.removeLoader(".modal-body")})},events:{"click #save-subspecialty":"save"},save:function(){var a=this,b=this.$el,c=!1;this.model.isNew()&&(c=!0),b.find("#from-subspecialty").valid()&&(this.model.set("officePhone",this.$el.find('[name="officePhone"]').val()),this.model.set("faxNumber",this.$el.find('[name="faxNumber"]').val()),this.model.save({},{success:function(b){a.elementModal.modal("hide");var d=new App.Helpers.Toast({message:"Subspecialty Saved Correctly",classType:"success",fadeOut:5e3});if(d.render(),c){var e=$(".doctorsForm").data("view");e.subspecialtiesCol.add(b)}else a.options.currenModel.clear(),a.options.currenModel.set(b.attributes)},error:function(a,b){var c=new App.Helpers.Toast({message:b.responseJSON.error,classType:"danger",fadeOut:5e3});c.render()}}))}}),_.isUndefined(App.Views.Users)&&(App.Views.Users={}),App.Views.Users.Access=App.Helpers.View.extend({template:App.Templates.usersAccess,className:"access",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.user_data=this.options.user_data,this.listenTo(this.collection,"sync",this.renderAccessTree)},events:{"click #save-acl":"editPrivilages","click [name=select_all]":"selectAll",'change [name="acl-can-edit-all"]':"canEditAll","click .parent-input":"parentChecked","click .child-input":"childChecked","change .parent-select":"parentSelected","click .toggle-children":"toggleChildrenAccessGroup"},parentSelected:function(a){var b=$(a.currentTarget),c=b.parents(".access-group-checkboxes").next().find(".child-select");c.val(b.val())},childChecked:function(a){var b=$(a.currentTarget),c=b.parents(".access-group-children").prev(".access-group-checkboxes"),d=b.parents(".access-group-children").find(".child-elem input");b.is(":checked")?!function(){c.find("input:first").prop("indeterminate",!0);var a=0;_.each(d,function(b){b=$(b),b.is(":checked")&&(a++,d.length===a&&(c.find("input:first").prop("indeterminate",!1),c.find("input:first").prop("checked","checked")))})}():d.is(":checked")?c.find("input:first").prop("indeterminate",!0):(c.find("input:first").prop("indeterminate",!1),c.find("input:first").prop("checked","")),this._handlerSelectAll()},selectAll:function(a){var b=$(a.currentTarget),c=this.$el;c.find("input[type=checkbox]:not([name=select_all])").prop("checked",b.is(":checked"))},canEditAll:function(a){var b=$(a.currentTarget);this.$el.find(".parent-select,.child-select").val(b.val())},_handlerSelectAll:function(){var a=this.$el,b=a.find('input[type="checkbox"]:not([name="select_all"]):checked'),c=a.find('input[type="checkbox"]:not([name="select_all"])');c.length===b.length?a.find('[name="select_all"]').prop("checked","checked"):a.find('[name="select_all"]').removeAttr("checked")},_handleCanEditAll:function(){this.$el.find('[name="select_all"]').prop("checked")&&this.$el.find('[name="acl-can-edit-all"]').val(this.$el.find(".parent-select:eq(0)").val())},parentChecked:function(a){var b=$(a.currentTarget),c=b.parents(".access-group-checkboxes").next().find(".child-elem");b.is(":checked")?_.each(c,function(a){a=$(a),a.find("input:first").prop("checked","checked")}):_.each(c,function(a){a=$(a),a.find("input:first").prop("checked","")}),this._handlerSelectAll()},editPrivilages:function(){var a,b=this,c=new App.Models.Access;c.set("user_id",this.model.get("id"));var d=_.map(this.$el.find(".checkbox"),function(a){return a=$(a),a.find('[type="checkbox"]').is(":checked")||a.find('[type="checkbox"]').prop("indeterminate")?{access_group_id:a.attr("access-group-id"),can_edit:a.find('select[name="acl-can-edit"]').val()}:void 0});d=_.compact(d),c.set("access_group_ids",d),c.save({},{success:function(){a=new App.Helpers.Toast({message:"User Access Edited correctly, make sure to tell that user to logout for effects to take place.",classType:"success",fadeOut:5e3}),a.render();var c=void 0;if(c=_.map(b.$el.find(".checkbox"),function(a){return a=$(a),a.find('[type="checkbox"]').is(":checked")||a.find('[type="checkbox"]').prop("indeterminate")?{access_group_id:parseInt(a.attr("access-group-id"),10),parent_id:parseInt(a.attr("parent-id"),10)||null,description:a.attr("description"),can_edit:parseInt(a.find('select[name="acl-can-edit"]').val(),10)}:void 0}),b.model.set("acl",c),b.model.get("email")===App.loginModel.get("email")){c=_.compact(c);var d=new Backbone.Collection;d.add(c),App.loginModel.get("acl")instanceof Backbone.Collection&&App.loginModel.get("acl").reset(),App.loginModel.set("acl",d),sessionStorage.setItem("acl",JSON.stringify(c)),localStorage.setItem("currentSessionData",JSON.stringify(sessionStorage)),location.reload()}},error:function(){a=new App.Helpers.Toast({message:"Error: While saving user privileges.",classType:"danger",fadeOut:5e3}),a.render()}})},renderAccessTree:function(){var a=this,b=new App.Collections.Modules,c=a.options.collection;b.fetch({success:function(b,d){var e=new Backbone.Collection;e.add(a.user_data.get("acl")),_.each(d,function(b,d){var f=0===d?"active in":"",g="module-group-"+b.moduleID;a.$el.find(".nav-tabs").append('<li role="presentation" class="'+f+'">\n                          <a href="#'+g+'" aria-controls="'+g+'" role="tab" data-toggle="tab">\n                            '+b.moduleDescription+"\n                          </a>\n                        </li>"),a.$el.find(".tab-content").append('<div role="tabpanel" \n                      class="tab-pane '+f+' fade" \n                      id="'+g+'"></div>'),_.each(c.models,function(c){c.get("module_id")===b.moduleID&&!function(){var b=e.findWhere({access_group_id:c.get("access_group_id")}),d=0;_.isUndefined(b)||(d=b.get("can_edit"));var f="access-group-"+c.get("access_group_id"),h='<div id="'+f+'" class="access-group-checkboxes clearfix">';a.$el.find("#"+g).append(h);var i='<div class="checkbox parent-elem-container b-grey-tabs cursor-pointer row"\n                             access-group-id="'+c.get("access_group_id")+'"\n                             description="'+c.get("description")+'">\n                                <div class="parent-elem row">\n                                    <div class="col-md-3">\n                                        <a href="#" class="toggle-children m-right-25"\n                                           data-group-id="'+c.get("access_group_id")+'"\n                                           title="Expand/Collapse child permissions">\n                                            <span class="fa fa-caret-right"></span>\n                                        </a>\n                                        <input class="parent-input" type="checkbox"\n                                               value="'+c.get("access_group_id")+'" name="acl">\n                                        <span class="font-bold toggle-children"\n                                              data-group-id="'+c.get("access_group_id")+'">\n                                            '+c.get("description")+" (id: "+c.get("access_group_id")+')\n                                        </span>\n                                    </div>\n                                    <div class="col-md-2">\n                                        <select class="parent-select form-control" name="acl-can-edit">\n                                            <option value="1" '+(d?"selected":"")+'>Can edit</option>\n                                            <option value="0" '+(d?"":"selected")+'>Can view</option>\n                                        </select>\n                                    </div>\n                                    <div class="col-md-7 '+(_.isNull(c.get("note"))?"hidden":"text-help box-shadow b-blue-new-casefriend")+'">\n                                        '+(_.isNull(c.get("note"))?"":c.get("note"))+"\n                                    </div>\n                                </div>\n                            </div>";

a.$el.find("#"+f).html(i),a.$el.find("#"+f).after('<div id="'+f+'-children" \n                              class="access-group-children bgc-white p-15 box-shadow">');var j=JSON.parse(c.get("children"));_.each(j,function(b){var d=e.findWhere({access_group_id:b.access_group_id}),g=void 0,h=0;_.isUndefined(d)||(g='checked="checked"',h=d.get("can_edit"));var i='<div class="checkbox child-elem row"\n                                 access-group-id="'+b.access_group_id+'"\n                                 parent-id="'+c.get("access_group_id")+'"\n                                 description="'+b.description+'">\n                                <div class="col-md-5">\n                                    <input class="child-input" type="checkbox" '+g+'\n                                           value="'+b.access_group_id+'" name="acl">\n                                    '+b.description+" (id: "+b.access_group_id+')\n                                </div>\n                                <div class="col-md-2">\n                                    <select class="child-select form-control"\n                                            name="acl-can-edit">\n                                        <option value="1" '+(h?"selected":"")+'>Can edit</option>\n                                        <option value="0" '+(h?"":"selected")+'>Can view</option>\n                                    </select>\n                                </div>\n                                <div class="col-md-5 '+(_.isNull(b.note)?"hidden":"text-help box-shadow b-blue-new-casefriend")+'">\n                                    '+(_.isNull(b.note)?"":b.note)+"\n                                </div>\n                            </div>";a.$el.find("#"+f+"-children").append(i)}),a.$el.find("#"+g).append("</div>")}()})}),a._checkParents(),a._handlerSelectAll(),a._handleCanEditAll(),a.applyPermissions()}})},toggleChildrenAccessGroup:function(a){var b=$(a.currentTarget),c="A"===b[0].tagName?b.find(".fa"):b.prev().prev().children(".fa"),d=b.data("group-id"),e="#access-group-"+d+"-children";a.preventDefault(),$(e).slideToggle(),c.hasClass("fa-caret-right")?c.removeClass("fa-caret-right").addClass("fa-caret-down"):c.hasClass("fa-caret-down")&&c.removeClass("fa-caret-down").addClass("fa-caret-right")},_checkParents:function(){var a=this,b=this.$el,c=new Backbone.Collection,d=b.find(".parent-input");c.add(a.user_data.get("acl")),_.each(d,function(b){var d=$(b),e=parseInt(d.val(),10),f=JSON.parse(a.options.collection.findWhere({access_group_id:e}).get("children")),g=c.where({parent_id:e});_.isNull(f)?_.isUndefined(c.findWhere({access_group_id:e}))?d.removeProp("checked"):d.prop("checked","checked"):0===g.length?(d.prop("checked",!1),d.prop("indeterminate",!1)):f.length>g.length?d.prop("indeterminate",!0):f.length===g.length&&d.prop("checked","checked")})}}),_.isUndefined(App.Views.Users)&&(App.Views.Users={}),_.isUndefined(App.Views.Users.AccessTabs)&&(App.Views.Users.AccessTabs={}),App.Views.Users.AccessTabs.Access=App.Helpers.View.extend({template:App.Templates.usersAccessTabsAccess,className:"UsersAccessTabsAccess",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{}}),_.isUndefined(App.Views.Users)&&(App.Views.Users={}),_.isUndefined(App.Views.Users.AccessTabs)&&(App.Views.Users.AccessTabs={}),App.Views.Users.AccessTabs.Children=App.Helpers.View.extend({template:App.Templates.usersAccessTabsChildren,className:"UsersAccessTabsChildren",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{}}),_.isUndefined(App.Views.Users)&&(App.Views.Users={}),App.Views.Users.AssignClientManager=App.Helpers.View.extend({template:App.Templates.usersAssignClientManager,className:"UsersAssignClientManager",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{"click #save-assign-manager":"saveAssignClientManager","click .icon-typeahead-down":"showAllEntities"},afterRender:function(){App.Helpers.initTypeahead({view:this,elemClass:".typeahead.client_manager_typeahead",urlBuild:{url:"api/typeahead_controller/search_client_rep_for_all_clients_of_client_manager",resource:this.model.get("user_id")},processFunction:$.proxy(this.processUserManagerFunction,this),nameKey:"id",cleanValueAfterEnter:!0})},processUserManagerFunction:function(a){return this.collection.add(a),!1},saveAssignClientManager:function(a){a.preventDefault(),a.stopPropagation();var b=this,c=new App.Models.ClientRepToClient;c.set("user_id",this.model.get("id"));var d=this.$el.find('[name="clientRep"]:checked'),e=this.$el.find('[name="clientRep"]:not(:checked)'),f=[],g=[];_.each(d,function(a){a=$(a),f.push(Math.floor(a.attr("id")))}),_.each(e,function(a){a=$(a),g.push(Math.floor(a.attr("id")))}),c.set("clientRep_ids",f),c.set("clientRep_ids_removed",g),c.set("user_id",this.model.get("id")),c.save({},{success:function(){$("#assign-da-manager").modal("hide"),b.model.fetch({data:$.param({id:b.model.id}),success:function(){var a=$(".UsersClientManagerSubordinates").data("view");a.collection.reset(),a.collection.add(b.model.get("client_manager_subordinates"));var c=new App.Helpers.Toast({message:"Employee assignment successfully.",classType:"success",fadeOut:5e3});c.render()}})}})}}),_.isUndefined(App.Views.Users)&&(App.Views.Users={}),App.Views.Users.AssignCompany=App.Helpers.View.extend({template:App.Templates.usersAssignCompany,className:"assignCompany",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{"click #save-assign-companies":"saveAssignCompanies","click #add-assign-clients":"addAssignClients","click .clients-adj":"removeFromClientList",'click input[name="primaryDA"]':"setPrimaryCompanie","click .icon-typeahead-down":"showAllEntities"},processFunction:function(a){var b,c=this.$el;this.collection.add(a),this.options.assignClient&&this.options.collection.add(a),c.find('input[name="primaryDA"][value="'+a.id+'"]').attr("checked",!1),b=this.collection.findWhere({isPrimaryLocation:1}),b&&c.find('input[name="primaryDA"][value="'+b.get("clientID")+'"]').attr("checked",!0),c.find(".typeahead.assignFirmLocation").typeahead("val","")},afterRender:function(){var a,b=this.$el,c=this,d=c.model.isClientRep()||c.options.assignClient?"search_clients":"search_dafirm_locations",e=this.collection.findWhere({isPrimaryLocation:1}),f=c.model.isClientRep()||c.options.assignClient?"primaryDA":"primaryLocation",g=c.model.isClientRep()||c.options.assignClient?"clientID":"ua_firm_location_id";_.isUndefined(e)||_.isUndefined(b.find('input[name="'+f+'"][value="'+e.get("clientID")+'"]'))||(a=b.find('input[name="'+f+'"][value="'+e.get(g)+'"]'),a.attr("checked",!0)),App.Helpers.initTypeahead({view:this,elemClass:".typeahead.assignFirmLocation",urlBuild:{url:"api/typeahead_controller/"+d},processFunction:$.proxy(this.processFunction,this),nameKey:"companyName",cleanValueAfterEnter:!0})},setPrimaryCompanie:function(a){var b=$(a.currentTarget);if(this.model.isNew()){var c=this.collection.findWhere({clientID:parseInt($(b).attr("value"))});_.each(this.collection.models,function(a){c.get("clientID")===a.get("clientID")?a.set("isPrimaryLocation",1):a.set("isPrimaryLocation",0)})}},saveAssignCompanies:function(a){a.preventDefault(),a.stopPropagation();var b,c=this,d="",e="primaryDA",f="primaryCompanyID",g=this.$el;c.model.isClientRep()?(b=new App.Models.ClientRepClient,d="Client assignment successfully."):(b=new App.Models.employeeToFirmLocation,d="Firm Location assignment successfully.",e="primaryLocation",f="isPrimaryLocation"),b.set("user_id",this.model.get("id"));var h=this.$el.find('[name="companies"]:checked'),i=[];_.each(h,function(a){a=$(a),i.push(a.attr("id"))}),b.set("client_ids",i),b.set("user_id",this.model.get("id")),_.isUndefined(g.find('input[name="'+e+'"]:checked').attr("value"))||b.set(f,g.find('input[name="'+e+'"]:checked').attr("value")),b.save({},{success:function(){$("#assign-company").modal("hide"),c.model.fetch({data:$.param({id:c.model.id}),success:function(){var a=$(".company").data("view");a.collection.reset(),a.collection.add(c.model.get("companies"));var b=new App.Helpers.Toast({message:d,classType:"success",fadeOut:5e3});b.render()}})},error:function(a,b){d=b.responseJSON.error;var c=new App.Helpers.Toast({message:d,classType:"danger",fadeOut:5e3});c.render()}})},addAssignClients:function(a){a.preventDefault(),a.stopPropagation(),$("#assign-company").modal("hide");var b=$(".editUser").data("view");b.employeeType()},needClients:function(){return this.model.isClientRep()||this.options.assignClient?!0:!1},removeFromClientList:function(a){var b=$(a.currentTarget),c=$(".assignCompany").data("view");c.collection.remove(b.attr("id"))}}),_.isUndefined(App.Views.Users)&&(App.Views.Users={}),App.Views.Users.AssignDAManager=App.Helpers.View.extend({template:App.Templates.usersAssignDaManager,className:"assignCompany",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{"click #save-assign-da-manager":"saveAssignDAManager","click .icon-typeahead-down":"showAllEntities"},afterRender:function(){App.Helpers.initTypeahead({view:this,elemClass:".typeahead.typeaheadEmployees",urlBuild:{url:"api/typeahead_controller/search_users_for_managers"},processFunction:$.proxy(this.processUserManagerFunction,this),nameKey:"ADManager",cleanValueAfterEnter:!0})},processUserManagerFunction:function(a){return this.collection.add(a),!1},saveAssignDAManager:function(a){a.preventDefault(),a.stopPropagation();var b=this,c=new App.Models.UAttyToManager;c.set("user_id",this.model.get("id"));var d=this.$el.find('[name="companies"]:checked'),e=this.$el.find('[name="companies"]:not(:checked)'),f=[],g=[];_.each(d,function(a){a=$(a),f.push(Math.floor(a.attr("id")))}),_.each(e,function(a){a=$(a),g.push(Math.floor(a.attr("id")))}),c.set("client_ids",f),c.set("client_ids_removed",g),c.set("user_id",this.model.get("id")),c.save({},{success:function(){$("#assign-da-manager").modal("hide"),b.model.fetch({data:$.param({id:b.model.id}),success:function(){var a=$(".daManager").data("view");a.collection.reset(),a.collection.add(b.model.get("managers"));var c=new App.Helpers.Toast({message:"Employee assignment successfully.",classType:"success",fadeOut:5e3});c.render()}})}})}}),_.isUndefined(App.Views.Users)&&(App.Views.Users={}),App.Views.Users.ClientManagerSubordinates=App.Helpers.View.extend({template:App.Templates.usersClientManagerSubordinates,className:"UsersClientManagerSubordinates",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.assignBtnBlocked=!1},events:{"click #assignSubordinatesToClientManager":"assignClientManagerSubordinates","click .btn-editManager":"editPrimaryManager","click .btn-undo":"actionUndo","click .btn-undoAll":"actionUndoAll","click .btn-saveManager":"updatePrimaryManager"},assignClientManagerSubordinates:function(a){a.stopPropagation(),a.preventDefault();var b=this.$el,c=new Uit.Collection;c.sortBy="first",c.sortOrder="asc",c.add(this.collection.models);var d=new App.Views.Users.AssignClientManager({model:this.model,collection:c});App.Helpers.htmlView(d,"#assign-client-manager-container"),b.find("#assign-client-manager").modal("show")},editPrimaryManager:function(a){var b=$(a.currentTarget),c=b.data("daid"),d=b.closest("tr").find(".label"),e=b.closest("tr").find("select"),f=new App.Helpers.Collection,g=this,h=b.html().trim(),i=this.$el.find(".custom-loader").clone().removeClass("display-none").html().trim();b.html(i),f.fetch({url:"/api/user_controller/get_managers_by_client_rep",data:{client_rep_id:c,client_manager_id:this.model.get("id")},success:function(a,c){d.hide(),e.show();var f=$("<option></option>");e.html(f),_.each(c,function(a){var b=f.clone();b.val(a.id).text(a.name),e.append(b)});var h=_.findWhere(c,{selected:1});h&&e.val(h.id),b.hide(),b.next(".control-row").show(),g.assignBtnBlocked=!0},complete:function(){b.html(h),g.removeLoader()}})},actionUndo:function(a){var b=$(a.currentTarget),c=b.closest("tr").find(".label"),d=b.closest("tr").find("select");c.show(),d.hide(),d.empty(),b.closest("div.control-row").prev("a.btn-editManager").show(),b.closest("div.control-row").hide(),this.$el.find(".control-row").is(":visible")||(this.assignBtnBlocked=!1)},actionUndoAll:function(){var a=this.$el,b=a.find(".label"),c=a.find("select");b.show(),c.hide(),c.empty(),this.assignBtnBlocked=!1,a.find("a.btn-editManager").show(),a.find("div.control-row").hide()},updatePrimaryManager:function(a){var b=$(a.currentTarget),c=b.data("daid"),d=b.closest("tr").find(".label"),e=b.closest("tr").find("select"),f=e.val(),g=b.html().trim(),h=this,i=this.$el.find(".custom-loader").clone().removeClass("display-none").html().trim(),j=this.collection.get(c);b.html(i),j.fetch({type:"POST",url:"/api/user_controller/update_primary_client_manager",data:JSON.stringify({client_rep_id:c,client_manager_id:f}),success:function(){var a=new App.Helpers.Toast({message:"Primary manager updated successfully.",classType:"success",fadeOut:5e3});a.render(),d.show(),e.hide(),e.empty(),b.closest("div.control-row").prev("a.btn-editManager").show(),b.closest("div.control-row").hide()},complete:function(){b.html(g),h.$el.find(".control-row").is(":visible")||(h.assignBtnBlocked=!1)}})}}),_.isUndefined(App.Views.Users)&&(App.Views.Users={}),App.Views.Users.ClientRepFiles=App.Helpers.View.extend({template:App.Templates.usersClientRepFiles,className:"UsersClientRepFiles",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.colWCFiles=new App.Collections.Files,this.colSubroFiles=new App.Collections.FilesSubro},events:{"click .gotoFile":"gotoFile"},afterRender:function(){this.renderData()},gotoFile:function(a){a.preventDefault(),a.stopPropagation();var b=Number($(a.currentTarget).data("id")),c=this.options.clientRepFiles,d=_.findWhere(c,{fileNumber:b}),e="";d.moduleID===App.Const.wcFileModule?e=this.colWCFiles.get(b).fileEditUrl():d.moduleID===App.Const.subroFileModule&&(e=this.colSubroFiles.get(b).fileEditUrl()),e&&Backbone.history.navigate(e,{trigger:!0})},isFileClosed:function(){return this.file.isFileClosed()},isWC:function(){return this.file.isWC()},isLien:function(){return this.file.isLien()},renderData:function(){this.colWCFiles.reset(_.where(this.options.clientRepFiles,{moduleID:App.Const.wcFileModule}));var a=_.where(this.options.clientRepFiles,{moduleID:App.Const.subroFileModule});_.each(a,function(a){a.subroFileNumber=a.fileNumber}),this.colSubroFiles.reset(a)}}),_.isUndefined(App.Views.Users)&&(App.Views.Users={}),App.Views.Users.Company=App.Helpers.View.extend({template:App.Templates.usersCompany,className:"company",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{"click #assignCompany":"assignCompany","click #createCompany":"createCompany","click #copy-to-address":"copy_to_address","click form .save-location":"editCompany"},copy_to_address:function(a){var b=$(a.currentTarget),c=this.collection.get(b.data("model"));c.set("physicalAddress",c.get("mailingAddress")),c.set("physicalCity",c.get("mailingCity")),c.set("physicalState",c.get("mailingState")),c.set("physicalZip",c.get("mailingZip"))},editCompany:function(a){a.stopPropagation(),a.preventDefault();var b,c=$(a.currentTarget),d=this.$el.find("form[company-id="+c.attr("company-id")+"]"),e={};if(d.valid()){e=this.serialize(d),e=_.extend(e,{id:e.companyID});var f=new App.Models.FirmLocation(e);f.save({},{type:"PUT",success:function(a,c){b=new App.Helpers.Toast({message:c.msg,classType:"success",fadeOut:5e3}),b.render()},error:function(a,c){b=new App.Helpers.Toast({message:c.responseJSON.error,classType:"danger",fadeOut:5e3}),b.render()}})}},createCompany:function(a){a.stopPropagation(),a.preventDefault();var b=this.$el,c=new App.Models.FirmLocation,d=new App.Views.Users.CreateCompany({model:c});App.Helpers.htmlView(d,"#create-company-container"),b.find("#create-company").modal("show"),App.Helpers.addMask('input[name="officePhone"]',"(999) 999-9999"),App.Helpers.addMask('input[name="faxNumber"]',"(999) 999-9999"),App.Helpers.addMask('input[name="tollFreePhone"]',"(999) 999-9999")},assignCompany:function(a){a.stopPropagation(),a.preventDefault();var b=this.$el,c=new App.Collections.Companies;c.add(this.collection.models);var d=new App.Views.Users.AssignCompany({model:this.model,collection:c});App.Helpers.htmlView(d,"#assign-company-container"),b.find("#assign-company").modal("show")},checkUserCompanies:function(){var a=this.$el,b=this.model.get("companies");_.each(b,function(b){var c=b.companyID;a.find("#"+c).prop("checked","checked")})},showInfo:function(a,b){b.preventDefault(),b.stopPropagation();var c=$(b.currentTarget),d=c.next().next();d.toggle("slow"),App.Helpers.addMask('input[name="officePhone"]',"(999) 999-9999"),App.Helpers.addMask('input[name="faxNumber"]',"(999) 999-9999"),App.Helpers.addMask('input[name="tollFreePhone"]',"(999) 999-9999")}}),_.isUndefined(App.Views.Users)&&(App.Views.Users={}),App.Views.Users.CreateCompany=App.Helpers.View.extend({template:App.Templates.usersCreateCompany,className:"createCompany",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{"click #copy-to-address-creation":"copy_to_address_creation","click #save-create-company":"createCompany"},copy_to_address_creation:function(){this.model.set("physicalAddress",this.model.get("mailingAddress")),this.model.set("physicalCity",this.model.get("mailingCity")),this.model.set("physicalState",this.model.get("mailingState")),this.model.set("physicalZip",this.model.get("mailingZip"))},createCompany:function(a){a.preventDefault(),a.stopPropagation();var b,c=this.$el,d=this.$el.find("form"),e={};if(!c.find("form").valid())return void c.find(".modal").data("bs.modal").adjustBackdrop();e=this.serialize(d);var f=new App.Models.FirmLocation(e);f.save({},{success:function(a,c){var d=_.debounce(function(){$("#create-company").modal("hide")});d(),b=new App.Helpers.Toast({message:c.msg,classType:"success",fadeOut:4e3}),b.render()},error:function(a,c){b=new App.Helpers.Toast({message:c.responseJSON.error,classType:"danger",fadeOut:2e3}),b.render()}})}}),_.isUndefined(App.Views.Users)&&(App.Views.Users={}),App.Views.Users.DAManager=App.Helpers.View.extend({template:App.Templates.usersDaManager,className:"daManager",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.assignBtnBlocked=!1},events:{"click #assignDaToManager":"assignDaManager","click .btn-editManager":"editPrimaryManager","click .btn-undo":"actionUndo","click .btn-undoAll":"actionUndoAll","click .btn-saveManager":"updatePrimaryManager"},assignDaManager:function(a){a.stopPropagation(),a.preventDefault();var b=this.$el,c=new App.Collections.Companies;c.sortBy="first",c.sortOrder="asc",c.add(this.collection.models);var d=new App.Views.Users.AssignDAManager({model:this.model,collection:c});App.Helpers.htmlView(d,"#assign-da-manager-container"),b.find("#assign-da-manager").modal("show")},editPrimaryManager:function(a){var b=$(a.currentTarget),c=b.data("daid"),d=b.closest("tr").find(".label"),e=b.closest("tr").find("select"),f=new App.Helpers.Collection,g=this,h=b.html().trim(),i=this.$el.find(".custom-loader").clone().removeClass("display-none").html().trim();b.html(i),f.fetch({url:"/api/user_controller/get_managers_by_employee",data:{DAid:c,managerDAid:this.model.get("id")},success:function(a,c){d.hide(),e.show();var f=$("<option></option>");e.html(f),_.each(c,function(a){var b=f.clone();b.val(a.id).text(a.name),e.append(b)});var h=_.findWhere(c,{selected:1});h&&e.val(h.id),b.hide(),b.next(".control-row").show(),g.assignBtnBlocked=!0},complete:function(){b.html(h),g.removeLoader()}})},actionUndo:function(a){var b=$(a.currentTarget),c=b.closest("tr").find(".label"),d=b.closest("tr").find("select");c.show(),d.hide(),d.empty(),b.closest("div.control-row").prev("a.btn-editManager").show(),b.closest("div.control-row").hide(),this.$el.find(".control-row").is(":visible")||(this.assignBtnBlocked=!1)},actionUndoAll:function(){var a=this.$el,b=a.find(".label"),c=a.find("select");b.show(),c.hide(),c.empty(),this.assignBtnBlocked=!1,a.find("a.btn-editManager").show(),a.find("div.control-row").hide()},updatePrimaryManager:function(a){var b=$(a.currentTarget),c=b.data("daid"),d=b.closest("tr").find(".label"),e=b.closest("tr").find("select"),f=e.val(),g=b.html().trim(),h=this,i=this.$el.find(".custom-loader").clone().removeClass("display-none").html().trim(),j=this.collection.get(c);b.html(i),j.fetch({type:"POST",url:"/api/user_controller/update_primary_manager",data:JSON.stringify({DAid:c,managerDAid:f}),success:function(){var a=new App.Helpers.Toast({message:"Primary manager updated successfully.",classType:"success",fadeOut:5e3});a.render(),d.show(),e.hide(),e.empty(),b.closest("div.control-row").prev("a.btn-editManager").show(),b.closest("div.control-row").hide()},complete:function(){b.html(g),h.$el.find(".control-row").is(":visible")||(h.assignBtnBlocked=!1)}})}}),_.isUndefined(App.Views.Users)&&(App.Views.Users={}),App.Views.Users.EditUser=App.Helpers.View.extend({template:App.Templates.usersEditUser,className:"editUser",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.companiesCollection=new App.Helpers.Collection,this.listenTo(this.model,"request",function(){b.showLoader()}),this.listenTo(this.model,"sync error",function(){b.removeLoader()}),this.listenTo(this.model,"change",function(){b.model.set("getUserType",b.model.getUserType()),App.Helpers.getStateName(this.model,["state"])})},events:{"click #edit-user":"editUser","click #save-user":"saveUser","click #cancel-user":"cancelUser","click #user-access":"userAccess","click #user-signature":"userSignature","click #archive-user":"processUserState","click #unarchive-user":"processUserState","click #activate-user":"activateUser","click #user-company":"userCompany","click #assign-clients":"assignClients","click #user-daManager":"userDamanager","click #user-adjuster-subordinates":"clientManagerSubordinates",'click input[name="userType"]':"employeeType","click #edit-employee":"editEmployeeType","click #user-adjuster-list":"userAdjusterFileList","click #user-reset-password":"userResetPassword","click #user-timekeeper-classification":"userTimekeeperClassification"},afterRender:function(){var a=this.$el;a.find("input").toggle(),a.find('[name="state"]').toggle(),a.find("#user-type-employee").toggle(),a.find("#employee-type").hide(),a.find(".assign-clients").hide(),a.find("#is-client-manager").hide(),a.find(".assign-clients-list").hide(),a.find("#edit-employee").hide(),this.model.isNew()&&(a.find("#user-type-employee").show(),a.find("#is-manager").hide())},userCompany:function(){this.companiesCollection.add(this.model.get("companies"));var a=new App.Views.Users.Company({model:this.model,collection:this.companiesCollection,assignClient:!1});App.Helpers.htmlView(a,"#panel-user-company")},clientManagerSubordinates:function c(){var c=new App.Helpers.Collection;c.sortBy="first",c.sortOrder="asc",c.add(this.model.get("client_manager_subordinates"));var a=new App.Views.Users.ClientManagerSubordinates({model:this.model,collection:c});App.Helpers.htmlView(a,"#panel-user-adjuster-subordinates")},userDamanager:function(){var a=new App.Helpers.Collection;a.sortBy="first",a.sortOrder="asc",a.add(this.model.get("managers"));var b=new App.Views.Users.DAManager({model:this.model,collection:a});App.Helpers.htmlView(b,"#panel-user-da-manager")},processUserState:function(a){a.preventDefault(),a.stopPropagation();var b=this,c=b.$el.find(a.currentTarget),d=c.data("action"),e=b._getActionData(d),f=new App.Views.Shared.AlertView(e),g=new App.Helpers.Modal({view:f});g.show()},processArchiveUser:function(){var a=this;this.showLoader(),this.model.destroy({success:function(){var b=new App.Helpers.Toast({message:"User archived successfully!",classType:"success",fadeOut:5e3});b.render(),a.model.set("archived",1),a.model.trigger("change",a.model),Backbone.history.navigate("#users",{trigger:!0})},error:function(){var a=new App.Helpers.Toast({message:"User not deleted.",classType:"danger",fadeOut:5e3});a.render()},data:{id:a.model.id}})},processUnarchiveUser:function(){var a=this;a.showLoader(),a.model.set("unarchive",1),a.model.save({},{success:function(){var b=new App.Helpers.Toast({message:"User unarchived successfully!",classType:"success",fadeOut:5e3});b.render(),a.model.set("archived",0),a.model.trigger("change",a.model),a.model.unset("unarchive",{silent:!0})},error:function(){var a=new App.Helpers.Toast({message:"User not deleted.",classType:"danger",fadeOut:5e3});a.render()}})},activateUser:function(a){a.preventDefault(),a.stopPropagation();var b="You are about to activate this user. Are you sure you want to continue?",c=new App.Views.Shared.AlertView({processFunction:"processActivateUser",viewClass:".editUser",msg:b,title:"Activate User"}),d=new App.Helpers.Modal({view:c});d.show()},processActivateUser:function(){var a=this;a.showLoader();var b,c=a.model.get("user_id"),d="/api/admin/user/activate/"+c;$.ajax({url:d,dataType:"json",success:function(c){var d=c.msg||"User successfully activated.";b=new App.Helpers.Toast({message:d,classType:"success",fadeOut:5e3}),b.render(),a.removeLoader(),a.model.set("activated",1)},error:function e(a){var e=a.error||"There was an error trying to update the user.";b=new App.Helpers.Toast({message:e,classType:"warning",fadeOut:5e3}),b.render()}})},userSignature:function(){var a=new App.Views.Users.Signature({model:this.model});App.Helpers.htmlView(a,"#panel-user-signature")},userAccess:function(){var a=this,b=new App.Collections.Access,c=new App.Views.Users.Access({model:this.model,collection:b,user_data:a.model});App.Helpers.htmlView(c,"#panel-user-access"),b.hierarchical=!0,b.fetch()},cancelUser:function(a){a.preventDefault(),a.stopPropagation(),this._toggleForEdit(!1),this.clearCheck(),this.model=this.modelClone},saveUser:function(a){var b=this;a.preventDefault(),a.stopPropagation();var c=this.$el;c.find(".status").empty();var d=this.serialize();this.model.set(d);var e,f=c.find('input[name="userType"]:checked').val(),g=c.find('input[name="employeeR"]:checked').val(),h=c.find('input[name="DAManager"]:checked').val(),i=c.find("#client-manager-check").is(":checked"),j=!1;if(c.find("#user-edit-form").valid()){if(this.model.isNew()&&(j=!0),_.isUndefined(f))this.model.isClientRep()&&(i?this.model.set("is_client_manager",1):this.model.set("is_client_manager",0));else if("isClientRep"===f){if(this.companiesCollection.length){this.model.set("clientCompany",this.companiesCollection.pluck("id")),i?this.model.set("is_client_manager",1):this.model.set("is_client_manager",0);var k=this.companiesCollection.findWhere({isPrimaryLocation:1});this.model.set("primaryCompanyID",_.isUndefined(k)?0:k.get("id"))}else if(this.companiesCollection.length<1)return e=new App.Helpers.Toast({message:"Please select at least one Client",classType:"warning",fadeOut:5e3}),void e.render();this.model.set("isHearingRep",0),this.model.set("isDA",0),this.model.set("isClientRep",1),this.model.unset("manager")}_.isUndefined(h)?this.model.unset("manager"):this.model.set("manager",1),_.isUndefined(g)||("isDA"===g?(this.model.set("isHearingRep",0),this.model.set("isDA",1),this.model.set("isClientRep",0)):"isHearingRep"===g?(this.model.set("isHearingRep",1),this.model.set("isDA",0),this.model.set("isClientRep",0)):(this.model.set("isHearingRep",0),this.model.set("isDA",0),this.model.set("isClientRep",0))),this.showLoader(),this.model.save({},{success:function(a){b._toggleForEdit(!1),j?(e=new App.Helpers.Toast({message:"New user created successfully.",classType:"success",fadeOut:5e3}),e.render(),Backbone.history.navigate("#users/edit/"+a.get("id"),{trigger:!0})):(e=new App.Helpers.Toast({message:"User updated successfully.",classType:"success",fadeOut:5e3}),e.render())},error:function l(a,b){if(401===b.status)e=new App.Helpers.Toast({message:b.responseJSON.error,classType:"warning",fadeOut:5e3}),e.render(),App.loginModel.logout();else{var l=b.responseJSON.msg||"Error while trying to save user";e=new App.Helpers.Toast({message:l,classType:"warning",fadeOut:5e3}),e.render()}}})}},editUser:function(a){a.preventDefault(),a.stopPropagation(),this._toggleForEdit(!0);var b=this.$el;this.modelClone=this.model.clone(),b.find(".status").empty()},_toggleForEdit:function(a){var b=this.$el;b.find("input").toggle(),b.find('[name="state"]').toggle(),b.find("input").siblings().toggle(),b.find('[name="state"]').siblings().toggle(),b.find("#edit-user").toggle(!a),b.find("#save-user,#cancel-user").toggle(a),b.find("#employee-type").hide(),b.find("#assign-clients-list").hide(),b.find("#assign-clients").hide(),a?(b.find(".nav li").not(".active").addClass("disabled"),b.find(".nav li").not(".active").addClass("disabledTab"),b.find('[name="state"]').removeAttr("disabled"),App.Helpers.addMask('[name="phone"]',"(999) 999-9999"),App.Helpers.addMask('[name="cell"]',"(999) 999-9999"),App.Helpers.addMask('[name="fax"]',"(999) 999-9999"),b.find("#isClientManagerLabel").hide(),this.model.get("isClientRep")&&(b.find("#is-client-manager").show(),this.model.isClientManager()?b.find("#client-manager-check").prop("checked",!0):b.find("#client-manager-check").prop("checked",!1))):(b.find("#is-client-manager").hide(),this.model.isClientRep()&&b.find("#isClientManagerLabel").show(),b.find(".nav li").removeClass("disabled"),b.find(".nav li").removeClass("disabledTab")),this.model.isNew()||(b.find('[name="userType"]').toggle().siblings().toggle(),b.find("#user-type-employee").hide(),"No"!==this.model.getFormattedIsEmployee()&&b.find("#edit-employee").toggle(),b.find("div.edit-adjuster").is(":visible")||b.find(".edit-adjuster").toggle())},employeeType:function(){var a=this.$el;"isClientRep"===a.find('input[name="userType"]:checked').val()?(a.find("#employee-type").hide("fast"),a.find("#edit-employee").hide("fast"),a.find(".assign-clients").show("fast"),a.find("#is-client-manager").show("fast"),this.companiesCollection.length?a.find(".assign-clients-list").show("fast"):a.find(".assign-clients-list").hide("fast"),a.find("#DAManagerCheck").prop("checked",!1),a.find('[name="employeeR"]').prop("checked",!1)):(a.find(".assign-clients-list").hide("fast"),a.find(".assign-clients").hide("fast"),a.find("#is-client-manager").hide("fast"),a.find("#employee-type").show("fast"),this.companiesCollection.reset())},assignClients:function(a){a.stopPropagation(),a.preventDefault();var b=this.$el,c=new App.Views.Users.AssignCompany({model:this.model,collection:this.companiesCollection,assignClient:!0});App.Helpers.htmlView(c,"#assign-clients-container"),b.find("#assign-company").modal("show")},editEmployeeType:function(){$("#employee-type").show("fast"),this.model.isDA()||this.model.isHearingRep()?($("#employee-hr").prop("checked",this.model.isHearingRep()),$("#employee-da").prop("checked",this.model.isDA())):($("#regular-employee").prop("checked",!0),$(".edit-adjuster").toggle())},clearCheck:function(){var a=this.$el;a.find("#DAManagerCheck").prop("checked",!1),a.find('[name="employeeR"]').prop("checked",!1),a.find('[name="userType"]').prop("checked",!1),a.find("#edit-employee").hide(),this.companiesCollection.length&&this.companiesCollection.reset()},userAdjusterFileList:function(){var a=this,b=this.model.get("user_id");$.ajax({url:"/api/files_controller/get_client_rep_files/"+b,success:function(b){var c=b,d=new App.Views.Users.ClientRepFiles({model:a.model,clientRepFiles:c});App.Helpers.htmlView(d,"#panel-user-adjuster-list")},error:function(){var a=new App.Helpers.Toast({message:"There was an error trying to complete your request.",classType:"danger",fadeOut:5e3});a.render()}})},userResetPassword:function(){var a=this.model.get("email"),b=this.options.changePassword;b.set("email",a);var c=new App.Views.Users.ResetPassword({model:b});App.Helpers.htmlView(c,"#panel-user-reset-password")},userTimekeeperClassification:function(){var a=new App.Views.Users.TimekeeperClassification({
model:this.model});App.Helpers.htmlView(a,"#panel-timekeeper-classification")},_getActionData:function(a){return a=a||"archive",{processFunction:"archive"===a?"processArchiveUser":"processUnarchiveUser",msg:"Are your sure you want to "+a+" the user?",viewClass:".editUser",title:a.charAt(0).toUpperCase()+a.slice(1)+" User"}}}),_.isUndefined(App.Views.Users)&&(App.Views.Users={}),App.Views.Users.PasswordInstructions=App.Helpers.View.extend({template:App.Templates.usersPasswordInstructions,className:"UsersPasswordInstructions",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{}}),_.isUndefined(App.Views.Users)&&(App.Views.Users={}),App.Views.Users.ResetPassword=App.Helpers.View.extend({template:App.Templates.usersResetPassword,className:"UsersResetPassword",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{"submit #reset-user-password":"userResetPwdProcess"},afterRender:function(){var a=this.$el;a.find('[data-toggle="popover"]').popover({content:function(){var a=new App.Views.Users.PasswordInstructions;return a.render().el},title:"Password instruction"}).on("hidden.bs.popover",function(){App.Helpers.cleanView(a.find(".UsersPasswordInstructions").data("view"))});var b=a.find("#reset-user-password");b.trigger("reset")},userResetPwdProcess:function(a){a.stopPropagation(),a.preventDefault();var b=this.$el,c=b.find("#reset-user-password");if(c.valid()){var d=this,e=b.find("#reset-user-password-submit"),f=e.html();return e.addClass("disabled"),e.html("Sending..."),d.model.save({},{success:function(a){var d=new App.Helpers.Toast({message:a.get("msg"),classType:"success",fadeOut:5e3}),e=b.find(".error");d.render(),e.length&&e.remove(),b.find("#password_confirmation").blur(),c.trigger("reset")},error:function g(a,b){var g=b.responseJSON.msg||"Password could not be changed.",c=new App.Helpers.Toast({message:g,classType:"danger",fadeOut:5e3});c.render()},complete:function(){e.removeClass("disabled"),e.html(f)}}),!1}}}),_.isUndefined(App.Views.Users)&&(App.Views.Users={}),App.Views.Users.Signature=App.Helpers.View.extend({template:App.Templates.usersSignature,className:"signature",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{"click .btn-delete-signature":"deleteSignature"},_initializeFileUpload:function(){var a=this.$el,b=this,c="/api/user_controller/signature_file_upload",d={id:this.model.get("id")},e=$.cookie("token_name");d[e]=$.cookie("cf_csrf_cookie"),a.find(".form-upload").fileupload({url:c,dataType:"json",formData:d,paramName:"signature",add:function(a,b){var c=2e6,d=/^image\/(gif|jpe?g|png)$/i,e=_.first(b.originalFiles),f=[];if(e.type.length&&!d.test(e.type)&&f.push("Not an accepted file type"),e.size&&e.size>c&&f.push("Filesize is too big"),f.length>0){var g="Error uploading image file: <br>";_.each(f,function(a){g+="- "+a+"<br>"});var h=new App.Helpers.Toast({message:g,classType:"danger",fadeOut:5e3});h.render()}else b.submit()},done:function(){var a=new App.Helpers.Toast({message:"Signature Upload Successful.",classType:"success",fadeOut:5e3});a.render(),b.model.set("has_signature",1),b._getDropper()},progressall:function(b,c){var d=parseInt(c.loaded/c.total*100,10);a.find(".progress .progress-bar").css("width",d+"%")},fail:function(a,b){var c="Error uploading image file: <br>";c+="-"+b.jqXHR.responseJSON;var d=new App.Helpers.Toast({message:c,classType:"danger",fadeOut:5e3});d.render()},always:function(){a.find(".progress .progress-bar").css("width","0%")}})},_getDropper:function(){var a=this.$el,b=this;if(b.model.get("has_signature")){var c=$('<img src="/api/user_controller/signature_file_upload/'+b.model.id+'" class="signature-img" />');a.find("#none").html(""),a.find("#signature-img").html(c),a.find(".btn-delete-signature").removeClass("hidden")}},deleteSignature:function(){var a="Are you sure do you want to delete this signature?",b=new App.Views.Shared.AlertView({processFunction:"processDeleteSignature",viewClass:".signature",msg:a,title:"Delete Signature"}),c=new App.Helpers.Modal({view:b});c.show()},processDeleteSignature:function(){var a=this.$el,b=this;$.post("/api/user_controller/signature_file_delete/"+this.model.id,{}).done(function(c){var d=new App.Helpers.Toast({message:c,classType:"success",fadeOut:5e3});d.render(),a.find("#signature-img").html(""),a.find("#none").html("None"),a.find(".btn-delete-signature").addClass("hidden"),b.model.set("has_signature",0)}).fail(function(a){var b=a.responseJSON,c=new App.Helpers.Toast({message:b,classType:"danger",fadeOut:5e3});c.render()})},afterRender:function(){this._initializeFileUpload(),this._getDropper()}}),_.isUndefined(App.Views.Users)&&(App.Views.Users={}),App.Views.Users.Submenu=App.Helpers.View.extend({template:App.Templates.usersSubmenu,className:"submenu",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])}}),_.isUndefined(App.Views.Users)&&(App.Views.Users={}),App.Views.Users.TimekeeperClassification=App.Helpers.View.extend({template:App.Templates.usersTimekeeperClassification,className:"UsersTimekeeperClassification",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]),this.classificationCol=new Uit.Collection,this.userClassificationCol=new App.Collections.UserTKClassifications},events:{"click .icon-typeahead-down":"showAllEntities",'change [name="classification"]':"addClassification","click #save-classifications":"saveClassifications","click .deleteClassification":"deleteClassification"},deleteClassification:function(a){var b=$(a.currentTarget),c=b.data("classification"),d=b.data("client-id"),e=this.userClassificationCol.where({classification:c,clientID:d});this.userClassificationCol.remove(e),this.userClassificationCol.reset(this.userClassificationCol.models),this.userClassificationCol.sort()},saveClassifications:function(){var a=this,b=[],c={};_.each(this.userClassificationCol.models,function(c){var d={};d.clientID=c.get("clientID"),d.clientName=c.get("clientName"),d.userID=a.model.get("user_id"),d.classification=c.get("classification"),b.push(d)}),c.classificationsArr=b,c.user_id=this.model.get("user_id"),c.LEEDStimekeeperID=a.$el.find("#LEEDStimekeeperID").val(),c.litAdvisorTimekeeperID=a.$el.find("#litAdvisorTimekeeperID").val(),this.showLoader(),$.post("api/user_controller/edit_user_tk_classifications",JSON.stringify(c),function(b){a.model.set("tk_classifications",c.classificationsArr);var d=new App.Helpers.Toast({message:b.msg,classType:"success",fadeOut:5e3});d.render()},"json").fail(function(a){var b=a.responseJSON.msg||"There was an error saving Timekeeper Information",c=new App.Helpers.Toast({message:b,classType:"danger",fadeOut:5e3});c.render()}).always(function(){a.removeLoader()})},addClassification:function(a){var b=$(a.currentTarget),c=b.val(),d=b.find(":selected").data("client-id"),e=b.find(":selected").data("client-name"),f=new App.Models.UserTKClassification({classification:c,clientID:d,clientName:e});if(c&&d){var g=!1;if(_.each(this.userClassificationCol.models,function(a){var b=a.get("clientID"),e=a.get("classification");b===d&&e===c&&(g=!0)}),g){var h=new App.Helpers.Toast({message:"Time Keeper Classification already selected for this user",classType:"warning",fadeOut:5e3});h.render()}else this.userClassificationCol.add(f)}},afterRender:function(){var a=this;App.Helpers.initTypeahead({view:this,elemClass:".typeahead.client_typeahead",urlBuild:{url:"api/typeahead_controller/search_clients"},processFunction:$.proxy(this.processClientTypeahead,this)}),this.model.get("tk_classifications")&&_.each(this.model.get("tk_classifications"),function(b){var c=new App.Models.UserTKClassification({classification:b.classification,clientID:b.clientID,clientName:b.clientName});a.userClassificationCol.add(c)})},processClientTypeahead:function(a){var b=a.id,c=this;this.showLoader(),$.get("api/Time_keeper_rates_controller/get_timeKeeper_classification_per_client/",{clientID:b,distinctClassification:1},function(a){c.classificationCol.reset(a)}).fail(function(){var a=new App.Helpers.Toast({message:"Error: This client might not have timekeeper rates",classType:"warning",fadeOut:5e3});a.render(),c.classificationCol.reset()}).always(function(){c.removeLoader()})}}),_.isUndefined(App.Views.Users)&&(App.Views.Users={}),App.Views.Users.Users=App.Helpers.View.extend({template:App.Templates.usersUsers,className:"users",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a]);var b=this;this.listenTo(this.collection,"sync error",function(){b.removeLoader()})},afterRender:function(){this.showLoader(),App.Helpers.initTypeahead({view:this,elemClass:".typeahead.user_typeahead",urlBuild:{url:"api/typeahead_controller/search_users"},processFunction:$.proxy(this.processUserTypeahead,this)})},processUserTypeahead:function(a){Backbone.history.navigate("#users/edit/"+a.id,{trigger:!0})},events:{"click .user-id":"goToUserId","click #add-new":"createNewUser","click .user-sortBy":"sortList","click .icon-typeahead-down":"showAllEntities"},sortList:function(a){var b=$(a.currentTarget),c=b.data("sortby");this.collection.sortBy===c&&("asc"===this.collection.sortOrder?this.collection.sortOrder="desc":this.collection.sortOrder="asc"),this.collection.sortBy=c,this.collection.sort()},createNewUser:function(){Backbone.history.navigate("#users/new",{trigger:!0})},goToUserId:function(a){var b=$(a.currentTarget),c=b.data("id");App.loginModel.hasAccess(6)&&Backbone.history.navigate("#users/edit/"+c,{trigger:!0})}}),_.isUndefined(App.Views.ViewerPreview)&&(App.Views.ViewerPreview={}),App.Views.ViewerPreview.Form=App.Helpers.View.extend({template:App.Templates.viewerPreviewForm,className:"viewer-preview",initialize:function(a){App.Helpers.View.prototype.initialize.apply(this,[a])},events:{},afterRender:function(){var a="/api/letters_word_controller/download/"+this.model.get("letterTemplateID");this.$el.find("iframe").attr("src",a)},openViewPreview:function(){var a=$("<div>").addClass("container-viewer-preview");$("body").append(a),App.Helpers.htmlView(this,".container-viewer-preview")}}),App.Router.Main=App.Helpers.Router.extend({className:"Main",routes:{helpEditor:"editHelpListAll","client_rep/files":"clientRepFilesIndex","client_rep/firm/:firm_id/file/:fileNumber":"clientRepFileShow","client_rep/firm/:firm_id/file/:fileNumber/:eventTypeName":"clientRepFileEventList","client_rep/firm/:firm_id/file/:fileNumber/:eventTypeName/:eventID":"clientRepFileEventShow","client_rep/upload_file":"uploadFile","session/login":"login",menu1:"landing",menu2:"landing",submenu1:"landing",submenu2:"landing","session/logout":"logout","session/activate/token/:token":"activateEmail","session/activate/token/:token/1":"activateChangeEmail","session/forgot_password":"forgotPassword","session/change_password":"changePassword","session/register_client_rep":"registerClientRep","session/change_password/token/:token":"changePassword",mysettings:"mySettings",settings:"settings","settings/milestones/module/:module":"milestonesSettings","settings/snippets":"snippetsList","settings/hotwords":"hotwords","settings/event_types":"event_types",landing:"landing",users:"users","users/edit/:id":"editUser","users/new":"newUser","files?*":"files","files/edit/:id":"editFile","files/edit/:id/applicant":"editFileApplicant","files/edit/:id/injuries":"editFileInjuries","files/edit/:fileNumber/injuries/case/edit/:caseID":"editFileCase","files/edit/:fileNumber/injuries/case/new":"editFileCaseNew","files/edit/:fileNumber/injuries/bodypart/edit/:bodyPartID":"editFileCaseBodyPart","files/edit/:id/applicant_attorney":"editFileAA","files/edit/:id/clientRep":"editFileClientRep","files/edit/:id/client":"editFileClient","files/edit/:id/employer":"editFileEmployer","files/edit/:id/defense_attorney":"editFileDA","files/edit/:id/co_defendants":"editFileCoDef","files/edit/:id/address_pos":"editFileAddressPos","files/edit/:id/calendar_panel":"editFileCalendarPanel","files/edit/:id/events?*":"fileEvents","files/edit/:id/events/liens_index_all":"fileLienGetAll","files/edit/:id/events/event_category/:category":"fileEventCategory","files/edit/:id/billings":"fileBillings","files/edit/:id/events/new?*":"newEvent","files/edit/:id/events/edit/:eventID":"editEvent","files/edit/:id/events/edit/:eventID/alerts/:alert_id":"editEventAlert","files/edit/:id/events/edit/:eventID/billing":"eventBilling","files/edit/:id/events/edit/:eventID/billing/edit/:billingID":"editBilling","files/edit/:id/events/edit/:eventID/billing/new":"newBilling","files/edit/:id/events/edit/:eventID/letters":"eventLetters","subro_files/edit/:id":"subroFilesEdit","subro_files/edit/:id/injured_worker":"subroFilesInjuredWorked","subro_files/edit/:id/client":"subroFilesClient","subro_files/edit/:id/clientRep":"subroFilesClientRep","subro_files/edit/:id/employer":"subroFilesEmployer","subro_files/edit/:id/subro_attorney":"subroFilesAttorney","subro_files/edit/:id/defendants":"subroFilesDefendants","subro_files/edit/:id/address_pos":"subroFilesAddressPos","subro_files/edit/:id/calendar_panel":"editSubroFileCalendarPanel","subro_files/edit/:id/billings":"subroFilesBillings","subro_files/edit/:id/events?*":"subroFileEvents","subro_files/edit/:id/events/new":"subroNewEvent","subro_files/edit/:id/events/edit/:eventID":"subroEditEvent","subro_files/edit/:id/events/edit/:eventID/alerts/:alert_id":"subroEditEventAlert","subro_files/edit/:id/events/edit/:eventID/billing":"subroEventBilling","subro_files/edit/:id/events/edit/:eventID/billing/edit/:billingID":"subroEditBilling","subro_files/edit/:id/events/edit/:eventID/billing/new":"subroNewBilling","subro_files/edit/:id/events/edit/:eventID/letters":"subroEventLetters","files/new/step1":"newFileStep1","files/new/step2":"newFileStep2",letters:"indexLetters","letters/new":"newLetter","word_letters/new":"newWordLetter",word_letters:"indexWordLetters","word_letters/edit/:id":"editWordLetter","letters/edit/:id":"editLetter","billing/current_billing":"currentBilling","billing/daily_billing":"dailyBilling","billing/past_billing":"pastBilling","billing/reviewed_history":"reviewedBillsHistory","billing/batch_history":"batchHistory","reporting/monthly_billing":"monthlyBilling","reporting/monthly_billing_managers":"monthlyBillingManagers","reporting/billing_overview":"billingOverview","reporting/compliance_report":"complianceReport","reporting/billing_pace":"billingPace","reporting/billing_pace/:pacePage":"billingPace","reporting/compliance_report_managers":"complianceReportManagers","reporting/exceeded_hours":"exceededHours","reporting/pace_report":"paceReport","reporting/pace_report/:pacePage":"paceReport","tools/contact_center/doctors":"contactCenterDoctors","tools/client_editor":"clientEditor","tools/client_editor/new":"newClient","tools/client_editor/edit/:clientID":"editClient","":"landing",landing_page:"landing","*actions":"login"},initialize:function(){App.Helpers.Router.prototype.initialize.call(this),this.token="";var a=localStorage.getItem("currentSessionData");if(!_.isNull(a)){var b=JSON.parse(a);for(var c in b)sessionStorage.setItem(c,b[c])}},execute:function(){this.beforeEach(),this.checkEnviroment(),App.Helpers.Router.prototype.execute.apply(this,arguments)},beforeEach:function(){return this._header(),this._footer(),App.loginModel.isLogin()?(this._renderDashboard(),this._initAlertsAjax()):this.login(),this},checkEnviroment:function(){if(!_.contains(["casefriend.com","demo.cfwc.us","app.casefriend.com"],document.domain)&&0===$(".enviroment-dev").length){var a=document.domain,b=$("<div>");b.html(a),b.addClass("enviroment-dev"),$("body").append(b);var c=document.createElement("canvas");c.width=200,c.height=40;var d=c.getContext("2d");d.font="15px Arial",d.fillStyle="#E1E1E2",d.fillText(a,5,15);var e=c.toDataURL("image/jpg");$("body").css({background:"url("+e+") 200px 40px"})}},_header:function(){if(App.Helpers.checkViewExist("header")===!1){var a=new App.Views.Base.Header({model:App.loginModel});App.Helpers.htmlView(a,"#header")}},_footer:function(){if(App.Helpers.checkViewExist("footer")===!1){var a=new App.Views.Base.Footer({cacheHash:App.CacheHash});App.Helpers.htmlView(a,"#footer")}},_getAlerts:function(){$.get("api/alerts_controller/getUserAlerts",{},function(a){if(a&&App.loginModel.get("popAlerts")){var b=10;$("body .alert-pop-notification").remove(),_.each(a,function(a){var c='\n                        <div class="p-absolute box-shadow right-20 alert alert-warning alert-pop-notification fade in alert-msg-warning" data-alert-id="'+a.alert_id+'" \n                            style="top:'+b+'px;\n                             z-index:1050;\n                             ">\n                             <a href="#" class="close" data-dismiss="alert" aria-label="close" title="close">×</a>\n                              <div class="alert-content">\n                                  <div class="font-size-40 display-inline-block icon"> \n                                    <i class="fa fa-exclamation-triangle p-right-10 text-danger" aria-hidden="true"></i>\n                                  </div>\n                                  <div class="alert-container">\n                                     <div>\n                                        <div class="alert-msg-description">\n                                            <label>Description:</label>\n                                            <span class="t-align-justify">'+a.description+'</span>\n                                        </div>\n                                        <div>\n                                            <span class="date"><label>Date:</label> '+a.date+'</span>\n                                            <span class="time"><label>Time:</label> '+a.time+"</span>\n                                        </div>\n                                     </div>\n                                     <div><label>Reminder was set for:</label> "+a.notificationQuantity+"  "+a.notificationUnit+' before</div>\n                                     <div class="alert-snooze"><label>Snooze for:</label>\n                                         <select class="snooze-select form-control">\n                                            <option value="5">5 Minutes</option>\n                                            <option value="10">10 Minutes</option>\n                                            <option value="15">15 Minutes</option>\n                                            <option value="30">30 Minutes</option>\n                                            <option value="45">45 Minutes</option>\n                                            <option value="60">60 Minutes</option>                                                     \n                                            <option value="custom">Custom Time</option>                                                     \n                                         </select>\n                                     </div>          \n                                     <div class="p-top-5 custom-snooze display-none">\n                                        <label>Snooze Date:</label>\n                                        <input type="text" class="p-left-10 display-inline-block form-control datepicker width-170" name="snooze-date" placeholder="yyyy-mm-dd">\n                                     </div>\n                                     <div class="p-top-5 custom-snooze display-none">\n                                        <label>Snooze Time:</label>\n                                        <input type="text" class="p-left-10 form-control input-small display-inline-block timepicker width-170" name=\'snooze-time\'>\n                                     </div>\n                                  </div>\n                              </div>\n                              <div class="t-align-c p-top-5 alert-buttons"> \n                                  <button type="button" class="btn btn-success alert-go-calendar width-33-p alert-button-left" data-alert-id="'+a.alert_id+'" data-event-id="'+a.eventID+'" data-filenumber="'+a.fileNumber+'" data-module-id="'+a.moduleID+'" data-date="'+a.date+'">Calendar <i class="fa fa-eye" aria-hidden="true"></i></button>\n                                  <button type="button" class="btn btn-warning alert-go-file " data-alert-id="'+a.alert_id+'" data-filenumber="'+a.fileNumber+'" data-module-id="'+a.moduleID+'">File <i class="fa fa-eye" aria-hidden="true"></i></button>\n                                  <button type="button" class="btn btn-primary alert-go-event " data-alert-id="'+a.alert_id+'" data-event-id="'+a.eventID+'" data-filenumber="'+a.fileNumber+'" data-module-id="'+a.moduleID+'">Event <i class="fa fa-eye" aria-hidden="true"></i></button>\n                                  <button type="button" class="btn btn-danger snooze-btn" data-alert-id="'+a.alert_id+'">Snooze <i class="fa fa-clock-o" aria-hidden="true"></i></button>\n                                  <button type="button" class="btn btn-default ok-alert alert-button-right" data-alert-id="'+a.alert_id+'">Dismiss <i class="fa fa-thumbs-o-up" aria-hidden="true"></i></button>\n                              </div>\n                             \n                        </div>';c=$(c),a.fileNumber||c.find(".alert-go-file").attr("disabled","disabled"),a.eventID||c.find(".alert-go-event").attr("disabled","disabled"),$('body .alert-pop-notification[data-alert-id="'+a.alert_id+'"]').length||($("body").append($(c).fadeIn("slow",function(){$(".alert-msg-warning").css("opacity",".8")})),$(window).scrollTop(0)),b+=190,$(".datepicker").datepicker({autoclose:!0,format:"yyyy-mm-dd",todayHighlight:!0,forceParse:!1}),$(".timepicker").timepicker(),$(".alert-go-event").click(function(a){a.stopImmediatePropagation(),a.preventDefault(),a.stopPropagation();var b=$(a.currentTarget),c=b.data("alert-id"),d=b.data("module-id"),e=b.data("filenumber"),f=b.data("event-id"),g=App.Helpers.getFileURL(e,d,f);g+="/alerts/"+c,Backbone.history.navigate(g,{trigger:!0})}),$(".alert-go-file").click(function(a){a.stopImmediatePropagation(),a.preventDefault(),a.stopPropagation();var b=$(a.currentTarget),c=b.data("module-id"),d=b.data("filenumber"),e=App.Helpers.getFileURL(d,c);e+="/calendar_panel",Backbone.history.navigate(e,{trigger:!0})}),$(".alert-go-calendar").click(function(a){a.stopImmediatePropagation(),a.preventDefault(),a.stopPropagation();var b=$(a.currentTarget),c=b.data("alert-id"),d=b.data("date"),e=$(".main-menu").data("view");e.openCalendar(c,d)}),$(".ok-alert").click(function(a){a.stopImmediatePropagation(),a.preventDefault(),a.stopPropagation();var b=$(a.currentTarget),c=b.data("alert-id");$.post("api/alerts_controller/markAlertAsDone",JSON.stringify({alert_id:c}),function(){b.closest(".alert-pop-notification").remove()})}),$(".snooze-select").change(function(a){a.stopImmediatePropagation(),a.preventDefault(),a.stopPropagation();var b=$(a.currentTarget),c=b.parent().parent();"custom"===b.val()?(c.css("height","200"),c.find(".custom-snooze").show()):(c.find(".custom-snooze").hide(),c.css("height","120"))}),$(".snooze-btn").click(function(a){a.stopImmediatePropagation(),a.preventDefault(),a.stopPropagation();var b=$(a.currentTarget),c=b.parent("div").parent("div").find(".snooze-select option:selected").val(),d={alert_id:b.data("alert-id"),snoozeMinutes:c};return"custom"===c&&(d.snoozeDate=b.parent("div").parent("div").find('[name="snooze-date"]').val(),d.snoozeTime=b.parent("div").parent("div").find('[name="snooze-time"]').val(),""===d.snoozeDate||""===d.snoozeTime)?!1:void $.post("api/alerts_controller/snooze",JSON.stringify(d),function(){b.closest(".alert-pop-notification").remove()})})}),$(".alert-msg-description").niceScroll({cursorcolor:"#74cede",cursorborder:"0px solid #fff",cursorborderradius:"0px",cursorwidth:"3px"})}else $("body .alert-pop-notification").remove();a.length>0?$("#alert-menu").addClass("toggle-right-box-red"):$("#alert-menu").removeClass("toggle-right-box-red")})},_initAlertsAjax:function(){if(_.isUndefined(App.AlertAjax)&&!App.loginModel.get("isClientRep")){this._getAlerts();var a=45e3,b=this;App.AlertAjax=setInterval(function(){b._getAlerts()},a)}},editHelpListAll:function(){var a=new App.Collections.EditHelps,b=new App.Views.HelpEditor.Index({collection:a});App.Helpers.htmlView(b,"#content"),a.fetch()},editUser:function(a){var b=new App.Models.User({id:a}),c=new App.Models.ChangePassword,d=new App.Views.Users.EditUser({model:b,changePassword:c});App.Helpers.htmlView(d,"#content"),b.fetch()},newUser:function(){var a=new App.Models.User,b=new App.Views.Users.EditUser({model:a});App.Helpers.htmlView(b,"#content")},mySettings:function(){var a,b=App.loginModel.get("id");if(1===App.loginModel.get("isClientRep")){var c=new App.Models.ClientRepMasterUser;if(c.set(App.loginModel.attributes),""===App.loginModel.get("first")||""===App.loginModel.get("last")||""===App.loginModel.get("email")||""===App.loginModel.get("phone")){var d=new App.Helpers.Toast({message:"Yours personal info is incomplete please fill the required fields",classType:"warning",fadeOut:5e3});d.render()}a=new App.Views.ClientRep.Settings.ClientRepSettings({model:c,user_id:b})}else{var e=new App.Models.User({id:b}),f=new App.Helpers.Collection;a=new App.Views.Settings.MySettings.MySettings({model:e,collection:f}),e.fetch()}App.Helpers.htmlView(a,"#content")},milestonesSettings:function d(){var a=arguments.length<=0||void 0===arguments[0]?1:arguments[0],b=new App.Collections.Milestones;b.module=a;var d=new App.Views.Settings.MilestonesSettings({collection:b});App.Helpers.htmlView(d,"#content"),b.fetch()},settings:function e(){var e=new App.Views.Settings.Settings;App.Helpers.htmlView(e,"#content")},landing:function(){if(App.loginModel.get("isClientRep"))this.clientRepFilesIndex();else{var a=new App.Collections.AvailableModules,b=new App.Views.Base.LandingPage({modules:a});App.Helpers.htmlView(b,"#content"),a.fetch()}},userBilling:function(){var a=new App.Views.Reporting.UserBilling.Index;App.Helpers.htmlView(a,"#content")},users:function(){var a=new App.Collections.Users,b=new App.Views.Users.Users({collection:a});App.Helpers.htmlView(b,"#content"),a.reset(),a.fetch()},_renderDashboard:function(){var a=App.loginModel.get("isClientRep")?"ClientRepDashboardMainMenu":"main-menu";if($(document).prop("title","CaseFriend"),App.Helpers.checkViewExist(a)===!1){var b="main-menu"===a?new App.Views.Dashboard.Mainmenu:new App.Views.ClientRep.Dashboard.MainMenu;App.Helpers.htmlView(b,"#main")}else{var c=$(".header a"),d=_.find(c,function(a){return $(a).attr("href")===Backbone.history.location.hash});_.isUndefined(d)||$("."+a).data("view").removeAllSelected()}},activateChangeEmail:function(a){var b=new App.Helpers.Model({token:a});b.url="/api/authentication_controller_master/activate",b.save({},{success:function(a){var b=new App.Helpers.Toast({message:a.get("msg"),classType:"success"});b.render(),Backbone.history.navigate("session/login",{trigger:!0})},error:function(){var a=new App.Helpers.Toast({message:"Error activating account, please contact admin",classType:"danger"});a.render(),Backbone.history.navigate("session/login",{trigger:!0})}})},activateEmail:function(a){var b=new App.Helpers.Model({token:a});b.url="/api/authentication_controller_master/activate",b.save({},{success:function(a){var b=new App.Helpers.Toast({message:a.get("msg"),classType:"success"});b.render(),Backbone.history.navigate("session/change_password",{trigger:!0})},error:function(){var a=new App.Helpers.Toast({message:"Error activating account, please contact admin",classType:"danger"});a.render(),Backbone.history.navigate("session/login",{trigger:!0})}})},registerClientRep:function(){var a=new App.Models.RegisterUser,b=new App.Views.Session.RegisterUser({model:a});App.Helpers.htmlView(b,"#main")},changePassword:function(a){var b=new App.Models.ChangePassword;_.isUndefined(a)||b.set("token",a);var c=new App.Views.Session.ChangePassword({model:b});App.Helpers.htmlView(c,"#main")},login:function f(){if(App.loginModel.isLogin())Backbone.history.navigate("mysettings",{trigger:!0});else{var a=App.loginModel,f=new App.Views.Session.Login({model:a});App.Helpers.htmlView(f,"#main")}},logout:function(){App.loginModel.logout()},forgotPassword:function(){var a=new App.Models.ForgotPassword,b=new App.Views.Session.ForgotPassword({model:a});App.Helpers.htmlView(b,"#main")},files:function(a){var b={};_.size(a)>0&&(b=$.deparam(a));var c=this,d=new App.Collections.Files,e=new App.Collections.FileTypes;this.colLiens=new App.Helpers.Collection,this.colSubros=new App.Collections.FilesSubro,this.colSubroLiens=new App.Collections.FilesSubro,this.colSubroIntervention=new App.Collections.FilesSubro;var f=new App.Views.Files.Index({collection:d,colFileTypes:e,filterParams:b,colLiens:this.colLiens,colSubros:this.colSubros,colSubroLiens:this.colSubroLiens,colSubroIntervention:this.colSubroIntervention,defaultWC:"1",defaultLiens:"1",defaultSubro:"1",defaultSubroLiens:"1",defaultSubroInterventions:"1"});App.Helpers.htmlView(f,"#content");var g=0;App.loginModel.get("isDA")&&(g=App.loginModel.get("id"));var h={DAid:g,fileStatus:"active"};_.size(b)>0&&(""===b.filterfileClaimNumber&&(delete b.filterfileClaimNumber,delete b.filterClaimFileNumberID),h=f.handlerPrepareFilterParams()),f.loadData(b.filesOffset||0),$.ajax({url:"/api/files_controller/get_files",data:h,success:function(a){var g=a.files||[],h=a.fileTypes||[],i=a.totalFiles||0;f.colMilestones.reset(a.milestones),f.colModules.reset(a.modules),f.setListFileStatus(f.colModules),c.colLiens.reset(),a.liens=f.avoidZeroOnWarningDays(a.liens),c.colLiens.add(a.liens),a.files=f.avoidZeroOnWarningDays(a.files),d.columnMilestones=f.colMilestones.toJSON(),g=f.avoidZeroOnWarningDays(g),d.add(g),c.colSubros.reset(),c.colSubros.columnMilestones=f.colMilestones.toJSON(),a.subros=f.avoidZeroOnWarningDays(a.subros),c.colSubros.add(a.subros),c.colSubroLiens.reset(),c.colSubroLiens.columnMilestones=f.colMilestones.toJSON(),a.subro_liens=f.avoidZeroOnWarningDays(a.subro_liens),c.colSubroLiens.add(a.subro_liens),c.colSubroIntervention.reset(),c.colSubroIntervention.columnMilestones=f.colMilestones.toJSON(),a.subro_interventions=f.avoidZeroOnWarningDays(a.subro_interventions),c.colSubroIntervention.add(a.subro_interventions),f.hasRecords({wc:a.files.length,wc_liens:a.liens.length,subro:a.subros.length,subro_liens:a.subro_liens.length,subro_intervention:a.subro_interventions.length}),e.add(h),e.sortBy="moduleID",e.sortOrder="ASC",e.sort(),f.totalFiles=i,f.offset=b.filesOffset||0,_.size(b)>0?(f.handlerPrepopulateFilterSelects(),f.loadData(b.filesOffset),f.handlerUrlFilter()):(f.loadData(),App.loginModel.get("isDA")&&f.handlerUrlFilter()),f.$el.find("#to-offset").html(f.setToOffset(!0)),f.$el.find("#from-offset").html(parseInt(f.offset)+1),f.removeLoader()},error:function(){f.removeLoader()}})},_renderFileDashboard:function(a,b){b=b||function(){};var c,d=!0;if(_.isUndefined(a))d=!1,c=new App.Models.File;else{var e=$(".files-dashboard").data("view");_.isUndefined(e)||parseInt(a)!==e.model.get("fileNumber")?(d=!1,c=new App.Models.File({fileNumber:a})):(d=!0,c=e.model,e.setTitle())}if(App.Helpers.checkViewExist("files-dashboard")===!1||!d){var f=new App.Views.Files.Dashboard({model:c});App.Helpers.htmlView(f,"#content")}return!c.isNew()&&!c.fileHasLoaded()||Uit.SessionFlash.get("fetch_file")?c.fetch({success:function(){c.has("module")&&Number(c.get("module"))!==App.Const.wcFileModule||Number(c.get("module"))===App.Const.subroFileModule?Backbone.history.navigate("#subro_files/edit/"+c.get("subroFileNumber"),{trigger:!0}):b(c)}}):b(c),c},_renderSubroFileDashboard:function(a,b){b=b||function(){};var c,d=!0;if(_.isUndefined(a))d=!1,c=new App.Models.FileSubro;else{var e=$(".FilesDashboardSubro").data("view");_.isUndefined(e)||parseInt(a)!==e.model.get("subroFileNumber")?(d=!1,c=new App.Models.FileSubro({subroFileNumber:a})):(d=!0,c=e.model,e.setTitle())}if(App.Helpers.checkViewExist("FilesDashboardSubro")===!1||!d){var f=new App.Views.Files.DashboardSubro({
model:c});App.Helpers.htmlView(f,"#content")}return!c.isNew()&&!c.fileHasLoaded()||Uit.SessionFlash.get("fetch_file")?c.fetch({success:function(){c.has("module")&&Number(c.get("module"))!==App.Const.subroFileModule||Number(c.get("module"))===App.Const.wcFileModule?Backbone.history.navigate("#files/edit/"+c.get("fileNumber"),{trigger:!0}):b(c)}}):b(c),c},editFile:function(a){this._renderFileDashboard(a,function(a){var b=new App.Views.Files.Form({model:a});App.Helpers.htmlView(b,"#files-tab-container")})},subroEditEventAlert:function(a,b,c){this.subroEditEvent(a,b,function(a){a.$el.find('a.alert-row[data-alert-id="'+c+'"]').click();var b=setInterval(function(){a.$el.find('a.alert-row[data-alert-id="'+c+'"]')&&(a.$el.find('a.alert-row[data-alert-id="'+c+'"]').click(),clearInterval(b))},500)})},subroEditEvent:function(a,b,c){this._renderSubroFileDashboard(a,function(d){var e=new App.Models.Event({fileNumber:a,eventID:b}),f=new App.Views.Files.SubroEventTabs.EventForm({model:e,fileModel:d});App.Helpers.htmlView(f,"#files-tab-container");var g=Uit.SessionFlash.get("ignoreCheckRead")?"ignore":"check";e.fetch({data:$.param({fileNumber:a,ignoreCheckRead:g})}),c&&c(f)})},subroEventBilling:function(a,b){this.subroEditEvent(a,b,function(a){a.$el.find('.nav-tabs a[href="#billing-form-tab"]').tab("show")})},subroNewBilling:function(a,b){Uit.SessionFlash.set("addNewBill",!0),this.subroEditEvent(a,b,function(){Uit.SessionFlash.set("addNewBill",!0)})},subroEditBilling:function(a,b,c){this.subroEditEvent(a,b,function(a){a.$el.find('.nav-tabs a[href="#billing-form-tab"]').tab("show");var b=setInterval(function(){a.$el.find('[data-billingid="'+c+'"]:first').length&&(a.$el.find('[data-billingid="'+c+'"]:first').click(),clearInterval(b))},500)})},subroEventLetters:function(a,b){this.subroEditEvent(a,b,function(a){a.$el.find('.nav-tabs a[href="#letters-tab"]').tab("show")})},subroNewEvent:function(a){this._renderSubroFileDashboard(a,function(b){var c=new App.Models.Event({fileNumber:a}),d=new App.Views.Files.SubroEventTabs.EventForm({model:c,fileModel:b});App.Helpers.htmlView(d,"#files-tab-container")})},subroFilesEdit:function(a){this._renderSubroFileDashboard(a,function(a){var b=new App.Views.Files.FormSubro({model:a});App.Helpers.htmlView(b,"#files-tab-container")})},subroFilesInjuredWorked:function(a){this._renderSubroFileDashboard(a,function(a){var b=new App.Views.Files.FormSubro({model:a,defaultTabSelected:"panel-injured-wkr"});App.Helpers.htmlView(b,"#files-tab-container"),b.$el.find('[data-tabname="panel-injured-wkr"]').click()})},subroFilesClient:function(a){this._renderSubroFileDashboard(a,function(a){var b=new App.Views.Files.FormSubro({model:a,defaultTabSelected:"client"});App.Helpers.htmlView(b,"#files-tab-container"),b.$el.find('[data-tabname="client"]').click()})},subroFilesClientRep:function(a){this._renderSubroFileDashboard(a,function(a){var b=new App.Views.Files.FormSubro({model:a,defaultTabSelected:"panel-client-rep"});App.Helpers.htmlView(b,"#files-tab-container"),b.$el.find('[data-tabname="panel-client-rep"]').click()})},subroFilesEmployer:function(a){this._renderSubroFileDashboard(a,function(a){var b=new App.Views.Files.FormSubro({model:a,defaultTabSelected:"panel-employer"});App.Helpers.htmlView(b,"#files-tab-container"),b.$el.find('[data-tabname="panel-employer"]').click()})},subroFilesAttorney:function(a){this._renderSubroFileDashboard(a,function(a){var b=new App.Views.Files.FormSubro({model:a,defaultTabSelected:"panel-subro-atty"});App.Helpers.htmlView(b,"#files-tab-container"),b.$el.find('[data-tabname="panel-subro-atty"]').click()})},subroFilesDefendants:function(a){this._renderSubroFileDashboard(a,function(a){var b=new App.Views.Files.FormSubro({model:a,defaultTabSelected:"panel-def"});App.Helpers.htmlView(b,"#files-tab-container"),b.$el.find('[data-tabname="panel-def"]').click()})},subroFilesAddressPos:function(a){this._renderSubroFileDashboard(a,function(a){var b=new App.Views.Files.FormSubro({model:a,defaultTabSelected:"panel-address-pos"});App.Helpers.htmlView(b,"#files-tab-container"),b.$el.find('[data-tabname="panel-address-pos"]').click()})},editSubroFileCalendarPanel:function(a){this._renderSubroFileDashboard(a,function(a){var b=new App.Views.Files.FormSubro({model:a,defaultTabSelected:"panel-calendar"});App.Helpers.htmlView(b,"#files-tab-container"),b.$el.find('[data-tabname="panel-calendar"]').click()})},subroFilesBillings:function(a){this._renderSubroFileDashboard(a,function(a){var b=new App.Views.Files.FileBilling.Index({fileModel:a});App.Helpers.htmlView(b,"#files-tab-container")})},fileEventCategory:function(a,b){this._renderFileDashboard(a,function(a){var c=new App.Views.Files.EventCategory.EventGeneral({fileModel:a,category:b});App.Helpers.htmlView(c,"#files-tab-container")})},newFileStep1:function(){var a=new App.Views.Files.FormWizardNew;App.Helpers.htmlView(a,"#content")},newFileStep2:function(){var a,b,c=Uit.SessionFlash.get("App.Views.Files.FormWizardNew"),d=new App.Collections.FileTypes,e=new App.Collections.Milestones,f={colFileTypes:d,milestonesList:e};_.isUndefined(c)?Backbone.history.navigate("files/new/step1",{trigger:!0}):Number(c.module)===App.Const.wcFileModule?(a=this._renderFileDashboard(),f.model=a,a.set("relatedFileNumber",c.relatedFileNumber),a.set("module",c.module),b=new App.Views.Files.Form(f),App.Helpers.htmlView(b,"#files-tab-container"),e.module=c.module,d.module=c.module,d.fetch(),e.fetch()):Number(c.module)===App.Const.subroFileModule&&(a=this._renderSubroFileDashboard(),f.model=a,a.set("relatedFileNumber",c.relatedFileNumber),a.set("module",c.module),b=new App.Views.Files.FormSubro(f),App.Helpers.htmlView(b,"#files-tab-container"),e.module=c.module,d.module=c.module,d.fetch(),e.fetch())},fileBillings:function(a){this._renderFileDashboard(a,function(a){var b=new App.Views.Files.FileBilling.Index({fileModel:a});App.Helpers.htmlView(b,"#files-tab-container")})},fileLienGetAll:function(a){this._renderFileDashboard(a,function(a){var b=new App.Views.Files.EventCategory.LiensTableIndex({fileModel:a});App.Helpers.htmlView(b,"#files-tab-container")})},subroFileEvents:function(a,b){this._renderSubroFileDashboard(a,function(c){var d={};_.size(b)>0&&(d=$.deparam(b));var e=new App.Collections.EventTypeCategories;e.moduleID=2,e.fetch();var f=new App.Collections.FileEvents,g=100,h=new App.Views.Files.SubroFileEvents({collection:f,fileModel:c,colEventTypesCategories:e,paginationConstant:g,filterParams:d});App.Helpers.htmlView(h,"#files-tab-container");var i={fileNumber:a,eventOffset:-1,maxRows:-1};_.size(d)>0&&(i=h.handlerPrepareFilterParams()),$.ajax({url:"/api/file_events_controller/get_events_pagination",data:i,success:function(a){h.totalRows=a[1],h.prevTotalRows=0,h.prepopulateData(),f.reset(a[0]),_.size(d)>0&&h.prepopulateFilters(),h.removeLoader()}}),h.showLoader()})},fileEvents:function(a,b){this._renderFileDashboard(a,function(c){var d={};_.size(b)>0&&(d=$.deparam(b));var e=new App.Collections.EventTypeCategories;e.fetch();var f=new App.Collections.FileEvents,g=100,h=new App.Views.Files.FileEvents({collection:f,fileModel:c,colEventTypesCategories:e,paginationConstant:g,filterParams:d});App.Helpers.htmlView(h,"#files-tab-container");var i={fileNumber:a,eventOffset:-1,maxRows:-1};_.size(d)>0&&(i=h.handlerPrepareFilterParams()),$.ajax({url:"/api/file_events_controller/get_events_pagination",data:i,success:function(a){h.totalRows=a[1],h.prevTotalRows=0,h.prepopulateData(),f.reset(a[0]),_.size(d)>0&&h.prepopulateFilters(),h.removeLoader()}}),h.showLoader()})},editEventAlert:function(a,b,c){this.editEvent(a,b,function(a){a.$el.find('a.alert-row[data-alert-id="'+c+'"]').click();var b=setInterval(function(){a.$el.find('.alert-row[data-alert-id="'+c+'"]')&&(a.$el.find('.alert-row[data-alert-id="'+c+'"]').click(),clearInterval(b))},500)})},editEvent:function(a,b,c){this._renderFileDashboard(a,function(d){var e=new App.Models.Event({fileNumber:a,eventID:b}),f=new App.Views.Files.EventTabs.EventForm({model:e,fileModel:d});App.Helpers.htmlView(f,"#files-tab-container");var g=Uit.SessionFlash.get("ignoreCheckRead")?"ignore":"check";e.fetch({data:$.param({fileNumber:a,ignoreCheckRead:g})}),c&&c(f)})},eventBilling:function(a,b){this.editEvent(a,b,function(a){a.$el.find('.nav-tabs a[href="#billing-form-tab"]').tab("show")})},eventLetters:function(a,b){this.editEvent(a,b,function(a){a.$el.find('.nav-tabs a[href="#letters-tab"]').tab("show"),a.showLettersTab()})},currentBilling:function(){var a=new App.Collections.CurrentBilling,b=new App.Views.Billing.CurrentBilling.Index({collection:a});App.Helpers.htmlView(b,"#content")},dailyBilling:function(){var a=new App.Collections.Clients,b=new App.Views.Billing.DailyBilling.Index({clientCol:a});App.Helpers.htmlView(b,"#content"),a.fetch(),b.showLoader()},pastBilling:function(){var a=new App.Collections.PastBilling,b=new App.Views.Billing.PastBilling.Index({collection:a});App.Helpers.htmlView(b,"#content")},reviewedBillsHistory:function(){var a=new App.Collections.ReviewedBillsHistory,b=new App.Views.Billing.BillsHistory.Index({collection:a});App.Helpers.htmlView(b,"#content"),a.fetch()},batchHistory:function g(){var g=new App.Views.Billing.BatchHistory.Index;App.Helpers.htmlView(g,"#content")},snippetsList:function(){var a=new App.Collections.Snippets,b=new App.Views.Settings.Snippets.Index({collection:a});App.Helpers.htmlView(b,"#content"),a.fetch()},hotwords:function(){var a=new App.Collections.Hotwords,b=new App.Models.Hotword,c=new App.Views.Settings.Hotwords.Index({collection:a,model:b});App.Helpers.htmlView(c,"#content"),a.fetch()},event_types:function(){var a=new App.Collections.EventTypeCategories;a.moduleID=-1,a.fetch();var b=new App.Collections.Modules;b.fetch();var c=new App.Collections.EventTypes,d=100,e=new App.Views.Settings.EventTypes.Index({collection:c,colEventTypesCategories:a,paginationConstant:d,colModules:b});App.Helpers.htmlView(e,"#content"),$.ajax({url:"/api/event_types_controller/get_events_types_pagination",data:{eventCategoryID:-1,maxRows:-1,eventTypeOffset:-1},success:function(a){e.totalRows=a[1],e.prevTotalRows=0,e.prepopulateData(),c.reset(a[0]),c.sortBy="eventTypeName",c.sortOrder="asc",c.sort(),e.childTableCol.reset(a[2]),e.childTableCol.sortBy="childTable",e.childTableCol.sort(),e.removeLoader()}}),e.showLoader()},clientEditor:function(){var a=arguments.length<=0||void 0===arguments[0]?!1:arguments[0],b=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],c=new App.Collections.Clients,d=new App.Views.Tools.ClientEditor.Index({collection:c,clickNew:a,clientID:b});App.Helpers.htmlView(d,"#content")},newClient:function(){this.clientEditor(!0)},editClient:function(a){this.clientEditor(!1,a)},monthlyBilling:function(){var a=new App.Helpers.Model,b=new App.Views.Accounting.MonthlyBilling.Index({model:a});App.Helpers.htmlView(b,"#content")},monthlyBillingManagers:function(){var a=new App.Helpers.Model,b=new App.Views.Accounting.MonthlyBillingManagers.Index({model:a});App.Helpers.htmlView(b,"#content")},exceededHours:function(){var a=new App.Views.Accounting.ExceededHours;App.Helpers.htmlView(a,"#content")},paceReport:function h(a){var b=a||"user",c=moment().format("YYYY-MM-DD"),h=new App.Views.Accounting.Pace.Index({date:c,page:b});App.Helpers.htmlView(h,"#content")},complianceReport:function(){var a=new App.Helpers.Model,b=new App.Views.Accounting.ComplianceReport({model:a});App.Helpers.htmlView(b,"#content")},complianceReportManagers:function(){var a=new App.Helpers.Model,b=new App.Views.Accounting.ComplianceReportManagers({model:a});App.Helpers.htmlView(b,"#content")},billingPace:function(a){var b=a||"user",c=new App.Collections.PaceGraph,d=new App.Views.Accounting.BillingPace({collection:c,page:b});App.Helpers.htmlView(d,"#content")},billingOverview:function(){var a=new App.Helpers.Model,b=new App.Views.Accounting.BillingOverview.Index({model:a});App.Helpers.htmlView(b,"#content")},newBilling:function(a,b){Uit.SessionFlash.set("addNewBill",!0),this.editEvent(a,b,function(){Uit.SessionFlash.set("addNewBill",!0)})},editBilling:function(a,b,c){this.editEvent(a,b,function(a){a.$el.find('.nav-tabs a[href="#billing-form-tab"]').tab("show");var b=setInterval(function(){a.$el.find('[data-billingid="'+c+'"]:first').length&&(a.$el.find('[data-billingid="'+c+'"]:first').click(),clearInterval(b))},500)})},newEvent:function(a,b){this._renderFileDashboard(a,function(c){var d=null;if(_.size(b)>0){var e=$.deparam(b);d=e.category}var f=new App.Models.Event({fileNumber:a}),g=new App.Views.Files.EventTabs.EventForm({model:f,fileModel:c,category:d});App.Helpers.htmlView(g,"#files-tab-container")})},indexLetters:function(){var a=new App.Collections.Letters,b=new App.Views.Settings.Letters.Index({collection:a});App.Helpers.htmlView(b,"#content"),a.fetch()},newLetter:function(){var a=new App.Models.Letter,b=new App.Views.Settings.Letters.LetterForm({model:a});App.Helpers.htmlView(b,"#content")},editLetter:function(a){var b=new App.Models.Letter({letterTemplateID:a}),c=new App.Views.Settings.Letters.LetterForm({model:b});App.Helpers.htmlView(c,"#content"),b.fetch()},contactCenterDoctors:function(){var a=new App.Collections.Doctors,b=100,c=new App.Views.Tools.ContactCenter.Doctors.Index({collection:a,paginationConstant:b});App.Helpers.htmlView(c,"#content"),$.ajax({url:"/api/doctors_controller/get_doctors_pagination",data:{offset:b,maxRows:0},success:function(b){c.totalRows=b[1],c.prevTotalRows=0,c.prepopulateData(),a.reset(b[0]),c.create_doctor_table(a),c.removeLoader()}}),c.showLoader()},_renderClientRepFileDashboard:function(a,b,c){var d;return $(".ClientRepFilesShow").length?d=$(".ClientRepFilesShow").data("view"):(d=new App.Views.ClientRep.Files.Show({firm_id:a,fileNumber:b,eventTypeName:c}),App.Helpers.htmlView(d,"#content")),d.model},clientRepFilesIndex:function(){var a=new App.Views.ClientRep.Files.Index;App.Helpers.htmlView(a,"#content")},clientRepFileShow:function(a,b){var c=new App.Views.ClientRep.Files.Show({firm_id:a,fileNumber:b});App.Helpers.htmlView(c,"#content")},clientRepFileEventShow:function(a,b,c,d){var e,f=this._renderClientRepFileDashboard(a,b,c),g={fileModel:f,fileNumber:b,firm_id:a,eventID:d};"timeline"===c&&(e=new App.Views.ClientRep.Files.Timeline.EventShow(g)),"general"===c&&(e=new App.Views.ClientRep.Files.General.EventShow(g)),"medical"===c&&(e=new App.Views.ClientRep.Files.Medical.EventShow(g)),"liens"===c&&(e=new App.Views.ClientRep.Files.Liens.EventShow(g)),"subpoenas"===c&&(e=new App.Views.ClientRep.Files.Subpoenas.EventShow(g)),"depos"===c&&(e=new App.Views.ClientRep.Files.WcDepos.EventShow(g)),"hearings"===c&&(e=new App.Views.ClientRep.Files.WcHearings.EventShow(g)),App.Helpers.htmlView(e,"#content-tab")},clientRepFileEventList:function(a,b,c){var d=new App.Views.ClientRep.Files.Show({firm_id:a,fileNumber:b,eventTypeName:c,triggerShowTab:!0});App.Helpers.htmlView(d,"#content")},uploadFile:function(){var a=new App.Views.ClientRep.UploadFile.Index;App.Helpers.htmlView(a,"#content")},editFileApplicant:function(a){this._renderFileDashboard(a,function(a){var b=new App.Views.Files.Form({model:a,defaultTabSelected:"applicant"});App.Helpers.htmlView(b,"#files-tab-container"),b.$el.find('[data-tabname="applicant"]').click()})},editFileInjuries:function(a){this._renderFileDashboard(a,function(a){var b=new App.Views.Files.Form({model:a,defaultTabSelected:"injuries"});App.Helpers.htmlView(b,"#files-tab-container"),b.$el.find('[data-tabname="injuries"]').click()})},editFileCaseNew:function(a){this._renderFileDashboard(a,function(a){var b=new App.Views.Files.Form({model:a,defaultTabSelected:"injuries"});App.Helpers.htmlView(b,"#files-tab-container");var c=function(){b.$el.find('[data-tabname="injuries"]').click();var a=$(".wc_cases_panel").data("view"),c=a.$el;a.listenToOnce(a.collection,"sync",function(){c.find(".btn-newCase").click()})};c(a.has("fetched")?b:b)})},editFileCase:function(a,b){this._renderFileDashboard(a,function(a){var c=new App.Views.Files.Form({model:a,defaultTabSelected:"injuries"});App.Helpers.htmlView(c,"#files-tab-container");var d=function(a){a.$el.find('[data-tabname="injuries"]').click();var c=$(".wc_cases_panel").data("view"),d=c.$el;c.listenToOnce(c.collection,"sync",function(){d.find('[data-id="'+b+'"]').click()})};a.has("fetched")?d(c):c.listenToOnce(a,"sync",function(){d(c)})})},editFileCaseBodyPart:function(a,b){this._renderFileDashboard(a,function(a){var c=new App.Views.Files.Form({model:a,defaultTabSelected:"injuries"});App.Helpers.htmlView(c,"#files-tab-container");var d=function(a){a.$el.find('[data-tabname="injuries"]').click();var c=$(".cases_panel").data("view"),d=c.$el;c.listenToOnce(c.collection,"sync",function(){d.find('.btn-bodypart-edit[data-bodypartid="'+b+'"]').click()})};a.has("fetched")?d(c):c.listenToOnce(a,"sync",function(){d(c)})})},editFileAA:function(a){this._renderFileDashboard(a,function(a){var b=new App.Views.Files.Form({model:a,defaultTabSelected:"applicant_attorney"});App.Helpers.htmlView(b,"#files-tab-container"),b.$el.find('[data-tabname="applicant_attorney"]').click()})},editFileClientRep:function(a){this._renderFileDashboard(a,function(a){var b=new App.Views.Files.Form({model:a,defaultTabSelected:"panel-client-rep"});App.Helpers.htmlView(b,"#files-tab-container"),b.$el.find('[data-tabname="panel-client-rep"]').click()})},editFileClient:function(a){this._renderFileDashboard(a,function(a){var b=new App.Views.Files.Form({model:a,defaultTabSelected:"client"});App.Helpers.htmlView(b,"#files-tab-container"),b.$el.find('[data-tabname="client"]').click()})},editFileEmployer:function(a){this._renderFileDashboard(a,function(a){var b=new App.Views.Files.Form({model:a,defaultTabSelected:"employer"});App.Helpers.htmlView(b,"#files-tab-container"),b.$el.find('[data-tabname="employer"]').click()})},editFileDA:function(a){this._renderFileDashboard(a,function(a){var b=new App.Views.Files.Form({model:a,defaultTabSelected:"defense_attorney"});App.Helpers.htmlView(b,"#files-tab-container"),b.$el.find('[data-tabname="defense_attorney"]').click()})},editFileCoDef:function(a){this._renderFileDashboard(a,function(a){var b=new App.Views.Files.Form({model:a,defaultTabSelected:"co_defendants"});App.Helpers.htmlView(b,"#files-tab-container"),b.$el.find('[data-tabname="co_defendants"]').click()})},editFileAddressPos:function(a){this._renderFileDashboard(a,function(a){var b=new App.Views.Files.Form({model:a,defaultTabSelected:"address_pos"});App.Helpers.htmlView(b,"#files-tab-container"),b.$el.find('[data-tabname="address_pos"]').click()})},editFileCalendarPanel:function(a){this._renderFileDashboard(a,function(a){var b=new App.Views.Files.Form({model:a,defaultTabSelected:"panel-calendar"});App.Helpers.htmlView(b,"#files-tab-container"),b.$el.find('[data-tabname="panel-calendar"]').click()})},newWordLetter:function(){var a=new App.Models.WordLetter,b=new App.Views.Settings.WordLetters.LetterForm({model:a});App.Helpers.htmlView(b,"#content")},indexWordLetters:function(){var a=new App.Collections.WordLetters,b=new App.Views.Settings.WordLetters.Index({collection:a});App.Helpers.htmlView(b,"#content"),a.fetch()},editWordLetter:function(a){var b=new App.Models.WordLetter({letterTemplateID:a}),c=new App.Views.Settings.WordLetters.LetterForm({model:b});App.Helpers.htmlView(c,"#content"),b.fetch()}}),App.loginModel=new App.Models.Login({});